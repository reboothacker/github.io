function browserSupportsAllFeatures() {
  return window.Promise && window.fetch && window.Symbol && window.Symbol.iterator && Object.entries && Object.fromEntries && Object.assign &&
   typeof [][window.Symbol.iterator] == 'function' && typeof document.querySelectorAll('div')[window.Symbol.iterator] === 'function' 
   && document.body && document.body.classList && document.body.classList.remove
   && document.body.classList.add && document.body.classList.contains;
}

function loadYolMain () {"use strict";function _typeof(obj){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}!function(z){function ve(a){if(!D(a))return Xb;w(a.objectMaxDepth)&&(Xb.objectMaxDepth=Yb(a.objectMaxDepth)?a.objectMaxDepth:NaN),w(a.urlErrorParamsEnabled)&&Ga(a.urlErrorParamsEnabled)&&(Xb.urlErrorParamsEnabled=a.urlErrorParamsEnabled)}function Yb(a){return X(a)&&0<a}function F(a,b){return b=b||Error,function(){var c,d=arguments[0];for(c="["+(a?a+":":"")+d+"] http://errors.angularjs.org/1.8.2/"+(a?a+"/":"")+d,d=1;d<arguments.length;d++){c=c+(1==d?"?":"&")+"p"+(d-1)+"=";var f,e=encodeURIComponent;f=arguments[d],f="function"==typeof f?f.toString().replace(/ \{[\s\S]*$/,""):void 0===f?"undefined":"string"!=typeof f?JSON.stringify(f):f,c+=e(f)}return new b(c)}}function za(a){if(null==a||$a(a))return!1;if(H(a)||C(a)||x&&a instanceof x)return!0;var b="length"in Object(a)&&a.length;return X(b)&&(0<=b&&b-1 in a||"function"==typeof a.item)}function r(a,b,d){var c,e;if(a)if(B(a))for(c in a)"prototype"!==c&&"length"!==c&&"name"!==c&&a.hasOwnProperty(c)&&b.call(d,a[c],c,a);else if(H(a)||za(a)){var f="object"!==_typeof(a);for(c=0,e=a.length;c<e;c++)(f||c in a)&&b.call(d,a[c],c,a)}else if(a.forEach&&a.forEach!==r)a.forEach(b,d,a);else if(Pc(a))for(c in a)b.call(d,a[c],c,a);else if("function"==typeof a.hasOwnProperty)for(c in a)a.hasOwnProperty(c)&&b.call(d,a[c],c,a);else for(c in a)ta.call(a,c)&&b.call(d,a[c],c,a);return a}function Qc(a,b,d){for(var c=Object.keys(a).sort(),e=0;e<c.length;e++)b.call(d,a[c[e]],c[e]);return c}function Zb(a){return function(b,d){a(d,b)}}function we(){return++qb}function $b(a,b,d){for(var c=a.$$hashKey,e=0,f=b.length;e<f;++e){var g=b[e];if(D(g)||B(g))for(var k=Object.keys(g),h=0,l=k.length;h<l;h++){var m=k[h],p=g[m];d&&D(p)?ha(p)?a[m]=new Date(p.valueOf()):ab(p)?a[m]=new RegExp(p):p.nodeName?a[m]=p.cloneNode(!0):ac(p)?a[m]=p.clone():"__proto__"!==m&&(D(a[m])||(a[m]=H(p)?[]:{}),$b(a[m],[p],!0)):a[m]=p}}return c?a.$$hashKey=c:delete a.$$hashKey,a}function S(a){return $b(a,Ha.call(arguments,1),!1)}function xe(a){return $b(a,Ha.call(arguments,1),!0)}function fa(a){return parseInt(a,10)}function bc(a,b){return S(Object.create(a),b)}function E(){}function Ta(a){return a}function ia(a){return function(){return a}}function cc(a){return B(a.toString)&&a.toString!==la}function A(a){return void 0===a}function w(a){return void 0!==a}function D(a){return null!==a&&"object"===_typeof(a)}function Pc(a){return null!==a&&"object"===_typeof(a)&&!Rc(a)}function C(a){return"string"==typeof a}function X(a){return"number"==typeof a}function ha(a){return"[object Date]"===la.call(a)}function H(a){return Array.isArray(a)||a instanceof Array}function dc(a){switch(la.call(a)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return a instanceof Error}}function B(a){return"function"==typeof a}function ab(a){return"[object RegExp]"===la.call(a)}function $a(a){return a&&a.window===a}function bb(a){return a&&a.$evalAsync&&a.$watch}function Ga(a){return"boolean"==typeof a}function ye(a){return a&&X(a.length)&&ze.test(la.call(a))}function ac(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function Ae(a){var b={};a=a.split(",");var d;for(d=0;d<a.length;d++)b[a[d]]=!0;return b}function ua(a){return K(a.nodeName||a[0]&&a[0].nodeName)}function cb(a,b){var d=a.indexOf(b);return 0<=d&&a.splice(d,1),d}function Ia(a,b,d){function c(a,b,c){if(0>--c)return"...";var f,d=b.$$hashKey;if(H(a)){f=0;for(var g=a.length;f<g;f++)b.push(e(a[f],c))}else if(Pc(a))for(f in a)b[f]=e(a[f],c);else if(a&&"function"==typeof a.hasOwnProperty)for(f in a)a.hasOwnProperty(f)&&(b[f]=e(a[f],c));else for(f in a)ta.call(a,f)&&(b[f]=e(a[f],c));return d?b.$$hashKey=d:delete b.$$hashKey,b}function e(a,b){if(!D(a))return a;var d=g.indexOf(a);if(-1!==d)return k[d];if($a(a)||bb(a))throw oa("cpws");var d=!1,e=f(a);return void 0===e&&(e=H(a)?[]:Object.create(Rc(a)),d=!0),g.push(a),k.push(e),d?c(a,e,b):e}function f(a){switch(la.call(a)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new a.constructor(e(a.buffer),a.byteOffset,a.length);case"[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);return new Uint8Array(b).set(new Uint8Array(a)),b}return a.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new a.constructor(a.valueOf());case"[object RegExp]":return b=new RegExp(a.source,a.toString().match(/[^/]*$/)[0]),b.lastIndex=a.lastIndex,b;case"[object Blob]":return new a.constructor([a],{type:a.type})}if(B(a.cloneNode))return a.cloneNode(!0)}var g=[],k=[];if(d=Yb(d)?d:NaN,b){if(ye(b)||"[object ArrayBuffer]"===la.call(b))throw oa("cpta");if(a===b)throw oa("cpi");return H(b)?b.length=0:r(b,function(a,c){"$$hashKey"!==c&&delete b[c]}),g.push(a),k.push(b),c(a,b,d)}return e(a,d)}function ec(a,b){return a===b||a!==a&&b!==b}function va(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var c,d=_typeof(a);if(d===_typeof(b)&&"object"===d){if(!H(a)){if(ha(a))return!!ha(b)&&ec(a.getTime(),b.getTime());if(ab(a))return!!ab(b)&&a.toString()===b.toString();if(bb(a)||bb(b)||$a(a)||$a(b)||H(b)||ha(b)||ab(b))return!1;d=T();for(c in a)if("$"!==c.charAt(0)&&!B(a[c])){if(!va(a[c],b[c]))return!1;d[c]=!0}for(c in b)if(!(c in d)&&"$"!==c.charAt(0)&&w(b[c])&&!B(b[c]))return!1;return!0}if(!H(b))return!1;if((d=a.length)===b.length){for(c=0;c<d;c++)if(!va(a[c],b[c]))return!1;return!0}}return!1}function db(a,b,d){return a.concat(Ha.call(b,d))}function Va(a,b){var d=2<arguments.length?Ha.call(arguments,2):[];return!B(b)||b instanceof RegExp?b:d.length?function(){return arguments.length?b.apply(a,db(d,arguments,0)):b.apply(a,d)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function Sc(a,b){var d=b;return"string"==typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?d=void 0:$a(b)?d="$WINDOW":b&&z.document===b?d="$DOCUMENT":bb(b)&&(d="$SCOPE"),d}function eb(a,b){if(!A(a))return X(b)||(b=b?2:null),JSON.stringify(a,Sc,b)}function Tc(a){return C(a)?JSON.parse(a):a}function fc(a,b){a=a.replace(Be,"");var d=Date.parse("Jan 01, 1970 00:00:00 "+a)/6e4;return Y(d)?b:d}function Uc(a,b){return a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+b),a}function gc(a,b,d){d=d?-1:1;var c=a.getTimezoneOffset();return b=fc(b,c),Uc(a,d*(b-c))}function Aa(a){a=x(a).clone().empty();var b=x("<div></div>").append(a).html();try{return a[0].nodeType===Pa?K(b):b.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(a,b){return"<"+K(b)})}catch(d){return K(b)}}function Vc(a){try{return decodeURIComponent(a)}catch(b){}}function hc(a){var b={};return r((a||"").split("&"),function(a){var c,e,f;a&&(e=a=a.replace(/\+/g,"%20"),c=a.indexOf("="),-1!==c&&(e=a.substring(0,c),f=a.substring(c+1)),e=Vc(e),w(e)&&(f=!w(f)||Vc(f),ta.call(b,e)?H(b[e])?b[e].push(f):b[e]=[b[e],f]:b[e]=f))}),b}function Ce(a){var b=[];return r(a,function(a,c){H(a)?r(a,function(a){b.push(ba(c,!0)+(!0===a?"":"="+ba(a,!0)))}):b.push(ba(c,!0)+(!0===a?"":"="+ba(a,!0)))}),b.length?b.join("&"):""}function ic(a){return ba(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ba(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function De(a,b){var d,c,e=Qa.length;for(c=0;c<e;++c)if(d=Qa[c]+b,C(d=a.getAttribute(d)))return d;return null}function Ee(a,b){var d,c,e={};r(Qa,function(b){b+="app",!d&&a.hasAttribute&&a.hasAttribute(b)&&(d=a,c=a.getAttribute(b))}),r(Qa,function(b){b+="app";var e;!d&&(e=a.querySelector("["+b.replace(":","\\:")+"]"))&&(d=e,c=e.getAttribute(b))}),d&&(Fe?(e.strictDi=null!==De(d,"strict-di"),b(d,c?[c]:[],e)):z.console.error("AngularJS: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match."))}function Wc(a,b,d){D(d)||(d={}),d=S({strictDi:!1},d);var c=function(){if(a=x(a),a.injector()){var c=a[0]===z.document?"document":Aa(a);throw oa("btstrpd",c.replace(/</,"&lt;").replace(/>/,"&gt;"))}return b=b||[],b.unshift(["$provide",function(b){b.value("$rootElement",a)}]),d.debugInfoEnabled&&b.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]),b.unshift("ng"),c=fb(b,d.strictDi),c.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),c},e=/^NG_ENABLE_DEBUG_INFO!/,f=/^NG_DEFER_BOOTSTRAP!/;if(z&&e.test(z.name)&&(d.debugInfoEnabled=!0,z.name=z.name.replace(e,"")),z&&!f.test(z.name))return c();z.name=z.name.replace(f,""),ca.resumeBootstrap=function(a){return r(a,function(a){b.push(a)}),c()},B(ca.resumeDeferredBootstrap)&&ca.resumeDeferredBootstrap()}function Ge(){z.name="NG_ENABLE_DEBUG_INFO!"+z.name,z.location.reload()}function He(a){if(!(a=ca.element(a).injector()))throw oa("test");return a.get("$$testability")}function Xc(a,b){return b=b||"_",a.replace(Ie,function(a,c){return(c?b:"")+a.toLowerCase()})}function Ke(){U.legacyXHTMLReplacement=!0}function gb(a,b,d){if(!a)throw oa("areq",b||"?",d||"required");return a}function tb(a,b,d){return d&&H(a)&&(a=a[a.length-1]),gb(B(a),b,"not a function, got "+(a&&"object"===_typeof(a)?a.constructor.name||"Object":_typeof(a))),a}function Ja(a,b){if("hasOwnProperty"===a)throw oa("badname",b)}function Le(a,b,d){if(!b)return a;b=b.split(".");for(var c,e=a,f=b.length,g=0;g<f;g++)c=b[g],a&&(a=(e=a)[c]);return!d&&B(a)?Va(e,a):a}function ub(a){for(var c,b=a[0],d=a[a.length-1],e=1;b!==d&&(b=b.nextSibling);e++)(c||a[e]!==b)&&(c||(c=x(Ha.call(a,0,e))),c.push(b));return c||a}function T(){return Object.create(null)}function jc(a){if(null==a)return"";switch(_typeof(a)){case"string":break;case"number":a=""+a;break;default:a=!cc(a)||H(a)||ha(a)?eb(a):a.toString()}return a}function Me(a){function b(a,b,c){return a[b]||(a[b]=c())}var d=F("$injector"),c=F("ng");return a=b(a,"angular",Object),a.$$minErr=a.$$minErr||F,b(a,"module",function(){var a={};return function(f,g,k){var h={};if("hasOwnProperty"===f)throw c("badname","module");return g&&a.hasOwnProperty(f)&&(a[f]=null),b(a,f,function(){function a(b,c,d,f){return f||(f=e),function(){return f[d||"push"]([b,c,arguments]),t}}function b(a,c,d){return d||(d=e),function(b,e){return e&&B(e)&&(e.$$moduleName=f),d.push([a,c,arguments]),t}}if(!g)throw d("nomod",f);var e=[],n=[],s=[],G=a("$injector","invoke","push",n),t={_invokeQueue:e,_configBlocks:n,_runBlocks:s,info:function(a){if(w(a)){if(!D(a))throw c("aobj","value");return h=a,this}return h},requires:g,name:f,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:b("$provide","decorator",n),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),component:b("$compileProvider","component"),config:G,run:function(a){return s.push(a),this}};return k&&G(k),t})}})}function ja(a,b){if(H(a)){b=b||[];for(var d=0,c=a.length;d<c;d++)b[d]=a[d]}else if(D(a))for(d in b=b||{},a)"$"===d.charAt(0)&&"$"===d.charAt(1)||(b[d]=a[d]);return b||a}function Ne(a,b){var d=[];return Yb(b)&&(a=ca.copy(a,null,b)),JSON.stringify(a,function(a,b){if(b=Sc(a,b),D(b)){if(0<=d.indexOf(b))return"...";d.push(b)}return b})}function xb(a,b){return b.toUpperCase()}function yb(a){return a.replace(qg,xb)}function mc(a){return 1===(a=a.nodeType)||!a||9===a}function gd(a,b){var d,c,e,k,f=b.createDocumentFragment(),g=[];if(nc.test(a)){if(d=f.appendChild(b.createElement("div")),c=(rg.exec(a)||["",""])[1].toLowerCase(),e=U.legacyXHTMLReplacement?a.replace(sg,"<$1></$2>"):a,10>wa)for(c=hb[c]||hb._default,d.innerHTML=c[1]+e+c[2],k=c[0];k--;)d=d.firstChild;else{for(c=qa[c]||[],k=c.length;-1<--k;)d.appendChild(z.document.createElement(c[k])),d=d.firstChild;d.innerHTML=e}g=db(g,d.childNodes),d=f.firstChild,d.textContent=""}else g.push(b.createTextNode(a));return f.textContent="",f.innerHTML="",r(g,function(a){f.appendChild(a)}),f}function U(a){if(a instanceof U)return a;var b;if(C(a)&&(a=V(a),b=!0),!(this instanceof U)){if(b&&"<"!==a.charAt(0))throw oc("nosel");return new U(a)}if(b){b=z.document;var d;a=(d=tg.exec(a))?[b.createElement(d[1])]:(d=gd(a,b))?d.childNodes:[],pc(this,a)}else B(a)?hd(a):pc(this,a)}function qc(a){return a.cloneNode(!0)}function zb(a,b){!b&&mc(a)&&x.cleanData([a]),a.querySelectorAll&&x.cleanData(a.querySelectorAll("*"))}function id(a){for(var b in a)return!1;return!0}function jd(a){var b=a.ng339,d=b&&Ka[b],c=d&&d.events,d=d&&d.data;d&&!id(d)||c&&!id(c)||(delete Ka[b],a.ng339=void 0)}function kd(a,b,d,c){if(w(c))throw oc("offargs");var e=(c=Ab(a))&&c.events,f=c&&c.handle;if(f){if(b){var g=function(b){var c=e[b];w(d)&&cb(c||[],d),w(d)&&c&&0<c.length||(a.removeEventListener(b,f),delete e[b])};r(b.split(" "),function(a){g(a),Bb[a]&&g(Bb[a])})}else for(b in e)"$destroy"!==b&&a.removeEventListener(b,f),delete e[b];jd(a)}}function rc(a,b){var d=a.ng339;(d=d&&Ka[d])&&(b?delete d.data[b]:d.data={},jd(a))}function Ab(a,b){var d=a.ng339,d=d&&Ka[d];return b&&!d&&(a.ng339=d=++ug,d=Ka[d]={events:{},data:{},handle:void 0}),d}function sc(a,b,d){if(mc(a)){var c,e=w(d),f=!e&&b&&!D(b),g=!b;if(a=(a=Ab(a,!f))&&a.data,e)a[yb(b)]=d;else{if(g)return a;if(f)return a&&a[yb(b)];for(c in b)a[yb(c)]=b[c]}}}function Cb(a,b){return!!a.getAttribute&&-1<(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")}function Db(a,b){if(b&&a.setAttribute){var d=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),c=d;r(b.split(" "),function(a){a=V(a),c=c.replace(" "+a+" "," ")}),c!==d&&a.setAttribute("class",V(c))}}function Eb(a,b){if(b&&a.setAttribute){var d=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," "),c=d;r(b.split(" "),function(a){a=V(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),c!==d&&a.setAttribute("class",V(c))}}function pc(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var d=b.length;if("number"==typeof d&&b.window!==b){if(d)for(var c=0;c<d;c++)a[a.length++]=b[c]}else a[a.length++]=b}}function ld(a,b){return Fb(a,"$"+(b||"ngController")+"Controller")}function Fb(a,b,d){for(9===a.nodeType&&(a=a.documentElement),b=H(b)?b:[b];a;){for(var c=0,e=b.length;c<e;c++)if(w(d=x.data(a,b[c])))return d;a=a.parentNode||11===a.nodeType&&a.host}}function md(a){for(zb(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Gb(a,b){b||zb(a);var d=a.parentNode;d&&d.removeChild(a)}function vg(a,b){b=b||z,"complete"===b.document.readyState?b.setTimeout(a):x(b).on("load",a)}function hd(a){function b(){z.document.removeEventListener("DOMContentLoaded",b),z.removeEventListener("load",b),a()}"complete"===z.document.readyState?z.setTimeout(a):(z.document.addEventListener("DOMContentLoaded",b),z.addEventListener("load",b))}function nd(a,b){var d=Hb[b.toLowerCase()];return d&&od[ua(a)]&&d}function wg(a,b){var d=function(c,_d){c.isDefaultPrevented=function(){return c.defaultPrevented};var f=b[_d||c.type],g=f?f.length:0;if(g){if(A(c.immediatePropagationStopped)){var k=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0,c.stopPropagation&&c.stopPropagation(),k&&k.call(c)}}c.isImmediatePropagationStopped=function(){return!0===c.immediatePropagationStopped};var h=f.specialHandlerWrapper||xg;1<g&&(f=ja(f));for(var l=0;l<g;l++)c.isImmediatePropagationStopped()||h(a,c,f[l])}};return d.elem=a,d}function xg(a,b,d){d.call(a,b)}function yg(a,b,d){var c=b.relatedTarget;c&&(c===a||zg.call(a,c))||d.call(a,b)}function ng(){this.$get=function(){return S(U,{hasClass:function(a,b){return a.attr&&(a=a[0]),Cb(a,b)},addClass:function(a,b){return a.attr&&(a=a[0]),Eb(a,b)},removeClass:function(a,b){return a.attr&&(a=a[0]),Db(a,b)}})}}function La(a,b){var d=a&&a.$$hashKey;return d?("function"==typeof d&&(d=a.$$hashKey()),d):(d=_typeof(a),d="function"===d||"object"===d&&null!==a?a.$$hashKey=d+":"+(b||we)():d+":"+a)}function pd(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}function qd(a){return a=Function.prototype.toString.call(a).replace(Ag,""),a.match(Bg)||a.match(Cg)}function Dg(a){return(a=qd(a))?"function("+(a[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function fb(a,b){function d(a){return function(b,c){if(!D(b))return a(b,c);r(b,Zb(a))}}function c(a,b){if(Ja(a,"service"),(B(b)||H(b))&&(b=n.instantiate(b)),!b.$get)throw Ca("pget",a);return p[a+"Provider"]=b}function e(a,b){return function(){var c=t.invoke(b,this);if(A(c))throw Ca("undef",a);return c}}function f(a,b,d){return c(a,{$get:!1!==d?e(a,b):b})}function g(a){gb(A(a)||H(a),"modulesToLoad","not an array");var c,b=[];return r(a,function(a){function d(a){var b,c;for(b=0,c=a.length;b<c;b++){var e=a[b],f=n.get(e[0]);f[e[1]].apply(f,e[2])}}if(!m.get(a)){m.set(a,!0);try{C(a)?(c=lc(a),t.modules[a]=c,b=b.concat(g(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):B(a)?b.push(n.invoke(a)):H(a)?b.push(n.invoke(a)):tb(a,"module")}catch(e){throw H(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1===e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ca("modulerr",a,e.stack||e.message||e)}}}),b}function k(a,c){function d(b,e){if(a.hasOwnProperty(b)){if(a[b]===h)throw Ca("cdep",b+" <- "+l.join(" <- "));return a[b]}try{return l.unshift(b),a[b]=h,a[b]=c(b,e),a[b]}catch(f){throw a[b]===h&&delete a[b],f}finally{l.shift()}}function e(a,c,f){var g=[];a=fb.$$annotate(a,b,f);for(var h=0,k=a.length;h<k;h++){var l=a[h];if("string"!=typeof l)throw Ca("itkn",l);g.push(c&&c.hasOwnProperty(l)?c[l]:d(l,f))}return g}return{invoke:function(a,b,c,d){if("string"==typeof c&&(d=c,c=null),c=e(a,c,d),H(a)&&(a=a[a.length-1]),d=a,wa||"function"!=typeof d)d=!1;else{var f=d.$$ngIsClass;Ga(f)||(f=d.$$ngIsClass=/^class\b/.test(Function.prototype.toString.call(d))),d=f}return d?(c.unshift(null),new(Function.prototype.bind.apply(a,c))):a.apply(b,c)},instantiate:function(a,b,c){var d=H(a)?a[a.length-1]:a;return a=e(a,b,c),a.unshift(null),new(Function.prototype.bind.apply(d,a))},get:d,annotate:fb.$$annotate,has:function(b){return p.hasOwnProperty(b+"Provider")||a.hasOwnProperty(b)}}}b=!0===b;var h={},l=[],m=new Ib,p={$provide:{provider:d(c),factory:d(f),service:d(function(a,b){return f(a,["$injector",function(a){return a.instantiate(b)}])}),value:d(function(a,b){return f(a,ia(b),!1)}),constant:d(function(a,b){Ja(a,"constant"),p[a]=b,s[a]=b}),decorator:function(a,b){var c=n.get(a+"Provider"),d=c.$get;c.$get=function(){var a=t.invoke(d,c);return t.invoke(b,null,{$delegate:a})}}}},n=p.$injector=k(p,function(a,b){throw ca.isString(b)&&l.push(b),Ca("unpr",l.join(" <- "))}),s={},G=k(s,function(a,b){var c=n.get(a+"Provider",b);return t.invoke(c.$get,c,void 0,a)}),t=G;p.$injectorProvider={$get:ia(G)},t.modules=n.modules=T();var N=g(a),t=G.get("$injector");return t.strictDi=b,r(N,function(a){a&&t.invoke(a)}),t.loadNewModules=function(a){r(g(a),function(a){a&&t.invoke(a)})},t}function Bf(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,d,c){function e(a){var b=null;return Array.prototype.some.call(a,function(a){if("a"===ua(a))return b=a,!0}),b}function f(a){if(a){a.scrollIntoView();var c;c=g.yOffset,B(c)?c=c():ac(c)?(c=c[0],c="fixed"!==b.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):X(c)||(c=0),c&&(a=a.getBoundingClientRect().top,b.scrollBy(0,a-c))}else b.scrollTo(0,0)}function g(a){a=C(a)?a:X(a)?a.toString():d.hash();var b;a?(b=k.getElementById(a))?f(b):(b=e(k.getElementsByName(a)))?f(b):"top"===a&&f(null):f(null)}var k=b.document;return a&&c.$watch(function(){return d.hash()},function(a,b){a===b&&""===a||vg(function(){c.$evalAsync(g)})}),g}]}function ib(a,b){return a||b?a?b?(H(a)&&(a=a.join(" ")),H(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function Eg(a){C(a)&&(a=a.split(" "));var b=T();return r(a,function(a){a.length&&(b[a]=!0)}),b}function ra(a){return D(a)?a:{}}function Fg(a,b,d,c,e){function f(){pa=null,k()}function g(){t=y(),t=A(t)?null:t,va(t,P)&&(t=P),N=P=t}function k(){var a=N;g(),v===h.url()&&a===t||(v=h.url(),N=t,r(J,function(a){a(h.url(),t)}))}var h=this,l=a.location,m=a.history,p=a.setTimeout,n=a.clearTimeout,s={},G=e(d);h.isMock=!1,h.$$completeOutstandingRequest=G.completeTask,h.$$incOutstandingRequestCount=G.incTaskCount,h.notifyWhenNoOutstandingRequests=G.notifyWhenNoPendingTasks;var t,N,v=l.href,kc=b.find("base"),pa=null,y=c.history?function(){try{return m.state}catch(a){}}:E;g(),h.url=function(b,d,e){if(A(e)&&(e=null),l!==a.location&&(l=a.location),m!==a.history&&(m=a.history),b){var f=N===e;if(b=ga(b).href,v===b&&(!c.history||f))return h;var k=v&&Da(v)===Da(b);return v=b,N=e,!c.history||k&&f?(k||(pa=b),d?l.replace(b):k?(d=l,e=b,f=e.indexOf("#"),e=-1===f?"":e.substr(f),d.hash=e):l.href=b,l.href!==b&&(pa=b)):(m[d?"replaceState":"pushState"](e,"",b),g()),pa&&(pa=b),h}return(pa||l.href).replace(/#$/,"")},h.state=function(){return t};var J=[],I=!1,P=null;h.onUrlChange=function(b){return I||(c.history&&x(a).on("popstate",f),x(a).on("hashchange",f),I=!0),J.push(b),b},h.$$applicationDestroyed=function(){x(a).off("hashchange popstate",f)},h.$$checkUrlChange=k,h.baseHref=function(){var a=kc.attr("href");return a?a.replace(/^(https?:)?\/\/[^/]*/,""):""},h.defer=function(a,b,c){var d;return b=b||0,c=c||G.DEFAULT_TASK_TYPE,G.incTaskCount(c),d=p(function(){delete s[d],G.completeTask(a,c)},b),s[d]=c,d},h.defer.cancel=function(a){if(s.hasOwnProperty(a)){var b=s[a];return delete s[a],n(a),G.completeTask(E,b),!0}return!1}}function If(){this.$get=["$window","$log","$sniffer","$document","$$taskTrackerFactory",function(a,b,d,c,e){return new Fg(a,c,b,d,e)}]}function Jf(){this.$get=function(){function a(a,c){function e(a){a!==p&&(n?n===a&&(n=a.n):n=a,f(a.n,a.p),f(a,p),p=a,p.n=null)}function f(a,b){a!==b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw F("$cacheFactory")("iid",a);var g=0,k=S({},c,{id:a}),h=T(),l=c&&c.capacity||Number.MAX_VALUE,m=T(),p=null,n=null;return b[a]={put:function(a,b){if(!A(b)){if(l<Number.MAX_VALUE){e(m[a]||(m[a]={key:a}))}return a in h||g++,h[a]=b,g>l&&this.remove(n.key),b}},get:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;e(b)}return h[a]},remove:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;b===p&&(p=b.p),b===n&&(n=b.n),f(b.n,b.p),delete m[a]}a in h&&(delete h[a],g--)},removeAll:function(){h=T(),g=0,m=T(),p=n=null},destroy:function(){m=k=h=null,delete b[a]},info:function(){return S({},k,{size:g})}}}var b={};return a.info=function(){var a={};return r(b,function(b,e){a[e]=b.info()}),a},a.get=function(a){return b[a]},a}}function hg(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Zc(a,b){function d(a,b,c){var d=/^([@&]|[=<](\*?))(\??)\s*([\w$]*)$/,e=T();return r(a,function(a,f){if((a=a.trim())in p)e[f]=p[a];else{var g=a.match(d);if(!g)throw $("iscp",b,f,a,c?"controller bindings definition":"isolate scope definition");e[f]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||f},g[4]&&(p[a]=e[f])}}),e}function c(a){var b=a.charAt(0);if(!b||b!==K(b))throw $("baddir",a);if(a!==a.trim())throw $("baddir",a)}function e(a){var b=a.require||a.controller&&a.name;return!H(b)&&D(b)&&r(b,function(a,c){var d=a.match(l);a.substring(d[0].length)||(b[c]=d[0]+c)}),b}var f={},g=/^\s*directive:\s*([\w-]+)\s+(.*)$/,k=/(([\w-]+)(?::([^;]+))?;?)/,h=Ae("ngSrc,ngSrcset,src,srcset"),l=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,m=/^(on[a-z]+|formaction)$/,p=T();this.directive=function pa(b,d){return gb(b,"name"),Ja(b,"directive"),C(b)?(c(b),gb(d,"directiveFactory"),f.hasOwnProperty(b)||(f[b]=[],a.factory(b+"Directive",["$injector","$exceptionHandler",function(a,c){var d=[];return r(f[b],function(f,g){try{var h=a.invoke(f);B(h)?h={compile:ia(h)}:!h.compile&&h.link&&(h.compile=ia(h.link)),h.priority=h.priority||0,h.index=g,h.name=h.name||b,h.require=e(h);var k=h,l=h.restrict;if(l&&(!C(l)||!/[EACM]/.test(l)))throw $("badrestrict",l,b);k.restrict=l||"EA",h.$$moduleName=f.$$moduleName,d.push(h)}catch(m){c(m)}}),d}])),f[b].push(d)):r(b,Zb(pa)),this},this.component=function y(a,b){function c(a){function e(b){return B(b)||H(b)?function(c,d){return a.invoke(b,this,{$element:c,$attrs:d})}:b}var f=b.template||b.templateUrl?b.template:"",g={controller:d,controllerAs:Gg(b.controller)||b.controllerAs||"$ctrl",template:e(f),templateUrl:e(b.templateUrl),transclude:b.transclude,scope:{},bindToController:b.bindings||{},restrict:"E",require:b.require};return r(b,function(a,b){"$"===b.charAt(0)&&(g[b]=a)}),g}if(!C(a))return r(a,Zb(Va(this,y))),this;var d=b.controller||function(){};return r(b,function(a,b){"$"===b.charAt(0)&&(c[b]=a,B(d)&&(d[b]=a))}),c.$inject=["$injector"],this.directive(a,c)},this.aHrefSanitizationTrustedUrlList=function(a){return w(a)?(b.aHrefSanitizationTrustedUrlList(a),this):b.aHrefSanitizationTrustedUrlList()},Object.defineProperty(this,"aHrefSanitizationWhitelist",{get:function(){return this.aHrefSanitizationTrustedUrlList},set:function(a){this.aHrefSanitizationTrustedUrlList=a}}),this.imgSrcSanitizationTrustedUrlList=function(a){return w(a)?(b.imgSrcSanitizationTrustedUrlList(a),this):b.imgSrcSanitizationTrustedUrlList()},Object.defineProperty(this,"imgSrcSanitizationWhitelist",{get:function(){return this.imgSrcSanitizationTrustedUrlList},set:function(a){this.imgSrcSanitizationTrustedUrlList=a}});var n=!0;this.debugInfoEnabled=function(a){return w(a)?(n=a,this):n};var s=!1;this.strictComponentBindingsEnabled=function(a){return w(a)?(s=a,this):s};var G=10;this.onChangesTtl=function(a){return arguments.length?(G=a,this):G};var t=!0;this.commentDirectivesEnabled=function(a){return arguments.length?(t=a,this):t};var N=!0;this.cssClassDirectivesEnabled=function(a){return arguments.length?(N=a,this):N};var v=T();this.addPropertySecurityContext=function(a,b,c){var d=a.toLowerCase()+"|"+b.toLowerCase();if(d in v&&v[d]!==c)throw $("ctxoverride",a,b,v[d],c);return v[d]=c,this},function(){function a(b,c){r(c,function(a){v[a.toLowerCase()]=b})}a(W.HTML,["iframe|srcdoc","*|innerHTML","*|outerHTML"]),a(W.CSS,["*|style"]),a(W.URL,"area|href area|ping a|href a|ping blockquote|cite body|background del|cite input|src ins|cite q|cite".split(" ")),a(W.MEDIA_URL,"audio|src img|src img|srcset source|src source|srcset track|src video|src video|poster".split(" ")),a(W.RESOURCE_URL,"*|formAction applet|code applet|codebase base|href embed|src frame|src form|action head|profile html|manifest iframe|src link|href media|src object|codebase object|data script|src".split(" "))}(),this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate",function(a,b,c,e,p,M,L,u,R){function q(){try{if(!--Ja)throw Ua=void 0,$("infchng",G);L.$apply(function(){for(var a=0,b=Ua.length;a<b;++a)try{Ua[a]()}catch(d){c(d)}Ua=void 0})}finally{Ja++}}function ma(a,b){if(!a)return a;if(!C(a))throw $("srcset",b,a.toString());for(var c="",d=V(a),e=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,e=/\s/.test(d)?e:/(,)/,d=d.split(e),e=Math.floor(d.length/2),f=0;f<e;f++)var g=2*f,c=c+u.getTrustedMediaUrl(V(d[g])),c=c+" "+V(d[g+1]);return d=V(d[2*f]).split(/\s/),c+=u.getTrustedMediaUrl(V(d[0])),2===d.length&&(c+=" "+V(d[1])),c}function w(a,b){if(b){var d,e,f,c=Object.keys(b);for(d=0,e=c.length;d<e;d++)f=c[d],this[f]=b[f]}else this.$attr={};this.$$element=a}function O(a,b,c){Fa.innerHTML="<span "+b+">",b=Fa.firstChild.attributes;var d=b[0];b.removeNamedItem(d.name),d.value=c,a.attributes.setNamedItem(d)}function sa(a,b){try{a.addClass(b)}catch(c){}}function da(a,b,c,d,e){a instanceof x||(a=x(a));var f=Xa(a,b,a,c,d,e);da.$$addScopeClass(a);var g=null;return function(b,c,d){if(!a)throw $("multilink");gb(b,"scope"),e&&e.needsNewScope&&(b=b.$parent.$new()),d=d||{};var h=d.parentBoundTranscludeFn,k=d.transcludeControllers;if(d=d.futureParentElement,h&&h.$$boundTransclude&&(h=h.$$boundTransclude),g||(g=(d=d&&d[0])&&"foreignobject"!==ua(d)&&la.call(d).match(/SVG/)?"svg":"html"),d="html"!==g?x(ja(g,x("<div></div>").append(a).html())):c?Wa.clone.call(a):a,k)for(var l in k)d.data("$"+l+"Controller",k[l].instance);return da.$$addScopeInfo(d,b),c&&c(d,b),f&&f(b,d,d,h),c||(a=f=null),d}}function Xa(a,b,c,d,e,f){function g(a,c,d,e){var f,k,l,m,p,I,t;if(n)for(t=Array(c.length),m=0;m<h.length;m+=3)f=h[m],t[f]=c[f];else t=c;for(m=0,p=h.length;m<p;)k=t[h[m++]],c=h[m++],f=h[m++],c?(c.scope?(l=a.$new(),da.$$addScopeInfo(x(k),l)):l=a,I=c.transcludeOnThisElement?ka(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?ka(a,b):null,c(f,l,k,d,I)):f&&f(a,k.childNodes,void 0,e)}for(var l,m,p,I,n,h=[],k=H(a)||a instanceof x,t=0;t<a.length;t++)l=new w,11===wa&&jb(a,t,k),m=tc(a[t],[],l,0===t?d:void 0,e),(f=m.length?aa(m,a[t],l,b,c,null,[],[],f):null)&&f.scope&&da.$$addScopeClass(l.$$element),l=f&&f.terminal||!(p=a[t].childNodes)||!p.length?null:Xa(p,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b),(f||l)&&(h.push(t,f,l),I=!0,n=n||f),f=null;return I?g:null}function jb(a,b,c){var f,d=a[b],e=d.parentNode;if(d.nodeType===Pa)for(;(f=e?d.nextSibling:a[b+1])&&f.nodeType===Pa;)d.nodeValue+=f.nodeValue,f.parentNode&&f.parentNode.removeChild(f),c&&f===a[b+1]&&a.splice(b+1,1)}function ka(a,b,c){function d(e,f,g,h,k){return e||(e=a.$new(!1,k),e.$$transcluded=!0),b(e,f,{parentBoundTranscludeFn:c,transcludeControllers:g,futureParentElement:h})}var f,e=d.$$slots=T();for(f in b.$$slots)e[f]=b.$$slots[f]?ka(a,b.$$slots[f],c):null;return d}function tc(a,b,d,e,f){var h,g=d.$attr;switch(a.nodeType){case 1:h=ua(a),Y(b,xa(h),"E",e,f);for(var l,m,n,t,J,s=a.attributes,v=0,G=s&&s.length;v<G;v++){var M,P=!1,N=!1,r=!1,y=!1,u=!1;l=s[v],m=l.name,t=l.value,n=xa(m.toLowerCase()),(J=n.match(Ra))?(r="Attr"===J[1],y="Prop"===J[1],u="On"===J[1],m=m.replace(rd,"").toLowerCase().substr(4+J[1].length).replace(/_(.)/g,function(a,b){return b.toUpperCase()})):(M=n.match(Sa))&&ca(M[1])&&(P=m,N=m.substr(0,m.length-5)+"end",m=m.substr(0,m.length-6)),y||u?(d[n]=t,g[n]=l.name,y?Ea(a,b,n,m):b.push(sd(p,L,c,n,m,!1))):(n=xa(m.toLowerCase()),g[n]=m,!r&&d.hasOwnProperty(n)||(d[n]=t,nd(a,n)&&(d[n]=!0)),Ia(a,b,t,n,r),Y(b,n,"A",e,f,P,N))}if("input"===h&&"hidden"===a.getAttribute("type")&&a.setAttribute("autocomplete","off"),!Qa)break;if(g=a.className,D(g)&&(g=g.animVal),C(g)&&""!==g)for(;a=k.exec(g);)n=xa(a[2]),Y(b,n,"C",e,f)&&(d[n]=V(a[3])),g=g.substr(a.index+a[0].length);break;case Pa:na(b,a.nodeValue);break;case 8:if(!Oa)break;F(a,b,d,e,f)}return b.sort(ia),b}function F(a,b,c,d,e){try{var f=g.exec(a.nodeValue);if(f){var h=xa(f[1]);Y(b,h,"M",d,e)&&(c[h]=V(f[2]))}}catch(k){}}function U(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b))do{if(!a)throw $("uterdir",b,c);1===a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(0<e);else d.push(a);return x(d)}function W(a,b,c){return function(d,e,f,g,h){return e=U(e[0],b,c),a(d,e,f,g,h)}}function Z(a,b,c,d,e,f){var g;return a?da(b,c,d,e,f):function(){return g||(g=da(b,c,d,e,f),b=c=f=null),g.apply(this,arguments)}}function aa(a,b,d,e,f,g,h,k,l){function m(a,b,c,d){a&&(c&&(a=W(a,c,d)),a.require=u.require,a.directiveName=Q,(s===u||u.$$isolateScope)&&(a=Ba(a,{isolateScope:!0})),h.push(a)),b&&(c&&(b=W(b,c,d)),b.require=u.require,b.directiveName=Q,(s===u||u.$$isolateScope)&&(b=Ba(b,{isolateScope:!0})),k.push(b))}function p(a,e,f,g,l){function m(a,b,c,d){var e;if(bb(a)||(d=c,c=b,b=a,a=void 0),N&&(e=P),c||(c=N?Q.parent():Q),!d)return l(a,b,e,c,R);var f=l.$$slots[d];if(f)return f(a,b,e,c,R);if(A(f))throw $("noslot",d,Aa(Q))}var n,u,L,y,G,P,M,Q;b===f?(g=d,Q=d.$$element):(Q=x(f),g=new w(Q,d)),G=e,s?y=e.$new(!0):t&&(G=e.$parent),l&&(M=m,M.$$boundTransclude=l,
M.isSlotFilled=function(a){return!!l.$$slots[a]}),J&&(P=ea(Q,g,M,J,y,e,s)),s&&(da.$$addScopeInfo(Q,y,!0,!(v&&(v===s||v===s.$$originalDirective))),da.$$addScopeClass(Q,!0),y.$$isolateBindings=s.$$isolateBindings,u=Da(e,g,y,y.$$isolateBindings,s),u.removeWatches&&y.$on("$destroy",u.removeWatches));for(n in P){u=J[n],L=P[n];var Hg=u.$$bindings.bindToController;L.instance=L(),Q.data("$"+u.name+"Controller",L.instance),L.bindingInfo=Da(G,g,L.instance,Hg,u)}for(r(J,function(a,b){var c=a.require;a.bindToController&&!H(c)&&D(c)&&S(P[b].instance,X(b,c,Q,P))}),r(P,function(a){var b=a.instance;if(B(b.$onChanges))try{b.$onChanges(a.bindingInfo.initialChanges)}catch(d){c(d)}if(B(b.$onInit))try{b.$onInit()}catch(e){c(e)}B(b.$doCheck)&&(G.$watch(function(){b.$doCheck()}),b.$doCheck()),B(b.$onDestroy)&&G.$on("$destroy",function(){b.$onDestroy()})}),n=0,u=h.length;n<u;n++)L=h[n],Ca(L,L.isolateScope?y:e,Q,g,L.require&&X(L.directiveName,L.require,Q,P),M);var R=e;for(s&&(s.template||null===s.templateUrl)&&(R=y),a&&a(R,f.childNodes,void 0,l),n=k.length-1;0<=n;n--)L=k[n],Ca(L,L.isolateScope?y:e,Q,g,L.require&&X(L.directiveName,L.require,Q,P),M);r(P,function(a){a=a.instance,B(a.$postLink)&&a.$postLink()})}l=l||{};for(var u,Q,M,q,O,n=-Number.MAX_VALUE,t=l.newScopeDirective,J=l.controllerDirectives,s=l.newIsolateScopeDirective,v=l.templateDirective,L=l.nonTlbTranscludeDirective,G=!1,P=!1,N=l.hasElementTranscludeDirective,y=d.$$element=x(b),R=e,ma=!1,Jb=!1,sa=0,C=a.length;sa<C;sa++){u=a[sa];var E=u.$$start,jb=u.$$end;if(E&&(y=U(b,E,jb)),M=void 0,n>u.priority)break;if((O=u.scope)&&(u.templateUrl||(D(O)?(ba("new/isolated scope",s||t,u,y),s=u):ba("new/isolated scope",s,u,y)),t=t||u),Q=u.name,!ma&&(u.replace&&(u.templateUrl||u.template)||u.transclude&&!u.$$tlb)){for(O=sa+1;ma=a[O++];)if(ma.transclude&&!ma.$$tlb||ma.replace&&(ma.templateUrl||ma.template)){Jb=!0;break}ma=!0}if(!u.templateUrl&&u.controller&&(J=J||T(),ba("'"+Q+"' controller",J[Q],u,y),J[Q]=u),O=u.transclude)if(G=!0,u.$$tlb||(ba("transclusion",L,u,y),L=u),"element"===O)N=!0,n=u.priority,M=y,y=d.$$element=x(da.$$createComment(Q,d[Q])),b=y[0],oa(f,Ha.call(M,0),b),R=Z(Jb,M,e,n,g&&g.name,{nonTlbTranscludeDirective:L});else{var ka=T();if(D(O)){M=z.document.createDocumentFragment();var Xa=T(),F=T();r(O,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a,Xa[a]=b,ka[b]=null,F[b]=c}),r(y.contents(),function(a){var b=Xa[xa(ua(a))];b?(F[b]=!0,ka[b]=ka[b]||z.document.createDocumentFragment(),ka[b].appendChild(a)):M.appendChild(a)}),r(F,function(a,b){if(!a)throw $("reqslot",b)});for(var K in ka)ka[K]&&(R=x(ka[K].childNodes),ka[K]=Z(Jb,R,e));M=x(M.childNodes)}else M=x(qc(b)).contents();y.empty(),R=Z(Jb,M,e,void 0,void 0,{needsNewScope:u.$$isolateScope||u.$$newScope}),R.$$slots=ka}if(u.template)if(P=!0,ba("template",v,u,y),v=u,O=B(u.template)?u.template(y,d):u.template,O=Na(O),u.replace){if(g=u,M=nc.test(O)?td(ja(u.templateNamespace,V(O))):[],b=M[0],1!==M.length||1!==b.nodeType)throw $("tplrt",Q,"");oa(f,y,b),C={$attr:{}},O=tc(b,[],C);var Ig=a.splice(sa+1,a.length-(sa+1));(s||t)&&fa(O,s,t),a=a.concat(O).concat(Ig),ga(d,C),C=a.length}else y.html(O);if(u.templateUrl)P=!0,ba("template",v,u,y),v=u,u.replace&&(g=u),p=ha(a.splice(sa,a.length-sa),y,d,f,G&&R,h,k,{controllerDirectives:J,newScopeDirective:t!==u&&t,newIsolateScopeDirective:s,templateDirective:v,nonTlbTranscludeDirective:L}),C=a.length;else if(u.compile)try{q=u.compile(y,d,R);var Y=u.$$originalDirective||u;B(q)?m(null,Va(Y,q),E,jb):q&&m(Va(Y,q.pre),Va(Y,q.post),E,jb)}catch(ca){c(ca,Aa(y))}u.terminal&&(p.terminal=!0,n=Math.max(n,u.priority))}return p.scope=t&&!0===t.scope,p.transcludeOnThisElement=G,p.templateOnThisElement=P,p.transclude=R,l.hasElementTranscludeDirective=N,p}function X(a,b,c,d){var e;if(C(b)){var f=b.match(l);b=b.substring(f[0].length);var g=f[1]||f[3],f="?"===f[2];if("^^"===g?c=c.parent():e=(e=d&&d[b])&&e.instance,!e){var h="$"+b+"Controller";e="^^"===g&&c[0]&&9===c[0].nodeType?null:g?c.inheritedData(h):c.data(h)}if(!e&&!f)throw $("ctreq",b,a)}else if(H(b))for(e=[],g=0,f=b.length;g<f;g++)e[g]=X(a,b[g],c,d);else D(b)&&(e={},r(b,function(b,f){e[f]=X(a,b,c,d)}));return e||null}function ea(a,b,c,d,e,f,g){var k,h=T();for(k in d){var l=d[k],m={$scope:l===g||l.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},p=l.controller;"@"===p&&(p=b[l.name]),m=M(p,m,!0,l.controllerAs),h[l.name]=m,a.data("$"+l.name+"Controller",m.instance)}return h}function fa(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d]=bc(a[d],{$$isolateScope:b,$$newScope:c})}function Y(b,c,e,g,h,k,l){if(c===h)return null;var m=null;if(f.hasOwnProperty(c)){h=a.get(c+"Directive");for(var p=0,n=h.length;p<n;p++)if(c=h[p],(A(g)||g>c.priority)&&-1!==c.restrict.indexOf(e)){if(k&&(c=bc(c,{$$start:k,$$end:l})),!c.$$bindings){var I=m=c,t=c.name,u={isolateScope:null,bindToController:null};if(D(I.scope)&&(!0===I.bindToController?(u.bindToController=d(I.scope,t,!0),u.isolateScope={}):u.isolateScope=d(I.scope,t,!1)),D(I.bindToController)&&(u.bindToController=d(I.bindToController,t,!0)),u.bindToController&&!I.controller)throw $("noctrl",t);m=m.$$bindings=u,D(m.isolateScope)&&(c.$$isolateBindings=m.isolateScope)}b.push(c),m=c}}return m}function ca(b){if(f.hasOwnProperty(b))for(var c=a.get(b+"Directive"),d=0,e=c.length;d<e;d++)if(b=c[d],b.multiElement)return!0;return!1}function ga(a,b){var c=b.$attr,d=a.$attr;r(a,function(d,e){"$"!==e.charAt(0)&&(b[e]&&b[e]!==d&&(d=d.length?d+("style"===e?";":" ")+b[e]:b[e]),a.$set(e,d,!0,c[e]))}),r(b,function(b,e){a.hasOwnProperty(e)||"$"===e.charAt(0)||(a[e]=b,"class"!==e&&"style"!==e&&(d[e]=c[e]))})}function ha(a,b,d,f,g,h,k,l){var p,n,m=[],t=b[0],u=a.shift(),J=bc(u,{templateUrl:null,transclude:null,replace:null,$$originalDirective:u}),s=B(u.templateUrl)?u.templateUrl(b,d):u.templateUrl,L=u.templateNamespace;return b.empty(),e(s).then(function(c){var e,I;if(c=Na(c),u.replace){if(c=nc.test(c)?td(ja(L,V(c))):[],e=c[0],1!==c.length||1!==e.nodeType)throw $("tplrt",u.name,s);c={$attr:{}},oa(f,b,e);var v=tc(e,[],c);D(u.scope)&&fa(v,!0),a=v.concat(a),ga(d,c)}else e=t,b.html(c);for(a.unshift(J),p=aa(a,e,d,g,b,u,h,k,l),r(f,function(a,c){a===e&&(f[c]=b[0])}),n=Xa(b[0].childNodes,g);m.length;){c=m.shift(),I=m.shift();var y=m.shift(),P=m.shift(),v=b[0];if(!c.$$destroyed){if(I!==t){var G=I.className;l.hasElementTranscludeDirective&&u.replace||(v=qc(e)),oa(y,x(I),v),sa(x(v),G)}I=p.transcludeOnThisElement?ka(c,p.transclude,P):P,p(n,c,v,f,I)}}m=null}).catch(function(a){dc(a)&&c(a)}),function(a,b,c,d,e){a=e,b.$$destroyed||(m?m.push(b,c,d,a):(p.transcludeOnThisElement&&(a=ka(b,p.transclude,e)),p(n,b,c,d,a)))}}function ia(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function ba(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw $("multidir",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,Aa(d))}function na(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;return b&&da.$$addBindingClass(a),function(a,c){var e=c.parent();b||da.$$addBindingClass(e),da.$$addBindingInfo(e,d.expressions),a.$watch(d,function(a){c[0].nodeValue=a})}}})}function ja(a,b){switch(a=K(a||"html")){case"svg":case"math":var c=z.document.createElement("div");return c.innerHTML="<"+a+">"+b+"</"+a+">",c.childNodes[0].childNodes;default:return b}}function qa(a,b){return"srcdoc"===b?u.HTML:"src"===b||"ngSrc"===b?-1===["img","video","audio","source","track"].indexOf(a)?u.RESOURCE_URL:u.MEDIA_URL:"xlinkHref"===b?"image"===a?u.MEDIA_URL:"a"===a?u.URL:u.RESOURCE_URL:"form"===a&&"action"===b||"base"===a&&"href"===b||"link"===a&&"href"===b?u.RESOURCE_URL:"a"!==a||"href"!==b&&"ngHref"!==b?void 0:u.URL}function ya(a,b){var c=b.toLowerCase();return v[a+"|"+c]||v["*|"+c]}function za(a){return ma(u.valueOf(a),"ng-prop-srcset")}function Ea(a,b,c,d){if(m.test(d))throw $("nodomevents");a=ua(a);var e=ya(a,d),f=Ta;"srcset"!==d||"img"!==a&&"source"!==a?e&&(f=u.getTrusted.bind(u,e)):f=za,b.push({priority:100,compile:function(a,b){var e=p(b[c]),g=p(b[c],function(a){return u.valueOf(a)});return{pre:function(a,b){function c(){var g=e(a);b[0][d]=f(g)}c(),a.$watch(g,c)}}}})}function Ia(a,c,d,e,f){var g=ua(a),k=qa(g,e),l=h[e]||f,p=b(d,!f,k,l);if(p){if("multiple"===e&&"select"===g)throw $("selmulti",Aa(a));if(m.test(e))throw $("nodomevents");c.push({priority:100,compile:function(){return{pre:function(a,c,f){c=f.$$observers||(f.$$observers=T());var g=f[e];g!==d&&(p=g&&b(g,!0,k,l),d=g),p&&(f[e]=p(a),(c[e]||(c[e]=[])).$$inter=!0,(f.$$observers&&f.$$observers[e].$$scope||a).$watch(p,function(a,b){"class"===e&&a!==b?f.$updateClass(a,b):f.$set(e,a)}))}}}})}}function oa(a,b,c){var g,h,d=b[0],e=b.length,f=d.parentNode;if(a)for(g=0,h=a.length;g<h;g++)if(a[g]===d){a[g++]=c,h=g+e-1;for(var k=a.length;g<k;g++,h++)h<k?a[g]=a[h]:delete a[g];a.length-=e-1,a.context===d&&(a.context=c);break}for(f&&f.replaceChild(c,d),a=z.document.createDocumentFragment(),g=0;g<e;g++)a.appendChild(b[g]);for(x.hasData(d)&&(x.data(c,x.data(d)),x(d).off("$destroy")),x.cleanData(a.querySelectorAll("*")),g=1;g<e;g++)delete b[g];b[0]=c,b.length=1}function Ba(a,b){return S(function(){return a.apply(null,arguments)},a,b)}function Ca(a,b,d,e,f,g){try{a(b,d,e,f,g)}catch(h){c(h,Aa(d))}}function ra(a,b){if(s)throw $("missingattr",a,b)}function Da(a,c,d,e,f){function g(b,c,e){B(d.$onChanges)&&!ec(c,e)&&(Ua||(a.$$postDigest(q),Ua=[]),m||(m={},Ua.push(h)),m[b]&&(e=m[b].previousValue),m[b]=new Kb(e,c))}function h(){d.$onChanges(m),m=void 0}var m,k=[],l={};return r(e,function(e,h){var I,t,u,s,m=e.attrName,n=e.optional;switch(e.mode){case"@":n||ta.call(c,m)||(ra(m,f.name),d[h]=c[m]=void 0),n=c.$observe(m,function(a){(C(a)||Ga(a))&&(g(h,a,d[h]),d[h]=a)}),c.$$observers[m].$$scope=a,I=c[m],C(I)?d[h]=b(I)(a):Ga(I)&&(d[h]=I),l[h]=new Kb(uc,d[h]),k.push(n);break;case"=":if(!ta.call(c,m)){if(n)break;ra(m,f.name),c[m]=void 0}if(n&&!c[m])break;t=p(c[m]),s=t.literal?va:ec,u=t.assign||function(){throw I=d[h]=t(a),$("nonassign",c[m],m,f.name)},I=d[h]=t(a),n=function(b){return s(b,d[h])||(s(b,I)?u(a,b=d[h]):d[h]=b),I=b},n.$stateful=!0,n=e.collection?a.$watchCollection(c[m],n):a.$watch(p(c[m],n),null,t.literal),k.push(n);break;case"<":if(!ta.call(c,m)){if(n)break;ra(m,f.name),c[m]=void 0}if(n&&!c[m])break;t=p(c[m]);var v=t.literal,L=d[h]=t(a);l[h]=new Kb(uc,d[h]),n=a[e.collection?"$watchCollection":"$watch"](t,function(a,b){if(b===a){if(b===L||v&&va(b,L))return;b=L}g(h,a,b),d[h]=a}),k.push(n);break;case"&":if(n||ta.call(c,m)||ra(m,f.name),(t=c.hasOwnProperty(m)?p(c[m]):E)===E&&n)break;d[h]=function(b){return t(a,b)}}}),{initialChanges:l,removeWatches:k.length&&function(){for(var a=0,b=k.length;a<b;++a)k[a]()}}}var Ua,Ma=/^\w/,Fa=z.document.createElement("div"),Oa=t,Qa=N,Ja=G;w.prototype={$normalize:xa,$addClass:function(a){a&&0<a.length&&R.addClass(this.$$element,a)},$removeClass:function(a){a&&0<a.length&&R.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=ud(a,b);c&&c.length&&R.addClass(this.$$element,c),(c=ud(b,a))&&c.length&&R.removeClass(this.$$element,c)},$set:function(a,b,d,e){var f=nd(this.$$element[0],a),g=vd[a],h=a;f?(this.$$element.prop(a,b),e=f):g&&(this[g]=b,h=g),this[a]=b,e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=Xc(a,"-")),"img"===ua(this.$$element)&&"srcset"===a&&(this[a]=b=ma(b,"$set('srcset', value)")),!1!==d&&(null===b||A(b)?this.$$element.removeAttr(e):Ma.test(e)?f&&!1===b?this.$$element.removeAttr(e):this.$$element.attr(e,b):O(this.$$element[0],e,b)),(a=this.$$observers)&&r(a[h],function(a){try{a(b)}catch(d){c(d)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=T()),e=d[a]||(d[a]=[]);return e.push(b),L.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||A(c[a])||b(c[a])}),function(){cb(e,b)}}};var Ka=b.startSymbol(),La=b.endSymbol(),Na="{{"===Ka&&"}}"===La?Ta:function(a){return a.replace(/\{\{/g,Ka).replace(/}}/g,La)},Ra=/^ng(Attr|Prop|On)([A-Z].*)$/,Sa=/^(.+)Start$/;return da.$$addBindingInfo=n?function(a,b){var c=a.data("$binding")||[];H(b)?c=c.concat(b):c.push(b),a.data("$binding",c)}:E,da.$$addBindingClass=n?function(a){sa(a,"ng-binding")}:E,da.$$addScopeInfo=n?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b)}:E,da.$$addScopeClass=n?function(a,b){sa(a,b?"ng-isolate-scope":"ng-scope")}:E,da.$$createComment=function(a,b){var c="";return n&&(c=" "+(a||"")+": ",b&&(c+=b+" ")),z.document.createComment(c)},da}]}function Kb(a,b){this.previousValue=a,this.currentValue=b}function xa(a){return a.replace(rd,"").replace(Jg,function(a,d,c){return c?d.toUpperCase():d})}function ud(a,b){var d="",c=a.split(/\s+/),e=b.split(/\s+/),f=0;a:for(;f<c.length;f++){for(var g=c[f],k=0;k<e.length;k++)if(g===e[k])continue a;d+=(0<d.length?" ":"")+g}return d}function td(a){a=x(a);var b=a.length;if(1>=b)return a;for(;b--;){var d=a[b];(8===d.nodeType||d.nodeType===Pa&&""===d.nodeValue.trim())&&Kg.call(a,b,1)}return a}function Gg(a,b){if(b&&C(b))return b;if(C(a)){var d=wd.exec(a);if(d)return d[3]}}function Kf(){var a={};this.has=function(b){return a.hasOwnProperty(b)},this.register=function(b,d){Ja(b,"controller"),D(b)?S(a,b):a[b]=d},this.$get=["$injector",function(b){function d(a,b,d,g){if(!a||!D(a.$scope))throw F("$controller")("noscp",g,b);a.$scope[b]=d}return function(c,e,f,g){var k,h,l;if(f=!0===f,g&&C(g)&&(l=g),C(c)){if(!(g=c.match(wd)))throw xd("ctrlfmt",c);if(h=g[1],l=l||g[3],!(c=a.hasOwnProperty(h)?a[h]:Le(e.$scope,h,!0)))throw xd("ctrlreg",h);tb(c,h,!0)}return f?(f=(H(c)?c[c.length-1]:c).prototype,k=Object.create(f||null),l&&d(e,l,k,h||c.name),S(function(){var a=b.invoke(c,k,e,h);return a!==k&&(D(a)||B(a))&&(k=a,l&&d(e,l,k,h||c.name)),k},{instance:k,identifier:l})):(k=b.instantiate(c,e,h),l&&d(e,l,k,h||c.name),k)}}]}function Lf(){this.$get=["$window",function(a){return x(a.document)}]}function Mf(){this.$get=["$document","$rootScope",function(a,b){function d(){e=c.hidden}var c=a[0],e=c&&c.hidden;return a.on("visibilitychange",d),b.$on("$destroy",function(){a.off("visibilitychange",d)}),function(){return e}}]}function Nf(){this.$get=["$log",function(a){return function(b,d){a.error.apply(a,arguments)}}]}function vc(a){return D(a)?ha(a)?a.toISOString():eb(a):a}function Tf(){this.$get=function(){return function(a){if(!a)return"";var b=[];return Qc(a,function(a,c){null===a||A(a)||B(a)||(H(a)?r(a,function(a){b.push(ba(c)+"="+ba(vc(a)))}):b.push(ba(c)+"="+ba(vc(a))))}),b.join("&")}}}function Uf(){this.$get=function(){return function(a){function b(a,e,f){H(a)?r(a,function(a,c){b(a,e+"["+(D(a)?c:"")+"]")}):D(a)&&!ha(a)?Qc(a,function(a,c){b(a,e+(f?"":"[")+c+(f?"":"]"))}):(B(a)&&(a=a()),d.push(ba(e)+"="+(null==a?"":ba(vc(a)))))}if(!a)return"";var d=[];return b(a,"",!0),d.join("&")}}}function wc(a,b){if(C(a)){var d=a.replace(Lg,"").trim();if(d){var e,c=b("Content-Type"),c=c&&0===c.indexOf(yd);if((e=c)||(e=(e=d.match(Mg))&&Ng[e[0]].test(d)),e)try{a=Tc(d)}catch(f){if(!c)return a;throw Lb("baddata",a,f)}}}return a}function zd(a){var d,b=T();return C(a)?r(a.split("\n"),function(a){d=a.indexOf(":");var e=K(V(a.substr(0,d)));a=V(a.substr(d+1)),e&&(b[e]=b[e]?b[e]+", "+a:a)}):D(a)&&r(a,function(a,d){var f=K(d),g=V(a);f&&(b[f]=b[f]?b[f]+", "+g:g)}),b}function Ad(a){var b;return function(d){return b||(b=zd(a)),d?(d=b[K(d)],void 0===d&&(d=null),d):b}}function Bd(a,b,d,c){return B(c)?c(a,b,d):(r(c,function(c){a=c(a,b,d)}),a)}function Sf(){var a=this.defaults={transformResponse:[wc],transformRequest:[function(a){return D(a)&&"[object File]"!==la.call(a)&&"[object Blob]"!==la.call(a)&&"[object FormData]"!==la.call(a)?eb(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:ja(xc),put:ja(xc),patch:ja(xc)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},b=!1;this.useApplyAsync=function(a){return w(a)?(b=!!a,this):b};var d=this.interceptors=[],c=this.xsrfTrustedOrigins=[];Object.defineProperty(this,"xsrfWhitelistedOrigins",{get:function(){return this.xsrfTrustedOrigins},set:function(a){this.xsrfTrustedOrigins=a}}),this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(e,f,g,k,h,l,m,p){function n(b){function c(a,b){for(var d=0,e=b.length;d<e;){var f=b[d++],g=b[d++];a=a.then(f,g)}return b.length=0,a}function d(a,b){var c,e={};return r(a,function(a,d){B(a)?null!=(c=a(b))&&(e[d]=c):e[d]=a}),e}function f(a){var b=S({},a);return b.data=Bd(a.data,a.headers,a.status,g.transformResponse),a=a.status,200<=a&&300>a?b:l.reject(b)}if(!D(b))throw F("$http")("badreq",b);if(!C(p.valueOf(b.url)))throw F("$http")("badreq",b.url);var g=S({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer,jsonpCallbackParam:a.jsonpCallbackParam},b);g.headers=function(b){var f,g,h,c=a.headers,e=S({},b.headers),c=S({},c.common,c[K(b.method)]);a:for(f in c){g=K(f);for(h in e)if(K(h)===g)continue a;e[f]=c[f]}return d(e,ja(b))}(b),g.method=vb(g.method),g.paramSerializer=C(g.paramSerializer)?m.get(g.paramSerializer):g.paramSerializer,e.$$incOutstandingRequestCount("$http");var h=[],k=[];return b=l.resolve(g),r(v,function(a){(a.request||a.requestError)&&h.unshift(a.request,a.requestError),(a.response||a.responseError)&&k.push(a.response,a.responseError)}),b=c(b,h),b=b.then(function(b){var c=b.headers,d=Bd(b.data,Ad(c),void 0,b.transformRequest);return A(d)&&r(c,function(a,b){"content-type"===K(b)&&delete c[b]}),A(b.withCredentials)&&!A(a.withCredentials)&&(b.withCredentials=a.withCredentials),s(b,d).then(f,f)}),b=c(b,k),b=b.finally(function(){e.$$completeOutstandingRequest(E,"$http")})}function s(c,d){function e(a){if(a){var c={};return r(a,function(a,d){c[d]=function(c){function d(){a(c)}b?h.$applyAsync(d):h.$$phase?d():h.$apply(d)}}),c}}function k(a,c,d,e,f){function g(){m(c,a,d,e,f)}R&&(200<=a&&300>a?R.put(O,[a,c,zd(d),e,f]):R.remove(O)),b?h.$applyAsync(g):(g(),h.$$phase||h.$apply())}function m(a,b,d,e,f){b=-1<=b?b:0,(200<=b&&300>b?L.resolve:L.reject)({data:a,status:b,headers:Ad(d),config:c,statusText:e,xhrStatus:f})}function s(a){m(a.data,a.status,ja(a.headers()),a.statusText,a.xhrStatus)}function v(){var a=n.pendingRequests.indexOf(c);-1!==a&&n.pendingRequests.splice(a,1)}var R,q,L=l.defer(),u=L.promise,ma=c.headers,x="jsonp"===K(c.method),O=c.url;return x?O=p.getTrustedResourceUrl(O):C(O)||(O=p.valueOf(O)),O=G(O,c.paramSerializer(c.params)),x&&(O=t(O,c.jsonpCallbackParam)),n.pendingRequests.push(c),u.then(v,v),!c.cache&&!a.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(R=D(c.cache)?c.cache:D(a.cache)?a.cache:N),R&&(q=R.get(O),w(q)?q&&B(q.then)?q.then(s,s):H(q)?m(q[1],q[0],ja(q[2]),q[3],q[4]):m(q,200,{},"OK","complete"):R.put(O,u)),A(q)&&((q=kc(c.url)?g()[c.xsrfCookieName||a.xsrfCookieName]:void 0)&&(ma[c.xsrfHeaderName||a.xsrfHeaderName]=q),f(c.method,O,d,k,ma,c.timeout,c.withCredentials,c.responseType,e(c.eventHandlers),e(c.uploadEventHandlers))),u}function G(a,b){return 0<b.length&&(a+=(-1===a.indexOf("?")?"?":"&")+b),a}function t(a,b){var c=a.split("?");if(2<c.length)throw Lb("badjsonp",a);return c=hc(c[1]),r(c,function(c,d){if("JSON_CALLBACK"===c)throw Lb("badjsonp",a);if(d===b)throw Lb("badjsonp",b,a)}),a+=(-1===a.indexOf("?")?"?":"&")+b+"=JSON_CALLBACK"}var N=k("$http");a.paramSerializer=C(a.paramSerializer)?m.get(a.paramSerializer):a.paramSerializer;var v=[];r(d,function(a){v.unshift(C(a)?m.get(a):m.invoke(a))});var kc=Og(c);return n.pendingRequests=[],function(a){r(arguments,function(a){n[a]=function(b,c){return n(S({},c||{},{method:a,url:b}))}})}("get","delete","head","jsonp"),function(a){r(arguments,function(a){n[a]=function(b,c,d){return n(S({},d||{},{method:a,url:b,data:c}))}})}("post","put","patch"),n.defaults=a,n}]}function Wf(){this.$get=function(){return function(){return new z.XMLHttpRequest}}}function Vf(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(a,b,d,c){return Pg(a,c,a.defer,b,d[0])}]}function Pg(a,b,d,c,e){function f(a,b,d){a=a.replace("JSON_CALLBACK",b);var f=e.createElement("script"),_m=null;return f.type="text/javascript",f.src=a,f.async=!0,_m=function(a){f.removeEventListener("load",_m),f.removeEventListener("error",_m),e.body.removeChild(f),f=null;var g=-1,s="unknown";a&&("load"!==a.type||c.wasCalled(b)||(a={type:"error"}),s=a.type,g="error"===a.type?404:200),d&&d(g,s)},f.addEventListener("load",_m),f.addEventListener("error",_m),e.body.appendChild(f),_m}return function(e,k,h,l,m,p,n,s,G,t){function N(a){J="timeout"===a,pa&&pa(),y&&y.abort()}function v(a,b,c,e,f,g){w(P)&&d.cancel(P),pa=y=null,a(b,c,e,f,g)}if(k=k||a.url(),"jsonp"===K(e))var q=c.createCallback(k),pa=f(k,q,function(a,b){var d=200===a&&c.getResponse(q);v(l,a,d,"",b,"complete"),c.removeCallback(q)});else{var y=b(e,k),J=!1;if(y.open(e,k,!0),r(m,function(a,b){w(a)&&y.setRequestHeader(b,a)}),y.onload=function(){var a=y.statusText||"",b="response"in y?y.response:y.responseText,c=1223===y.status?204:y.status;0===c&&(c=b?200:"file"===ga(k).protocol?404:0),v(l,c,b,y.getAllResponseHeaders(),a,"complete")},y.onerror=function(){v(l,-1,null,null,"","error")},y.ontimeout=function(){v(l,-1,null,null,"","timeout")},y.onabort=function(){v(l,-1,null,null,"",J?"timeout":"abort")},r(G,function(a,b){y.addEventListener(b,a)}),r(t,function(a,b){y.upload.addEventListener(b,a)}),n&&(y.withCredentials=!0),s)try{y.responseType=s}catch(I){if("json"!==s)throw I}y.send(A(h)?null:h)}if(0<p)var P=d(function(){N("timeout")},p);else p&&B(p.then)&&p.then(function(){N(w(p.$$timeoutId)?"timeout":"abort")})}}function Pf(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(d,c,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(p,a).replace(n,b)}function k(a,b,c,d){var e=a.$watch(function(a){return e(),d(a)},b,c);return e}function h(f,h,n,p){function v(a){try{return a=n&&!r?e.getTrusted(n,a):e.valueOf(a),p&&!w(a)?a:jc(a)}catch(b){c(Ma.interr(f,b))}}var r=n===e.URL||n===e.MEDIA_URL;if(!f.length||-1===f.indexOf(a)){if(h)return;return h=g(f),r&&(h=e.getTrusted(n,h)),h=ia(h),h.exp=f,h.expressions=[],h.$$watchDelegate=k,h}p=!!p;for(var q,y,P,u,J=0,I=[],Q=f.length,M=[],L=[];J<Q;){if(-1===(q=f.indexOf(a,J))||-1===(y=f.indexOf(b,q+l))){J!==Q&&M.push(g(f.substring(J)));break}J!==q&&M.push(g(f.substring(J,q))),J=f.substring(q+l,y),I.push(J),J=y+m,L.push(M.length),M.push("")}u=1===M.length&&1===L.length;var R=r&&u?void 0:v;if(P=I.map(function(a){return d(a,R)}),!h||I.length){var x=function(a){for(var b=0,c=I.length;b<c;b++){if(p&&A(a[b]))return;M[L[b]]=a[b]}return r?e.getTrusted(n,u?M[0]:M.join("")):(n&&1<M.length&&Ma.throwNoconcat(f),M.join(""))};return S(function(a){var b=0,d=I.length,e=Array(d);try{for(;b<d;b++)e[b]=P[b](a);return x(e)}catch(g){c(Ma.interr(f,g))}},{exp:f,expressions:I,$$watchDelegate:function(a,b){var c;return a.$watchGroup(P,function(d,e){var f=x(d);b.call(this,f,d!==e?c:f,a),c=f})}})}}var l=a.length,m=b.length,p=new RegExp(a.replace(/./g,f),"g"),n=new RegExp(b.replace(/./g,f),"g");return h.startSymbol=function(){return a},h.endSymbol=function(){return b},h}]}function Qf(){this.$get=["$$intervalFactory","$window",function(a,b){var d={},c=function(a){b.clearInterval(a),delete d[a]},e=a(function(a,c,e){return a=b.setInterval(a,c),d[a]=e,a},c);return e.cancel=function(a){if(!a)return!1;if(!a.hasOwnProperty("$$intervalId"))throw Qg("badprom");if(!d.hasOwnProperty(a.$$intervalId))return!1;a=a.$$intervalId;var b=d[a],e=b.promise;return e.$$state&&(e.$$state.pur=!0),b.reject("canceled"),c(a),!0},e}]}function Rf(){this.$get=["$browser","$q","$$q","$rootScope",function(a,b,d,c){return function(e,f){return function(g,k,h,l){function m(){p?g.apply(null,n):g(s)}var p=4<arguments.length,n=p?Ha.call(arguments,4):[],s=0,G=w(l)&&!l,t=(G?d:b).defer(),r=t.promise;return h=w(h)?h:0,r.$$intervalId=e(function(){G?a.defer(m):c.$evalAsync(m),t.notify(s++),0<h&&s>=h&&(t.resolve(s),f(r.$$intervalId)),G||c.$apply()},k,t,G),r}}}]}function Cd(a,b){var d=ga(a);b.$$protocol=d.protocol,b.$$host=d.hostname,b.$$port=fa(d.port)||Rg[d.protocol]||null}function Dd(a,b,d){if(Sg.test(a))throw kb("badpath",a);var c="/"!==a.charAt(0);c&&(a="/"+a),a=ga(a);for(var c=(c&&"/"===a.pathname.charAt(0)?a.pathname.substring(1):a.pathname).split("/"),e=c.length;e--;)c[e]=decodeURIComponent(c[e]),d&&(c[e]=c[e].replace(/\//g,"%2F"));d=c.join("/"),b.$$path=d,b.$$search=hc(a.search),b.$$hash=decodeURIComponent(a.hash),b.$$path&&"/"!==b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function yc(a,b){return a.slice(0,b.length)===b}function ya(a,b){if(yc(b,a))return b.substr(a.length)}function Da(a){var b=a.indexOf("#");return-1===b?a:a.substr(0,b)}function zc(a,b,d){this.$$html5=!0,d=d||"",Cd(a,this),this.$$parse=function(a){var d=ya(b,a);if(!C(d))throw kb("ipthprfx",a,b);Dd(d,this,!0),this.$$path||(this.$$path="/"),this.$$compose()},this.$$normalizeUrl=function(a){return b+a.substr(1)},this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;return w(f=ya(a,c))?(g=f,g=d&&w(f=ya(d,f))?b+(ya("/",f)||f):a+g):w(f=ya(b,c))?g=b+f:b===c+"/"&&(g=b),g&&this.$$parse(g),!!g}}function Ac(a,b,d){Cd(a,this),this.$$parse=function(c){var f,e=ya(a,c)||ya(b,c);A(e)||"#"!==e.charAt(0)?this.$$html5?f=e:(f="",A(e)&&(a=c,this.replace())):(f=ya(d,e),A(f)&&(f=e)),Dd(f,this,!1),c=this.$$path;var e=a,g=/^\/[A-Z]:(\/.*)/;yc(f,e)&&(f=f.replace(e,"")),g.exec(f)||(c=(f=g.exec(c))?f[1]:c),this.$$path=c,this.$$compose()},this.$$normalizeUrl=function(b){return a+(b?d+b:"")},this.$$parseLinkUrl=function(b,d){return Da(a)===Da(b)&&(this.$$parse(b),!0)}}function Ed(a,b,d){this.$$html5=!0,Ac.apply(this,arguments),this.$$parseLinkUrl=function(c,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;return a===Da(c)?f=c:(g=ya(b,c))?f=a+d+g:b===c+"/"&&(f=b),f&&this.$$parse(f),!!f},this.$$normalizeUrl=function(b){return a+d+b}}function Mb(a){return function(){return this[a]}}function Fd(a,b){return function(d){return A(d)?this[a]:(this[a]=b(d),this.$$compose(),this)}}function Yf(){var a="!",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return w(b)?(a=b,this):a},this.html5Mode=function(a){return Ga(a)?(b.enabled=a,this):D(a)?(Ga(a.enabled)&&(b.enabled=a.enabled),Ga(a.requireBase)&&(b.requireBase=a.requireBase),(Ga(a.rewriteLinks)||C(a.rewriteLinks))&&(b.rewriteLinks=a.rewriteLinks),this):b},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(d,c,e,f,g){function k(a,b){return a===b||ga(a).href===ga(b).href}function h(a,b,d){var e=m.url(),f=m.$$state;try{c.url(a,b,d),m.$$state=c.state()}catch(g){throw m.url(e),m.$$state=f,g}}function l(a,b){d.$broadcast("$locationChangeSuccess",m.absUrl(),a,m.$$state,b)}var m,p;p=c.baseHref();var s,n=c.url();if(b.enabled){if(!p&&b.requireBase)throw kb("nobase");s=n.substring(0,n.indexOf("/",n.indexOf("//")+2))+(p||"/"),p=e.history?zc:Ed}else s=Da(n),p=Ac;var r=s.substr(0,Da(s).lastIndexOf("/")+1);m=new p(s,r,"#"+a),m.$$parseLinkUrl(n,n),m.$$state=c.state();var t=/^\s*(javascript|mailto):/i;f.on("click",function(a){var e=b.rewriteLinks;if(e&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!==a.which&&2!==a.button){for(var g=x(a.target);"a"!==ua(g[0]);)if(g[0]===f[0]||!(g=g.parent())[0])return;if(!C(e)||!A(g.attr(e))){var e=g.prop("href"),h=g.attr("href")||g.attr("xlink:href");D(e)&&"[object SVGAnimatedString]"===e.toString()&&(e=ga(e.animVal).href),t.test(e)||!e||g.attr("target")||a.isDefaultPrevented()||!m.$$parseLinkUrl(e,h)||(a.preventDefault(),m.absUrl()!==c.url()&&d.$apply())}}}),m.absUrl()!==n&&c.url(m.absUrl(),!0);var N=!0;return c.onUrlChange(function(a,b){yc(a,r)?(d.$evalAsync(function(){var f,c=m.absUrl(),e=m.$$state;m.$$parse(a),m.$$state=b,f=d.$broadcast("$locationChangeStart",a,c,b,e).defaultPrevented,m.absUrl()===a&&(f?(m.$$parse(c),m.$$state=e,h(c,!1,e)):(N=!1,l(c,e)))}),d.$$phase||d.$digest()):g.location.href=a}),d.$watch(function(){if(N||m.$$urlUpdatedByLocation){m.$$urlUpdatedByLocation=!1;var a=c.url(),b=m.absUrl(),f=c.state(),g=m.$$replace,n=!k(a,b)||m.$$html5&&e.history&&f!==m.$$state;(N||n)&&(N=!1,d.$evalAsync(function(){var b=m.absUrl(),c=d.$broadcast("$locationChangeStart",b,a,m.$$state,f).defaultPrevented;m.absUrl()===b&&(c?(m.$$parse(a),m.$$state=f):(n&&h(b,g,f===m.$$state?null:m.$$state),l(a,f)))}))}m.$$replace=!1}),m}]}function Zf(){var a=!0,b=this;this.debugEnabled=function(b){return w(b)?(a=b,this):a},this.$get=["$window",function(d){function c(a){return dc(a)&&(a.stack&&f?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=d.console||{},e=b[a]||b.log||E;return function(){var a=[];return r(arguments,function(b){a.push(c(b))}),Function.prototype.apply.call(e,b,a)}}var f=wa||/\bEdge\//.test(d.navigator&&d.navigator.userAgent);return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Tg(a){return a+""}function Ug(a,b){return void 0!==a?a:b}function Gd(a,b){return void 0===a?b:void 0===b?a:a+b}function Vg(a,b){switch(a.type){case q.MemberExpression:if(a.computed)return!1;break;case q.UnaryExpression:return 1;case q.BinaryExpression:return"+"!==a.operator&&1;case q.CallExpression:return!1}return void 0===b?Hd:b}function Z(a,b,d){var c,e,f=a.isPure=Vg(a,d);switch(a.type){case q.Program:c=!0,r(a.body,function(a){Z(a.expression,b,f),c=c&&a.expression.constant}),a.constant=c;break;case q.Literal:a.constant=!0,a.toWatch=[];break;case q.UnaryExpression:Z(a.argument,b,f),a.constant=a.argument.constant,a.toWatch=a.argument.toWatch;break;case q.BinaryExpression:Z(a.left,b,f),Z(a.right,b,f),a.constant=a.left.constant&&a.right.constant,a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case q.LogicalExpression:Z(a.left,b,f),Z(a.right,b,f),a.constant=a.left.constant&&a.right.constant,a.toWatch=a.constant?[]:[a];break;case q.ConditionalExpression:Z(a.test,b,f),Z(a.alternate,b,f),Z(a.consequent,b,f),a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant,a.toWatch=a.constant?[]:[a];break;case q.Identifier:a.constant=!1,a.toWatch=[a];break;case q.MemberExpression:Z(a.object,b,f),a.computed&&Z(a.property,b,f),a.constant=a.object.constant&&(!a.computed||a.property.constant),a.toWatch=a.constant?[]:[a];break;case q.CallExpression:c=d=!!a.filter&&!b(a.callee.name).$stateful,e=[],r(a.arguments,function(a){Z(a,b,f),c=c&&a.constant,e.push.apply(e,a.toWatch)}),a.constant=c,a.toWatch=d?e:[a];break;case q.AssignmentExpression:Z(a.left,b,f),Z(a.right,b,f),a.constant=a.left.constant&&a.right.constant,a.toWatch=[a];break;case q.ArrayExpression:c=!0,e=[],r(a.elements,function(a){Z(a,b,f),c=c&&a.constant,e.push.apply(e,a.toWatch)}),a.constant=c,a.toWatch=e;break;case q.ObjectExpression:c=!0,e=[],r(a.properties,function(a){Z(a.value,b,f),c=c&&a.value.constant,e.push.apply(e,a.value.toWatch),a.computed&&(Z(a.key,b,!1),c=c&&a.key.constant,e.push.apply(e,a.key.toWatch))}),a.constant=c,a.toWatch=e;break;case q.ThisExpression:a.constant=!1,a.toWatch=[];break;case q.LocalsExpression:a.constant=!1,a.toWatch=[]}}function Id(a){if(1===a.length){a=a[0].expression;var b=a.toWatch;return 1!==b.length?b:b[0]!==a?b:void 0}}function Jd(a){return a.type===q.Identifier||a.type===q.MemberExpression}function Kd(a){if(1===a.body.length&&Jd(a.body[0].expression))return{type:q.AssignmentExpression,left:a.body[0].expression,right:{type:q.NGValueParameter},operator:"="}}function Ld(a){this.$filter=a}function Md(a){this.$filter=a}function Nb(a,b,d){this.ast=new q(a,d),this.astCompiler=d.csp?new Md(b):new Ld(b)}function Bc(a){return B(a.valueOf)?a.valueOf():Wg.call(a)}function $f(){var d,c,a=T(),b={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(a,c){b[a]=c},this.setIdentifierFns=function(a,b){return d=a,c=b,this},this.$get=["$filter",function(e){function f(b,c){var d,f;switch(_typeof(b)){case"string":return f=b=b.trim(),
d=a[f],d||(d=new Ob(G),d=new Nb(d,e,G).parse(b),a[f]=p(d)),s(d,c);case"function":return s(b,c);default:return s(E,c)}}function g(a,b,c){return null==a||null==b?a===b:!("object"===_typeof(a)&&(a=Bc(a),"object"===_typeof(a)&&!c))&&(a===b||a!==a&&b!==b)}function k(a,b,c,d,e){var h,f=d.inputs;if(1===f.length){var k=g,f=f[0];return a.$watch(function(a){var b=f(a);return g(b,k,f.isPure)||(h=d(a,void 0,void 0,[b]),k=b&&Bc(b)),h},b,c,e)}for(var l=[],m=[],n=0,p=f.length;n<p;n++)l[n]=g,m[n]=null;return a.$watch(function(a){for(var b=!1,c=0,e=f.length;c<e;c++){var k=f[c](a);(b||(b=!g(k,l[c],f[c].isPure)))&&(m[c]=k,l[c]=k&&Bc(k))}return b&&(h=d(a,void 0,void 0,m)),h},b,c,e)}function h(a,b,c,d,e){function f(){h(m)&&k()}function g(a,b,c,d){return m=u&&d?d[0]:n(a,b,c,d),h(m)&&a.$$postDigest(f),s(m)}var k,m,h=d.literal?l:w,n=d.$$intercepted||d,s=d.$$interceptor||Ta,u=d.inputs&&!n.inputs;return g.literal=d.literal,g.constant=d.constant,g.inputs=d.inputs,p(g),k=a.$watch(g,b,c,e)}function l(a){var b=!0;return r(a,function(a){w(a)||(b=!1)}),b}function m(a,b,c,d){var e=a.$watch(function(a){return e(),d(a)},b,c);return e}function p(a){return a.constant?a.$$watchDelegate=m:a.oneTime?a.$$watchDelegate=h:a.inputs&&(a.$$watchDelegate=k),a}function n(a,b){function c(d){return b(a(d))}return c.$stateful=a.$stateful||b.$stateful,c.$$pure=a.$$pure&&b.$$pure,c}function s(a,b){if(!b)return a;a.$$interceptor&&(b=n(a.$$interceptor,b),a=a.$$intercepted);var c=!1,d=function(_d2,e,f,g){return _d2=c&&g?g[0]:a(_d2,e,f,g),b(_d2)};return d.$$intercepted=a,d.$$interceptor=b,d.literal=a.literal,d.oneTime=a.oneTime,d.constant=a.constant,b.$stateful||(c=!a.inputs,d.inputs=a.inputs?a.inputs:[a],b.$$pure||(d.inputs=d.inputs.map(function(a){return a.isPure===Hd?function(b){return a(b)}:a}))),p(d)}var G={csp:Ba().noUnsafeEval,literals:Ia(b),isIdentifierStart:B(d)&&d,isIdentifierContinue:B(c)&&c};return f.$$getAst=function(a){return new Nb(new Ob(G),e,G).getAst(a).ast},f}]}function bg(){var a=!0;this.$get=["$rootScope","$exceptionHandler",function(b,d){return Nd(function(a){b.$evalAsync(a)},d,a)}],this.errorOnUnhandledRejections=function(b){return w(b)?(a=b,this):a}}function cg(){var a=!0;this.$get=["$browser","$exceptionHandler",function(b,d){return Nd(function(a){b.defer(a)},d,a)}],this.errorOnUnhandledRejections=function(b){return w(b)?(a=b,this):a}}function Nd(a,b,d){function c(){return new e}function e(){var a=this.promise=new f;this.resolve=function(b){h(a,b)},this.reject=function(b){m(a,b)},this.notify=function(b){n(a,b)}}function f(){this.$$state={status:0}}function g(){for(;!w&&x.length;){var a=x.shift();if(!a.pur){a.pur=!0;var c=a.value,c="Possibly unhandled rejection: "+("function"==typeof c?c.toString().replace(/ \{[\s\S]*$/,""):A(c)?"undefined":"string"!=typeof c?Ne(c,void 0):c);dc(a.value)?b(a.value,c):b(c)}}}function k(c){!d||c.pending||2!==c.status||c.pur||(0===w&&0===x.length&&a(g),x.push(c)),!c.processScheduled&&c.pending&&(c.processScheduled=!0,++w,a(function(){var e,f,k;k=c.pending,c.processScheduled=!1,c.pending=void 0;try{for(var l=0,n=k.length;l<n;++l){c.pur=!0,f=k[l][0],e=k[l][c.status];try{B(e)?h(f,e(c.value)):1===c.status?h(f,c.value):m(f,c.value)}catch(p){m(f,p),p&&!0===p.$$passToExceptionHandler&&b(p)}}}finally{--w,d&&0===w&&a(g)}}))}function h(a,b){a.$$state.status||(b===a?p(a,v("qcycle",b)):l(a,b))}function l(a,b){function c(b){g||(g=!0,l(a,b))}function d(b){g||(g=!0,p(a,b))}function e(b){n(a,b)}var f,g=!1;try{(D(b)||B(b))&&(f=b.then),B(f)?(a.$$state.status=-1,f.call(b,c,d,e)):(a.$$state.value=b,a.$$state.status=1,k(a.$$state))}catch(h){d(h)}}function m(a,b){a.$$state.status||p(a,b)}function p(a,b){a.$$state.value=b,a.$$state.status=2,k(a.$$state)}function n(c,d){var e=c.$$state.pending;0>=c.$$state.status&&e&&e.length&&a(function(){for(var a,c,f=0,g=e.length;f<g;f++){c=e[f][0],a=e[f][3];try{n(c,B(a)?a(d):d)}catch(h){b(h)}}})}function s(a){var b=new f;return m(b,a),b}function G(a,b,c){var d=null;try{B(c)&&(d=c())}catch(e){return s(e)}return d&&B(d.then)?d.then(function(){return b(a)},s):b(a)}function t(a,b,c,d){var e=new f;return h(e,a),e.then(b,c,d)}function q(a){if(!B(a))throw v("norslvr",a);var b=new f;return a(function(a){h(b,a)},function(a){m(b,a)}),b}var v=F("$q",TypeError),w=0,x=[];S(f.prototype,{then:function(a,b,c){if(A(a)&&A(b)&&A(c))return this;var d=new f;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([d,a,b,c]),0<this.$$state.status&&k(this.$$state),d},catch:function(a){return this.then(null,a)},finally:function(a,b){return this.then(function(b){return G(b,y,a)},function(b){return G(b,s,a)},b)}});var y=t;return q.prototype=f.prototype,q.defer=c,q.reject=s,q.when=t,q.resolve=y,q.all=function(a){var b=new f,c=0,d=H(a)?[]:{};return r(a,function(a,e){c++,t(a).then(function(a){d[e]=a,--c||h(b,d)},function(a){m(b,a)})}),0===c&&h(b,d),b},q.race=function(a){var b=c();return r(a,function(a){t(a).then(b.resolve,b.reject)}),b.promise},q}function mg(){this.$get=["$window","$timeout",function(a,b){var d=a.requestAnimationFrame||a.webkitRequestAnimationFrame,c=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!d,f=e?function(a){var b=d(a);return function(){c(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};return f.supported=e,f}]}function ag(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=++qb,this.$$ChildScope=null,this.$$suspended=!1}return b.prototype=a,b}var b=10,d=F("$rootScope"),c=null,e=null;this.digestTtl=function(a){return arguments.length&&(b=a),b},this.$get=["$exceptionHandler","$parse","$browser",function(f,g,k){function h(a){a.currentScope.$$destroyed=!0}function l(a){9===wa&&(a.$$childHead&&l(a.$$childHead),a.$$nextSibling&&l(a.$$nextSibling)),a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function m(){this.$id=++qb,this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$suspended=this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function p(a){if(v.$$phase)throw d("inprog",v.$$phase);v.$$phase=a}function n(a,b){do{a.$$watchersCount+=b}while(a=a.$parent)}function s(a,b,c){do{a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c]}while(a=a.$parent)}function G(){}function t(){for(;y.length;)try{y.shift()()}catch(a){f(a)}e=null}function q(){null===e&&(e=k.defer(function(){v.$apply(t)},null,"$applyAsync"))}m.prototype={constructor:m,$new:function(b,c){var d;return c=c||this,b?(d=new m,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope),d.$parent=c,d.$$prevSibling=c.$$childTail,c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d,(b||c!==this)&&d.$on("$destroy",h),d},$watch:function(a,b,d,e){var f=g(a);if(b=B(b)?b:E,f.$$watchDelegate)return f.$$watchDelegate(this,b,d,f,a);var h=this,k=h.$$watchers,l={fn:b,last:G,get:f,exp:e||a,eq:!!d};return c=null,k||(k=h.$$watchers=[],k.$$digestWatchIndex=-1),k.unshift(l),k.$$digestWatchIndex++,n(this,1),function(){var a=cb(k,l);0<=a&&(n(h,-1),a<k.$$digestWatchIndex&&k.$$digestWatchIndex--),c=null}},$watchGroup:function(a,b){function c(){h=!1;try{k?(k=!1,b(e,e,g)):b(e,d,g)}finally{for(var f=0;f<a.length;f++)d[f]=e[f]}}var d=Array(a.length),e=Array(a.length),f=[],g=this,h=!1,k=!0;if(!a.length){var l=!0;return g.$evalAsync(function(){l&&b(e,e,g)}),function(){l=!1}}return 1===a.length?this.$watch(a[0],function(a,c,f){e[0]=a,d[0]=c,b(e,a===c?e:d,f)}):(r(a,function(a,b){var d=g.$watch(a,function(a){e[b]=a,h||(h=!0,g.$evalAsync(c))});f.push(d)}),function(){for(;f.length;)f.shift()()})},$watchCollection:function(a,b){function c(a){e=a;var b,g,h;if(!A(e)){if(D(e))if(za(e))for(f!==n&&(f=n,t=f.length=0,l++),a=e.length,t!==a&&(l++,f.length=t=a),b=0;b<a;b++)h=f[b],g=e[b],h!==h&&g!==g||h===g||(l++,f[b]=g);else{f!==p&&(f=p={},t=0,l++),a=0;for(b in e)ta.call(e,b)&&(a++,g=e[b],h=f[b],b in f?h!==h&&g!==g||h===g||(l++,f[b]=g):(t++,f[b]=g,l++));if(t>a)for(b in l++,f)ta.call(e,b)||(t--,delete f[b])}else f!==e&&(f=e,l++);return l}}c.$$pure=g(a).literal,c.$stateful=!c.$$pure;var e,f,h,d=this,k=1<b.length,l=0,m=g(a,c),n=[],p={},s=!0,t=0;return this.$watch(m,function(){if(s?(s=!1,b(e,e,d)):b(e,h,d),k)if(D(e))if(za(e)){h=Array(e.length);for(var a=0;a<e.length;a++)h[a]=e[a]}else for(a in h={},e)ta.call(e,a)&&(h[a]=e[a]);else h=e})},$digest:function(){var a,g,h,l,m,n,s,q,A,z,r=b,y=w.length?v:this,N=[];p("$digest"),k.$$checkUrlChange(),this===v&&null!==e&&(k.defer.cancel(e),t()),c=null;do{for(s=!1,q=y,n=0;n<w.length;n++){try{z=w[n],(l=z.fn)(z.scope,z.locals)}catch(C){f(C)}c=null}w.length=0;a:do{if(n=!q.$$suspended&&q.$$watchers)for(n.$$digestWatchIndex=n.length;n.$$digestWatchIndex--;)try{if(a=n[n.$$digestWatchIndex])if(m=a.get,(g=m(q))===(h=a.last)||(a.eq?va(g,h):Y(g)&&Y(h))){if(a===c){s=!1;break a}}else s=!0,c=a,a.last=a.eq?Ia(g,null):g,l=a.fn,l(g,h===G?g:h,q),5>r&&(A=4-r,N[A]||(N[A]=[]),N[A].push({msg:B(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:g,oldVal:h}))}catch(E){f(E)}if(!(n=!q.$$suspended&&q.$$watchersCount&&q.$$childHead||q!==y&&q.$$nextSibling))for(;q!==y&&!(n=q.$$nextSibling);)q=q.$parent}while(q=n);if((s||w.length)&&!r--)throw v.$$phase=null,d("infdig",b,N)}while(s||w.length);for(v.$$phase=null;J<x.length;)try{x[J++]()}catch(D){f(D)}x.length=J=0,k.$$checkUrlChange()},$suspend:function(){this.$$suspended=!0},$isSuspended:function(){return this.$$suspended},$resume:function(){this.$$suspended=!1},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===v&&k.$$applicationDestroyed(),n(this,-this.$$watchersCount);for(var b in this.$$listenerCount)s(this,this.$$listenerCount[b],b);a&&a.$$childHead===this&&(a.$$childHead=this.$$nextSibling),a&&a.$$childTail===this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=E,this.$on=this.$watch=this.$watchGroup=function(){return E},this.$$listeners={},this.$$nextSibling=null,l(this)}},$eval:function(a,b){return g(a)(this,b)},$evalAsync:function(a,b){v.$$phase||w.length||k.defer(function(){w.length&&v.$digest()},null,"$evalAsync"),w.push({scope:this,fn:g(a),locals:b})},$$postDigest:function(a){x.push(a)},$apply:function(a){try{p("$apply");try{return this.$eval(a)}finally{v.$$phase=null}}catch(b){f(b)}finally{try{v.$digest()}catch(c){throw f(c),c}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&y.push(b),a=g(a),q()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do{d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++}while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(delete c[d],s(e,1,a))}},$emit:function(a,b){var d,l,m,c=[],e=this,g=!1,h={name:a,targetScope:e,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=db([h],arguments,1);do{for(d=e.$$listeners[a]||c,h.currentScope=e,l=0,m=d.length;l<m;l++)if(d[l])try{d[l].apply(null,k)}catch(n){f(n)}else d.splice(l,1),l--,m--;if(g)break;e=e.$parent}while(e);return h.currentScope=null,h},$broadcast:function(a,b){var c=this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[a])return e;for(var h,k,g=db([e],arguments,1);c=d;){for(e.currentScope=c,d=c.$$listeners[a]||[],h=0,k=d.length;h<k;h++)if(d[h])try{d[h].apply(null,g)}catch(l){f(l)}else d.splice(h,1),h--,k--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}return e.currentScope=null,e}};var v=new m,w=v.$$asyncQueue=[],x=v.$$postDigestQueue=[],y=v.$$applyAsyncQueue=[],J=0;return v}]}function Qe(){var a=/^\s*(https?|s?ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationTrustedUrlList=function(b){return w(b)?(a=b,this):a},this.imgSrcSanitizationTrustedUrlList=function(a){return w(a)?(b=a,this):b},this.$get=function(){return function(d,c){var e=c?b:a,f=ga(d&&d.trim()).href;return""===f||f.match(e)?d:"unsafe:"+f}}}function Xg(a){if("self"===a)return a;if(C(a)){if(-1<a.indexOf("***"))throw Ea("iwcard",a);return a=Od(a).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+a+"$")}if(ab(a))return new RegExp("^"+a.source+"$");throw Ea("imatcher")}function Pd(a){var b=[];return w(a)&&r(a,function(a){b.push(Xg(a))}),b}function eg(){this.SCE_CONTEXTS=W;var a=["self"],b=[];this.trustedResourceUrlList=function(b){return arguments.length&&(a=Pd(b)),a},Object.defineProperty(this,"resourceUrlWhitelist",{get:function(){return this.trustedResourceUrlList},set:function(a){this.trustedResourceUrlList=a}}),this.bannedResourceUrlList=function(a){return arguments.length&&(b=Pd(a)),b},Object.defineProperty(this,"resourceUrlBlacklist",{get:function(){return this.bannedResourceUrlList},set:function(a){this.bannedResourceUrlList=a}}),this.$get=["$injector","$$sanitizeUri",function(d,c){function e(a,b){var c;return"self"===a?(c=Cc(b,Qd))||(z.document.baseURI?c=z.document.baseURI:(Na||(Na=z.document.createElement("a"),Na.href=".",Na=Na.cloneNode(!1)),c=Na.href),c=Cc(b,c)):c=!!a.exec(b.href),c}function f(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}var g=function(a){throw Ea("unsafe")};d.has("$sanitize")&&(g=d.get("$sanitize"));var k=f(),h={};return h[W.HTML]=f(k),h[W.CSS]=f(k),h[W.MEDIA_URL]=f(k),h[W.URL]=f(h[W.MEDIA_URL]),h[W.JS]=f(k),h[W.RESOURCE_URL]=f(h[W.URL]),{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw Ea("icontext",a,b);if(null===b||A(b)||""===b)return b;if("string"!=typeof b)throw Ea("itype",a);return new c(b)},getTrusted:function(d,f){if(null===f||A(f)||""===f)return f;var k=h.hasOwnProperty(d)?h[d]:null;if(k&&f instanceof k)return f.$$unwrapTrustedValue();if(B(f.$$unwrapTrustedValue)&&(f=f.$$unwrapTrustedValue()),d===W.MEDIA_URL||d===W.URL)return c(f.toString(),d===W.MEDIA_URL);if(d===W.RESOURCE_URL){var n,s,k=ga(f.toString()),r=!1;for(n=0,s=a.length;n<s;n++)if(e(a[n],k)){r=!0;break}if(r)for(n=0,s=b.length;n<s;n++)if(e(b[n],k)){r=!1;break}if(r)return f;throw Ea("insecurl",f.toString())}if(d===W.HTML)return g(f);throw Ea("unsafe")},valueOf:function(a){return a instanceof k?a.$$unwrapTrustedValue():a}}}]}function dg(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$sceDelegate",function(b,d){if(a&&8>wa)throw Ea("iequirks");var c=ja(W);c.isEnabled=function(){return a},c.trustAs=d.trustAs,c.getTrusted=d.getTrusted,c.valueOf=d.valueOf,a||(c.trustAs=c.getTrusted=function(a,b){return b},c.valueOf=Ta),c.parseAs=function(a,d){var e=b(d);return e.literal&&e.constant?e:b(d,function(b){return c.getTrusted(a,b)})};var e=c.parseAs,f=c.getTrusted,g=c.trustAs;return r(W,function(a,b){var d=K(b);c[("parse_as_"+d).replace(Dc,xb)]=function(b){return e(a,b)},c[("get_trusted_"+d).replace(Dc,xb)]=function(b){return f(a,b)},c[("trust_as_"+d).replace(Dc,xb)]=function(b){return g(a,b)}}),c}]}function fg(){this.$get=["$window","$document",function(a,b){var d={},c=!((!a.nw||!a.nw.process)&&a.chrome&&(a.chrome.app&&a.chrome.app.runtime||!a.chrome.app&&a.chrome.runtime&&a.chrome.runtime.id))&&a.history&&a.history.pushState,e=fa((/android (\d+)/.exec(K((a.navigator||{}).userAgent))||[])[1]),f=/Boxee/i.test((a.navigator||{}).userAgent),g=b[0]||{},k=g.body&&g.body.style,h=!1,l=!1;return k&&(h=!!("transition"in k||"webkitTransition"in k),l=!!("animation"in k||"webkitAnimation"in k)),{history:!(!c||4>e||f),hasEvent:function(a){if("input"===a&&wa)return!1;if(A(d[a])){var b=g.createElement("div");d[a]="on"+a in b}return d[a]},csp:Ba(),transitions:h,animations:l,android:e}}]}function gg(){this.$get=ia(function(a){return new Yg(a)})}function Yg(a){function b(){var a=e.pop();return a&&a.cb}function d(a){for(var b=e.length-1;0<=b;--b){var c=e[b];if(c.type===a)return e.splice(b,1),c.cb}}var c={},e=[],f=this.ALL_TASKS_TYPE="$$all$$",g=this.DEFAULT_TASK_TYPE="$$default$$";this.completeTask=function(e,h){h=h||g;try{e()}finally{var l;l=h||g,c[l]&&(c[l]--,c[f]--),l=c[h];var m=c[f];if(!m||!l)for(l=m?d:b;m=l(h);)try{m()}catch(p){a.error(p)}}},this.incTaskCount=function(a){a=a||g,c[a]=(c[a]||0)+1,c[f]=(c[f]||0)+1},this.notifyWhenNoPendingTasks=function(a,b){b=b||f,c[b]?e.push({type:b,cb:a}):a()}}function ig(){var a;this.httpOptions=function(b){return b?(a=b,this):a},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(b,d,c,e,f){function g(k,h){g.totalPendingRequests++,C(k)&&!A(d.get(k))||(k=f.getTrustedResourceUrl(k));var l=c.defaults&&c.defaults.transformResponse;return H(l)?l=l.filter(function(a){return a!==wc}):l===wc&&(l=null),c.get(k,S({cache:d,transformResponse:l},a)).finally(function(){g.totalPendingRequests--}).then(function(a){return d.put(k,a.data)},function(a){return h||(a=Zg("tpload",k,a.status,a.statusText),b(a)),e.reject(a)})}return g.totalPendingRequests=0,g}]}function jg(){this.$get=["$rootScope","$browser","$location",function(a,b,d){return{findBindings:function(a,b,d){a=a.getElementsByClassName("ng-binding");var g=[];return r(a,function(a){var c=ca.element(a).data("$binding");c&&r(c,function(c){d?new RegExp("(^|\\s)"+Od(b)+"(\\s|\\||$)").test(c)&&g.push(a):-1!==c.indexOf(b)&&g.push(a)})}),g},findModels:function(a,b,d){for(var g=["ng-","data-ng-","ng\\:"],k=0;k<g.length;++k){var h=a.querySelectorAll("["+g[k]+"model"+(d?"=":"*=")+'"'+b+'"]');if(h.length)return h}},getLocation:function(){return d.url()},setLocation:function(b){b!==d.url()&&(d.url(b),a.$digest())},whenStable:function(a){b.notifyWhenNoOutstandingRequests(a)}}}]}function kg(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,d,c,e){function f(f,h,l){B(f)||(l=h,h=f,f=E);var r,m=Ha.call(arguments,3),p=w(l)&&!l,n=(p?c:d).defer(),s=n.promise;return r=b.defer(function(){try{n.resolve(f.apply(null,m))}catch(b){n.reject(b),e(b)}finally{delete g[s.$$timeoutId]}p||a.$apply()},h,"$timeout"),s.$$timeoutId=r,g[r]=n,s}var g={};return f.cancel=function(a){if(!a)return!1;if(!a.hasOwnProperty("$$timeoutId"))throw $g("badprom");if(!g.hasOwnProperty(a.$$timeoutId))return!1;a=a.$$timeoutId;var c=g[a],d=c.promise;return d.$$state&&(d.$$state.pur=!0),c.reject("canceled"),delete g[a],b.defer.cancel(a)},f}]}function ga(a){return C(a)?(wa&&(aa.setAttribute("href",a),a=aa.href),aa.setAttribute("href",a),a=aa.hostname,!ah&&-1<a.indexOf(":")&&(a="["+a+"]"),{href:aa.href,protocol:aa.protocol?aa.protocol.replace(/:$/,""):"",host:aa.host,search:aa.search?aa.search.replace(/^\?/,""):"",hash:aa.hash?aa.hash.replace(/^#/,""):"",hostname:a,port:aa.port,pathname:"/"===aa.pathname.charAt(0)?aa.pathname:"/"+aa.pathname}):a}function Og(a){var b=[Qd].concat(a.map(ga));return function(a){return a=ga(a),b.some(Cc.bind(null,a))}}function Cc(a,b){return a=ga(a),b=ga(b),a.protocol===b.protocol&&a.host===b.host}function lg(){this.$get=ia(z)}function Rd(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}var d=a[0]||{},c={},e="";return function(){var a,g,k,h,l;try{a=d.cookie||""}catch(m){a=""}if(a!==e)for(e=a,a=e.split("; "),c={},k=0;k<a.length;k++)g=a[k],0<(h=g.indexOf("="))&&(l=b(g.substring(0,h)),A(c[l])&&(c[l]=b(g.substring(h+1))));return c}}function pg(){this.$get=Rd}function fd(a){function b(d,c){if(D(d)){var e={};return r(d,function(a,c){e[c]=b(c,a)}),e}return a.factory(d+"Filter",c)}this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter")}}],b("currency",Sd),b("date",Td),b("filter",bh),b("json",ch),b("limitTo",dh),b("lowercase",eh),b("number",Ud),b("orderBy",Vd),b("uppercase",fh)}function bh(){return function(a,b,d,c){if(!za(a)){if(null==a)return a;throw F("filter")("notarray",a)}c=c||"$";var e;switch(Ec(b)){case"function":break;case"boolean":case"null":case"number":case"string":e=!0;case"object":b=gh(b,d,c,e);break;default:return a}return Array.prototype.filter.call(a,b)}}function gh(a,b,d,c){var e=D(a)&&d in a;return!0===b?b=va:B(b)||(b=function(a,_b){return!A(a)&&(null===a||null===_b?a===_b:!(D(_b)||D(a)&&!cc(a))&&(a=K(""+a),_b=K(""+_b),-1!==a.indexOf(_b)))}),function(f){return e&&!D(f)?Fa(f,a[d],b,d,!1):Fa(f,a,b,d,c)}}function Fa(a,b,d,c,e,f){var g=Ec(a),k=Ec(b);if("string"===k&&"!"===b.charAt(0))return!Fa(a,b.substring(1),d,c,e);if(H(a))return a.some(function(a){return Fa(a,b,d,c,e)});switch(g){case"object":var h;if(e){for(h in a)if(h.charAt&&"$"!==h.charAt(0)&&Fa(a[h],b,d,c,!0))return!0;return!f&&Fa(a,b,d,c,!1)}if("object"===k){for(h in b)if(f=b[h],!B(f)&&!A(f)&&(g=h===c,!Fa(g?a:a[h],f,d,c,g,g)))return!1;return!0}return d(a,b);case"function":return!1;default:return d(a,b)}}function Ec(a){return null===a?"null":_typeof(a)}function Sd(a){var b=a.NUMBER_FORMATS;return function(a,c,e){A(c)&&(c=b.CURRENCY_SYM),A(e)&&(e=b.PATTERNS[1].maxFrac);var f=c?/\u00A4/g:/\s*\u00A4\s*/g;return null==a?a:Wd(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,e).replace(f,c)}}function Ud(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:Wd(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function hh(a){var d,c,e,f,g,b=0;for(-1<(c=a.indexOf(Xd))&&(a=a.replace(Xd,"")),0<(e=a.search(/e/i))?(0>c&&(c=e),c+=+a.slice(e+1),a=a.substring(0,e)):0>c&&(c=a.length),e=0;a.charAt(e)===Fc;e++);if(e===(g=a.length))d=[0],c=1;else{for(g--;a.charAt(g)===Fc;)g--;for(c-=e,d=[],f=0;e<=g;e++,f++)d[f]=+a.charAt(e)}return c>Yd&&(d=d.splice(0,Yd-1),b=c-1,c=1),{d:d,e:b,i:c}}function ih(a,b,d,c){var e=a.d,f=e.length-a.i;if(b=A(b)?Math.min(Math.max(d,f),c):+b,d=b+a.i,c=e[d],0<d){e.splice(Math.max(a.i,d));for(var g=d;g<e.length;g++)e[g]=0}else for(f=Math.max(0,f),a.i=1,e.length=Math.max(1,d=b+1),e[0]=0,g=1;g<d;g++)e[g]=0;if(5<=c)if(0>d-1){for(c=0;c>d;c--)e.unshift(0),a.i++;e.unshift(1),a.i++}else e[d-1]++;for(;f<Math.max(0,b);f++)e.push(0);(b=e.reduceRight(function(a,b,c,d){return b+=a,d[c]=b%10,Math.floor(b/10)},0))&&(e.unshift(b),a.i++)}function Wd(a,b,d,c,e){if(!C(a)&&!X(a)||isNaN(a))return"";var f=!isFinite(a),g=!1,k=Math.abs(a)+"",h="";if(f)h="∞";else{for(g=hh(k),ih(g,e,b.minFrac,b.maxFrac),h=g.d,k=g.i,e=g.e,f=[],g=h.reduce(function(a,b){return a&&!b},!0);0>k;)h.unshift(0),k++;for(0<k?f=h.splice(k,h.length):(f=h,h=[0]),k=[],h.length>=b.lgSize&&k.unshift(h.splice(-b.lgSize,h.length).join(""));h.length>b.gSize;)k.unshift(h.splice(-b.gSize,h.length).join(""));h.length&&k.unshift(h.join("")),h=k.join(d),f.length&&(h+=c+f.join("")),e&&(h+="e+"+e)}return 0>a&&!g?b.negPre+h+b.negSuf:b.posPre+h+b.posSuf}function Pb(a,b,d,c){var e="";for((0>a||c&&0>=a)&&(c?a=1-a:(a=-a,e="-")),a=""+a;a.length<b;)a=Fc+a;return d&&(a=a.substr(a.length-b)),e+a}function ea(a,b,d,c,e){return d=d||0,function(f){return f=f["get"+a](),(0<d||f>-d)&&(f+=d),0===f&&-12===d&&(f=12),Pb(f,b,c,e)}}function lb(a,b,d){return function(c,e){var f=c["get"+a]();return e[vb((d?"STANDALONE":"")+(b?"SHORT":"")+a)][f]}}function Zd(a){var b=new Date(a,0,1).getDay();return new Date(a,0,(4>=b?5:12)-b)}function $d(a){return function(b){var d=Zd(b.getFullYear());return b=+new Date(b.getFullYear(),b.getMonth(),b.getDate()+(4-b.getDay()))-+d,b=1+Math.round(b/6048e5),Pb(b,a)}}function Gc(a,b){return 0>=a.getFullYear()?b.ERAS[0]:b.ERAS[1]}function Td(a){function b(a){var b;if(b=a.match(d)){a=new Date(0);var f=0,g=0,k=b[8]?a.setUTCFullYear:a.setFullYear,h=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=fa(b[9]+b[10]),g=fa(b[9]+b[11])),k.call(a,fa(b[1]),fa(b[2])-1,fa(b[3])),f=fa(b[4]||0)-f,g=fa(b[5]||0)-g,k=fa(b[6]||0),b=Math.round(1e3*parseFloat("0."+(b[7]||0))),h.call(a,f,g,k,b)}return a}var d=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d,f){var h,l,g="",k=[];if(d=d||"mediumDate",d=a.DATETIME_FORMATS[d]||d,C(c)&&(c=jh.test(c)?fa(c):b(c)),X(c)&&(c=new Date(c)),!ha(c)||!isFinite(c.getTime()))return c;for(;d;)(l=kh.exec(d))?(k=db(k,l,1),d=k.pop()):(k.push(d),d=null);var m=c.getTimezoneOffset();return f&&(m=fc(f,m),c=gc(c,f,!0)),r(k,function(b){h=lh[b],g+=h?h(c,a.DATETIME_FORMATS,m):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),g}}function ch(){return function(a,b){return A(b)&&(b=2),eb(a,b)}}function dh(){return function(a,b,d){return b=1/0===Math.abs(Number(b))?Number(b):fa(b),Y(b)?a:(X(a)&&(a=a.toString()),za(a)?(d=!d||isNaN(d)?0:fa(d),d=0>d?Math.max(0,a.length+d):d,0<=b?Hc(a,d,d+b):0===d?Hc(a,b,a.length):Hc(a,Math.max(0,d+b),d)):a)}}function Hc(a,b,d){return C(a)?a.slice(b,d):Ha.call(a,b,d)}function Vd(a){function b(b){return b.map(function(b){var c=1,d=Ta;if(B(b))d=b;else if(C(b)&&("+"!==b.charAt(0)&&"-"!==b.charAt(0)||(c="-"===b.charAt(0)?-1:1,b=b.substring(1)),""!==b&&(d=a(b),d.constant)))var e=d(),d=function(a){return a[e]};return{get:d,descending:c}})}function d(a){switch(_typeof(a)){case"number":case"boolean":case"string":return!0;default:return!1}}function c(a,b){var c=0,d=a.type,h=b.type;if(d===h){var h=a.value,l=b.value;"string"===d?(h=h.toLowerCase(),l=l.toLowerCase()):"object"===d&&(D(h)&&(h=a.index),D(l)&&(l=b.index)),h!==l&&(c=h<l?-1:1)}else c="undefined"===d?1:"undefined"===h?-1:"null"===d?1:"null"===h?-1:d<h?-1:1;return c}return function(a,f,g,k){if(null==a)return a;if(!za(a))throw F("orderBy")("notarray",a);H(f)||(f=[f]),0===f.length&&(f=["+"]);var h=b(f),l=g?-1:1,m=B(k)?k:c;return a=Array.prototype.map.call(a,function(a,b){return{value:a,tieBreaker:{value:b,type:"number",index:b},predicateValues:h.map(function(c){var e=c.get(a);return c=_typeof(e),null===e?c="null":"object"===c&&(B(e.valueOf)&&(e=e.valueOf(),d(e))||cc(e)&&(e=e.toString(),d(e))),{value:e,type:c,index:b}})}}),a.sort(function(a,b){for(var d=0,e=h.length;d<e;d++){var f=m(a.predicateValues[d],b.predicateValues[d]);if(f)return f*h[d].descending*l}return(m(a.tieBreaker,b.tieBreaker)||c(a.tieBreaker,b.tieBreaker))*l}),a=a.map(function(a){return a.value})}}function Ra(a){return B(a)&&(a={link:a}),a.restrict=a.restrict||"AC",ia(a)}function Qb(a,b,d,c,e){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=e(b.name||b.ngForm||"")(d),this.$dirty=!1,this.$valid=this.$pristine=!0,this.$submitted=this.$invalid=!1,this.$$parentForm=mb,this.$$element=a,this.$$animate=c,ae(this)}function ae(a){a.$$classCache={},a.$$classCache[be]=!(a.$$classCache[nb]=a.$$element.hasClass(nb))}function ce(a){function b(a,b,c){c&&!a.$$classCache[b]?(a.$$animate.addClass(a.$$element,b),a.$$classCache[b]=!0):!c&&a.$$classCache[b]&&(a.$$animate.removeClass(a.$$element,b),a.$$classCache[b]=!1)}function d(a,c,d){c=c?"-"+Xc(c,"-"):"",b(a,nb+c,!0===d),b(a,be+c,!1===d)}var c=a.set,e=a.unset;a.clazz.prototype.$setValidity=function(a,g,k){A(g)?(this.$pending||(this.$pending={}),c(this.$pending,a,k)):(this.$pending&&e(this.$pending,a,k),de(this.$pending)&&(this.$pending=void 0)),Ga(g)?g?(e(this.$error,a,k),c(this.$$success,a,k)):(c(this.$error,a,k),e(this.$$success,a,k)):(e(this.$error,a,k),e(this.$$success,a,k)),this.$pending?(b(this,"ng-pending",!0),this.$valid=this.$invalid=void 0,d(this,"",null)):(b(this,"ng-pending",!1),this.$valid=de(this.$error),this.$invalid=!this.$valid,d(this,"",this.$valid)),g=this.$pending&&this.$pending[a]?void 0:!this.$error[a]&&(!!this.$$success[a]||null),d(this,a,g),this.$$parentForm.$setValidity(a,g,this)}}function de(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function Ic(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function Sa(a,b,d,c,e,f){var g=K(b[0].type);if(!e.android){var k=!1;b.on("compositionstart",function(){k=!0}),b.on("compositionupdate",function(a){(A(a.data)||""===a.data)&&(k=!1)}),b.on("compositionend",function(){k=!1,l()})}var h,l=function(a){if(h&&(f.defer.cancel(h),h=null),!k){var e=b.val();a=a&&a.type,"password"===g||d.ngTrim&&"false"===d.ngTrim||(e=V(e)),(c.$viewValue!==e||""===e&&c.$$hasNativeValidators)&&c.$setViewValue(e,a)}};if(e.hasEvent("input"))b.on("input",l);else{var m=function(a,b,c){h||(h=f.defer(function(){h=null,b&&b.value===c||l(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||m(a,this,this.value)}),e.hasEvent("paste")&&b.on("paste cut drop",m)}b.on("change",l),ee[g]&&c.$$hasNativeValidators&&g===d.type&&b.on("keydown wheel mousedown",function(a){if(!h){var b=this.validity,c=b.badInput,d=b.typeMismatch;h=f.defer(function(){h=null,b.badInput===c&&b.typeMismatch===d||l(a)})}}),c.$render=function(){var a=c.$isEmpty(c.$viewValue)?"":c.$viewValue;b.val()!==a&&b.val(a)}}function Rb(a,b){return function(d,c){var e,f;if(ha(d))return d;if(C(d)){if('"'===d.charAt(0)&&'"'===d.charAt(d.length-1)&&(d=d.substring(1,d.length-1)),mh.test(d))return new Date(d);if(a.lastIndex=0,e=a.exec(d))return e.shift(),f=c?{yyyy:c.getFullYear(),MM:c.getMonth()+1,dd:c.getDate(),HH:c.getHours(),mm:c.getMinutes(),ss:c.getSeconds(),sss:c.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},r(e,function(a,c){c<b.length&&(f[b[c]]=+a)}),e=new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,1e3*f.sss||0),100>f.yyyy&&e.setFullYear(f.yyyy),e}return NaN}}function ob(a,b,d,c){return function(e,f,g,k,h,l,m,p){function n(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function s(a){return w(a)&&!ha(a)?r(a)||void 0:a}function r(a,b){var c=k.$options.getOption("timezone");v&&v!==c&&(b=Uc(b,fc(v)));var e=d(a,b);return!isNaN(e)&&c&&(e=gc(e,c)),e}Jc(e,f,g,k,a),Sa(e,f,g,k,h,l);var q,v,t="time"===a||"datetimelocal"===a;if(k.$parsers.push(function(c){return k.$isEmpty(c)?null:b.test(c)?r(c,q):void(k.$$parserName=a)}),k.$formatters.push(function(a){if(a&&!ha(a))throw pb("datefmt",a);if(n(a)){q=a;var b=k.$options.getOption("timezone");b&&(v=b,q=gc(q,b,!0));var d=c;return t&&C(k.$options.getOption("timeSecondsFormat"))&&(d=c.replace("ss.sss",k.$options.getOption("timeSecondsFormat")).replace(/:$/,"")),a=m("date")(a,d,b),t&&k.$options.getOption("timeStripZeroSeconds")&&(a=a.replace(/(?::00)?(?:\.000)?$/,"")),a}return v=q=null,""}),w(g.min)||g.ngMin){var x=g.min||p(g.ngMin)(e),z=s(x);k.$validators.min=function(a){return!n(a)||A(z)||d(a)>=z},g.$observe("min",function(a){a!==x&&(z=s(a),x=a,k.$validate())})}if(w(g.max)||g.ngMax){var y=g.max||p(g.ngMax)(e),J=s(y);k.$validators.max=function(a){return!n(a)||A(J)||d(a)<=J},g.$observe("max",function(a){a!==y&&(J=s(a),y=a,k.$validate())})}}}function Jc(a,b,d,c,e){(c.$$hasNativeValidators=D(b[0].validity))&&c.$parsers.push(function(a){var d=b.prop("validity")||{};if(!d.badInput&&!d.typeMismatch)return a;c.$$parserName=e})}function fe(a){a.$parsers.push(function(b){return a.$isEmpty(b)?null:nh.test(b)?parseFloat(b):void(a.$$parserName="number")}),a.$formatters.push(function(b){if(!a.$isEmpty(b)){if(!X(b))throw pb("numfmt",b);b=b.toString()}return b})}function na(a){return w(a)&&!X(a)&&(a=parseFloat(a)),Y(a)?void 0:a}function Kc(a){var b=a.toString(),d=b.indexOf(".");return-1===d?-1<a&&1>a&&(a=/e-(\d+)$/.exec(b))?Number(a[1]):0:b.length-d-1}function ge(a,b,d){a=Number(a);var c=(0|a)!==a,e=(0|b)!==b,f=(0|d)!==d;if(c||e||f){var g=c?Kc(a):0,k=e?Kc(b):0,h=f?Kc(d):0,g=Math.max(g,k,h),g=Math.pow(10,g);a*=g,b*=g,d*=g,c&&(a=Math.round(a)),e&&(b=Math.round(b)),f&&(d=Math.round(d))}return 0==(a-b)%d}function he(a,b,d,c,e){if(w(c)){if(a=a(c),!a.constant)throw pb("constexpr",d,c);return a(b)}return e}function Lc(a,b){function d(a,b){if(!a||!a.length)return[];if(!b||!b.length)return a;var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],m=0;m<b.length;m++)if(e===b[m])continue a;c.push(e)}return c}function c(a){if(!a)return a;var b=a
;return H(a)?b=a.map(c).join(" "):D(a)?b=Object.keys(a).filter(function(b){return a[b]}).join(" "):C(a)||(b=a+""),b}a="ngClass"+a;var e;return["$parse",function(f){return{restrict:"AC",link:function(g,k,h){function l(a,b){var c=[];return r(a,function(a){(0<b||p[a])&&(p[a]=(p[a]||0)+b,p[a]===+(0<b)&&c.push(a))}),c.join(" ")}function m(a){if(a===b){var c=s,c=l(c&&c.split(" "),1);h.$addClass(c)}else c=s,c=l(c&&c.split(" "),-1),h.$removeClass(c);n=a}var s,p=k.data("$classCounts"),n=!0;p||(p=T(),k.data("$classCounts",p)),"ngClass"!==a&&(e||(e=f("$index",function(a){return 1&a})),g.$watch(e,m)),g.$watch(f(h[a],c),function(a){if(n===b){var c=s&&s.split(" "),e=a&&a.split(" "),f=d(c,e),c=d(e,c),f=l(f,-1),c=l(c,1);h.$addClass(c),h.$removeClass(f)}s=a})}}}]}function sd(a,b,d,c,e,f){return{restrict:"A",compile:function(g,k){var h=a(k[c]);return function(a,c){c.on(e,function(c){var e=function(){h(a,{$event:c})};if(b.$$phase)if(f)a.$evalAsync(e);else try{e()}catch(g){d(g)}else a.$apply(e)})}}}}function Sb(a,b,d,c,e,f,g,k,h){this.$modelValue=this.$viewValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=h(d.name||"",!1)(a),this.$$parentForm=mb,this.$options=Tb,this.$$updateEvents="",this.$$updateEventHandler=this.$$updateEventHandler.bind(this),this.$$parsedNgModel=e(d.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$parserName="parse",this.$$currentValidationRunId=0,this.$$scope=a,this.$$rootScope=a.$root,this.$$attr=d,this.$$element=c,this.$$animate=f,this.$$timeout=g,this.$$parse=e,this.$$q=k,this.$$exceptionHandler=b,ae(this),oh(this)}function oh(a){a.$$scope.$watch(function(b){return b=a.$$ngModelGet(b),b===a.$modelValue||a.$modelValue!==a.$modelValue&&b!==b||a.$$setModelValue(b),b})}function Mc(a){this.$$options=a}function ie(a,b){r(b,function(b,c){w(a[c])||(a[c]=b)})}function Oa(a,b){a.prop("selected",b),a.attr("selected",b)}function je(a,b,d){if(a){if(C(a)&&(a=new RegExp("^"+a+"$")),!a.test)throw F("ngPattern")("noregexp",b,a,Aa(d));return a}}function Ub(a){return a=fa(a),Y(a)?-1:a}var wa,x,sb,lc,Xb={objectMaxDepth:5,urlErrorParamsEnabled:!0},ke=/^\/(.+)\/([a-z]*)$/,ta=Object.prototype.hasOwnProperty,K=function(a){return C(a)?a.toLowerCase():a},vb=function(a){return C(a)?a.toUpperCase():a},Ha=[].slice,Kg=[].splice,ph=[].push,la=Object.prototype.toString,Rc=Object.getPrototypeOf,oa=F("ng"),ca=z.angular||(z.angular={}),qb=0;wa=z.document.documentMode;var Y=Number.isNaN||function(a){return a!==a};E.$inject=[],Ta.$inject=[];var ze=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,V=function(a){return C(a)?a.trim():a},Od=function(a){return a.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Ba=function Ba(){if(!w(Ba.rules)){var a=z.document.querySelector("[ng-csp]")||z.document.querySelector("[data-ng-csp]");if(a){var b=a.getAttribute("ng-csp")||a.getAttribute("data-ng-csp");Ba.rules={noUnsafeEval:!b||-1!==b.indexOf("no-unsafe-eval"),noInlineStyle:!b||-1!==b.indexOf("no-inline-style")}}else{a=Ba;try{new Function(""),b=!1}catch(d){b=!0}a.rules={noUnsafeEval:b,noInlineStyle:!1}}}return Ba.rules},rb=function rb(){if(w(rb.name_))return rb.name_;var a,b,c,e,d=Qa.length;for(b=0;b<d;++b)if(c=Qa[b],a=z.document.querySelector("["+c.replace(":","\\:")+"jq]")){e=a.getAttribute(c+"jq");break}return rb.name_=e},Be=/:/g,Qa=["ng-","data-ng-","ng:","x-ng-"],Fe=function(a){var b=a.currentScript;return!b||(b instanceof z.HTMLScriptElement||b instanceof z.SVGScriptElement)&&(b=b.attributes,[b.getNamedItem("src"),b.getNamedItem("href"),b.getNamedItem("xlink:href")].every(function(b){if(!b)return!0;if(!b.value)return!1;var c=a.createElement("a");if(c.href=b.value,a.location.origin===c.origin)return!0;switch(c.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}}))}(z.document),Ie=/[A-Z]/g,Yc=!1,Pa=3,Pe={full:"1.8.2",major:1,minor:8,dot:2,codeName:"meteoric-mining"};U.expando="ng339";var Ka=U.cache={},ug=1;U._data=function(a){return this.cache[a[this.expando]]||{}};var qg=/-([a-z])/g,qh=/^-ms-/,Bb={mouseleave:"mouseout",mouseenter:"mouseover"},oc=F("jqLite"),tg=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,nc=/<|&#?\w+;/,rg=/<([\w:-]+)/,sg=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,qa={thead:["table"],col:["colgroup","table"],tr:["tbody","table"],td:["tr","tbody","table"]};qa.tbody=qa.tfoot=qa.colgroup=qa.caption=qa.thead,qa.th=qa.td;var Nc,hb={option:[1,'<select multiple="multiple">',"</select>"],_default:[0,"",""]};for(Nc in qa){var le=qa[Nc],me=le.slice().reverse();hb[Nc]=[me.length,"<"+me.join("><")+">","</"+le.join("></")+">"]}hb.optgroup=hb.option;var zg=z.Node.prototype.contains||function(a){return!!(16&this.compareDocumentPosition(a))},Wa=U.prototype={ready:hd,toString:function(){var a=[];return r(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return x(0<=a?this[a]:this[this.length+a])},length:0,push:ph,sort:[].sort,splice:[].splice},Hb={};r("multiple selected checked disabled readOnly required open".split(" "),function(a){Hb[K(a)]=a});var od={};r("input select option textarea button form details".split(" "),function(a){od[a]=!0});var vd={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};r({data:sc,removeData:rc,hasData:function(a){for(var b in Ka[a.ng339])return!0;return!1},cleanData:function(a){for(var b=0,d=a.length;b<d;b++)rc(a[b]),kd(a[b])}},function(a,b){U[b]=a}),r({data:sc,inheritedData:Fb,scope:function(a){return x.data(a,"$scope")||Fb(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return x.data(a,"$isolateScope")||x.data(a,"$isolateScopeNoTemplate")},controller:ld,injector:function(a){return Fb(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:Cb,css:function(a,b,d){if(b=yb(b.replace(qh,"ms-")),!w(d))return a.style[b];a.style[b]=d},attr:function(a,b,d){var c=a.nodeType;if(c!==Pa&&2!==c&&8!==c&&a.getAttribute){var c=K(b),e=Hb[c];if(!w(d))return a=a.getAttribute(b),e&&null!==a&&(a=c),null===a?void 0:a;null===d||!1===d&&e?a.removeAttribute(b):a.setAttribute(b,e?c:d)}},prop:function(a,b,d){if(!w(d))return a[b];a[b]=d},text:function(){function a(a,d){if(A(d)){var c=a.nodeType;return 1===c||c===Pa?a.textContent:""}a.textContent=d}return a.$dv="",a}(),val:function(a,b){if(A(b)){if(a.multiple&&"select"===ua(a)){var d=[];return r(a.options,function(a){a.selected&&d.push(a.value||a.text)}),d}return a.value}a.value=b},html:function(a,b){if(A(b))return a.innerHTML;zb(a,!0),a.innerHTML=b},empty:md},function(a,b){U.prototype[b]=function(b,c){var e,f,g=this.length;if(a!==md&&A(2===a.length&&a!==Cb&&a!==ld?b:c)){if(D(b)){for(e=0;e<g;e++)if(a===sc)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}for(e=a.$dv,g=A(e)?Math.min(g,1):g,f=0;f<g;f++){var k=a(this[f],b,c);e=e?e+k:k}return e}for(e=0;e<g;e++)a(this[e],b,c);return this}}),r({removeData:rc,on:function(a,b,d,c){if(w(c))throw oc("onargs");if(mc(a)){c=Ab(a,!0);var e=c.events,f=c.handle;f||(f=c.handle=wg(a,e)),c=0<=b.indexOf(" ")?b.split(" "):[b];for(var g=c.length,k=function(b,c,g){var k=e[b];k||(k=e[b]=[],k.specialHandlerWrapper=c,"$destroy"===b||g||a.addEventListener(b,f)),k.push(d)};g--;)b=c[g],Bb[b]?(k(Bb[b],yg),k(b,void 0,!0)):k(b)}},off:kd,one:function(a,b,d){a=x(a),a.on(b,function e(){a.off(b,d),a.off(b,e)}),a.on(b,d)},replaceWith:function(a,b){var d,c=a.parentNode;zb(a),r(new U(b),function(b){d?c.insertBefore(b,d.nextSibling):c.replaceChild(b,a),d=b})},children:function(a){var b=[];return r(a.childNodes,function(a){1===a.nodeType&&b.push(a)}),b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var d=a.nodeType;if(1===d||11===d){b=new U(b);for(var d=0,c=b.length;d<c;d++)a.appendChild(b[d])}},prepend:function(a,b){if(1===a.nodeType){var d=a.firstChild;r(new U(b),function(b){a.insertBefore(b,d)})}},wrap:function(a,b){var d=x(b).eq(0).clone()[0],c=a.parentNode;c&&c.replaceChild(d,a),d.appendChild(a)},remove:Gb,detach:function(a){Gb(a,!0)},after:function(a,b){var d=a,c=a.parentNode;if(c){b=new U(b);for(var e=0,f=b.length;e<f;e++){var g=b[e];c.insertBefore(g,d.nextSibling),d=g}}},addClass:Eb,removeClass:Db,toggleClass:function(a,b,d){b&&r(b.split(" "),function(b){var e=d;A(e)&&(e=!Cb(a,b)),(e?Eb:Db)(a,b)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:qc,triggerHandler:function(a,b,d){var c,e,f=b.type||b,g=Ab(a);(g=(g=g&&g.events)&&g[f])&&(c={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:E,type:f,target:a},b.type&&(c=S(c,b)),b=ja(g),e=d?[c].concat(d):[c],r(b,function(b){c.isImmediatePropagationStopped()||b.apply(a,e)}))}},function(a,b){U.prototype[b]=function(b,c,e){for(var f,g=0,k=this.length;g<k;g++)A(f)?(f=a(this[g],b,c,e),w(f)&&(f=x(f))):pc(f,a(this[g],b,c,e));return w(f)?f:this}}),U.prototype.bind=U.prototype.on,U.prototype.unbind=U.prototype.off;var rh=Object.create(null);pd.prototype={_idx:function(a){return a!==this._lastKey&&(this._lastKey=a,this._lastIndex=this._keys.indexOf(a)),this._lastIndex},_transformKey:function(a){return Y(a)?rh:a},get:function(a){if(a=this._transformKey(a),-1!==(a=this._idx(a)))return this._values[a]},has:function(a){return a=this._transformKey(a),-1!==this._idx(a)},set:function(a,b){a=this._transformKey(a);var d=this._idx(a);-1===d&&(d=this._lastIndex=this._keys.length),this._keys[d]=a,this._values[d]=b},delete:function(a){return a=this._transformKey(a),-1!==(a=this._idx(a))&&(this._keys.splice(a,1),this._values.splice(a,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var Ib=pd,og=[function(){this.$get=[function(){return Ib}]}],Bg=/^([^(]+?)=>/,Cg=/^[^(]*\(\s*([^)]*)\)/m,sh=/,/,th=/^\s*(_?)(\S+?)\1\s*$/,Ag=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ca=F("$injector");fb.$$annotate=function(a,b,d){var c;if("function"==typeof a){if(!(c=a.$inject)){if(c=[],a.length){if(b)throw C(d)&&d||(d=a.name||Dg(a)),Ca("strictdi",d);b=qd(a),r(b[1].split(sh),function(a){a.replace(th,function(a,b,d){c.push(d)})})}a.$inject=c}}else H(a)?(b=a.length-1,tb(a[b],"fn"),c=a.slice(0,b)):tb(a,"fn",!0);return c};var ne=F("$animate"),Ef=function(){this.$get=E},Ff=function(){var a=new Ib,b=[];this.$get=["$$AnimateRunner","$rootScope",function(d,c){function e(a,b,c){var d=!1;return b&&(b=C(b)?b.split(" "):H(b)?b:[],r(b,function(b){b&&(d=!0,a[b]=c)})),d}function f(){r(b,function(b){var c=a.get(b);if(c){var d=Eg(b.attr("class")),e="",f="";r(c,function(a,b){a!==!!d[b]&&(a?e+=(e.length?" ":"")+b:f+=(f.length?" ":"")+b)}),r(b,function(a){e&&Eb(a,e),f&&Db(a,f)}),a.delete(b)}}),b.length=0}return{enabled:E,on:E,off:E,pin:E,push:function(g,k,h,l){return l&&l(),h=h||{},h.from&&g.css(h.from),h.to&&g.css(h.to),(h.addClass||h.removeClass)&&(k=h.addClass,l=h.removeClass,h=a.get(g)||{},k=e(h,k,!0),l=e(h,l,!1),(k||l)&&(a.set(g,h),b.push(g),1===b.length&&c.$$postDigest(f))),g=new d,g.complete(),g}}}]},Cf=["$provide",function(a){var b=this,d=null,c=null;this.$$registeredAnimations=Object.create(null),this.register=function(c,d){if(c&&"."!==c.charAt(0))throw ne("notcsel",c);var g=c+"-animation";b.$$registeredAnimations[c.substr(1)]=g,a.factory(g,d)},this.customFilter=function(a){return 1===arguments.length&&(c=B(a)?a:null),c},this.classNameFilter=function(a){if(1===arguments.length&&(d=a instanceof RegExp?a:null)&&/[(\s|\/)]ng-animate[(\s|\/)]/.test(d.toString()))throw d=null,ne("nongcls","ng-animate");return d},this.$get=["$$animateQueue",function(a){function b(a,c,d){if(d){var e;a:{for(e=0;e<d.length;e++){var f=d[e];if(1===f.nodeType){e=f;break a}}e=void 0}!e||e.parentNode||e.previousElementSibling||(d=null)}d?d.after(a):c.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.cancel&&a.cancel()},enter:function(c,d,h,l){return d=d&&x(d),h=h&&x(h),d=d||h.parent(),b(c,d,h),a.push(c,"enter",ra(l))},move:function(c,d,h,l){return d=d&&x(d),h=h&&x(h),d=d||h.parent(),b(c,d,h),a.push(c,"move",ra(l))},leave:function(b,c){return a.push(b,"leave",ra(c),function(){b.remove()})},addClass:function(b,c,d){return d=ra(d),d.addClass=ib(d.addclass,c),a.push(b,"addClass",d)},removeClass:function(b,c,d){return d=ra(d),d.removeClass=ib(d.removeClass,c),a.push(b,"removeClass",d)},setClass:function(b,c,d,f){return f=ra(f),f.addClass=ib(f.addClass,c),f.removeClass=ib(f.removeClass,d),a.push(b,"setClass",f)},animate:function(b,c,d,f,m){return m=ra(m),m.from=m.from?S(m.from,c):c,m.to=m.to?S(m.to,d):d,m.tempClasses=ib(m.tempClasses,f||"ng-inline-animate"),a.push(b,"animate",m)}}}]}],Hf=function(){this.$get=["$$rAF",function(a){function b(b){d.push(b),1<d.length||a(function(){for(var a=0;a<d.length;a++)d[a]();d=[]})}var d=[];return function(){var a=!1;return b(function(){a=!0}),function(d){a?d():b(d)}}}]},Gf=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(a,b,d,c,e){function f(a){this.setHost(a);var b=d();this._doneCallbacks=[],this._tick=function(a){c()?e(a,0,!1):b(a)},this._state=0}return f.chain=function(a,b){function c(){d===a.length?b(!0):a[d](function(a){!1===a?b(!1):(d++,c())})}var d=0;c()},f.all=function(a,b){function c(f){e=e&&f,++d===a.length&&b(e)}var d=0,e=!0;r(a,function(a){a.done(c)})},f.prototype={setHost:function(a){this.host=a||{}},done:function(a){2===this._state?a():this._doneCallbacks.push(a)},progress:E,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){!1===b?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},catch:function(a){return this.getPromise().catch(a)},finally:function(a){return this.getPromise().finally(a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(a){var b=this;0===b._state&&(b._state=1,b._tick(function(){b._resolve(a)}))},_resolve:function(a){2!==this._state&&(r(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=2)}},f}]},Df=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(a,b,d){return function(b,e){function f(){return a(function(){g.addClass&&(b.addClass(g.addClass),g.addClass=null),g.removeClass&&(b.removeClass(g.removeClass),g.removeClass=null),g.to&&(b.css(g.to),g.to=null),k||h.complete(),k=!0}),h}var g=e||{};g.$$prepared||(g=Ia(g)),g.cleanupStyles&&(g.from=g.to=null),g.from&&(b.css(g.from),g.from=null);var k,h=new d;return{start:f,end:f}}}]},$=F("$compile"),uc=new function(){};Zc.$inject=["$provide","$$sanitizeUriProvider"],Kb.prototype.isFirstChange=function(){return this.previousValue===uc};var rd=/^((?:x|data)[:\-_])/i,Jg=/[:\-_]+(.)/g,xd=F("$controller"),wd=/^(\S+)(\s+as\s+([\w$]+))?$/,Of=function(){this.$get=["$document",function(a){return function(b){return b?!b.nodeType&&b instanceof x&&(b=b[0]):b=a[0].body,b.offsetWidth+1}}]},yd="application/json",xc={"Content-Type":yd+";charset=utf-8"},Mg=/^\[|^\{(?!\{)/,Ng={"[":/]$/,"{":/}$/},Lg=/^\)]\}',?\n/,Lb=F("$http"),Ma=ca.$interpolateMinErr=F("$interpolate");Ma.throwNoconcat=function(a){throw Ma("noconcat",a)},Ma.interr=function(a,b){return Ma("interr",a,b.toString())};var Qg=F("$interval"),Xf=function(){this.$get=function(){function a(a){var b=function b(a){b.data=a,b.called=!0};return b.id=a,b}var b=ca.callbacks,d={};return{createCallback:function(c){c="_"+(b.$$counter++).toString(36);var e="angular.callbacks."+c,f=a(c);return d[e]=b[c]=f,e},wasCalled:function(a){return d[a].called},getResponse:function(a){return d[a].data},removeCallback:function(a){delete b[d[a].id],delete d[a]}}}},uh=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Rg={http:80,https:443,ftp:21},kb=F("$location"),Sg=/^\s*[\\/]{2,}/,vh={$$absUrl:"",$$html5:!1,$$replace:!1,$$compose:function(){for(var a=this.$$path,b=this.$$hash,d=Ce(this.$$search),b=b?"#"+ic(b):"",a=a.split("/"),c=a.length;c--;)a[c]=ic(a[c].replace(/%2F/g,"/"));this.$$url=a.join("/")+(d?"?"+d:"")+b,this.$$absUrl=this.$$normalizeUrl(this.$$url),this.$$urlUpdatedByLocation=!0},absUrl:Mb("$$absUrl"),url:function(a){if(A(a))return this.$$url;var b=uh.exec(a);return(b[1]||""===a)&&this.path(decodeURIComponent(b[1])),(b[2]||b[1]||""===a)&&this.search(b[3]||""),this.hash(b[5]||""),this},protocol:Mb("$$protocol"),host:Mb("$$host"),port:Mb("$$port"),path:Fd("$$path",function(a){return a=null!==a?a.toString():"","/"===a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(C(a)||X(a))a=a.toString(),this.$$search=hc(a);else{if(!D(a))throw kb("isrcharg");a=Ia(a,{}),r(a,function(b,c){null==b&&delete a[c]}),this.$$search=a}break;default:A(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:Fd("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};r([Ed,Ac,zc],function(a){a.prototype=Object.create(vh),a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==zc||!this.$$html5)throw kb("nostate");return this.$$state=A(b)?null:b,this.$$urlUpdatedByLocation=!0,this}});var Ya=F("$parse"),Wg={}.constructor.prototype.valueOf,Vb=T();r("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){Vb[a]=!0});var wh={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Ob=function(a){this.options=a};Ob.prototype={constructor:Ob,lex:function(a){for(this.text=a,this.index=0,this.tokens=[];this.index<this.text.length;)if('"'===(a=this.text.charAt(this.index))||"'"===a)this.readString(a);else if(this.isNumber(a)||"."===a&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(a,"(){}[].,;:?"))this.tokens.push({index:this.index,text:a}),this.index++;else if(this.isWhitespace(a))this.index++;else{var b=a+this.peek(),d=b+this.peek(2),c=Vb[b],e=Vb[d];Vb[a]||c||e?(a=e?d:c?b:a,this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){return a=a||1,this.index+a<this.text.length&&this.text.charAt(this.index+a)},isNumber:function(a){return"0"<=a&&"9">=a&&"string"==typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||" "===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?this.options.isIdentifierStart(a,this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,b)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):(a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var d=a.charCodeAt(0),c=b.charCodeAt(0);return 55296<=d&&56319>=d&&56320<=c&&57343>=c?a+b:a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,d){throw d=d||this.index,b=w(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,d)+"]":" "+d,Ya("lexerr",a,b,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var d=K(this.text.charAt(this.index));if("."===d||this.isNumber(d))a+=d;else{var c=this.peek();if("e"===d&&this.isExpOperator(c))a+=d;else if(this.isExpOperator(d)&&c&&this.isNumber(c)&&"e"===a.charAt(a.length-1))a+=d;else{if(!this.isExpOperator(d)||c&&this.isNumber(c)||"e"!==a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){var a=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var b=this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var d="",c=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index),c=c+f;if(e)"u"===f?(e=this.text.substring(this.index+1,this.index+5),e.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+e+"]"),this.index+=4,d+=String.fromCharCode(parseInt(e,16))):d+=wh[f]||f,e=!1;else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:c,constant:!0,value:d});d+=f}this.index++}this.throwError("Unterminated quote",b)}};var q=function(a,b){this.lexer=a,this.options=b};q.Program="Program",q.ExpressionStatement="ExpressionStatement",q.AssignmentExpression="AssignmentExpression",q.ConditionalExpression="ConditionalExpression",q.LogicalExpression="LogicalExpression",q.BinaryExpression="BinaryExpression",q.UnaryExpression="UnaryExpression",q.CallExpression="CallExpression",q.MemberExpression="MemberExpression",q.Identifier="Identifier",q.Literal="Literal",q.ArrayExpression="ArrayExpression",q.Property="Property",q.ObjectExpression="ObjectExpression",q.ThisExpression="ThisExpression",q.LocalsExpression="LocalsExpression",q.NGValueParameter="NGValueParameter",q.prototype={ast:function(a){return this.text=a,this.tokens=this.lexer.lex(a),a=this.program(),0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),a},program:function(){for(var a=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:q.Program,body:a}},expressionStatement:function(){return{type:q.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a=this.expression();this.expect("|");)a=this.filter(a);return a},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();if(this.expect("=")){if(!Jd(a))throw Ya("lval");a={type:q.AssignmentExpression,left:a,right:this.assignment(),operator:"="}}return a},ternary:function(){var b,d,a=this.logicalOR();return this.expect("?")&&(b=this.expression(),this.consume(":"))?(d=this.expression(),{type:q.ConditionalExpression,test:a,alternate:b,consequent:d}):a},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:q.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:q.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var b,a=this.relational();b=this.expect("==","!=","===","!==");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.relational()};return a},relational:function(){for(var b,a=this.additive();b=this.expect("<",">","<=",">=");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.additive()};return a},additive:function(){for(var b,a=this.multiplicative();b=this.expect("+","-");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.multiplicative()};return a},multiplicative:function(){for(var b,a=this.unary();b=this.expect("*","/","%");)a={type:q.BinaryExpression,operator:b.text,left:a,right:this.unary()};return a},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:q.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?a=Ia(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:q.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:q.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===b.text?(a={type:q.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:q.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){a=[a];for(var b={type:q.CallExpression,callee:this.identifier(),arguments:a,filter:!0};this.expect(":");)a.push(this.expression());return b},parseArguments:function(){var a=[];if(")"!==this.peekToken().text)do{a.push(this.filterChain())}while(this.expect(","));return a},identifier:function(){var a=this.consume();return a.identifier||this.throwError("is not a valid identifier",a),{type:q.Identifier,name:a.text}},constant:function(){return{type:q.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:q.ArrayExpression,elements:a}},object:function(){var b,a=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;b={type:q.Property,kind:"init"},this.peek().constant?(b.key=this.constant(),b.computed=!1,this.consume(":"),b.value=this.expression()):this.peek().identifier?(b.key=this.identifier(),b.computed=!1,this.peek(":")?(this.consume(":"),b.value=this.expression()):b.value=b.key):this.peek("[")?(this.consume("["),b.key=this.expression(),this.consume("]"),b.computed=!0,this.consume(":"),b.value=this.expression()):this.throwError("invalid key",this.peek()),a.push(b)}while(this.expect(","));return this.consume("}"),{type:q.ObjectExpression,properties:a}},throwError:function(a,b){throw Ya("syntax",b.text,a,b.index+1,this.text,this.text.substring(b.index))},consume:function(a){if(0===this.tokens.length)throw Ya("ueoe",this.text);var b=this.expect(a);return b||this.throwError("is unexpected, expecting ["+a+"]",this.peek()),b},peekToken:function(){if(0===this.tokens.length)throw Ya("ueoe",this.text);return this.tokens[0]},peek:function(a,b,d,c){return this.peekAhead(0,a,b,d,c)},peekAhead:function(a,b,d,c,e){if(this.tokens.length>a){a=this.tokens[a];var f=a.text;if(f===b||f===d||f===c||f===e||!(b||d||c||e))return a}return!1},expect:function(a,b,d,c){return!!(a=this.peek(a,b,d,c))&&(this.tokens.shift(),a)},selfReferential:{this:{type:q.ThisExpression},$locals:{type:q.LocalsExpression}}};var Hd=2;Ld.prototype={compile:function(a){var b=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Z(a,b.$filter);var c,d="";return this.stage="assign",(c=Kd(a))&&(this.state.computing="assign",d=this.nextId(),this.recurse(c,d),this.return_(d),d="fn.assign="+this.generateFunction("assign","s,v,l")),c=Id(a.body),b.stage="inputs",r(c,function(a,c){var d="fn"+c;b.state[d]={vars:[],body:[],own:{}},b.state.computing=d;var k=b.nextId();b.recurse(a,k),b.return_(k),b.state.inputs.push({name:d,isPure:a.isPure}),a.watchId=c}),this.state.computing="fn",this.stage="main",this.recurse(a),a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+d+this.watchFns()+"return fn;",a=new Function("$filter","getStringValue","ifDefined","plus",a)(this.$filter,Tg,Ug,Gd),this.state=this.stage=void 0,a},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,d=this;return r(b,function(b){a.push("var "+b.name+"="+d.generateFunction(b.name,"s")),b.isPure&&a.push(b.name,".isPure="+JSON.stringify(b.isPure)+";")}),b.length&&a.push("fn.inputs=["+b.map(function(a){return a.name}).join(",")+"];"),a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;return r(this.state.filters,function(d,c){a.push(d+"=$filter("+b.escape(c)+")")}),a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,d,c,e,f){var g,k,l,m,p,h=this;if(c=c||E,!f&&w(a.watchId))b=b||this.nextId(),this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,d,c,e,!0));else switch(a.type){case q.Program:r(a.body,function(b,c){h.recurse(b.expression,void 0,void 0,function(a){k=a}),c!==a.body.length-1?h.current().body.push(k,";"):h.return_(k)});break;case q.Literal:m=this.escape(a.value),this.assign(b,m),c(b||m);break;case q.UnaryExpression:this.recurse(a.argument,void 0,void 0,function(a){k=a}),m=a.operator+"("+this.ifDefined(k,0)+")",this.assign(b,m),c(m);break;case q.BinaryExpression:this.recurse(a.left,void 0,void 0,function(a){g=a}),this.recurse(a.right,void 0,void 0,function(a){k=a}),m="+"===a.operator?this.plus(g,k):"-"===a.operator?this.ifDefined(g,0)+a.operator+this.ifDefined(k,0):"("+g+")"+a.operator+"("+k+")",this.assign(b,m),c(m);break;case q.LogicalExpression:b=b||this.nextId(),h.recurse(a.left,b),h.if_("&&"===a.operator?b:h.not(b),h.lazyRecurse(a.right,b)),c(b);break;case q.ConditionalExpression:b=b||this.nextId(),h.recurse(a.test,b),h.if_(b,h.lazyRecurse(a.alternate,b),h.lazyRecurse(a.consequent,b)),c(b);break;case q.Identifier:b=b||this.nextId(),d&&(d.context="inputs"===h.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),d.computed=!1,d.name=a.name),h.if_("inputs"===h.stage||h.not(h.getHasOwnProperty("l",a.name)),function(){h.if_("inputs"===h.stage||"s",function(){e&&1!==e&&h.if_(h.isNull(h.nonComputedMember("s",a.name)),h.lazyAssign(h.nonComputedMember("s",a.name),"{}")),h.assign(b,h.nonComputedMember("s",a.name))})},b&&h.lazyAssign(b,h.nonComputedMember("l",a.name))),c(b);break;case q.MemberExpression:g=d&&(d.context=this.nextId())||this.nextId(),b=b||this.nextId(),h.recurse(a.object,g,void 0,function(){h.if_(h.notNull(g),function(){a.computed?(k=h.nextId(),h.recurse(a.property,k),h.getStringValue(k),e&&1!==e&&h.if_(h.not(h.computedMember(g,k)),h.lazyAssign(h.computedMember(g,k),"{}")),m=h.computedMember(g,k),h.assign(b,m),d&&(d.computed=!0,d.name=k)):(e&&1!==e&&h.if_(h.isNull(h.nonComputedMember(g,a.property.name)),h.lazyAssign(h.nonComputedMember(g,a.property.name),"{}")),m=h.nonComputedMember(g,a.property.name),h.assign(b,m),d&&(d.computed=!1,d.name=a.property.name))},function(){h.assign(b,"undefined")}),c(b)},!!e);break;case q.CallExpression:b=b||this.nextId(),a.filter?(k=h.filter(a.callee.name),l=[],r(a.arguments,function(a){var b=h.nextId();h.recurse(a,b),l.push(b)}),m=k+"("+l.join(",")+")",h.assign(b,m),c(b)):(k=h.nextId(),g={},l=[],h.recurse(a.callee,k,g,function(){h.if_(h.notNull(k),function(){r(a.arguments,function(b){h.recurse(b,a.constant?void 0:h.nextId(),void 0,function(a){l.push(a)})}),m=g.name?h.member(g.context,g.name,g.computed)+"("+l.join(",")+")":k+"("+l.join(",")+")",h.assign(b,m)},function(){h.assign(b,"undefined")}),c(b)}));break;case q.AssignmentExpression:k=this.nextId(),g={},this.recurse(a.left,void 0,g,function(){h.if_(h.notNull(g.context),function(){h.recurse(a.right,k),m=h.member(g.context,g.name,g.computed)+a.operator+k,h.assign(b,m),c(b||m)})},1);break;case q.ArrayExpression:l=[],r(a.elements,function(b){h.recurse(b,a.constant?void 0:h.nextId(),void 0,function(a){
l.push(a)})}),m="["+l.join(",")+"]",this.assign(b,m),c(b||m);break;case q.ObjectExpression:l=[],p=!1,r(a.properties,function(a){a.computed&&(p=!0)}),p?(b=b||this.nextId(),this.assign(b,"{}"),r(a.properties,function(a){a.computed?(g=h.nextId(),h.recurse(a.key,g)):g=a.key.type===q.Identifier?a.key.name:""+a.key.value,k=h.nextId(),h.recurse(a.value,k),h.assign(h.member(b,g,a.computed),k)})):(r(a.properties,function(b){h.recurse(b.value,a.constant?void 0:h.nextId(),void 0,function(a){l.push(h.escape(b.key.type===q.Identifier?b.key.name:""+b.key.value)+":"+a)})}),m="{"+l.join(",")+"}",this.assign(b,m)),c(b||m);break;case q.ThisExpression:this.assign(b,"s"),c(b||"s");break;case q.LocalsExpression:this.assign(b,"l"),c(b||"l");break;case q.NGValueParameter:this.assign(b,"v"),c(b||"v")}},getHasOwnProperty:function(a,b){var d=a+"."+b,c=this.current().own;return c.hasOwnProperty(d)||(c[d]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")")),c[d]},assign:function(a,b){if(a)return this.current().body.push(a,"=",b,";"),a},filter:function(a){return this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0)),this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,d){if(!0===a)b();else{var c=this.current().body;c.push("if(",a,"){"),b(),c.push("}"),d&&(c.push("else{"),d(),c.push("}"))}},not:function(a){return"!("+a+")"},isNull:function(a){return a+"==null"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){var d=/[^$_a-zA-Z0-9]/g;return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(b)?a+"."+b:a+'["'+b.replace(d,this.stringEscapeFn)+'"]'},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,d){return d?this.computedMember(a,b):this.nonComputedMember(a,b)},getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},lazyRecurse:function(a,b,d,c,e,f){var g=this;return function(){g.recurse(a,b,d,c,e,f)}},lazyAssign:function(a,b){var d=this;return function(){d.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(C(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(X(a))return a.toString();if(!0===a)return"true";if(!1===a)return"false";if(null===a)return"null";if(void 0===a)return"undefined";throw Ya("esc")},nextId:function(a,b){var d="v"+this.state.nextId++;return a||this.current().vars.push(d+(b?"="+b:"")),d},current:function(){return this.state[this.state.computing]}},Md.prototype={compile:function(a){var b=this;Z(a,b.$filter);var d,c;(d=Kd(a))&&(c=this.recurse(d)),d=Id(a.body);var e;d&&(e=[],r(d,function(a,c){var d=b.recurse(a);d.isPure=a.isPure,a.input=d,e.push(d),a.watchId=c}));var f=[];return r(a.body,function(a){f.push(b.recurse(a.expression))}),a=0===a.body.length?E:1===a.body.length?f[0]:function(a,b){var c;return r(f,function(d){c=d(a,b)}),c},c&&(a.assign=function(a,b,d){return c(a,d,b)}),e&&(a.inputs=e),a},recurse:function(a,b,d){var c,e,g,f=this;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case q.Literal:return this.value(a.value,b);case q.UnaryExpression:return e=this.recurse(a.argument),this["unary"+a.operator](e,b);case q.BinaryExpression:case q.LogicalExpression:return c=this.recurse(a.left),e=this.recurse(a.right),this["binary"+a.operator](c,e,b);case q.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case q.Identifier:return f.identifier(a.name,b,d);case q.MemberExpression:return c=this.recurse(a.object,!1,!!d),a.computed||(e=a.property.name),a.computed&&(e=this.recurse(a.property)),a.computed?this.computedMember(c,e,b,d):this.nonComputedMember(c,e,b,d);case q.CallExpression:return g=[],r(a.arguments,function(a){g.push(f.recurse(a))}),a.filter&&(e=this.$filter(a.callee.name)),a.filter||(e=this.recurse(a.callee,!0)),a.filter?function(a,c,d,f){for(var p=[],n=0;n<g.length;++n)p.push(g[n](a,c,d,f));return a=e.apply(void 0,p,f),b?{context:void 0,name:void 0,value:a}:a}:function(a,c,d,f){var n,p=e(a,c,d,f);if(null!=p.value){n=[];for(var s=0;s<g.length;++s)n.push(g[s](a,c,d,f));n=p.value.apply(p.context,n)}return b?{value:n}:n};case q.AssignmentExpression:return c=this.recurse(a.left,!0,1),e=this.recurse(a.right),function(a,d,f,g){var p=c(a,d,f,g);return a=e(a,d,f,g),p.context[p.name]=a,b?{value:a}:a};case q.ArrayExpression:return g=[],r(a.elements,function(a){g.push(f.recurse(a))}),function(a,c,d,e){for(var f=[],n=0;n<g.length;++n)f.push(g[n](a,c,d,e));return b?{value:f}:f};case q.ObjectExpression:return g=[],r(a.properties,function(a){a.computed?g.push({key:f.recurse(a.key),computed:!0,value:f.recurse(a.value)}):g.push({key:a.key.type===q.Identifier?a.key.name:""+a.key.value,computed:!1,value:f.recurse(a.value)})}),function(a,c,d,e){for(var f={},n=0;n<g.length;++n)g[n].computed?f[g[n].key(a,c,d,e)]=g[n].value(a,c,d,e):f[g[n].key]=g[n].value(a,c,d,e);return b?{value:f}:f};case q.ThisExpression:return function(a){return b?{value:a}:a};case q.LocalsExpression:return function(a,c){return b?{value:c}:c};case q.NGValueParameter:return function(a,c,d){return b?{value:d}:d}}},"unary+":function(a,b){return function(d,c,e,f){return d=a(d,c,e,f),d=w(d)?+d:0,b?{value:d}:d}},"unary-":function(a,b){return function(d,c,e,f){return d=a(d,c,e,f),d=w(d)?-d:-0,b?{value:d}:d}},"unary!":function(a,b){return function(d,c,e,f){return d=!a(d,c,e,f),b?{value:d}:d}},"binary+":function(a,b,d){return function(c,e,f,g){var k=a(c,e,f,g);return c=b(c,e,f,g),k=Gd(k,c),d?{value:k}:k}},"binary-":function(a,b,d){return function(c,e,f,g){var k=a(c,e,f,g);return c=b(c,e,f,g),k=(w(k)?k:0)-(w(c)?c:0),d?{value:k}:k}},"binary*":function(a,b,d){return function(c,e,f,g){return c=a(c,e,f,g)*b(c,e,f,g),d?{value:c}:c}},"binary/":function(a,b,d){return function(c,e,f,g){return c=a(c,e,f,g)/b(c,e,f,g),d?{value:c}:c}},"binary%":function(a,b,d){return function(c,e,f,g){return c=a(c,e,f,g)%b(c,e,f,g),d?{value:c}:c}},"binary===":function(a,b,d){return function(c,e,f,g){return c=a(c,e,f,g)===b(c,e,f,g),d?{value:c}:c}},"binary!==":function(a,b,d){return function(c,e,f,g){return c=a(c,e,f,g)!==b(c,e,f,g),d?{value:c}:c}},"binary==":function(a,b,d){return function(c,e,f,g){return c=a(c,e,f,g)==b(c,e,f,g),d?{value:c}:c}},"binary!=":function(a,b,d){return function(c,e,f,g){return c=a(c,e,f,g)!=b(c,e,f,g),d?{value:c}:c}},"binary<":function(a,b,d){return function(c,e,f,g){return c=a(c,e,f,g)<b(c,e,f,g),d?{value:c}:c}},"binary>":function(a,b,d){return function(c,e,f,g){return c=a(c,e,f,g)>b(c,e,f,g),d?{value:c}:c}},"binary<=":function(a,b,d){return function(c,e,f,g){return c=a(c,e,f,g)<=b(c,e,f,g),d?{value:c}:c}},"binary>=":function(a,b,d){return function(c,e,f,g){return c=a(c,e,f,g)>=b(c,e,f,g),d?{value:c}:c}},"binary&&":function(a,b,d){return function(c,e,f,g){return c=a(c,e,f,g)&&b(c,e,f,g),d?{value:c}:c}},"binary||":function(a,b,d){return function(c,e,f,g){return c=a(c,e,f,g)||b(c,e,f,g),d?{value:c}:c}},"ternary?:":function(a,b,d,c){return function(e,f,g,k){return e=a(e,f,g,k)?b(e,f,g,k):d(e,f,g,k),c?{value:e}:e}},value:function(a,b){return function(){return b?{context:void 0,name:void 0,value:a}:a}},identifier:function(a,b,d){return function(c,e,f,g){return c=e&&a in e?e:c,d&&1!==d&&c&&null==c[a]&&(c[a]={}),e=c?c[a]:void 0,b?{context:c,name:a,value:e}:e}},computedMember:function(a,b,d,c){return function(e,f,g,k){var l,m,h=a(e,f,g,k);return null!=h&&(l=b(e,f,g,k),l+="",c&&1!==c&&h&&!h[l]&&(h[l]={}),m=h[l]),d?{context:h,name:l,value:m}:m}},nonComputedMember:function(a,b,d,c){return function(e,f,g,k){return e=a(e,f,g,k),c&&1!==c&&e&&null==e[b]&&(e[b]={}),f=null!=e?e[b]:void 0,d?{context:e,name:b,value:f}:f}},inputs:function(a,b){return function(d,c,e,f){return f?f[b]:a(d,c,e)}}},Nb.prototype={constructor:Nb,parse:function(a){a=this.getAst(a);var b=this.astCompiler.compile(a.ast),d=a.ast;return b.literal=0===d.body.length||1===d.body.length&&(d.body[0].expression.type===q.Literal||d.body[0].expression.type===q.ArrayExpression||d.body[0].expression.type===q.ObjectExpression),b.constant=a.ast.constant,b.oneTime=a.oneTime,b},getAst:function(a){var b=!1;return a=a.trim(),":"===a.charAt(0)&&":"===a.charAt(1)&&(b=!0,a=a.substring(2)),{ast:this.ast.ast(a),oneTime:b}}};var Na,Ea=F("$sce"),W={HTML:"html",CSS:"css",MEDIA_URL:"mediaUrl",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Dc=/_([a-z])/g,Zg=F("$templateRequest"),$g=F("$timeout"),aa=z.document.createElement("a"),Qd=ga(z.location.href);aa.href="http://[::1]";var ah="[::1]"===aa.hostname;Rd.$inject=["$document"],fd.$inject=["$provide"];var Yd=22,Xd=".",Fc="0";Sd.$inject=["$locale"],Ud.$inject=["$locale"];var lh={yyyy:ea("FullYear",4,0,!1,!0),yy:ea("FullYear",2,0,!0,!0),y:ea("FullYear",1,0,!1,!0),MMMM:lb("Month"),MMM:lb("Month",!0),MM:ea("Month",2,1),M:ea("Month",1,1),LLLL:lb("Month",!1,!0),dd:ea("Date",2),d:ea("Date",1),HH:ea("Hours",2),H:ea("Hours",1),hh:ea("Hours",2,-12),h:ea("Hours",1,-12),mm:ea("Minutes",2),m:ea("Minutes",1),ss:ea("Seconds",2),s:ea("Seconds",1),sss:ea("Milliseconds",3),EEEE:lb("Day"),EEE:lb("Day",!0),a:function(_a,b){return 12>_a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a,b,d){return a=-1*d,a=(0<=a?"+":"")+(Pb(Math[0<a?"floor":"ceil"](a/60),2)+Pb(Math.abs(a%60),2))},ww:$d(2),w:$d(1),G:Gc,GG:Gc,GGG:Gc,GGGG:function(a,b){return 0>=a.getFullYear()?b.ERANAMES[0]:b.ERANAMES[1]}},kh=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,jh=/^-?\d+$/;Td.$inject=["$locale"];var eh=ia(K),fh=ia(vb);Vd.$inject=["$parse"];var Re=ia({restrict:"E",compile:function(a,b){if(!b.href&&!b.xlinkHref)return function(a,b){if("a"===b[0].nodeName.toLowerCase()){var e="[object SVGAnimatedString]"===la.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(e)||a.preventDefault()})}}}}),wb={};r(Hb,function(a,b){function d(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}if("multiple"!==a){var c=xa("ng-"+b),e=d;"checked"===a&&(e=function(a,b,_e){_e.ngModel!==_e[c]&&d(a,b,_e)}),wb[c]=function(){return{restrict:"A",priority:100,link:e}}}}),r(vd,function(a,b){wb[b]=function(){return{priority:100,link:function(a,c,e){if("ngPattern"===b&&"/"===e.ngPattern.charAt(0)&&(c=e.ngPattern.match(ke)))return void e.$set("ngPattern",new RegExp(c[1],c[2]));a.$watch(e[b],function(a){e.$set(b,a)})}}}}),r(["src","srcset","href"],function(a){var b=xa("ng-"+a);wb[b]=["$sce",function(d){return{priority:99,link:function(c,e,f){var g=a,k=a;"href"===a&&"[object SVGAnimatedString]"===la.call(e.prop("href"))&&(k="xlinkHref",f.$attr[k]="xlink:href",g=null),f.$set(b,d.getTrustedMediaUrl(f[b])),f.$observe(b,function(b){b?(f.$set(k,b),wa&&g&&e.prop(g,f[k])):"href"===a&&f.$set(k,null)})}}}]});var mb={$addControl:E,$getControls:ia([]),$$renameControl:function(a,b){a.$name=b},$removeControl:E,$setValidity:E,$setDirty:E,$setPristine:E,$setSubmitted:E,$$setSubmitted:E};Qb.$inject=["$element","$attrs","$scope","$animate","$interpolate"],Qb.prototype={$rollbackViewValue:function(){r(this.$$controls,function(a){a.$rollbackViewValue()})},$commitViewValue:function(){r(this.$$controls,function(a){a.$commitViewValue()})},$addControl:function(a){Ja(a.$name,"input"),this.$$controls.push(a),a.$name&&(this[a.$name]=a),a.$$parentForm=this},$getControls:function(){return ja(this.$$controls)},$$renameControl:function(a,b){var d=a.$name;this[d]===a&&delete this[d],this[b]=a,a.$name=b},$removeControl:function(a){a.$name&&this[a.$name]===a&&delete this[a.$name],r(this.$pending,function(b,d){this.$setValidity(d,null,a)},this),r(this.$error,function(b,d){this.$setValidity(d,null,a)},this),r(this.$$success,function(b,d){this.$setValidity(d,null,a)},this),cb(this.$$controls,a),a.$$parentForm=mb},$setDirty:function(){this.$$animate.removeClass(this.$$element,Za),this.$$animate.addClass(this.$$element,Wb),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Za,Wb+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,r(this.$$controls,function(a){a.$setPristine()})},$setUntouched:function(){r(this.$$controls,function(a){a.$setUntouched()})},$setSubmitted:function(){for(var a=this;a.$$parentForm&&a.$$parentForm!==mb;)a=a.$$parentForm;a.$$setSubmitted()},$$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,r(this.$$controls,function(a){a.$$setSubmitted&&a.$$setSubmitted()})}},ce({clazz:Qb,set:function(a,b,d){var c=a[b];c?-1===c.indexOf(d)&&c.push(d):a[b]=[d]},unset:function(a,b,d){var c=a[b];c&&(cb(c,d),0===c.length&&delete a[b])}});var oe=function(a){return["$timeout","$parse",function(b,d){function c(a){return""===a?d('this[""]').assign:d(a).assign||E}return{name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:Qb,compile:function(d,f){d.addClass(Za).addClass(nb);var g=f.name?"name":!(!a||!f.ngForm)&&"ngForm";return{pre:function(a,d,e,f){var p=f[0];if(!("action"in e)){var n=function(b){a.$apply(function(){p.$commitViewValue(),p.$setSubmitted()}),b.preventDefault()};d[0].addEventListener("submit",n),d.on("$destroy",function(){b(function(){d[0].removeEventListener("submit",n)},0,!1)})}(f[1]||p.$$parentForm).$addControl(p);var s=g?c(p.$name):E;g&&(s(a,p),e.$observe(g,function(b){p.$name!==b&&(s(a,void 0),p.$$parentForm.$$renameControl(p,b),(s=c(p.$name))(a,p))})),d.on("$destroy",function(){p.$$parentForm.$removeControl(p),s(a,void 0),S(p,mb)})}}}}}]},Se=oe(),df=oe(!0),mh=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,xh=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,yh=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,nh=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,pe=/^(\d{4,})-(\d{2})-(\d{2})$/,qe=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Oc=/^(\d{4,})-W(\d\d)$/,re=/^(\d{4,})-(\d\d)$/,se=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ee=T();r(["date","datetime-local","month","time","week"],function(a){ee[a]=!0});var te={text:function(a,b,d,c,e,f){Sa(a,b,d,c,e,f),Ic(c)},date:ob("date",pe,Rb(pe,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":ob("datetimelocal",qe,Rb(qe,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:ob("time",se,Rb(se,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:ob("week",Oc,function(a,b){if(ha(a))return a;if(C(a)){Oc.lastIndex=0;var d=Oc.exec(a);if(d){var c=+d[1],e=+d[2],f=d=0,g=0,k=0,h=Zd(c),e=7*(e-1);return b&&(d=b.getHours(),f=b.getMinutes(),g=b.getSeconds(),k=b.getMilliseconds()),new Date(c,0,h.getDate()+e,d,f,g,k)}}return NaN},"yyyy-Www"),month:ob("month",re,Rb(re,["yyyy","MM"]),"yyyy-MM"),number:function(a,b,d,c,e,f,g,k){Jc(a,b,d,c,"number"),fe(c),Sa(a,b,d,c,e,f);var h;if(w(d.min)||d.ngMin){var l=d.min||k(d.ngMin)(a);h=na(l),c.$validators.min=function(a,b){return c.$isEmpty(b)||A(h)||b>=h},d.$observe("min",function(a){a!==l&&(h=na(a),l=a,c.$validate())})}if(w(d.max)||d.ngMax){var m=d.max||k(d.ngMax)(a),p=na(m);c.$validators.max=function(a,b){return c.$isEmpty(b)||A(p)||b<=p},d.$observe("max",function(a){a!==m&&(p=na(a),m=a,c.$validate())})}if(w(d.step)||d.ngStep){var n=d.step||k(d.ngStep)(a),s=na(n);c.$validators.step=function(a,b){return c.$isEmpty(b)||A(s)||ge(b,h||0,s)},d.$observe("step",function(a){a!==n&&(s=na(a),n=a,c.$validate())})}},url:function(a,b,d,c,e,f){Sa(a,b,d,c,e,f),Ic(c),c.$validators.url=function(a,b){var d=a||b;return c.$isEmpty(d)||xh.test(d)}},email:function(a,b,d,c,e,f){Sa(a,b,d,c,e,f),Ic(c),c.$validators.email=function(a,b){var d=a||b;return c.$isEmpty(d)||yh.test(d)}},radio:function(a,b,d,c){var e=!d.ngTrim||"false"!==V(d.ngTrim);A(d.name)&&b.attr("name",++qb),b.on("change",function(a){var g;b[0].checked&&(g=d.value,e&&(g=V(g)),c.$setViewValue(g,a&&a.type))}),c.$render=function(){var a=d.value;e&&(a=V(a)),b[0].checked=a===c.$viewValue},d.$observe("value",c.$render)},range:function(a,b,d,c,e,f){function g(a,c){b.attr(a,d[a]);var e=d[a];d.$observe(a,function(a){a!==e&&(e=a,c(a))})}function k(a){p=na(a),Y(c.$modelValue)||(m?(a=b.val(),p>a&&(a=p,b.val(a)),c.$setViewValue(a)):c.$validate())}function h(a){n=na(a),Y(c.$modelValue)||(m?(a=b.val(),n<a&&(b.val(n),a=n<p?p:n),c.$setViewValue(a)):c.$validate())}function l(a){s=na(a),Y(c.$modelValue)||(m?c.$viewValue!==b.val()&&c.$setViewValue(b.val()):c.$validate())}Jc(a,b,d,c,"range"),fe(c),Sa(a,b,d,c,e,f);var m=c.$$hasNativeValidators&&"range"===b[0].type,p=m?0:void 0,n=m?100:void 0,s=m?1:void 0,r=b[0].validity;a=w(d.min),e=w(d.max),f=w(d.step);var q=c.$render;c.$render=m&&w(r.rangeUnderflow)&&w(r.rangeOverflow)?function(){q(),c.$setViewValue(b.val())}:q,a&&(p=na(d.min),c.$validators.min=m?function(){return!0}:function(a,b){return c.$isEmpty(b)||A(p)||b>=p},g("min",k)),e&&(n=na(d.max),c.$validators.max=m?function(){return!0}:function(a,b){return c.$isEmpty(b)||A(n)||b<=n},g("max",h)),f&&(s=na(d.step),c.$validators.step=m?function(){return!r.stepMismatch}:function(a,b){return c.$isEmpty(b)||A(s)||ge(b,p||0,s)},g("step",l))},checkbox:function(a,b,d,c,e,f,g,k){var h=he(k,a,"ngTrueValue",d.ngTrueValue,!0),l=he(k,a,"ngFalseValue",d.ngFalseValue,!1);b.on("change",function(a){c.$setViewValue(b[0].checked,a&&a.type)}),c.$render=function(){b[0].checked=c.$viewValue},c.$isEmpty=function(a){return!1===a},c.$formatters.push(function(a){return va(a,h)}),c.$parsers.push(function(a){return a?h:l})},hidden:E,button:E,submit:E,reset:E,file:E},$c=["$browser","$sniffer","$filter","$parse",function(a,b,d,c){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,k){k[0]&&(te[K(g.type)]||te.text)(e,f,g,k[0],b,a,d,c)}}}}],Af=function(){var a={configurable:!0,enumerable:!1,get:function(){return this.getAttribute("value")||""},set:function(a){this.setAttribute("value",a)}};return{restrict:"E",priority:200,compile:function(b,d){if("hidden"===K(d.type))return{pre:function(b,d,f,g){b=d[0],b.parentNode&&b.parentNode.insertBefore(b,b.nextSibling),Object.defineProperty&&Object.defineProperty(b,"value",a)}}}}},zh=/^(true|false|\d+)$/,xf=function(){function a(a,d,c){var e=w(c)?c:9===wa?"":null;a.prop("value",e),d.$set("value",c)}return{restrict:"A",priority:100,compile:function(b,d){return zh.test(d.ngValue)?function(b,d,f){b=b.$eval(f.ngValue),a(d,f,b)}:function(b,d,f){b.$watch(f.ngValue,function(b){a(d,f,b)})}}}},We=["$compile",function(a){return{restrict:"AC",compile:function(b){return a.$$addBindingClass(b),function(b,c,e){a.$$addBindingInfo(c,e.ngBind),c=c[0],b.$watch(e.ngBind,function(a){c.textContent=jc(a)})}}}}],Ye=["$interpolate","$compile",function(a,b){return{compile:function(d){return b.$$addBindingClass(d),function(c,d,f){c=a(d.attr(f.$attr.ngBindTemplate)),b.$$addBindingInfo(d,c.expressions),d=d[0],f.$observe("ngBindTemplate",function(a){d.textContent=A(a)?"":a})}}}}],Xe=["$sce","$parse","$compile",function(a,b,d){return{restrict:"A",compile:function(c,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(b){return a.valueOf(b)});return d.$$addBindingClass(c),function(b,c,e){d.$$addBindingInfo(c,e.ngBindHtml),b.$watch(g,function(){var d=f(b);c.html(a.getTrustedHtml(d)||"")})}}}}],wf=ia({restrict:"A",require:"ngModel",link:function(a,b,d,c){c.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),Ze=Lc("",!0),af=Lc("Odd",0),$e=Lc("Even",1),bf=Ra({compile:function(a,b){b.$set("ngCloak",void 0),a.removeClass("ng-cloak")}}),cf=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ed={},Ah={blur:!0,focus:!0};r("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=xa("ng-"+a);ed[b]=["$parse","$rootScope","$exceptionHandler",function(d,c,e){return sd(d,c,e,b,a,Ah[a])}]});var ff=["$animate","$compile",function(a,b){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(d,c,e,f,g){var k,h,l;d.$watch(e.ngIf,function(d){d?h||g(function(d,f){h=f,d[d.length++]=b.$$createComment("end ngIf",e.ngIf),k={clone:d},a.enter(d,c.parent(),c)}):(l&&(l.remove(),l=null),h&&(h.$destroy(),h=null),k&&(l=ub(k.clone),a.leave(l).done(function(a){!1!==a&&(l=null)}),k=null))})}}}],gf=["$templateRequest","$anchorScroll","$animate",function(a,b,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ca.noop,compile:function(c,e){var f=e.ngInclude||e.src,g=e.onload||"",k=e.autoscroll;return function(c,e,m,p,n){var q,t,x,r=0,v=function(){t&&(t.remove(),t=null),q&&(q.$destroy(),q=null),x&&(d.leave(x).done(function(a){!1!==a&&(t=null)}),t=x,x=null)};c.$watch(f,function(f){var m=function(a){!1===a||!w(k)||k&&!c.$eval(k)||b()},t=++r;f?(a(f,!0).then(function(a){if(!c.$$destroyed&&t===r){var b=c.$new();p.template=a,a=n(b,function(a){v(),d.enter(a,null,e).done(m)}),q=b,x=a,q.$emit("$includeContentLoaded",f),c.$eval(g)}},function(){c.$$destroyed||t!==r||(v(),c.$emit("$includeContentError",f))}),c.$emit("$includeContentRequested",f)):(v(),p.template=null)})}}}}],zf=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(b,d,c,e){la.call(d[0]).match(/SVG/)?(d.empty(),a(gd(e.template,z.document).childNodes)(b,function(a){d.append(a)},{futureParentElement:d})):(d.html(e.template),a(d.contents())(b))}}}],hf=Ra({priority:450,compile:function(){return{pre:function(a,b,d){a.$eval(d.ngInit)}}}}),vf=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,c){var e=d.ngList||", ",f="false"!==d.ngTrim,g=f?V(e):e;c.$parsers.push(function(a){if(!A(a)){var b=[];return a&&r(a.split(g),function(a){a&&b.push(f?V(a):a)}),b}}),c.$formatters.push(function(a){if(H(a))return a.join(e)}),c.$isEmpty=function(a){return!a||!a.length}}}},nb="ng-valid",be="ng-invalid",Za="ng-pristine",Wb="ng-dirty",pb=F("ngModel");Sb.$inject="$scope $exceptionHandler $attrs $element $parse $animate $timeout $q $interpolate".split(" "),Sb.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var a=this.$$parse(this.$$attr.ngModel+"()"),b=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(b){var c=this.$$parsedNgModel(b);return B(c)&&(c=a(b)),c},this.$$ngModelSet=function(a,c){B(this.$$parsedNgModel(a))?b(a,{$$$p:c}):this.$$parsedNgModelAssign(a,c)}}else if(!this.$$parsedNgModel.assign)throw pb("nonassign",this.$$attr.ngModel,Aa(this.$$element))},$render:E,$isEmpty:function(a){return A(a)||""===a||null===a||a!==a},$$updateEmptyClasses:function(a){this.$isEmpty(a)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Wb),this.$$animate.addClass(this.$$element,Za)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Za),this.$$animate.addClass(this.$$element,Wb),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!Y(this.$modelValue)){var a=this.$$lastCommittedViewValue,b=this.$$rawModelValue,d=this.$valid,c=this.$modelValue,e=this.$options.getOption("allowInvalid"),f=this;this.$$runValidators(b,a,function(a){e||d===a||(f.$modelValue=a?b:void 0,f.$modelValue!==c&&f.$$writeModelToScope())})}},$$runValidators:function(a,b,d){function f(a,b){k===h.$$currentValidationRunId&&h.$setValidity(a,b)}function g(a){k===h.$$currentValidationRunId&&d(a)}this.$$currentValidationRunId++;var k=this.$$currentValidationRunId,h=this;!function(){var a=h.$$parserName;return A(h.$$parserValid)?(f(a,null),!0):(h.$$parserValid||(r(h.$validators,function(a,b){f(b,null)}),r(h.$asyncValidators,function(a,b){f(b,null)})),f(a,h.$$parserValid),h.$$parserValid)}()?g(!1):function(){var c=!0;return r(h.$validators,function(d,e){var g=Boolean(d(a,b));c=c&&g,f(e,g)}),!!c||(r(h.$asyncValidators,function(a,b){f(b,null)}),!1)}()?function(){var c=[],d=!0;r(h.$asyncValidators,function(e,g){var h=e(a,b);if(!h||!B(h.then))throw pb("nopromise",h);f(g,void 0),c.push(h.then(function(){f(g,!0)},function(){d=!1,f(g,!1)}))}),c.length?h.$$q.all(c).then(function(){g(d)},E):g(!0)}():g(!1)},$commitViewValue:function(){var a=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==a||""===a&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(a),this.$$lastCommittedViewValue=a,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){var a=this.$$lastCommittedViewValue,b=this;if(this.$$parserValid=!A(a)||void 0,this.$setValidity(this.$$parserName,null),this.$$parserName="parse",this.$$parserValid)for(var d=0;d<this.$parsers.length;d++)if(a=this.$parsers[d](a),A(a)){this.$$parserValid=!1;break}Y(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var c=this.$modelValue,e=this.$options.getOption("allowInvalid");this.$$rawModelValue=a,e&&(this.$modelValue=a,b.$modelValue!==c&&b.$$writeModelToScope()),this.$$runValidators(a,this.$$lastCommittedViewValue,function(d){e||(b.$modelValue=d?a:void 0,b.$modelValue!==c&&b.$$writeModelToScope())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),r(this.$viewChangeListeners,function(a){try{a()}catch(b){this.$$exceptionHandler(b)}},this)},$setViewValue:function(a,b){this.$viewValue=a,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(b)},$$debounceViewValueCommit:function(a){var b=this.$options.getOption("debounce");X(b[a])?b=b[a]:X(b.default)&&-1===this.$options.getOption("updateOn").indexOf(a)?b=b.default:X(b["*"])&&(b=b["*"]),this.$$timeout.cancel(this.$$pendingDebounce);var d=this;0<b?this.$$pendingDebounce=this.$$timeout(function(){d.$commitViewValue()},b):this.$$rootScope.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){d.$commitViewValue()})},$overrideModelOptions:function(a){this.$options=this.$options.createChild(a),this.$$setUpdateOnEvents()},$processModelValue:function(){var a=this.$$format();this.$viewValue!==a&&(this.$$updateEmptyClasses(a),this.$viewValue=this.$$lastCommittedViewValue=a,this.$render(),this.$$runValidators(this.$modelValue,this.$viewValue,E))},$$format:function(){for(var a=this.$formatters,b=a.length,d=this.$modelValue;b--;)d=a[b](d);return d},$$setModelValue:function(a){this.$modelValue=this.$$rawModelValue=a,this.$$parserValid=void 0,this.$processModelValue()},$$setUpdateOnEvents:function(){this.$$updateEvents&&this.$$element.off(this.$$updateEvents,this.$$updateEventHandler),(this.$$updateEvents=this.$options.getOption("updateOn"))&&this.$$element.on(this.$$updateEvents,this.$$updateEventHandler)},$$updateEventHandler:function(a){this.$$debounceViewValueCommit(a&&a.type)}},ce({clazz:Sb,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]}});var Tb,uf=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Sb,priority:1,compile:function(b){return b.addClass(Za).addClass("ng-untouched").addClass(nb),{pre:function(a,b,e,f){var g=f[0];b=f[1]||g.$$parentForm,(f=f[2])&&(g.$options=f.$options),g.$$initGetterSetters(),b.$addControl(g),e.$observe("name",function(a){g.$name!==a&&g.$$parentForm.$$renameControl(g,a)}),a.$on("$destroy",function(){g.$$parentForm.$removeControl(g)})},post:function(b,c,e,f){function g(){k.$setTouched()}var k=f[0];k.$$setUpdateOnEvents(),c.on("blur",function(){k.$touched||(a.$$phase?b.$evalAsync(g):b.$apply(g))})}}}}}],Bh=/(\s+|^)default(\s+|$)/;Mc.prototype={getOption:function(a){return this.$$options[a]},createChild:function(a){var b=!1;return a=S({},a),r(a,function(d,c){"$inherit"===d?"*"===c?b=!0:(a[c]=this.$$options[c],"updateOn"===c&&(a.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===c&&(a.updateOnDefault=!1,a[c]=V(d.replace(Bh,function(){return a.updateOnDefault=!0," "})))},this),b&&(delete a["*"],ie(a,this.$$options)),ie(a,Tb.$$options),new Mc(a)}},Tb=new Mc({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var yf=function(){function a(a,d){this.$$attrs=a,this.$$scope=d}return a.$inject=["$attrs","$scope"],a.prototype={$onInit:function(){var a=this.parentCtrl?this.parentCtrl.$options:Tb,d=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=a.createChild(d)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:a}},jf=Ra({terminal:!0,priority:1e3}),Ch=F("ngOptions"),Dh=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,sf=["$compile","$document","$parse",function(a,b,d){function c(a,b,c){function e(a,b,c,d,f){this.selectValue=a,this.viewValue=b,this.label=c,this.group=d,this.disabled=f}function f(a){var b;if(!r&&za(a))b=a;else{b=[];for(var c in a)a.hasOwnProperty(c)&&"$"!==c.charAt(0)&&b.push(c)}return b}var p=a.match(Dh);if(!p)throw Ch("iexp",a,Aa(b));var n=p[5]||p[7],r=p[6];a=/ as /.test(p[0])&&p[1];var q=p[9];b=d(p[2]?p[1]:n);var t=a&&d(a)||b,w=q&&d(q),v=q?function(a,b){return w(c,b)}:function(a){return La(a)},x=function(a,b){return v(a,B(a,b))},A=d(p[2]||p[1]),y=d(p[3]||""),J=d(p[4]||""),I=d(p[8]),z={},B=r?function(a,b){return z[r]=b,z[n]=a,z}:function(a){return z[n]=a,z};return{trackBy:q,getTrackByValue:x,getWatchables:d(I,function(a){var b=[];a=a||[];for(var d=f(a),e=d.length,g=0;g<e;g++){var k=a===d?g:d[g],l=a[k],k=B(l,k),l=v(l,k);b.push(l),(p[2]||p[1])&&(l=A(c,k),b.push(l)),p[4]&&(k=J(c,k),b.push(k))}return b}),getOptions:function(){for(var a=[],b={},d=I(c)||[],g=f(d),k=g.length,n=0;n<k;n++){var p=d===g?n:g[n],r=B(d[p],p),s=t(c,r),p=v(s,r),w=A(c,r),z=y(c,r),r=J(c,r),s=new e(p,s,w,z,r);a.push(s),b[p]=s}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[x(a)]},getViewValueFromOption:function(a){return q?Ia(a.viewValue):a.viewValue}}}}}var e=z.document.createElement("option"),f=z.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,b,c,d){d[0].registerOption=E},post:function(d,k,h,l){function m(a){var b=(a=v.getOptionFromViewValue(a))&&a.element;return b&&!b.selected&&(b.selected=!0),a}function p(a,b){a.element=b,b.disabled=a.disabled,a.label!==b.label&&(b.label=a.label,b.textContent=a.label),b.value=a.selectValue}var n=l[0],q=l[1],A=h.multiple;l=0;for(var t=k.children(),z=t.length;l<z;l++)if(""===t[l].value){n.hasEmptyOption=!0,n.emptyOption=t.eq(l);break}k.empty(),l=!!n.emptyOption,x(e.cloneNode(!1)).val("?");var v,B=c(h.ngOptions,k,d),C=b[0].createDocumentFragment();n.generateUnknownOptionValue=function(a){return"?"},A?(n.writeValue=function(a){if(v){var b=a&&a.map(m)||[];v.items.forEach(function(a){a.element.selected&&-1===Array.prototype.indexOf.call(b,a)&&(a.element.selected=!1)})}},n.readValue=function(){var a=k.val()||[],b=[];return r(a,function(a){(a=v.selectValueMap[a])&&!a.disabled&&b.push(v.getViewValueFromOption(a))}),b},B.trackBy&&d.$watchCollection(function(){if(H(q.$viewValue))return q.$viewValue.map(function(a){return B.getTrackByValue(a)})},function(){q.$render()})):(n.writeValue=function(a){if(v){var b=k[0].options[k[0].selectedIndex],c=v.getOptionFromViewValue(a);b&&b.removeAttribute("selected"),
c?(k[0].value!==c.selectValue&&(n.removeUnknownOption(),k[0].value=c.selectValue,c.element.selected=!0),c.element.setAttribute("selected","selected")):n.selectUnknownOrEmptyOption(a)}},n.readValue=function(){var a=v.selectValueMap[k.val()];return a&&!a.disabled?(n.unselectEmptyOption(),n.removeUnknownOption(),v.getViewValueFromOption(a)):null},B.trackBy&&d.$watch(function(){return B.getTrackByValue(q.$viewValue)},function(){q.$render()})),l&&(a(n.emptyOption)(d),k.prepend(n.emptyOption),8===n.emptyOption[0].nodeType?(n.hasEmptyOption=!1,n.registerOption=function(a,b){""===b.val()&&(n.hasEmptyOption=!0,n.emptyOption=b,n.emptyOption.removeClass("ng-scope"),q.$render(),b.on("$destroy",function(){var a=n.$isEmptyOptionSelected();n.hasEmptyOption=!1,n.emptyOption=void 0,a&&q.$render()}))}):n.emptyOption.removeClass("ng-scope")),d.$watchCollection(B.getWatchables,function(){var a=v&&n.readValue();if(v)for(var b=v.items.length-1;0<=b;b--){var c=v.items[b];Gb(w(c.group)?c.element.parentNode:c.element)}v=B.getOptions();var d={};v.items.forEach(function(a){var b;if(w(a.group)){b=d[a.group],b||(b=f.cloneNode(!1),C.appendChild(b),b.label=null===a.group?"null":a.group,d[a.group]=b);var c=e.cloneNode(!1);b.appendChild(c),p(a,c)}else b=e.cloneNode(!1),C.appendChild(b),p(a,b)}),k[0].appendChild(C),q.$render(),q.$isEmpty(a)||(b=n.readValue(),(B.trackBy||A?va(a,b):a===b)||(q.$setViewValue(b),q.$render()))})}}}}],kf=["$locale","$interpolate","$log",function(a,b,d){var c=/{}/g,e=/^when(Minus)?(.+)$/;return{link:function(f,g,k){function h(a){g.text(a||"")}var z,l=k.count,m=k.$attr.when&&g.attr(k.$attr.when),p=k.offset||0,n=f.$eval(m)||{},q={},w=b.startSymbol(),t=b.endSymbol(),x=w+l+"-"+p+t,v=ca.noop;r(k,function(a,b){var c=e.exec(b);c&&(c=(c[1]?"-":"")+K(c[2]),n[c]=g.attr(k.$attr[b]))}),r(n,function(a,d){q[d]=b(a.replace(c,x))}),f.$watch(l,function(b){var c=parseFloat(b),e=Y(c);e||c in n||(c=a.pluralCat(c-p)),c===z||e&&Y(z)||(v(),e=q[c],A(e)?(null!=b&&d.debug("ngPluralize: no rule defined for '"+c+"' in "+m),v=E,h()):v=f.$watch(e,h),z=c)})}}}],ue=F("ngRef"),lf=["$parse",function(a){return{priority:-1,restrict:"A",compile:function(b,d){var c=xa(ua(b)),e=a(d.ngRef),f=e.assign||function(){throw ue("nonassign",d.ngRef)};return function(a,b,h){var l;if(h.hasOwnProperty("ngRefRead")){if("$element"===h.ngRefRead)l=b;else if(!(l=b.data("$"+h.ngRefRead+"Controller")))throw ue("noctrl",h.ngRefRead,d.ngRef)}else l=b.data("$"+c+"Controller");l=l||b,f(a,l),b.on("$destroy",function(){e(a)===l&&f(a,null)})}}}}],mf=["$parse","$animate","$compile",function(a,b,d){var c=F("ngRepeat"),e=function(a,b,c,d,_e2,f,g){a[c]=d,_e2&&(a[_e2]=f),a.$index=b,a.$first=0===b,a.$last=b===g-1,a.$middle=!(a.$first||a.$last),a.$odd=!(a.$even=0==(1&b))},f=function(a,b,c){return La(c)},g=function(a,b){return b};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(k,h){var l=h.ngRepeat,m=d.$$createComment("end ngRepeat",l),p=l.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw c("iexp",l);var n=p[1],q=p[2],w=p[3],t=p[4],p=n.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/);if(!p)throw c("iidexp",n);var x=p[3]||p[1],v=p[2];if(w&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(w)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(w)))throw c("badident",w);var A;if(t){var z={$id:La},y=a(t);A=function(a,b,c,d){return v&&(z[v]=b),z[x]=c,z.$index=d,y(a,z)}}return function(a,d,h,k,n){var p=T();a.$watchCollection(q,function(h){var k,q,s,B,C,E,D,H,F,K,t=d[0],y=T();if(w&&(a[w]=h),za(h))H=h,q=A||f;else for(K in q=A||g,H=[],h)ta.call(h,K)&&"$"!==K.charAt(0)&&H.push(K);for(B=H.length,K=Array(B),k=0;k<B;k++)if(C=h===H?k:H[k],E=h[C],D=q(a,C,E,k),p[D])F=p[D],delete p[D],y[D]=F,K[k]=F;else{if(y[D])throw r(K,function(a){a&&a.scope&&(p[a.id]=a)}),c("dupes",l,D,E);K[k]={id:D,scope:void 0,clone:void 0},y[D]=!0}z&&(z[x]=void 0);for(s in p){if(F=p[s],D=ub(F.clone),b.leave(D),D[0].parentNode)for(k=0,q=D.length;k<q;k++)D[k].$$NG_REMOVED=!0;F.scope.$destroy()}for(k=0;k<B;k++)if(C=h===H?k:H[k],E=h[C],F=K[k],F.scope){s=t;do{s=s.nextSibling}while(s&&s.$$NG_REMOVED);F.clone[0]!==s&&b.move(ub(F.clone),null,t),t=F.clone[F.clone.length-1],e(F.scope,k,x,E,v,C,B)}else n(function(a,c){F.scope=c;var d=m.cloneNode(!1);a[a.length++]=d,b.enter(a,null,t),t=d,F.clone=a,y[F.id]=F,e(F.scope,k,x,E,v,C,B)});p=y})}}}}],nf=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngShow,function(b){a[b?"removeClass":"addClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ef=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,d,c){b.$watch(c.ngHide,function(b){a[b?"addClass":"removeClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],of=Ra(function(a,b,d){a.$watchCollection(d.ngStyle,function(a,d){d&&a!==d&&r(d,function(a,c){b.css(c,"")}),a&&b.css(a)})}),pf=["$animate","$compile",function(a,b){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(d,c,e,f){var g=[],k=[],h=[],l=[],m=function(a,b){return function(c){!1!==c&&a.splice(b,1)}};d.$watch(e.ngSwitch||e.on,function(c){for(var d,e;h.length;)a.cancel(h.pop());for(d=0,e=l.length;d<e;++d){var q=ub(k[d].clone);l[d].$destroy(),(h[d]=a.leave(q)).done(m(h,d))}k.length=0,l.length=0,(g=f.cases["!"+c]||f.cases["?"])&&r(g,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.$$createComment("end ngSwitchWhen"),k.push({clone:d}),a.enter(d,f.parent(),f)})})})}}}],qf=Ra({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,e){a=d.ngSwitchWhen.split(d.ngSwitchWhenSeparator).sort().filter(function(a,b,c){return c[b-1]!==a}),r(a,function(a){c.cases["!"+a]=c.cases["!"+a]||[],c.cases["!"+a].push({transclude:e,element:b})})}}),rf=Ra({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,d,c,e){c.cases["?"]=c.cases["?"]||[],c.cases["?"].push({transclude:e,element:b})}}),Eh=F("ngTransclude"),tf=["$compile",function(a){return{restrict:"EAC",compile:function(b){var d=a(b.contents());return b.empty(),function(a,b,f,g,k){function h(){d(a,function(a){b.append(a)})}if(!k)throw Eh("orphan",Aa(b));f.ngTransclude===f.$attr.ngTransclude&&(f.ngTransclude=""),f=f.ngTransclude||f.ngTranscludeSlot,k(function(a,c){var d;if(d=a.length)a:{d=0;for(var f=a.length;d<f;d++){var g=a[d];if(g.nodeType!==Pa||g.nodeValue.trim()){d=!0;break a}}d=void 0}d?b.append(a):(h(),c.$destroy())},null,f),f&&!k.isSlotFilled(f)&&h()}}}}],Te=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,d){"text/ng-template"===d.type&&a.put(d.id,b[0].text)}}}],Fh={$setViewValue:E,$render:E},Gh=["$element","$scope",function(a,b){function d(){g||(g=!0,b.$$postDigest(function(){g=!1,e.ngModelCtrl.$render()}))}function c(a){k||(k=!0,b.$$postDigest(function(){b.$$destroyed||(k=!1,e.ngModelCtrl.$setViewValue(e.readValue()),a&&e.ngModelCtrl.$render())}))}var e=this,f=new Ib;e.selectValueMap={},e.ngModelCtrl=Fh,e.multiple=!1,e.unknownOption=x(z.document.createElement("option")),e.hasEmptyOption=!1,e.emptyOption=void 0,e.renderUnknownOption=function(b){b=e.generateUnknownOptionValue(b),e.unknownOption.val(b),a.prepend(e.unknownOption),Oa(e.unknownOption,!0),a.val(b)},e.updateUnknownOption=function(b){b=e.generateUnknownOptionValue(b),e.unknownOption.val(b),Oa(e.unknownOption,!0),a.val(b)},e.generateUnknownOptionValue=function(a){return"? "+La(a)+" ?"},e.removeUnknownOption=function(){e.unknownOption.parent()&&e.unknownOption.remove()},e.selectEmptyOption=function(){e.emptyOption&&(a.val(""),Oa(e.emptyOption,!0))},e.unselectEmptyOption=function(){e.hasEmptyOption&&Oa(e.emptyOption,!1)},b.$on("$destroy",function(){e.renderUnknownOption=E}),e.readValue=function(){var b=a.val(),b=b in e.selectValueMap?e.selectValueMap[b]:b;return e.hasOption(b)?b:null},e.writeValue=function(b){var c=a[0].options[a[0].selectedIndex];c&&Oa(x(c),!1),e.hasOption(b)?(e.removeUnknownOption(),c=La(b),a.val(c in e.selectValueMap?c:b),Oa(x(a[0].options[a[0].selectedIndex]),!0)):e.selectUnknownOrEmptyOption(b)},e.addOption=function(a,b){if(8!==b[0].nodeType){Ja(a,'"option value"'),""===a&&(e.hasEmptyOption=!0,e.emptyOption=b);var c=f.get(a)||0;f.set(a,c+1),d()}},e.removeOption=function(a){var b=f.get(a);b&&(1===b?(f.delete(a),""===a&&(e.hasEmptyOption=!1,e.emptyOption=void 0)):f.set(a,b-1))},e.hasOption=function(a){return!!f.get(a)},e.$hasEmptyOption=function(){return e.hasEmptyOption},e.$isUnknownOptionSelected=function(){return a[0].options[0]===e.unknownOption[0]},e.$isEmptyOptionSelected=function(){return e.hasEmptyOption&&a[0].options[a[0].selectedIndex]===e.emptyOption[0]},e.selectUnknownOrEmptyOption=function(a){null==a&&e.emptyOption?(e.removeUnknownOption(),e.selectEmptyOption()):e.unknownOption.parent().length?e.updateUnknownOption(a):e.renderUnknownOption(a)};var g=!1,k=!1;e.registerOption=function(a,b,f,g,k){if(f.$attr.ngValue){var q,r;f.$observe("value",function(a){var d,f=b.prop("selected");w(r)&&(e.removeOption(q),delete e.selectValueMap[r],d=!0),r=La(a),q=a,e.selectValueMap[r]=a,e.addOption(a,b),b.attr("value",r),d&&f&&c()})}else g?f.$observe("value",function(a){e.readValue();var d,f=b.prop("selected");w(q)&&(e.removeOption(q),d=!0),q=a,e.addOption(a,b),d&&f&&c()}):k?a.$watch(k,function(a,d){f.$set("value",a);var g=b.prop("selected");d!==a&&e.removeOption(d),e.addOption(a,b),d&&g&&c()}):e.addOption(f.value,b);f.$observe("disabled",function(a){("true"===a||a&&b.prop("selected"))&&(e.multiple?c(!0):(e.ngModelCtrl.$setViewValue(null),e.ngModelCtrl.$render()))}),b.on("$destroy",function(){var a=e.readValue(),b=f.value;e.removeOption(b),d(),(e.multiple&&a&&-1!==a.indexOf(b)||a===b)&&c(!0)})}}],Ue=function(){return{restrict:"E",require:["select","?ngModel"],controller:Gh,priority:1,link:{pre:function(a,b,d,c){var e=c[0],f=c[1];if(f){if(e.ngModelCtrl=f,b.on("change",function(){e.removeUnknownOption(),a.$apply(function(){f.$setViewValue(e.readValue())})}),d.multiple){e.multiple=!0,e.readValue=function(){var a=[];return r(b.find("option"),function(b){b.selected&&!b.disabled&&(b=b.value,a.push(b in e.selectValueMap?e.selectValueMap[b]:b))}),a},e.writeValue=function(a){r(b.find("option"),function(b){var c=!!a&&(-1!==Array.prototype.indexOf.call(a,b.value)||-1!==Array.prototype.indexOf.call(a,e.selectValueMap[b.value]));c!==b.selected&&Oa(x(b),c)})};var g,k=NaN;a.$watch(function(){k!==f.$viewValue||va(g,f.$viewValue)||(g=ja(f.$viewValue),f.$render()),k=f.$viewValue}),f.$isEmpty=function(a){return!a||0===a.length}}}else e.registerOption=E},post:function(a,b,d,c){var e=c[1];if(e){var f=c[0];e.$render=function(){f.writeValue(e.$viewValue)}}}}}},Ve=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(b,d){var c,e;return w(d.ngValue)||(w(d.value)?c=a(d.value,!0):(e=a(b.text(),!0))||d.$set("value",b.text())),function(a,b,d){var h=b.parent();(h=h.data("$selectController")||h.parent().data("$selectController"))&&h.registerOption(a,b,d,c,e)}}}}],bd=["$parse",function(a){return{restrict:"A",require:"?ngModel",link:function(b,d,c,e){if(e){var f=c.hasOwnProperty("required")||a(c.ngRequired)(b);c.ngRequired||(c.required=!0),e.$validators.required=function(a,b){return!f||!e.$isEmpty(b)},c.$observe("required",function(a){f!==a&&(f=a,e.$validate())})}}}}],ad=["$parse",function(a){return{restrict:"A",require:"?ngModel",compile:function(b,d){var c,e;return d.ngPattern&&(c=d.ngPattern,e="/"===d.ngPattern.charAt(0)&&ke.test(d.ngPattern)?function(){return d.ngPattern}:a(d.ngPattern)),function(a,b,d,h){if(h){var l=d.pattern;d.ngPattern?l=e(a):c=d.pattern;var m=je(l,c,b);d.$observe("pattern",function(a){var d=m;m=je(a,c,b),(d&&d.toString())!==(m&&m.toString())&&h.$validate()}),h.$validators.pattern=function(a,b){return h.$isEmpty(b)||A(m)||m.test(b)}}}}}}],dd=["$parse",function(a){return{restrict:"A",require:"?ngModel",link:function(b,d,c,e){if(e){var f=c.maxlength||a(c.ngMaxlength)(b),g=Ub(f);c.$observe("maxlength",function(a){f!==a&&(g=Ub(a),f=a,e.$validate())}),e.$validators.maxlength=function(a,b){return 0>g||e.$isEmpty(b)||b.length<=g}}}}}],cd=["$parse",function(a){return{restrict:"A",require:"?ngModel",link:function(b,d,c,e){if(e){var f=c.minlength||a(c.ngMinlength)(b),g=Ub(f)||-1;c.$observe("minlength",function(a){f!==a&&(g=Ub(a)||-1,f=a,e.$validate())}),e.$validators.minlength=function(a,b){return e.$isEmpty(b)||b.length>=g}}}}}];z.angular.bootstrap?z.console&&console.log("WARNING: Tried to load AngularJS more than once."):(function(){var a;if(!Yc){var b=rb();(sb=A(b)?z.jQuery:b?z[b]:void 0)&&sb.fn.on?(x=sb,S(sb.fn,{scope:Wa.scope,isolateScope:Wa.isolateScope,controller:Wa.controller,injector:Wa.injector,inheritedData:Wa.inheritedData})):x=U,a=x.cleanData,x.cleanData=function(b){for(var c,f,e=0;null!=(f=b[e]);e++)(c=(x._data(f)||{}).events)&&c.$destroy&&x(f).triggerHandler("$destroy");a(b)},ca.element=x,Yc=!0}}(),function(a){S(a,{errorHandlingConfig:ve,bootstrap:Wc,copy:Ia,extend:S,merge:xe,equals:va,element:x,forEach:r,injector:fb,noop:E,bind:Va,toJson:eb,fromJson:Tc,identity:Ta,isUndefined:A,isDefined:w,isString:C,isFunction:B,isObject:D,isNumber:X,isElement:ac,isArray:H,version:Pe,isDate:ha,callbacks:{$$counter:0},getTestability:He,reloadWithDebugInfo:Ge,UNSAFE_restoreLegacyJqLiteXHTMLReplacement:Ke,$$minErr:F,$$csp:Ba,$$encodeUriSegment:ic,$$encodeUriQuery:ba,$$lowercase:K,$$stringify:jc,$$uppercase:vb}),lc=Me(z),lc("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Qe}),a.provider("$compile",Zc).directive({a:Re,input:$c,textarea:$c,form:Se,script:Te,select:Ue,option:Ve,ngBind:We,ngBindHtml:Xe,ngBindTemplate:Ye,ngClass:Ze,ngClassEven:$e,ngClassOdd:af,ngCloak:bf,ngController:cf,ngForm:df,ngHide:ef,ngIf:ff,ngInclude:gf,ngInit:hf,ngNonBindable:jf,ngPluralize:kf,ngRef:lf,ngRepeat:mf,ngShow:nf,ngStyle:of,ngSwitch:pf,ngSwitchWhen:qf,ngSwitchDefault:rf,ngOptions:sf,ngTransclude:tf,ngModel:uf,ngList:vf,ngChange:wf,pattern:ad,ngPattern:ad,required:bd,ngRequired:bd,minlength:cd,ngMinlength:cd,maxlength:dd,ngMaxlength:dd,ngValue:xf,ngModelOptions:yf}).directive({ngInclude:zf,input:Af}).directive(wb).directive(ed),a.provider({$anchorScroll:Bf,$animate:Cf,$animateCss:Df,$$animateJs:Ef,$$animateQueue:Ff,$$AnimateRunner:Gf,$$animateAsyncRun:Hf,$browser:If,$cacheFactory:Jf,$controller:Kf,$document:Lf,$$isDocumentHidden:Mf,$exceptionHandler:Nf,$filter:fd,$$forceReflow:Of,$interpolate:Pf,$interval:Qf,$$intervalFactory:Rf,$http:Sf,$httpParamSerializer:Tf,$httpParamSerializerJQLike:Uf,$httpBackend:Vf,$xhrFactory:Wf,$jsonpCallbacks:Xf,$location:Yf,$log:Zf,$parse:$f,$rootScope:ag,$q:bg,$$q:cg,$sce:dg,$sceDelegate:eg,$sniffer:fg,$$taskTrackerFactory:gg,$templateCache:hg,$templateRequest:ig,$$testability:jg,$timeout:kg,$window:lg,$$rAF:mg,$$jqLite:ng,$$Map:og,$$cookieReader:pg})}]).info({angularVersion:"1.8.2"})}(ca),ca.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var b=a.indexOf(".");return-1==b?0:a.length-b-1}a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:"January February March April May June July August September October November December".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),STANDALONEMONTH:"January February March April May June July August September October November December".split(" "),WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,c){var e=0|a,f=c;return void 0===f&&(f=Math.min(b(a),3)),Math.pow(10,f),1==e&&0==f?"one":"other"}})}]),x(function(){Ee(z.document,Wc)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend(window.angular.element("<style>").text('@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}')),function(I,b){function z(b,h){var d=[],c=b.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[?*])?/g,function(b,c,h,k){return b="?"===k||"*?"===k,k="*"===k||"*?"===k,d.push({name:h,optional:b}),c=c||"",(b?"(?:"+c:c+"(?:")+(k?"(.+?)":"([^/]+)")+(b?"?)?":")")}).replace(/([/$*])/g,"\\$1");return h.ignoreTrailingSlashes&&(c=c.replace(/\/+$/,"")+"/*"),{keys:d,regexp:new RegExp("^"+c+"(?:[?#]|$)",h.caseInsensitiveMatch?"i":"")}}function A(b){p&&b.get("$route")}function v(u,h,d){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(c,f,g,l,k){function q(){r&&(d.cancel(r),r=null),m&&(m.$destroy(),m=null),s&&(r=d.leave(s),r.done(function(b){!1!==b&&(r=null)}),s=null)}function C(){var g=u.current&&u.current.locals;if(b.isDefined(g&&g.$template)){var g=c.$new(),l=u.current;s=k(g,function(g){d.enter(g,null,s||f).done(function(d){!1===d||!b.isDefined(w)||w&&!c.$eval(w)||h()}),q()}),m=l.scope=g,m.$emit("$viewContentLoaded"),m.$eval(p)}else q()}var m,s,r,w=g.autoscroll,p=g.onload||"";c.$on("$routeChangeSuccess",C),C()}}}function x(b,h,d){return{restrict:"ECA",priority:-400,link:function(c,f){var g=d.current,l=g.locals;f.html(l.$template);var k=b(f.contents());if(g.controller){l.$scope=c;var q=h(g.controller,l);g.controllerAs&&(c[g.controllerAs]=q),f.data("$ngControllerController",q),f.children().data("$ngControllerController",q)}c[g.resolveAs||"$resolve"]=l,k(c)}}}var D,E,F,G,p,y=b.module("ngRoute",[]).info({angularVersion:"1.8.2"}).provider("$route",function(){function u(d,c){return b.extend(Object.create(d),c)}D=b.isArray,E=b.isObject,F=b.isDefined,G=b.noop;var h={};this.when=function(d,c){var f;if(f=void 0,D(c)){f=f||[];for(var g=0,l=c.length;g<l;g++)f[g]=c[g]}else if(E(c))for(g in f=f||{},c)"$"===g.charAt(0)&&"$"===g.charAt(1)||(f[g]=c[g]);return f=f||c,b.isUndefined(f.reloadOnUrl)&&(f.reloadOnUrl=!0),b.isUndefined(f.reloadOnSearch)&&(f.reloadOnSearch=!0),b.isUndefined(f.caseInsensitiveMatch)&&(f.caseInsensitiveMatch=this.caseInsensitiveMatch),h[d]=b.extend(f,{originalPath:d},d&&z(d,f)),d&&(g="/"===d[d.length-1]?d.substr(0,d.length-1):d+"/",h[g]=b.extend({originalPath:d,redirectTo:d},z(g,f))),this},this.caseInsensitiveMatch=!1,this.otherwise=function(b){return"string"==typeof b&&(b={redirectTo:b}),this.when(null,b),this},p=!0,this.eagerInstantiationEnabled=function(b){return F(b)?(p=b,this):p},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce","$browser",function(d,c,f,g,l,k,q,p){function m(a){var e=t.current;n=A(),(x=!B&&n&&e&&n.$$route===e.$$route&&(!n.reloadOnUrl||!n.reloadOnSearch&&b.equals(n.pathParams,e.pathParams)))||!e&&!n||d.$broadcast("$routeChangeStart",n,e).defaultPrevented&&a&&a.preventDefault()}function s(){var a=t.current,e=n;if(x)a.params=e.params,b.copy(a.params,f),d.$broadcast("$routeUpdate",a);else if(e||a){B=!1,t.current=e;var c=g.resolve(e);p.$$incOutstandingRequestCount("$route"),c.then(r).then(w).then(function(g){return g&&c.then(y).then(function(c){e===t.current&&(e&&(e.locals=c,b.copy(e.params,f)),d.$broadcast("$routeChangeSuccess",e,a))})}).catch(function(b){e===t.current&&d.$broadcast("$routeChangeError",e,a,b)}).finally(function(){p.$$completeOutstandingRequest(G,"$route")})}}function r(a){var e={route:a,hasRedirection:!1};if(a)if(a.redirectTo)if(b.isString(a.redirectTo))e.path=v(a.redirectTo,a.params),e.search=a.params,e.hasRedirection=!0;else{var d=c.path(),f=c.search();a=a.redirectTo(a.pathParams,d,f),b.isDefined(a)&&(e.url=a,e.hasRedirection=!0)}else if(a.resolveRedirectTo)return g.resolve(l.invoke(a.resolveRedirectTo)).then(function(a){return b.isDefined(a)&&(e.url=a,e.hasRedirection=!0),e});return e}function w(a){var b=!0;if(a.route!==t.current)b=!1;else if(a.hasRedirection){var g=c.url(),d=a.url;d?c.url(d).replace():d=c.path(a.path).search(a.search).replace().url(),d!==g&&(b=!1)}return b}function y(a){if(a){var e=b.extend({},a.resolve);return b.forEach(e,function(a,c){e[c]=b.isString(a)?l.get(a):l.invoke(a,null,null,c)}),a=z(a),b.isDefined(a)&&(e.$template=a),g.all(e)}}function z(a){var e,c;return b.isDefined(e=a.template)?b.isFunction(e)&&(e=e(a.params)):b.isDefined(c=a.templateUrl)&&(b.isFunction(c)&&(c=c(a.params)),b.isDefined(c)&&(a.loadedTemplateUrl=q.valueOf(c),e=k(c))),e}function A(){var a,e;return b.forEach(h,function(d,g){var f;if(f=!e){var h=c.path();f=d.keys;var l={};if(d.regexp)if(h=d.regexp.exec(h)){for(var k=1,p=h.length;k<p;++k){var m=f[k-1],n=h[k];m&&n&&(l[m.name]=n)}f=l}else f=null;else f=null;f=a=f}f&&(e=u(d,{params:b.extend({},c.search(),a),pathParams:a}),e.$$route=d)}),e||h[null]&&u(h[null],{params:{},pathParams:{}})}function v(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var f=a.match(/(\w+)(?:[?*])?(.*)/),g=f[1];d.push(c[g]),d.push(f[2]||""),delete c[g]}}),d.join("")}var n,x,B=!1,t={routes:h,reload:function(){B=!0;var a={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0,B=!1}};d.$evalAsync(function(){m(a),a.defaultPrevented||s()})},updateParams:function(a){if(!this.current||!this.current.$$route)throw H("norout");a=b.extend({},this.current.params,a),c.path(v(this.current.$$route.originalPath,a)),c.search(a)}};return d.$on("$locationChangeStart",m),d.$on("$locationChangeSuccess",s),t}]}).run(A),H=b.$$minErr("ngRoute");A.$inject=["$injector"],y.provider("$routeParams",function(){this.$get=function(){return{}}}),y.directive("ngView",v),y.directive("ngView",x),v.$inject=["$route","$anchorScroll","$animate"],x.$inject=["$compile","$controller","$route"]}(window,window.angular),function(n,e){function m(d,k,l){var a=l.baseHref(),h=d[0];return function(f,b,c){var d,g;c=c||{},g=c.expires,d=e.isDefined(c.path)?c.path:a,e.isUndefined(b)&&(g="Thu, 01 Jan 1970 00:00:00 GMT",b=""),e.isString(g)&&(g=new Date(g)),b=encodeURIComponent(f)+"="+encodeURIComponent(b),b=b+(d?";path="+d:"")+(c.domain?";domain="+c.domain:""),b+=g?";expires="+g.toUTCString():"",b+=c.secure?";secure":"",b+=c.samesite?";samesite="+c.samesite:"",c=b.length+1,4096<c&&k.warn("Cookie '"+f+"' possibly not set or overflowed because it was too large ("+c+" > 4096 bytes)!"),h.cookie=b}}e.module("ngCookies",["ng"]).info({angularVersion:"1.8.2"}).provider("$cookies",[function(){var d=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function(k,l){return{get:function(a){return k()[a]},getObject:function(a){return(a=this.get(a))?e.fromJson(a):a},getAll:function(){return k()},put:function(a,h,f){l(a,h,f?e.extend({},d,f):d)},putObject:function(a,d,f){this.put(a,e.toJson(d),f)},remove:function(a,h){l(a,void 0,h?e.extend({},d,h):d)}}}]}]),m.$inject=["$document","$log","$browser"],e.module("ngCookies").provider("$$cookieWriter",function(){this.$get=m})}(window,window.angular),function(t,e){"function"==typeof define&&define.amd?define([],function(){return e()}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e():e()}(0,function(){function t(e){var n=e.storageKey(),a=e.storage(),t=function(){var t=e.preferredLanguage();angular.isString(t)?e.use(t):a.put(n,e.use())};t.displayName="fallbackFromIncorrectStorageValue",a?a.get(n)?e.use(a.get(n)).catch(t):t():angular.isString(e.preferredLanguage())&&e.use(e.preferredLanguage())}function e(t,r,e,i){var z,c,T,x,F,I,_,n,V,R,D,K,U,M,H,G,q={},Y=[],B=t,J=[],Q="translate-cloak",W=!1,X=!1,Z=".",tt=!1,et=!1,nt=0,at=!0,a="default",s={default:function(t){return(t||"").split("-").join("_")},java:function(t){var e=(t||"").split("-").join("_"),n=e.split("_");return 1<n.length?n[0].toLowerCase()+"_"+n[1].toUpperCase():e},bcp47:function(t){var e=(t||"").split("_").join("-"),n=e.split("-");switch(n.length){case 1:n[0]=n[0].toLowerCase();break;case 2:n[0]=n[0].toLowerCase(),4===n[1].length?n[1]=n[1].charAt(0).toUpperCase()+n[1].slice(1).toLowerCase():n[1]=n[1].toUpperCase();break;case 3:n[0]=n[0].toLowerCase(),n[1]=n[1].charAt(0).toUpperCase()+n[1].slice(1).toLowerCase(),n[2]=n[2].toUpperCase();break;default:return e}return n.join("-")},"iso639-1":function(t){return(t||"").split("_").join("-").split("-")[0].toLowerCase()}},o=function(){if(angular.isFunction(i.getLocale))return i.getLocale();var t,e,n=r.$get().navigator,a=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(n.languages))for(t=0;t<n.languages.length;t++)if((e=n.languages[t])&&e.length)return e;for(t=0;t<a.length;t++)if((e=n[a[t]])&&e.length)return e;return null};o.displayName="angular-translate/service: getFirstBrowserLanguage";var rt=function(){var t=o()||"";return s[a]&&(t=s[a](t)),t};rt.displayName="angular-translate/service: getLocale";var it=function(t,e){for(var n=0,a=t.length;n<a;n++)if(t[n]===e)return n;return-1},st=function(){return this.toString().replace(/^\s+|\s+$/g,"")},f=function(t){return angular.isString(t)?t.toLowerCase():t},ot=function(t){if(t){for(var e,n=[],a=f(t),r=0,i=Y.length;r<i;r++)n.push(f(Y[r]));if(-1<(r=it(n,a)))return Y[r];if(c)for(var s in c)if(c.hasOwnProperty(s)){var o=!1,l=Object.prototype.hasOwnProperty.call(c,s)&&f(s)===f(t);if("*"===s.slice(-1)&&(o=f(s.slice(0,-1))===f(t.slice(0,s.length-1))),(l||o)&&(e=c[s],-1<it(n,f(e))))return e}var u=t.split("_");return 1<u.length&&-1<it(n,f(u[0]))?u[0]:void 0}},lt=function(t,e){if(!t&&!e)return q;if(t&&!e){if(angular.isString(t))return q[t]}else angular.isObject(q[t])||(q[t]={}),angular.extend(q[t],ut(e));return this};this.translations=lt,this.cloakClassName=function(t){return t?(Q=t,this):Q},this.nestedObjectDelimeter=function(t){return t?(Z=t,this):Z};var ut=function ut(t,e,n,a){var r,i,s;for(r in e||(e=[]),n||(n={}),t)Object.prototype.hasOwnProperty.call(t,r)&&(s=t[r],angular.isObject(s)?ut(s,e.concat(r),n,r):(i=e.length?""+e.join(Z)+Z+r:r,e.length&&r===a&&(n[""+e.join(Z)]="@:"+i),n[i]=s));return n};ut.displayName="flatObject",this.addInterpolation=function(t){return J.push(t),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(t){return R=t,this},this.useSanitizeValueStrategy=function(t){return e.useStrategy(t),this},this.preferredLanguage=function(t){return t?(ct(t),this):z};var ct=function(t){return t&&(z=t),z};this.translationNotFoundIndicator=function(t){return this.translationNotFoundIndicatorLeft(t),this.translationNotFoundIndicatorRight(t),this},this.translationNotFoundIndicatorLeft=function(t){return t?(U=t,this):U},this.translationNotFoundIndicatorRight=function(t){return t?(M=t,this):M},this.fallbackLanguage=function(t){return ft(t),this};var ft=function(t){return t?(angular.isString(t)?(x=!0,T=[t]):angular.isArray(t)&&(x=!1,T=t),angular.isString(z)&&it(T,z)<0&&T.push(z),this):x?T[0]:T};this.use=function(t){if(t){if(!q[t]&&!D)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+t+"'");return F=t,this}return F},this.resolveClientLocale=function(){return rt()};var gt=function(t){return t?(B=t,this):n?n+B:B};this.storageKey=gt,this.useUrlLoader=function(t,e){return this.useLoader("$translateUrlLoader",angular.extend({url:t},e))},this.useStaticFilesLoader=function(t){return this.useLoader("$translateStaticFilesLoader",t)},this.useLoader=function(t,e){return D=t,K=e||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(t){return _=t,this},this.storagePrefix=function(t){return t?(n=t,this):t},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(t){return V=t,this},this.usePostCompiling=function(t){return W=!!t,this},this.forceAsyncReload=function(t){return X=!!t,this},this.uniformLanguageTag=function(t){return t?angular.isString(t)&&(t={standard:t}):t={},a=t.standard,this},this.determinePreferredLanguage=function(t){var e=t&&angular.isFunction(t)?t():rt();return z=Y.length&&ot(e)||e,this},this.registerAvailableLanguageKeys=function(t,e){return t?(Y=t,e&&(c=e),this):Y},this.useLoaderCache=function(t){return!1===t?H=void 0:!0===t?H=!0:void 0===t?H="$translationCache":t&&(H=t),this},this.directivePriority=function(t){return void 0===t?nt:(nt=t,this)},this.statefulFilter=function(t){return void 0===t?at:(at=t,this)},this.postProcess=function(t){return G=t||void 0,this},this.keepContent=function(t){return et=!!t,this},this.$get=["$log","$injector","$rootScope","$q",function(t,o,s,m){var i,$,y,b=o.get(R||"$translateDefaultInterpolation"),S=!1,L={},f={},j=function j(t,s,o,l,u,c){!F&&z&&(F=z);var a=u&&u!==F?ot(u)||u:F;if(u&&v(u),angular.isArray(t))return function(t){for(var a={},e=[],r=0,i=t.length;r<i;r++)e.push(function(e){var n=m.defer(),t=function(_t){a[e]=_t,n.resolve([e,_t])};return j(e,s,o,l,u,c).then(t,t),n.promise}(t[r]));return m.all(e).then(function(){return a})}(t);var e=m.defer();t&&(t=st.apply(t));var n=function(){var t=f[a]||f[z];if($=0,_&&!t){var e=i.get(B);if(t=f[e],T&&T.length){var n=it(T,e);$=0===n?1:0,it(T,z)<0&&T.push(z)}}return t}();if(n){var r=function(){u||(a=F),h(t,s,o,l,a,c).then(e.resolve,e.reject)};r.displayName="promiseResolved",n.finally(r).catch(angular.noop)}else h(t,s,o,l,a,c).then(e.resolve,e.reject);return e.promise},w=function(t){return U&&(t=[U,t].join(" ")),M&&(t=[t,M].join(" ")),t},l=function(t){F=t,_&&i.put(j.storageKey(),F),s.$emit("$translateChangeSuccess",{language:t}),b.setLocale(F);var e=function(t,_e3){L[_e3].setLocale(F)};e.displayName="eachInterpolatorLocaleSetter",angular.forEach(L,e),s.$emit("$translateChangeEnd",{language:t})},u=function(n){if(!n)throw"No language key specified for loading.";var a=m.defer();s.$emit("$translateLoadingStart",{language:n}),S=!0;var t=H;"string"==typeof t&&(t=o.get(t));var e=angular.extend({},K,{key:n,$http:angular.extend({},{cache:t},K.$http)}),r=function(t){var e={};s.$emit("$translateLoadingSuccess",{language:n}),angular.isArray(t)?angular.forEach(t,function(t){angular.extend(e,ut(t))}):angular.extend(e,ut(t)),S=!1,a.resolve({key:n,table:e}),s.$emit("$translateLoadingEnd",{language:n})};r.displayName="onLoaderSuccess";var i=function(t){s.$emit("$translateLoadingError",{language:t}),a.reject(t),s.$emit("$translateLoadingEnd",{language:t})};return i.displayName="onLoaderError",o.get(D)(e).then(r,i),a.promise};if(_&&(!(i=o.get(_)).get||!i.put))throw new Error("Couldn't use storage '"+_+"', missing get() or put() method!");if(J.length){var e=function(t){var e=o.get(t);e.setLocale(z||F),L[e.getInterpolationIdentifier()]=e};e.displayName="interpolationFactoryAdder",angular.forEach(J,e)}var c=function c(a,r,i,s,o){var l=m.defer(),t=function(_t2){if(Object.prototype.hasOwnProperty.call(_t2,r)&&null!==_t2[r]){s.setLocale(a);var e=_t2[r];if("@:"===e.substr(0,2))c(a,e.substr(2),i,s,o).then(l.resolve,l.reject);else{var n=s.interpolate(_t2[r],i,"service",o,r);n=O(r,_t2[r],n,i,a),l.resolve(n)}s.setLocale(F)}else l.reject()};return t.displayName="fallbackTranslationResolver",function(t){var e=m.defer();if(Object.prototype.hasOwnProperty.call(q,t))e.resolve(q[t]);else if(f[t]){var n=function(t){lt(t.key,t.table),e.resolve(t.table)};n.displayName="translationTableResolver",f[t].then(n,e.reject)}else e.reject();return e.promise}(a).then(t,l.reject),l.promise},g=function g(t,e,n,a,r){var i,s=q[t]
;if(s&&Object.prototype.hasOwnProperty.call(s,e)&&null!==s[e]){if(a.setLocale(t),i=a.interpolate(s[e],n,"filter",r,e),i=O(e,s[e],i,n,t,r),!angular.isString(i)&&angular.isFunction(i.$$unwrapTrustedValue)){var o=i.$$unwrapTrustedValue();if("@:"===o.substr(0,2))return g(t,o.substr(2),n,a,r)}else if("@:"===i.substr(0,2))return g(t,i.substr(2),n,a,r);a.setLocale(F)}return i},C=function(t,e,n,a){return V?o.get(V)(t,F,e,n,a):t},N=function N(t,e,n,a,r,i){var s=m.defer();if(t<T.length){var o=T[t];c(o,e,n,a,i).then(function(t){s.resolve(t)},function(){return N(t+1,e,n,a,r,i).then(s.resolve,s.reject)})}else if(r)s.resolve(r);else{var l=C(e,n,r);V&&l?s.resolve(l):s.reject(w(e))}return s.promise},p=function p(t,e,n,a,r){var i;if(t<T.length){var s=T[t];(i=g(s,e,n,a,r))||""===i||(i=p(t+1,e,n,a))}return i},h=function(t,e,n,a,r,i){var s,o,l,u,c,f=m.defer(),g=r?q[r]:q,p=n?L[n]:b;if(g&&Object.prototype.hasOwnProperty.call(g,t)&&null!==g[t]){var h=g[t];if("@:"===h.substr(0,2))j(h.substr(2),e,n,a,r,i).then(f.resolve,f.reject);else{var d=p.interpolate(h,e,"service",i,t);d=O(t,h,d,e,r),f.resolve(d)}}else{var v;V&&!S&&(v=C(t,e,a)),r&&T&&T.length?(s=t,o=e,l=p,u=a,c=i,N(0<y?y:$,s,o,l,u,c)).then(function(t){f.resolve(t)},function(t){f.reject(w(t))}):V&&!S&&v?a?f.resolve(a):f.resolve(v):a?f.resolve(a):f.reject(w(t))}return f.promise},d=function d(t,e,n,a,r){var i,s=a?q[a]:q,o=b;if(L&&Object.prototype.hasOwnProperty.call(L,n)&&(o=L[n]),s&&Object.prototype.hasOwnProperty.call(s,t)&&null!==s[t]){var l=s[t];"@:"===l.substr(0,2)?i=d(l.substr(2),e,n,a,r):(i=o.interpolate(l,e,"filter",r,t),i=O(t,l,i,e,a,r))}else{var u;V&&!S&&(u=C(t,e,r)),i=a&&T&&T.length?p(($=0)<y?y:$,t,e,o,r):V&&!S&&u?u:w(t)}return i},O=function(t,e,n,a,r,i){var s=G;return s&&("string"==typeof s&&(s=o.get(s)),s)?s(t,e,n,a,r,i):n},v=function(t){q[t]||!D||f[t]||(f[t]=u(t).then(function(t){return lt(t.key,t.table),t}))};j.preferredLanguage=function(t){return t&&ct(t),z},j.cloakClassName=function(){return Q},j.nestedObjectDelimeter=function(){return Z},j.fallbackLanguage=function(t){if(null!=t){if(ft(t),D&&T&&T.length)for(var e=0,n=T.length;e<n;e++)f[T[e]]||(f[T[e]]=u(T[e]));j.use(j.use())}return x?T[0]:T},j.useFallbackLanguage=function(t){if(null!=t)if(t){var e=it(T,t);-1<e&&(y=e)}else y=0},j.proposedLanguage=function(){return I},j.storage=function(){return i},j.negotiateLocale=ot,j.use=function(e){if(!e)return F;var n=m.defer();n.promise.then(null,angular.noop),s.$emit("$translateChangeStart",{language:e});var t=ot(e);return 0<Y.length&&!t?m.reject(e):(t&&(e=t),I=e,!X&&q[e]||!D||f[e]?f[e]?f[e].then(function(t){return I===t.key&&l(t.key),n.resolve(t.key),t},function(t){return!F&&T&&0<T.length&&T[0]!==t?j.use(T[0]).then(n.resolve,n.reject):n.reject(t)}):(n.resolve(e),l(e)):(f[e]=u(e).then(function(t){return lt(t.key,t.table),n.resolve(t.key),I===e&&l(t.key),t},function(t){return s.$emit("$translateChangeError",{language:t}),n.reject(t),s.$emit("$translateChangeEnd",{language:t}),m.reject(t)}),f[e].finally(function(){var t;I===(t=e)&&(I=void 0),f[t]=void 0}).catch(angular.noop)),n.promise)},j.resolveClientLocale=function(){return rt()},j.storageKey=function(){return gt()},j.isPostCompilingEnabled=function(){return W},j.isForceAsyncReloadEnabled=function(){return X},j.isKeepContent=function(){return et},j.refresh=function(t){function a(e){var t=u(e);return(f[e]=t).then(function(t){q[e]={},lt(e,t.table),n[e]=!0},angular.noop),t}if(!D)throw new Error("Couldn't refresh translation table, no loader registered!");s.$emit("$translateRefreshStart",{language:t});var e=m.defer(),n={};if(e.promise.then(function(){for(var t in q)q.hasOwnProperty(t)&&(t in n||delete q[t]);F&&l(F)},angular.noop).finally(function(){s.$emit("$translateRefreshEnd",{language:t})}),t)q[t]?a(t).then(e.resolve,e.reject):e.reject();else{var r=T&&T.slice()||[];F&&-1===r.indexOf(F)&&r.push(F),m.all(r.map(a)).then(e.resolve,e.reject)}return e.promise},j.instant=function(t,e,n,a,r){var i=a&&a!==F?ot(a)||a:F;if(null===t||angular.isUndefined(t))return t;if(a&&v(a),angular.isArray(t)){for(var s={},o=0,l=t.length;o<l;o++)s[t[o]]=j.instant(t[o],e,n,a,r);return s}if(angular.isString(t)&&t.length<1)return t;t&&(t=st.apply(t));var u,c,f=[];z&&f.push(z),i&&f.push(i),T&&T.length&&(f=f.concat(T));for(var g=0,p=f.length;g<p;g++){var h=f[g];if(q[h]&&void 0!==q[h][t]&&(u=d(t,e,n,i,r)),void 0!==u)break}return u||""===u||(U||M?u=w(t):(u=b.interpolate(t,e,"filter",r),V&&!S&&(c=C(t,e,r)),V&&!S&&c&&(u=c))),u},j.versionInfo=function(){return"2.18.1"},j.loaderCache=function(){return H},j.directivePriority=function(){return nt},j.statefulFilter=function(){return at},j.isReady=function(){return tt};var n=m.defer();n.promise.then(function(){tt=!0}),j.onReady=function(t){var e=m.defer();return angular.isFunction(t)&&e.promise.then(t),tt?e.resolve():n.promise.then(e.resolve),e.promise},j.getAvailableLanguageKeys=function(){return 0<Y.length?Y:null},j.getTranslationTable=function(t){return(t=t||j.use())&&q[t]?angular.copy(q[t]):null};var a=s.$on("$translateReady",function(){n.resolve(),a(),a=null}),r=s.$on("$translateChangeEnd",function(){n.resolve(),r(),r=null});if(D){if(angular.equals(q,{})&&j.use()&&j.use(j.use()),T&&T.length)for(var E=function(t){return lt(t.key,t.table),s.$emit("$translateChangeEnd",{language:t.key}),t},k=0,P=T.length;k<P;k++){var A=T[k];!X&&q[A]||(f[A]=u(A).then(E))}}else s.$emit("$translateReady",{language:j.use()});return j}]}function n(s,o){var t={};return t.setLocale=function(t){},t.getInterpolationIdentifier=function(){return"default"},t.useSanitizeValueStrategy=function(t){return o.useStrategy(t),this},t.interpolate=function(t,e,n,a,r){var i;return e=e||{},e=o.sanitize(e,"params",a,n),angular.isNumber(t)?i=""+t:angular.isString(t)?(i=s(t)(e),i=o.sanitize(i,"text",a,n)):i="",i},t}function a(S,L,j,w,C){var N=function(t){return angular.isString(t)?t.toLowerCase():t};return{restrict:"AE",scope:!0,priority:S.directivePriority(),compile:function(t,h){var d=h.translateValues?h.translateValues:void 0,v=h.translateInterpolation?h.translateInterpolation:void 0,m=h.translateSanitizeStrategy?h.translateSanitizeStrategy:void 0,$=t[0].outerHTML.match(/translate-value-+/i),y="^(.*)("+L.startSymbol()+".*"+L.endSymbol()+")(.*)",b="^(.*)"+L.startSymbol()+"(.*)"+L.endSymbol()+"(.*)";return function(r,l,u){r.interpolateParams={},r.preText="",r.postText="",r.translateNamespace=function t(e){return e.translateNamespace?e.translateNamespace:e.$parent?t(e.$parent):void 0}(r);var i={},s=function s(t){if(angular.isFunction(s._unwatchOld)&&(s._unwatchOld(),s._unwatchOld=void 0),angular.equals(t,"")||!angular.isDefined(t)){var e=function(){return this.toString().replace(/^\s+|\s+$/g,"")}.apply(l.text()),n=e.match(y);if(angular.isArray(n)){r.preText=n[1],r.postText=n[3],i.translate=L(n[2])(r.$parent);var a=e.match(b);angular.isArray(a)&&a[2]&&a[2].length&&(s._unwatchOld=r.$watch(a[2],function(t){i.translate=t,c()}))}else i.translate=e||void 0}else i.translate=t;c()};!function(t,e,n){if(e.translateValues&&angular.extend(t,w(e.translateValues)(r.$parent)),$)for(var a in n)Object.prototype.hasOwnProperty.call(e,a)&&"translateValue"===a.substr(0,14)&&"translateValues"!==a&&(t[N(a.substr(14,1))+a.substr(15)]=n[a])}(r.interpolateParams,u,h);var e=!0;for(var n in u.$observe("translate",function(t){void 0===t?s(""):""===t&&e||(i.translate=t,c()),e=!1}),u)u.hasOwnProperty(n)&&"translateAttr"===n.substr(0,13)&&13<n.length&&function(e){u.$observe(e,function(t){i[e]=t,c()})}(n);if(u.$observe("translateDefault",function(t){r.defaultText=t,c()}),m&&u.$observe("translateSanitizeStrategy",function(t){r.sanitizeStrategy=w(t)(r.$parent),c()}),d&&u.$observe("translateValues",function(t){t&&r.$parent.$watch(function(){angular.extend(r.interpolateParams,w(t)(r.$parent))})}),$){for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&"translateValue"===o.substr(0,14)&&"translateValues"!==o&&function(n){u.$observe(n,function(t){var e=N(n.substr(14,1))+n.substr(15);r.interpolateParams[e]=t})}(o)}var c=function(){for(var t in i)i.hasOwnProperty(t)&&void 0!==i[t]&&f(t,i[t],r,r.interpolateParams,r.defaultText,r.translateNamespace)},f=function(e,t,n,a,r,i){t?(i&&"."===t.charAt(0)&&(t=i+t),S(t,a,v,r,n.translateLanguage,n.sanitizeStrategy).then(function(t){g(t,n,!0,e)},function(t){g(t,n,!1,e)})):g(t,n,!1,e)},g=function(t,e,n,a){if(n||void 0!==e.defaultText&&(t=e.defaultText),"translate"===a){(n||!n&&!S.isKeepContent()&&void 0===u.translateKeepContent)&&l.empty().append(e.preText+t+e.postText);var r=S.isPostCompilingEnabled(),i=void 0!==h.translateCompile,s=i&&"false"!==h.translateCompile;(r&&!i||s)&&j(l.contents())(e)}else{var o=u.$attr[a];"data-"===o.substr(0,5)&&(o=o.substr(5)),o=o.substr(15),l.attr(o,t)}};(d||$||u.translateDefault)&&r.$watch("interpolateParams",c,!0),r.$on("translateLanguageChanged",c);var p=C.$on("$translateChangeSuccess",c);l.text().length?s(u.translate?u.translate:""):u.translate&&s(u.translate),c(),r.$on("$destroy",p)}}}}function r(u,c){return{restrict:"A",priority:u.directivePriority(),link:function(n,a,r){var i,s,o,l={},t=function(){angular.forEach(i,function(t,e){t&&(l[e]=!0,n.translateNamespace&&"."===t.charAt(0)&&(t=n.translateNamespace+t),u(t,s,r.translateInterpolation,void 0,n.translateLanguage,o).then(function(t){a.attr(e,t)},function(t){a.attr(e,t)}))}),angular.forEach(l,function(t,e){i[e]||(a.removeAttr(e),delete l[e])})};f(n,r.translateAttr,function(t){i=t},t),f(n,r.translateValues,function(t){s=t},t),f(n,r.translateSanitizeStrategy,function(t){o=t},t),r.translateValues&&n.$watch(r.translateValues,t,!0),n.$on("translateLanguageChanged",t);var e=c.$on("$translateChangeSuccess",t);t(),n.$on("$destroy",e)}}}function f(t,e,n,a){e&&("::"===e.substr(0,2)?e=e.substr(2):t.$watch(e,function(t){n(t),a()},!0),n(t.$eval(e)))}function i(s,o){return{compile:function(t){var i=function(t){t.addClass(s.cloakClassName())};return i(t),function(t,e,n){var a=function(t){t.removeClass(s.cloakClassName())}.bind(this,e),r=i.bind(this,e);n.translateCloak&&n.translateCloak.length?(n.$observe("translateCloak",function(t){s(t).then(a,r)}),o.$on("$translateChangeSuccess",function(){s(n.translateCloak).then(a,r)})):s.onReady(a)}}}}function s(){return{restrict:"A",scope:!0,compile:function(){return{pre:function(t,e,n){t.translateNamespace=function t(e){return e.translateNamespace?e.translateNamespace:e.$parent?t(e.$parent):void 0}(t),t.translateNamespace&&"."===n.translateNamespace.charAt(0)?t.translateNamespace+=n.translateNamespace:t.translateNamespace=n.translateNamespace}}}}}function o(){return{restrict:"A",scope:!0,compile:function(){return function(e,t,n){n.$observe("translateLanguage",function(t){e.translateLanguage=t}),e.$watch("translateLanguage",function(){e.$broadcast("translateLanguageChanged")})}}}}function l(i,s){var t=function(_t3,e,n,a){if(!angular.isObject(e)){var r=this||{__SCOPE_IS_NOT_AVAILABLE:"More info at https://github.com/angular/angular.js/commit/8863b9d04c722b278fa93c5d66ad1e578ad6eb1f"};e=i(e)(r)}return s.instant(_t3,e,n,a)};return s.statefulFilter()&&(t.$stateful=!0),t}function u(t){return t("translations")}return t.$inject=["$translate"],e.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],n.$inject=["$interpolate","$translateSanitization"],a.$inject=["$translate","$interpolate","$compile","$parse","$rootScope"],r.$inject=["$translate","$rootScope"],i.$inject=["$translate","$rootScope"],l.$inject=["$parse","$translate"],u.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(t),t.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",function(){var n,a,g,p=null,h=!1,d=!1;(g={sanitize:function(t,e){return"text"===e&&(t=i(t)),t},escape:function(t,e){return"text"===e&&(t=r(t)),t},sanitizeParameters:function(t,e){return"params"===e&&(t=o(t,i)),t},escapeParameters:function(t,e){return"params"===e&&(t=o(t,r)),t},sce:function(t,e,n){return"text"===e?t=s(t):"params"===e&&"filter"!==n&&(t=o(t,r)),t},sceParameters:function(t,e){return"params"===e&&(t=o(t,s)),t}}).escaped=g.escapeParameters,this.addStrategy=function(t,e){return g[t]=e,this},this.removeStrategy=function(t){return delete g[t],this},this.useStrategy=function(t){return h=!0,p=t,this},this.$get=["$injector","$log",function(u,c){var e,f={};return u.has("$sanitize")&&(n=u.get("$sanitize")),u.has("$sce")&&(a=u.get("$sce")),{useStrategy:(e=this,function(t){e.useStrategy(t)}),sanitize:function(t,e,n,a){if(p||h||d||(c.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),d=!0),n||null===n||(n=p),!n)return t;a||(a="service");var r,i,s,o,l=angular.isArray(n)?n:[n];return r=t,i=e,s=a,o=l,angular.forEach(o,function(e){if(angular.isFunction(e))r=e(r,i,s);else if(angular.isFunction(g[e]))r=g[e](r,i,s);else{if(!angular.isString(g[e]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+e+"'");if(!f[g[e]])try{f[g[e]]=u.get(g[e])}catch(t){throw f[g[e]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+e+"'")}r=f[g[e]](r,i,s)}}),r}}}];var r=function(t){var e=angular.element("<div></div>");return e.text(t),e.html()},i=function(t){if(!n)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return n(t)},s=function(t){if(!a)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sce service.");return a.trustAsHtml(t)},o=function o(t,n,a){if(angular.isDate(t))return t;if(angular.isObject(t)){var r=angular.isArray(t)?[]:{};if(a){if(-1<a.indexOf(t))throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else a=[];return a.push(t),angular.forEach(t,function(t,e){angular.isFunction(t)||(r[e]=o(t,n,a))}),a.splice(-1,1),r}return angular.isNumber(t)?t:!0===t||!1===t?t:angular.isUndefined(t)||null===t?t:n(t)}}),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",e),e.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",n),n.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",a),a.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateAttr",r),r.displayName="translateAttrDirective",angular.module("pascalprecht.translate").directive("translateCloak",i),i.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",s),s.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",o),o.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",l),l.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",u),u.displayName="$translationCache","pascalprecht.translate"}),function(e,i){"function"==typeof define&&define.amd?define([],function(){return i()}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=i():i()}(0,function(){function e(n,a){return function(r){if(!r||!(angular.isArray(r.files)||angular.isString(r.prefix)&&angular.isString(r.suffix)))throw new Error("Couldn't load static files, no files and prefix or suffix specified!");r.files||(r.files=[{prefix:r.prefix,suffix:r.suffix}]);for(var i=[],t=r.files.length,f=0;f<t;f++)i.push(function(_e4){if(!_e4||!angular.isString(_e4.prefix)||!angular.isString(_e4.suffix))throw new Error("Couldn't load static file, no prefix or suffix specified!");var i=[_e4.prefix,r.key,_e4.suffix].join("");return angular.isObject(r.fileMap)&&r.fileMap[i]&&(i=r.fileMap[i]),a(angular.extend({url:i,method:"GET"},r.$http)).then(function(e){return e.data},function(){return n.reject(r.key)})}({prefix:r.files[f].prefix,key:r.key,suffix:r.files[f].suffix}));return n.all(i).then(function(e){for(var i=e.length,r={},t=0;t<i;t++)for(var f in e[t])r[f]=e[t][f];return r})}}return e.$inject=["$q","$http"],angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",e),e.displayName="$translateStaticFilesLoader","pascalprecht.translate"}),function(e,t){"function"==typeof define&&define.amd?define([],function(){return t()}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=t():t()}(0,function(){function e(r,n){return function(e){if(!e||!e.url)throw new Error("Couldn't use urlLoader since no url is given!");var t={};return t[e.queryParameter||"lang"]=e.key,n(angular.extend({url:e.url,params:t,method:"GET"},e.$http)).then(function(e){return e.data},function(){return r.reject(e.key)})}}return e.$inject=["$q","$http"],angular.module("pascalprecht.translate").factory("$translateUrlLoader",e),e.displayName="$translateUrlLoader","pascalprecht.translate"}),function(){function clickOutside($document,$parse,$timeout){return{restrict:"A",link:function($scope,elem,attr){$timeout(function(){function eventHandler(e){var i,element,r,id,classNames,l;if(!angular.element(elem).hasClass("ng-hide")&&e&&e.target){for(element=e.target;element;element=element.parentNode){if(element===elem[0])return;if(id=element.id,classNames=element.className,l=classList.length,classNames&&void 0!==classNames.baseVal&&(classNames=classNames.baseVal),classNames||id)for(i=0;i<l;i++)if(r=new RegExp("\\b"+classList[i]+"\\b"),void 0!==id&&id===classList[i]||classNames&&r.test(classNames))return}$timeout(function(){(fn=$parse(attr.clickOutside))($scope,{event:e})})}}function _hasTouch(){return"ontouchstart"in window||navigator.maxTouchPoints}var fn,classList=void 0!==attr.outsideIfNot?attr.outsideIfNot.split(/[ ,]+/):[];_hasTouch()&&$document.on("touchstart",eventHandler),$document.on("click",eventHandler),$scope.$on("$destroy",function(){_hasTouch()&&$document.off("touchstart",eventHandler),$document.off("click",eventHandler)})})}}}angular.module("angular-click-outside",[]).directive("clickOutside",["$document","$parse","$timeout",clickOutside])}(),function(){var b=angular.module("smoothScroll",[]),a=function(j,n){n=n||{};var h=n.duration||800,i=n.offset||0,l=n.easing||"easeInOutQuart",e=n.callbackBefore||function(){},g=n.callbackAfter||function(){},d=document.getElementById(n.containerId)||null,c=void 0!=d&&null!=d,f=function(){return c?d.scrollTop:window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop},m=function(o,p){switch(o){case"easeInQuad":return p*p;case"easeOutQuad":return p*(2-p);case"easeInOutQuad":return p<.5?2*p*p:(4-2*p)*p-1;case"easeInCubic":return p*p*p;case"easeOutCubic":return--p*p*p+1;case"easeInOutCubic":return p<.5?4*p*p*p:(p-1)*(2*p-2)*(2*p-2)+1;case"easeInQuart":return p*p*p*p;case"easeOutQuart":return 1- --p*p*p*p;case"easeInOutQuart":return p<.5?8*p*p*p*p:1-8*--p*p*p*p;case"easeInQuint":return p*p*p*p*p;case"easeOutQuint":return 1+--p*p*p*p*p;case"easeInOutQuint":return p<.5?16*p*p*p*p*p:1+16*--p*p*p*p*p;default:return p}},k=function(p){var o=0;if(p.offsetParent)do{o+=p.offsetTop,p=p.offsetParent}while(p);return o=Math.max(o-i,0)};setTimeout(function(){var y,t,z,s,v=null,x=f(),w=k(j),u=0,q=w-x,p=function(){v=f(),s=window.innerHeight+v,z=c?d.scrollHeight:document.body.scrollheight,(t==w||v==w||s>=z)&&(clearInterval(o),g(j))},r=function(){u+=16,y=u/h,y=y>1?1:y,t=x+q*m(l,y),c?d.scrollTop=t:window.scrollTo(0,t),p()};e(j);var o=setInterval(r,16)},0)};b.factory("smoothScroll",function(){return a}),b.directive("smoothScroll",["smoothScroll",function(c){return{restrict:"A",scope:{callbackBefore:"&",callbackAfter:"&"},link:function(f,e,d){void 0!==d.scrollIf&&"true"!==d.scrollIf||setTimeout(function(){var g=function(i){if(d.callbackBefore){var j=f.callbackBefore({element:i});"function"==typeof j&&j(i)}},h=function(i){if(d.callbackAfter){var j=f.callbackAfter({element:i});"function"==typeof j&&j(i)}};c(e[0],{duration:d.duration,offset:d.offset,easing:d.easing,callbackBefore:g,callbackAfter:h,containerId:d.containerId})},0)}}}]),b.directive("scrollTo",["smoothScroll",function(c){return{restrict:"A",scope:{callbackBefore:"&",callbackAfter:"&"},link:function(f,e,d){var g;e.on("click",function(j){if(j.preventDefault(),g=document.getElementById(d.scrollTo)){var h=function(k){if(d.callbackBefore){var l=f.callbackBefore({element:k});"function"==typeof l&&l(k)}},i=function(k){if(d.callbackAfter){var l=f.callbackAfter({element:k});"function"==typeof l&&l(k)}};return c(g,{duration:d.duration,offset:d.offset,easing:d.easing,callbackBefore:h,callbackAfter:i,containerId:d.containerId}),!1}})}}}])}(),function(){angular.module("ng-slide-down",[]).directive("ngSlideDown",["$timeout",function(a){var b,c;return b=function(a,_b2){return void 0!==_b2.lazyRender?"<div ng-if='lazyRender' ng-transclude></div>":"<div ng-transclude></div>"},c=function(b,_c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q;return h=d.duration||1,q=d.timingFunction||"ease-in-out",i=_c.scope(),j=d.emitOnClose,n=d.onClose,m=void 0!==d.lazyRender,g=null,o=null,k=function(a){var b,d,e,f,g;for(e=0,d=_c.children(),f=0,g=d.length;g>f;f++)b=d[f],e+=b.clientHeight;return e+"px"},p=function(){return g&&a.cancel(g),m&&(b.lazyRender=!0),a(function(){return o&&a.cancel(o),_c.css({overflow:"hidden",transitionProperty:"height",transitionDuration:h+"s",transitionTimingFunction:q,height:k()}),o=a(function(){return _c.css({overflow:"visible",transition:"none",height:"auto"})},1e3*h)})},l=function(){return o&&a.cancel(o),_c.css({overflow:"hidden",transitionProperty:"height",transitionDuration:h+"s",transitionTimingFunction:q,height:"0px"}),j||n||m?g=a(function(){return j&&b.$emit(j,{}),n&&i.$eval(n),m?b.lazyRender=!1:void 0},1e3*h):void 0},b.$watch("expanded",function(b,d){return b?a(p):(null!=b&&(_c.css({height:k()}),_c[0].clientHeight),a(l))})},{restrict:"A",scope:{expanded:"=ngSlideDown"},transclude:!0,link:c,template:function(a,c){return b(a,c)}}}])}.call(void 0),function(t,e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=e(require("cross-fetch")):"function"==typeof define&&define.amd?define(["cross-fetch"],e):(t=t||self).PrismicJS=e(t.fetch)}(void 0,function(t){function r(t,r){function n(){this.constructor=t}_e5(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}function P(t){if("string"==typeof t)return'"'+t+'"';if("number"==typeof t)return t.toString();if(t instanceof Date)return t.getTime().toString();if(Array.isArray(t))return"["+t.map(function(t){return P(t)}).join(",")+"]";if("boolean"==typeof t)return t.toString();throw new Error("Unable to encode "+t+" of type "+_typeof(t))}function J(t,e,r){return{token:t,documentId:e,resolve:function(n,o,i){return e&&r?r(e,{ref:t}).then(function(t){if(t){var e=n&&n(t)||t.url||o;return i&&i(null,e),e}return i&&i(null,o),o}):Promise.resolve(o)}}}function G(t){this.size=0,this.limit=t,this._keymap={}}function rt(t,e){return et.getApi(t,e)}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var _e5=function(t,r){return(_e5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,r)},_n=function(){return(_n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=function(){function t(t){this.data={},this.data=t}return t.prototype.id=function(){return this.data.id},t.prototype.ref=function(){return this.data.ref},t.prototype.label=function(){return this.data.label},t}(),i=function(){function t(t){this.data={},this.data=t,this.variations=(t.variations||[]).map(function(t){return new o(t)})}return t.prototype.id=function(){return this.data.id},t.prototype.googleId=function(){return this.data.googleId},t.prototype.name=function(){return this.data.name},t}(),u=function(){function t(t){t&&(this.drafts=(t.drafts||[]).map(function(t){return new i(t)}),this.running=(t.running||[]).map(function(t){return new i(t)}))}return t.prototype.current=function(){return this.running.length>0?this.running[0]:null},t.prototype.refFromCookie=function(t){if(!t||""===t.trim())return null;var e=t.trim().split(" ");if(e.length<2)return null;var r=e[0],n=parseInt(e[1],10),o=this.running.filter(function(t){return t.googleId()===r&&t.variations.length>n})[0];return o?o.variations[n].ref():null},t}(),s=function(){function t(t,e){for(var r in this.httpClient=e,this.form=t,this.data={},t.fields)t.fields[r].default&&(this.data[r]=[t.fields[r].default])}return t.prototype.set=function(t,e){var r=this.form.fields[t];if(!r)throw new Error("Unknown field "+t);var n=""===e||void 0===e?null:e,o=this.data[t]||[];o=r.multiple?n?o.concat([n]):o:n?[n]:o,this.data[t]=o},t.prototype.url=function(){var t=this.form.action;if(this.data){var e=t.indexOf("?")>-1?"&":"?";for(var r in this.data)if(Object.prototype.hasOwnProperty.call(this.data,r)){var n=this.data[r];if(n)for(var o=0;o<n.length;o++)t+=e+r+"="+encodeURIComponent(n[o]),e="&"}}return t},t.prototype.submit=function(t){return this.httpClient.cachedRequest(this.url()).then(function(e){return t&&t(null,e),e}).catch(function(e){throw t&&t(e),e})},t}(),a=function(t){function e(e,r){return t.call(this,e,r)||this}return r(e,t),e.prototype.set=function(e,r){return t.prototype.set.call(this,e,r),this},e.prototype.ref=function(t){return this.set("ref",t)},e.prototype.query=function(t){if("string"==typeof t)return this.query([t]);if(Array.isArray(t))return this.set("q","["+t.join("")+"]");throw new Error("Invalid query : "+t)},e.prototype.pageSize=function(t){return this.set("pageSize",t)},e.prototype.graphQuery=function(t){return this.set("graphQuery",t)},e.prototype.lang=function(t){return this.set("lang",t)},e.prototype.page=function(t){return this.set("page",t)},e.prototype.after=function(t){return this.set("after",t)},e.prototype.orderings=function(t){return t?this.set("orderings","["+t.join(",")+"]"):this},e}(s),f=function(t){function e(e,r){return t.call(this,e,r)||this}return r(e,t),e}(s),U={near:function(t,e,r,n){return"[geopoint.near("+t+", "+e+", "+r+", "+n+")]"}},z={before:function(t,e){return"[date.before("+t+", "+P(e)+")]"},after:function(t,e){return"[date.after("+t+", "+P(e)+")]"},between:function(t,e,r){return"[date.between("+t+", "+P(e)+", "+P(r)+")]"},dayOfMonth:function(t,e){return"[date.day-of-month("+t+", "+e+")]"},dayOfMonthAfter:function(t,e){return"[date.day-of-month-after("+t+", "+e+")]"},dayOfMonthBefore:function(t,e){return"[date.day-of-month-before("+t+", "+e+")]"},dayOfWeek:function(t,e){return"[date.day-of-week("+t+", "+P(e)+")]"},dayOfWeekAfter:function(t,e){return"[date.day-of-week-after("+t+", "+P(e)+")]"},dayOfWeekBefore:function(t,e){return"[date.day-of-week-before("+t+", "+P(e)+")]"},month:function(t,e){return"[date.month("+t+", "+P(e)+")]"},monthBefore:function(t,e){return"[date.month-before("+t+", "+P(e)+")]"},monthAfter:function(t,e){return"[date.month-after("+t+", "+P(e)+")]"},year:function(t,e){return"[date.year("+t+", "+e+")]"},hour:function(t,e){return"[date.hour("+t+", "+e+")]"},hourBefore:function(t,e){return"[date.hour-before("+t+", "+e+")]"},hourAfter:function(t,e){return"[date.hour-after("+t+", "+e+")]"}},W={gt:function(t,e){return"[number.gt("+t+", "+e+")]"},lt:function(t,e){return"[number.lt("+t+", "+e+")]"},inRange:function(t,e,r){return"[number.inRange("+t+", "+e+", "+r+")]"}},Q={at:function(t,e){return"[at("+t+", "+P(e)+")]"},not:function(t,e){return"[not("+t+", "+P(e)+")]"},missing:function(t){return"[missing("+t+")]"},has:function(t){return"[has("+t+")]"},any:function(t,e){return"[any("+t+", "+P(e)+")]"},in:function(t,e){return"[in("+t+", "+P(e)+")]"},fulltext:function(t,e){return"[fulltext("+t+", "+P(e)+")]"},similar:function(t,e){return'[similar("'+t+'", '+e+")]"},date:z,dateBefore:z.before,dateAfter:z.after,dateBetween:z.between,dayOfMonth:z.dayOfMonth,dayOfMonthAfter:z.dayOfMonthAfter,dayOfMonthBefore:z.dayOfMonthBefore,dayOfWeek:z.dayOfWeek,dayOfWeekAfter:z.dayOfWeekAfter,dayOfWeekBefore:z.dayOfWeekBefore,month:z.month,monthBefore:z.monthBefore,monthAfter:z.monthAfter,year:z.year,hour:z.hour,hourBefore:z.hourBefore,hourAfter:z.hourAfter,number:W,gt:W.gt,lt:W.lt,inRange:W.inRange,near:U.near,geopoint:U},L=decodeURIComponent,H={parse:function(t,e){if("string"!=typeof t)throw new TypeError("argument str must be a string");var r={},n=e||{},i=n.decode||L;return t.split(/; */).forEach(function(t){var e=t.indexOf("=");if(!(e<0)){var n=t.substr(0,e).trim(),o=t.substr(++e,t.length).trim();'"'==o[0]&&(o=o.slice(1,-1)),null==r[n]&&(r[n]=function(t,e){try{return e(t)}catch(e){return t}}(o,i))}}),r}},N="io.prismic.preview",K="io.prismic.experiment",Y=function(){function t(t,e,r){this.data=t,this.masterRef=t.refs.filter(function(t){return t.isMasterRef})[0],this.experiments=new u(t.experiments),this.bookmarks=t.bookmarks,this.httpClient=e,this.options=r,this.refs=t.refs,this.tags=t.tags,this.types=t.types,this.languages=t.languages}return t.prototype.form=function(t){var e=this.data.forms[t];return e?"tags"===t?new f(e,this.httpClient):new a(e,this.httpClient):null},t.prototype.searchForm=function(t){var e=this.form(t);return e instanceof a?e:null},t.prototype.tagsForm=function(){var t=this.form("tags");if(!t)throw new Error("Missing tags form");if(t instanceof f)return t;throw new Error("Unexpected error: tags form is not TagsForm")},t.prototype.everything=function(){var t=this.searchForm("everything");if(!t)throw new Error("Missing everything form");return t},t.prototype.master=function(){return this.masterRef.ref},t.prototype.ref=function(t){var e=this.data.refs.filter(function(e){return e.label===t})[0];return e?e.ref:null},t.prototype.currentExperiment=function(){return this.experiments.current()},t.prototype.query=function(t,e,r){void 0===r&&(r=function(){});var n="function"==typeof e?{options:{},callback:e}:{options:e||{},callback:r},o=n.options,i=n.callback,u=this.everything();for(var s in o)u=u.set(s,o[s]);if(!o.ref){var a="";this.options.req?a=this.options.req.headers.cookie||"":"undefined"!=typeof window&&window.document&&(a=window.document.cookie||"");var f=H.parse(a),h=f[N],p=this.experiments.refFromCookie(f[K]);u=u.ref(h||p||this.masterRef.ref)}return t&&u.query(t),u.submit(i)},t.prototype.queryFirst=function(t,e,r){var n="function"==typeof e?{options:{},callback:e}:{options:e||{},callback:r||function(){}},o=n.options,i=n.callback;return o.page=1,o.pageSize=1,this.query(t,o).then(function(t){var e=t&&t.results&&t.results[0];return i(null,e),e}).catch(function(t){throw i(t),t})},t.prototype.getByID=function(t,e,r){var o=e?_n({},e):{};return o.lang||(o.lang="*"),this.queryFirst(Q.at("document.id",t),o,r)},t.prototype.getByIDs=function(t,e,r){var o=e?_n({},e):{};return o.lang||(o.lang="*"),this.query(Q.in("document.id",t),o,r)},t.prototype.getByUID=function(t,e,r,o){var i=r?_n({},r):{};if("*"===i.lang)throw new Error("FORBIDDEN. You can't use getByUID with *, use the predicates instead.");return i.page||(i.page=1),this.queryFirst(Q.at("my."+t+".uid",e),i,o)},t.prototype.getSingle=function(t,e,r){var o=e?_n({},e):{};return this.queryFirst(Q.at("document.type",t),o,r)},t.prototype.getBookmark=function(t,e,r){var n=this.data.bookmarks[t];return n?this.getByID(n,e,r):Promise.reject("Error retrieving bookmarked id")},t.prototype.getTags=function(t){return this.tagsForm().submit(t)},t.prototype.getPreviewResolver=function(t,e){return J(t,e,this.getByID.bind(this))},t}()
;G.prototype.put=function(t,e){var r={key:t,value:e};if(this._keymap[t]=r,this.tail?(this.tail.newer=r,r.older=this.tail):this.head=r,this.tail=r,this.size===this.limit)return this.shift();this.size++},G.prototype.shift=function(){var t=this.head;return t&&(this.head.newer?(this.head=this.head.newer,this.head.older=void 0):this.head=void 0,t.newer=t.older=void 0,delete this._keymap[t.key]),console.log("purging ",t.key),t},G.prototype.get=function(t,e){var r=this._keymap[t];if(void 0!==r)return r===this.tail||(r.newer&&(r===this.head&&(this.head=r.newer),r.newer.older=r.older),r.older&&(r.older.newer=r.newer),r.newer=void 0,r.older=this.tail,this.tail&&(this.tail.newer=r),this.tail=r),e?r:r.value},G.prototype.find=function(t){return this._keymap[t]},G.prototype.set=function(t,e){var r,n=this.get(t,!0);return n?(r=n.value,n.value=e):(r=this.put(t,e))&&(r=r.value),r},G.prototype.remove=function(t){var e=this._keymap[t];if(e)return delete this._keymap[e.key],e.newer&&e.older?(e.older.newer=e.newer,e.newer.older=e.older):e.newer?(e.newer.older=void 0,this.head=e.newer):e.older?(e.older.newer=void 0,this.tail=e.older):this.head=this.tail=void 0,this.size--,e.value},G.prototype.removeAll=function(){this.head=this.tail=void 0,this.size=0,this._keymap={}},"function"==typeof Object.keys?G.prototype.keys=function(){return Object.keys(this._keymap)}:G.prototype.keys=function(){var t=[];for(var e in this._keymap)t.push(e);return t},G.prototype.forEach=function(t,e,r){var n;if(!0===e?(r=!0,e=void 0):"object"!=_typeof(e)&&(e=this),r)for(n=this.tail;n;)t.call(e,n.key,n.value,this),n=n.older;else for(n=this.head;n;)t.call(e,n.key,n.value,this),n=n.newer},G.prototype.toString=function(){for(var t="",e=this.head;e;)t+=String(e.key)+":"+e.value,(e=e.newer)&&(t+=" < ");return t};var V=function(){function t(t){void 0===t&&(t=1e3),this.lru=function(t){return new G(t)}(t)}return t.prototype.isExpired=function(t){var e=this.lru.get(t,!1);return!!e&&0!==e.expiredIn&&e.expiredIn<Date.now()},t.prototype.get=function(t,e){var r=this.lru.get(t,!1);r&&!this.isExpired(t)?e(null,r.data):e&&e(null)},t.prototype.set=function(t,e,r,n){this.lru.remove(t),this.lru.put(t,{data:e,expiredIn:r?Date.now()+1e3*r:0}),n&&n(null)},t.prototype.remove=function(t,e){this.lru.remove(t),e&&e(null)},t.prototype.clear=function(t){this.lru.removeAll(),t&&t(null)},t}(),X=function(){function e(t){this.options=t||{}}return e.prototype.request=function(e,r){!function(e,r,n){var o,i={headers:{Accept:"application/json"}};r&&r.proxyAgent&&(i.agent=r.proxyAgent);var u=t(e,i);(r.timeoutInMs?Promise.race([u,new Promise(function(t,n){o=setTimeout(function(){return n(new Error(e+" response timeout"))},r.timeoutInMs)})]):u).then(function(t){return clearTimeout(o),~~(t.status/100!=2)?t.text().then(function(){var r=new Error("Unexpected status code ["+t.status+"] on URL "+e);throw r.status=t.status,r}):t.json().then(function(e){var r=t.headers.get("cache-control"),o=r?/max-age=(\d+)/.exec(r):null,i=o?parseInt(o[1],10):void 0;n(null,e,t,i)})}).catch(function(t){clearTimeout(o),n(t)})}(e,this.options,r)},e}(),Z=function(){function t(t,e,r,n){this.requestHandler=t||new X({proxyAgent:r,timeoutInMs:n}),this.cache=e||new V}return t.prototype.request=function(t,e){this.requestHandler.request(t,function(t,r,n,o){t?e&&e(t,null,n,o):r&&e&&e(null,r,n,o)})},t.prototype.cachedRequest=function(t,e){var r=this,n=e||{};return new Promise(function(e,o){var i,u;i=function(t,r){t&&o(t),r&&e(r)},u=n.cacheKey||t,r.cache.get(u,function(e,o){e||o?i(e,o):r.request(t,function(t,e,o,s){if(t)i(t,null);else{var a=s||n.ttl;a&&r.cache.set(u,e,a,i),i(null,e)}})})})},t}(),$=function(){function t(t,e){this.options=e||{},this.url=t;var r=[this.options.accessToken&&"access_token="+this.options.accessToken,this.options.routes&&"routes="+encodeURIComponent(JSON.stringify(this.options.routes))].filter(Boolean);r.length>0&&(this.url+=function(t){return t.indexOf("?")>-1?"&":"?"}(t)+r.join("&")),this.apiDataTTL=this.options.apiDataTTL||5,this.httpClient=new Z(this.options.requestHandler,this.options.apiCache,this.options.proxyAgent,this.options.timeoutInMs)}return t.prototype.get=function(t){var e=this;return this.httpClient.cachedRequest(this.url,{ttl:this.apiDataTTL}).then(function(r){var n=new Y(r,e.httpClient,e.options);return t&&t(null,n),n}).catch(function(e){throw t&&t(e),e})},t}(),tt=function(){function t(t,e){this.id=t,this.api=e,this.fields={}}return t.prototype.set=function(t,e){return this.fields[t]=e,this},t.prototype.ref=function(t){return this.set("ref",t)},t.prototype.query=function(t){return this.set("q",t)},t.prototype.pageSize=function(t){return this.set("pageSize",t)},t.prototype.graphQuery=function(t){return this.set("graphQuery",t)},t.prototype.lang=function(t){return this.set("lang",t)},t.prototype.page=function(t){return this.set("page",t)},t.prototype.after=function(t){return this.set("after",t)},t.prototype.orderings=function(t){return this.set("orderings",t)},t.prototype.url=function(){var e=this;return this.api.get().then(function(r){return t.toSearchForm(e,r).url()})},t.prototype.submit=function(e){var r=this;return this.api.get().then(function(n){return t.toSearchForm(r,n).submit(e)})},t.toSearchForm=function(t,e){var r=e.searchForm(t.id);if(r)return Object.keys(t.fields).reduce(function(e,r){var n=t.fields[r];return"q"===r?e.query(n):"pageSize"===r?e.pageSize(n):"graphQuery"===r?e.graphQuery(n):"lang"===r?e.lang(n):"page"===r?e.page(n):"after"===r?e.after(n):"orderings"===r?e.orderings(n):e.set(r,n)},r);throw new Error("Unable to access to form "+t.id)},t}(),et=function(){function t(t,e){this.api=new $(t,e)}return t.prototype.getApi=function(){return this.api.get()},t.prototype.everything=function(){return this.form("everything")},t.prototype.form=function(t){return new tt(t,this.api)},t.prototype.query=function(t,e,r){return this.getApi().then(function(n){return n.query(t,e,r)})},t.prototype.queryFirst=function(t,e,r){return this.getApi().then(function(n){return n.queryFirst(t,e,r)})},t.prototype.getByID=function(t,e,r){return this.getApi().then(function(n){return n.getByID(t,e,r)})},t.prototype.getByIDs=function(t,e,r){return this.getApi().then(function(n){return n.getByIDs(t,e,r)})},t.prototype.getByUID=function(t,e,r,n){return this.getApi().then(function(o){return o.getByUID(t,e,r,n)})},t.prototype.getSingle=function(t,e,r){return this.getApi().then(function(n){return n.getSingle(t,e,r)})},t.prototype.getBookmark=function(t,e,r){return this.getApi().then(function(n){return n.getBookmark(t,e,r)})},t.prototype.getTags=function(){return this.getApi().then(function(t){return t.getTags()})},t.prototype.getPreviewResolver=function(t,e){var r=this;return J(t,e,function(t,e){return r.getApi().then(function(r){return r.getByID(t,e)})})},t.getApi=function(t,e){return new $(t,e).get()},t}();return{experimentCookie:K,previewCookie:N,Predicates:Q,predicates:Q,Experiments:u,Api:$,client:function(t,e){return new et(t,e)},getApi:rt,api:function(t,e){return rt(t,e)}}}),function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?module.exports=t():"function"==typeof define&&define.amd?define("PrismicDOM",[],t):"object"==("undefined"==typeof exports?"undefined":_typeof(exports))?exports.PrismicDOM=t():e.PrismicDOM=t()}("undefined"!=typeof self?self:void 0,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==_typeof(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==_typeof(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){var r=n(2),o=n(3);e.exports={Link:r,Date:o}},function(e,t,n){e.exports={url:function(e,t){var n=e&&e.value?e.value.document:e;if(e&&[e.type,e.link_type,e._linkType,e.linkType].some(function(e){return e&&["Document","Link.Document","Link.document"].includes(e)})&&t&&"function"==typeof t){var r=t(n);if(r)return r}return n&&n.url?n.url:""}}},function(e,t){e.exports=function(e){if(!e)return null;var t=24==e.length?"".concat(e.substring(0,22),":").concat(e.substring(22,24)):e;return new Date(t)}}])},function(e,t,n){e.exports=n(2)},function(e,t,n){var r=n(0),o=n(3),i=r.Date,u=r.Link;e.exports={Date:i,Link:u,RichText:o}},function(e,t,n){function c(e,t,n,r,c){switch(t){case u.heading1:return l("h1",n,c);case u.heading2:return l("h2",n,c);case u.heading3:return l("h3",n,c);case u.heading4:return l("h4",n,c);case u.heading5:return l("h5",n,c);case u.heading6:return l("h6",n,c);case u.paragraph:return l("p",n,c);case u.preformatted:return function(e){return"<pre".concat(a(e),">").concat(i(e.text),"</pre>")}(n);case u.strong:return l("strong",n,c);case u.em:return l("em",n,c);case u.listItem:case u.oListItem:return l("li",n,c);case u.list:return l("ul",n,c);case u.oList:return l("ol",n,c);case u.image:return function(e,t){var n=t.linkTo?o.url(t.linkTo,e):null,r=t.linkTo&&t.linkTo.target?'target="'.concat(t.linkTo.target,'" rel="noopener"'):"",u=[t.label||"","block-img"],c='<img src="'.concat(t.url,'" alt="').concat(t.alt?i(t.alt):"",'" copyright="').concat(t.copyright?i(t.copyright):"",'" />');return'\n    <p class="'.concat(u.join(" "),'">\n      ').concat(n?"<a ".concat(r,' href="').concat(n,'">').concat(c,"</a>"):c,"\n    </p>\n  ")}(e,n);case u.embed:return function(e){return'\n    <div data-oembed="'.concat(e.oembed.embed_url,'"\n      data-oembed-type="').concat(e.oembed.type,'"\n      data-oembed-provider="').concat(e.oembed.provider_name,'"\n      ').concat(a(e),">\n\n      ").concat(e.oembed.html,"\n    </div>\n  ")}(n);case u.hyperlink:return function(e,t,n){var r=t.data.target?'target="'.concat(t.data.target,'" rel="noopener"'):"",u=i(o.url(t.data,e));return"<a ".concat(r,' href="').concat(u,'">').concat(n.join(""),"</a>")}(e,n,c);case u.label:return function(e,t){return"<span ".concat(a(e.data),">").concat(t.join(""),"</span>")}(n,c);case u.span:return function(e){return e?i(e).replace(/\n/g,"<br />"):""}(r);default:return""}}function a(e){return e.label?' class="'.concat(e.label,'"'):""}function l(e,t,n){return"<".concat(e).concat(a(t),">").concat(n.join(""),"</").concat(e,">")}var r=n(4),o=n(0).Link,i=n(5),u=r.Elements;e.exports={asText:function(e,t){return r.asText(e,t)},asHtml:function(e,t,n){return r.serialize(e,c.bind(null,t),n).join("")},Elements:u}},function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==_typeof(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r;Object.defineProperty(t,"__esModule",{value:!0}),t.PRIORITIES=t.NODE_TYPES=void 0;var i={heading1:"heading1",heading2:"heading2",heading3:"heading3",heading4:"heading4",heading5:"heading5",heading6:"heading6",paragraph:"paragraph",preformatted:"preformatted",strong:"strong",em:"em",listItem:"list-item",oListItem:"o-list-item",list:"group-list-item",oList:"group-o-list-item",image:"image",embed:"embed",hyperlink:"hyperlink",label:"label",span:"span"};t.NODE_TYPES=i;var u=(o(r={},i.heading1,4),o(r,i.heading2,4),o(r,i.heading3,4),o(r,i.heading4,4),o(r,i.heading5,4),o(r,i.heading6,4),o(r,i.paragraph,3),o(r,i.preformatted,5),o(r,i.strong,6),o(r,i.em,6),o(r,i.oList,1),o(r,i.list,1),o(r,i.listItem,1),o(r,i.oListItem,1),o(r,i.image,1),o(r,i.embed,1),o(r,i.hyperlink,3),o(r,i.label,4),o(r,i.span,7),r);t.PRIORITIES=u},function(e,t,n){function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){if(0===e.length)throw new Error("Unable to elect node on empty list");var t=function(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e.sort(function(e,t){if(e.isParentOf(t))return-1;if(t.isParentOf(e))return 1;var n=c.PRIORITIES[e.type]-c.PRIORITIES[t.type];return 0===n?e.text.length-t.text.length:n}));return{elected:t[0],others:t.slice(1)}}function f(e,t,n){if(t.length>0)return function(e,t,n){return t.reduce(function(r,o,u){var c=[],a=0===u&&o.start>n.lower,l=u===t.length-1&&n.upper>o.end;if(a){var s=new i.TextNode(n.lower,o.start,e.slice(n.lower,o.start));c=c.concat(s)}else{var f=t[u-1];if(f&&o.start>f.end){var d=e.slice(f.end,o.start),p=new i.TextNode(f.end,o.start,d);c=c.concat(p)}}if(c=c.concat(o),l){var y=new i.TextNode(o.end,n.upper,e.slice(o.end,n.upper));c=c.concat(y)}return r.concat(c)},[])}(e,d(e,t),n);var r=e.slice(n.lower,n.upper);return[new i.TextNode(n.lower,n.upper,r)]}function d(e,t){var n=function(e){return function(e,t){return t.reduce(function(e,t){var n=(0,o.last)(e);if(n){if(n.some(function(e){return e.isParentOf(t)}))return(0,o.init)(e).concat([n.concat(t)]);var r=(0,o.last)(n);return r&&function(e,t){return e.end>=t.start}(r,t)?(0,o.init)(e).concat([n.concat(t)]):e.concat([[t]])}return[[t]]},[])}(0,(0,o.sort)(e,function(e,t){return n=t,e.start-n.start||function(e,t){return e.end-t.end}(e,t);var n}))}((0,o.sort)(t,function(e,t){return e.start-t.start})).map(s),r=(0,o.flatten)(n.map(function(t){return function(e,t){var n=t.others.reduce(function(n,r){var o=n.inner,u=n.outer,c=function(e,t,n){return n.start<t.start?{inner:i.SpanNode.slice(n,t.start,n.end,e),outer:i.SpanNode.slice(n,n.start,t.start,e)}:n.end>t.end?{inner:i.SpanNode.slice(n,n.start,t.end,e),outer:i.SpanNode.slice(n,t.end,n.end,e)}:{inner:n}}(e,t.elected,r);return{inner:o.concat(c.inner),outer:c.outer?u.concat(c.outer):u}},{inner:[],outer:[]}),r=n.inner,o=n.outer;return[t.elected.setChildren(f(e,r,t.elected.boundaries()))].concat(d(e,o))}(e,t)}));return(0,o.sort)(r,function(e,t){return e.start-t.start})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=n(7),i=n(2),u=n(8),c=n(0),a=(r=n(3))&&r.__esModule?r:{default:r},p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"fromRichText",value:function(e){return{key:(0,a.default)(),children:e.reduce(function(e,t,n){if(u.RichTextBlock.isEmbedBlock(t.type)||u.RichTextBlock.isImageBlock(t.type))return e.concat(new i.BlockNode(t.type,t));var r=function(e){var t=(e.spans||[]).map(function(t){var n=e.text.slice(t.start,t.end);return new i.SpanNode(t.start,t.end,t.type,n,[],t)}),n={lower:0,upper:e.text.length};return f(e.text,t,n)}(t),c=e[e.length-1];if(u.RichTextBlock.isListItem(t.type)&&c&&c instanceof i.ListBlockNode){var a=new i.ListItemBlockNode(t,r),l=c.addChild(a);return(0,o.init)(e).concat(l)}if(u.RichTextBlock.isOrderedListItem(t.type)&&c&&c instanceof i.OrderedListBlockNode){var s=new i.OrderedListItemBlockNode(t,r),d=c.addChild(s);return(0,o.init)(e).concat(d)}if(u.RichTextBlock.isListItem(t.type)){var p=new i.ListItemBlockNode(t,r),y=new i.ListBlockNode(u.RichTextBlock.emptyList(),[p]);return e.concat(y)}if(u.RichTextBlock.isOrderedListItem(t.type)){var h=new i.OrderedListItemBlockNode(t,r),v=new i.OrderedListBlockNode(u.RichTextBlock.emptyOrderedList(),[h]);return e.concat(v)}return e.concat(new i.BlockNode(t.type,t,r))},[])}}}])&&l(t,n),e}();t.default=p},function(e,t,n){function u(e){return(u="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function s(e){return function(){var t,n=f(e);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return function(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,t)}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ListBlockNode=t.OrderedListBlockNode=t.OrderedListItemBlockNode=t.ListItemBlockNode=t.BlockNode=t.TextNode=t.SpanNode=t.Node=void 0;var r,o=(r=n(3))&&r.__esModule?r:{default:r},i=n(0),p=function e(t,n,r){d(this,e),this.key=(0,o.default)(),this.type=t,this.element=n,this.children=r};t.Node=p;var y=function(e){function n(e,r,o,i,u,c){var a;return d(this,n),(a=t.call(this,o,c,u)).start=e,a.end=r,a.text=i,a.children=u,a}l(n,p);var t=s(n);return a(n,[{key:"boundaries",value:function(){return{lower:this.start,upper:this.end}}},{key:"isParentOf",value:function(e){return this.start<=e.start&&this.end>=e.end}},{key:"setChildren",value:function(e){return new n(this.start,this.end,this.type,this.text,e,this.element)}}],[{key:"slice",value:function(e,t,r,o){return new n(t,r,e.type,o.slice(t,r),e.children,e.element)}}]),n}();t.SpanNode=y;var h=function(e){function n(e,r,o){d(this,n);var u={type:i.NODE_TYPES.span,start:e,end:r,text:o};return t.call(this,e,r,i.NODE_TYPES.span,o,[],u)}l(n,y);var t=s(n);return n}();t.TextNode=h;var v=function(e){function n(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return d(this,n),t.call(this,e,r,o)}l(n,p);var t=s(n);return n}();t.BlockNode=v;var m=function(e){function n(e,r){return d(this,n),t.call(this,i.NODE_TYPES.listItem,e,r)}l(n,v);var t=s(n);return n}();t.ListItemBlockNode=m;var b=function(e){function n(e,r){return d(this,n),t.call(this,i.NODE_TYPES.oListItem,e,r)}l(n,v);var t=s(n);return n}();t.OrderedListItemBlockNode=b;var g=function(e){function n(e,r){return d(this,n),t.call(this,i.NODE_TYPES.oList,e,r)}l(n,v);var t=s(n);return a(n,[{key:"addChild",value:function(e){var t=this.children.concat(e);return new n(this.element,t)}}]),n}();t.OrderedListBlockNode=g;var x=function(e){function n(e,r){return d(this,n),t.call(this,i.NODE_TYPES.list,e,r)}l(n,v);var t=s(n);return a(n,[{key:"addChild",value:function(e){var t=this.children.concat(e);return new n(this.element,t)}}]),n}();t.ListBlockNode=x},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})}},function(e,t,n){e.exports=n(5)},function(e,t,n){function c(e){return e&&e.__esModule?e:{default:e}}var r=c(n(6)),o=c(n(1)),i=c(n(9)),u=n(0);e.exports={asText:r.default,asTree:o.default.fromRichText,serialize:i.default,Elements:u.NODE_TYPES}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(e,t){var n="string"==typeof t?t:" ";return e.map(function(e){return e.text}).join(n)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(e){return e.slice(0,-1)},t.last=function(e){return e[e.length-1]},t.flatten=function(e){var t=[],n=!0,r=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var c=i.value;Array.isArray(c)?t.push.apply(t,c):t.push(c)}}catch(e){r=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(r)throw o}}return t},t.sort=function(e,t){return function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(e).sort(t)}},function(e,t,n){function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.RichTextBlock=void 0;var r=n(0),i=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.text=n,this.spans=r}var t,n;return t=e,(n=[{key:"isEmbedBlock",value:function(e){return e===r.NODE_TYPES.embed}},{key:"isImageBlock",value:function(e){return e===r.NODE_TYPES.image}},{key:"isList",value:function(e){return e===r.NODE_TYPES.list}},{key:"isOrderedList",value:function(e){return e===r.NODE_TYPES.oList}},{key:"isListItem",value:function(e){return e===r.NODE_TYPES.listItem}},{key:"isOrderedListItem",value:function(e){return e===r.NODE_TYPES.oListItem}},{key:"emptyList",value:function(){return{type:r.NODE_TYPES.list,spans:[],text:""}}},{key:"emptyOrderedList",value:function(){return{type:r.NODE_TYPES.oList,spans:[],text:""}}}])&&o(t,n),e}();t.RichTextBlock=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(1))&&r.__esModule?r:{default:r},i=n(2);t.default=function(e,t,n){return o.default.fromRichText(e).children.map(function(e,r){return function(e,t,n,r){return function e(n,o){var u=n instanceof i.SpanNode?n.text:null,c=n.children.reduce(function(t,n,r){return t.concat([e(n,r)])},[]);return r&&r(n.type,n.element,u,c,o)||t(n.type,n.element,u,c,o)}(e,n)}(e,t,r,n)})}}])},function(e,t,n){var r=/["'&<>]/;e.exports=function(e){var t,n=""+e,o=r.exec(n);if(!o)return n;var i="",u=0,c=0;for(u=o.index;u<n.length;u++){switch(n.charCodeAt(u)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#39;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}c!==u&&(i+=n.substring(c,u)),c=u+1,i+=t}return c!==u?i+n.substring(c,u):i}}])}),function(t,n){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.dayjs=n()}(window,function(){var t="millisecond",n="second",e="minute",r="hour",i="day",s="week",u="month",o="quarter",a="year",h=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,f=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=function(t,n,e){var r=String(t);return!r||r.length>=n?t:""+Array(n+1-r.length).join(e)+t},d={s:c,z:function(t){var n=-t.utcOffset(),e=Math.abs(n),r=Math.floor(e/60),i=e%60;return(n<=0?"+":"-")+c(r,2,"0")+":"+c(i,2,"0")},m:function(t,n){var e=12*(n.year()-t.year())+(n.month()-t.month()),r=t.clone().add(e,u),i=n-r<0,s=t.clone().add(e+(i?-1:1),u);return Number(-(e+(n-r)/(i?r-s:s-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(h){return{M:u,y:a,w:s,d:i,D:"date",h:r,m:e,s:n,ms:t,Q:o}[h]||String(h||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},$={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},l="en",m={};m[l]=$;var y=function(t){return t instanceof v},M=function(t,n,e){var r;if(!t)return l;if("string"==typeof t)m[t]&&(r=t),n&&(m[t]=n,r=t);else{var i=t.name;m[i]=t,r=i}return!e&&r&&(l=r),r||!e&&l},g=function(t,n,e){if(y(t))return t.clone();var r=n?"string"==typeof n?{format:n,pl:e}:n:{};return r.date=t,new v(r)},D=d;D.l=M,D.i=y,D.w=function(t,n){return g(t,{locale:n.$L,utc:n.$u,$offset:n.$offset})};var v=function(){function c(t){this.$L=this.$L||M(t.locale,null,!0),this.parse(t)}var d=c.prototype;return d.parse=function(t){this.$d=function(t){var n=t.date,e=t.utc;if(null===n)return new Date(NaN);if(D.u(n))return new Date;if(n instanceof Date)return new Date(n);if("string"==typeof n&&!/Z$/i.test(n)){var r=n.match(h);if(r)return e?new Date(Date.UTC(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)):new Date(r[1],r[2]-1,r[3]||1,r[4]||0,r[5]||0,r[6]||0,r[7]||0)}return new Date(n)}(t),this.init()},d.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},d.$utils=function(){return D},d.isValid=function(){return!("Invalid Date"===this.$d.toString())},d.isSame=function(t,n){var e=g(t);return this.startOf(n)<=e&&e<=this.endOf(n)},d.isAfter=function(t,n){return g(t)<this.startOf(n)},d.isBefore=function(t,n){return this.endOf(n)<g(t)},d.$g=function(t,n,e){return D.u(t)?this[n]:this.set(e,t)},d.year=function(t){return this.$g(t,"$y",a)},d.month=function(t){return this.$g(t,"$M",u)},d.day=function(t){return this.$g(t,"$W",i)},d.date=function(t){return this.$g(t,"$D","date")},d.hour=function(t){return this.$g(t,"$H",r)},d.minute=function(t){return this.$g(t,"$m",e)},d.second=function(t){return this.$g(t,"$s",n)},d.millisecond=function(n){return this.$g(n,"$ms",t)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(t,o){var h=this,f=!!D.u(o)||o,c=D.p(t),d=function(t,n){var e=D.w(h.$u?Date.UTC(h.$y,n,t):new Date(h.$y,n,t),h);return f?e:e.endOf(i)},$=function(t,n){return D.w(h.toDate()[t].apply(h.toDate("s"),(f?[0,0,0,0]:[23,59,59,999]).slice(n)),h)},l=this.$W,m=this.$M,y=this.$D,M="set"+(this.$u?"UTC":"");switch(c){case a:return f?d(1,0):d(31,11);case u:return f?d(1,m):d(0,m+1);case s:var g=this.$locale().weekStart||0,v=(l<g?l+7:l)-g;return d(f?y-v:y+(6-v),m);case i:case"date":return $(M+"Hours",0);case r:return $(M+"Minutes",1);case e:return $(M+"Seconds",2);case n:return $(M+"Milliseconds",3);default:return this.clone()}},d.endOf=function(t){return this.startOf(t,!1)},d.$set=function(s,o){var h,f=D.p(s),c="set"+(this.$u?"UTC":""),d=(h={},h[i]=c+"Date",h.date=c+"Date",h[u]=c+"Month",h[a]=c+"FullYear",h[r]=c+"Hours",h[e]=c+"Minutes",h[n]=c+"Seconds",h[t]=c+"Milliseconds",h)[f],$=f===i?this.$D+(o-this.$W):o;if(f===u||f===a){var l=this.clone().set("date",1);l.$d[d]($),l.init(),this.$d=l.set("date",Math.min(this.$D,l.daysInMonth())).toDate()}else d&&this.$d[d]($);return this.init(),this},d.set=function(t,n){return this.clone().$set(t,n)},d.get=function(t){return this[D.p(t)]()},d.add=function(t,o){var h,f=this;t=Number(t);var c=D.p(o),d=function(n){var e=g(f);return D.w(e.date(e.date()+Math.round(n*t)),f)};if(c===u)return this.set(u,this.$M+t);if(c===a)return this.set(a,this.$y+t);if(c===i)return d(1);if(c===s)return d(7);var $=(h={},h[e]=6e4,h[r]=36e5,h[n]=1e3,h)[c]||1,l=this.$d.getTime()+t*$;return D.w(l,this)},d.subtract=function(t,n){return this.add(-1*t,n)},d.format=function(t){var n=this;if(!this.isValid())return"Invalid Date";var e=t||"YYYY-MM-DDTHH:mm:ssZ",r=D.z(this),i=this.$locale(),s=this.$H,u=this.$m,o=this.$M,a=i.weekdays,h=i.months,c=function(t,r,i,s){return t&&(t[r]||t(n,e))||i[r].substr(0,s)},d=function(t){return D.s(s%12||12,t,"0")},$=i.meridiem||function(t,n,e){var r=t<12?"AM":"PM";return e?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:D.s(o+1,2,"0"),MMM:c(i.monthsShort,o,h,3),MMMM:h[o]||h(this,e),D:this.$D,DD:D.s(this.$D,2,"0"),d:String(this.$W),dd:c(i.weekdaysMin,this.$W,a,2),ddd:c(i.weekdaysShort,this.$W,a,3),dddd:a[this.$W],H:String(s),HH:D.s(s,2,"0"),h:d(1),hh:d(2),a:$(s,u,!0),A:$(s,u,!1),m:String(u),mm:D.s(u,2,"0"),s:String(this.$s),ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:r};return e.replace(f,function(t,n){return n||l[t]||r.replace(":","")})},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(t,h,f){var c,d=D.p(h),$=g(t),l=6e4*($.utcOffset()-this.utcOffset()),m=this-$,y=D.m(this,$);return y=(c={},c[a]=y/12,c[u]=y,c[o]=y/3,c[s]=(m-l)/6048e5,c[i]=(m-l)/864e5,c[r]=m/36e5,c[e]=m/6e4,c[n]=m/1e3,c)[d]||m,f?y:D.a(y)},d.daysInMonth=function(){return this.endOf(u).$D},d.$locale=function(){return m[this.$L]},d.locale=function(t,n){if(!t)return this.$L;var e=this.clone(),r=M(t,n,!0);return r&&(e.$L=r),e},d.clone=function(){return D.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},c}();return g.prototype=v.prototype,g.extend=function(t,n){return t(n,v,g),g},g.locale=M,g.isDayjs=y,g.unix=function(t){return g(1e3*t)},g.en=m[l],g.Ls=m,g});var jupiter=jupiter||{};jupiter.version=3,jupiter.create_url=function(t,e,r,n,a){function i(){return Math.floor(2742745743359*Math.random())}function c(){return o(i())}function o(t){return(t+78364164096).toString(36)}var m=i(),u=i(),l=885187064159;u=((u=u-u%256+jupiter.version)+m)%2742745743359,l=(l+m)%2742745743359;var s="https://"+t+"/"+(m=c()+o(m))+e,h=[(u=o(l)+o(u))+"="+r,c()+c()+"="+n]
;return void 0!==a&&a.length>0&&h.push(c()+c()+"="+a),s+"?"+h.join("&")},jupiter.beacon=function(t,e,r,n){var a="turn:aa.online-metrix.net?transport=",i="1:"+e+":"+r,c={iceServers:[{urls:a+"tcp",username:i,credential:r},{urls:a+"udp",username:i,credential:r}]};try{var o=new RTCPeerConnection(c);o.createDataChannel(Math.random().toString());var m=function(){},u=function(t){o.setLocalDescription(t,m,m)};"undefined"==typeof Promise||o.createOffer.length>0?o.createOffer(u,m):o.createOffer().then(u,m)}catch(t){}},jupiter.load_tags=function(t,e,r,n){jupiter.beacon(t,e,r,n);var a=document.getElementsByTagName("head").item(0),i=document.createElement("script");i.id="tmx_tags_js",i.setAttribute("type","text/javascript");var c=jupiter.create_url(t,".js",e,r,n);i.setAttribute("src",c),jupiter.set_csp_nonce(i),a.appendChild(i)},jupiter.load_iframe_tags=function(t,e,r,n){jupiter.beacon(t,e,r,n);var a=jupiter.create_url(t,".htm",e,r,n),i=document.createElement("iframe");i.title="empty",i.setAttribute("aria-disabled","true"),i.width="0",i.height="0",i.setAttribute("style","color:rgba(0,0,0,0); float:left; position:absolute; top:-200; left:-200; border:0px"),i.setAttribute("src",a),document.body.appendChild(i)},jupiter.csp_nonce=null,jupiter.register_csp_nonce=function(t){if(void 0!==t.currentScript&&null!==t.currentScript){var e=t.currentScript.getAttribute("nonce");void 0!==e&&null!==e&&""!==e?jupiter.csp_nonce=e:void 0!==t.currentScript.nonce&&null!==t.currentScript.nonce&&""!==t.currentScript.nonce&&(jupiter.csp_nonce=t.currentScript.nonce)}},jupiter.set_csp_nonce=function(t){null!==jupiter.csp_nonce&&(t.setAttribute("nonce",jupiter.csp_nonce),t.getAttribute("nonce")!==jupiter.csp_nonce&&(t.nonce=jupiter.csp_nonce))},jupiter.cleanup=function(){for(var hp_frame,tmx_frame,tmx_script;null!==(hp_frame=document.getElementById("tdz_ifrm"));)hp_frame.parentElement.removeChild(hp_frame);for(;null!==(tmx_frame=document.getElementById("tmx_tags_iframe"));)tmx_frame.parentElement.removeChild(tmx_frame);for(;null!==(tmx_script=document.getElementById("tmx_tags_js"));)tmx_script.parentElement.removeChild(tmx_script)},jupiter.go=function(t,e,r,n){jupiter.cleanup(),jupiter.register_csp_nonce(document),jupiter.load_tags(t,e,r,n)},jupiter.profile_iframe=function(t,e,r,n){jupiter.cleanup(),jupiter.register_csp_nonce(document),jupiter.load_iframe_tags(t,e,r,n)};
"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(r.push(o.value),!t||r.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function redirect(e,t,n,o){return t?{isInSitemap:!1,redirectTo:t,templateUrl:"pages/loading.html"}:{isInSitemap:!1,resolve:{redirect:["Redirect","Language",function(t,i){e=e.split(":injectLanguage").join(i.data.current).split(":zendeskInjectLanguage").join(i.data.zendeskLang),t.redirect(e,n,o)}]},templateUrl:"pages/loading.html"}}function recursiveSearch(e,t,n){for(var o in e){if(o===t&&e[o]===n)return e;if("object"===_typeof(e[o])&&recursiveSearch(e[o],t,n))return!0}return!1}function isValidDate(e){return dayjs(e).isValid()}function addMonths(e,t){return dayjs(e).add(t,"month").toDate()}function roundToLastOfMonth(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}function now(){return window.yolPretendDate?new Date(window.yolPretendDate):new Date}function swissDate(e){if(!e&&window.yolPretendDate)return new Date(window.yolPretendDate);e||(e=new Date);var t=1e3*e.getTimezoneOffset()*60,n=new Date(e.getTime()+t);return n.addHours(swissDateOffset(n))}function utcDate(){var e=new Date,t=60*e.getTimezoneOffset()*1e3;return new Date(e.getTime()+t)}function objToDate(e,t){var n=e.month-(t?1:0);return new Date(Date.UTC(e.year,n,e.day))}function dateToObj(e,t){return{year:e.getFullYear(),month:e.getMonth()+(t?1:0),day:e.getDate()}}function stringToDateObj(e){return{day:1*e.substring(8,10),month:1*e.substring(5,7),year:1*e.substring(0,4)}}function yolStringToDate(e){var t=1*e.substring(6,10),n=e.substring(3,5)-1,o=1*e.substring(0,2),i=1*e.substring(11,13),r=1*e.substring(14,16),a=new Date(Date.UTC(t,n,o));return a.setUTCHours(i-swissDateOffset(a)),r&&a.setUTCMinutes(r),a}function dateToYolString(e){return"".concat(paddTo(e.getDate(),2),"/").concat(paddTo(e.getMonth()+1,2),"/").concat(e.getFullYear(),"-").concat(paddTo(e.getHours(),2),":").concat(paddTo(e.getMinutes(),2))}function tomorrow(e){var t=parseInt(e.substring(0,2)),n=parseInt(e.substring(3,5)),o=swissDate().getHours(),i=swissDate().getMinutes();return t<o||t===o&&n<i}function compareDatesIgnoreHours(e,t){return dayjs(e).isSame(dayjs(t),"day")}function isDayBefore(e,t){return dayjs(e).isBefore(dayjs(t),"day")}function differenceInDays(e,t){return dayjs(t).diff(dayjs(e),"day")}function differenceInMonths(e,t){return dayjs(t).diff(dayjs(e),"month")}function daysInMonth(e,t,n){return n?new Date(t,e,0).getDate():new Date(t,e+1,0).getDate()}function dateIsInOfficeHours(e){return 0!==e.getDay()&&(6!==e.getDay()&&(!(e.getHours()>19)&&!(e.getHours()<7)))}function isWeekDay(e){return!(0===e.getDay()||6===e.getDay())}function dateInList(e,t){if(!e||!t)return!1;for(var n=dayjs(e),o=0;o<t.length;o++)if(n.isSame(t[o],"day"))return!0;return!1}function timeTravelTo(e){location.href=getTravelToString(e,window.location.href)}function getTravelToString(e,t){var n=t.split("#")[1];return n=n?"#"+n:"",t=t.split("#")[0].split("?pretendDate=")[0],t=t.split("&pretendDate=")[0],t+=t.indexOf("?")>-1?"&":"?",(t+="pretendDate="+("number"==typeof e?e:yolStringToDate(e).getTime()))+n}function lookForPretendDate(){var e=location.search.split("pretendDate=").splice(1).join("").split("&")[0];e&&(window.yolPretendDate=new Date(1*e),isValidDate(window.yolPretendDate)||(console.error("Invalid date"),delete window.yolPretendDate))}function swissDateOffset(e){return swissDaylightSavings(e)?2:1}function swissDaylightSavings(e){var t={2013:{from:new Date("2013-03-31T02:00:00.000Z"),to:new Date("2013-10-27T03:00:00.000Z")},2014:{from:new Date("2014-03-29T02:00:00.000Z"),to:new Date("2014-10-25T03:00:00.000Z")},2015:{from:new Date("2015-03-30T02:00:00.000Z"),to:new Date("2015-10-26T03:00:00.000Z")},2016:{from:new Date("2016-03-27T02:00:00.000Z"),to:new Date("2016-10-30T03:00:00.000Z")},2017:{from:new Date("2017-03-26T02:00:00.000Z"),to:new Date("2017-10-29T03:00:00.000Z")},2018:{from:new Date("2018-03-25T02:00:00.000Z"),to:new Date("2018-10-28T03:00:00.000Z")},2019:{from:new Date("2019-03-31T02:00:00.000Z"),to:new Date("2019-10-27T03:00:00.000Z")},2020:{from:new Date("2020-03-29T02:00:00.000Z"),to:new Date("2020-10-25T03:00:00.000Z")},2021:{from:new Date("2021-03-28T02:00:00.000Z"),to:new Date("2021-10-31T03:00:00.000Z")},2022:{from:new Date("2021-03-27T02:00:00.000Z"),to:new Date("2021-10-30T03:00:00.000Z")}},n=e.getFullYear();if(t[n]){var o=t[n].from,i=t[n].to;return!(e.getTime()<o.getTime())&&e.getTime()<=i.getTime()}return isDSTFallback(e)}function isDSTFallback(e){var t=new Date(e.getFullYear(),0,1),n=new Date(e.getFullYear(),6,1),o=Math.max(t.getTimezoneOffset(),n.getTimezoneOffset());return e.getTimezoneOffset()<o}function fixMsisdn(e){if(e.match(/[a-zA-Z]/))return e;var t=e.split("418641860").join("41860");return"00"===t.substring(0,2)&&(t=t.substring(2)),-1!==t.indexOf(" ")&&(t=t.split(" ")[0]),"4186"===t.substring(0,4)?"voicemail":("417"===t.substring(0,3)&&(t="07"+t.substring(3)),t)}function isIncoming(e,t){return"4186"!==e.substring(0,4)&&(-1!==e.indexOf("xxxx")||-1!==e.indexOf(t))}function getPrepaidUsageType(e){return e=e.toLowerCase(),-1!==e.indexOf("roaming")?"roaming":-1!==e.indexOf("international")?"international":-1!==e.indexOf("data traffic")?"national":-1!==e.indexOf("sent sms (value-added service)")?"national":"appel national"===e?"national":"sms envoyes"===e?"national":-1!==e.indexOf(" -> ")?"international":"appel national"===e?"national":"sent sms"===e?"national":-1!==e.indexOf("call to ")?"international":"nationaler anruf"===e?"national":"datenverkehr"===e?"national":"gesendete sms"===e?"national":-1!==e.indexOf("im ausland")?"roaming":-1!==e.indexOf("innerhalb europazone")?"roaming":-1!==e.indexOf("internazionali")?"international":-1!==e.indexOf("nazionale")?"national":"trasferimento dati"===e?"national":"sms inviato"===e?"national":-1!==e.indexOf("estero")?"roaming":-1!==e.indexOf('chiamata nella "zona europa"')?"roaming":(console.warn(e),e)}function fixPrepaidUsageHistory(e,t){var n,o=_createForOfIteratorHelper(e.mms);try{for(o.s();!(n=o.n()).done;){var i=n.value;e.sms.push(i)}}catch(e){o.e(e)}finally{o.f()}var r,a=_createForOfIteratorHelper(e.sms);try{for(a.s();!(r=a.n()).done;){var s=r.value;s.usageType="sms",s.cost=s.price,s.time=swissDate(new Date(s.callStart)),s.type=getPrepaidUsageType(s.callDescription),s.amount=1,s.isIncoming=isIncoming(s.to,t),s.to=fixMsisdn(s.to),delete s.totalVolume,delete s.callStart,delete s.callDescription,delete s.price,delete s.duration}}catch(e){a.e(e)}finally{a.f()}var c,d=_createForOfIteratorHelper(e.calls);try{for(d.s();!(c=d.n()).done;){var u=c.value;u.usageType="call",u.time=swissDate(new Date(u.callStart)),u.cost=u.price,u.type=getPrepaidUsageType(u.callDescription),u.amount=parseInt(u.duration),u.isIncoming=isIncoming(u.to,t),u.to=fixMsisdn(u.to),isNaN(u.amount)&&(u.amount=0),delete u.totalVolume,delete u.callStart,delete u.price,delete u.callDescription,delete u.duration}}catch(e){d.e(e)}finally{d.f()}var l,p=_createForOfIteratorHelper(e.others);try{for(p.s();!(l=p.n()).done;){var g=l.value;g.usageType="other",g.time=swissDate(new Date(g.callStart)),g.cost=g.price,g.description=g.callDescription,g.amount=1,delete g.totalVolume,delete g.callStart,delete g.price,delete g.callDescription,delete g.to,delete g.duration}}catch(e){p.e(e)}finally{p.f()}var f,h=_createForOfIteratorHelper(e.gprs);try{for(h.s();!(f=h.n()).done;){var m=f.value;m.usageType="gprs",m.time=swissDate(new Date(m.callStart)),m.cost=m.price,m.type=getPrepaidUsageType(m.callDescription),m.mb=m.totalVolume/1024,isNaN(m.mb)&&(m.mb=0),m.amount=m.mb,delete m.totalVolume,delete m.callStart,delete m.price,delete m.callDescription,delete m.to,delete m.duration}}catch(e){h.e(e)}finally{h.f()}return delete e.mms,e}function fixPostpaidUsageHistory(e,t){var n,o=_createForOfIteratorHelper(e.sms);try{for(o.s();!(n=o.n()).done;){var i=n.value;35==i.cost&&console.log(i),i.usageType="sms",i.cost=-parseFloat(i.cost),i.time=swissDate(new Date(i.time)),i.to=fixMsisdn(i.to),i.amount=1,i.isIncoming=isIncoming(i.to,t)}}catch(e){o.e(e)}finally{o.f()}var r,a=_createForOfIteratorHelper(e.calls);try{for(a.s();!(r=a.n()).done;){var s=r.value;s.usageType="call",s.cost=-parseFloat(s.cost),s.time=swissDate(new Date(s.time)),s.to=fixMsisdn(s.to),s.amount=parseInt(s.duration),isNaN(s.amount)&&(s.amount=0),s.isIncoming=isIncoming(s.to,t)}}catch(e){a.e(e)}finally{a.f()}var c,d=_createForOfIteratorHelper(e.others);try{for(d.s();!(c=d.n()).done;){var u=c.value;u.usageType="other",u.cost=parseFloat(u.cost),isNaN(u.cost)&&(u.cost=0),u.time=swissDate(new Date(u.time)),u.amount=1}}catch(e){d.e(e)}finally{d.f()}var l,p=_createForOfIteratorHelper(e.gprs);try{for(p.s();!(l=p.n()).done;){var g=l.value;g.usageType="gprs",g.cost=-parseFloat(g.cost),isNaN(g.cost)&&(g.cost=0),g.time=swissDate(new Date(g.time)),g.mb=parseFloat((g.bytes/1048576).toFixed(2)),isNaN(g.mb)&&(g.mb=0),g.amount=g.mb,delete g.to,delete g.bytes}}catch(e){p.e(e)}finally{p.f()}return e}function matchesInString(e,t,n,o){var i=0;e=e.split(" "),t=o?t.split(" "):[t];for(var r in e)if(e[r].length>=n)for(var a in t)t[a].length>=n&&fuzzysearch(e[r].toLowerCase(),t[a].toLowerCase())&&(i+=100/t.length);return i}function fuzzysearch(e,t){var n=t.length,o=e.length;if(o>n)return!1;if(o===n)return e==t;e:for(var i=0,r=0;i<o;i++){for(var a=e.charCodeAt(i);r<n;)if(t.charCodeAt(r++)===a)continue e;return!1}return!0}function extractCharFromString(e){return e.match(numberPattern)}function removeChatNotIn(e,t){for(var n="",o=0;o<e.length;o++)-1!==t.indexOf(e[o])&&(n+=e[o]);return n}function throwSafe(e,t){window.throwSafeErrorReporter&&window.throwSafeErrorReporter(e,t)}function sanitizeRfeString(e){return e?removeChatNotIn(e,RfeAllowedCharacters):e}function isOutOfViewport(e){var t=e.getBoundingClientRect(),n={};return n.top=t.top<0,n.left=t.left<0,n.bottom=t.bottom>(window.innerHeight||document.documentElement.clientHeight),n.right=t.right>(window.innerWidth||document.documentElement.clientWidth),n.any=n.top||n.left||n.bottom||n.right,n.all=n.top&&n.left&&n.bottom&&n.right,n}function walkThree(e){for(var t=[];e&&e.parentNode&&e.parentNode!==document.documentElement;)t.unshift(e.nodeName.toLowerCase().capitalizeFirstLetter()+" : "+e.className.split("ng-scope").join("").split("ng-isolate-scope").join("")),e=e.parentNode;return t.unshift("Html"),t.join(" > ")}function elementInViewport(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=e.offsetTop,i=e.offsetLeft,r=e.offsetWidth,a=e.offsetHeight;e&&e.offsetParent;)e=e.offsetParent,o+=e.offsetTop,i+=e.offsetLeft;return o<window.pageYOffset+window.innerHeight-t+n&&i<window.pageXOffset+window.innerWidth&&o+a-t+n>window.pageYOffset&&i+r>window.pageXOffset}function allowNavigateAway(){window.onbeforeunload=function(e){},setTimeout(function(){window.dontWarnBeforeLeaveCheckout||(window.onbeforeunload=function(e){return"Sure?"})},200)}function isInteger(e){return(0^e)===e}function siteHeaderHeight(){var e=document.querySelector(".site-header");return e?e.clientHeight:96}function getBodyScroll(){var e=document.documentElement;return e?(window.pageYOffset||e.scrollTop)-(e.clientTop||0):0}function tryRestoreSmoothScroll(e,t,n,o,i){if(window.restoringScroll=!0,!e)return window.restoringScroll=!1;var r=0,a=!1,s=Math.floor(t/20),c=setInterval(function(){0!==getBodyScroll()&&clearInterval(c);var t=document.getElementById(e);if(t&&!a){a=!0;var d={offset:siteHeaderHeight()+(i||0),duration:o||400};n(t,d),window.restoringScroll=!1}r>s&&(window.restoringScroll=!1,clearInterval(c)),r++},20)}function tryRestoreScroll(e,t){var n=0,o=Math.floor(t/10),i=setInterval(function(){scrollBodyTo(e),e===getBodyScroll()&&clearInterval(i),n>o&&(console.warn("could not restore scroll"),clearInterval(i)),n++},10)}function scrollBodyTo(e){document.scrollingElement?document.scrollingElement.scrollTop=e:document.documentElement?document.documentElement.scrollTop=e:document.body&&(document.body.scrollTop=e)}function paddTo(e,t){for(e=""+e;e.length<t;)e="0"+e;return e}function paddToEnd(e,t){for(e=""+e;e.length<t;)e+="0";return e}function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}function msisdnCheck(e){return 10==e.length&&"07"==e.substring(0,2)}function randomString(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0987654321".split(""),n="",o=0;o<e;o++)n+=t[getRandomInt(0,t.length-1)];return n}function urlify(e){if(!e)return"";if("number"==typeof e)e=e.toString();else if("string"!=typeof e){try{e=JSON.stringify(e,function(e,t){return e&&t&&"number"!=typeof t?Array.isArray(t)?"[object Array]":""+t:t}),e=e.substring(0,50)+"..."}catch(e){}return throwSafe(new Error("func_general.urlify got a non-string: "+e),"id-45"),""}return e=e.trim(),e=e.replaceAll("!",""),e=e.replaceAll('"',""),e=e.replaceAll("'",""),e=e.replaceAll("  "," "),e=e.replaceAll(".",""),e=e.replaceAll("/","_"),e=e.replaceAll(" ","_").toLowerCase(),e.split("_(")[0].split("(")[0]}function focusField(e){setTimeout(function(){var t=document.getElementById(e);t&&t.focus()},40)}function focusFirstField(){setTimeout(function(){var e=document.getElementsByClassName("focus-first");e.length&&(e=e[0],e.id&&focusField(e.id))},400)}function b64toBlob(e,t){t=t||"application/pdf";e=e.replace(/^[^,]+,/,""),e=e.replace(/\s/g,"");try{for(var n=window.atob(e),o=[],i=0;i<n.length;i+=512){for(var r=n.slice(i,i+512),a=new Array(r.length),s=0;s<r.length;s++)a[s]=r.charCodeAt(s);var c=new Uint8Array(a);o.push(c)}return new Blob(o,{type:t})}catch(e){return!1}}function checkPassword(e,t){return e===t||!t}function isSameYearAndMonth(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function cleanupNumberLandline(e){return e?"0"+(e.match(/\d+(?:\.\d+)?/g)||[]).join("").slice(-9):e}function promiseSerial(e){return e.reduce(function(e,t){return e.then(function(e){return t().then(Array.prototype.concat.bind(e))})},Promise.resolve([]))}function checkMsisdn(e,t){return e==t||!t}function iOSVersion(){if(window.MSStream)return!1;var e,t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return void 0!==t&&null!==t&&(e=[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)],parseFloat(e.join(".")))}function objToArray(e,t){return e?Object.keys(e).map(function(n){return t&&(e[n].objKey=n),e[n]}):[]}function autoCompleteString(e,t){for(var n in t)if(t[n]&&"string"==typeof t[n]&&t[n].substring(0,e.length)==e)return t[n]}function dashToCamel(e){var t=e.split("-").map(function(e){return e[0].toUpperCase()+e.substring(1)}).join("");return t[0].toLowerCase()+t.substring(1)}function mod10RecursiveCheckDigitCalc(e){for(var t=[0,9,4,6,8,2,7,1,3,5],n=0,o=1;o<e.length;o++)n=t[(n+1*e[o])%10];return(10-n)%10}function luhn(e){for(var t=0,n=!1,o=e.length-1;o>=0;o--){var i=e.charAt(o),r=parseInt(i,10);n&&(r*=2)>9&&(r-=9),t+=r,n=!n}return t%10==0}function imeiCheckSum(e){return!!e&&(15==e.length&&("000000000000000"!==e&&luhn(e)))}function iccidCheckSum(e){return!!e&&(20==e.length&&("8941"==e.substring(0,4)&&luhn(e)))}function loadDatatransScripts(e,t){loadScript("/assets/other/jquery.min.js").then(function(){return loadScript(e.replace("/upp/jsp/upStart.jsp","/upp/payment/js/datatrans-1.0.2.min.js"))}).then(t)}function loadLibphonenumberScript(){return loadScript("/assets/other/libphonenumber-min.1.7.38.js")}function loadScript(e,t){return loadedScripts[e]||(loadedScripts[e]=new Promise(function(n,o){var i=document.createElement("script");i.type="text/javascript",t&&(i.id=t),i.onload=function(){n()},i.onerror=function(e){return o(e)},i.src=e,document.getElementsByTagName("head")[0].appendChild(i)})),loadedScripts[e]}function searchStringToObject(e){return e.substr(1).split("&").reduce(function(e,t){var n=t.split("="),o=n[0],i=n[1];return e[o]=i,e},{})}function createDatatransForm(e,t,n,o,i){return new Promise(function(r){var a=document.getElementById("paymentForm");a&&a.parentElement.removeChild(a),a=document.createElement("form"),a.id="paymentForm",a.style.display="none",a.setAttribute("data-amount",e.amount),a.setAttribute("data-reqtype",e.dataTrans.reqtype),o?(a.setAttribute("data-success-url",window.location.protocol+"//"+window.location.host+"/topup/success?msisdn="+o+"&amount="+e.amount/100),a.setAttribute("data-error-url",window.location.href+"?topupError=true"),a.setAttribute("data-cancel-url",window.location.href)):i?(a.setAttribute("data-success-url",window.location.origin+"/account/bills/cc-payment-success"),a.setAttribute("data-error-url",window.location.origin+"/account/bills/pay?paymentError=true"),a.setAttribute("data-cancel-url",window.location.origin+"/account/bills/pay")):n?(a.setAttribute("data-success-url",window.location.protocol+"//"+window.location.host+"/account/topup-success?subscription="+n+"&amount="+e.amount/100),a.setAttribute("data-error-url",window.location.protocol+"//"+window.location.host+"/account?topupError=true&id="+n),a.setAttribute("data-cancel-url",window.location.href)):(a.setAttribute("data-success-url",location.origin+"/"+location.pathname.split("/process")[0]+"/process/check-payment"),a.setAttribute("data-error-url",location.origin+"/"+location.pathname.split("/process")[0]+"/process/error/payment"),a.setAttribute("data-cancel-url",location.origin+"/"+location.pathname.split("/process")[0]+"/process/payment-options"),a.setAttribute("data-jwt-token",window.rfeAuthorization)),a.setAttribute("data-use-alias",e.dataTrans.useAlias),a.setAttribute("data-merchant-id",e.dataTrans.merchantId),a.setAttribute("data-currency",e.dataTrans.currency),a.setAttribute("data-refno",e.dataTrans.refno),a.setAttribute("data-sign",e.dataTrans.sign),a.setAttribute("data-upp-return-masked-c-c",e.dataTrans.uppReturnMaskedCC),a.setAttribute("data-upp-web-response-method",e.dataTrans.uppWebResponseMethod),a.setAttribute("data-upp-start-target","_top"),a.setAttribute("data-language",t),document.body.appendChild(a),setTimeout(function(){r()},100)})}function debounce(e,t,n){var o;return function(){var i=this,r=arguments,a=function(){o=null,n||e.apply(i,r)},s=n&&!o;if(clearTimeout(o),o=setTimeout(a,t),s)return e.apply(i,r)}}function debouncePromise(e){function t(){var t=o;clearTimeout(i),Promise.resolve(a.accumulate?e.call(this,s):e.apply(this,s[s.length-1])).then(t.resolve,t.reject),s=[],o=null}var n,o,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=[];return function(){var c=getWait(r),d=(new Date).getTime(),u=!n||d-n>c;n=d;for(var l=arguments.length,p=new Array(l),g=0;g<l;g++)p[g]=arguments[g];if(u&&a.leading)return a.accumulate?Promise.resolve(e.call(this,[p])).then(function(e){return e[0]}):Promise.resolve(e.call.apply(e,[this].concat(p)));if(o?clearTimeout(i):o=defer(),s.push(p),i=setTimeout(t.bind(this),c),a.accumulate){var f=s.length-1;return o.promise.then(function(e){return e[f]})}return o.promise}}function getWait(e){return"function"==typeof e?e():e}function defer(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e}function throttle(e,t){var n,o;return function(){var i=this,r=arguments;o?(clearTimeout(n),n=setTimeout(function(){Date.now()-o>=t&&(e.apply(i,r),o=Date.now())},t-(Date.now()-o))):(e.apply(i,r),o=Date.now())}}function matchPaths(e,t){for(var n,o,i=t||window.location.pathname.substring(3).split("?")[0],r=0;r<e.length;r++)if(o=e[r],n="?"!==o[0],n?o===i+window.location.hash:i.startsWith(o.substring(1)))return!0;return!1}function is_numeric(e){return/^\d+$/.test(e)}function removeAfterNumbers(e){for(var t="",n=0;n<e.length;n++){if(is_numeric(e[n])&&" "==e[n-1])return t.substring(0,t.length-1);t+=e[n]}return t}function removeDuplicateCities(e){for(var t=[],n=0;n<e.length;n++)t.indexOf(removeAfterNumbers(e[n]))<0&&t.push(e[n]);return t}function fixBundleText(e){for(var t in e)"string"==typeof e[t]&&(e[t]=e[t].split("--").join("-").toLowerCase());return e}function lowerCaseObjectValues(e,t,n){n=n||[];for(var o in e)"string"==typeof e[o]?n.indexOf(o)<0&&(e[o]=e[o].toLowerCase()):t&&"object"===_typeof(e[o])&&(e[o]=lowerCaseObjectValues(e[o],t,n));return e}function deepCopy(e,t){for(var n in t)e[n]&&"object"==_typeof(e[n])?deepCopy(e[n],t[n]):e[n]=t[n]}function fixBundles(e){var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(o.countries&&o.countries.length&&o.countries.push("200903041337530279"),o.promotionName&&(o.bundleName=o.promotionName),o.endDate&&(o.endDate=new Date(o.endDate)),o.startDate&&(o.startDate=new Date(o.startDate)),o.totalDiscountedAmount){var i=o.startDate&&o.endDate?(o.endDate.getTime()-o.startDate.getTime())/1e3/60/60/24/365:0;o.isLifetime=i>8}o.bundleName=urlify(o.bundleName.split("--").join("-")),fixBundle(o)}}catch(e){n.e(e)}finally{n.f()}return e}function removeNumbersFromPath(e){var t=e.split("/");for(var n in t)t[n]&&!isNaN(t[n])&&(t[n]="hidden_numbers");return t.join("/")}function dragDropSupported(){var e=document.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}function fixBundle(e){switch(e.type){case"VOLUME_KB":e.type="BYTES",e.currentAmount&&(e.remainingBalance=1024*e.currentAmount),e.initialBalance||(e.initialBalance=e.remainingBalance),e.remainingBalance*=1024,e.initialBalance*=1024;break;case"VOLUME_SECOND":e.type="MIN"}}function drawLines(e,t){e.moveTo(t[0],t[1]);for(var n=2;n<t.length-1;n+=2)e.lineTo(t[n],t[n+1])}function drawCurve(e,t,n,o,i){drawLines(e,getCurvePoints(t,n,o,i))}function drawPoint(e,t){e.fillRect(t[0],t[1],2,2)}function getCurvePoints(e,t,n,o){t=void 0!==t?t:.5,n=n||!1,o=o||16;var i,r,a,s,c,d,u,l,p,g,f,h,m,v=[],b=[];for(v=e.slice(0),n?(v.unshift(e[e.length-1]),v.unshift(e[e.length-2]),v.unshift(e[e.length-1]),v.unshift(e[e.length-2]),v.push(e[0]),v.push(e[1])):(v.unshift(e[1]),v.unshift(e[0]),v.push(e[e.length-2]),v.push(e[e.length-1])),m=2;m<v.length-4;m+=2)for(h=0;h<=o;h++)a=(v[m+2]-v[m-2])*t,s=(v[m+4]-v[m])*t,c=(v[m+3]-v[m-1])*t,d=(v[m+5]-v[m+1])*t,f=h/o,u=2*Math.pow(f,3)-3*Math.pow(f,2)+1,l=-2*Math.pow(f,3)+3*Math.pow(f,2),p=Math.pow(f,3)-2*Math.pow(f,2)+f,g=Math.pow(f,3)-Math.pow(f,2),i=u*v[m]+l*v[m+2]+p*a+g*s,r=u*v[m+1]+l*v[m+3]+p*c+g*d,b.push(i),b.push(r);return b}function ArrNoDupe(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})}function hasSomeData(e,t){if(!e)return!1;if(t){var n,o=_createForOfIteratorHelper(t);try{for(o.s();!(n=o.n()).done;){if(!e[n.value])return!1}}catch(e){o.e(e)}finally{o.f()}}for(var i in e)if(e[i])return!0}function hasNoNull(e,t){if(e){var n=0;for(var o in e)if(!e[o]&&(n+=1,!t||n>t))return!1;return!0}}function checkPixelIsError(e,t){if(!e)return!0;if(t&&!e.errorCode)return!1;if(t&&e.errorCode)return!0;var n=e.onBoardData&&(hasSomeData(e.onBoardData.mrz)||hasNoNull(e.onBoardData.viz,1)),o=-1!==[200,201,203,204,205,207,208,209,211,304].indexOf(1*e.errorCode);return!(n&&(!e.errorCode||o))&&(!(e.secondPageRequired&&!e.errorCode)&&(!(e.secondPageRequired&&o||n)||"partial"))}function b64ToImage(e){return new Promise(function(t,n){var o=new Image;o.onload=function(){return t(o)},o.onerror=n,o.src=e})}function imageToB64(e){var t=getTempCanvas(),n=t.getContext("2d");return t.width=e.videoWidth||e.naturalWidth,t.height=e.videoHeight||e.naturalHeight,n.drawImage(e,0,0),t.toDataURL("image/jpeg")}function createManualSearch(e){var t={};if(!(e=e.split("?")[1]))return t;e=e.split("&");var n,o=_createForOfIteratorHelper(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;t[i.split("=")[0]]=i.split("=")[1]}}catch(e){o.e(e)}finally{o.f()}return t}function allowHandsetInsurance(e,t,n,o,i,r){return!r&&(!!e.device&&("prepaid"!==e.config.type&&("tv"!==e.product.productType&&("internet"!==e.config.tags[0]&&(!!t.allowedInCurrentChannel()&&!(o&&!o.canAddHandsetInsurance()))))))}function getCreditCardType(e){if(e)return"3"!==e[0]||"4"!==e[1]&&"7"!==e[1]?"50"===e.substring(0,2)?"Maestro":e.substring(0,2)>=56&&e.substring(0,2)<=64?"Maestro":e.substring(0,2)>=66&&e.substring(0,2)<=69?"Maestro":e.substring(0,6)>=51e4&&e.substring(0,6)<=559999?"MasterCard":"4"===e[0]?"VISA":void 0:"American Express"}function imageIsBlack(e){return new Promise(function(t){resizeImage(imageToB64(e),6).then(function(e){b64ToImage(e).then(function(e){var n=getTempCanvas(),o=n.getContext("2d");n.width=e.naturalWidth,n.height=e.naturalHeight,o.drawImage(e,0,0);var i=o.getImageData(0,0,n.width,n.height),r=Array.from(i.data).filter(function(e,t){return t%4!=3}).reduce(function(e,t){return e+t});console.log("total",r),t(r<100)})})})}function getTempCanvas(){return window.yolCanvas||(window.yolCanvas=document.createElement("canvas")),window.yolCanvas}function addressToJson(e){return{city:e.city,postCode:e.postCode,streetName:e.streetName,streetNumber:e.streetNumber,co:e.co||""}}function simplifyStreetName(e){return"weg"===e.substring(e.length-3)&&(e=e.substring(0,e.length-3)),e.toLowerCase().split("strasse").join("str").split("chemin").join("ch").split("route ").join("rte ").split("avenue").join("av").split("boulevard").join("bvd").split("'").join("").split(".").join("").split("''").join("'")}function hashString(e){var t,n,o=0;if(void 0===e&&(e=randomString(10)),0===e.length)return o;for(t=0;t<e.length;t++)n=e.charCodeAt(t),o=(o<<5)-o+n,o|=0;return o}function resizeImage(e,t,n){return new Promise(function(o){var i=new Image;i.onload=function(){var r=getTempCanvas(),a=r.getContext("2d");n||(n=t*(s?i.width/i.height:i.height/i.width));var s=i.height>i.width;if(r.width=s?n:t,r.height=s?t:n,r.width<t&&r.height<t)return o(e);a.drawImage(i,0,0,r.width,r.height),o(r.toDataURL("image/jpeg",.5))},i.src=e})}function resizeToBytes(e,t,n){return new Promise(function(o){resizeImage(e,t).then(function(e){e.length<n?o(e):(t-=100,o(resizeToBytes(e,t,n)))})})}function rotateImage(e,t){return t?Promise.resolve(e):new Promise(function(t){var n=new Image;n.onload=function(){var e=getTempCanvas(),o=e.getContext("2d");e.width=n.height,e.height=n.width,o.translate(e.width/2,e.height/2),o.rotate(270*Math.PI/180),o.drawImage(n,-e.height/2,-e.width/2),t(e.toDataURL("image/jpeg"))},n.src=e})}function cropImage(e,t,n,o,i){return new Promise(function(r,a){var s=getTempCanvas(),c=s.getContext("2d");s.width=o,s.height=i,c.drawImage(e,-t,-n);var d=new Image;d.onload=function(){return r(d)},d.onerror=function(){return a(d)},d.src=s.toDataURL("image/jpeg")})}function actualResizeImage(e,t){return new Promise(function(n){if(e.width<t&&e.height<t)return n(e);var o=getTempCanvas(),i=o.getContext("2d"),r=e.height>e.width,a=r?e.width/e.height:e.height/e.width;o.width=r?t*a:t,o.height=r?t:t*a,i.drawImage(e,0,0,o.width,o.height);var s=new Image;s.onload=function(){return n(s)},s.src=o.toDataURL("image/jpeg")})}function populateUserData(e,t){var n,o,i,r;if(!window.production){var a=e.orderData.billingAddress&&!e.orderData.billingAddress.postCode;a&&(e.orderData.billingAddress={postCode:"8005",city:"Zurich",country:"200903041337530279"});var s=e.orderData.billingCustomerDetails,c=!(null!==(n=s.billingIdDetails)&&void 0!==n&&n.idTypeId),d=null===(o=s.billingIdDetails)||void 0===o?void 0:o.idTypeId;e.orderData.billingCustomerDetails={idCheckDone:s.idCheckDone,pixelScanned:s.pixelScanned,firstName:Math.random().toString(36).substring(7),lastName:Math.random().toString(36).substring(7),title:s.title||"Mr",contactNumber:s.contactNumber||"0761234567",preferredLang:t.data.current||s.preferredLang||"en",dob:s.dob&&s.dob.day?s.dob:{day:getRandomInt(1,20).toString(),month:getRandomInt(1,11).toString(),year:getRandomInt(1950,1990).toString()},emailAddress:s.emailAddress||"tester.tester"+Math.random().toString(36).substring(7)+"@fgjawa.aah",billingIdDetails:s.billingIdDetails?{nationality:s.billingIdDetails.nationality||"200903041337530070",idNumber:s.billingIdDetails.idNumber||"sd56fs6d5f4s64fd"+Math.random().toString(36).substring(7),expiry:{day:getRandomInt(1,20).toString(),month:getRandomInt(1,11).toString(),year:getRandomInt(2030,2040).toString()}}:void 0},c||(e.orderData.billingCustomerDetails.billingIdDetails.idTypeId=d),null===(i=window.fillFunctions)||void 0===i||null===(r=i.switchCountry)||void 0===r||r.call(i,"200903041337530070"),setTimeout(function(){var e;null===(e=window.fillFunctions)||void 0===e||e.checkAddress()},100),setTimeout(function(){var t;c&&e.orderData.billingCustomerDetails.billingIdDetails&&(e.orderData.billingCustomerDetails.billingIdDetails.idTypeId="201411201909407896"),a&&(e.orderData.billingAddress.streetName="Hardturmstrasse",setTimeout(function(){var t;e.orderData.billingAddress.streetNumber="10",e.orderData.billingAddress.co="Omer Isik",null===(t=window.fillFunctions)||void 0===t||t.checkAddress()},1e3)),null===(t=window.fillFunctions)||void 0===t||t.checkAddress()},1e3)}}function _0x490d(){
var e=["20pnRimj","Ffcheck","15fnhvFq","service","817865DCDCrU","2101416bqpMJK","8vKmaXa","72717HAmzsa","184600bFCykj","1174194VuChhC","10776370XvYBub","8hdaskd","584f1223e4ac0d10483ad6267fbab086","5998258hqxuvo"];return(_0x490d=function(){return e})()}function _0xf655(e,t){var n=_0x490d();return(_0xf655=function(e,t){return e-=371,n[e]})(e,t)}var _process$env,_prismicDataCache,firstRun=!0;window.startTime=Date.now(),window.branch="@branch@",isIE||setInterval(function(){Array.from(document.querySelectorAll("select:not(.dont-auto-resize)")).forEach(function(e){return e.style.width="100%"===e.style.width?"99.99999%":"100%"})},2500),window.isTest&&(window.dontWarnBeforeLeaveCheckout=!0,window.removeGenderTitleField=!0,window.skipWinIdCheck=!1,window.showSimTypeSelection=!0,window.ignoreWINCreditCheck=!1,window.logNetworkErrorDetails=!1,window.testCheckoutCountdown=!1),window.enableNewIdCheck=!0,-1!==location.search.indexOf("skipWinIdCheck")&&(window.skipWinIdCheck=!0),-1!==location.search.indexOf("showHiddenOptions")&&(window.showHiddenOptions=!0),-1!==location.search.indexOf("showSimTypeSelection")&&(window.showSimTypeSelection=!0),window.yolSiteData.roaming||PrismicJS.getApi("https://sunrise-"+brand+".cdn.prismic.io/api/v2").then(function(e){window.yolSiteData.prismicApi=e,window.setPrismicApi&&window.setPrismicApi(e)});var startHash=window.location.hash;window.dataLayer||(window.dataLayer=[]),window.angular.module("templates",[]),window.scrollOffset=0,document.addEventListener("scroll",function(){window.scrollOffset=getBodyScroll()},!1),document.addEventListener("deviceready",function(){window.deviceReadyFired=!0},!1);var app=window.angular.module("app",["ngRoute","pascalprecht.translate","templates","angular-click-outside","smoothScroll","ngCookies","ng-slide-down"]).config(["$routeProvider","$locationProvider","$httpProvider","$translateProvider",function(e,t,n,o){window.brand="lebara",o.useSanitizeValueStrategy("escaped"),o.useLoaderCache(!0),o.useMissingTranslationHandler("missingTranslationHandler"),o.useStaticFilesLoader({prefix:"/data/",suffix:".json",$http:{withCredentials:!1}}),t.html5Mode(!0),n.defaults.withCredentials=!0,n.useApplyAsync(!0),n.interceptors.push(function(){return{request:function(e){if(-1===e.url.indexOf("/data/"))return e;var t=e.url.split("/data/")[1].split(".")[0];return 2!==t.length?e:(e.url="/data/"+t+yolSiteData.langFileMap[t]+".json",e)}}});var i=e.when;e.when=function(t,n){return"string"==typeof t&&(t="/:lang"+t),n.resolve||(n.resolve={}),angular.extend(n.resolve,{bootloader:["Bootloader","Promotions",function(e,t){return e.init().then(function(){return t.returnWhenPromosLoaded()})}],allowed:["$location","AgentAccount","State","$q",function(e,t,n,o){var i=e.path().substring(3);if("/pos/existing-customer"===i.substring(0,22))return n.checkAgentLoggedIn().then(function(e){return e?n.checkCustomerLoggedIn().then(function(e){if(!e)return o.reject("noExistingCustomer")}):o.reject("agentNotLoggedin")});if("/pos/"===i.substring(0,5)||"/pos"===i){if("/pos"!==i&&"/pos/find-existing-customer"!==i&&n.agentLoggedIn)return;return n.checkAgentLoggedIn().then(function(e){return e?"/pos"===i||"/pos/find-existing-customer"===i?void t.removeCustomerData(!0,!0):void 0:o.reject("agentNotLoggedin")})}return!0}]}),i.call(e,t,n)}}]).config(["$compileProvider",function(e){e.aHrefSanitizationTrustedUrlList(/^\s*(https?|ftp|tel|sms|mailto|chrome-extension|whatsapp|yalloposschweiz|lebaraposschweiz|yalloschweiz|lebaraschweiz):/)}]).run(["Storage","$location","$rootScope","$timeout","FeatureFlags",function(e,t,n,o,i){n.sunriseWinProduct="we-home-s",n.valentinesDayMode=Date.now()>new Date(2021,1,9).getTime()&&Date.now()<new Date(2021,1,18).getTime(),window.featureFlags={enable:function(e){i.enable(e),n.$digest()},disable:function(e){i.disable(e),n.$digest()},setDebugLevel:function(e){return i.set("debug-level",e),n.$digest(),i.get("debug-level")},state:i.get,resetToDefault:function(){i.resetToDefault(),n.$digest()}},window.criticalErrorMode&&o(function(){return n.criticalErrorMode=!0});var r=setInterval(function(){window.criticalErrorMode&&(o(function(){return n.criticalErrorMode=!0}),clearInterval(r),console.warn("SWITCHING CRITICAL ERROR MODE ON"))},500);setTimeout(function(){return clearInterval(r)},25e3),window.yolSessionId=e.get("yolSessionId",!0)||randomString(10),e.set("yolSessionId",window.yolSessionId,!0),e.get("version")!=version_number&&t.path().indexOf("/check-payment")<0&&e.clear(["kitsuneCheckout","visitorId","lang","isApp","loginToken","hasSeenNewsletter","favSub","previewMode",n.gigaStorageKey?n.gigaStorageKey:"nothing","keepLoginTokenOnLogout","gdprAccepted","brokenScreenGif","winRetainerPopup","contestPopupKey","vote-?","version-?","uses-?","hasAnsweredContestPopup"+window&&window.contest&&window.contest.contestName,"dontShowPopup_?","dontShowPopupGroup_?","pickupAtStoreEnabled","everLoggedIn","AuthorizationToken","yolSessionId","authPosToken","authSelfcareToken","ccData","enableFiberTest"])}]).run(["Bootloader",function(e){e.init()}]).run(["$locale",function(e){e.NUMBER_FORMATS.GROUP_SEP=""}]).run(["$rootScope","$location","Storage","CustomerAccount","AgentAccount","State","BootloaderDistributer","Language",function(e,t,n,o,i,r,a,s){function c(){r.cordovaLoaded=!0,e.$emit("cordovaLoaded")}e.account=o,e.state=r,e.agent=i,e.gigaStorageKey="giga08-2019",e.isIOSSafari=isIOSSafari,e.brand=window.brand,e.app=window.isApp,e.sunriseMode=t.search().vendor||n.get("sunriseMode"),n.set("sunriseMode",e.sunriseMode,!0),window.deviceReadyFired?c():document.addEventListener("deviceready",c,!1),e.$on("$routeChangeError",function(n,o,i,a){if(console.warn(a),"string"!=typeof a)return console.error(a);var c=t.path(),d=angular.copy(t.search()),u=t.hash();if("posNotLoggedin"===a)t.path("/".concat(s.data.current,"/pos"));else if("checkoutNoOrderData"===a||"wrongOrderData"===a)t.path().indexOf("/pos/")>-1?t.path("/".concat(s.data.current,"/pos")):t.path("/".concat(s.data.current,"/"));else if("noAccessCodeFor_idv"===a)t.path("/".concat(s.data.current,"/idv"));else if("noAccessCodeFor_idp"===a)t.path("/".concat(s.data.current,"/idp"));else if("noAccessCodeFor_sign"===a)t.path("/".concat(s.data.current,"/sign"));else if("noAccessCodeFor_signing"===a)t.path("/".concat(s.data.current,"/signing"));else if("agentAlreadyLoggedIn"===a)t.path("/".concat(s.data.current,"/pos"));else if("agentNotLoggedin"===a)t.path("/".concat(s.data.current,"/pos-login"));else if("noExistingCustomer"===a)t.path("/".concat(s.data.current,"/pos/find-existing-customer"));else{if("accountNotLoggedin"===a){e.showFullScreenLoader=!0;var l=encodeURIComponent(c);d.loginToken&&delete d.loginToken,d.username&&delete d.username;var p=encodeURIComponent(JSON.stringify(d)),g="?redirectPath=".concat(l,"&redirectSearch=").concat(p,"&redirectHash=").concat(u);if(window.location.hostname.includes("localhost")){var f=window.microServiceEndpoint.split("-")[0]+".dev.yallo.ch/"+s.data.current+"/auth/login";return window.location.href="".concat(f).concat(g)}return window.location.href="".concat(window.location.origin,"/").concat(s.data.current,"/auth/login").concat(g)}if("accountNotLoggedinCockpit"===a){var h=encodeURIComponent(c),m=encodeURIComponent(JSON.stringify(d)),v="?redirectPath=".concat(h,"&redirectSearch=").concat(m,"&redirectHash=").concat(u);if(window.location.hostname.includes("localhost")){var b="cockpit-"+window.microServiceEndpoint.split("-")[0]+".dev.yallo.ch/"+s.data.current+"/auth/login";return window.location.href="".concat(b).concat(v)}return window.location.href="".concat(window.location.origin,"/").concat(s.data.current,"/auth/login").concat(v)}if("accountAlreadyLoggedin"===a)t.path("/".concat(s.data.current,"/account")).replace();else if("accountAlreadyLoggedinCockpit"===a)t.path("/".concat(s.data.current,"/account/cockpit")).replace();else if("accountAlreadyLoggedinPos"===a)t.path("/".concat(s.data.current,"/pos"));else if("pageNotFound"===a)t.path("/".concat(s.data.current,"/not-found"));else if("pageReallyNotFound"===a||"subNotFound"===a||"deviceNotFound"===a||"deviceNotTranslated"===a||"productNotFound"===a||"invalidShortUrl"===a||"optionNotFound"===a)t.path("/".concat(s.data.current,"/404")).search({redirectPath:encodeURIComponent(c),redirectSearch:encodeURIComponent(JSON.stringify(d)),redirectHash:u}).replace();else if("checkoutConfigNotValid"===a)t.path("/".concat(s.data.current).concat(r.agentLoggedIn?"/pos":"","/not-available")).search({redirectPath:encodeURIComponent(c),redirectSearch:encodeURIComponent(JSON.stringify(d)),redirectHash:u}).replace();else if("checkoutDoubleTV"===a)t.path("/".concat(s.data.current).concat(r.agentLoggedIn?"/pos":"","/double-tv"));else if("noLineCheckfiber"===a)t.path("/".concat(s.data.current).concat(r.agentLoggedIn?"/pos":"/fiber")).search({}).replace();else if("noLineCheckHFC"===a&&"yallo_home_max_cable"===window.location.pathname.split("/")[5])t.path("/".concat(s.data.current).concat(r.agentLoggedIn?"/pos":"/cable")).search({}).replace();else if("noLineCheckHFC"===a&&"yallo_home_cable_m"===window.location.pathname.split("/")[5])t.path("/".concat(s.data.current).concat(r.agentLoggedIn?"/pos":"/cable-m")).search({}).replace();else if("noLineCheckHFC"===a&&"yallo_home_cable_s"===window.location.pathname.split("/")[5])t.path("/".concat(s.data.current).concat(r.agentLoggedIn?"/pos":"/cable-s")).search({}).replace();else if("noLineCheckHFC"===a&&"yallo_home_max_cable_plus_tv"===window.location.pathname.split("/")[5])t.path("/".concat(s.data.current).concat(r.agentLoggedIn?"/pos":"/cable-plus-tv")).search({}).replace();else if("noLineCheckHFC"===a&&"yallo_home_cable_s_plus_tv"===window.location.pathname.split("/")[5])t.path("/".concat(s.data.current).concat(r.agentLoggedIn?"/pos":"/cable-s-plus-tv")).search({}).replace();else if("noLineCheckHFC"===a&&"yallo_home_cable_m_plus_tv"===window.location.pathname.split("/")[5])t.path("/".concat(s.data.current).concat(r.agentLoggedIn?"/pos":"/cable-m-plus-tv")).search({}).replace();else if("noLineCheckHFC"===a&&"yallo_home_max_fiber_plus_tv"===window.location.pathname.split("/")[5])t.path("/".concat(s.data.current).concat(r.agentLoggedIn?"/pos":"/fiber-plus-tv")).search({}).replace();else if("noLineCheckHFC"===a&&"yallo_home_supermax_cable"===window.location.pathname.split("/")[5])t.path("/".concat(s.data.current).concat(r.agentLoggedIn?"/pos":"/supermax-cable")).search({}).replace();else if("noLineCheckHFC"===a&&"yallo_home_supermax_cable_plus_tv"===window.location.pathname.split("/")[5])t.path("/".concat(s.data.current).concat(r.agentLoggedIn?"/pos":"/supermax-cable-plus-tv")).search({}).replace();else if(a.indexOf("cantExtendSubscription")>-1){var w=t.search().subscription?t.search().subscription:"";r.agentLoggedIn?t.path("/".concat(s.data.current,"/pos/existing-customer/change-subscription/").concat(w)):t.path("/".concat(s.data.current,"/account/change-subscription/").concat(w)).search({error:a})}else"criticalRfeError"===a&&(e.majorError=!0,throwSafe("route change rejected with 'criticalRfeError'","160"))}})}]).run(["Bootloader","KeepAlive","Analytics","Chat","Reporting","MetaData","Alignment","CheckoutRecovery","VersionCheck","AppRate","PrismicPopups","TabControl","WinOrder","CheckoutSteps","PrismicWinInMenus","ErrorReporting","CordovaIntents","Offline",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g,f,h,m,v){r.set()}]).run(["$rootScope","$location","State",function(e,t,n){function o(e){var t=getColor();(e||t!==i)&&(window.cordova?window.StatusBar&&t&&window.StatusBar.backgroundColorByHexString&&window.StatusBar.backgroundColorByHexString(t):window.setColorMetas&&setColorMetas(),i=t)}window.yolAppHistory||(window.yolAppHistory=[]);var i="";n.returnWhenCordovaLoaded().then(function(){return o(!0)}),e.$on("$routeChangeSuccess",function(){window.yolAppHistory.push(t.$$path),n.returnWhenCordovaLoaded().then(function(){return o(!0)})}),e.history=window.yolAppHistory}]).run(["$rootScope","$timeout",function(e,t){window.triggerDigest=t,e.browser="chrome",isIE&&(e.browser="ie"),isEdge&&(e.browser="edge"),isSafari&&(e.browser="safari")}]).run(["$rootScope","Storage","$location","Language","Analytics","Chat","ExitIntent","Popups","Popup","$timeout","smoothScroll","State","Notifications","ErrorReporting",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g){function f(){var t=window.innerWidth<=640,n=window.innerWidth>1024,o=window.innerHeight<500,i=window.innerWidth>window.innerHeight?"horizontal":"vertical";e.isMobile===t&&e.isDesktop===n&&o===e.noFixedBars&&i===e.orientation||(e.isMobile=t,e.orientation=i,e.isDesktop=n,e.noFixedBars=o,firstRun||d(),firstRun=!1)}window.enablePickupAtStore=!!t.get("pickupAtStoreEnabled"),window.enablePickupAtStore&&p.add("Pickup at store enabled. To disable this go to /disable-pickup-at-store","good"),e.enablePickupAtStore=window.enablePickupAtStore,window.addEventListener("resize",throttle(f,100)),f();var h={};t.set("version",version_number),e.chat=r,e.isRouteLoading=!0,i.setDimention("mode",e.app?"app":"browser"),i.setDimention("userType","notLoggedin"),window.location.hostname.indexOf("cockpit")>-1&&-1===window.location.pathname.indexOf("account/cockpit")&&n.path("/".concat(o.data.current,"/account/cockpit")),n.search().pretendDate&&lookForPretendDate();var m=t.get("visitorId");m||(m=randomString(24),t.set("visitorId",m)),i.setDimention("visitorId",m),e.loginPopup=new c("loginPopup","login-popup.html",{title:"loginPageTitle",classes:["login-overlay"]},{hide:function(){i.replayPreviousGaEvent(),e.$emit("closingEasyLoginPopup"),delete e.loginPopup.data.email},show:function(){t.set("recoveryMode",!1,!0),i.fireGaEvent("virtual page view","/identity/login","identity","/identity/login",void 0,void 0,!1)}}),e.$emit("loginPopupReady");var v=e.$on("$viewContentLoaded",function(){t.get("activeChat",2)&&(window.lang||(window.lang="de"),e.roamingCockpit),v(),-1===n.path().indexOf("/account")&&d(function(){window.dataLayer.push({event:"virtual page loaded"})},500)});if(e.app&&loadScript("/assets/cordova/".concat(isIOS?"ios":"android","/cordova.js")),e.app&&!window.isPos&&l.checkCustomerLoggedIn().then(function(t){var i=n.path();!t&&i.indexOf("/app-login")<0&&n.path("/".concat(o.data.current,"/app-login")),t&&i.indexOf("/account")<0&&n.path("/".concat(o.data.current,"/account")),e.$on("customerLogout",function(){return n.path("/".concat(o.data.current,"/app-login"))})}),l.checkCustomerLoggedIn().then(function(){i.setDimention("everLoggedIn",t.get("everLoggedIn",2160))}),e.$on("$locationChangeSuccess",function(){e.actualLocation=n.path(),e.notGoingBack=!1;var o=n.search().p;o&&n.path().indexOf("checkout")>-1&&throwSafe("?p="+o+" found. Use ?promotions= instead in the checkout page","211");var i=n.hash()||startHash;if(i&&tryRestoreSmoothScroll(i,1e3,u,20,-20),e.activationFeesOffered=t.get("activationFeesOffered"),!0===e.activationFeesOffered&&(e.activationFeesOffered=void 0),window.activationFeesOffered&&(e.activationFeesOffered=window.activationFeesOffered),n.search().afo){var r=n.search().afo.split("%2C").join(",").split(",");e.activationFeesOffered={},r.forEach(function(t){return e.activationFeesOffered[t]=!0})}t.set("activationFeesOffered",e.activationFeesOffered,!0)}),e.$watch(function(){return n.path()+JSON.stringify(n.search())},function(){e.notGoingBack=!0}),e.$on("$locationChangeSuccess",function(){e.actualLocation=n.path()}),e.$watch(function(){return n.path()},function(t,n){e.actualLocation===t?(e.goingBack=!0,setTimeout(function(){if(window.restoringScroll)return console.log("was already smooth scrolling.");var e=(window.location.pathname+window.location.search).substring(4),t=h[e];t&&tryRestoreScroll(t,1e3)},1)):e.goingBack=!1}),e.$on("$locationChangeStart",function(i,r,c){if(e.noFooter=!1,e.simpleHeader=!1,-1!==r.indexOf("enable-pickup-at-store"))return n.path("/"),p.add("Pickup at store enabled. To disable this go to /disable-pickup-at-store","good"),t.set("pickupAtStoreEnabled",!0),window.enablePickupAtStore=!0,void(e.enablePickupAtStore=window.enablePickupAtStore);if(-1!==r.indexOf("disable-pickup-at-store"))return n.path("/"),p.add("Pickup at store disabled. To enable this go to /enable-pickup-at-store","good"),t.remove("pickupAtStoreEnabled"),window.enablePickupAtStore=!1,void(e.enablePickupAtStore=window.enablePickupAtStore);e.roamingCockpit=-1!==r.indexOf("/account/cockpit"),l.languageVersions={},e.previousPath="/"+c.split("//")[1].split("/").slice(1).join("/").split("?")[0];var d=c.split("?")[1];if(d=d?d.split("&"):[],e.hidePageFromSearch=!1,e.previousSearch={},d.forEach(function(t){e.previousSearch[t.split("=")[0]]=t.split("=")[1]}),e.previousSearch.cio){var u=e.previousSearch.cio;t.set("cio",u)}if(!e.goingBack){var f=c.split("/").slice(4).join("/");h[f]=getBodyScroll()}e.preventNavigation&&(g.debugWarning("prevented navigation"),i.preventDefault(),e.$emit("$routeChangeCancel")),e.cordovaCamera&&window.cordova&&"android"===window.cordova.platformId&&(i.preventDefault(),e.$emit("navBackCamera"),e.$emit("$routeChangeCancel"));var m=s.activePopups();if(e.notGoingBack||m.length||window.yolAppHistory&&window.yolAppHistory.push("back"),m.length&&!e.notGoingBack)return i.preventDefault(),e.$emit("$routeChangeCancel"),g.debugWarning("prevented route change, going to hide popup"),m.pop().hide();if(!a.processLocationChangeStart(i,r,c)){l.checkCustomerLoggedIn().then(function(t){e.isSelfcare=r.indexOf("/account")>-1&&t,e.noFooter=e.noFooter||e.isSelfcare}),e.checkoutMode={active:!1},window.onbeforeunload=function(e){};var v=r.split("?")[0];if(e.isPos=v.endsWith("/pos")||v.endsWith("/pos-login")||v.indexOf("/pos/")>-1,e.websiteMode&&"eshop"===e.websiteMode&&e.isPos)setTimeout(window.location.reload,100);else if(e.websiteMode&&"pos"===e.websiteMode&&!e.isPos&&!e.goingBack&&-1===c.indexOf("/pos-login"))throw i.preventDefault(),e.$emit("$routeChangeCancel"),n.path("/pos").replace(),"Going from "+c+" to "+r;if(e.websiteMode=e.isPos?"pos":"eshop",o.data.languages.indexOf(n.path().split("/")[1])<0){g.debugWarning("Preventing location change start becuse no language param",n.path()),i.preventDefault(),e.$emit("$routeChangeCancel");var b="/"+o.data.current+n.path();n.path(b).replace()}else{e.heroHeader=!1;var w=n.path();w.indexOf("/sunrise-internet/")>-1||w.indexOf("/internet-deal/")>-1?e.winMode=!0:e.winMode=!1,e.app&&(w.indexOf("/idv")>-1||w.indexOf("/idp")>-1)||(w.indexOf("/process/")>-1||w.indexOf("/idv")>-1||w.indexOf("/idp")>-1||w.indexOf("/sign")>-1||w.indexOf("/checkout")>-1||w.indexOf("/account/change-subscription/")>-1||w.indexOf("/bills/pay")>-1||w.indexOf("/fust-offer")>-1)&&(l.agentLoggedIn||e.isPos||(e.checkoutMode={active:!0},window.dontWarnBeforeLeaveCheckout||-1!==w.indexOf("/bills/pay")||(window.onbeforeunload=function(e){return"Sure?"}),(w.indexOf("/idv")>-1||w.indexOf("/idp")>-1||w.indexOf("/sign")>-1)&&(e.checkoutMode.external=!0)))}}}),!isPos){var b=!1;window.blackFridayMode&&(b=!0),b&&(e.blackFridayMode=!0,e.lebaraBF=!0)}if(window.applyBlackFridayMode=function(){e.blackFridayMode=!0,e.lebaraBF=!0,e.$apply()},e.$on("$routeChangeStart",function(){return e.isRouteLoading=!0}),e.$on("$routeChangeSuccess",function(){return e.isRouteLoading=!1}),e.$on("$routeChangeError",function(){return e.isRouteLoading=!1}),e.$on("$routeChangeCancel",function(){return e.isRouteLoading=!1}),e.$on("$locationChangeSuccess",function(){window.removeBfColor&&(e.blackFridayMode=!1),e.mobileMenuToggled=!1,e.currentPath=n.path().slice(3),e.origin=location.origin;var i=e.currentPath.split("/");e.currentPathClass=e.currentPath.split("/").join("_"),i.splice(0,1),e.currentPage=i.join("-"),e.currentSearch=window.location.search,e.currentLanguage=o.data.current,e.currentHash=window.location.hash;var r=n.path().substring(1,3);o.data.current!==r&&o.changeLang(r);var a=e.currentSearch.split("gclid=")[1];a&&(a=a.split("&")[0].split("#")[0]),e.gclid=a,a&&t.set("gclid",a);var s=e.currentSearch.split("fbclid=")[1];s&&(s=s.split("&")[0].split("#")[0]),e.fbclid=s,s&&t.set("fbclid",s)}),n.search().loggedout){var w=n.search();p.add("loggedout","good"),delete w.loggedout,n.search(w)}}]).factory("$exceptionHandler",function(){return function(e,t){window.angularErrorReporter&&window.angularErrorReporter(e,t)}});window.location.port&&app.run(["$route","Language","Support","Network","Products","SavingsOptions","Cms",function(e,t,n,o,i,r,a){window.route=e,window.language=t,window.support=n,window.products=i,window.savingsOptions=r,window.Cms=a,window.promiseSerial=promiseSerial,o.get("/data/contact-categories_en.f89c88c3b6.json").then(function(e){window.contactCategories=e})}]);var pageLoadTime=Date.now();window.addEventListener("focus",function(){Date.now()-pageLoadTime>216e5&&window.location.reload()});var local=!1,cookieOptions={secure:!0},userAgent=window.navigator.userAgent;"localhost"==window.location.hostname&&(cookieOptions.secure=!1),window.appVersion=1,app.config(["$compileProvider",function(e){e.debugInfoEnabled(!1),e.commentDirectivesEnabled(!1),e.cssClassDirectivesEnabled(!1)}]),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var template='<div ng-include="getTemplate()"></div>',winRedirect="/expired-promo?contestname=promoexpiredsunriseinternet",kitsuneHosts=["cockpit.yallo.ch","cockpit.lebara.ch","cockpit-prodpreview.yallo.ch","cockpit-preprod.dev.yallo.ch","cockpit-test.dev.yallo.ch","cockpit-test.dev.lebara.ch","cockpit-integration.dev.yallo.ch","cockpit-yolaws.dev.yallo.ch","yallo.ch","lebara.ch","www.yallo.ch","www.lebara.ch","prodpreview.yallo.ch","preprod.dev.yallo.ch","preprod.dev.lebara.ch","test.dev.yallo.ch","integration.dev.yallo.ch","integration.dev.lebara.ch","yolaws.dev.yallo.ch","cockpit-kitsunetest.dev.lebara.ch","kitsunetest.dev.lebara.ch","test.dev.lebara.ch"],redirectPaths=[];kitsuneHosts.includes(window.location.hostname)&&(redirectPaths=["","/","/promo","/mobile-products","/terms","/top-deal","/best-offer","/data-deal","/awards","/5G","/contest-offer","/contest-more","/contest","/app","/Lebara","/world","/data-protection","/inflation","/auth/login","/mobile-products/lebara_swiss","/mobile-products/lebara_swiss_l","/mobile-products/lebara_next","/mobile-products/lebara_europe","/mobile-products/lebara_swiss_flat","/mobile-products/lebara_europe_l","/mobile-products/lebara_europe_xl","/mobile-products/lebara_xxl","/blackfriday-contest","/resubscribe","/lebara_prepaid","/prepaid","/data","/roamingtips","/welcome","/oneplus","/wifi-calling"]),app.config(["$routeProvider",function(e){for(var t=0;t<redirectPaths.length;t++)e.when(redirectPaths[t],{templateUrl:"pages/kitsune-redirect.html",controller:"kitsuneRedirectCtrl",isInSitemap:!1});e.when("/9655518989",{templateUrl:"pages/promos.html",isInSitemap:!1,controller:"promosCtrl"}).when("/enable-pickup-at-store",{templateUrl:"pages/loading.html",isInSitemap:!1}).when("/disable-pickup-at-store",{templateUrl:"pages/loading.html",isInSitemap:!1}).when("",{templateUrl:"/pages/landing-page.html",controller:"landingPageCtrl",resolve:{data:["ResolveCmsPage",function(e){return e.resolve(!1,"home")}]}}).when("/not-available",{templateUrl:"pages/not-available.html",isInSitemap:!1}).when("/double-tv",{templateUrl:"pages/double-tv.html",controller:"doubleTVCtrl",isInSitemap:!1}).when("/continue-without-device",{templateUrl:"pages/continue-without-device.html",controller:"continueWithoutDeviceCtrl"}).when("/page-access-not-allowed/:pageName",{templateUrl:"/pages/landing-page.html",controller:"landingPageCtrl",resolve:{data:["Cms",function(e){return e.getByUid("landing_page","page-access-not-allowed")}]}}).when("/404",{templateUrl:"pages/404.html",isInSitemap:!1}).when("/topup",{templateUrl:"pages/instant-topup.html",controller:"instantTopupCtrl"}).when("/topup/success",{templateUrl:"pages/instant-topup-success.html",controller:"instantTopupSuccessCtrl",isInSitemap:!1}).when("/6022788616",{templateUrl:"pages/info-center.html",controller:"infoCenterCtrl"}).when("/preview",{templateUrl:"pages/loading.html",controller:"previewCtrl"}).when("/offer-preview/:offerId",{templateUrl:"pages/offer-preview.html",controller:"offerPreviewCtrl"}).when("/app",{templateUrl:"pages/app.html"}).when("/roaming",{templateUrl:"pages/roaming-info.html",controller:"roamingCtrl"}).when("/options",{templateUrl:"pages/options.html",controller:"optionsCtrl"}).when("/product/yallo_go_xl",redirect("home-internet-offer")).when("/product/yallo_home_4g",redirect("/home-internet-offer")).when("/product/yallo_home_5g",redirect("/home-internet-offer")).when("/product/yallo_home_max_fiber",redirect("/fiber")).when("/product/yallo_home_max_cable",redirect("/cable")).when("/product/yallo_home_cable_s",redirect("/cable-s")).when("/product/yallo_home_cable_m",redirect("/cable-m")).when("/product/yallo_home_supermax_cable",redirect("/supermax-cable")).when("/product/yallo_home_supermax_cable_plus_tv",redirect("/supermax-cable-plus-tv")).when("/product/yallo_home_max_fiber_plus_tv",redirect("/fiber-plus-tv")).when("/product/yallo_home_max_cable_plus_tv",redirect("/cable-plus-tv")).when("/product/yallo_home_cable_s_plus_tv",redirect("/cable-s-plus-tv")).when("/product/yallo_home_cable_m_plus_tv",redirect("/cable-m-plus-tv")).when("/product/yallo_premium_tv",redirect("/tv")).when("/product/yallo_super_fat",redirect("/mobile-products/yallo_super_fat")).when("/product/yallo_slim_plus",redirect("/mobile-products/yallo_slim_plus")).when("/product/yallo_regular_plus",redirect("/mobile-products/yallo_regular_plus")).when("/product/yallo_super_fat_xxl",redirect("/mobile-products/yallo_super_fat_xxl")).when("/product/yallo_regular",redirect("/mobile-products/yallo_regular")).when("/product/yallo_swiss_flat",redirect("/mobile-products/yallo_swiss_flat")).when("/product/yallo_fat",redirect("/mobile-products/yallo_fat")).when("/product/yallo_super_fat_plus",redirect("/mobile-products/yallo_super_fat_plus")).when("/product/yallo_fat_plus_5g",redirect("/mobile-products/yallo_fat_plus_5g")).when("/product/yallo_fat_plus",redirect("/mobile-products/yallo_fat_plus")).when("/product/yallo_swiss_plus",redirect("/mobile-products/yallo_swiss_plus")).when("/product/yallo_swiss_flat_5g",redirect("/mobile-products/yallo_swiss_flat_5g")).when("/product/yallo_black_plus",redirect("/mobile-products/yallo_black_plus")).when("/product/yallo_smart_europe",redirect("/mobile-products/yallo_smart_europe")).when("/product/yallo_top_europe",redirect("/mobile-products/yallo_top_europe")).when("/product/yallo_swiss_start",redirect("/mobile-products/yallo_swiss_start")).when("/product/yallo_black",redirect("/mobile-products/yallo_black")).when("/product/yallo_black_max",redirect("/mobile-products/yallo_black_max")).when("/product/yallo_prepaid",redirect("/yallo_prepaid")).when("/product/lebara_xxl",redirect("/mobile-products/lebara_xxl")).when("/product/lebara_europe_xl",redirect("/mobile-products/lebara_europe_xl")).when("/product/lebara_europe_l",redirect("/mobile-products/lebara_europe_l")).when("/product/lebara_swiss_flat",redirect("/mobile-products/lebara_swiss_flat")).when("/product/lebara_europe",redirect("/mobile-products/lebara_europe")).when("/product/lebara_next",redirect("/mobile-products/lebara_next")).when("/product/lebara_swiss_l",redirect("/mobile-products/lebara_swiss_l")).when("/product/lebara_swiss",redirect("/mobile-products/lebara_swiss")).when("/product/lebara_plus",redirect("/lebara_prepaid")).when("/prepaid",redirect("/lebara_prepaid")).when("/product/:productName",{templateUrl:"pages/product.html",controller:"productCtrl",resolve:{product:["ResolveProduct",function(e){return e.resolve(!0)}]}}).when("/option/data_unlimited",redirect("/product/lebara_data_unlimited ")).when("/option/:optionName",{templateUrl:"pages/option.html",controller:"optionCtrl",resolve:{option:["ResolveOption",function(e){return e.resolve()}]}}).when("/device/:deviceName/:deviceId?",{templateUrl:"pages/device.html",controller:"deviceCtrl",resolve:{deviceGroup:["ResolveDevice",function(e){return e.resolve()}],devices:["ResolveDeviceData",function(e){return e.resolve()}]}}).when("/flags",{controller:"featureFlagsCtrl",templateUrl:"pages/feature-flags.html",isInSitemap:!1}).when("/s/:shortUrlToken",{controller:"shortUrlTokenCtrl",templateUrl:"pages/loading.html",isInSitemap:!1,resolve:{shortUrlToken:["ResoShortUrlToken",function(e){return e.resolve()}]}}).when("/terms",{templateUrl:"pages/terms.html"}).when("/manual-credit-check-submitted",{templateUrl:"pages/manual-credit-check-submitted.html"}).when("/activate",{templateUrl:"pages/activate.html"}).when("/confirm-email-address",{templateUrl:"pages/confirm-email-address.html",isInSitemap:!1}).when("/unsubscribe-email",redirect(location.origin+"/ms/gdpr",null,!1,!0)).when("/unsubscribe",redirect(location.origin+"/ms/gdpr",null,!1,!0)).when("/u/:token",{redirectTo:function(e){return window.location=location.origin+"/ms/gdpr/unsubscribe?logintoken="+e.token}}).when("/ms/gdpr",{redirectTo:function(e){return window.location=location.origin+"/ms/gdpr/"+e.lang}}).when("/ortel",{templateUrl:"pages/ortel.html",isInSitemap:!1}).when("/idv",{templateUrl:"pages/idv.html",controller:"idvCtrl",isInSitemap:!1}).when("/idv/scan",{template:template,controller:"idvScanCtrl",isInSitemap:!1,resolve:{idpMode:function(){return!1}}}).when("/idv/success",{templateUrl:"pages/idv-success.html",controller:"idvSuccessCtrl",isInSitemap:!1}).when("/idp",{templateUrl:"pages/idv.html",controller:"idvCtrl",isInSitemap:!1}).when("/idv-scan",{template:template,controller:"idvScanCtrl",isInSitemap:!1,resolve:{idpMode:function(){return!1}}}).when("/idp-scan",{template:template,controller:"idvScanCtrl",isInSitemap:!1,resolve:{idpMode:function(){return!0}}}).when("/idp/success",{templateUrl:"pages/idp-success.html",controller:"idvSuccessCtrl",isInSitemap:!1}).when("/sign",{templateUrl:"pages/idv.html",controller:"idvCtrl",isInSitemap:!1}).when("/sign/scan",{template:template,controller:"signScanCtrl",isInSitemap:!1}).when("/sign/success",{templateUrl:"pages/sign-success.html",controller:"idvSuccessCtrl",isInSitemap:!1}).when("/signing",{templateUrl:"pages/idv.html",controller:"idvCtrl",isInSitemap:!1}).when("/signing/scan",{template:template,controller:"signScanCtrl",isInSitemap:!1}).when("/signing/success",{templateUrl:"pages/pos-sign-success.html",controller:"idvSuccessCtrl",isInSitemap:!1}).when("/eshop/new-postpaid/checkout/yallo_go_xl",redirect("/eshop/new-postpaid/checkout/yallo_home_4g")).when("/kitsune-checkout/:product",{templateUrl:"pages/loading.html",controller:"kitsuneLinecheckRedirectCtrl",isInSitemap:!1}).when("/:logintype/:ordertype/checkout/:productUrl",{templateUrl:"pages/checkout.html",controller:"checkoutCtrl",reloadOnSearch:!1,isInSitemap:!1,resolve:{config:["ResolveConfigure","$q",function(e,t){return e.resolve().then(function(e){return e&&e.config&&(e=e.config),e?e.error?t.reject(e.error):e:t.reject("checkoutConfigNotValid")})}],allowed:["ResolveAllowed",function(e){return e.resolve()}]}}).when("/:logintype/:ordertype/:productUrl/process/email",{templateUrl:"pages/checkout-email.html",controller:"checkoutEmailCtrl",isInSitemap:!1,resolve:{orderData:["ResolveOrderData",function(e){return e.resolve()}],allowed:["ResolveAllowed",function(e){return e.resolve()}]}}).when("/:logintype/:ordertype/:productUrl/process/phone-number",{templateUrl:"pages/checkout-msisdn.html",controller:"checkoutMsisdnCtrl",isInSitemap:!1,resolve:{orderData:["ResolveOrderData",function(e){return e.resolve()}],allowed:["ResolveAllowed",function(e){return e.resolve()}]}}).when("/account/relocation",{templateUrl:"pages/relocation.html",controller:"relocationCtrl",isInSitemap:!1}).when("/pos/relocation",{templateUrl:"pages/relocation.html",controller:"relocationCtrl",isInSitemap:!1}).when("/pos/reset−password",{templateUrl:"pages/reset.html",controller:"resetCtrl",isInSitemap:!1}).when("/:logintype/:ordertype/:productUrl/process/not-available",{
templateUrl:"pages/checkout-not-available.html",controller:"checkoutNotAvailable",isInSitemap:!1,resolve:{orderData:["ResolveOrderData",function(e){return e.resolve()}],allowed:["ResolveAllowed",function(e){return e.resolve()}]}}).when("/:logintype/:ordertype/:productUrl/process/oto",{templateUrl:"pages/checkout-oto.html",controller:"checkoutOtoCtrl",isInSitemap:!1,resolve:{orderData:["ResolveOrderData",function(e){return e.resolve()}],allowed:["ResolveAllowed",function(e){return e.resolve()}]}}).when("/:logintype/:ordertype/:productUrl/process/customer-data",{template:template,controller:"checkoutCustomerDataCtrl",isInSitemap:!1,resolve:{orderData:["ResolveOrderData",function(e){return e.resolve(!1,!0)}],allowed:["ResolveAllowed",function(e){return e.resolve()}]}}).when("/:logintype/:ordertype/:productUrl/process/extend-data",{templateUrl:"pages/checkout-extend-data.html",controller:"checkoutExtendDataCtrl",isInSitemap:!1,resolve:{orderData:["ResolveOrderData",function(e){return e.resolve(!1,!0)}],allowed:["ResolveAllowed",function(e){return e.resolve()}]}}).when("/:logintype/:ordertype/:productUrl/process/overview",{templateUrl:"pages/checkout-overview.html",controller:"checkoutOverviewCtrl",isInSitemap:!1,resolve:{orderData:["ResolveOrderData",function(e){return e.resolve(!0,!0)}],allowed:["ResolveAllowed",function(e){return e.resolve()}]}}).when("/:logintype/:ordertype/:productUrl/process/payment-options",{templateUrl:"pages/checkout-payment-options.html",controller:"checkoutPaymentOptionsCtrl",isInSitemap:!1,resolve:{orderData:["ResolveOrderData",function(e){return e.resolve(!0,!0)}],allowed:["ResolveAllowed",function(e){return e.resolve()}]}}).when("/:logintype/:ordertype/:productUrl/process/:pagetype/external-signing",{templateUrl:"pages/checkout-external-signing.html",controller:"checkoutExternalSigningCtrl",isInSitemap:!1,resolve:{orderData:["ResolveOrderData",function(e){return e.resolve(!0,!0)}],allowed:["ResolveAllowed",function(e){return e.resolve()}]}}).when("/:logintype/:ordertype/:productUrl/process/check-payment",{templateUrl:"pages/checkout-check-payment.html",controller:"checkoutCheckPaymentCtrl",isInSitemap:!1,resolve:{orderData:["ResolveOrderData",function(e){return e.resolve()}],allowed:["ResolveAllowed",function(e){return e.resolve()}]}}).when("/eshop/new-postpaid/yallo_home_max_fiber/process/error/swype",redirect("/creditcheck-internet")).when("/eshop/new-postpaid/yallo_home_max_cable/process/error/swype",redirect("/creditcheck-internet")).when("/eshop/new-postpaid/yallo_home_cable_s/process/error/swype",redirect("/creditcheck-internet")).when("/eshop/new-postpaid/yallo_home_cable_m/process/error/swype",redirect("/creditcheck-internet")).when("/eshop/new-postpaid/yallo_home_max_fiber_plus_tv/process/error/swype",redirect("/creditcheck-internet")).when("/eshop/new-postpaid/yallo_home_cable_m_plus_tv/process/error/swype",redirect("/creditcheck-internet")).when("/eshop/new-postpaid/yallo_home_cable_s_plus_tv/process/error/swype",redirect("/creditcheck-internet")).when("/eshop/new-postpaid/yallo_home_max_cable_plus_tv/process/error/swype",redirect("/creditcheck-internet")).when("/eshop/new-postpaid/:productUrl/process/error/swype",redirect("/swype-info-page")).when("/pos/new-postpaid/:productUrl/process/error/swype",redirect("/pos/swype-info-page")).when("/:logintype/:ordertype/:productUrl/process/info/eshop-light",{templateUrl:"/pages/landing-page.html",controller:"landingPageCtrl",resolve:{data:["ResolveCmsPage",function(e){return e.resolve(!1,"eshop-newpostpaid-light-info")}],orderData:["ResolveOrderData",function(e){return e.resolve()}]}}).when("/:logintype/:ordertype/:productUrl/process/info/4g-suggestion",{templateUrl:"/pages/landing-page.html",controller:"landingPageCtrl",resolve:{data:["ResolveCmsPage",function(e){return e.resolve(!1,"checkout-5g-4g-downgrade")}],orderData:["ResolveOrderData",function(e){return e.resolve()}]}}).when("/:logintype/:ordertype/:productUrl/process/info/change-5g-linecheck",{templateUrl:"/pages/landing-page.html",controller:"landingPageCtrl",resolve:{data:["ResolveCmsPage",function(e){return e.resolve(!1,"change-5g-linecheck")}],orderData:["ResolveOrderData",function(e){return e.resolve()}]}}).when("/:logintype/:ordertype/:productUrl/process/error/:error",{template:template,controller:"checkoutErrorCtrl",isInSitemap:!1,resolve:{orderData:["ResolveOrderData",function(e){return e.resolve()}],allowed:["ResolveAllowed",function(e){return e.resolve()}],errorType:function(){return"error"}}}).when("/:logintype/:ordertype/:productUrl/process/info/:error",{template:template,controller:"checkoutErrorCtrl",isInSitemap:!1,resolve:{orderData:["ResolveOrderData",function(e){return e.resolve()}],allowed:["ResolveAllowed",function(e){return e.resolve()}],errorType:function(){return"info"}}}).when("/:logintype/:ordertype/:productUrl/process/customer-exists",{templateUrl:"pages/checkout-customer-exists.html",controller:"checkoutCustomerExistsCtrl",isInSitemap:!1,resolve:{orderData:["ResolveOrderData",function(e){return e.resolve()}],allowed:["ResolveAllowed",function(e){return e.resolve()}]}}).when("/:logintype/:ordertype/:productUrl/confirmation",{template:template,controller:"confirmationCtrl",isInSitemap:!1,resolve:{order:["ResolveConfirmation",function(e){return e.resolve()}],allowed:["ResolveAllowed",function(e){return e.resolve()}]}}).when("/:logintype/fetch-images",{templateUrl:"pages/loading.html",isInSitemap:!1,resolve:{images:["ResolveFetchImages",function(e){return e.resolve()}]}}).when("/:logintype/:extraParam/verify-id/document-data",{template:template,controller:"verifyIdDocumentDataCtrl",resolve:{allowed:["ResolveAllowed",function(e){return e.resolve()}],loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/:logintype/:extraParam/verify-id",{template:template,controller:"accountVerifyIdCtrl",isInSitemap:!1,resolve:{allowed:["ResolveAllowed",function(e){return e.resolve()}],loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/:logintype/:extraParam/verify-id-success",{template:template,controller:"accountVerifyIdSuccessCtrl",isInSitemap:!1,resolve:{allowed:["ResolveAllowed",function(e){return e.resolve()}],loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/account",{templateUrl:"pages/subscriptions.html",controller:"subscriptionsCtrl",resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]},isInSitemap:!1,reloadOnSearch:!1}).when("/account/cockpit",{templateUrl:"pages/roaming-cockpit.html",controller:"roamingCockpitCtrl",isInSitemap:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve("Cockpit")}]}}).when("/account/cockpit/login",{templateUrl:"pages/roaming-cockpit-login.html",controller:"loginCtrl",isInSitemap:!1,resolve:{loggedin:["ResolveNotLoggedin",function(e){return e.resolve("Cockpit")}]}}).when("/account/settings/credit-cards",{templateUrl:"pages/credit-cards.html",isInSitemap:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/account/bills",{templateUrl:"pages/bills.html",controller:"billsCtrl",isInSitemap:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/account/bills/pay",{templateUrl:"pages/pay-bills.html",controller:"billsCtrl",isInSitemap:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/account/bills/pay/invoice/:paymentAmount",{templateUrl:"pages/pay-bills-invoice.html",controller:"billsCtrl",isInSitemap:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/account/bills/cc-payment-success",{templateUrl:"pages/cc-payment-success.html",isInSitemap:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/account/settings",{templateUrl:"pages/settings.html",controller:"settingsCtrl",isInSitemap:!1,reloadOnSearch:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/account/history/:subscriptionId",{templateUrl:"pages/usage-history.html",controller:"usageHistoryCtrl",isInSitemap:!1,reloadOnSearch:!1,resolve:{subscription:["ResolveLoggedin","ResolveSubscription",function(e,t){return e.resolve().then(function(){return t.resolve()})}]}}).when("/account/pre-to-post/:subscriptionId",{templateUrl:"pages/pre-to-post.html",controller:"preToPostCtrl",isInSitemap:!1,resolve:{subscription:["ResolveLoggedin","ResolveSubscription",function(e,t){return e.resolve().then(function(){return t.resolve("prepaid")})}]}}).when("/account/change-rateplan/:subscriptionId",{templateUrl:"pages/prepaid-change-rateplan.html",controller:"prepaidChangeRateplanCtrl",isInSitemap:!1,resolve:{subscription:["ResolveLoggedin","ResolveSubscription",function(e,t){return e.resolve().then(function(){return t.resolve("prepaid")})}]}}).when("/account/change-rateplan-confirmation/success",{templateUrl:"pages/prepaid-change-rateplan-success.html",isInSitemap:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/account/change-rateplan-confirmation/:subscriptionId/:productName?",{templateUrl:"pages/prepaid-change-rateplan-confirmation.html",controller:"prepaidChangeRateplanConfirmationCtrl",isInSitemap:!1,resolve:{data:["ResolveLoggedin","ResolveSubscription","ResolveProduct",function(e,t,n){return e.resolve().then(function(){return t.resolve("prepaid").then(function(e){return n.resolve(!0).then(function(t){return{product:t,subscription:e}})})})}]}}).when("/account/handset-insurance/:subscriptionId",{templateUrl:"pages/handset-insurance.html",controller:"handsetInsuranceCtrl",isInSitemap:!1,resolve:{subscription:["ResolveLoggedin","ResolveSubscription",function(e,t){return e.resolve().then(function(){return t.resolve(void 0,!0)})}]}}).when("/pos/existing-customer/handset-insurance/:subscriptionId",{templateUrl:"pages/handset-insurance.html",controller:"handsetInsuranceCtrl",isInSitemap:!1,resolve:{subscription:["ResolveLoggedin","ResolveSubscription",function(e,t){return e.resolve().then(function(){return t.resolve(void 0,!0)})}]}}).when("/account/cost-control/:subscriptionId",{templateUrl:"pages/cost-control.html",controller:"costControlCtrl",isInSitemap:!1,resolve:{subscription:["ResolveLoggedin","ResolveSubscription",function(e,t){return e.resolve().then(function(){return t.resolve(void 0,!0)})}]}}).when("/account/sim-swap/:subscriptionId",{templateUrl:"pages/sim-swap.html",controller:"simSwapCtrl",isInSitemap:!1,resolve:{subscription:["ResolveLoggedin","ResolveSubscription",function(e,t){return e.resolve().then(function(){return t.resolve(void 0,!0)})}]}}).when("/account/voice-mail/:subscriptionId",{templateUrl:"pages/voice-mail.html",controller:"voiceMailCtrl",isInSitemap:!1,resolve:{subscription:["ResolveLoggedin","ResolveSubscription",function(e,t){return e.resolve().then(function(){return t.resolve(void 0,!0)})}]}}).when("/account/call-filtering/:subscriptionId",{templateUrl:"pages/call-filtering.html",controller:"callFilteringCtrl",isInSitemap:!1,resolve:{subscription:["ResolveLoggedin","ResolveSubscription",function(e,t){return e.resolve().then(function(){return t.resolve(void 0,!0)})}]}}).when("/account/language",{templateUrl:"pages/language.html",controller:"languageCtrl",isInSitemap:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/account/billing-settings",{templateUrl:"pages/billing-settings.html",isInSitemap:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/account/contact-informations",{templateUrl:"pages/contact-informations.html",controller:"contactInformationsCtrl",isInSitemap:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/account/id-documents",{templateUrl:"pages/id-documents.html",controller:"idDocumentsCtrl",isInSitemap:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/account/recovery-password",{templateUrl:"pages/recovery-password.html",controller:"recoveryPasswordCtrl",isInSitemap:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/account/password-change",{templateUrl:"pages/change-password.html",controller:"changePasswordCtrl",isInSitemap:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/account/topup-success",{templateUrl:"pages/account-topup-success.html",controller:"accountTopupSuccessCtrl",isInSitemap:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/account/add-auto-topup/:subscriptionId",{templateUrl:"pages/add-auto-topup.html",controller:"autoTopupCtrl",isInSitemap:!1,resolve:{subscription:["ResolveLoggedin","ResolveSubscription",function(e,t){return e.resolve().then(function(){return t.resolve("prepaid",!0)})}]}}).when("/account/auto-topups/:subscriptionId",{templateUrl:"pages/auto-topups.html",controller:"autoTopupCtrl",isInSitemap:!1,resolve:{subscription:["ResolveLoggedin","ResolveSubscription",function(e,t){return e.resolve().then(function(){return t.resolve("prepaid",!0)})}]}}).when("/account/voucher-topup/:subscriptionId",{templateUrl:"pages/voucher-topup.html",controller:"voucherTopupCtrl",isInSitemap:!1,resolve:{subscription:["ResolveLoggedin","ResolveSubscription",function(e,t){return e.resolve().then(function(){return t.resolve("prepaid",!0)})}]}}).when("/account/topup-history",{templateUrl:"pages/topup-history.html",controller:"topupHistoryCtrl",isInSitemap:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/account/subscriptions",{templateUrl:"/pages/subscriptions.html",controller:"subscriptionsCtrl",isInSitemap:!1,reloadOnSearch:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/account/change-subscription/:subscriptionId",{templateUrl:"pages/change-subscription.html",controller:"changeSubscriptionCtrl",isInSitemap:!1,resolve:{subscription:["ResolveLoggedin","ResolveSubscription",function(e,t){return e.resolve().then(function(){return t.resolve("postpaid",!0)})}]}}).when("/account/activate-option/:subscriptionId/:optionName",{templateUrl:"pages/activate-option.html",controller:"activateOptionCtrl",isInSitemap:!1,resolve:{subscription:["ResolveLoggedin","ResolveSubscription",function(e,t){return e.resolve().then(function(){return t.resolve(void 0,!0,!1,!0)})}],option:["ResolveOption",function(e){return e.resolve()}]}}).when("/account/activate-option-failed/:subscriptionId/:optionName",{templateUrl:"pages/activate-option-failed.html",controller:"activateOptionFailedCtrl",isInSitemap:!1,resolve:{subscription:["ResolveLoggedin","ResolveSubscription",function(e,t){return e.resolve().then(function(){return t.resolve(void 0,!0)})}],option:["ResolveOption",function(e){return e.resolve()}]}}).when("/login",{templateUrl:"pages/login.html",controller:"loginCtrl",resolve:{redirect:["$location","$rootScope","Language",function(e,t,n){window.isApp&&e.path("/".concat(n.data.current,"/app-login"))}],loggedin:["ResolveNotLoggedin",function(e){return e.resolve()}]},isInSitemap:!1}).when("/app-login",{templateUrl:"pages/login.html",controller:"loginCtrl",resolve:{loggedin:["ResolveNotLoggedin",function(e){return e.resolve()}]},isInSitemap:!1}).when("/account/deals",{templateUrl:"pages/deals.html",controller:"dealsCtrl",isInSitemap:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/account/auto-offer/:type/:subscriptionId",{isInSitemap:!1,resolve:{data:["ResolveLoggedin","ResolveSubscription","ResolveAutoOffer",function(e,t,n){return e.resolve().then(function(){return t.resolve(void 0,!0).then(function(e){return n.resolve(e)})})}]}}).when("/account/view-offer/:type/:subscriptionId",{isInSitemap:!1,templateUrl:"pages/view-offer.html",controller:"viewOfferCtrl",resolve:{offer:["ResolveLoggedin","ResolveSubscription","ResolveViewOffer",function(e,t,n){return e.resolve().then(function(){return t.resolve(void 0,!0).then(function(e){return n.resolve(e)})})}]}}).when("/account/view-deal/:prismicTag/:subscriptionId",{isInSitemap:!1,templateUrl:"pages/view-offer.html",controller:"viewOfferCtrl",resolve:{offer:["ResolveLoggedin","ResolveSubscription","ResolveViewOffer",function(e,t,n){return e.resolve().then(function(){return t.resolve(void 0,!0).then(function(e){return n.resolve(e)})})}]}}).when("/account/:subscriptionId/tablet-deal",{isInSitemap:!1,templateUrl:"/pages/landing-page.html",controller:"landingPageCtrl",resolve:{data:["ResolveCmsPage",function(e){return e.resolve(!1,"tablet-deal")}]}}).when("/account/:subscriptionId/ipad-deal",{isInSitemap:!1,templateUrl:"/pages/landing-page.html",controller:"landingPageCtrl",resolve:{data:["ResolveCmsPage",function(e){return e.resolve(!1,"ipad-deal")}]}}).when("/account/email-management",{templateUrl:"pages/email-management.html",controller:"emailManagementCtrl",isInSitemap:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/account/porting-date",{templateUrl:"pages/porting-date-calculator.html",controller:"portingDateCalculatorCtrl",isInSitemap:!1,resolve:{loggedin:["ResolveLoggedin",function(e){return e.resolve()}]}}).when("/backoffice",{templateUrl:"pages/pos-login.html",controller:"posLoginCtrl",isInSitemap:!1,resolve:{loggedin:["ResolvePos",function(e){return e.notLoggedin()}]}}).when("/pos-login",{redirectTo:function(e){window.location.href=window.newPosEndpoint+e.lang+"/auth/login"}}).when("/pos",{redirectTo:function(e){window.location.href=window.newPosEndpoint+e.lang+"/auth/login"}}).when("/pos/swype-info-page",{templateUrl:"/pages/landing-page.html",controller:"landingPageCtrl",resolve:{data:["Cms",function(e){return e.getByUid("landing_page","swype-info-page")}]}}).when("/pos/swype",{templateUrl:"pages/pos-swype.html",controller:"posSwypeCtrl"}).when("/pos/not-available",{templateUrl:"pages/not-available.html"}).when("/pos/double-tv",{templateUrl:"pages/double-tv.html",controller:"doubleTVCtrl"}).when("/pos/continue-without-device",{templateUrl:"pages/continue-without-device.html",controller:"continueWithoutDeviceCtrl"}).when("/pos/manual-credit-check-submitted",{templateUrl:"pages/manual-credit-check-submitted.html"}).when("/pos/manual-credit-check",{controller:"manualCreditCheckCtrl",templateUrl:"pages/manual-credit-check.html"}).when("/pos/existing-customer/manual-credit-check-submitted",{templateUrl:"pages/manual-credit-check-submitted.html"}).when("/pos/existing-customer/manual-credit-check",{controller:"manualCreditCheckCtrl",templateUrl:"pages/manual-credit-check.html"}).when("/pos/leadsgeneration",{templateUrl:"pages/lead-generation.html",controller:"leadGenerationController"}).when("/pos/report",{templateUrl:"pages/pos-report.html",controller:"posReportCtrl"}).when("/pos/pickup",{templateUrl:"pages/pickup.html",controller:"posPickupCtrl"}).when("/pos/new-customer",{templateUrl:"pages/new-customer.html",controller:"newCustomerCtrl"}).when("/pos/find-existing-customer",{templateUrl:"pages/find-existing-customer.html",controller:"findExistingCustomerCtrl"}).when("/pos/existing-customer",{templateUrl:"pages/manage-existing-customer.html",controller:"manageExistingCustomerCtrl"}).when("/pos/existing-customer/add-device",{templateUrl:"pages/pos-add-device.html"}).when("/pos/existing-customer/topup",{templateUrl:"pages/account-topup.html",controller:"accountTopupCtrl",isInSitemap:!1}).when("/pos/existing-customer/change-subscription/:subscriptionId",{templateUrl:"pages/change-subscription.html",controller:"changeSubscriptionCtrl",resolve:{subscription:["ResolveLoggedin","ResolveSubscription",function(e,t){return e.resolve().then(function(){return t.resolve("postpaid",!0)})}]}}).when("/pos/existing-customer/manage-subscriptions",{templateUrl:"pages/manage-subscriptions.html",controller:"manageSubscriptionsCtrl"}).when("/pos/existing-customer/sim-swap",{templateUrl:"pages/pos-sim-swap.html"}).when("/pos/existing-customer/pre-to-post",{templateUrl:"pages/pos-pre-to-post-select.html",controller:"posPreToPostCtrl"}).when("/pos/existing-customer/pre-to-post/:subscriptionId?",{templateUrl:"pages/pos-pre-to-post.html",controller:"posPreToPostCtrl"}).when("/pos/existing-customer/activate-order/:orderId?",{templateUrl:"pages/pos-activate-order.html",controller:"posActivateOrderCtrl",resolve:{order:["ResolveOrder",function(e){return e.resolve()}]}}).when("/pos/products",{templateUrl:"pages/pos-products.html",controller:"posProductsCtrl"}).when("/pos/product/:productName",{templateUrl:"pages/product.html",controller:"productCtrl",resolve:{product:["ResolveProduct",function(e){return e.resolve(!0)}]}}).when("/pos/option/:optionName",{templateUrl:"pages/pos-option.html",controller:"posOptionCtrl",resolve:{option:["ResolveOption",function(e){return e.resolve()}]}}).when("/pos/existing-customer/change-rateplan/success",{templateUrl:"pages/pos-prepaid-change-rateplan-success.html"}).when("/pos/existing-customer/change-rateplan/:subscriptionId",{templateUrl:"pages/pos-prepaid-change-rateplan.html",controller:"prepaidChangeRateplanCtrl",isInSitemap:!1,resolve:{subscription:["ResolveLoggedin","ResolveSubscription",function(e,t){return e.resolve().then(function(){return t.resolve("prepaid",!0)})}]}}).when("/pos/existing-customer/change-rateplan-confirmation/:subscriptionId/:productName",{templateUrl:"pages/pos-prepaid-change-rateplan-confirmation.html",controller:"posPrepaidChangeRateplanConfirmationCtrl",resolve:{data:["ResolveLoggedin","ResolveSubscription","ResolveProduct",function(e,t,n){return e.resolve().then(function(){return t.resolve("prepaid",!0).then(function(e){return n.resolve(!0).then(function(t){return{product:t,subscription:e}})})})}]}}).when("/pos/:uid",{resolve:{data:["ResolveCmsPage",function(e){return e.resolve()}]},templateUrl:"/pages/landing-page.html",controller:"landingPageCtrl"}).when("/for-you",redirect("/promo?na")).when("/roaming-prepaid",redirect("/roaming?t=prepaid&utm_source=base&utm_medium=sms&utm_campaign=prepaid&utm_content=data")).when("/faq",redirect("/support")).when("/ROAMING",redirect("/roaming")).when("/macedonia",redirect("/option/macedonia_100")).when("/pre-paid",redirect("/prepaid")).when("/sparoptionen",redirect("/options?t=prepaid")).when("/doptions",redirect("/options?t=prepaid")).when("/opzioni",redirect("/options?t=prepaid")).when("/opcoes",redirect("/options?t=prepaid")).when("/travel",redirect("/options#ROAMING")).when("/optionen",redirect("/options")).when("/economiques",redirect("/options")).when("/risparmio",redirect("/options")).when("/savings",redirect("/options")).when("/connect",redirect("/awards")).when("/start",redirect("/activate")).when("/roaming-info",redirect("/roaming")).when("/ebill",redirect("/account/bills")).when("/POS",redirect("/pos")).when("/portd",redirect("/assets/other/portd.pdf")).when("/portf",redirect("/assets/other/portf.pdf")).when("/porte",redirect("/assets/other/porte.pdf")).when("/porti",redirect("/assets/other/porti.pdf")).when("/in",redirect("/mobile-products")).when("/online",redirect("/mobile-products")).when("/drs",redirect("/mobile-products")).when("/poa",redirect("/assets/other/poa_:injectLanguage.pdf")).when("/charges-and-fees",redirect("/assets/other/charges_and_fees_:injectLanguage.pdf")).when("/retail",redirect("/pos")).when("/sts",redirect("/pos")).when("/inbound",{redirectTo:function(e){window.location.href=window.newPosEndpoint+e.lang+"/auth/login?tempChannel=ol"}}).when("/outbound",{redirectTo:function(e){window.location.href=window.newPosEndpoint+e.lang+"/auth/login?tempChannel=ol"}}).when("/care2sales",{redirectTo:function(e){window.location.href=window.newPosEndpoint+e.lang+"/auth/login?tempChannel=ol"}}).when("/retention",{redirectTo:function(e){window.location.href=window.newPosEndpoint+e.lang+"/auth/login?tempChannel=ol"}}).when("/own-shop",{redirectTo:function(e){window.location.href=window.newPosEndpoint+e.lang+"/auth/login?tempChannel=ol"}}).when("/ownshop",{redirectTo:function(e){window.location.href=window.newPosEndpoint+e.lang+"/auth/login?tempChannel=ol"}}).when("/ambassador",{redirectTo:function(e){window.location.href=window.newPosEndpoint+e.lang+"/auth/login?tempChannel=ol"}}).when("/id",redirect("/account/id-check/verify-id")).when("/account/user-details",redirect("/account/settings")).when("/auto-idv",redirect("/idv")).when("/auto-idp",redirect("/idp")).when("/auto-sign",redirect("/sign")).when("/auto-signing",redirect("/signing")).when("/offer",redirect("/mobile-products")).when("/aktivieren",redirect("/activate")).when("/account/topup",redirect("/account")).when("/account/history",redirect("/account/history/auto")).when("/konto",redirect("/account")).when("/dayspeed",redirect("/option/day_speed")).when("/DAYSPEED",redirect("/option/day_speed")).when("/day_speed",redirect("/option/day_speed")).when("/day-speed",redirect("/option/day_speed")).when("/ds",redirect("/de/data-protection")).when("/dc",redirect("/fr/data-protection")).when("/pd",redirect("/it/data-protection")).when("/dp",redirect("/en/data-protection")).when("/data",redirect("/product/lebara_data_unlimited")).when("/prepaid-options",redirect("/options?prepaid=true")).when("/interdiscount",redirect("/option/europe_unlimited")).when("/lebarapos/servlet/start",redirect("/pos")).when("/valentine",redirect("/option/europe_unlimited")).when("/speedup",redirect("/option/day_speed")).when("/startnow",redirect("/activate")).when("/SPEEDUP",redirect("/option/day_speed")).when("/prepaid",redirect("/product/lebara_plus")).when("/contact",redirect("https://support.lebara.ch/hc/:zendeskInjectLanguage/articles/360001694797")).when("/contact/billing",redirect("https://support.lebara.ch/hc/:zendeskInjectLanguage/sections/360006078078")).when("/contact/transfer",redirect("https://support.lebara.ch/hc/:zendeskInjectLanguage/categories/360000196957")).when("/contact/cancellation",redirect("https://support.lebara.ch/hc/:zendeskInjectLanguage/sections/360000448437")).when("/contact/selfcare-password",redirect("https://support.lebara.ch/hc/:zendeskInjectLanguage/sections/360006018537")).when("/contact/subscription",redirect("https://support.lebara.ch/hc/:zendeskInjectLanguage/categories/360000196957")).when("/contact/customer-data",redirect("https://support.lebara.ch/hc/:zendeskInjectLanguage/sections/360006018597")).when("/contact/other",redirect("https://support.lebara.ch/hc/:zendeskInjectLanguage/articles/360001694797")).when("/contact/:category?/contact-form",redirect("https://support.lebara.ch/hc/:zendeskInjectLanguage")).when("/support",redirect("https://support.lebara.ch/hc/:zendeskInjectLanguage")).when("/support/:topicId*",redirect("https://support.lebara.ch/hc/:zendeskInjectLanguage")).when("/sale",redirect("/?utm_source=base&utm_medium=sms&utm_campaign=mobile&utm_content=halfprice")).when("/abo",redirect("/mobile-products?utm_source=base&utm_medium=sms&utm_campaign=mobile&utm_content=halfprice")).when("/go",redirect("/self-register/new-prepaid/checkout/lebara_plus?skip=true")).when("/checkout",{redirectTo:function(e,t,n){var o=n.products;if(!o)return"/";var i=o.indexOf("prepaid")>-1?"new-prepaid":"new-postpaid",r="?";for(var a in n)"products"!==r&&(r+=a+"="+n[a]+"&");return e.lang+"/eshop/"+i+"/checkout/"+o+r}}).when("/company",{redirectTo:function(e){var t;"de"===e.lang&&(t="über%20uns"),"en"===e.lang&&(t="about%20us"),"fr"===e.lang&&(t="entreprise"),"it"===e.lang&&(t="unternehmen"),window.location.href="https://www.sunrise.ch/".concat(e.lang,"/corporate-communications/").concat(t,".html")}});var n={"/":["/internet","/deal","/bonus","/rose","/2xdata","/2x","/crazy-easter","/neon","/black18","/contest/success","/secret","/secret/success","/clive","/clife","/clive/success","/giga","/giga/success","/swiss","/world-card","/keywords"],"/welcome":["/WELCOME","/Wilkommen","/Welcome","/willkommen","/Bienvenue","/bienvenue","/BIENVENUE","/benvenuto","/Benvenuto","/BENVENUTO","/bem-vinto","/bem-Vinto","/Bem-vinto","/bemvinto","/BEM-VINTO","/Willkommen","/willkommen","/WILLKOMMEN"],"/contact":["/contact-2","/contact-2/?lang=fr","/contakt","/kontakt","/contac","/conact","/contacts","/contacts","/contatto","/contattaci","/contact-2?lang=fr"],"/mobile-products":["/2g-swap","/promotion/:promptionCode","/mobile-products2","/mobile-products2/:param","/mobile-products3/:a","/mobile-products3","/yallo flat","/promotions","/best-deal","/coupon"],"/account/bills":["/bills"],"/support?sectionId=360000453018&categoryId=360000196977":["/factureélectronique","/emailrechnung","/fatturaelettronico","/fatturaelettronica","/Rechnungen","/rechnung","/factures","/fatture"],"/ortel":["/ortel/:p1","/ortel/:p1/:p2","/ortel/:p1/:p2/:p3"]};for(var o in n)n[o].map(function(t){return e.when(t,{redirectTo:o})});for(var i=0;i<redirectPaths.length;i++)e.when(redirectPaths[i],{templateUrl:"pages/kitsune-redirect.html",controller:"kitsuneRedirectCtrl",isInSitemap:!1});e.otherwise({resolve:{data:["ResolveCmsPage",function(e){return e.resolve()}]},templateUrl:"/pages/landing-page.html",controller:"landingPageCtrl"})}]),app.controller("accountTopupSuccessCtrl",["$scope","CustomerAccount","$location",function(e,t,n){e.account=t,e.subscription=t.subscriptions[n.search().subscription];var o=n.search().amount;e.amount=Array.isArray(o)?o[0]:o}]),app.controller("accountTopupCtrl",["$scope","CustomerAccount","$location","Notifications","AgentAccount","State",function(e,t,n,o,i,r){if(e.account=t,e.agent=i,e.tabOptions={},n.search().topupError&&o.add("topupError","bad"),n.search().subscriptionId){var a=n.search().subscriptionId;if(r.customerLoggedIn){var s=t.subscriptions[a];s&&"prepaid"==s.type&&(e.tabOptions.activeTab=a)}}e.getPrepaidSubscriptions=function(){var e={};for(var n in t.subscriptions)"prepaid"==t.subscriptions[n].type&&(e[n]=t.subscriptions[n]);return e},e.prepaidSubscriptions=e.getPrepaidSubscriptions();var c,d;for(var u in e.prepaidSubscriptions)d||(d=e.prepaidSubscriptions[u].id),e.prepaidSubscriptions[u].setActive(!0),e.prepaidSubscriptions[u].id==e.tabOptions.activeTab&&(c=!0);c||(e.tabOptions.activeTab=d)}]),app.controller("verifyIdDocumentDataCtrl",["$scope","CustomerAccount","$location","AgentAccount","Network","Language","$routeParams","Storage","$timeout","State",function(e,t,n,o,i,r,a,s,c,d){e.account=t,e.logintype=a.logintype,e.data=t.tempScanData||{},e.enableNewIdCheck=window.enableNewIdCheck,e.dataScanned=e.data.firstName||e.data.lastName||e.data.nationality,e.documentTypes=["side1","side2"],d.agentLoggedIn||e.documentTypes.push("selfie"),t.tempId&&(e.data.expiryDate=dateToObj(new Date(t.tempId.expiryDate))),e.sendVerification=function(){if(!e.loading){e.loading=!0;var u={accessCode:e.account.accessCodeData.accessCode,fileCheckSumValues:[]};t.tempId&&(u.id=t.tempId.id),u.nationality=e.data.nationality,u.idNumber=e.data.idNumber.split(" ").join("").split("/").join("").split("-").join(""),u.idTypeId=e.data.idTypeId,u.expiry=objToDate(e.data.expiry,!0).toServerJSON();for(var l in e.account.tempImages)e.account.tempImages[l].checkSumValue&&u.fileCheckSumValues.push(e.account.tempImages[l].checkSumValue);i.post("verifyPersonalId",u).then(function(i){if(!i)return e.loading=!1;(d.agentLoggedIn?o.updateExistingCustomer():t.refreshData(5e3,!0)).then(function(){if(e.loading=!1,s.set("idUnderReview",!0),n.search().returnIntent){var o={};n.search().returnIntentSearch&&(o=JSON.parse(decodeURIComponent(n.search().returnIntentSearch))),n.path(decodeURIComponent(n.search().returnIntent)).search(o)}else n.path("/".concat(r.data.current,"/").concat(e.logintype,"/").concat(a.extraParam,"/verify-id-success"));c(function(){delete t.accessCodeData,delete t.tempImages},250)})})}},e.getTemplate=function(){if(d.customerLoggedIn)if(e.account.accessCodeData)if(t.tempImages)if(t.tempImages.side1)if(t.tempImages.selfie||d.agentLoggedIn){if(!d.agentLoggedIn)return d.customerLoggedIn?"pages/account-verify-document-data.html":"pages/login.html";if(d.customerLoggedIn)return"pages/pos-verify-document-data.html";n.path("/pos")
}else n.path("".concat(r.data.current,"/").concat(e.logintype,"/").concat(a.extraParam,"/verify-id"));else n.path("".concat(r.data.current,"/").concat(e.logintype,"/").concat(a.extraParam,"/verify-id"));else n.path("".concat(r.data.current,"/").concat(e.logintype,"/").concat(a.extraParam,"/verify-id"));else n.path("".concat(r.data.current,"/").concat(e.logintype,"/").concat(a.extraParam,"/verify-id"))}}]),app.controller("accountVerifyIdSuccessCtrl",["$scope","CustomerAccount","$location","State",function(e,t,n,o){delete t.tempId,e.getTemplate=function(){return o.agentLoggedIn?o.customerLoggedIn?"pages/pos-verify-id-success.html":void n.path("/pos"):o.customerLoggedIn?"pages/account-verify-id-success.html":"pages/login.html"}}]),app.controller("accountVerifyIdCtrl",["$scope","CustomerAccount","AgentAccount","Camera","$routeParams","$location","Language","Products","State","Storage","Popup","Identification",function(e,t,n,o,i,r,a,s,c,d,u,l){e.account=t,e.account.tempImages={},e.account.tempScanData={},e.documentType=i.documentType,e.inputType=i.inputType,e.agent=n,e.isAndroid=isAndroid,e.isIOS=isIOS,e.Camera=o,e.isVertical={},e.data={},e.baseLink="/".concat(a.data.current,"/").concat(i.logintype,"/").concat(i.extraParam,"/verify-id"),e.allowed=!1,c.customerLoggedIn&&t.accountOwner.contactNumber&&(e.msisdn=t.accountOwner.contactNumber),e.showDontNeedToMessage=!r.search().returnIntent&&!e.account.needToVerifyId,e.init=function(){if(r.search().fetchImages){e.loading=!0,e.account.accessCodeData=d.get("idCheckAccessCodeData");var n,o=d.get("fetchedImagesData");o.done=!0,o.idCheckMethod="external",o.accessCodeData=e.account.accessCodeData,o.onBoardData&&hasSomeData(o.onBoardData.mrz)?n=l.convertMrzData(o.onBoardData.mrz):o.onBoardData&&hasNoNull(o.onBoardData.viz,1)&&(n=l.convertMrzData(o.onBoardData.viz)),o.scannedData=n,o.images={};var i={idFront:"side1",idBack:"side2",faceVideo:"selfie"};o.idcScanImages.forEach(function(e){var t=i[e.fileName];o.images[t]={b64:"data:image/jpeg;base64,".concat(e.b64),checkSumValue:e.checkSum,documentType:t,fileType:"selfie"===t?"gif":"jpg",inputType:"external",pixelChecked:!0}}),e.data=o,e.done()}else{if(d.get("idUnderReview",.1)||(t.findIdWithStatus("TO_VALIDATE_DIGITAL")||t.findIdWithStatus("PENDING_DOCUMENTS"))&&!c.agentLoggedIn)return void(e.error="929");if(e.loading=!0,!c.customerLoggedIn||e.initDone)return e.loading=!1;e.initDone=!0,e.productId=t.getProductId(),e.takeFaceVideo=!c.agentLoggedIn;var a=s.data.productConfigs[e.productId];e.isPostpaid=a&&"postpaid"===a.type,e.getAccessCode().catch(throwSafe).then(function(){return e.loading=!1})}},e.done=function(){if(!e.destroyed){for(var t in e.data.images)e.data.images[t].checkSumValue&&(e.account.tempImages[t]=e.data.images[t]);e.data.scannedData&&(e.account.tempScanData=e.data.scannedData),r.path("".concat(e.baseLink,"/document-data")).search({})}};var p=!1;e.getTemplate=function(){if(!p&&c.customerLoggedIn){p=!0;var n=r.search().id;n&&(t.tempId=t.personalIdsList.find(function(e){return e.id==n})),t.tempId||(t.tempId=t.getPendingIdDocument()),e.allowed=!t.getInprogressIdDocument(),c.agentLoggedIn&&(e.allowed=!0),e.allowed||(e.error="929")}return c.agentLoggedIn?c.customerLoggedIn?"pages/pos-verify-id.html":void r.path("/pos"):c.customerLoggedIn?"pages/account-verify-id.html":"pages/login.html"},e.getAccessCode=function(n){return console.log("🚀 -> ctrl_account-verify-id.js -> getAccessCode() -> isRedo",n),t.generateAccountVerifyAccessCode().then(function(o){if(o&&!o.errorCode)delete e.account.tempQrCode,e.account.accessCodeData=o;else{if(!n&&910==o.errorCode&&!c.agentLoggedIn)return t.doRefresh().then(function(t){if(t)return e.getAccessCode(!0)});e.error=o.errorCode||"null"}return o})},r.search().returnIntent&&new u("idCheckIntentPopup","id-check-intent-popup.html",{classes:["center","small","no-header"],hideHeader:!0,agentLoggedIn:c.agentLoggedIn}).show(),e.init(),e.$on("$destroy",function(){e.destroyed=!0,e.loginWatcher&&e.loginWatcher()})}]),app.controller("activateOptionFailedCtrl",["$scope","option","subscription",function(e,t,n){e.option=t,e.subscription=n,e.reason=n.cantActivateReason(t)}]),app.controller("activateOptionCtrl",["$scope","option","subscription","$location","$window","Analytics","FeatureFlags","CustomerAccount",function(e,t,n,o,i,r,a,s){n.canActivate(t)||o.path("/account/activate-option-failed/".concat(n.id,"/").concat(t.url)).replace(),a.get("Ayma-google-tag-manager-changes-2")&&(r.fireCustomPurchaseEvent("add_to_cart",t.name,t.category,"".concat(s.getCurrentSubscription().type," mobile"),t.newCustomerCost,"1",t.id,null,"unavailable"),r.fireCustomPurchaseEvent("begin_checkout",t.name,t.category,"".concat(s.getCurrentSubscription().type," mobile"),t.newCustomerCost,"1",t.id,null,"unavailable")),e.subscription=n,e.option=t,e.activate=function(){e.loading=!0,t.activate(n).then(function(){e.loading=!1,o.path("/account").search({id:n.id}).replace()})},e.cancel=function(){i.history.back()}}]),app.controller("autoTopupCtrl",["$scope","subscription",function(e,t){e.subscription=t}]),app.controller("billsCtrl",["$scope","$rootScope","CustomerAccount","CustomerBills","$location","$routeParams","Notifications","State","Popup","Network","Files","Analytics","Customerio","FeatureFlags",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g){e.params=r,e.CustomerBills=o,e.account=n,e.rs=t,e.testEnvs=window.isTest,e.acceptedCondition=!1,e.adminfeeflag=g.get("new-admin-fee"),i.search().paymentError&&a.add("error_payment","bad"),e.tabs={activeTab:"newReference"},e.isNegative=function(e){return e<0},e.dunningStopPopup=new c("dunningStopPopup","dunning-stop-popup.html",{title:"dunningStopPopupTitle"},{show:function(){e.dunningStopPopup.data.success=!1},confirm:function(){e.dunningStopPopup.data.loading=!0,o.setDunningStop().then(function(t){e.dunningStopPopup.data.loading=!1,t&&(e.dunningStopPopup.data.success=!0,t.requestQueued&&(e.dunningStopPopup.data.requestQueued=!0))})}}),e.downloadUsagePDF=function(t){var n={invoiceId:t,subscriptionId:e.rs.account.getCurrentSubscription().id};e.gettingPdf=!0,d.post("getUsageDetailsInPDF",n).then(function(t){if(e.gettingPdf=!1,t.errorCode&&"849"===t.errorCode)a.add("error_couldntDownloadPdf","bad");else if(t){var n=t.fileName;u.saveAs2(t.createdPdf,n),a.add("SuccessfullyDownloadedMonthlyUsageReport","good")}})},e.downloadBillPdf=function(t){t.invoiceNumber;if(!t.gettingPdf){t.gettingPdf=!0;var n={invoiceNumber:t.invoiceNumber};d.post("getInvoicePdf",n,void 0,!0).then(function(n){t.gettingPdf=!1,e.disableButtonIfPdfNotAvailble=!1,n.errorCode&&"652"===n.errorCode&&(e.disableButtonIfPdfNotAvailble=!0)}),l.fireGaInteraction("download file",{download_name:t.startDate.toISOString().substring(0,10)+" - "+t.endDate.toISOString().substring(0,10)})}},e.init=function(){if(s.customerLoggedIn)return n.postpaidBillingGroup?void o.getBills().then(function(){if(o.billDataLoaded&&(e.months=[],e.data={paymentAmount:"all",paymentMethod:"cc"},g.get("new-admin-fee")&&(e.data={paymentAmount:"all",paymentMethod:"invoice"}),o.bills.length)){if(g.get("customerio_integration")&&p.identifyUser(e.account.accountOwner.subscription,e.CustomerBills.totalOpenAmount),"Due"===e.data.paymentAmount&&0==e.CustomerBills.totalDueAmount&&g.get("new-admin-fee")&&(e.data={paymentAmount:"all",paymentMethod:"cc"}),o.bills.forEach(function(t){if(t.endDate&&t.startDate){var o=differenceInMonths(t.startDate,t.endDate)+1;o>3&&throwSafe("Bill id ".concat(t.id," invoiceNumber ").concat(t.invoiceNumber," is ").concat(o," months long. startDate : ").concat(t.startDate,", endDate : ").concat(t.endDate," username : ").concat(n.accountOwner.username),"id-344");for(var i=0;i<o;i++){var r=i===o-1;t.invoiceNumber&&(e.months.push({bill:t,hasUsage:differenceInMonths(swissDate().addMonths(-6),t.endDate)>=0,date:addMonths(t.startDate,i),amount:r?t.amount:0,skipped:!r||"0"===t.invoiceNumber}),r||(e.atLeastOneMonthSkipped=!0))}}}),e.months.sort(function(e,t){return e.date>t.date?1:-1}),!e.months.length)return e.data.openMonth=void 0;e.data.openMonth=e.months[e.months.length-1],e.data.openMonth.bill.paid&&(e.data.openMonth=void 0)}}):i.path("/account")},e.getBillLink=function(e){var t=n.getFilteredSubList(!0).filter(function(e){return e&&"postpaid"===e.type})[0];if(t)return"/account/history/".concat(t.id,"?bill=").concat(e.id)},e.acceptCondition=function(){e.acceptedCondition=!e.acceptedCondition},e.init()}]),app.controller("callFilteringCtrl",["$scope","subscription",function(e,t){e.subscription=t}]),app.controller("changePasswordCtrl",["$scope","CustomerAccount","$window",function(e,t,n){e.account=t,e.user=t.accountOwner,e.onSubmit=n.history.back}]),app.controller("changeSubscriptionCtrl",["$scope","CustomerAccount","$location","Products","AgentAccount","$timeout","$rootScope","Language","subscription","State","CommonData","Promotions","Notifications","FeatureFlags",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g){e.account=t,e.agent=i,e.rs=a,e.keep=n.search().keep,e.type=e.keep?"extend-postpaid":"change-postpaid",e.data={},e.subscription=c,e.showInflationStatus=g.get("showInflationStatus"),n.search().error&&(e.cantExtendReason=n.search().error),e.addDeviceMode=!!n.search().addDeviceMode,e.whiteListedProds=n.search().products,e.whiteListedProds&&(e.whiteListedProds=e.whiteListedProds.split(",")),e.forwardToCheckout=function(t,o,i){var r,a,c,d=n.search();d.products=t.url,d.subscription=e.subscription.id,d.ll=o,d.skipDeviceSelection=!0,d.promotions=i,e.addDeviceMode?d.sd||(d.sd=(null===(r=e.subscription)||void 0===r?void 0:null===(a=r.recommendations)||void 0===a?void 0:null===(c=a.device)||void 0===c?void 0:c.map(function(e){return e.deviceId}).join(","))||""):d.skip="true";var u=n.path().indexOf("/pos/")>-1?"/pos/":"/eshop/";e.addDeviceMode||e.keep?n.path("/"+s.data.current+u+e.type+"/checkout/"+t.url).search(d).replace():n.path("/"+s.data.current+u+e.type+"/checkout/"+t.url).search(d)},e.$watch("data.filteredProducts",function(t){var i=n.search().product,a=o.data.products[i];t&&t.length&&r(function(){var n;return null===(n=e.setPos)||void 0===n?void 0:n.call(e,i&&a?t.indexOf(a):1)},50)}),e.goToRateplanChange=function(t,n){if(t)e.selectedProduct=t.product,e.productConfig=t;else{if(!n){var i,r=e.selectedProduct.product.getValidPromotions(e.subscription,!0),a=_createForOfIteratorHelper(r);try{for(a.s();!(i=a.n()).done;){var s=i.value;if(e.selectedProduct.product.findConfigsFromOptions(null,null,null,e.subscription,!0).length){n=s;break}}}catch(e){a.e(e)}finally{a.f()}}e.productConfig=e.selectedProduct.product.findConfigsFromOptions(e.selectedProduct.lock,null,n,e.subscription,!0)[0]}if(!e.productConfig){var c;return p.add("error_801","bad"),void throwSafe("productConfig could not be found in goToRateplanChange. - "+e.selectedProduct.lock+" - "+(null===(c=n)||void 0===c?void 0:c.code)+" - "+e.selectedProduct.product.url)}if(e.data.availablePromotions=Object.size(e.productConfig.getValidPromotions(e.subscription,!0)),e.data.availableDevices=objToArray(e.productConfig.devices).filter(function(e){return-1!==e.channels.indexOf(u.channel)}).length,e.data.availablePromotions||e.data.availableDevices||!e.keep){if(e.canDoRateplanChange()){var l=e.subscription.validPostpaidRateplanChangeProducts(o.data.products,d.agentLoggedIn),g=l.find(function(t){return t.product===e.productConfig.product&&(null===t.lock||t.lock===e.productConfig.lockinLength)&&t.promotion===n});g&&(e.subscription.clickedRateplan=g.id,e.subscription.setRecommendations({clickedRateplan:g.id})),e.forwardToCheckout(e.productConfig.product,e.productConfig.lockinLength,n?n.code:void 0)}}else e.cantExtendReason="cantExtendNoProducts"},e.canDoRateplanChange=function(){if(t.canExtend()){if(e.subscription.canExtend(e.productConfig))return!0;e.cantExtendReason=e.subscription.getCantExtendReason(e.productConfig)}else e.cantExtendReason=t.onHold&&t.onHold.active?"cantExtendOnHold":"cantExtendAccountStatus";return console.log(e.cantExtendReason),!1},e.setMobileSidewaysScrollPos=function(t){e.mobileScrollPos=t,e.prodData&&(e.selectedProduct=e.prodData[t])},e.reverseSetPos=function(){return e},e.init=function(){l.returnWhenPromosLoaded().then(function(){e.subscription.returnWhenRecommendationsLoaded().then(function(){if(e.currentProduct=e.subscription.rateplan.firstProduct(),e.currentProduct||(console.log("[YDT-568] workaround for missing GO(12) product",e.subscription.rateplan),e.currentProduct=o.data.products.yallo_go),e.prodData=e.subscription.validPostpaidRateplanChangeProducts(o.data.products,d.agentLoggedIn),(!e.currentProduct||"lebara_data"!==e.currentProduct.url)&&(e.productType=e.currentProduct?e.currentProduct.productType:"internet",e.prodData=e.prodData.filter(function(e){return"yallo_go"!==e.product.url}),e.whiteListedProds)){var t=e.prodData.filter(function(t){return-1!==e.whiteListedProds.indexOf(t.product.url)});t.length&&(e.prodData=t)}if(!e.prodData.length)return e.cantExtendReason="cantExtendNoProducts";e.data.validProductsAvailable=e.prodData.length;var i;e.keep&&(i=e.currentProduct.findConfigsFromOptions(e.addDeviceMode?24:null,null,null,e.subscription)[0]),e.productConfig=i;var r=e.subscription.canAddDevice();if(e.keep&&e.addDeviceMode&&!r.result)return e.cantExtendReason=r.reason||"cantExtendNoProducts";if(e.keep&&!i)return e.cantExtendReason="cantExtendNoProducts";if(e.canDoRateplanChange()&&e.keep)return e.goToRateplanChange(i);if(e.keep)return e.subscription.getCantExtendReason(i);if(n.search().product&&(e.featuredProduct=n.search().product),e.featuredProduct||(e.featuredProduct=e.prodData[0].url),e.productFilterOptions=objToArray(o.data.products).filter(function(t){return"postpaid"===t.type&&t.productType===e.currentProduct.productType&&t.url!==e.currentProduct.url}).map(function(e){return e.url}),d.isTelesales){var a=e.prodData;e.prodData=a.filter(function(e){return"3offers"===e.type}),e.prodDataExtra=a.filter(function(e){return"normal"===e.type||!e.type}),e.prodDataExtraCalculated=e.prodDataExtra,e.saveProducts=a.filter(function(e){return"save"===e.type}),e.prodData.length||(e.data.showExtraProducts=!0)}})})},e.getProdDataExtra=function(){e.data.productFilter?e.prodDataExtraCalculated=e.prodDataExtra.filter(function(t){return t.product.url===e.data.productFilter}):e.prodDataExtraCalculated=e.prodDataExtra},e.init()}]),app.controller("checkoutCheckPaymentCtrl",["$scope","orderData","Checkout","$timeout","CheckoutSteps","AgentAccount","CustomerAccount",function(e,t,n,o,i,r,a){e.orderData=t,e.checkout=n,e.agent=r,e.account=a,e.prodInfo=Object.first(t.config.products),e.checkPayment=function(){n.checkForPaymentInfo().then(function(t){t.errorCode?i.goToError(t.errorCode):t.checkAgain?o(e.checkPayment,2e3):i.goToConfirmation()})},e.checkPayment()}]),app.controller("checkoutCustomerDataCtrl",["$scope","orderData","Checkout","$timeout","CheckoutSteps","CustomerAccount","AgentAccount","FoundCustomerCheckout","$location","Language","Popups","$routeParams","CommonData","smoothScroll","$rootScope","$q","AddressCheck","State","Popup","Analytics","Products","$http","Linecheck","Promotions","Gdpr","Notifications","ContactNumberCheck","FeatureFlags",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g,f,h,m,v,b,w,C,y,D,S,I,k,P,T){e.minFiberWishDate=[15,21],e.minHFCWishDate=window.production?15:2,e.isProd=window.production,e.orderData=t,e.checkout=n,e.account=r,e.agent=a,e.showFillButton=window.isTest,n.orderData.validated=!1,e.CheckoutSteps=i,e.data={},e.minHFCWishDate=window.production?3:2,i.getSteps(),e.data.showForm=f.isMobile||!i.forceIdentification,t.billingCustomerDetails.firstName&&(e.data.showForm=!0),v.agentLoggedIn&&(e.data.showForm=!0),e.data.allowDataChange=["pre-to-post","new-postpaid"].indexOf(l.ordertype)>-1&&!r.postpaidBillingGroup&&!r.primaryId,e.testNoEmailStep=window.testNoEmailStep,e.selfRegistration="self-register"===l.logintype;if(e.prodInfo=Object.first(t.config.products),e.isFiber=e.prodInfo.config.hasTag("fiber"),e.isHFC=e.prodInfo.config.hasTag("HFC"),e.isFiberOrHFC=e.isFiber||e.isHFC,e.isTv="tv"===e.prodInfo.product.productType,e.shipSim=!(v.agentLoggedIn&&e.prodInfo.subscriptionDetails.iccid||"ESIM"===e.prodInfo.simType),e.minAge=r.getMinAge(e.prodInfo.config),e.fakeSkipConfirmation=!v.agentLoggedIn&&t.accessCodeData&&t.accessCodeData.poaSignRequired,e.simpleIdDetailsMode=!v.agentLoggedIn&&!v.customerLoggedIn,e.enableGdpr=I.showGdprCheckboxForExistingCustomers,e.CommonData=p,e.hideFastactivForRRChannel="rr"===p.realChannel,e.isFiber){e.data.wishDateType="asap";var O=e.minFiberWishDate[0];"BEPREADY"===e.orderData.fiberLineCheck.otoIdState&&(O=e.minFiberWishDate[1]),e.orderData.fiberLineCheck.wishDate=dateToObj((new Date).addDays(O),!0)}e.allowEnteringDataProduct=e.prodInfo.product.isHomeProduct&&["5G","4G"].includes(e.prodInfo.product.network),e.isHFC&&(e.data.wishDateType="asap",e.orderData.hfcLineCheck.wishDate=dateToObj((new Date).addDays(e.minHFCWishDate),!0)),e.rs=f,e.emailAddressValid=!0,e.contactNumberValid=!0,v.customerLoggedIn&&(e.emailAddressValid=!r.emailAddressNotValid&&r.accountOwner.emailValidated,!e.emailAddressValid&&v.agentLoggedIn&&a.data.rights.FORCE_SHIPMENT&&(e.orderData.billingCustomerDetails.emailAddress=""),e.orderData.billingCustomerDetails.contactNumber&&P.check(e.orderData.billingCustomerDetails.contactNumber.replace(/^00(.*)$/,"+$1")).then(function(t){e.contactNumberValid=t})),v.agentLoggedIn||e.prodInfo.promotion||e.prodInfo.device||S.getBackupPromotions().then(function(n){var o=n.find(function(t){var n;return(null===(n=t.product)||void 0===n?void 0:n.slug.split("-").join("_"))===e.prodInfo.config.url}),i=null===o||void 0===o?void 0:o.promotion.slug;if(i){var r=S.findPromotionByCode(i),a=S.enablePromotionForChannel(r);a&&a.applies(e.prodInfo.config)&&(e.prodInfo.promotion=a,t.countDownDate=swissDate().addHours(.3),k.add("backupPromoApplied","good"))}}),e.removeGenderTitleField=window.removeGenderTitleField,e.$watch("orderData.billingCustomerDetails.idCheckDone",function(){e.orderData.billingCustomerDetails.idCheckDone&&(e.data.showForm=!0)}),e.onpSmsPopup=new b("onpSmsPopup","onp-sms-popup.html",{title:"onpSmsPopupTitle"},{submit:function(t){t&&(e.prodInfo.subscriptionDetails.onpSmsCode=t,e.afterValidateOrderSuccess(),e.onpSmsPopup.hide())}}),e.doShowForm=function(){e.data.showForm=!0,g(document.querySelector("form"),{offset:siteHeaderHeight()})},e.setContactNumber=function(){if(!v.customerLoggedIn){var e=Object.first(t.config.products).subscriptionDetails;if(v.agentLoggedIn&&e.iccid&&"newMsisdn"==e.subscriptionType)e.contactNumber=e.msisdn;else if("porting"===e.subscriptionType){var n=e.porting.previousProvider.donorType;("postpaid"===n&&e.portingOwnerIsSameUser||"prepaid"==n)&&(e.contactNumber=e.porting.msisdn)}}},e.checkRiskyId=function(){var n=t.billingCustomerDetails&&t.billingCustomerDetails.billingIdDetails&&-1===p.nonRiskyIdTypes.indexOf(t.billingCustomerDetails.billingIdDetails.idTypeId);if(t.billingCustomerDetails.billingIdDetails&&(t.billingCustomerDetails.billingIdDetails.riskyIdType=!1),n&&e.prodInfo.device)return t.billingCustomerDetails.billingIdDetails&&(t.billingCustomerDetails.billingIdDetails.riskyIdType=!v.customerLoggedIn),t.billingCustomerDetails.billingIdDetails.riskyIdType},e.checkIdValid=function(){if(e.checkRiskyId())return console.warn("blocking order button, risky id"),!(!e.prodInfo.config.product.hasTag("home")&&"tv"!==e.prodInfo.product.productType);if(i.forceIdentification&&!Object.size(t.images)){if("fast"!==e.data.idCheckConfirmMethod||e.allowFastActivation()){if("digital"===e.data.idCheckConfirmMethod)return u.show("idCheckPromptPopup");if(e.allowPostIdent())return!0;if(e.allowFastActivation())return!0;u.show("idCheckPromptPopup")}else u.show("idCheckPromptPopup");return console.warn("blocking order button, id"),!1}return!0},e.allowPostIdent=function(){return!!e.shipSim&&(!(v.agentLoggedIn&&!v.isTelesales)&&("prepaid"!==e.prodInfo.config.type&&(!(e.allowFastActivation()&&!window.testFastactivationAndPostident)&&(t.billingCustomerDetails.billingIdDetails&&-1!==p.postIdentIdCards.indexOf(t.billingCustomerDetails.billingIdDetails.idTypeId)&&!r.hasRejectedByPostId()))))},e.allowFastActivation=function(){var o;return!window.noFastActivation&&("yallo_home_4g"!==e.prodInfo.config.url&&(!(null===(o=t.billingCustomerDetails.billingIdDetails)||void 0===o||!o.idTypeId)&&(!(!e.shipSim&&"ESIM"!==e.prodInfo.simType)&&(!e.prodInfo.device&&!(v.agentLoggedIn&&"ESIM"===e.prodInfo.simType&&n.orderData.accessCodeData.idCheckRequired&&n.orderData.accessCodeData.contractSignRequired)))))},e.checkAddressValid=function(){return!e.isFiberOrHFC||n.orderData.differentBillingAddress||v.customerLoggedIn||(e.orderData.billingAddress=angular.copy(e.orderData.installationAddress)),e.forceSwissAddress()?!!(e.hasSwissAddress()&&!1!==e.orderData.billingAddress.valid&&e.orderData.billingAddress.streetName&&e.orderData.billingAddress.city)||(u.show("editDataPopup"),console.warn("blocking order button, address"),!1):!!(e.orderData.billingAddress.postCode&&e.orderData.billingAddress.city&&e.orderData.billingAddress.streetName)||(u.show("editDataPopup"),console.warn("blocking order button, address"),!1)},e.hasSwissAddress=function(){return"200903041337530279"===e.orderData.billingAddress.country&&4===e.orderData.billingAddress.postCode.length},e.forceSwissAddress=function(t){var n,o;return"postpaid"===(null===(n=e.prodInfo)||void 0===n?void 0:null===(o=n.config)||void 0===o?void 0:o.type)||e.shipSim},e.getTemplate=function(){return t?t.singlePageCheckoutMode?"pages/checkout-extend-data.html":"pages/checkout-customer-data.html":"pages/404.html"},e.isPrepaid=function(){return!!n.orderData.config&&"prepaid"==Object.first(n.orderData.config.products).config.type};var _=debounce(function(){if(!e.destroyed&&e.data.checkoutCustomerDataForm){for(var t in e.data.checkoutCustomerDataForm.$error)if(e.data.checkoutCustomerDataForm.$error.hasOwnProperty(t)&&"required"!==t)return;n.save()}},1e3);if(e.$watch("checkout.orderData.billingCustomerDetails",_,!0),e.$watch("checkout.orderData.alternativeUser",_,!0),e.$watch("checkout.orderData.billingAddress",_,!0),e.getTitleFieldIfNeeded=function(){return window.removeGenderTitleField?v.agentLoggedIn?h.resolve():(n.disableFields=!0,y.get("https://api.genderize.io/?name="+t.billingCustomerDetails.firstName,{withCredentials:!1}).then(function(e){n.disableFields=!1,e&&e.data&&e.data.gender?t.billingCustomerDetails.title="male"===e.data.gender?"Mr":"Ms":t.billingCustomerDetails.title="Mr"}).catch(function(e){throwSafe(e),t.billingCustomerDetails.title="Mr",n.disableFields=!1})):h.resolve()},e.validateOrder=function(){if("asap"===e.data.wishDateType){var t=e.minFiberWishDate[0];"BEPREADY"===e.orderData.fiberLineCheck.otoIdState&&(t=e.minFiberWishDate[1]),e.orderData.fiberLineCheck.wishDate=dateToObj((new Date).addDays(t),!0),e.orderData.hfcLineCheck.wishDate=dateToObj((new Date).addDays(e.minHFCWishDate),!0)}if(e.validatingOrder)return void console.warn("blocking order button, already validating");e.validatingOrder=!0,e.prodInfo.idCheckConfirmMethod=e.data.idCheckConfirmMethod,n.save(),e.updateNationaltyIfNeeded().then(function(){return e.updateEmailIfNeeded()}).then(function(){return e.updateContactNumberIfNeeded()}).then(function(){return e.getTitleFieldIfNeeded()}).then(function(){return n.validateOrder()}).then(e.validateOrderResponse).catch(function(t){console.warn("blocking order button",t),e.validatingOrder=!1,throwSafe(t,"110-id")})},(c.search().auto||e.orderData.singlePageCheckoutMode)&&o(function(){e.validateOrder()},500),v.customerLoggedIn&&e.checkRiskyId(),v.agentLoggedIn&&(e.showPosContactNumber=e.isPrepaid(),a.data.rights.FORCE_SHIPMENT||(e.showPosContactNumber=!1)),e.updateNationaltyIfNeeded=function(){var e,t,o,i=h.defer();if(!v.customerLoggedIn)return h.resolve();if(null===(e=n.orderData)||void 0===e||null===(t=e.billingCustomerDetails)||void 0===t||null===(o=t.billingIdDetails)||void 0===o||!o.nationality)return h.resolve();var a=n.orderData.billingCustomerDetails.billingIdDetails.nationality,s=r.accountOwner.idDetails.nationality;return a&&a!==s?(n.disableFields=!0,r.accountOwner.updateInfo({nationality:a}).then(function(e){n.disableFields=!1,e?(r.accountOwner.idDetails.nationality=a,r.updateLocalStorage(),i.resolve()):i.reject("couldntUpdateNationality")}),i.promise):h.resolve()},e.updateEmailIfNeeded=function(){var t,o;if(!v.customerLoggedIn)return h.resolve();var i=null===(t=n.orderData.billingCustomerDetails)||void 0===t?void 0:t.emailAddress,a=null===(o=r.accountOwner)||void 0===o?void 0:o.emailAddress;return i&&i!==a?(n.disableFields=!0,r.accountOwner.updateInfo({email:e.orderData.billingCustomerDetails.emailAddress}).then(function(e){return n.disableFields=!1})):h.resolve()},e.updateContactNumberIfNeeded=function(){if(!v.customerLoggedIn)return h.resolve();if(!e.isFiberOrHFC)return h.resolve();if(!e.orderData.billingCustomerDetails.contactNumber)return h.resolve();n.disableFields=!0;var t=e.orderData.billingCustomerDetails.contactNumber;return t=t.split("+").join("00"),t=t.split("0041").join("0"),r.accountOwner.updateInfo({alternatePhoneNumber:t}).then(function(e){return n.disableFields=!1})},e.validateOrderResponse=function(o){e.validatingOrder=!1,n.disableFields=!1,o.errorCode?"already_exists_pos"==o.errorCode?s.start(o.username,o.dob,Object.first(t.config.products).config.type):"already_exists"==o.errorCode&&o.loginToken?(e.validatingOrder=!0,n.disableFields=!0,r.handleLoginToken(o).then(function(t){var o,i={firstName:e.orderData.billingCustomerDetails.firstName,lastName:e.orderData.billingCustomerDetails.lastName,postCode:e.orderData.billingAddress.postCode,city:e.orderData.billingAddress.city,streetName:e.orderData.billingAddress.streetName,streetNumber:e.orderData.billingAddress.streetNumber||void 0,co:e.orderData.billingAddress.co||""};null===(o=r.accountOwner)||void 0===o||o.updateInfo(i),e.validatingOrder=!1,n.disableFields=!1,!1!==t&&e.validateOrder()})):i.goToError(o.errorCode,!1,{reason:o.reason}):e.prodInfo.subscriptionDetails.onpAuthToken?(e.onpSmsPopup.data.msisdn=e.prodInfo.subscriptionDetails.msisdn,e.onpSmsPopup.data.confirmText=e.getConfirmText(),e.onpSmsPopup.show(),w.event("order","validate-onp-number","start")):e.afterValidateOrderSuccess()},e.getConfirmText=function(){return e.orderData.skipConfirmation||e.fakeSkipConfirmation?e.selfRegistration?"placeOrderButtonSelfRegistration":"placeOrderButton":"checkoutContinueButton"},e.afterValidateOrderSuccess=function(){n.orderData.skipConfirmation?(n.save(),n.doCheckout().then(function(e){e.errorCode?i.goToError(e.errorCode):i.goToConfirmation()}).catch(function(e){return throwSafe(e,"111-id")})):i.goToNextStep()},e.setContactNumber(),window.isTest&&(e.fill=function(){o(function(){populateUserData(n,d)},500)}),e.showContactNumber=function(){return!(!e.isFiberOrHFC&&!e.isTv)||(!!t.showContactNumberOnCustomerDataPage||!!window.testContactNumber&&("new-postpaid"===l.ordertype&&!e.isPrepaid()&&!v.customerLoggedIn&&e.prodInfo&&!e.prodInfo.config.hasTag("noMsisdnSelection")))},e.showEditInstallationAddressPopup=function(){var r=new b("editInstallationAddressPopup","edit-installation-address-popup.html",{title:"editInstallationAddressPopupTitle",newAddress:T.get("YDT-721")?{apiId:2}:{}},{submit:function(){var a=!1,s=r.data.newAddress,c=e.orderData.installationAddress;if(s.postCode!==c.postCode&&(a=!0),s.city!==c.city&&(a=!0),s.streetName!==c.streetName&&(a=!0),s.streetNumber!==c.streetNumber&&(a=!0),!a)return r.hide();r.data.hideClose=!0,D.lineCheck(r.data.newAddress,void 0,!1,"checkout").then(function(a){r.data.hideClose=!1,D.setGlobal(a),t.installationAddress=r.data.newAddress,t.fiberLineCheck=angular.copy(f.globalLineCheckResults.fiber),t.hfcLineCheck=angular.copy(f.globalLineCheckResults.hfc),n.save(),r.hide(),o(function(){e.isFiber&&i.goToStep("oto",!0),e.isHFC&&i.goToStep(t.hfcLineCheck.available?"customer-data":"not-available",!0)})})}});r.show()},((window.testDirectOpen&&f.isMobile||e.selfRegistration)&&i.forceIdentification&&!t.billingCustomerDetails.idCheckDone||f.showIdCheckPopupOnLoad)&&(f.pretendFullScreenLoading=!0,o(function(){f.pretendFullScreenLoading=!1,((window.testDirectOpen&&f.isMobile||e.selfRegistration)&&i.forceIdentification&&!t.billingCustomerDetails.idCheckDone||f.showIdCheckPopupOnLoad)&&(f.showIdCheckPopupOnLoad=!1,f.pretendFullScreenLoading=!0,o(function(){f.pretendFullScreenLoading=!1,u.show("idCheckPromptPopup")},1e3))},1e3)),v.customerLoggedIn&&e.hasSwissAddress()){var A=e.$watch("orderData.billingAddress.valid",function(){void 0!==e.orderData.billingAddress.valid&&A()});m.check(e.orderData.billingAddress,!0)}e.$on("$destroy",function(){e.destroyed=!0}),e.calc4GDowngrade=function(){var t=C.findProductByName("yallo_home_4g");if(t&&t.allowedInCurrentChannel()){var n=t.getValidPromotions(void 0,!0)[0];e.downgrade4gProdInfo={product:t,promotion:n,config:t.findConfigsFromOptions(null,null,n,void 0,!0)[0]},e.downgradeContainer5gTo4g={products:{yallo_home_4g:e.downgrade4gProdInfo}}}},e.continueWith4G=function(){n.changeProduct(e.downgrade4gProdInfo.config,e.downgrade4gProdInfo.promotion)},e.calc4GDowngrade()}]),app.controller("checkoutCustomerExistsCtrl",["$scope","orderData","FoundCustomerCheckout","AgentAccount","CustomerAccount",function(e,t,n,o,i){e.fcc=n,e.agent=o,e.account=i,e.loading=!0,e.prodInfo=Object.first(t.config.products),n.findExistingCustomer().then(function(){e.loading=!1}),e.start=function(t){e.loading=!0,n.continue(t).then(function(t){e.loading=!1})}}]),app.controller("checkoutEmailCtrl",["$scope","orderData","$location","CheckoutSteps","Language","$rootScope","CustomerAccount","AgentAccount","$routeParams","Network","Analytics","Reporting","Authentication","Notifications",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g){e.orderData=t,e.account=a,e.agent=s,e.Reporting=l,e.prodInfo=Object.first(t.config.products),e.selfRegistration="self-register"===c.logintype,e.newCheckoutTest=window.newCheckoutTest,e.simpleCheckoutFooter=r.isMobile,e.newCheckoutEmailChoice=window.newCheckoutEmailChoice,e.isTest=window.isTest,e.lineCheck=e.prodInfo.config.hasTag("HFC")?t.hfcLineCheck:t.fiberLineCheck,e.ignoreExistingCustomer={checked:window.isTest},e.continue=function(){!e.orderData.billingCustomerDetails.emailAddress||e.orderData.billingCustomerDetails.emailAddressVerifiedUnique||e.ignoreExistingCustomer.checked?e.afterContinue():(e.loading=!0,p.checkIfEmailExists(e.orderData.billingCustomerDetails.emailAddress).then(function(t){u.event("existing-customer-email-check",null!==t&&void 0!==t&&t.found?"Found":"Not found"),e.loading=!1,t&&t.found?(g.add("userFoundByEmail","good"),r.loginPopup.data.email=e.orderData.billingCustomerDetails.emailAddress,r.loginPopup.show()):e.afterContinue()}))},e.afterContinue=function(){var t=u.getCookies(e.orderData.orderTrackingId);if(e.orderData.billingCustomerDetails.emailAddress){var n={email_address:e.orderData.billingCustomerDetails.emailAddress,url:e.getUrl(),lang:i.data.current,cookies:JSON.stringify(t)};d.post("submit_neweshop_checkout_email",n,2,!0,window.oldEshopBasePath,"text/plain",!0,!1)}u.dataLayerPush({tracking_cookie:t}),u.event("order","email","success"),o.goToNextStep()},e.getUrl=function(){var t=location.protocol+"//"+location.host+"/"+i.data.current+"/"+c.logintype+"/"+c.ordertype+"/checkout/"+c.productUrl+"?ll="+e.prodInfo.config.lockinLength;return e.prodInfo.promotion&&(t+="&promotions="+e.prodInfo.promotion.code),e.prodInfo.device&&(t+="&promotions="+e.prodInfo.device.id),t},e.goToLogin=function(){r.loginPopup.show()},n.search().openLogin&&e.goToLogin()}]),app.controller("checkoutErrorCtrl",["$scope","AgentAccount","orderData","$routeParams","CustomerAccount","Checkout","$location","errorType","Language","Products","State","CheckoutRecovery","PrismicPopups","$timeout","$translate","$filter",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g,f,h){if(e.orderData=n,e.agent=t,e.manualCcAllowed=n.manualCcAllowed,e.account=i,e.baseLink="/"+o.logintype+"/"+o.ordertype+"/"+o.productUrl,e.data={},
e.data.error=o.error,e.reason=a.search().reason,e.data.otherError=-1===["already_exists_pos","946","no_devices","657","620","light","manualCreditCheck",e.reason?"614-tv":"",e.reason?"987":""].indexOf(e.data.error),e.Products=d,e.checkout=r,e.isExtension=["change-postpaid","extend-postpaid","add-promo"].indexOf(o.ordertype)>-1,e.cr=l,e.prodInfo=Object.first(n.products),e.lastRfeId=window.lastRfeId,"light"===e.data.error&&(e.lightProduct=d.getAvailableLightProduct(),e.lightProductContainer={products:{light:e.lightProduct}},u.isTelesales&&g(function(){var e;null===(e=p.popups.find(function(e){return"telesalesLightToSwypePopup"===e.data.display_name}))||void 0===e||e.show()},1e3)),"only-owner-can-order"===e.data.error){var m,v,b=f.instant("checkoutErrorAccountOwnerOnly");b=h("replaceText")(b,"OWNER",i.getAccountOwnerName()),b=h("replaceText")(b,"MSISDN",null===(m=i.getAccountOwnersActiveSubs())||void 0===m?void 0:null===(v=m[0])||void 0===v?void 0:v.msisdn),e.data.extraText=b}"1007"===e.data.error&&r.clearOrderData(),e.homeLink="/",u.agentLoggedIn?(e.homeLink+="pos",u.customerLoggedIn&&(e.homeLink+="/existing-customer")):u.customerLoggedIn&&(e.homeLink+="account"),e.getTemplate=function(){return n?"pages/checkout-"+s+".html":"pages/404.html"},e.getSwitchInfo=function(){var t=r.checkSwitchConfig();t&&(e.switchInfo={to:t.lockinLength})},e.backToCheckoutPage=function(){a.path("/"+c.data.current+"/"+o.logintype+"/"+o.ordertype+"/checkout/"+o.productUrl)},e.goToLogin=function(){a.path("/"+c.data.current+"/"+o.logintype+"/"+o.ordertype+"/"+o.productUrl+"/process/email").search({openLogin:"true"})},e.continueWithoutDevice=function(){r.continueWithoutDevice()}}]),app.controller("checkoutExtendDataCtrl",["$scope","orderData","Checkout","CheckoutSteps","AgentAccount","$location",function(e,t,n,o,i,r){e.orderData=t,e.checkout=n,e.agent=i,e.showFillButton=!window.production,e.prodInfo=Object.first(t.config.products),e.validateOrder=function(){e.startLocationPath=r.path(),n.save(),n.validateOrder().then(e.validateOrderResponse)},e.validateOrderResponse=function(t){r.path()==e.startLocationPath&&(n.disableFields=!1,t.errorCode?o.goToError(t.errorCode):o.goToNextStep())};var a=e.prodInfo.product.lineCheckMandatory&&"5G"===e.prodInfo.product.network;console.log("force5gLineCheck",a),!a||r.search().auto?e.validateOrder():o.goToError("change-5g-linecheck")}]),app.controller("checkoutExternalSigningCtrl",["$scope","orderData","$interval","$timeout","AgentAccount","CustomerAccount","Network","Checkout","CommonData","$location","Language","Notifications","CheckoutSteps","State",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g){if(e.orderData=t,e.agent=i,e.account=r,e.checkout=s,e.currentUrl=window.location.origin,e.outboundMode=g.agentLoggedIn&&i.data.rights.FORCE_SHIPMENT,e.data={contract:{},poa:{}},e.prodInfo=Object.first(t.config.products),g.customerLoggedIn&&r.accountOwner.subscription?e.externalLinkMsisdn=r.accountOwner.subscription.msisdn:e.externalLinkMsisdn=Object.first(s.orderData.config.products).subscriptionDetails.contactNumber||s.orderData.billingCustomerDetails.contactNumber,t.goBackoneStep)return void p.goToLastDoneStep();e.init=function(){e.checkForNewImages(),e.checkInterval=n(e.checkForNewImages,5e3,1800);var t=e.orderData.accessCodeData;e.data.extraParams="&ac="+t.accessCode+"&poa="+t.poaSignRequired+"&contract="+t.contractSignRequired,e.getQrCode(),n(function(){l.add("timeoutPleaseRefresh","bad")},36e5,1)},e.getQrCode=function(){var t={productId:e.prodInfo.config.id,qrCodeType:g.agentLoggedIn?"pos":"eshop",channel:c.channel,accessCode:e.orderData.accessCodeData.accessCode};e.prodInfo.promotion&&(t.promotionCode=e.prodInfo.promotion.code),e.prodInfo.device&&(t.deviceId=e.prodInfo.device.id),g.agentLoggedIn&&(t.agentId=i.data.username),e.loading=!0,e.error=!1,e.timeoutForTesting=o(function(){return!1},1e4),loadScript("/assets/other/qrcode.js").then(function(){var t=qrcode(7,"L"),n=g.agentLoggedIn?"signing":"sign",i=e.orderData.accessCodeData;e.qrCodeData=window.location.origin+"/"+u.data.current+"/"+n+"?ac="+i.accessCode+"&poa="+i.poaSignRequired+"&contract="+i.contractSignRequired,t.addData(e.qrCodeData),t.make(),e.orderData.qRCode={qrCodeImage:t.createDataURL(10,0)},e.loading=!1,o(function(){return o.cancel(e.timeoutForTesting)},500)})},e.checkForNewImages=function(){if(!e.checkingForNewImages&&e.orderData){e.checkingForNewImages=!0;var t={accessCode:e.orderData.accessCodeData.accessCode,filteredOutCheckSumValues:[]};for(var n in e.orderData.images)t.filteredOutCheckSumValues.push(e.orderData.images[n].checkSumValue);e.orderData.contract&&e.orderData.contract.checkSumValue&&t.filteredOutCheckSumValues.push(e.orderData.contract.checkSumValue),e.orderData.poa&&e.orderData.poa.checkSumValue&&t.filteredOutCheckSumValues.push(e.orderData.poa.checkSumValue),e.orderData.contractSignature&&t.filteredOutCheckSumValues.push(e.orderData.contractSignature.checkSumValue),e.orderData.poaSignature&&t.filteredOutCheckSumValues.push(e.orderData.poaSignature.checkSumValue),a.post("getCaptureData",t).then(function(t){if(e.checkingForNewImages=!1,t)for(var n in t.imageDetails){var o=t.imageDetails[n],i=s.convertDocType(o.docCategory);"contractSignature"==i&&e.saveDocument("contract",o),"poaSignature"==i&&e.saveDocument("poa",o)}})}},e.saveDocument=function(n,o){s.orderData[n+"Signature"]=o;var i={accessCode:s.orderData.accessCodeData.accessCode,checkSum:s.orderData[n+"Unsigned"].checkSumValue,signatureDocumentList:[{binarySignData:o.imageData,signField:"CUST_SIGNATURE"}]};g.agentLoggedIn&&"contract"===n&&"postpaid"===e.prodInfo.product.type&&(i.signatureDocumentList.push({binarySignData:o.imageData,signField:"CUST_SIGNATURE_2"}),i.signatureDocumentList.push({binarySignData:o.imageData,signField:"CUST_SIGNATURE_3"})),e.loading=!0,s.orderData[n].signed=!1,a.post("signDoc",i).then(function(i){e.loading=!1,e.data[n].valid=!0,e.data[n].b64=o.b64,s.orderData[n].valid=!0,s.orderData[n].signed=!0,s.orderData[n].checkSumValue=i.checkSumValue,(!t.accessCodeData.contractSignRequired||e.data.contract&&e.data.contract.valid)&&(!t.accessCodeData.poaSignRequired||e.data.poa&&e.data.poa.valid)&&(s.save(),e.continue())})},e.continue=function(){var e=d.path().split("/");e.splice(e.length-1),e=e.join("/"),d.path(e).search({signedExternally:"true"})},e.init(),e.$on("$destroy",function(){n.cancel(e.checkInterval)})}]),app.controller("checkoutMsisdnCtrl",["$scope","orderData","MsisdnSearch","Checkout","CheckoutSteps","AgentAccount","CustomerAccount","Reporting","$location","$timeout","$routeParams","$rootScope","State","PrismicPopups","ErrorReporting",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g,f){e.orderData=t,e.agent=r,e.account=a,e.checkout=o,e.MsisdnSearch=n,e.data={},e.testNoEmailStep=window.testNoEmailStep,e.Reporting=s,e.selfRegistration="self-register"===u.logintype,e.prodInfo=Object.first(t.config.products),e.prodInfo.product.hasTag("noMsisdnSelection")&&(e.loading=!0,e.fullPageLoading=!0,e.orderData.showContactNumberOnCustomerDataPage=!0,e.orderData.singlePageCheckoutMode&&(e.orderData.singlePageCheckoutMode=!1,f.debugWarning("setting singlePageCheckoutMode to false because skipping msisdn page")),d(function(){return e.continue()},500)),e.continue=function(n){var r=Object.first(t.config.products).subscriptionDetails;if("porting"===r.subscriptionType&&r.porting.previousProvider&&"201008241110339248"===r.porting.previousProvider.id){var s=g.popups.find(function(e){return"sunrise_customer_block"===e.data.display_name}),d=g.popups.find(function(e){return"sunrise_customer_warning"===e.data.display_name});if(s&&window.blockSunriseCustomers)return void s.show();if(d&&window.warnSunriseCustomers&&!n)return d.functions.continue=function(){d.hide(),e.continue(!0)},void d.show()}var u=r.porting?a.getSubscriptionFromMsisdn(r.porting.msisdn,"prepaid"):void 0;if(u&&"preToPost"===r.porting.previousProviderId){var l={preToPostSubscription:u.id,skip:"true"};return e.prodInfo.promotion&&(l.promotions=e.prodInfo.promotion.code),e.prodInfo.device&&(l.devices=e.prodInfo.device.id),e.continued=!0,c.path("/".concat(p.agentLoggedIn?"pos":"eshop","/pre-to-post/checkout/").concat(e.prodInfo.product.url)).search(l)}e.loading=!0,e.continued=!0,o.getAccessCode(!0).then(function(e){return p.returnWhenGotMsisdnSearch().then(function(){return e})}).then(function(e){return e&&i.goToNextStep()}).catch(function(e){return throwSafe(e,"100-id")}).then(function(t){return e.loading=!1})},e.$on("$destroy",function(){e.data.checkoutMsisdnForm&&e.data.checkoutMsisdnForm.$valid&&(e.continued||o.getAccessCode(!0))}),e.goToLogin=function(){l.loginPopup.show()},e.hasSwissAddress=function(){return"200903041337530279"===e.orderData.billingAddress.country&&4===e.orderData.billingAddress.postCode.length}}]),app.controller("checkoutNotAvailable",["$scope","orderData","Linecheck","Products","PrismicPopups","Language","$location","$rootScope","FeatureFlags","$routeParams",function(e,t,n,o,i,r,a,s,c,d){var u;e.address=null===(u=t.fiberLineCheck)||void 0===u?void 0:u.address;var l=Object.first(t.config.products),p=l.config.getType();e.prodInfo=l;var g={fiber:t.fiberLineCheck,hfc:t.hfcLineCheck},f=i.popups.find(function(e){return"Home 5G fallback popup for Best Speed"===e.data.display_name});switch(f&&(f.functions.onHide=function(){if(f.data.redirect)return a.path(f.data.redirect)},s.globalLineCheckResults.fiber.available||s.globalLineCheckResults.hfc.available||(e.hideContent=!0,f.show(),f.data.redirect="/alternative_product_closed_in_bestspeed")),n.resolveProduct(g,p)){case"HFC":d.productUrl.includes("plus_tv")&&c.get("rateplanPlus")?(e.backupProducts=[o.findProductByName("yallo_home_max_cable_plus_tv"),o.findProductByName("yallo_home_supermax_cable_plus_tv")],e.backupProductsHeading={title:"noFiberButCablePlusTvBackupTitle",desc:"noFiberButCableBackupDescription"}):(e.backupProducts=[o.findProductByName("yallo_home_max_cable"),o.findProductByName("yallo_home_supermax_cable")],e.backupProductsHeading={title:"noFiberButCableBackupTitle",desc:"noFiberButCableBackupDescription"});break;case"fiber":d.productUrl.includes("plus_tv")&&c.get("rateplanPlus")?(e.backupProducts=[o.findProductByName("yallo_home_max_fiber_plus_tv")],e.backupProductsHeading={title:"noCableButFiberPlusTvBackupTitle",desc:"noCableButFiberBackupDescription"}):(e.backupProducts=[o.findProductByName("yallo_home_max_fiber")],e.backupProductsHeading={title:"noCableButFiberBackupTitle",desc:"noCableButFiberBackupDescription"});break;case"MBB":d.productUrl.includes("plus_tv")&&c.get("rateplanPlus")?(e.backupProducts=[o.findProductByName("yallo_home_5g_plus_tv")],e.backupProductsHeading={title:"noFiberNorCableBackupTitle",desc:"noFiberNorCableBackupDescription"}):(e.backupProducts=[o.findProductByName("yallo_home_4g"),o.findProductByName("yallo_home_5g")],e.backupProductsHeading={title:"noFiberNorCableBackupTitle",desc:"noFiberNorCableBackupDescription"});break;case"MBB4G":e.backupProducts=!1;var h=i.popups.find(function(e){return"Home 4G fallback popup for 48 hours cable promo"===e.data.display_name});h&&(h.functions.onHide=function(e,t,n){["background","close-button"].includes(e)&&a.path("/".concat(r.data.current,"/alternative_product_closed_in_cable")),["escape-button"].includes(n)&&a.path("/".concat(r.data.current,"/alternative_product_closed_in_cable"))},h.show());break;default:e.backupProducts=!1}}]),app.controller("checkoutOtoCtrl",["$scope","orderData","Checkout","CheckoutSteps","Popup","Products","PrismicPopups","Linecheck","Notifications","Analytics","Promotions",function(e,t,n,o,i,r,a,s,c,d,u){var l;e.orderData=t,e.checkout=n,e.prodInfo=Object.first(t.config.products),e.orderData.fiberLineCheck.preferredLayer&&(e.status=e.orderData.fiberLineCheck[e.orderData.fiberLineCheck.preferredLayer].otoIdState,console.log(e.status),console.log(e.orderData)),e.data={otoId:e.orderData.fiberLineCheck.otoId||"",lastOtoId:""},loadScript("/assets/other/lottie-player.js"),e.isTest=window.isTest,e.backupProducts=[];var p=r.findProductByName("yallo_home_4g"),g=r.findProductByName("yallo_home_5g"),f=r.findProductByName("yallo_home_max_cable");null!==(l=t.hfcLineCheck)&&void 0!==l&&l.available&&f&&e.backupProducts.push(f),p&&e.backupProducts.push(p),g&&e.backupProducts.push(g),e.init=function(){e.status||u.getBackupPromotions().then(function(t){e.backupProducts.forEach(function(e){var n,o=t.find(function(t){var n;return(null===(n=t.product)||void 0===n?void 0:n.slug.split("-").join("_"))===e.url}),i=null===o||void 0===o?void 0:null===(n=o.promotion.slug)||void 0===n?void 0:n.toLowerCase();if(i){var r=u.findPromotionByCode(i);u.enablePromotionForChannel(r)}})}),"byOTOId"===t.fiberLineCheck.qualifiedBy&&t.fiberLineCheck.available&&!t.fiberLineCheck.otoIdAddedLater&&(e.directContinue=!0,e.continue())},e.continue=function(){if(!e.submitting)if(e.submitting=!0,e.prodInfo.subscriptionDetails.subscriptionType="newFiber",e.data.otoId){if(d.fiberContinue("checkout","submit"),"byOTOId"!==t.fiberLineCheck.qualifiedBy)return s.lineCheck(void 0,e.data.otoId,!1,"checkout-oto").then(function(o){var i;if(null!==o&&void 0!==o&&null!==(i=o.fiber)&&void 0!==i&&i.available){var r=angular.copy(t.fiberLineCheck.address),a=angular.copy(o.fiber.address);r.streetName=simplifyStreetName(r.streetName),a.streetName=simplifyStreetName(a.streetName),r.postCode==a.postCode&&r.streetName==a.streetName&&r.streetNumber==a.streetNumber?(t.fiberLineCheck=o.fiber,t.fiberLineCheck.otoIdAddedLater=!0,n.save(),e.afterContinue()):(e.submitting=!1,c.add("otoIdAddressDoesntMatch","bad"))}else e.submitting=!1,c.add("otoIdAddressDoesntMatch","bad")});e.afterContinue()}else d.fiberContinue("checkout","confirm skip"),e.afterContinue()},e.afterContinue=function(){t.fiberLineCheck=_objectSpread(_objectSpread({},t.fiberLineCheck),getUsedFiberLayer(t.fiberLineCheck)),n.getAccessCode(!0).then(function(t){e.submitting=!1,t&&o.goToNextStep()})},e.showWithoutOtoPopup=function(){d.fiberContinue("checkout","skip");var t=new i("continueWithoutOtoPopup","continue-without-oto-"+e.status.toLowerCase()+"-popup.html",{hideHeader:!0,classes:["no-header"]},{continueWithoutOto:function(){t.hide(),e.data.otoId="",e.continue()},hide:function(e){"return to enter"===e&&d.fiberContinue("checkout","return to enter")}});t.show()},e.showFindOtoIdHelpPopup=function(){a.popups.find(function(e){return"Find oto help popup"===e.data.display_name}).show()},e.showBepReadyInfoPopup=function(){a.popups.find(function(e){return"Bep ready info popup"===e.data.display_name}).show()},e.init()}]),app.controller("checkoutOverviewCtrl",["$scope","orderData","AgentAccount","Checkout","CheckoutSteps","Language","CustomerAccount","SavingsOptions","$rootScope","$timeout","State","Popup","Notifications","$window",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g){var f,h,m,v,b;e.orderData=t,e.checkout=o,e.agent=n,e.lang=r,e.account=a,e.pricingData={},e.SavingsOptions=s,e.feeCache={},e.prodInfo=Object.first(t.config.products),e.shipSim=!(u.agentLoggedIn&&e.prodInfo.subscriptionDetails.iccid||"ESIM"===e.prodInfo.simType),null!==t&&void 0!==t&&null!==(f=t.config)&&void 0!==f&&f.rateplanChangeData&&(t.config.rateplanChangeData.changeDate=dateToObj((new Date).addDays(1),!0)),e.posAgreeAgb=u.agentLoggedIn&&"tv"==(null===(h=e.prodInfo)||void 0===h?void 0:null===(m=h.product)||void 0===m?void 0:m.productType),e.onpSmsPopup=new l("onpSmsPopupOverview","onp-sms-popup.html",{title:"onpSmsPopupTitle",msisdn:e.prodInfo.subscriptionDetails.msisdn,confirmText:"placeOrderButton"},{hide:function(e){if("background"===e)return!1;"fromSubmit"!==e&&d(function(){return g.history.back()},1e3)},submit:function(t){t&&(e.prodInfo.subscriptionDetails.onpSmsCode=t,e.onpSmsPopup.hide("fromSubmit"),d(function(){return e.afterValidation()},1e3))}}),t.goBackoneStep&&i.goToLastDoneStep(),e.isPrepaid=function(){return!!o.orderData.config&&"prepaid"==Object.first(o.orderData.config.products).config.type},e.getNewFee=function(){var n,o=e.orderData.config.rateplanChangeData.date;if("custom"===o){if(!t.config.rateplanChangeData.changeDate)return;n=objToDate(t.config.rateplanChangeData.changeDate,!0),o=dateToYolString(n)}if(e.feeCache[o])return e.orderData.config.rateplanChangeData.rateplanChangeFee=e.feeCache[o].amount,e.orderData.config.rateplanChangeData.rateplanChangeFeeOrig=e.feeCache[o].amount,e.orderData.config.rateplanChangeData.ratePlanChangeFeeType=e.feeCache[o].type,e.orderData.config.rateplanChangeData.firstPossibleChangeDate=e.feeCache[o].firstPossibleChangeDate,void(e.orderData.config.rateplanChangeData.waiveFee&&(e.orderData.config.rateplanChangeData.rateplanChangeFee=0));var i=e.orderData.config.subscription.lockinEndDate?new Date(e.orderData.config.subscription.lockinEndDate.getTime()):void 0;i&&i.addHours(swissDateOffset(i));var r=new Date("asap"!==o&&i?i:swissDate());"custom"===e.orderData.config.rateplanChangeData.date&&(r=n),e.gettingNewFee=!0,e.orderData.config.subscription.validateRateplanChange(e.prodInfo.config,e.prodInfo.promotion,r).then(function(t){e.gettingNewFee=!1,t&&!t.errorCode&&(e.feeCache[o]={amount:t.rateplanChangeFee,type:t.ratePlanChangeFeeType,firstPossibleChangeDate:t.firstPossibleChangeDate},e.getNewFee())})},e.getEndDate=function(){return new Date(e.orderData.config.subscription.lockinEndDate).addDays(1)},e.doCheckout=function(t){if(o.orderData.accessCodeData&&(!e.doingCheckout||t)){if(e.doingCheckout=!0,o.orderData.accessCodeData.poaSignRequired&&(!o.orderData.poa||!o.orderData.poa.signed)&&!o.orderData.poa.sendPhysicalPoa)return e.poaSigningListener=c.$on("checkoutPoaSigning",function(){e.poaSigningListener(),o.checkingOut=!0}),e.poaListener=c.$on("checkoutPoaSigned",function(){e.poaListener(),o.checkingOut=!1,e.doCheckout(!0)}),e.poaListener2=c.$on("checkoutPoaSigningError",function(){e.poaListener2(),o.checkingOut=!1,e.doingCheckout=!1}),void c.$emit("checkoutNeedPoaSigned");e.afterValidation()}},e.afterValidation=function(){o.save(),o.doCheckout().then(function(t){if(t.errorCode){if("990"===t.errorCode)return p.add("smsCodeWrong","bad"),console.log("Showing onp sms popup"),e.onpSmsPopup.show();i.goToError(t.errorCode,e.autoOrderCompletePoa)}else i.goToConfirmation()}).catch(function(e){if("orderData_not_validated"===e)return i.goToStep("customer-data");throwSafe(e)}).catch(function(e){return throwSafe(e,"99-id")}).then(function(t){return e.doingCheckout=!1})},e.waiveFee=e.orderData.config.rateplanChangeData&&e.orderData.config.rateplanChangeData.waiveFee,e.isRatorUpgrade=e.orderData.config.rateplanChangeData&&!e.orderData.config.rateplanChangeData.isRateplanDowngrade,e.autoOrderCompletePoa=!u.agentLoggedIn&&e.orderData.accessCodeData&&e.orderData.accessCodeData.poaSignRequired&&Object.first(e.orderData.config.products).subscriptionDetails.portingOwnerIsSameUser,e.autoOrderCompletePoa&&(o.checkingOut=!0,e.poaListener=c.$on("checkoutPoaSigned",function(){e.poaListener(),o.checkingOut=!1,e.doCheckout(!0)})),!(e.orderData.forceOrder||e.waiveFee||e.isRatorUpgrade)||e.prodInfo.config.lockinLength||u.agentLoggedIn?e.waiveFee=!1:((e.waiveFee||e.isRatorUpgrade)&&(e.orderData.config.rateplanChangeData.date="asap"),e.forceOrder=!0,e.orderData.forceOrder=!1,e.doCheckout()),!u.agentLoggedIn&&null!==(v=e.orderData.config)&&void 0!==v&&null!==(b=v.subscription)&&void 0!==b&&b.isHFC&&e.isRatorUpgrade?(e.orderData.config.rateplanChangeData.date="asap",e.forceOrder=!0,e.orderData.forceOrder=!1,e.doCheckout()):e.waiveFee=!1,e.$watch("orderData.config.rateplanChangeData.changeDate",function(){var n,o,i,r,a,s,c;null!==(n=t.config.rateplanChangeData)&&void 0!==n&&null!==(o=n.changeDate)&&void 0!==o&&o.day&&null!==(i=t.config.rateplanChangeData)&&void 0!==i&&null!==(r=i.changeDate)&&void 0!==r&&r.month&&null!==(a=t.config.rateplanChangeData)&&void 0!==a&&null!==(s=a.changeDate)&&void 0!==s&&s.year&&"custom"===(null===(c=t.config.rateplanChangeData)||void 0===c?void 0:c.date)&&(console.log("getting fee"),e.getNewFee())},!0),e.$on("$destroy",function(){e.poaListener&&e.poaListener(),e.poaSigningListener&&e.poaSigningListener()})}]),app.controller("checkoutPaymentOptionsCtrl",["$scope","orderData","Checkout","AgentAccount","Language","CheckoutSteps","CustomerAccount","SavingsOptions","$rootScope","State","$timeout","Popup","Notifications","$window",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g){e.orderData=t,e.checkout=n,e.agent=o,e.account=a,e.lang=i,e.pricingData={},e.SavingsOptions=s,e.prodInfo=Object.first(t.config.products),e.shipSim=!(d.agentLoggedIn&&e.prodInfo.subscriptionDetails.iccid||"ESIM"===e.prodInfo.simType),e.removeHandsetInsuranceTest=window.removeHandsetInsuranceTest,e.onpSmsPopup=new l("onpSmsPopupOverview","onp-sms-popup.html",{title:"onpSmsPopupTitle",msisdn:e.prodInfo.subscriptionDetails.msisdn,confirmText:"placeOrderButton"},{hide:function(e){if("background"===e)return!1;"fromSubmit"!==e&&u(function(){return g.history.back()},1e3)},submit:function(t){t&&(e.prodInfo.subscriptionDetails.onpSmsCode=t,e.onpSmsPopup.hide("fromSubmit"),u(function(){return e.afterValidation()},1e3))}}),t.goBackoneStep&&r.goToLastDoneStep(),e.isPrepaid=function(){return!!n.orderData.config&&"prepaid"==Object.first(n.orderData.config.products).config.type},e.goToManualCreditCheck=function(){r.goToError("manualCreditCheck")},e.doCheckout=function(t){if(n.orderData.accessCodeData&&(!e.doingCheckout||t)){if(e.doingCheckout=!0,n.orderData.accessCodeData.poaSignRequired&&(!n.orderData.poa||!n.orderData.poa.signed))return e.poaSigningListener=c.$on("checkoutPoaSigning",function(){e.poaSigningListener(),n.checkingOut=!0}),e.poaListener=c.$on("checkoutPoaSigned",function(){e.poaListener(),n.checkingOut=!1,e.doCheckout(!0)}),e.poaListener2=c.$on("checkoutPoaSigningError",function(){e.poaListener2(),n.checkingOut=!1,e.doingCheckout=!1}),void c.$emit("checkoutNeedPoaSigned");e.afterValidation()}},e.afterValidation=function(){n.save(),n.doCheckout().then(function(t){if(t.errorCode){if("990"===t.errorCode)return p.add("smsCodeWrong","bad"),console.log("Showing onp sms popup"),e.onpSmsPopup.show();r.goToError(t.errorCode,e.autoOrderCompletePoa)}else r.goToConfirmation()}).catch(function(e){if("orderData_not_validated"===e)return r.goToStep("customer-data");throwSafe(e)}).catch(function(e){return throwSafe(e,"99-id")}).then(function(t){return e.doingCheckout=!1})},e.allowHandsetInsurance=function(){if(d.agentLoggedIn)return!1;if(window.removeHandsetInsuranceTest)return!1;var n=t.config.subscription&&t.config.subscription.hardwareInsurance;return allowHandsetInsurance(e.prodInfo,s.insuranceOption,t.config,t.config.subscription,n,d.agentLoggedIn)},e.$on("$destroy",function(){e.poaListener&&e.poaListener(),e.poaSigningListener&&e.poaSigningListener()})}]),app.controller("checkoutCtrl",["$scope","config","$routeParams","$location","AgentAccount","Checkout","$timeout","CustomerAccount","MsisdnSearch","Reporting","CheckoutSteps","Analytics","Promotions","State","$translate","$filter","Products","Storage","Countries",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g,f,h,m,v,b){e.account=s,e.checkout=r,e.MsisdnSearch=c,e.agent=i,e.products=m,e.extension="extend-postpaid"===n.ordertype||"change-postpaid"===n.ordertype||"add-promo"===n.ordertype,e.Reporting=d,e.pricingInfo={},e.countries=b;var w;if(t&&(e.config=t,r.orderData.config=t,w=Object.first(r.orderData.config.products),o.search().iccid&&w.subscriptionDetails&&(w.subscriptionDetails.iccid=o.search().iccid),window.testSinglePageCheckout||o.search().spcm)){var C=!g.agentLoggedIn&&g.customerLoggedIn,y=!(!s.primaryId||"new-postpaid"!==n.ordertype&&"new-prepaid"!==n.ordertype),D="tv"===w.product.productType;r.orderData.singlePageCheckoutMode=C&&(y||D)}if(e.prodInfo=w,e.getProduct=function(){return Object.first(e.config.products)},e.continueCheckout=function(t,n){var i,a,c=w.subscriptionDetails,d=c&&c.porting?s.getSubscriptionFromMsisdn(c.porting.msisdn,"prepaid"):void 0;if(d&&"preToPost"===c.porting.previousProviderId){var p={preToPostSubscription:d.id,skip:"true"};return w.promotion&&(p.promotions=w.promotion.code),w.device&&(p.devices=w.device.id),c.iccid&&(p.iccid=c.iccid),e.continued=!0,o.path("/".concat(g.agentLoggedIn?"pos":"eshop","/pre-to-post/checkout/").concat(w.product.url)).search(p)}n&&(r.orderData.forceOrder=!0);var f=null===(i=r.orderData)||void 0===i?void 0:null===(a=i.billingCustomerDetails)||void 0===a?void 0:a.emailAddress,h=!!f;if(r.lastOrderWasFiber||(h=!1),r.lastOrderWasFiber=!!w.config.isFiber,!g.agentLoggedIn&&"tv"===w.product.productType)if(s.applyForFreePremiumTV()){var m="yallo Home 5G"===s.findFreeTVEligibleSub().rateplan.name?Object.first(s.findFreeTVEligibleSub().rateplan.productConfigs).product:void 0,b=m?m.getType():s.findFreeTVEligibleSub().getProduct().getType();l.fireGaInteraction("yallo tv order",{tv_path:"bundle - ".concat(b)})}else l.fireGaInteraction("yallo tv order",{tv_path:"standalone"});if(u.goToStartStep(void 0,void 0,t,!1,h),l.event("order","start_process"),g.customerLoggedIn&&e.countries.sortedNationalities.map(function(t){t.id===e.account.accountOwner.address.country&&v.set("userCountry",t.countryCode)}),e.stepIndex=r.checkoutSteps.getCurrentStepIndex(),e.step=r.checkoutSteps.steps[e.stepIndex],e.deviceOption=r.getOrderDevice(),l.checkoutEvent(Object.first(r.orderData.config.products),"add",e.deviceOption&&angular.copy(e.deviceOption),void 0,null,"add_to_cart",r.orderData),!f||g.agentLoggedIn||g.customerLoggedIn||(r.orderData.billingCustomerDetails.emailAddress=f),r.countDownDate&&(w.promotion&&(r.orderData.countDownDate=r.countDownDate),r.countDownDate=void 0),e.extension){var C=r.orderData.config?Object.first(r.orderData.config.products):null;C&&(C.subscriptionDetails.subscriptionType="existing")}},e.checkSkip=function(){var i,r,s=t&&("new-postpaid"===n.ordertype||"new-prepaid"===n.ordertype||"pre-to-post"===n.ordertype||"true"===o.search().skip||window.skipCheckoutPage)&&(!g.agentLoggedIn||o.search().iccid||w.config.isFiber||w.config.hasTag("HFC")||"tv"===w.product.productType);e.config.subscription&&24===(null===(i=e.getProduct())||void 0===i?void 0:null===(r=i.config)||void 0===r?void 0:r.lockinLength)&&!o.search().skipDeviceSelection&&(s=!1),s&&(e.loadingPopup=!0,p.returnWhenPromosLoaded().then(g.checkCustomerLoggedIn).then(g.checkAgentLoggedIn).then(function(){return(!g.agentLoggedIn||o.search().iccid||w.config.isFiber||w.config.hasTag("HFC")||"tv"===w.product.productType)&&e.checkCanPlaceOrder()?void a(function(){return e.continueCheckout(!0,o.search().forceorder)},250):e.loadingPopup=!1}))},e.showProductInfo=function(){var t=e.getProduct();return!e.config.subscription||(!e.config.subscription.rateplan||(!(e.extension&&!t.promotion&&!t.device&&t.config.rateplan.id===e.config.subscription.rateplan.id)||void 0))},e.checkCanPlaceOrder=function(){if(!s.isOldEnoughToOrder(e.getProduct().config))return e.cannotOrderDetails={msg:"tooYoungForAddingSubscription"},!1;if(g.customerLoggedIn&&s.onHold&&s.onHold.active)return e.cannotOrderDetails={msg:"cantOrderOnHold"},!1;var t=e.getProduct().config.hasTag("fiber");if(!e.extension&&!s.canAddSubscription(t?"postpaid-fiber":e.getProduct().config.type))return e.state.agentLoggedIn?(e.cannotOrderDetails={msg:"cantAddSubscriptionPosText",btn:{route:"/pos/existing-customer/manage-subscriptions",cta:"subscriptionsMenuButton"}},!1):(e.cannotOrderDetails={msg:"cantAddSubscriptionEshopText",btn:{route:"/account",cta:"subscriptionsMenuButton"}},!1);if(!s.isAccountOwner()&&!e.state.agentLoggedIn){var n;if(e.cannotOrderDetails={btn:{route:"/account",cta:"subscriptionsMenuButton"}},(null===(n=s.getAccountOwnersActiveSubs())||void 0===n?void 0:n.length)>0){var o,i=f.instant("onlyAccountOwnerCanPlaceOrderWithMsisdn");i=h("replaceText")(i,"MSISDN",null===(o=s.getAccountOwnersActiveSubs()[0])||void 0===o?void 0:o.msisdn),i=h("replaceText")(i,"OWNER",s.getAccountOwnerName()),e.cannotOrderDetails.translatedMsg=i}else e.cannotOrderDetails.msg="onlyAccountOwnerCanPlaceOrder";return!1}return!0},e.canPlaceOrder=e.checkCanPlaceOrder(),!e.canPlaceOrder){var S,I;console.log("order","checkout_page_error",e.cannotOrderDetails.msg),l.event("order","checkout_page_error_"+(null===(S=w)||void 0===S?void 0:null===(I=S.config)||void 0===I?void 0:I.type),e.cannotOrderDetails.msg)}e.checkSkip()}]),app.controller("confirmationCtrl",["$scope","Checkout","order","Products","$routeParams","CustomerAccount","State","PrismicPopups","$timeout","FeatureFlags","$q",function(e,t,n,o,i,r,a,s,c,d,u){e.order=n,e.checkout=t,e.Products=o,e.state=a,e.account=r,e.showSignupChange={username:!1,password:!1},e.signupChanged={username:!1,password:!1},e.newPostpaid="new-postpaid"===i.ordertype,e.extension="extend-postpaid"==i.ordertype||"change-postpaid"==i.ordertype||"add-promo"==i.ordertype,e.addPromo="add-promo"==i.ordertype,e.showHideTvInfoForInternetProducts=d.get("tv-info-internet-products"),e.order&&(e.changeDate=n.subscriptionDetails.switchDate,e.config=o.data.productConfigs[e.order.productId]||o.data.lightProductConfigs[e.order.productId],e.orderType=e.config.tags[0],"mobile"==e.config.product.productType?e.onTopOfferType="onTopMobile":"tv"==e.config.product.productType?e.onTopOfferType="onTopTV":"internet"==e.config.product.productType?e.onTopOfferType="onTopInternetPremiumTV":e.onTopOfferType="onTopInternet",e.hideConfirmationPopup=!0,c(function(){var t;e.hideConfirmationPopup=!!window.confirmationPopupInsteadOfOffer,window.confirmationPopupInsteadOfOffer&&(null===(t=s.popups.find(function(t){return t.data.display_name==="confirmationPopup_"+e.config.tags[0]}))||void 0===t||t.show())},1e3),e.loadingOrderStatus=!0,u.all([a.checkCustomerLoggedIn(),a.returnWhenAccountDataRefreshed(),a.returnWhenOrdersRefreshed()]).then(function(){var t,n,o,i;e.loadingOrderStatus=!1,e.applyForFreePremiumTV=r.applyForFreePremiumTV(),e.newestSub=null===(t=r.getFilteredSubList(!0,!0).sort(function(e,t){return t.subscriptionStartDate>e.subscriptionStartDate?1:-1}))||void 0===t?void 0:t[0],e.tvBoxShipmentOnHold="DELIVERY_PUT_ONHOLD"===(null===(n=e.newestSub)||void 0===n?void 0:null===(o=n.orders)||void 0===o?void 0:null===(i=o[0])||void 0===i?void 0:i.status)})),e.getTemplate=function(){return n?a.agentLoggedIn?"tv"===e.config.product.productType?"pages/pos-confirmation-tv.html":e.config.hasTag("fiber")?"pages/pos-confirmation-fiber.html":e.extension?"pages/pos-confirmation-extension.html":"pages/pos-confirmation.html":"tv"===e.config.product.productType?"pages/confirmation-tv.html":e.config.hasTag("fiber")?"pages/confirmation-fiber.html":e.extension?"pages/confirmation-extension.html":"pages/confirmation.html":"pages/404.html"},e.onUsernameSubmit=function(){e.order.signup.username=r.accountOwner.username,e.showSignupChange.username=!1,e.signupChanged.username=!0},e.onPasswordSubmit=function(){e.order.signup.password="**********",e.showSignupChange.password=!1,e.signupChanged.password=!0},e.toggleShowChangeUsername=function(){e.showSignupChange.username?e.showSignupChange.username=!1:(e.showSignupChange.username=!0,e.showSignupChange.password=!1)},e.toggleShowChangePassword=function(){e.showSignupChange.password?e.showSignupChange.password=!1:(e.showSignupChange.password=!0,e.showSignupChange.username=!1)},e.resetCustomerPassword=function(){if(!e.resettingPassword){e.resettingPassword=!0;var t=e.account.accountOwner;r.forgotPassword(t.username,t.dob,!0).then(function(t){e.resettingPassword=!1,t&&(e.passwordSent=!0)})}}}]),app.controller("contactInformationsCtrl",["$scope","CustomerAccount",function(e,t){e.user=t.accountOwner}]),app.controller("continueWithoutDeviceCtrl",["$scope","$location","Promotions","Products",function(e,t,n,o){if(t.search().search){var i=JSON.parse(decodeURIComponent(t.search().search));e.path=decodeURIComponent(t.search().path),e.skip="true",delete i.devices,delete i.ll,e.search="?";for(var r in i)i[r]&&(e.search+=r+"="+i[r]+"&");e.search=e.search.slice(0,-1)}}]),app.controller("costControlCtrl",["$scope","subscription",function(e,t){e.subscription=t}]),
app.controller("customerNotificationsCtrl",["$scope","CustomerAccount",function(e,t){e.account=t,t.SetNotificationsNotNew()}]),app.controller("dealsCtrl",["$scope","$location","CustomerAccount",function(e,t,n){if(e.active={},e.loading=!0,!n.getFilteredSubList(!0,!0).length)return e.noActiveSubs=!0,void(e.loading=!1);e.$watch("active.sub",function(){e.active.sub&&(e.loading=!0,e.active.sub.newDealCount=0,e.active.sub.setActive().then(function(){e.active.sub.returnWhenRecommendationsLoaded().then(function(){return e.loading=!1})}))})}]),app.controller("deviceDealCtrl",["$scope","sub","$routeParams",function(e,t,n){e.productSlug=t.rateplan.url,e.subscription=t,e.deviceId=n.deviceId}]),app.controller("deviceCtrl",["$scope","deviceGroup","Products","State","CustomerAccount","$rootScope","Cms",function(e,t,n,o,i,r,a){e.selectColor=function(t){var n=e.deviceGroup.variations.filter(function(e){return e.allowedInCurrentChannel()});e.selectedDevice=n.find(function(n){return n.color.url===t.url&&n.capacity===e.selectedDevice.capacity}),e.selectedDevice||(e.selectedDevice=n.find(function(e){return e.color.url===t.url})),e.fetchProduct()},e.selectCapacity=function(t){var n=e.deviceGroup.variations.filter(function(e){return e.allowedInCurrentChannel()});e.selectedDevice=n.find(function(n){return n.color.url===e.selectedDevice.color.url&&n.capacity===t}),e.selectedDevice||(e.selectedDevice=n.find(function(e){return e.capacity===t})),e.fetchProduct()},e.fetchProduct=function(){e.loadingPricing=!0,e.autoConfig=e.selectedDevice.getValidProducts()[0].findConfigsFromOptions(null,e.selectedDevice)[0],n.getDevicePrice(e.selectedDevice,e.autoConfig).then(function(t){e.loadingPricing=!1,e.pricing=t})},e.getSubscriptions=function(){e.subscriptions=i.getSubscriptionsByType("postpaid",!0).filter(function(e){return e.canExtend()&&e.canAddDevice().result&&"internet"!=e.getType()&&!e.isTV})},o.returnWhenDeviceDataLoaded().then(function(){e.deviceGroup=t,e.products=n,e.state=o;var s=e.deviceGroup.variations.filter(function(e){return e.allowedInCurrentChannel()});if(e.discountedDevice=s.find(function(e){return!!e.priceBeforeDiscount}),e.selectedDevice=e.discountedDevice||s[0],e.colors=n.getDeviceColors(e.deviceGroup),e.capacities=n.getDeviceCapacities(e.deviceGroup),e.data={selectedSubscription:"newSubscription"},a.getByTag("device_page_products").then(function(t){e.loading=!1,e.availableProducts=t&&t.data&&t.data.products.map(function(e){return _objectSpread(_objectSpread({},e),{},{presetPromo:!0})})}),e.fetchProduct(),o.customerLoggedIn)e.getSubscriptions();else{var c=r.$on("doneCheckingCustomerLoggedIn",function(){e.account=i,e.getSubscriptions()});e.$on("$destroy",function(){return c()})}}),e.getPriceBeforeDiscount=function(e,t){var n=e.variations.find(function(e){return e.id===t.id&&!!e.priceBeforeDiscount});return n?n.priceBeforeDiscount:0},e.getDiscountedDeviceCapacities=function(){if(!e.discountedDevice)return e.capacities;var t=e.discountedDevice.capacity,n=_toConsumableArray(e.capacities),o=n.indexOf(t);return o>-1&&(n.splice(o,1),n.unshift(t)),n},e.getDeviceColors=function(e){var t=n.getDeviceColors(e);if(null===e||void 0===e||!e.variations||null===e||void 0===e||!e.variations.length)return t;var o=e.variations.reduce(function(e,t){return t.priceBeforeDiscount&&t.color&&t.color.name&&-1===e.indexOf(t.color.name)&&e.push(t.color.name),e},[]);return 0===o.length?t:t.filter(function(e){return-1!==o.indexOf(e.name)}).concat(t.filter(function(e){return-1===o.indexOf(e.name)}))}}]),app.controller("doubleTVCtrl",["$scope","Language","CustomerAccount","State","$rootScope",function(e,t,n,o,i){e.lang=t.current,e.isPos=i.isPos,o.checkCustomerLoggedInNoCreditCheck().then(function(t){if(t){var o;e.tvSub=null===(o=n.getFilteredSubList(!0,!0,"tv"))||void 0===o?void 0:o[0]}})}]),app.controller("emailManagementCtrl",["$scope","Redirect","Language","CustomerAccount",function(e,t,n,o){e.customerAccount=o,e.onDone=function(){t.redirect("/".concat(n.data.current,"/account"),!0)}}]),app.controller("featureFlagsCtrl",["$scope","FeatureFlags","$location","Cms","$q","Ffcheck",function(e,t,n,o,i,r){if(window.production){var a=prompt("Password");!r.chck(a)&&n.path("/")}var s=Object.keys(t.get());e.contentPerFlag={},e.failedContentTypes=[],e.lastUpdate=version_number;var c=function(){e.allFlags=t.availableFeatureFlags(),i.all(["landing_page","offer"].map(function(t){return o.getHasFieldAllLangs(t,"featureflag_only").catch(function(n){return console.error('Content of type "'.concat(t,'" could not be checked for feature flags:'),n),e.failedContentTypes.push(t),[]})})).then(function(t){var n=_slicedToArray(t,2),o=n[0],i=n[1];e.contentPerFlag=[].concat(_toConsumableArray(o),_toConsumableArray(i)).reduce(function(e,t){var n=t.data.featureflag_only,o=s.includes(n)?n:"unknown",i=e[o]||[];return _objectSpread(_objectSpread({},e),{},_defineProperty({},o,[].concat(_toConsumableArray(i),[t])))},{})})};e.enabledFlagsPerEnv={prod:t.getEnabledFlagsForEnvironment("prod"),t01:t.getEnabledFlagsForEnvironment("t01"),t02:t.getEnabledFlagsForEnvironment("t02"),t03:t.getEnabledFlagsForEnvironment("t03")},e.reset=function(){t.resetToDefault(),e.allFlags=c()},e.change=function(e){t.set(e.name,e.value)},c()}]),app.controller("findExistingCustomerCtrl",["$scope","AgentAccount","$location","CustomerAccount",function(e,t,n,o){e.agent=t,e.mode=n.search().mode,e.dob=n.search().dob,e.username=n.search().username,e.firstName=n.search().firstName,e.lastName=n.search().lastName,e.forward=n.search().forward,e.autologin="true"==n.search().autologin}]),app.controller("forYouCtrl",["$scope","CommonData","Products","$location","$interval","State",function(e,t,n,o,i,r){var a=o.search();e.CommonData=t,e.products=n,e.promotionProducts={},e.offerKey=a.offerKey,e.pageTitleKey=a.ptKey,e.pageDescriptionKey=a.pdKey,e.pageLegalKey=a.plKey,e.contest=a.contest,e.faqCategory=a.faqCategory,e.showProducts=a.productNames,e.linkExtension={},a.skip&&(e.linkExtension.skip="true"),a.device&&(e.linkExtension.devices=a.device),e.newProductItem=a.newProductItem||window.showAlternativeProductBoxes,e.quickCheckout=a.quickCheckout||window.doQuickCheckout,r.returnWhenBootloaderDone().then(function(){if(a.productNames){e.productNames=a.productNames.split("%2C").join(",").split("%252C").join(",").split(",");var t=0;for(var o in e.productNames){var i=n.findProductByName(e.productNames[o]);i&&(i.customOrderValue=t,e.promotionProducts[i.url]=i),t++}}})}]),app.controller("friendsCtrl",["$scope","$sce","Reporting","$translate","Analytics","CustomerAccount","State","Notifications","$window",function(e,t,n,o,i,r,a,s,c){return e.Reporting=n,e.customerAccount=r,e.phonenumber="",s.add("mgmtemporarynotavailable","good"),c.history.back()}]),app.controller("generalSettingsCtrl",["$scope","CustomerAccount","State",function(e,t,n){e.account=t,e.getTemplate=function(){return n.customerLoggedIn?"pages/general-settings.html":"pages/login.html"}}]),app.controller("handsetInsuranceCtrl",["$scope","CustomerAccount","SavingsOptions","subscription","Network","Popup","Notifications","Language","$location","Reporting",function(e,t,n,o,i,r,a,s,c,d){e.account=t,e.SavingsOptions=n,e.subscription=o,e.lang=s.data.current,e.data={},e.cancelInsurancePrompt=new r("cancelInsurancePrompt","cancel-insurance-popup.html",{title:"cancelInsurancePromptTitle"},{confirm:function(){e.cancelInsurancePrompt.data.loading=!0;var t={subscriptionId:e.subscription.id,optionId:n.insuranceOption.id};i.post("deactivateOption",t).then(function(t){e.cancelInsurancePrompt.data.loading=!1,t&&(a.add("insuranceCancelled","good"),e.subscription.getData(e.subscription.id),e.cancelInsurancePrompt.hide(),c.path("/".concat(s.data.current,"/account?id=").concat(e.subscription.id)))})}}),e.reactivateInsurancePrompt=new r("reactivateInsurancePrompt","reactivate-insurance-popup.html",{title:"reactivateInsurancePromptTitle"},{confirm:function(){e.reactivateInsurancePrompt.data.loading=!0;var t={subscriptionId:e.subscription.id,optionId:n.insuranceReactivationOption.id,model:e.subscription.hardwareInsurance.model,manufacturer:e.subscription.hardwareInsurance.manufacturer,freePeriodDuration:0};i.post("activateOption",t).then(function(t){e.reactivateInsurancePrompt.data.loading=!1,t&&(a.add("insuranceReactivated","good"),d.reportCioEvent("insurance"),e.subscription.getData(e.subscription.id),e.reactivateInsurancePrompt.hide(),c.path("/".concat(s.data.current,"/account?id=").concat(e.subscription.id)))})}}),e.cancelUpdate=function(){e.data.updateInsurance=!1}}]),app.controller("idDocumentsCtrl",["$scope","CustomerAccount","CommonData","Language","Analytics","FeatureFlags",function(e,t,n,o,i,r){e.account=t,e.CommonData=n,e.lang=o,e.triggerAnalytics=function(){r.get("Ayma-google-tag-manager-changes")&&i.dataLayerPush({event:"gtm visitor interaction",interaction_name:"add id",add_id_btn_location:"settings"})},e.triggerConfirmIdAnalytics=function(){r.get("Ayma-google-tag-manager-changes")&&i.dataLayerPush({event:"gtm visitor interaction",interaction_name:"confirm id"})}}]),app.controller("idvScanCtrl",["$scope","idpMode","CommonData","$location","Products","$timeout","State",function(e,t,n,o,i,r,a){e.idpMode=t,e.loading=!0,e.fromLink=!!o.search().ac,e.done=function(){e.loading=!0,r(function(){var t={};e.data.scannedData||(t.partial="true"),o.path(o.path().split("-scan").join("/success")).search(t)},1e3)},e.getTemplate=function(){if(n.accessCodeData)return"pages/idv-scan.html";o.path(o.path().split("-scan").join(""))},n.accessCodeData&&a.returnWhenBootloaderDone().then(function(){e.data=n.accessCodeData;var t=i.data.productConfigs[e.data.productId]||i.data.lightProductConfigs[e.data.productId];e.isPostpaid=t&&"postpaid"===t.type,e.loading=!1})}]),app.controller("idvSuccessCtrl",["$scope","$location","$rootScope","CommonData",function(e,t,n,o){e.rs=n,o.accessCodeData?(e.partialSuccess=t.search().partialSuccess,e.fromOutbound=o.accessCodeData.fromOutbound,delete o.accessCodeData):t.path("/"+t.path().split("/")[2]),n.preventNavigation=!0,allowNavigateAway(),n.appreturnurlscheme&&window.open("".concat(n.appreturnurlscheme,"://"),"_system")}]),app.controller("idvCtrl",["$scope","$timeout","$location","Language","CommonData","Network","Identification","Redirect","$rootScope",function(e,t,n,o,i,r,a,s,c){e.canceled=!1,e.started=!1,e.data=!1,e.facingMode="environment",e.onQrCode=function(t){e.checkCode(t)},e.startScanning=function(){e.error&&-1!==e.error.indexOf("Allowed")&&window.location.reload(),e.started=!0,e.error=null},e.onError=function(t){if(e.started=!1,!t)return e.error="error_webcamTechnical";if(isIOS&&!isIOSSafari)return e.error="error_useSafari";switch(t.name){case"NotAllowedError":case"PermissionDeniedError":e.error="error_webcamNotAllowed";break;case"NotReadableError":case"NotFoundError":e.error="error_webcamBroken";break;case"notSupportedError":e.error="error_notSupported";break;default:e.error="error_webcamTechnical",throwSafe(t,"15-id")}},e.onCancel=function(){e.canceled=!0,e.data=!1,e.started=!1},e.checkCode=throttle(function(c,d){if(c.data){var u=c.data.split("rest.").join(""),l=window.location.origin.split("rest.").join("");if(!(u.indexOf(l)<0)){var p=u.split(l)[1].split("?")[0];e.mode=p.split("/")[2].split("auto-").join("");var g=c.data.split("ac=")[1].split("&")[0],f=c.data.split("productId=")[1]?c.data.split("productId=")[1].split("&")[0]:void 0,h=c.data.split("deviceId=")[1]?c.data.split("deviceId=")[1].split("&")[0]:void 0,m=c.data.split("id=")[1]?"true"===c.data.split("id=")[1].split("&")[0]:void 0,v=c.data.split("contract=")[1]?"true"===c.data.split("contract=")[1].split("&")[0]:void 0,b=c.data.split("poa=")[1]?"true"===c.data.split("poa=")[1].split("&")[0]:void 0,w=c.data.split("fromOutbound=")[1]?"true"===c.data.split("fromOutbound=")[1].split("&")[0]:void 0;r.post("getCaptureData",{accessCode:g,filteredOutCheckSumValues:[]}).then(function(r){!r||"doneDoingIdCheck"===r.extraInfo&&m?(e.hideQrStuff=!1,e.error="alreadyDone"):(a.sendExternalInfo(g,"starting"),i.accessCodeData={accessCode:g,deviceId:h,productId:f,idCheckRequired:m,contractSignRequired:v,poaSignRequired:b,fromOutbound:w},d||(e.success=!0),t(function(){e.started=!1,"sign"==e.mode||"signing"==e.mode?n.path("/".concat(o.data.current,"/").concat(e.mode,"/scan")):s.redirect("/".concat(o.data.current,"/").concat(e.mode,"-scan"))},d?0:1200))})}}},1e3),c.appreturnurlscheme=n.search().appreturnurlscheme,!n.search().ac||i.accessCodeData&&!c.appreturnurlscheme?e.startScanning():(t(function(){return e.fromLink=!0},1e3),e.hideQrStuff=!0,e.checkCode({data:window.location.href.replace("&appreturnurlscheme="+c.appreturnurlscheme,"")},!0))}]),app.controller("infoCenterCtrl",["$scope","Products","Promotions","SavingsOptions","Rateplans","$timeout","State","Popup","smoothScroll","Cms","Channels",function(e,t,n,o,i,r,a,s,c,d,u){e.Products=t,e.Rateplans=i,e.Promotions=n,e.SavingsOptions=o,e.tabs=[{key:"channels"},{key:"products"},{key:"devices"},{key:"options"}],e.tabOptions={},e.init=function(){e.waitForAllPromos().then(a.returnWhenBootloaderDone).then(a.returnWhenCommonDataExtrasLoaded).then(function(){e.loaded=!0,e.getChannels(),e.getProducts(),e.getDevices(),e.getPromotions(),e.getOptions(),e.getChannelsFromPrismic()})},e.getOptions=function(){e.options=o.options},e.getPromotions=function(){var t=[];e.promotions=t},e.getDevices=function(){var n={};for(var o in t.data.devices){var i=t.data.devices[o];n[i.url]||(n[i.url]=[]),n[i.url].push(i)}e.devices=n},e.getProducts=function(){var n={};for(var o in t.data.products){var i=t.data.products[o];n[i.url]={product:i,configs:i.configs}}for(var o in t.data.lightProducts){var i=t.data.lightProducts[o];n[i.url]={product:i,configs:i.configs}}e.productData=n},e.getChannels=function(){var n=[],o={};for(var i in t.data.productConfigs){var r=t.data.productConfigs[i].channels;for(var a in r)n.indexOf(r[a])<0&&"xx"!==r[a]&&n.push(r[a])}for(var i in t.data.lightProductConfigs){var s=t.data.lightProductConfigs[i].channels;for(var a in s)n.indexOf(s[a])<0&&"xx"!==s[a]&&n.push(s[a])}for(var c=0,d=n;c<d.length;c++){var u=d[c];o[u]={products:{},options:{},promotions:{},devices:{}}}for(var i in t.data.products){var l,p=t.data.products[i],g=_createForOfIteratorHelper(p.channels);try{for(g.s();!(l=g.n()).done;){var u=l.value;"xx"!==u&&(o[u].products[p.url]={product:p,configs:p.getValidConfigs(!1,u),devices:objToArray(p.getValidDevices(u)),promotions:e.getPromotionsForProductInChannel(p,u)})}}catch(e){g.e(e)}finally{g.f()}}for(var i in t.data.lightProducts){var f,p=t.data.lightProducts[i],h=_createForOfIteratorHelper(p.channels);try{for(h.s();!(f=h.n()).done;){var u=f.value;"xx"!==u&&(o[u].products[p.url]={product:p,configs:p.getValidConfigs(!1,u),devices:objToArray(p.getValidDevices(u)),promotions:e.getPromotionsForProductInChannel(p,u)})}}catch(e){h.e(e)}finally{h.f()}}e.channels=o},e.getPromotionsForProductInChannel=function(t,n){return e.allPromos.filter(function(e){return!!e.available_in_channels.filter(function(e){return!window.production||"Test"!==e.environment}).map(function(e){return e.channel.slug}).includes(n)&&t.url===e.product.slug.split("-").join("_")})},e.getPromotionsForProductConfigInChannel=function(t,n){return e.getPromotionsForProductInChannel(t.product,n).filter(function(e){return e.lockin_lengths.filter(function(e){return e.lockin_length}).map(function(e){return parseInt(e.lockin_length)}).includes(t.lockinLength)})},e.getChannelsFromPrismic=function(){u.getChannels().then(function(t){return e.prismicChannels=t})},e.getChannelName=function(t){var n,o;return(null===(n=e.prismicChannels)||void 0===n?void 0:null===(o=n.find(function(e){return e.code===t}))||void 0===o?void 0:o.name)||t},e.viewDevices=function(t,n){e.devicesPopup.data.prod=t,e.devicesPopup.data.channel=n,e.devicesPopup.data.tabOptions={},e.devicesPopup.show()},e.simpleViewDevices=function(t,n){e.simpleDevicesPopup.data.devices=t,e.simpleDevicesPopup.data.channel=n,e.simpleDevicesPopup.show()},e.viewPromotions=function(t,n){e.promotionsPopup.data.prod=t,e.promotionsPopup.data.promotions={},Object.entries(t.configs).forEach(function(t){var o=_slicedToArray(t,2),i=o[0],r=o[1];e.promotionsPopup.data.promotions[i]=e.getPromotionsForProductConfigInChannel(r,n)}),e.promotionsPopup.data.channel=n,e.promotionsPopup.data.tabOptions={},e.promotionsPopup.show()},e.viewProducts=function(t,n){e.productsPopup.data.device=t,e.productsPopup.data.channel=n;var o,i=t.getValidProducts(!1,!1,n),r=[],a=_createForOfIteratorHelper(i);try{for(a.s();!(o=a.n()).done;){var s=o.value,c=s.findConfigsFromOptions(null,t,null,!1,!1,n);for(var d in c)r.push(c[d])}}catch(e){a.e(e)}finally{a.f()}e.productsPopup.data.configs=r,e.productsPopup.data.tabOptions={},e.productsPopup.show()},e.viewProductsSimple=function(t){e.simpleProductsPopup.data.products=t,e.simpleProductsPopup.show()},e.goToProductChannel=function(t,n){e.tabOptions.activeTab="channels";var o=n+"_"+t.url;r(function(){e.selectedProduct=o;var t=document.getElementById(o);t&&c(t,{offset:100})})},e.goToDevice=function(t,n){e.tabOptions.activeTab="devices";var o=n+"_"+t.url;e.devicesPopup.hide(),e.simpleDevicesPopup.hide(),r(function(){e.selectedProduct=o;var t=document.getElementById(o);t&&c(t,{offset:100})})},e.waitForAllPromos=function(){return d.getByType("promotion").then(function(t){e.allPromos=t.map(function(e){return e.data}),e.allPromos.forEach(function(e){return e.title=e.title[0].text})})},e.devicesPopup=new s("devicesPopup","info-center-devices.html",{title:"Devices",tabOptions:{}},{goToDevice:e.goToDevice}),e.simpleDevicesPopup=new s("simple-devicesPopup","info-center-devices-simple.html",{title:"Devices"},{goToDevice:e.goToDevice}),e.promotionsPopup=new s("promotionsPopup","info-center-promotions.html",{title:"Promotions",tabOptions:{}}),e.productsPopup=new s("productsPopup","info-center-products.html",{title:"Products",tabOptions:{}}),e.simpleProductsPopup=new s("simpleProductsPopup","info-center-products-simple.html",{title:"Products"}),e.init()}]),app.controller("instantTopupSuccessCtrl",["$scope","$location","Analytics",function(e,t,n){var o=t.search().amount;e.amount=Array.isArray(o)?o[0]:o,e.msisdn=t.search().msisdn,e.amount&&e.msisdn&&(n.event("instant-topup","success"),e.success=!0)}]),app.controller("instantTopupCtrl",["$location","Notifications",function(e,t){e.search().topupError&&t.add("topupError","bad")}]),app.controller("kitsuneRedirectCtrl",["$window",function(e){console.log("force a page reload (legacy -> kitsune)",e.location.href),e.location.href=e.location.href}]),app.controller("kitsuneLinecheckRedirectCtrl",["$scope","Linecheck","$location","Language","$route",function(e,t,n,o,i){var r=JSON.parse(localStorage.getItem("kitsuneCheckout"));if(r){t.linecheckFromLocalstorage(r);var a=i.current.params.product;switch(a){case"yallo_home_max_fiber":n.path("/".concat(o.data.current,"/kitsune-checkout-fiber-special"));n.path("/".concat(o.data.current,"/kitsune-checkout-fiber-special"));break;case"yallo_home_max_cable":n.path("/".concat(o.data.current,"/kitsune-checkout-cable"));break;case"yallo_home_cable_s":n.path("/".concat(o.data.current,"/kitsune-checkout-cable-s"));break;case"yallo_home_cable_m":n.path("/".concat(o.data.current,"/kitsune-checkout-cable-m"));break;case"yallo_home_cable_s_plus_tv":n.path("/".concat(o.data.current,"/kitsune-checkout-cable-s-plus-tv"));break;case"yallo_home_cable_m_plus_tv":n.path("/".concat(o.data.current,"/kitsune-checkout-cable-m-plus-tv"));break;case"yallo_home_max_cable_plus_tv":n.path("/".concat(o.data.current,"/kitsune-checkout-cable-plus-tv"));break;case"yallo_home_max_fiber_plus_tv":n.path("/".concat(o.data.current,"/kitsune-checkout-fiber-plus-tv"));break;default:n.path("/".concat(o.data.current,"/eshop/new-postpaid/checkout/").concat(a))}}else console.log("no linecheck from kitsune")}]),app.controller("landingPageCtrl",["$scope","data","Cms","Promotions","$rootScope","Redirect","$location","State","CheckoutRecovery","Products","Checkout","CustomerAccount",function(e,t,n,o,i,r,a,s,c,d,u,l){if(loadScript("/assets/other/lottie-player.js"),a.search().fromKitsuneCheckout&&(i.pretendFullScreenLoading=!0),t&&t.data){e.id=t.id,e.uid=t.uid,e.data=t.data.body,e.rs=i,e.cr=c,e.cms=n,e.checkout=u,e.linkExtension,e.accessAllowed=!0,e.subscriptionId=a.path().split("/")[3],e.subscriptionId&&s.checkCustomerLoggedInNoCreditCheck().then(function(t){t&&(e.subscription=l.subscriptions[e.subscriptionId])}),e.subIdInUrl=function(t){return t.includes("{{subscriptionId}}")&&!e.subscriptionId&&l.getCurrentSubscription()?t.replace("{{subscriptionId}}",l.getCurrentSubscription().id):t.includes("{{subscriptionId}}")&&e.subscriptionId?t.replace("{{subscriptionId}}",e.subscriptionId):t},e.isNotMaxHeightTest=function(){return window.notMaxHeightTest},-1!==a.path().indexOf("bf-home")&&(i.singlePageBlackfridayMode=!0),e.lightProduct=d.getAvailableLightProduct(),e.lightProductContainer={products:{light:e.lightProduct}},s.languageVersions={};var p,g=_createForOfIteratorHelper(t.alternate_languages);try{for(g.s();!(p=g.n()).done;){var f=p.value,h=f.uid;"home"===h&&(h=""),h=h.split("cancellation_").join("cancellation/"),h=h.split("kuendigung_").join("kuendigung/"),h=h.split("resilier_").join("resilier/"),h=h.split("cancellazione_").join("cancellazione/"),s.languageVersions[f.lang.substring(0,2)]="/"+h}}catch(e){g.e(e)}finally{g.f()}var m=t.data.redirect_url;if(m&&m.trim())return r.redirect(m.trim());var v=e.data.filter(function(e){return"block_access"===e.slice_type})[0];if(v&&!a.search().documentId&&!a.search().isPreview){var b=document.referrer;v.items.find(function(e){return"Fuzzy"===e.match_type?-1!==b.indexOf(e.referrer):b===e.referrer||!e.referrer&&window.yolAppHistory.length>1})||(e.accessAllowed=!1,a.path("/page-access-not-allowed/"+a.path().split("/").pop()))}e.data.filter(function(e){return"promotions"===e.slice_type}).forEach(function(e){e.items.forEach(function(e){if(e&&e.promotion){var t=o.findPromotionById(e.promotion.id);o.enablePromotionForChannel(t),i.$emit("appliedNewPromo")}})}),e.subscription&&(e.data.filter(function(e){return"hero_offer"===e.slice_type||"medium_offer"===e.slice_type}).forEach(function(t){var n=e.subscription.recommendations.deals.find(function(e){return t.primary.offer.tags.includes(e.offerTag)});t.replaceData=n||{subscription:e.subscription}}),e.data.filter(function(e){return"small_offers"===e.slice_type}).forEach(function(t){t.items.forEach(function(t){var n=e.subscription.recommendations.deals.find(function(e){return t.offer.tags.includes(e.offerTag)});t.replaceData=n||{subscription:e.subscription}})})),e.data.filter(function(e){return"contest"===e.slice_type}).forEach(function(e){return e.items=e.items.filter(function(e){return null===e||void 0===e?void 0:e.field_name})}),e.data.filter(function(e){return"custom_content"===e.slice_type}).forEach(function(e){return e.primary.text=n.convertText(e.primary.text)}),e.data.filter(function(e){return"page_header"===e.slice_type}).forEach(function(e){return e.primary.content=n.convertText(e.primary.content)}),e.data.filter(function(e){return"image___text"===e.slice_type}).forEach(function(e){return e.primary.content=n.convertText(e.primary.content)}),e.data.filter(function(e){return"products"===e.slice_type}).forEach(function(e){var t=e.items.filter(function(e,t,n){return n.findIndex(function(t){return t.product.id===e.product.id})===t});t.length!=e.items.length&&console.warn("Landing page contains duplicate products: "+e.items.map(function(e){return e.product.slug})),e.items=t,e.primary.content_above_products=n.convertText(e.primary.content_above_products),e.linkExtension="One page checkout (Logged in customers only)"===e.primary.checkout_mode?{spcm:"true"}:void 0}),e.data.filter(function(e){return"products_preset"===e.slice_type}).forEach(function(e){return e.primary.content_above_products=n.convertText(e.primary.content_above_products)}),e.data.filter(function(e){return"products_preset"===e.slice_type}).forEach(function(e){e.items=void 0,e.primary.preset&&e.primary.preset.id&&n.getById(e.primary.preset.id).then(function(t){e.items=t&&t.data&&t.data.products,e.primary.mobile_start_position=t.data.mobile_start_position})}),e.data.filter(function(e){return"download_links"===e.slice_type}).forEach(function(e){return e.primary.title=n.convertText(e.primary.title)}),e.data.filter(function(e){return"big_links"===e.slice_type}).forEach(function(e){return e.items.forEach(function(e){return e.content=n.convertText(e.content)})}),e.data.filter(function(e){return"image_s_"===e.slice_type}).forEach(function(e){return e.items.forEach(function(e){return e.alt_text=n.convertRawText(e.alt_text)})}),e.data.filter(function(e){return"fixed_squircle"===e.slice_type}).forEach(function(e){e.primary.text=n.convertText(e.primary.text),e.primary.secondary_text=n.convertText(e.primary.secondary_text)})}e.getBlockSize=function(e){return-1!==e.indexOf("Half image | half ")?"block-6-6 block-invert":-1!==e.indexOf(" | half image")?"block-6-6":-1!==e.indexOf("Small image | big ")?"block-9-3 block-invert":-1!==e.indexOf(" | small image")?"block-9-3":""},e.getSliceId=function(t){var n=e.data.filter(function(e){return e.slice_type===t.slice_type}).indexOf(t),o=t.slice_type;return"products_preset"===o&&(o="products"),0===n?o:o+"_"+(n+1)},e.setup4gBackupProduct=function(){var t=d.findProductByName("yallo_home_4g");if(t){var n=t.getValidPromotions(void 0,!0)[0];e.downgrade4gProdInfo={product:t,promotion:n,config:t.findConfigsFromOptions(null,null,n,void 0,!0)[0]},e.downgrade4gContainer={products:{yallo_home_4g:e.downgrade4gProdInfo}}}},e.continueWith4G=function(){u.changeProduct(e.downgrade4gProdInfo.config,e.downgrade4gProdInfo.promotion)},o.returnWhenPromosLoaded().then(function(){e.setup4gBackupProduct()}),e.$on("$destroy",function(){return i.singlePageBlackfridayMode=!1})}]),app.controller("languageCtrl",["$scope","CustomerAccount","FeatureFlags","Analytics",function(e,t,n,o){e.account=t,e.data={},e.languages=["EN","DE","FR","IT"],e.previousLanguage="",e.saveSettings=function(){e.newSettings.preferredLang!=e.account.accountOwner.preferredLang.toUpperCase()&&e.savePreferredLanguage()},e.savePreferredLanguage=function(){e.changes.preferredLang=!0,t.changeLang(e.newSettings.preferredLang.toLowerCase()).then(function(i){i&&(n.get("Ayma-google-tag-manager-changes")&&o.dataLayerPush({event:"gtm visitor interaction",interaction_name:"settings language dropdown",settings_current_language:e.previousLanguage,settings_new_language:e.newSettings.preferredLang.toLowerCase()}),e.previousLanguage=e.account.accountOwner.preferredLang,t.updateLocalStorage(),e.changes.preferredLang=!1,e.account.accountOwner.preferredLang=e.newSettings.preferredLang.toLowerCase(),Object.size(e.changes)||e.init())})},e.init=function(){e.changes={},e.newSettings={preferredLang:e.account.accountOwner.preferredLang.toUpperCase()},e.$watch("account.accountOwner.preferredLang",function(t){t!==e.newSettings.preferredLang&&(e.newSettings.preferredLang=t.toUpperCase())}),e.previousLanguage=e.newSettings.preferredLang,e.data.oneNotTerminatedSubscription=!1;for(var t in e.account.subscriptions)"terminated"!==e.account.subscriptions[t].status&&(e.data.oneNotTerminatedSubscription=!0)},e.init()}]),app.controller("leadGenerationController",["$scope","Notifications","Network","Popup","AgentAccount",function(e,t,n,o,i){e.languages=["de","fr","it","en","sq","sr","es","pt"],e.leadCategories=["Inbound Hotlead","Inbound Adminlead","Outbound Hotlead","Street Sales","Airport Lead","Aiport Sunrise Lead","other"],e.data={lead:{},leadProvider:{}},e.saveLead=function(){e.submitting=!0,e.popup=new o("addMoreLeadPopup","more-lead-popup.html",{title:"addMoreLeadPopup"},{add:function(){e.data.lead={},e.leadsForm.$setPristine(),e.popup.hide()},done:function(){e.data.lead={},e.data.leadProvider={},e.leadsForm.$setPristine(),e.popup.hide()}}),e.data.leadProvider.agentName="".concat(i.data.firstName,"-").concat(i.data.lastName,"-").concat(i.data.username),n.post("leadgeneration",e.data,2,!1,window.oldEshopBasePath,"text/plain",!0,!1).then(function(n){e.submitting=!1,n&&(e.popup.show(),t.add("leadSuccessNotif","good"))})}}]),app.controller("loginCtrl",["$scope","$rootScope","$location","Language","Storage",function(e,t,n,o,i){if(e.rs=t,-1!==n.path().indexOf("/account/cockpit"))return t.roamingCockpit=!0,i.set("roamingCockpit",!0,!0),void e.$on("$destroy",function(){t.roamingCockpit=!1,i.set("roamingCockpit",!1,!0)});t.showFullScreenLoader=!0,e.rs=t;var r=n.path(),a=angular.copy(n.search()),s=n.hash(),c=encodeURIComponent(r);a.loginToken&&delete a.loginToken,a.username&&delete a.username;var d=encodeURIComponent(JSON.stringify(a)),u="?redirectPath=".concat(c,"&redirectSearch=").concat(d,"&redirectHash=").concat(s);if(window.location.hostname.includes("localhost")){var l=window.microServiceEndpoint.split("-")[0]+".dev.yallo.ch/"+o.data.current+"/auth/login";return window.location.href="".concat(l).concat(u)}return window.location.href="".concat(window.location.origin,"/").concat(o.data.current,"/auth/login").concat(u)}]),app.controller("manageExistingCustomerCtrl",["$scope","AgentAccount","CustomerAccount","CustomerOrders","CommonData","$location","Storage",function(e,t,n,o,i,r,a){e.loading=!0,e.agent=t,e.account=n,e.CustomerOrders=o,e.CommonData=i,e.encode=encodeURIComponent;var s=r.search().username,c=a.get("posCustDetails");s&&s!==c.username?t.removeCustomerData(!0).then(function(){e.loading=!0,r.path("/pos/find-existing-customer").search({username:s})}).finally(function(){e.loading=!1}):e.loading=!1}]),app.controller("manageSubscriptionsCtrl",["$scope","AgentAccount","CustomerAccount","$location",function(e,t,n,o){if(e.agent=t,e.account=n,e.activeSubscription=n.getFilteredSubList()[0],o.search().id){var i=n.subscriptions[o.search().id];i&&(e.activeSubscription=i)}e.init=function(){window.location.reload()}}]),app.controller("manualCreditCheckCtrl",["$scope","ManualCreditCheck","$location","AgentAccount","Network","Notifications","State","Checkout","CustomerAccount",function(e,t,n,o,i,r,a,s,c){if(e.documents=[],e.agent=o,e.account=c,e.state=a,e.data={customerData:{billingIdDetails:{}},tempDocument:{},address:{}},a.customerLoggedIn){var d={};s.copyCustomerDataToOrderData(!1,d),e.data.customerData=d.billingCustomerDetails,e.data.address=d.billingAddress}e.newCustomer=-1===n.path().indexOf("/existing-customer"),e.$watch("data.tempDocument.b64",function(t){return t&&e.addDocument()}),e.addDocument=function(){var t=angular.copy(e.data.tempDocument);e.documents.push(t),e.data.tempDocument={}},e.deleteDocument=function(t){e.documents.splice(e.documents.indexOf(t),1)},e.submit=function(){e.submitting||(e.submitting=!0,t.check(e.documents,e.data.freeText,e.data.customerData,e.data.address).then(function(t){e.submitting=!1,t&&n.path("/pos/manual-credit-check-submitted")}))},e.getTokenData=function(){if(!e.submitting){e.submitting=!0;var t={token:e.data.token};i.post("get_token_data",t,2,!0,window.oldEshopBasePath,"text/plain",!0,!1).then(function(t){var n;if(!t||t.errorCode||!t.data_string)return r.add("invalid token","bad");t=JSON.parse(t.data_string),e.data.customerData=t.billingCustomerDetails,e.data.address=t.billingAddress,e.data.contactNumber=null===(n=t.subscriptionDetails)||void 0===n?void 0:n.contactNumber;var o={accessCode:t.accessCodeData.accessCode,filteredOutCheckSumValues:[]};i.post("getCaptureData",o).then(function(t){if(e.submitting=!1,null!==t&&void 0!==t&&t.imageDetails.length){var n=t.imageDetails.find(function(e){return"ID_FRONT"===e.docCategory}),o=t.imageDetails.find(function(e){return"ID_BACK"===e.docCategory});n&&(e.documents.push({name:"id-scan-front",fileType:n.fileType,b64:"base64,"+n.imageData,blockDeletion:!0}),o&&e.documents.push({name:"id-scan-back",fileType:o.fileType,b64:"base64,"+o.imageData,blockDeletion:!0}))}})})}}}]),app.controller("newCustomerCtrl",["$scope","$location","FeatureFlags",function(e,t,n){
e.showInflationStatus=n.get("showInflationStatus"),Object.size(t.search())?e.linExtension=t.search():e.linExtension={}}]),app.controller("offerPreviewCtrl",["$scope","$routeParams",function(e,t){e.offerId=t.offerId}]),app.controller("openidLoginErrorCtrl",["$scope","$location","$rootScope",function(e,t,n){e.errorCode=t.search().errorCode,n.noFooter=!0,n.simpleHeader=!0}]),app.controller("optionCtrl",["$scope","option","Products","Rateplans","Support","$location","CustomerAccount","Analytics","$rootScope","State",function(e,t,n,o,i,r,a,s,c,d){e.account=a,e.option=t,console.log(t),e.option&&(e.products=n,e.applicableProducts=o.getProductsFromRateplans(e.option.applicableRateplans),r.search().rateplan&&(e.rateplan=r.search().rateplan)),d.checkCustomerLoggedInNoCreditCheck().then(function(t){if(t){var n=a.getCurrentSubscription();n&&n.returnWhenRecommendationsLoaded().then(function(){e.currentSub=n})}}),e.analytics=function(){return s.event("sms-button-option-click","click","mobile")},e.isIOS8OrMore=isIOS8OrMore,e.isAndroid=isAndroid,e.isIOS=isIOS,e.rs=c,e.getTopic=function(e){return Object.first(i.getTopicsWithTag(e))}}]),app.controller("optionsCtrl",["$scope","SavingsOptions","Rateplans","$location","smoothScroll","Storage",function(e,t,n,o,i,r){e.Rateplans=n,e.categories=t.categories,e.tabs=[{key:"postpaid"},{key:"prepaid"}];if(e.tabOptions={activeTab:o.search().prepaid||"#prepaid"===o.hash()?"prepaid":r.get("tab-ctrl-options")||"postpaid"},o.hash()){var a=document.getElementById(o.hash());a&&i(a)}e.$watch("tabOptions.activeTab",function(e){r.set("tab-ctrl-options",e)}),e.rateplanPostpaid=n.data.rateplans["201708061747262325"],e.rateplanPrepaid=n.data.rateplans["201707071039100034"];var s=t.findOptionByName("5g_option");s&&(e.extraOptions={},e.extraOptions[s.id]=s)}]),app.controller("posPickupCtrl",["$scope","$timeout","$location","AgentAccount","CustomerOrders","CustomerAccount","Camera",function(e,t,n,o,i,r,a){e.data={scanning:!1,error:"",loading:!0},e.agent=o,e.mode=n.search().mode,e.dob=n.search().dob,e.username=n.search().username,e.firstName=n.search().firstName,e.lastName=n.search().lastName,e.forward=n.search().forward,e.autologin="true"==n.search().autologin,a.checkIfDeviceHasCamera().then(function(t){e.data.loading=!1,e.deviceHasCamera=t}),e.onSuccess=function(){e.data.loading=!0,i.getOrders().then(function(t){if(e.data.loading=!1,!t.filter(function(e){return i.orderAllowedToBePickedUp(e,r.subscriptions,!0)}).length)return e.data.error="noOrderReadyForPickup";r.findIdsInStatus("approved").length?n.path("/pos/existing-customer/activate-order/auto"):n.path("/pos/existing-customer/verify-id").search({returnIntent:encodeURIComponent("/pos/existing-customer/activate-order/auto")})})},e.onCancel=function(){return e.data.scanning=!1},e.onError=function(t){console.error(t),e.data.scanning=!1}}]),app.controller("portingDateCalculatorCtrl",["$scope","Popup","CustomerAccount","Language","Analytics","$q","$filter","Network",function(e,t,n,o,i,r,a,s){e.init=function(){var o,a,s;i.event("portingDateCalculator","start"),e.data={},e.contactPopup=new t("portingContactPopup","porting-contact-popup.html",{title:"contactUsTitle"}),e.data.subs=n.getFilteredSubList(!0,!0),(null===(o=e.data.subs)||void 0===o?void 0:o.length)>0&&(e.data.selectedSub=null===(a=e.data.subs)||void 0===a?void 0:a[0]),e.currentMsisdn=null===(s=e.data.selectedSub)||void 0===s?void 0:s.msisdn,e.loading=!0;var c=[];e.data.subs.forEach(function(e){c.push(e.returnWhenRecommendationsLoaded())}),r.all(c).then(function(){e.updateData(),e.loading=!1}),setTimeout(function(){e.loading&&(e.updateData(),e.loading=!1)},2e3)},e.showContactDetails=function(){i.event("portingDateCalculator","contactDetailsBtnClicked"),e.contactPopup.show()},e.selectionChanged=function(){e.showResult=!1,e.updateData()},e.updateData=function(){var t;e.data.selectedSub&&"terminated"!=e.data.selectedSub.status?(e.showError=!1,e.earliestPortingDate=e.data.selectedSub.earliestPortingDate(),e.extraCost=e.data.selectedSub.calcExtraCostIfLeaving(),e.currentMsisdn=e.data.selectedSub.msisdn,i.event("portingDateCalculator","calculateDataForSelectedSub"),e.extraCost||(e.errorMsg="error",e.showError=!0,throwSafe("porting date calculator: failed to calculate extra cost for msisdn: "+e.data.selectedSub.msisdn,"ID-73"))):"terminated"==(null===(t=e.data.selectedSub)||void 0===t?void 0:t.status)?(e.errorMsg="subscriptionTerminatedMessage",e.showError=!0):(e.errorMsg="portingCalcNoSubscriptionSelectedError",e.showError=!0)},e.goBtnClick=function(){e.showResult=!0,e.storeLead(),i.event("portingDateCalculator","showResultBtnClicked")},e.storeLead=function(){if(e.data.selectedSub){var t;e.earliestPortingDate||e.updateData();var i={subscriptionId:e.data.selectedSub.id,accountId:n.accountId,msisdn:e.data.selectedSub.msisdn,earliestPortDate:a("date")(e.earliestPortingDate,"yyyy-MM-dd"),extraCost:(null===(t=e.extraCost)||void 0===t?void 0:t.toString())||"N/A",brand:brand,language:o.data.current.toLowerCase()};s.post("submit_port_cal_data",i,2,!0,window.oldEshopBasePath,"text/plain",!0,!1).catch(function(e){throwSafe(e,"ID-71")})}},e.init()}]),app.controller("posActivateOrderCtrl",["$scope","order","Network","State","CustomerAccount","$rootScope","Notifications","$location","AgentAccount","CustomerOrders","Products","CommonData",function(e,t,n,o,i,r,a,s,c,d,u,l){e.rs=r,e.data={iccid:""},e.iccidResult={},e.subscription=i.subscriptions[t.subscriptionId];var p=e.subscription.rateplan.firstProduct().bestConfig.type,g=u.findProductsByChannels(l.channel);for(var f in g)if(g[f].type===p){e.productId=Object.first(g[f].getValidConfigs()).id;break}e.productId||(e.noIccidCheck=!0),e.submit=function(){if(!e.loading){var o={orderId:t.orderId,iccid:e.data.iccid};e.loading=!0,n.post("pushActivationFromPos",o).then(function(t){t&&c.updateExistingCustomer().then(function(){d.getOrders().then(function(){s.path("/pos/existing-customer").search({}),e.loading=!1,a.add("orderActivated","good")})})})}},e.showIccidScanButton=function(){if(!isIE)return!e.data.show&&(!r.isDesktop&&(o.cordovaLoaded&&CameraPreview||navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia))},e.$watch("data.result",function(t){t&&(e.data.iccid=t,e.stopScanningIccid())}),e.startScan=function(){e.data.show=!0},e.stopScanningIccid=function(){e.data.show=!1}}]),app.controller("posLoginCtrl",["$scope","AgentAccount","$location","Channels","Storage","FeatureFlags",function(e,t,n,o,i,r){e.agent=t;var a=n.search();if(e.allowChannelChange=a.selectChannel||n.path().indexOf("/backoffice"),e.allowChannelChangeInbound=a.inboundMode,e.allowChannelChangeOutbound=a.outboundMode,e.allowChannelChangeCare2Sales=a.care2SalesMode,e.allowReChannelChange=a.retentionMode,e.allowChannelChangeBackOffice=a.backofficeMode||n.path().indexOf("/backoffice"),e.allowChannelChangeOwnShop=a.ownShopMode,e.allowChannelChangeAmbassador=a.ambassadorMode,e.allowFmChannelChangeFust=a.fmMode,e.allowpdChannelChangePost=a.pdMode,e.data={},a.username&&a.password&&(e.data.username=decodeURI(a.username),e.data.password=decodeURI(a.password)),o.getChannels().then(function(t){return e.channels=t}),e.getChannelName=function(t){var n,o;return(null===(n=e.channels)||void 0===n?void 0:null===(o=n.find(function(e){return e.code===t}))||void 0===o?void 0:o.name)||t},e.allowChannelChange&&(e.allowedSwitchChannels=["mz","id","et","sc","ab"],e.mainChannel="ss",t.tempLoginMainChannel="ss"),e.allowChannelChangeInbound&&(e.data.tempChannel="ol",e.mainChannel="ib",t.tempLoginMainChannel="ib"),e.allowChannelChangeOutbound&&(e.data.tempChannel="ol",e.mainChannel="ob",t.tempLoginMainChannel="ob"),e.allowChannelChangeCare2Sales&&(e.data.tempChannel="ol",e.mainChannel="cs",t.tempLoginMainChannel="cs"),e.allowChannelChangeBackOffice&&(e.allowedSwitchChannels=["pt","mz","id","mi"],e.mainChannel="yb",t.tempLoginMainChannel="yb"),e.allowChannelChangeOwnShop){if(r.get("special-link-feature")){var s=window.location.search.split(","),c=[];c.push(s[0].split("pal=")[1]),s.slice(1).forEach(function(e){c.push(e)}),i.set("AllowedProductsOnOwnShop",c)}r.get("special-link-feature")||(e.data.tempChannel="ol"),e.mainChannel="os",t.tempLoginMainChannel="os"}e.allowChannelChangeAmbassador&&(e.data.tempChannel="ol",e.mainChannel="ab",t.tempLoginMainChannel="ab"),e.allowFmChannelChangeFust&&(e.data.tempChannel="fm",e.mainChannel="fu",t.tempLoginMainChannel="fu"),e.allowpdChannelChangePost&&(e.data.tempChannel="pt",e.mainChannel="pd",t.tempLoginMainChannel="pd"),e.allowReChannelChange&&(e.data.tempChannel="ol",e.mainChannel="re",t.tempLoginMainChannel="re"),a.username&&a.password&&e.agent.login(e.data.username,e.data.password,e.data.tempChannel)}]),app.controller("posOptionCtrl",["$scope","option","Products","Rateplans",function(e,t,n,o){e.option=t,e.products=n,e.option&&(e.applicableProducts=o.getProductsFromRateplans(e.option.applicableRateplans))}]),app.controller("posPreToPostCtrl",["$scope","CustomerAccount","Products","AgentAccount","$route","$location",function(e,t,n,o,i,r){if(e.account=t,e.agent=o,e.Products=n,e.gettingPrepaidSubDetails=!0,e.gettingPrepaidSubDetails=!1,e.subscription=t.subscriptions[i.current.params.subscriptionId],e.subscription){e.canDoPreToPost=t.canDoPreToPost(e.subscription),e.cantReason=t.cantDoPrePostReason(e.subscription);var a=Object.first(e.subscription.rateplan.products);a&&(e.productType=a.tags[0]),"internet"===e.productType&&(e.productType=null)}else e.gettingPrepaidSubDetails=!0,t.requireAllSubscriptionData().then(function(){e.gotPrepaidSubs=!0,e.gettingPrepaidSubDetails=!1,e.validPreToPostSubs=t.getValidPreToPostSubs()});e.setSubscription=function(e){r.path(r.path()+"/"+e.id)}}]),app.controller("posPrepaidChangeRateplanConfirmationCtrl",["$scope","CustomerAccount","Products","$location","Network","data","FeatureFlags",function(e,t,n,o,i,r,a){e.account=t,e.Products=n,e.submitting=!1,e.subscription=r.subscription,e.product=r.product,e.confirm=function(){if(!e.submitting){e.submitting=!0;var t={subscriptionId:e.subscription.id,newProduct:e.product.config.id,switchDate:a.get("MBCR-MBCR-12315-rp-date-change")?swissDate().toServerJSON():swissDate().addDays(1).toServerJSON()};i.post("prepaidRateplanChange",t).then(function(t){e.submitting=!1,t&&o.path("/pos/existing-customer/change-rateplan/success").search()})}}}]),app.controller("posProductsCtrl",["$scope","CommonData","Products","AgentAccount","CustomerAccount",function(e,t,n,o,i){e.CommonData=t,e.products=n,e.agent=o,e.account=i}]),app.controller("posReportCtrl",["$scope","AgentAccount","Network","Authentication",function(e,t,n,o){for(e.agent=t,e.transactionLines=[],e.performanceData=[],e.commissionYears=[2019];e.commissionYears[e.commissionYears.length-1]<(new Date).getFullYear();)e.commissionYears.push(new Date(e.commissionYears[e.commissionYears.length-1]+1,6,6).getFullYear());e.commissionYears=e.commissionYears.map(function(e){return e.toString()}),e.commissionMonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e.registrationTypes=["All","Shop","Promotor"],e.displayDetailLine=!1,e.targetData=[],e.selectedYear=[],e.selectedMonth=[],e.selectedRegTypes=[],e.selectedRegTypes.push(e.registrationTypes[0]),e.isLoading={GetTranscationLine:!1,GetPerformanceData:!1,GetTargetData:!1},e.getPosReport=function(t,i){return i[t.actionName]=!0,t.token=o.posToken,e.reportData=[],n.post("get_pos_report",t,2,!0,window.oldEshopBasePath,"text/plain",!0,!1).then(function(n){if(i[t.actionName]=!1,n){if(n.errorCode)return;e.processApiResponse(n,t.actionName)}})},e.processApiResponse=function(t,n){return"GetTranscationLine"==n?void(e.transactionLines=t):"GetPerformanceData"==n?void(e.performanceData=t):void("GetTargetData"==n&&(e.targetData=t))},e.getPerformanceData=function(){var t={actionName:"GetPerformanceData",comMonth:e.selectedMonth+"-"+e.selectedYear,loginPrefix:e.selectedRegTypes};e.getPosReport(t,e.isLoading)},e.getTargetData=function(){var t={actionName:"GetTargetData",comMonth:e.selectedMonth+"-"+e.selectedYear};e.getPosReport(t,e.isLoading)},e.refresh=function(){e.transactionLines=[],e.performanceData=[],e.targetData=[];var t={actionName:"GetTranscationLine",comMonth:e.selectedMonth+"-"+e.selectedYear};if(e.selectedYear.length>0&&e.selectedMonth.length>0)return e.getPosReport(t,e.isLoading),e.getPerformanceData(),void e.getTargetData();e.transactionLines=[]},e.selectYear=function(t){e.selectedYear=[],e.selectedYear.push(e.commissionYears[t]),e.refresh()},e.selectMonth=function(t){e.selectedMonth=[],e.selectedMonth.push(e.commissionMonths[t]),e.refresh()},e.selectRegType=function(t){e.selectedRegTypes=[],e.selectedRegTypes.push(e.registrationTypes[t]),e.getPerformanceData()},e.toggleDisplayLine=function(){e.displayDetailLine=!e.displayDetailLine}}]),app.controller("posSwypeCtrl",["$scope","CustomerAccount",function(e,t){var n=t.accountOwner;if(n){var o=n.address;e.data={firstName:n.firstName,lastName:n.lastName,email:n.emailAddress,street:o.streetName,streetNumber:o.streetNumber,zip:parseInt(o.postCode),city:o.city}}else e.data={}}]),app.controller("posCtrl",["$scope","AgentAccount","CustomerAccount","CommonData","$location","Authentication","Language","Network","Notifications",function(e,t,n,o,i,r,a,s,c){e.agent=t,e.account=n,e.data={},e.isExpoApp=void 0!==window.ReactNativeWebView,o.tempIdCheckResult=void 0,"re"===o.realChannel&&i.path("/pos/find-existing-customer").search({mode:"msisdn"}),e.isIE=isIE,e.getPosUnsubscribeLink=function(){var e,t=r.posToken;return location.origin+"/ms/gdpr"+(null!==(e=a.data)&&void 0!==e&&e.current?"/"+a.data.current+"/":"")+"pos/stop?posToken="+t},e.checkPassword=function(){for(var t=[],n=element[0].getElementsByTagName("input"),o=1;o<n.length;o++)t.push(angular.element(n[o]).controller("ngModel"));var i=checkPassword(e.data.newPassword,e.data.repeatNewPassword);for(var r in t)t[r].$setValidity("passwordsMatch",i)},e.submit=function(){var t,n;if(!e.changingPassword){e.changingPassword=!0;var o={username:null===(t=e.agent)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.username,newPassword:e.data.newPassword};s.post("updatePosAgentPassword",o).then(function(t){e.changingPassword=!1,t&&(c.add("password changed!","good"),r.logoutPos().then(function(){var t;window.location.reload(),e.data={},e.changePasswordForm.$setPristine(),window.location.reload(),null!==(t=e.onSubmit)&&void 0!==t&&t.call(e)&&e.onSubmit()()}))})}}}]),app.controller("preToPostCtrl",["$scope","CustomerAccount","Products","subscription","$location","Language",function(e,t,n,o,i,r){e.account=t,e.Products=n,e.subscription=o,e.canDoPreToPost=t.canDoPreToPost(e.subscription),e.cantReason=t.cantDoPrePostReason(e.subscription);var a=i.search();!e.cantReason&&a.product&&i.path("".concat(r.data.current,"/eshop/pre-to-post/checkout/").concat(a.product)).search({preToPostSubscription:e.subscription.id,promotions:a.promotions,devices:a.devices,ll:a.ll});var s=Object.first(e.subscription.rateplan.products);s&&(e.productType=s.tags[0]),"internet"===e.productType&&(e.productType=null)}]),app.controller("prepaidChangeRateplanConfirmationCtrl",["$scope","CustomerAccount","Products","$location","Network","data","Language","FeatureFlags",function(e,t,n,o,i,r,a,s){e.account=t,e.Products=n,e.submitting=!1,e.subscription=r.subscription,e.product=r.product,e.confirm=function(){if(!e.submitting){e.submitting=!0;var t={subscriptionId:e.subscription.id,newProduct:e.product.config.id,switchDate:s.get("MBCR-MBCR-12315-rp-date-change")?swissDate().toServerJSON():swissDate().addDays(1).toServerJSON()};i.post("prepaidRateplanChange",t).then(function(t){e.submitting=!1,t&&o.path("/".concat(a.data.current,"/account/change-rateplan-confirmation/success")).search()})}}}]),app.controller("prepaidChangeRateplanCtrl",["$scope","CustomerAccount","Products","subscription",function(e,t,n,o){e.account=t,e.Products=n,e.products={},e.subscription=o;for(var i in n.data.products)e.subscription.rateplan.id!=n.data.products[i].rateplan.id&&(e.products[i]=n.data.products[i])}]),app.controller("previewCtrl",["$location","Cms","Notifications","Storage","PrismicPopups","$timeout","State",function(e,t,n,o,i,r,a){o.clearMatch("dontShowPopup_");var s=e.search().documentId;if(!s)return e.path("/").search({});t.getById(s,!0).then(function(o){if(!o)return e.path("/").search({});var c=o.lang.substring(0,2);"popup"===o.type?r(function(){a.returnWhenPrismicPopupsLoaded().then(function(e){var t=i.popups.find(function(e){return e.data.id===s});t&&t.show()})},500):"landing_page"!==o.type?t.getByType("landing_page").then(function(t){var i=t.filter(function(e){return recursiveSearch(e.data.body,"id",s)})[0];if(!i)return"offer"===o.type?e.path("/"+c+"/offer-preview/"+o.id).search({}):(n.add("Redirected to home page as this content type doesnt have a page","good"),e.path("/"+c).search({}));e.path("/"+c+"/"+i.uid).search({isPreview:"true"})}):e.path("/"+c+"/"+o.uid)})}]),app.controller("productCtrl",["$scope","product","$location","Promotions","Popup","Chat","State",function(e,t,n,o,i,r,a){t&&(e.product=t.product,e.tabOptions={},e.linkExtension=n.search(),e.productInfoMode=n.search().productInfoMode,e.checkoutLink=n.search().checkoutLink,e.locationHash=n.hash(),e.data={},e.chat=r,e.tariffsPopup=new i("tariffsPopup","product-tariffs-popup.html",{title:"tariffFinderTitle",rateplan:e.product.rateplan}),e.optionsPopup=new i("optionsPopup","product-options-popup.html",{title:"savingOptionsButton",rateplan:e.product.rateplan,classes:"wide-popup smoke"}),o.returnWhenPromosLoaded().then(function(){e.product&&!e.productInfoMode&&(e.promotion=e.product.getBestPromotion())}),"tariffs"===e.locationHash&&e.tariffsPopup.show(),e.getLink=function(){var t=e.product.getCTAType(),n="";n+=a.agentLoggedIn?"/pos":"/eshop";var o="new-postpaid/checkout";"prepaid"==e.product.type&&(o="new-prepaid/checkout"),e.checkoutLink&&(o=e.checkoutLink),n+="checkout"==t?"/"+o+"/"+e.product.url:"/product/"+e.product.url,n+="?";for(var i in e.linkExtension)n+=i+"="+e.linkExtension[i]+"&";return n.substring(0,n.length-1)})}]),app.controller("promosCtrl",["$scope","Cms","Promotion",function(e,t,n){t.getByType("promotion").then(function(t){e.promos=t.map(function(e){return new n(e.data,e.id)}),window.promos=e.promos})}]),app.controller("recoveryPasswordCtrl",["$scope","CustomerAccount","$window",function(e,t,n){e.account=t,e.success=n.history.back}]),app.controller("resetCtrl",["$scope","AgentAccount","Authentication","Network","Notifications",function(e,t,n,o,i){e.agent=t,e.data={},e.changingPassword=!1,e.checkPassword=function(t){if(!t)return void console.error("Element is not defined");for(var n=[],o=t.closest("form").getElementsByTagName("input"),i=0;i<o.length;i++)n.push(angular.element(o[i]).controller("ngModel"));var r=checkPassword(e.data.newPassword,e.data.repeatNewPassword);n.forEach(function(e){e.$setValidity("passwordsMatch",r)})},e.submit=function(){var t,r;if(!e.changingPassword){e.changingPassword=!0;var a={username:null===(t=e.agent)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.username,newPassword:e.data.newPassword};o.post("updatePosAgentPassword",a).then(function(t){e.changingPassword=!1,t&&(i.add("Password changed!","good",3),n.logoutPos(e.agent.data.tempChannel).then(function(){var t;e.changePasswordForm.$setPristine(),null!==(t=e.onSubmit)&&void 0!==t&&t.call(e)&&e.onSubmit()()}))}).catch(function(t){e.changingPassword=!1,console.error("Password change request failed: ",t)})}}}]),app.controller("roamingCockpitCtrl",["$scope","CustomerAccount","$rootScope","Storage","State","Popup","Countries",function(e,t,n,o,i,r,a){e.account=t,e.state=i,e.active={},e.countries=a,e.setUpCircles=function(){var t,n;e.roamingCircles={roamingData:{items:[],total:0,remaining:0,type:"BYTES",optionCats:["ROAMING"]},roamingMin:{items:[],total:0,remaining:0,type:"MIN",optionCats:["ROAMING"]}};var o=null===e||void 0===e?void 0:null===(t=e.active.sub)||void 0===t?void 0:null===(n=t.rateplan)||void 0===n?void 0:n.firstProduct();"internet"===(null===o||void 0===o?void 0:o.tags[0])&&delete e.roamingCircles.roamingMin},e.$watch("active.sub",function(){e.active.sub&&(e.rateplanNotSupported=!1,e.activeSubId=e.active.sub.id,e.active.sub.setActive(),i.roamingCockpitSelectedSubscription=e.active.sub,e.selectedRoamingCountry?i.returnWhenRateplanDataLoaded().then(function(){Object.size(e.active.sub.rateplan.rates.countries)?e.countryRates=e.active.sub.rateplan.findCountry(e.selectedRoamingCountry):(e.rateplanNotSupported=!0,"yallo_home_5g"===e.active.sub.rateplan.url&&(e.rateplanNotSupported=!1))}):Object.size(e.active.sub.rateplan.rates.countries)||(e.rateplanNotSupported=!0),"yallo_home_5g"===e.active.sub.rateplan.url&&(e.rateplanNotSupported=!1),e.setUpCircles())}),e.$watch("state.selectedRoamingCountry",function(){i.selectedRoamingCountry&&(e.selectedRoamingCountry=i.selectedRoamingCountry,i.returnWhenRateplanDataLoaded().then(function(){e.active.sub&&(e.rateplanNotSupported=!1,Object.size(e.active.sub.rateplan.rates.countries)?(e.active.sub.rateplan.convertRates(),e.countryRates=e.active.sub.rateplan.findCountry(i.selectedRoamingCountry)):(e.countryRates=void 0,e.rateplanNotSupported=!0,"yallo_home_5g"===e.active.sub.rateplan.url&&(e.rateplanNotSupported=!1)))}))}),e.openOption=function(t){return e.option=t},e.closeOption=function(){return e.option=void 0},e.tariffPopup=new r("tariffPopup","product-tariffs-popup.html",{title:"tariffFinderTitle"}),e.showTariffChecker=function(){e.tariffPopup.data.rateplan=e.active.sub.rateplan,e.tariffPopup.data.roamingCountry=e.selectedRoamingCountry,e.tariffPopup.show()},e.setUpCircles()}]),app.controller("roamingCtrl",["$scope","$location","Rateplans","Storage","State",function(e,t,n,o,i){e.tabs=[{key:"postpaid"},{key:"prepaid"}];e.tabOptions={activeTab:t.search().prepaid?"prepaid":o.get("tab-ctrl-options")||"postpaid"},e.$watch("tabOptions.activeTab",function(e){o.set("tab-ctrl-options",e)}),t.search().t&&(e.tabOptions.activeTab=t.search().t),e.Rateplans=n,e.prepaidRateplanId="201707071039100034",e.postpaidRateplanId="201708061747262325",e.rateplanPrepaid=n.data.rateplans["201707071039100034"],i.returnWhenRateplanDataLoaded().then(function(){e.defaultPrepaidRateplan=n.data.rateplans[e.prepaidRateplanId]||null,e.defaultPostpaidRateplan=n.data.rateplans[e.postpaidRateplanId]||null}),e.$watch("state.selectedRoamingCountry",function(){e.selectedRoamingCountry=i.selectedRoamingCountry})}]),app.controller("settingsCtrl",["$scope","CustomerAccount","Storage","Language",function(e,t,n,o){e.account=t,e.tabOptions={},e.showSprachBoxInfo=!1,e.showSimInfo=!1,e.showCostControl=!1,e.loading=!0,e.data={},e.data.selectedSubscription=!1,e.pickSubscription=function(e){return e.setActive()},e.toggleSimInfos=function(){return e.showSimInfo=!e.showSimInfo},e.toggleSprachBoxInfo=function(){return e.showSprachBoxInfo=!e.showSprachBoxInfo},e.toggleCostControl=function(){return e.showCostControl=!e.showCostControl},e.getGdprUrl=function(){var e,i=n.get("authSelfcareToken");return"/ms/gdpr"+(null!==(e=o.data)&&void 0!==e&&e.current?"/"+o.data.current+"/":"")+(i?"?selfcaretoken="+i+"&account="+t.accountId:"")}}]),app.controller("shortUrlTokenCtrl",["shortUrlToken","Redirect",function(e,t){t.redirect(e)}]),app.controller("signScanCtrl",["$scope","Checkout","Language","$location","CommonData",function(e,t,n,o,i){e.mode=o.path().split("/")[2],e.data={contractSignature:{},poaSignature:{}},e.showSignPad=function(t){e.signPadType=t,e.signPadActive=!0},i.accessCodeData&&(e.contractSignRequired=i.accessCodeData.contractSignRequired,e.poaSignRequired=i.accessCodeData.poaSignRequired,e.signPadActive=!1,e.contractSignRequired&&e.poaSignRequired||(e.showSignPad(e.contractSignRequired?"contractSignature":"poaSignature"),e.singleSignMode=!0)),i.accessCodeData||o.path("/".concat(n.data.current,"/").concat(e.mode)),e.getTemplate=function(){return i.accessCodeData?"pages/sign-scan.html":"pages/404.html"},e.onSignConfirm=function(t){e.signPadActive=!1,e.data[e.signPadType].b64=t,e.data[e.signPadType].fileType="jpg",e.saveDocument(e.signPadType)},e.singleSignMode||(e.onSignCancel=function(){e.signPadActive=!1}),e.saveDocument=function(r){e.data[r].valid=!1,e.data[r].b64&&(e.data[r].documentType=r,e.loading=!0,t.saveCaptureData(e.data[r],i.accessCodeData.accessCode).then(function(i){e.loading=!1,t.orderData[r]=i?e.data[r]:null,e.data[r].valid=!!i,(!e.contractSignRequired||e.data.contractSignature&&e.data.contractSignature.valid)&&(!e.poaSignRequired||e.data.poaSignature&&e.data.poaSignature.valid)&&o.path("/".concat(n.data.current,"/").concat(e.mode,"/success"))}))}}]),app.controller("simSwapCtrl",["$scope","subscription","CustomerAccount","$location","Notifications","ThreatMetrix",function(e,t,n,o,i,r){e.subscription=t,e.data={code:""},e.isTest=window.isTest;var a=r.profile();e.esimSwapAllowed=t.canDoSimSwap(),e.validateEsimSwap=function(){return e.loading=!0,e.subscription.validateEsimSwap().then(function(t){e.loading=!1,t&&(e.data.token=t,e.data.code="",e.enterCodeMode=!0)})},e.doEsimSwap=function(){e.loading=!0,e.subscription.startEsimSwap(a,e.data.token,e.data.code).then(function(t){t?n.doRefresh().then(function(){i.add("esimSwapSuccess","good"),o.path("/account").search({id:e.subscription.id})}):e.loading=!1})}}]),app.controller("subscriptionsCtrl",["$scope","CustomerAccount","SavingsOptions","AgentAccount","State","$location","CustomerOrders","Analytics","$rootScope","FeatureFlags","Linecheck","Countries","Storage","Customerio","Language",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g,f){var h;if(e.account=t,e.agent=o,e.customerOrders=a,e.active={},e.testingONP=!1,e.showRelocation=d.get("relocation-hfc"),e.ShowChangePlanForHFC=d.get("hfc-phase-2"),e.fiberChangePlanFlag=d.get("fiber-change-plan-feature"),e.countries=l,e.showForTestEnvs=d.get("device-display-selfcare"),e.rs=c,r.search().id){var m=t.subscriptions[r.search().id];null!==m&&void 0!==m&&m.isFiber||"internet"===(null===m||void 0===m?void 0:m.getType())?e.mobileFiberSwitcherMode="fiber":null!==m&&void 0!==m&&m.isTV?e.mobileFiberSwitcherMode="tv":e.mobileFiberSwitcherMode="mobile"}else if(r.search().home)e.mobileFiberSwitcherMode="true"===r.search().home?"fiber":"mobile";else{var v=t.getFilteredSubList(!0,!0,"mobile"),b=t.getFilteredSubList(!0,!0,"internet"),w=t.getFilteredSubList(!0,!0).filter(function(e){return e.isFiber})[0];!v.length&&b.length||null!==w&&void 0!==w&&w.needsFiberAction?e.mobileFiberSwitcherMode="fiber":e.mobileFiberSwitcherMode="mobile"}e.openHFCrateplanChange=function(t){e.loading=!0,e.parseData=t.isHFC?t.installationInfo.address:null,e.subInstallationDetails=t.isHFC?void 0:t.installationInfo.otoId,u.lineCheck(e.parseData,e.subInstallationDetails,!1,"checkout").then(function(t){t&&(e.loading=!1,u.setGlobal(t),r.path("/account/change-subscription/"+r.search().id))})},e.countries.sortedNationalities.map(function(t){t.id===e.account.accountOwner.address.country&&p.set("userCountry",t.countryCode)}),e.closeActivatePopup=function(){return e.active.showOptionsPopup=!1},e.restoreSub=function(){e.active.sub=t.subscriptions[r.search().id],e.active.oldIndex=-1},e.canAccessHandsetInsurance=function(){var t,o;return e.active.sub&&!i.agentLoggedIn&&n.insuranceOption&&n.insuranceOption.allowedInCurrentChannel()&&(null===(t=(o=e.active.sub).canAddHandsetInsurance)||void 0===t?void 0:t.call(o))},e.onActiveSubChange=function(){var t,n,o;null!==(t=e.active)&&void 0!==t&&t.sub&&d.get("customerio_integration")&&g.identifyUser(e.active.sub),null!==(n=e.active)&&void 0!==n&&null!==(o=n.sub)&&void 0!==o&&o.setActive&&(e.active.sub.setActive(),e.active.sub.returnWhenRecommendationsLoaded())},p.set("offerDetails",void 0),e.getMonetaryPromotions=function(){var t;return null!==(t=e.active.sub)&&void 0!==t&&t.includedPromotions?e.active.sub.includedPromotions.filter(function(e){return"monetary"===e.promotionType}):[]},e.previousTab=e.mobileFiberSwitcherMode,e.switchSwitcherMode=function(t){e.mobileFiberSwitcherMode=t,d.get("Ayma-google-tag-manager-changes")&&("fiber"===e.previousTab?e.previousTabDatalayer="home":e.previousTabDatalayer=e.previousTab,e.modeDataLayer="fiber"===t?"home":t,s.customEvent("gtm visitor interaction","product tab switch","current tab selected "+e.previousTabDatalayer,"tab switched to "+e.modeDataLayer)),e.previousTab=t},e.triggerAnalyticsForFooterFeatures=function(t,n){if(d.get("Ayma-google-tag-manager-changes")){s.conversionPathTracking(void 0,t,n,"footer - ".concat(e.account.accountOwner.subscription.type," mobile"),void 0,!0),e.orderlocation="within switzerland",r.search().tab&&("national"===r.search().tab?e.orderlocation="within switzerland":e.orderlocation="roaming");var o={event:"gtm visitor interaction",interaction_name:"selfcare conversion path click",sc_conversion_path_click:n,sc_area_clicked:"footer",sc_link_name:t,sc_product_tab:e.mobileFiberSwitcherMode,sc_overview_tab:e.orderlocation,sc_offer_tag:"unavailable",sc_offer_type:"unavailable"};d.get("Ayma-google-tag-manager-changes-2")&&(o.selfcare_device="unavailable",o.selfcare_promo_code="unavailable"),s.dataLayerPush(o)}},e.switchPortal=!1,e.language=f,e.currentLang=null===f||void 0===f?void 0:null===(h=f.data)||void 0===h?void 0:h.current,e.updatePortal=function(){switch(location.host){case"www.yallo.ch":return window.location.href="https://my.yallo.ch/".concat(e.currentLang,"/dashboard");case"www.lebara.ch":return window.location.href="https://my.lebara.ch/".concat(e.currentLang,"/dashboard");case"test.dev.yallo.ch":return window.location.href="https://test-my.dev.yallo.ch/".concat(e.currentLang,"/dashboard");case"test.dev.lebara.ch":return window.location.href="https://test-my.dev.lebara.ch/".concat(e.currentLang,"/dashboard");case"preprod.dev.yallo.ch":return window.location.href="https://preprod-my.dev.yallo.ch/".concat(e.currentLang,"/dashboard");case"preprod.dev.lebara.ch":return window.location.href="https://preprod-my.dev.lebara.ch/".concat(e.currentLang,"/dashboard");case"integration.dev.yallo.ch":return window.location.href="https://integration-my.dev.yallo.ch/".concat(e.currentLang,"/dashboard");case"integration.dev.lebara.ch":return window.location.href="https://integration-my.dev.lebara.ch/".concat(e.currentLang,"/dashboard")}}}]),app.controller("topupHistoryCtrl",["$scope","CustomerAccount","$location","State",function(e,t,n,o){if(e.account=t,e.tabOptions={},n.search().subscriptionId){var i=n.search().subscriptionId;if(o.customerLoggedIn){var r=t.subscriptions[i];r&&"prepaid"==r.type&&(e.tabOptions.activeTab=i)}}e.getPrepaidSubscriptions=function(){var e={};for(var n in t.subscriptions)"prepaid"==t.subscriptions[n].type&&(e[n]=t.subscriptions[n]);return e},e.prepaidSubscriptions=e.getPrepaidSubscriptions()}]),app.controller("tvLoginCtrl",["$location","Language","$rootScope","FeatureFlags",function(e,t,n,o){n.noFooter=!0,n.simpleHeader=!0}]),app.controller("tvUpgradeCtrl",["$scope","$route","$routeParams","$http","$location","Notifications","Language",function(e,t,n,o,i,r,a){e.getMigrationJwtValid=function(){return o.get("".concat(microServiceEndpoint,"tv/validateMigrationJwt"),{headers:{"Migration-Jwt":i.search().migrationJwt}}).then(function(e){return!(1!==e.data.status||!e.data.data)&&e.data}).catch(function(e){return r.add("cliErrorUnknown"),!1})},i.search().migrationJwt?i.search().sample?i.path("/tv-free-to-paid").search({"tv-token":i.search().migrationJwt,discountCode:"xxxDiscountCode"}):e.getMigrationJwtValid().then(function(e){if(e.data){var t={};t["tv-token"]=i.search().migrationJwt,e.data.discountCode&&(t.promotions=e.data.discountCode),i.path("freeToPaid"===e.data.type?"/tv-free-to-paid":"/tv-migration").search(t)}else r.add("cliErrorUnknown"),i.path("/"+a.data.current)}):i.path("/"+a.data.current)}]),app.controller("usageHistoryCtrl",["$scope","CustomerAccount","subscription","$location","CustomerBills","$timeout","Language","ErrorReporting",function(e,t,n,o,i,r,a,s){e.account=t,e.selectedSubscription=n,
e.subs=t.getFilteredSubList(!0,!0).filter(function(e){return!e.isFiber}),e.multipleSubscriptions=e.subs.length>1,e.data={};var c=swissDate();e.startDate=new Date(c.getFullYear(),c.getMonth(),1),e.endDate=new Date(c.getFullYear(),c.getMonth()+1,1).addDays(-1),e.getBillUsage=function(){if(e.bill){var t=e.bill.id;e.usage?e.loadingTimeout=r(function(){return e.loading=!0},100):e.loading=!0,r(function(){e.selectedSubscription.getUsageHistoryFromBill(e.bill).then(function(n){t===e.bill.id&&(e.loadingTimeout&&r.cancel(e.loadingTimeout),e.loading=!1,e.usage=n,e.startDate=e.bill.startDate,e.endDate=e.bill.endDate||(new Date).addDays(1))})},200)}},e.getPrepaidUsageHistory=function(){e.usage?e.loadingTimeout=r(function(){return e.loading=!0},100):e.loading=!0;var t=e.month,n=e.year;return e.selectedSubscription.getPrepaidUsageHistory(t,n).then(function(o){r(function(){e.month===t&&(e.loadingTimeout&&r.cancel(e.loadingTimeout),e.loading=!1,e.usage=o,e.startDate=new Date(n,t,1),e.endDate=new Date(n,t,daysInMonth(t,n)))},200)})},e.changeBill=function(e){return o.search({bill:e.id})},e.changeMonth=function(e,t){return o.search({month:e+1,year:t})},e.changeSubscription=function(t){e.dontInit=!0;var i="/".concat(a.data.current,"/account/history/").concat(t.id);"postpaid"===n.type&&"prepaid"===t.type&&e.bill?o.path(i).search({month:e.bill.startDate.getMonth()+1,year:e.bill.startDate.getFullYear()}):"prepaid"===n.type&&"postpaid"===t.type?o.path(i).search({month:e.month+1,year:e.year}):o.path(i)},e.getBills=function(){return e.bill&&e.usage||(e.loading=!0),i.getBills().then(function(){return e.loading=!1})},e.initPostpaid=function(){e.getBills().then(function(){var t=o.search();if(!t.bill){var n;if(t.month&&t.year&&(n=i.getBillFromMonthYear(t.month-1,1*t.year)),n||(n=i.getCurrentBill()),n)return o.search({bill:n.id}).replace()}e.bill=i.getBillFromId(t.bill),e.getBillUsage()})},e.initPrepaid=function(){var t=o.search();if(!t.month||!t.year)return o.search({month:swissDate().getMonth()+1,year:swissDate().getFullYear()}).replace();e.month=t.month-1,e.year=1*t.year,e.getPrepaidUsageHistory()},e.init=function(){if(e.dontInit)return void s.debugWarning("Stopping init from search as subscription changed (route will be reloaded)");"pendingActivation"!==n.status&&("postpaid"===n.type?e.initPostpaid():e.initPrepaid()),n.getRecommendations()},e.$watch(function(){return o.search()},e.init,!0)}]),app.controller("viewOfferCtrl",["$scope","offer",function(e,t){t&&(e.deal=t)}]),app.controller("voiceMailCtrl",["$scope","subscription",function(e,t){e.subscription=t}]),app.controller("voucherTopupCtrl",["$scope","subscription",function(e,t){e.subscription=t}]),app.controller("wishpondCtrl",function(){loadScript("//cdn.wishpond.net/connect.js?merchantId=1389902&writeKey=eff05a2d7d0a")}),app.controller("freeTvCtrl",["$scope",function(e){}]),app.controller("relocationCtrl",["$scope","$rootScope","Checkout","$location","Notifications","FeatureFlags","PrismicPopups","CustomerAccount","$route",function(e,t,n,o,i,r,a,s,c){e.relocationDate=dateToObj(new Date(" YYYY/MM/DD"),1).parse,e.subscriptionId=o.search().subscriptionId,e.address={},e.subtype=o.search().subtype,t.isPos?(e.warningRelocationMessage="warningMessageRelocationAgent",e.agreeMessage="agreeRelocationAgent"):(e.warningRelocationMessage="warningMessageRelocationCustomer",e.agreeMessage="agreeRelocationCustomer"),e.$watch("address.valid",function(){e.HfcAvailability=!1}),e.lineCheckFinished=function(){var n,o,i,r,s,c,d,u;if(e.HfcAvailability=!1,e.popupDisplayName="","hfc"===e.subtype&&null!==(n=t.globalLineCheckResults.hfc)&&void 0!==n&&n.available?e.HfcAvailability=!0:"fiber"===e.subtype&&null!==(o=t.globalLineCheckResults.fiber)&&void 0!==o&&o.available?e.popupDisplayName="Relocation - fiber to fiber popup":"fiber"===e.subtype&&null!==(i=t.globalLineCheckResults.hfc)&&void 0!==i&&i.available?e.popupDisplayName="Relocation - fiber to hfc popup":"hfc"===e.subtype&&null!==(r=t.globalLineCheckResults.fiber)&&void 0!==r&&r.available?e.popupDisplayName="Relocation - Fiber fallback popup":null!==(s=t.globalLineCheckResults["5G"])&&void 0!==s&&null!==(c=s.outdoor)&&void 0!==c&&c.maxBandwidthDown?e.popupDisplayName="Relocation - 5G fallback popup":null!==(d=t.globalLineCheckResults["4G"])&&void 0!==d&&null!==(u=d.outdoor)&&void 0!==u&&u.maxBandwidthDown?e.popupDisplayName="Relocation - 4G fallback popup":e.popupDisplayName="Relocation - no fallback popup",e.popupDisplayName){var l=a.popups.find(function(t){return t.data.display_name===e.popupDisplayName});l&&l.show()}},e.cancelRelocation=function(){s.refreshData(0,!0).then(function(){c.reload()}),window.location.replace("/account?id="+o.search().subscriptionId+"&home=true")},e.submit=function(){n.startHfcRelocation(t.globalLineCheckResults,objToDate(e.relocationDate,!0),e.subscriptionId).then(function(t){t?(e.cancelRelocation(),i.add("submitRelocationNotification","good")):i.add("error_null")})}}]),app.factory("Device",["CommonData","State","$translate",function(e,t,n){var o=function(e,t,n){this.id=t,this.deviceName=e.deviceName,this.url=urlify(e.deviceName),this.channels=e.channels,this.canBeSoldSeperately=e.canBeSoldSeperately,this.productConfigs={},this.products={},this.promotions={},this.lowestCost={},this.hiddenChannels=[];for(var o in e.applicableProducts)for(var i in n)e.applicableProducts[o]==i&&(this.productConfigs[i]=n[i],n[i].addDevice(this,this.id),this.products[n[i].product.url]=n[i].product,this.productConfigs[i].rateplan&&(this.productConfigs[i].rateplan.devices[this.id]||(this.productConfigs[i].rateplan.devices[this.id]=this)))};return o.prototype.getValidProducts=function(e,t,n){var o=[];if(e)return objToArray(this.products);for(var i in this.products)this.products[i].findConfigsFromOptions(null,this,t,e,!1,n).length&&o.push(this.products[i]);return o},o.prototype.allowedInCurrentChannel=function(t){return this.allowedInChannel(e.channel,t)},o.prototype.allowedInChannel=function(e,n){return!(this.hiddenChannels.indexOf("eshop")>-1&&!n&&!t.agentLoggedIn)&&(!(this.hiddenChannels.indexOf("selfcare")>-1&&n&&!t.agentLoggedIn)&&(!(this.hiddenChannels.indexOf(e)>-1)&&this.channels.indexOf(e)>-1))},o.prototype.highestPricedConfig=function(){var e,t=0;for(var n in this.productConfigs)this.productConfigs[n].allowedInCurrentChannel()&&this.productConfigs[n].recurringCost>t&&(t=this.productConfigs[n].recurringCost,e=this.productConfigs[n]);return e},o}]),app.factory("HelpArticle",function(){var e=function(e,t){this.id=e,this.title=t.title,this.description=t.description,this.keywords=t.keywords,this.helpfulpos=t.helpfulpos,this.tags=t.tags,this.points=0,this.minPoints=2};return e.prototype.values={title:10,description:5,keywords:5},e.prototype.resetPoints=function(){this.points=0,this.matches=!1},e.prototype.search=function(e){this.points+=matchesInString(e,this.title,2,!0)*this.values.title,this.points+=matchesInString(e,this.description,2,!0)*this.values.description;for(var t in this.keywords)this.points+=matchesInString(e,this.keywords[t],2,!1)*this.values.keywords;this.points/=e.length/10,this.points>=this.minPoints&&(this.matches=!0)},e.prototype.update=function(e){this.title=e.title,this.description=e.description,this.keywords=e.keywords},e}),app.factory("HelpTopic",function(){var e=function(e,t,n){this.id=e,this.title=t.title,this.description=t.description,this.helpArticles=t.helpArticles,this.subtopics=t.subtopics,this.featured=t.featured,this.iconType=t.iconType,this.tags=t.tags||[],this.linkHelpArticles(n)};return e.prototype.linkHelpArticles=function(e){var t=this.helpArticles;this.helpArticles={};for(var n in t)this.helpArticles[t[n]]=e[t[n]],this.helpArticles[t[n]].topic=this},e.prototype.linkSubTopics=function(e){var t,n=this.subtopics;this.subtopics={};for(var o in n)t=n[o],this.subtopics[t]=e[t],e[t]?this.subtopics[t].hasParent=!0:console.error("Tried to assign subtopic but topic doesnt exist. ("+t+")")},e.prototype.hasTag=function(e){for(var t in this.tags)if(this.tags[t]==e)return!0},e}),app.factory("Notification",["$interval","$rootScope",function(e,t){return function(n,o,i,r,a,s){var c=this;this.id=s,this.type=o,this.urgency=i,this.message=n,this.showCode=!isNaN(n[n.length-1])&&n.indexOf("_")>-1,r||("bad"==this.type?(r=60,e(function(){c.autoRemovable=!0},2e3,1)):r=5),!i||i<9?e(function(){c.remove()},1e3*(r-.3),1):t.majorError=!0,this.remove=function(){var t=this;this.startHiding=!0,e(function(){a.remove(t.id)},300,1)}}}]),app.factory("Offer",function(){var e=function(e,t){this.key=t,this.title=e.title,this.description=e.description,this.squirclecontent=e.squirclecontent,this.actions=e.actions,this.image=e.image,this.cutout=e.cutout,this.backgroundcolor=e.backgroundcolor,this.belowcta=e.belowcta};return e.prototype.update=function(e){this.title=e.title,this.description=e.description,this.squirclecontent=e.squirclecontent,this.actions=e.actions,this.image=e.image,this.cutout=e.cutout,this.backgroundcolor=e.backgroundcolor,this.belowcta=e.belowcta},e}),app.factory("Option",["Rateplans","Network","Notifications","Analytics","CommonData","$timeout","Reporting","$translate","FeatureFlags",function(e,t,n,o,i,r,a,s,c){var d,u=function(t){this.id=t.id,this.category=t.category,this.cost=t.cost,this.newCustomerCost=this.cost,this.normalCost=this.cost,this.duration=t.duration,this.countries=t.countries&&t.countries.length?t.countries.concat(["200903041337530279"]):[],this.parentOptions=t.parentOption?t.parentOption.split(",").map(function(e){return e.trim()}):[],this.smsNumber=t.smsNumber,this.name=t.name,this.priority=t.priority,this.url=urlify(t.name),this.autoRenews=t.autoRenews,this.channels=t.channels,this.exclusivityGroup=t.exclusivityGroup,this.notCompatibleWith=t.notCompatibleWith||[],this.requiredOptions=t.requiredOptions||[],this.isExclusive=t.optionsExclusive,this.keyword=t.keyword,this.applicableRateplans={},this.subDetails={},this.customText={},this.hidden=!1;for(var n in t.applicableRateplans)d=t.applicableRateplans[n],this.applicableRateplans[d]=e.data.rateplans[d],this.applicableRateplans[d]&&e.data.rateplans[d].addOption(this);this.icon=i.optionCategoryIcons[this.category.toLowerCase()]};return u.prototype.calcNormalCost=function(){if(!i.extras)return this.cost;var e=this.getPrice("normalprice");this.normalCost=e||this.cost},u.prototype.calcPriceNewCustomer=function(e){var t;if(!i.extras)return this.cost;var n=this.getPrice("discountprice"),o=(null===(t=this.getPromo(e))||void 0===t?void 0:t.discountAmount)||0;return this.newCustomerCost=n||this.cost-o,0===this.newCustomerCost&&o&&(this.newCustomerCost=1e-6),this.newCustomerCost},u.prototype.getReelPriceFromSheetGoogle=function(){return!!i.extras&&this.getPrice("realprice")},u.prototype.getPromo=function(e){var t,n=this;return null===e||void 0===e?void 0:null===(t=e.optionPromotions)||void 0===t?void 0:t.find(function(e){return e.optionId===n.id})},u.prototype.getPromoLegalText=function(e){return e>=120?s.instant("promoDurationForeverMessage"):s.instant("limitedDurationMessage").replace("xx",e).replace("zzz",s.instant("duration_"+this.duration)).replace("yy",isInteger(this.duration)?"x ":"")},u.prototype.calcDiscountPercent=function(){return Math.floor(100*(1-this.cost/this.normalCost))},u.prototype.linkParentOption=function(e){var t,n={},o=_createForOfIteratorHelper(this.parentOptions);try{for(o.s();!(t=o.n()).done;){var i=t.value;n[i]=e[i],e[i].childOption=this}}catch(e){o.e(e)}finally{o.f()}this.parentOptions=n},u.prototype.checkOldMonthlyOption=function(e,t){var n=t.name,o=["my sports s","my sports ms","my sports msn"],i=["my sports 24 s","TV Comfort"];if([].concat(_toConsumableArray(o),i).includes(n)){var r=Object.values(e.activeOptions).some(function(e){return e.name===n});return!r&&i.includes(n)&&(r=!0),r||"my sports msn"!==n||(o=o.slice(0,2),r=!Object.values(e.activeOptions).some(function(e){return o.includes(e.name)})),!r}return!1},u.prototype.activate=function(e){var i=this;return e.getRecommendations().then(function(){var s,d,u=null===(s=e.optionPromotions)||void 0===s?void 0:null===(d=s.find(function(e){return e.optionId===i.id}))||void 0===d?void 0:d.discountCode,l=0;window.isTest&&("1255"===i.id&&(l=2),"1297"===i.id&&(l=2),"1429"===i.id&&(l=2),"1519"===i.id&&c.get("test-5g-option-new-discount")&&(u="202301201238338426"));var p={subscriptionId:e.id,optionId:i.id,extraOptions:u?[u]:void 0,freePeriodDuration:l};return t.post("activateOption",p).then(function(t){if(t)return r(function(){return e.refresh(0,!0)},2e3),n.add("optionActivated","good"),c.get("Ayma-google-tag-manager-changes")&&o.fireCustomPurchaseEvent("purchase",i.name,i.category,"postpaid mobile",i.newCustomerCost,"1",i.id,u||null,"unavailable"),a.reportCioEvent("add-option",void 0,i.id),t})})},u.prototype.deactivate=function(e){var i=this;return t.post("deactivateOption",{subscriptionId:e.id,optionId:this.id}).then(function(t){if(t)return r(function(){return e.refresh(0,!0)},2e3),o.fireGaInteraction("saving options",{saving_name:i.name,saving_action:"deactivate"}),n.add("optionDeactivated","good"),t})},u.prototype.compatibleWith=function(e){for(var t in e)if(e[t].id!=this.id&&e[t].exclusivityGroup==this.exclusivityGroup&&(e[t].isExclusive||this.isExclusive))return!1;return!0},u.prototype.findExclusivityConflict=function(e){if(this.autoRenews)for(var t in e)if(e[t].autoRenews&&e[t].id!=this.id&&e[t].exclusivityGroup==this.exclusivityGroup&&(e[t].isExclusive||this.isExclusive))return e[t]},u.prototype.getValidProducts=function(e){var t=[];e||(e=i.channel);for(var n in this.applicableRateplans)for(var o in this.applicableRateplans[n].products){var r=this.applicableRateplans[n].products[o];t.indexOf(r)<0&&t.push(r)}return t},u.prototype.allowedInCurrentChannel=function(){return this.channels[i.channel]},u.prototype.buyableFromSelfcare=function(){for(var e in this.channels)if("xx"!==e&&this.channels[e].buyableFromSelfcare)return!0},u.prototype.getText=function(e,t){var n="optionPromo_"+this.url+"_"+e;if(i.extras&&i.extras[n]){var o,r=i.extras[n],a=_createForOfIteratorHelper(r);try{for(a.s();!(o=a.n()).done;){var s=o.value,c=s.split(" - ").map(yolStringToDate),d=now();if(c[0]<d&&c[1]>d)return n}}catch(e){a.e(e)}finally{a.f()}}if(!t)return"option_".concat(this.url,"_").concat(e)},u.prototype.getPrice=function(e){var t=i.extras["optionPromo_"+this.url+"_"+e];if(t){var n,o=_createForOfIteratorHelper(t);try{for(o.s();!(n=o.n()).done;){var r=n.value,a=r.split(" - ").map(yolStringToDate),s=now();if(a[0]<s&&a[1]>s)return parseFloat(r.split(" - ")[2],10)}}catch(e){o.e(e)}finally{o.f()}}return!1},u}]),app.factory("Popup",["Popups","$timeout","$rootScope",function(e,t,n){var o=function(t,n,o,i){this.name=t,this.active=!1,this.templateUrl=n,this.data=o,this.closing=!1,this.functions=i,e.register(this)};return o.prototype.show=function(t){var o;if(null!==(o=window.suppressedPopups)&&void 0!==o&&o.includes(this.name))return console.warn("Popup suppressed",this.name);n.stayOnPageAfterLogin=!!t,e.activePopups().length||(e.scrollTop=getBodyScroll());var i=document.querySelector("body");i&&i.style.setProperty("top",-1*e.scrollTop+"px");var r=document.querySelector("yol-popups");r&&r.style.setProperty("top",e.scrollTop+"px"),this.active=!0,this.openedTime=Date.now(),this.functions&&this.functions.show&&this.functions.show(this.data)},o.prototype.hide=function(n,o,i){var r,a=this;if(("background"!==n||"prismic-popup.html"===this.templateUrl||null!==(r=this.data)&&void 0!==r&&r.hideHeader)&&this.active&&!this.closing){if(this.functions&&this.functions.hide){if(!1===this.functions.hide(n,o,i))return}this.functions&&this.functions.onHide&&this.functions.onHide(n,o,i),e.closing=!0,t(function(){e.closing=!1,a.active=!1,document.body.style.setProperty("top","0px"),document.body.classList.remove("no-scroll"),e.scrollTop&&scrollBodyTo(e.scrollTop),t()},300)}},o.prototype.delete=function(){e.unregister(this)},o}]),app.factory("ProductConfig",["CommonData","Rateplans","State","$rootScope",function(e,t,n,o){var i=function(e,n){this.id=n,this.productName=e.productName,this.url=urlify(e.productName),this.category=e.category,this.recurringCost=e.recurringCost,this.recurringFrequency=e.recurringFrequency,this.priority=e.priority||0,this.upfrontCost=e.upfrontCost,this.lockinLength=e.lockinLength,this.channels=e.channels,"yallo_swiss_light"===this.url&&(this.channels=[]),this.tags=e.tags||[],this.type=e.type,"fiber"===this.type&&(this.type="postpaid",this.isFiber=!0),this.isHomeProduct=this.hasTag("home")||-1!==["yallo_go_xl","yallo_home_4g","yallo_home_5g"].indexOf(this.url),this.devices={},this.promotions={},t.data.rateplans[e.priceplan]||t.addRateplan(e.priceplan,this.productName,this.type,this.tags[0]),this.rateplan=t.data.rateplans[e.priceplan],this.rateplan.productConfigs[this.id]=this,this.isLightProduct=this.url.indexOf("_light")>-1};return i.prototype.addProduct=function(e){this.product=e},i.prototype.matchesOptions=function(e,t,n,o){return(null===e||this.lockinLength==e)&&(n&&t?!!this.getValidPromotions(o)[n.id]&&(!!this.devices[t.id]&&n.applies(this,o)):!(t&&!this.devices[t.id])&&!(n&&!this.getValidPromotions(o)[n.id]))},i.prototype.addDevice=function(e){this.devices[e.id]||(this.devices[e.id]=e),this.product.addDevice(e)},i.prototype.addPromotion=function(e){this.promotions[e.id]=e,this.product&&this.product.addPromotion(e)},i.prototype.getBestPromotionAndDevice=function(t,n){var o={},i=this.getValidPromotions(n,!0);for(var r in i)if(!o.promotion||i[r].priority>o.promotion.priority){if(!n&&i[r].channels.indexOf(e.channel)<0)continue;if(n&&i[r].limitToSubscriptions.length&&i[r].limitToSubscriptions.indexOf(n.id)<0)continue;if(n&&"new"==i[r].type)continue;if(!n&&"existing"==i[r].type)continue;o.promotion=i[r]}if(o.device=this.findBestDevice(),t)return o;this.best=o},i.prototype.findBestDevice=function(){var t,n=-9999;for(var o in this.devices)if(this.devices[o].priority>n){if(this.devices[o].channels.indexOf(e.channel)<0)continue;t=this.devices[o],n=this.devices[o].priority}return t},i.prototype.needsDevice=function(t){return(-1===["pt"].indexOf(e.channel)||24!==this.lockinLength||!t)&&(!(!n.agentLoggedIn||n.isTelesales||!t)||!!this.neededToApply(t))},i.prototype.neededToApply=function(e){var t;return(["yallo_premium_tv","yallo_home_5g","yallo_home_5g_plus_tv","yallo_home_5g_start","yallo_home_5g_start_plus_tv"].includes(this.url)||!e&&"yallo_home_4g"===this.url)&&(t=objToArray(this.devices).find(function(e){return e.allowedInCurrentChannel()})),t},i.prototype.hasTag=function(e){return this.tags.indexOf(e)>-1},i.prototype.getType=function(){return this.hasTag("fiber")?"fiber":this.hasTag("HFC")?"HFC":this.hasTag("tv")?"tv":void 0},i.prototype.allowedInCurrentChannel=function(){return this.channels.indexOf(e.channel)>-1},i.prototype.getValidPromotions=function(t,n,o){o||(o=e.channel);var i={};for(var r in this.promotions)if(this.promotions[r].channels.indexOf(o)>-1||this.promotions[r].channels.indexOf(e.realChannel)>-1){if(t&&this.promotions[r].limitToSubscriptions.length&&this.promotions[r].limitToSubscriptions.indexOf(t.id)<0)continue;if(t&&"new"==this.promotions[r].type)continue;if(!t&&"existing"==this.promotions[r].type)continue;i[r]=this.promotions[r]}return n?objToArray(i).sort(function(e,t){return e.priority<t.priority?1:-1}):i},i.prototype.getValidDevices=function(t,n,o){o||(o=e.channel);var i={};for(var r in this.devices)if(this.devices[r].channels.indexOf(o)>-1){if(!this.devices[r])continue;i[r]=this.devices[r]}return i},i}]),app.factory("Product",["Rateplans","CommonData","State","Cms",function(e,t,n,o){var i=function(t){this.productName=t.productName;var n=urlify(t.productName);this.url=n,this.showLinecheck="yallo_home_5g"===n,this.lineCheckMandatory="yallo_home_5g"===n,this.network=-1===n.indexOf("5g")?"4G":"5G",this.category=t.category,this.tags=t.tags.map(function(e){return e.trim()}),this.badge=autoCompleteString("badge_",this.tags),this.badgeColor=autoCompleteString("badge-color_",this.tags),this.badgeColor&&(this.badgeColor=this.badgeColor.substring(13)),this.priority=this.calcPriority(t.priority||0),this.upfrontCost=t.upfrontCost,this.recurringCost=t.recurringCost,this.productType=this.tags[0],this.configs={},this.lockinLengths=[],this.devices={},this.promotions={},this.channels=[],this.type=t.type,"fiber"===this.type&&(this.type="postpaid",this.isFiber=!0),this.isHomeProduct=this.hasTag("home")||-1!==["yallo_go_xl","yallo_home_4g","yallo_home_5g"].indexOf(this.url),this.customText={},t.link&&(this.link=t.link),this.rateplan=e.data.rateplans[t.priceplan],this.rateplan.products[this.url]=this,this.isLightProduct=this.url.indexOf("_light")>-1,this.hiddenInEshop=["yallo_romandie_plus","yallo_ticino_plus"].includes(this.url)};return i.prototype.calcPriority=function(e){if(!t.extras)return e;var n,o=t.extras["productPriority_"+this.url+"_"+t.channel]||[],i=_createForOfIteratorHelper(o);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=yolStringToDate(r.split(" - ")[0]),s=yolStringToDate(r.split(" - ")[1]),c=1*r.split(" - ")[2];if(now()>a&&now()<s)return c}}catch(e){i.e(e)}finally{i.f()}return e},i.prototype.addConfig=function(e){this.configs[e.id]=e,this.addChannels(e.channels),this.lockinLengths.indexOf(e.lockinLength)<0&&this.lockinLengths.push(e.lockinLength)},i.prototype.addChannels=function(e){for(var t in e)this.hasChannel(e[t])||this.channels.push(e[t])},i.prototype.addDevice=function(e){this.devices[e.id]||(this.devices[e.id]=e)},i.prototype.addPromotion=function(e){this.promotions[e.id]=e,this.bestConfig&&this.getBestConfig()},i.prototype.addOption=function(e){this.options[e.id]||(this.options[e.id]=e)},i.prototype.getCTAType=function(){return this.channels.indexOf(t.channel)>-1?"checkout":"none"},i.prototype.findConfigsFromOptions=function(e,o,i,r,a,s){s||(s=t.channel);var c,d=[];for(var u in this.configs)c=this.configs[u],24!=c.lockinLength&&n.agentLoggedIn&&!n.isTelesales&&r||c.matchesOptions(e,o,i,r,!0)&&(r&&(!n.agentLoggedIn||n.isTelesales)||c.channels.indexOf(s)>-1)&&d.push(c);return a?d.sort(function(e,t){return e.lockinLength>t.lockinLength?1:-1}):d},i.prototype.allowedInCurrentChannel=function(){return this.allowedInChannel(t.channel)},i.prototype.allowedInChannel=function(e){return this.channels.indexOf(e)>-1},i.prototype.hasTag=function(e){return this.tags.indexOf(e)>-1},i.prototype.getType=function(){return"yallo_home_5g"===this.url?"Home5G":this.hasTag("fiber")?"fiber":this.hasTag("HFC")?"HFC":this.hasTag("tv")?"tv":void 0},i.prototype.hasChannel=function(e){return this.channels.indexOf(e)>-1},i.prototype.getBestConfig=function(e,n){var o,i;if(Object.keys(this.getValidPromotions(n)).length){var r=this.getBestPromotion(n);if(r){var a=999999,s=9999;for(var c in this.configs)i=this.configs[c],n&&n&&!n.canExtend(i)||!n&&i.channels.indexOf(t.channel)<0||i.getValidPromotions(n)[r.code]&&(i.recurringCost>a||i.lockinLength>=s||(o=i,a=i.recurringCost,s=i.lockinLength))}}if(o||(o=this.getConfigWithLowestCost(!1,n)),o||(o=this.getConfigWithLowestCost(!0,n)),e)return o;this.bestConfig=o},i.prototype.getBestPromotion=function(e){var n,o,i=-1e3,r=this.getValidPromotions(e,!0);for(var a in r)if(o=r[a],o.priority>i&&(e||o.channels.indexOf(t.channel)>-1)){if(e&&o.limitToSubscriptions.length&&o.limitToSubscriptions.indexOf(e.id)<0)continue;if(e&&"new"==o.type)continue;if(!e&&"existing"==o.type)continue;i=o.priority,n=o}return n},i.prototype.getConfigWithLowestCost=function(e,n){var o,i;for(var r in this.configs)i=this.configs[r],n&&!n.canExtend(i)||!e&&i.channels.indexOf(t.channel)<0||(!o||i.recurringCost<o.recurringCost||i.recurringCost==o.recurringCost&&i.lockinLength<o.lockinLength)&&(o=i);return o},i.prototype.validateOptions=function(e,t,n,o,i){var r=null;if(isInteger(e)||(e=null),t&&!this.devices[t.id])return!1;if(n&&!this.getValidPromotions(i)[n.id])return!1;if(n&&t&&!this.findConfigsFromOptions(e,t,n).length)return!1;if(null!==e){var a=this.findConfigsFromOptions(e,t,n);if(!a.length)return!1;r=a[0]}if(o&&r){for(var s in o)if(!r.rateplan.options[o[s].id])return!1}else if(o)for(var s in o)if(!this.rateplan.options[o[s].id])return!1;return{config:r,device:t,promotion:n,options:o}},i.prototype.allowLockinLengthSelection=function(){var e,t;for(var n in this.configs)if(t=this.configs[n],t.allowedInCurrentChannel()){if(this.hasTag("allowLockinLengthSelection"))return!0;if(e){if(e!=t.recurringCost)return!0}else e=t.recurringCost}return!1},i.prototype.getValidPromotions=function(e,n,o,i){o||(o=t.channel);var r,a={};for(var s in this.promotions)if(r=this.promotions[s],i||r.channels.indexOf(o)>-1||r.channels.indexOf(t.realChannel)>-1){if(e&&r.limitToSubscriptions.length&&r.limitToSubscriptions.indexOf(e.id)<0)continue;if(e&&"new"==r.type)continue;if(!e&&"existing"==r.type)continue;a[s]=r}return n?objToArray(a).sort(function(e,t){return e.priority<t.priority?1:-1}):a},i.prototype.getValidDevices=function(e){e||(e=t.channel);var n={};for(var o in this.devices)this.devices[o].channels.indexOf(e)>-1&&(n[o]=this.devices[o]);return n},i.prototype.getText=function(e,n,o){var i=this.url;return"ol"===t.channel&&"shortdescription"===e&&this.getExtraText(),n&&this.customText[n.code]&&this.customText[n.code][e]?this.customText[n.code][e]:"self-register"===o&&"lebara_plus"===i?"product_".concat(i,"_").concat(e,"_self-registration"):"product_".concat(i,"_").concat(e)},i.prototype.getValidConfigs=function(e,o){var i,r={};o||(o=t.channel);for(var a in this.configs)i=this.configs[a],24!=i.lockinLength&&n.agentLoggedIn&&!n.isTelesales&&e||(e||i.channels.indexOf(o)>-1)&&(r[a]=i);return r},i.prototype.getExtraText=function(){var e=this;this.loadedExtraOnlineText||(this.loadedExtraOnlineText=!0,o.getByFieldValue("product_box","product_name",this.productName.toLowerCase()).then(function(t){t&&t.length&&(e.extraOnlineText=t[0].data.extra_online_text)}))},i}]),app.factory("Promotion",["Products","CommonData","Cms","$location","FeatureFlags","$rootScope","Channels","Storage",function(e,t,n,o,i,r,a,s){var c=function(c,d){var u,l,p=this;if(("yalloblackplus81501200with"===c.rfe_promotion_code||"yalloblackplus81051200with"===c.rfe_promotion_code||"yalloblackplus80051200with"===c.rfe_promotion_code||"yalloblackplus82051200with"===c.rfe_promotion_code)&&!i.get("Yallo-Black-Plus-enabling-for-pos"))return!1;if(i.get("special-link-feature")&&r.isPos){var g,f=[];a.getChannels().$$state.value.find(function(e){e.code===t.realChannel&&e.SpecialLinkPromos.length>0&&f.push(e.SpecialLinkPromos[0].text.split(","))});var h=s.get("AllowedProductsOnOwnShop");if(s.get("AllowedProductsOnOwnShop")?h.forEach(function(e){f[0].indexOf(e)>-1&&e===c.rfe_promotion_code&&(g=!1)}):f[0]&&f[0].indexOf(c.rfe_promotion_code)>-1&&(g=!0),g)return!1}this.valid=!1,this.id=d,this.code=c.rfe_promotion_code,this.ratorKeys=c.rator_keys.map(function(e){return e.rator_option_key}),this.title=c.title[0].text,this.description=n.convertText(c.description),this.legalText=n.convertText(c.legal_text),this.recurringDiscountDescriptionText=c.recurring_discount_description_text||this.title,this.upfrontDiscountDescriptionText=c.upfront_discount_description_text||this.title,this.recurringDiscount=c.discount_amount,this.discountDuration=c.discount_duration,this.waiveActivationFee="Remove activation fee"===c.remove_activation_fee;var m=c.available_in_channels.filter(function(e){return!window.production||"Test"!==e.environment});return this.availableChannels=m.map(function(e){return e.channel.slug}),this.promotionDevices=c.added_devices.map(function(e){return e.sap_id}).filter(function(e){return e}),this.isOwnShopMode=o.url().includes("pos?ownShopMode=true&pal="),this.channels=m.filter(function(e){return p.isOwnShopMode?e:"Non default"!==e.availability}).map(function(e){return e.channel.slug}),this.channels=m.filter(function(e){return"Non default"!==e.availability}).map(function(e){return e.channel.slug}),this.priority=c.priority,this.limitToSubscriptions=[],this.type="all",this.error="no product",null!==(u=c.product)&&void 0!==u&&u.slug?(this.product=e.findProductByName(c.product.slug.split("-").join("_")),this.error="invalid product",this.product?(this.lockinLengths=c.lockin_lengths.filter(function(e){return e.lockin_length}).map(function(e){return parseInt(e.lockin_length)}),this.error="no lockin lengths",this.lockinLengths.length?(this.configs=[],this.product.allowedInCurrentChannel()?(this.lockinLengths.forEach(function(e){var t=p.product.findConfigsFromOptions(e)[0];if(p.error="invalid lockin length",!t)return console.error("Invalid lockin length for promotion product",p.code,p.product,e);p.configs.push(t),t.addPromotion(p)}),this.error="Invalid duration/amount",this.recurringDiscount&&!this.ratorKeys.filter(function(e){return e}).find(function(e){return-1!==e.indexOf(p.discountDuration.toString())&&-1!==e.indexOf(p.recurringDiscount.toString())})?console.error("Rator option keys dont match discount duration/amount",this.code):void(this.valid=!0)):(this.error="Not allowed in channel",console.error("Promo product not allowed in a channel",this.code,this.product))):console.error("Promotion doesnt have any lockin lengths set up",this.code)):console.error("Promotion has an invalid product (promo code: '"+this.code+"', product: '"+(null===c||void 0===c?void 0:null===(l=c.product)||void 0===l?void 0:l.slug)+"')")):console.error("Promotion doesnt have product set up",this.code)};return c.prototype.applies=function(e,n){return e.url===this.product.url&&(!!this.lockinLengths.includes(e.lockinLength)&&(!(n&&this.limitToSubscriptions.length&&this.limitToSubscriptions.indexOf(n.id)<0)&&(("ol"===t.channel||!n||"new"!==this.type)&&!(!n&&"existing"===this.type))))},c.prototype.allowedInCurrentChannel=function(){return this.channels.indexOf(t.channel)>-1&&this.channels.indexOf(t.realChannel)>-1},c.prototype.availableInCurrentChannel=function(){return this.availableChannels.indexOf(t.channel)>-1&&this.availableChannels.indexOf(t.realChannel)>-1},c}]),app.factory("Rateplan",function(){var e=function(e,t,n,o,i,r,a,s){this.id=r,this.name=e,this.url=urlify(e),this.visible=a,this.type=t,this.iconType=i,this.rates=n,this.extraBuckets=o?o.map(function(e){return e.isExtra=!0,e}):[],this.products={},this.productConfigs={},this.options={},this.devices={},this.countries=s};return e.prototype.convertRates=function(){var e;if(!this.convertedRates&&null!==(e=this.rates)&&void 0!==e&&e.countries){this.convertedRates=!0;var t={};for(var n in this.rates.countries){var o=this.rates.countries[n].map(function(e){return null==e?"":e});t[this.countries[n]]={fixed:o[0].toString(),mobile:o[1].toString(),sms:o[2].toString(),mms:o[3].toString(),fixedChargeUnits:o[4],mobileChargeUnits:o[5],smsChargeUnits:o[6],mmsChargeUnits:o[7],roamingGroup:o[8].toString()}}this.rates.countries=t;for(var i in this.rates.roaming)this.rates.roaming[i]=this.rates.roaming[i].map(function(e){return null==e?"":e}),this.rates.roaming[i]={inCountry:this.rates.roaming[i][0].toString(),group0:this.rates.roaming[i][1].toString(),group1:this.rates.roaming[i][2].toString(),group2:this.rates.roaming[i][3].toString(),group3:this.rates.roaming[i][4].toString(),incoming:this.rates.roaming[i][5].toString(),sms:this.rates.roaming[i][6].toString(),mms:this.rates.roaming[i][7].toString(),gprs:this.rates.roaming[i][8].toString(),gprsChargeUnits:this.rates.roaming[i][9],fixedChargeUnits:this.rates.roaming[i][10],mobileChargeUnits:this.rates.roaming[i][11],incomingChargeUnits:this.rates.roaming[i][12],smsChargeUnits:this.rates.roaming[i][13],mmsChargeUnits:this.rates.roaming[i][14]};this.calcCountryGroups()}},e.prototype.rate=function(e,t){this.convertedRates||this.convertRates();var n,o,i=this.rates,r=this.findCountry(t),a=this.findCountry(e);if(!a||!r)return{};if(0==a.roamingGroup)return{fixed:r.fixed,mobile:r.mobile,sms:r.sms,mms:r.mms,gprs:i.gprs,gprsChargeUnits:i.gprsChargeUnits,fixedChargeUnits:r.fixedChargeUnits,mobileChargeUnits:r.mobileChargeUnits,smsChargeUnits:r.smsChargeUnits,mmsChargeUnits:r.mmsChargeUnits,
gprsChargeUnitsIsString:["day","week","month"].indexOf(i.gprsChargeUnits)>-1};var s=i.roaming,c=s["group"+a.roamingGroup];return c?(o=c.incoming,n=e==t?c.inCountry:c["group"+r.roamingGroup],{fixed:n,mobile:n,incoming:o,sms:c.sms,mms:c.mms,gprs:c.gprs,gprsChargeUnits:c.gprsChargeUnits,fixedChargeUnits:c.fixedChargeUnits,mobileChargeUnits:c.mobileChargeUnits,smsChargeUnits:c.smsChargeUnits,mmsChargeUnits:c.mmsChargeUnits,gprsChargeUnitsIsString:["day","week","month"].indexOf(c.gprsChargeUnits)>-1,incomingChargeUnits:c.incomingChargeUnits,roaming:!0}):{}},e.prototype.findCountry=function(e){for(var t in this.rates.countries)if(t==e)return this.rates.countries[t]},e.prototype.calcCountryGroups=function(){var e,t;this.roamingGroups={group1:[],group2:[],group3:[]};for(var n in this.rates.countries)e=this.rates.countries[n],e?(e.id=n,(t=this.roamingGroups["group"+e.roamingGroup])&&t.push(e)):console.warn("country not found",this.name,n)},e.prototype.addOption=function(e){this.options[e.id]||(this.options[e.id]=e),this.product&&this.product.addOption(e)},e.prototype.firstProduct=function(){return Object.first(this.products)},e}),app.factory("Subscription",["$interval","Network","Rateplans","$q","Storage","SavingsOptions","Analytics","Notifications","$rootScope","CommonData","Promotions","State","Cms","Products","$translate","PrismicPopups","Popup","$timeout","Language","TelegramAlert","FeatureFlags","$location",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g,f,h,m,v,b,w,C,y){var D=function(e,t){var n=this;this.active=!1,this.refreshDelay=6e5,this.refreshOnFocus=!1,this.id=e.subscriptionId,this.subscriptionStartDate=new Date(e.subscriptionStartDate),this.billingGroupId=e.billingGroupId,this.serviceStatusId=e.serviceStatusId,this.setInitialData(e,t),this.gotDetails=!1,this.activeOptions={},this.notifications=[],this.devices=[],this.creditCards={},this.scheduledTopups={},this.balanceTopups={},this.prepaidUsageCache={},window.addEventListener("focus",function(){n.refreshOnFocus&&n.refresh(0),n.refreshOnFocus=!1})};D.prototype.setInitialData=function(e,t){var o,i,r,a=this,s=e.rateplan;s.lockinEndDate&&(this.lockinEndDate=new Date(s.lockinEndDate)),s.lockinStartDate&&(this.lockinStartDate=new Date(s.lockinStartDate)),e.subscriptionEndDate&&(this.subscriptionEndDate=new Date(e.subscriptionEndDate)),this.rateplan=n.data.rateplans[s.rateplanId],this.rateplan||throwSafe(l.rateplanDataLoaded?"Rateplan not defined: "+s.rateplanId:"Subscription.setInitialData fired before rateplans loaded"),this.isLight=this.rateplan.url.indexOf("_light")>-1,this.isFiber="fiber"==(null===(o=this.getProduct())||void 0===o?void 0:o.getType()),this.isHFC="HFC"==(null===(i=this.getProduct())||void 0===i?void 0:i.getType()),this.isTV="tv"==(null===(r=this.getProduct())||void 0===r?void 0:r.getType()),this.isMbb=this.rateplan.url.indexOf("yallo_home_5g_plus_tv")>-1||this.rateplan.url.indexOf("yallo_home_5g")>-1||this.rateplan.url.indexOf("yallo_home_4g")>-1,(this.isHFC||this.isFiber)&&e.installationInfo&&(this.installationInfo=e.installationInfo,this.relocationAddress=e.relocationAddress,this.isFiber&&(this.installationInfo.otoId=this.installationInfo.lri,this.installationInfo.qualifiedBy=this.installationInfo.externalReference,this.installationInfo.plug=this.installationInfo.otoId?this.installationInfo.otoId.split(".")[5]||"":"",this.fiberActive=2===e.statusId||3===e.statusId,this.installationInfo.hwPlugInDate||(this.fiberActive=!1)),this.installationInfo.predictedActivationDate=new Date(this.installationInfo.requestDate),this.installationInfo.confirmDate&&(this.installationInfo.confirmDate=new Date(this.installationInfo.confirmDate),this.installationInfo.confirmDate.getTime()>this.installationInfo.predictedActivationDate.getTime()&&(this.installationInfo.predictedActivationDate=this.installationInfo.confirmDate)),this.installationInfo.predictedActivationDate&&(this.installationInfo.predictedActivationDate.setHours(23),this.installationInfo.predictedActivationDate.setMinutes(59)),this.installationInfo.startDate||(this.installationInfo.startDate=this.installationInfo.requestDate)),this.userId=e.userId,this.msisdn=e.msisdn,this.fastActivation=e.fastActivation,"NORMAL"===e.cAProvServiceType&&(this.fastActivation=!1),this.digitalPoaSigned=e.digitalPoaSigned,this.simcardInfo=e.simcardInfo,this.statusId=e.statusId;var c=this.statusId;this.pendingTermination=!1,1==c?this.status="pendingActivation":2==c?(this.status="active",this.isActive=!0):3==c&&(this.pendingTermination=!0,this.isActive=!1,this.status="terminated",[100,110,120].includes(this.serviceStatusId)||(this.status="active",this.isActive=!0)),4!=c&&-1===[350,400,410,420,430].indexOf(this.serviceStatusId)||(this.status="terminated"),this.allowTopup="active"===this.status,this.user=t[this.userId],this.user&&(this.user.subscription=this),e.activeNpFlows&&e.activeNpFlows.length&&l.returnWhenCheckoutDataLoaded().then(function(){a.activeNpFlow=e.activeNpFlows[e.activeNpFlows.length-1],a.activeNpFlow&&d.providers&&(a.activeNpFlow.previousProvider=d.providers[a.activeNpFlow.donorId],a.activeNpFlow.portDate=new Date(a.activeNpFlow.portDate),a.activeNpFlow.lastModificationDate=new Date(a.activeNpFlow.lastModificationTime),a.activeNpFlow.portWishDate=new Date(a.activeNpFlow.portWishDate),a.activeNpFlow.poaSignatureDate=new Date(a.activeNpFlow.poaSignatureDate),a.activeNpFlow.msisdn=a.activeNpFlow.phoneNumber,a.activeNpFlow.statusVoId=a.activeNpFlow.statusVO.id,delete a.activeNpFlow.statusVO,delete a.activeNpFlow.donorId,delete a.activeNpFlow.lastModificationTime,delete a.activeNpFlow.phoneNumber,a.activeNpFlow.status=a.getOnpStatus())}),"terminated"!==this.status&&(this.canActivateOptions=!0,l.checkCustomerLoggedIn().then(function(){a.getRateplanChangeStatus().then(function(){a.canActivateOptions=a.checkCanActivateOptions()})}))},D.prototype.applyBillingGroup=function(){"prepaid"==this.type&&(this.billingGroup.balance=1*this.balance||0)},D.prototype.setData=function(e,t){this.balance=e.balance,e.userId&&(this.userId=e.userId),this.iccid=e.iccid,this.newSim=!1,this.settings=e.settings,e.paygDataSetting&&e.paygDataSetting.PAYG_DATA&&(this.settings.PAYG_DATA=e.paygDataSetting.PAYG_DATA,this.settings.PAYG_DATA.children.PAYG_AMOUNT&&delete this.settings.PAYG_DATA.children.PAYG_AMOUNT.subscribed),this.applyBillingGroup(),this.rateplan&&this.rateplan.extraBuckets&&(e.includedBundles=e.includedBundles.concat(this.rateplan.extraBuckets)),e.includedBundles=fixBundles(e.includedBundles),this.includedBundles=e.includedBundles.map(function(e){return e.origBundleName=e.bundleName,e.bundleName=urlify(e.bundleName),e.isExtra=!!e.isExtra,e.countries=e.countries&&e.countries?e.countries.concat(["200903041337530279"]):[],e}),this.includedBundles=this.removeDuplicateBundles(this.includedBundles);for(var n in this.includedBundles)this.fixOption(this.includedBundles[n]);this.includedPromotions=fixBundles(e.includedPromotions),this.includedRetentionOffers=fixBundleText(e.includedRetentionOffers),e.deviceInfo=e.deviceInfo.filter(function(e){return"Monthly Fee Finished"!==e.comments}),e.deviceInfo&&e.deviceInfo.length&&(this.isHFC?(this.device=e.deviceInfo[0],this.device&&this.device.status&&(this.device.status=this.device.status.toLowerCase())):this.devices=e.deviceInfo),this.isHFC&&("pendingActivation"!=this.status||this.device&&"in use"!=this.device.status?"pendingActivation"==this.status&&"ordered"==this.device.status?this.hfcStatus="ordered":"pendingActivation"==this.status&&"shipped"==this.device.status?this.hfcStatus="shipped":"pendingActivation"==this.status&&"in use"==this.device.status?this.hfcStatus="active":"active"==this.status&&this.relocationAddress&&!0===this.relocationAddress.relocate&&this.isHFC?this.hfcStatus="onGoing":"pendingActivation"!=this.status&&"active"!==this.status||"returned"!=this.device.status?"active"==this.status&&this.isHFC&&this.pendingRateplanChange?this.hfcStatus="pendingRateplanChange":"active"==this.status?this.hfcStatus="active":this.hfcStatus=this.status:this.hfcStatus="returned":this.hfcStatus="pendingActivation");for(var n in e.oneTimeOptions)this.fixOption(e.oneTimeOptions[n]);for(var n in e.buyableOptions)this.fixOption(e.buyableOptions[n]);this.includedOptionPromotions=e.includedOptionPromotions?fixBundles(e.includedOptionPromotions):[],this.addOptions(e.buyableOptions),this.getActiveOptionList(),this.oneTimeOptions=e.oneTimeOptions,t&&(this.user=t[this.userId],this.user&&(this.user.subscription=this)),e.hardwareInsurance&&e.hardwareInsurance.length&&(this.hardwareInsurance=e.hardwareInsurance[0],10===this.hardwareInsurance.statusId&&(this.hardwareInsurance.status="pendingActivation"),20===this.hardwareInsurance.statusId&&(this.hardwareInsurance.status="active"),30===this.hardwareInsurance.statusId&&(this.hardwareInsurance.status="pendingTermination"),40===this.hardwareInsurance.statusId&&(this.hardwareInsurance.status="terminated"))},D.prototype.canAddHandsetInsurance=function(){return!this.ca.isLightCustomer&&("prepaid"!==this.type&&("internet"!==this.getType()&&("none"!==this.getType()&&"terminated"!==this.status)))},D.prototype.getActiveOptionList=function(){var e={};for(var t in this.activeOptions){var n=this.activeOptions[t],o=n.subDetails[this.id];for(var i in o)e[t+"-"+i]={option:n,subDetails:o[i]}}this.activeOptionDataList=e},D.prototype.hasRoamingData=function(){if(!this.settings)return!1;if(this.settings.GPRS_PARENT.children.GPRS_ROAMING_BLOCK)return!1;if(this.settings.GPRS_PARENT.children.GPRS_BLOCK)return!1;if(this.settings.ROAMING){if(!this.settings.ROAMING.subscribed)return!1}else if(this.settings.ROAMING_STD&&!this.settings.ROAMING_STD.subscribed)return!1;return!0},D.prototype.fixOption=function(e){e.countries&&e.countries.length&&e.countries.push("200903041337530279"),e.balanceName&&(e.bundleName=e.balanceName),e.origBundleName=e.balanceName,e.initialAmount&&(e.initialBalance=e.initialAmount),e.endDate&&(e.optionrExpiryDate=e.endDate),e.optionrExpiryDate?e.endDate=new Date(e.optionrExpiryDate):e.optionrRenewalDate&&(e.endDate=new Date(e.optionrRenewalDate)),void 0!==e.amount&&(e.remainingBalance=e.amount);var t=e.type?"type":"balanceType";"VOLUME_SECOND"==e[t]||"SECOND"==e[t]?e.type="MIN":"VOLUME_KB"==e[t]&&(e.type="BYTES",e.remainingBalance=1024*e.remainingBalance,e.initialBalance=1024*e.initialBalance,e.isUnlimited=e.remainingBalance>=40.01*Math.pow(1024,3)),e.bundleName.toLowerCase().endsWith("flat")&&(e.isUnlimited=!0),"blb_nat_voice_pulse"===e.bundleName.toLowerCase()&&(e.isUnlimited=!0)},D.prototype.getPromoForOption=function(e){if(this.includedOptionPromotions){var t,n=_createForOfIteratorHelper(this.includedOptionPromotions);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(o.optionId&&o.optionId==e.id)return o;if(o.description.includes("5G")&&e.name.includes("5G"))return o}}catch(e){n.e(e)}finally{n.f()}}},D.prototype.removeDuplicateBundles=function(e){for(var t,n,o=0;o<e.length;o++){t=e[o];for(var i=0;i<e.length;i++)if(n=e[i],o!=i&&t.bundleName==n.bundleName){t.type?(t.priority=n.priority,e.splice(i,1)):(e.splice(o,1),n.priority=t.priority,o--);break}}return e},D.prototype.addOptions=function(e){for(var t in this.activeOptions)delete this.activeOptions[t].subDetails[this.id];this.activeOptions={};for(var t in e)this.addOption(e[t]);for(var t in this.activeOptions)this.fixWaitingOptions(this.activeOptions[t])},D.prototype.addOption=function(e){var t=e.id;if(!t)return console.error("missingOptionId",e,t),void a.event("error","missingOptionId",e.bundleName);if(fixBundle(e),!this.activeOptions[t]&&(this.activeOptions[t]=r.options[t],!this.activeOptions[t]))return delete this.activeOptions[t],void console.warn("Deleting active option because it doesnt exist in bootloader",t);if(!this.activeOptions[t]||!this.activeOptions[t].subDetails)return void(t&&!this.activeOptions[t]&&a.event("missing_option",t+""));this.activeOptions[t].subDetails[this.id]||(this.activeOptions[t].subDetails[this.id]=[]),this.activeOptions[t].subDetails[this.id].push([]);var n,o=this.activeOptions[t].subDetails[this.id][this.activeOptions[t].subDetails[this.id].length-1];if(e.includedItemsList&&e.includedItemsList.length){for(var i in e.includedItemsList)n=e.includedItemsList[i],n.type=n.balanceType,n.bundleName=e.bundleName+"_"+n.type,this.fixOption(n),fixBundle(n),o.push(n);o[0].willRenew=e.willRenew,o[0].status=e.status,o[0].optionCreationDate=e.optionCreationDate,o[0].optionrRenewalDate=e.optionrRenewalDate,o[0].optionrExpiryDate=e.optionrExpiryDate,o[0].endDate=new Date(e.endDate)}else o.push(e)},D.prototype.fixWaitingOptions=function(e){var t;for(var n in e.subDetails[this.id])if(t=e.subDetails[this.id][n][0],["INSTALLING","WAITING"].indexOf(t.status)>-1){"SUSPENDED"!==t.status&&(t.willRenew=!0),"prepaid"==this.type&&this.billingGroup.balance<e.cost&&(t.notEnoughBalance=!0);var o=this.optionConflict(e);o&&(t.optionrRenewalDate=new Date(o.subDetails[this.id][0][0].endDate))}},D.prototype.setActive=function(t,n,i){if("terminated"===this.status)return console.warn("terminated"),this.settings={},o.resolve();var r=o.defer();if(this.active=!0,t)e.cancel(this.refreshing),this.refresh(this.refreshDelay),this.getData(this.id).then(r.resolve);else{if(i&&this.gotDetails&&(this.gotDetails=!1),this.gotDetails)return o.resolve();this.gettingDetails=!0,n?r.resolve():this.getData(this.id).then(r.resolve)}return this.gotDetails=!0,r.promise},D.prototype.stopRefreshing=function(){this.refreshOnFocus=!1,this.ignoreRefresh=!0,e.cancel(this.refreshing)},D.prototype.refresh=function(t){var n=this;this.refreshing=e(function(){console.log("refresh subscription",n.id),document.hasFocus()||!t?(n.getData(n.id),n.refresh(n.refreshDelay)):n.refreshOnFocus=!0},t,1)},D.prototype.getUsageHistoryFromBill=function(e){var t=this;return this.getUsageHistoryForInvoice(e).then(function(n){return!!n&&t.usageIntoDays(fixPostpaidUsageHistory(n,t.msisdn),e.startDate,e.endDate||(new Date).addDays(1))})},D.prototype.getUsageHistoryForInvoice=function(e){var n=this;return e.rawUsage[this.id]?o.resolve(angular.copy(e.rawUsage[this.id])):t.post("getUsageHistory",{subscriptionId:this.id,invoiceId:e.id},1).then(function(t){return t&&(e.rawUsage[n.id]=angular.copy(t),v(function(){e&&e.rawUsage[n.id]&&(e.rawUsage[n.id]=void 0)},18e5)),t&&t.sms&&(t.sms=t.sms.filter(function(e){return!e.to.startsWith("(")})),t||{calls:[],gprs:[],sms:[],others:[]}})},D.prototype.getPrepaidUsageHistory=function(e,n){var i=this,r=new Date(n,e,1),a=new Date(n,e,daysInMonth(e,n)).addDays(1);if(this.prepaidUsageCache[e+"-"+n]){var s=angular.copy(this.prepaidUsageCache[e+"-"+n]);return o.resolve(this.usageIntoDays(fixPrepaidUsageHistory(s,this.msisdn),r,a))}var c={fromDate:r.toServerJSON(),toDate:a.toServerJSON(),subscriptionId:this.id};return t.post("getPrepaidUsageHistory",c).then(function(t){if(t)return i.prepaidUsageCache[e+"-"+n]=angular.copy(t),i.usageIntoDays(fixPrepaidUsageHistory(t,i.msisdn),r,a)})},D.prototype.getPrepaidUsagePdf=function(e,n){var o={fromDate:e.toServerJSON(),toDate:n.toServerJSON(),subscriptionId:this.id};return t.post("getPrepaidUsagePdf",o,1)},D.prototype.usageIntoDays=function(e,t,n){function o(e){return{days:new Array(e).fill(0).map(function(e,t){return{total:0,totalIncluded:0,totalNotIncluded:0,totalCost:0,roaming:{total:0,totalCost:0},national:{total:0,totalCost:0},items:[],date:a.addDays(t)}}),total:0,totalCost:0}}var i={},r=e.gprs.concat(e.calls).concat(e.sms).filter(function(e){return e.time});if(r.sort(function(e,t){return e.time>t.time?1:-1}),!r.length)return{gprs:o(0),sms:o(0),calls:o(0),others:o(0)};var a=r[0].time,s=r[r.length-1].time,c=differenceInDays(a,s)+2;return Object.keys(e).forEach(function(r){i[r]=o(c),i[r].days.forEach(function(e){return e.cariedOver=e.date<t||e.date>n}),e[r].forEach(function(e){var t=i[r].days.find(function(t){return compareDatesIgnoreHours(t.date,e.time)});t&&(i[r].totalCost+=e.cost,i[r].total+=e.amount,t.total+=e.amount,t.totalCost+=e.cost,"gprs"===r&&"roaming"===e.type&&(t.roaming.total+=e.amount,t.roaming.totalCost+=e.cost),"gprs"===r&&"national"===e.type&&(t.national.total+=e.amount,t.national.totalCost+=e.cost),e.cost<=0?t.totalIncluded+=e.amount:t.totalNotIncluded+=e.amount,t.items.push(e))})}),i},D.prototype.getData=function(e,n){var i=this;if("terminated"===this.status||!l.customerLoggedIn)return o.resolve(this.gettingDetails=!1);var r={subscriptionId:e};return this.gettingDetails=!0,l.checkCustomerLoggedIn().then(function(){return t.post("getSubscriptionDetails",r,8,!0).then(function(e){return i.errorGettingDetails=!e||e.errorCode,i.dataLoaded=!0,e&&!e.errorCode?i.setData(e,n):i.ignoreRefresh||s.add("error_"+e.errorCode),e&&e.errorCode&&(i.status="server_error"),c.$emit("dataLoaded_"+i.id),i.gettingDetails=!1,e&&!e.errorCode})})},D.prototype.prepareForRemoval=function(){e.cancel(this.refreshing)},D.prototype.returnWhenDataLoaded=function(){if(this.dataLoaded)return o.resolve();var e=o.defer(),t=c.$on("dataLoaded_"+this.id,function(){t(),e.resolve()});return e.promise},D.prototype.returnWhenRecommendationsLoaded=function(){if(this.startedAttemptingToGetRecommendations||this.getRecommendations(),this.recommendationsLoaded)return o.resolve();var e=o.defer(),t=c.$on("recommendationsLoaded_"+this.id,function(){t(),e.resolve()});return e.promise};return D.prototype.changeLang=function(e){var n=this,i=o.defer();if(this.changingLanguage)i.resolve();else{if("terminated"!=this.status){this.changingLanguage=!0;var r={subscriptionId:this.id,languageCode:e};return a.event("changeSubscriptionLanguageLang","start",null,{subscriptionId:r.subscriptionId}),t.post("changeSubscriptionLanguage",r).then(function(t){return n.changingLanguage=!1,t||(n.user.preferredLang=e,a.event("changeSubscriptionLanguageLang","success",null,{subscriptionId:r.subscriptionId})),t})}i.resolve()}return i.promise},D.prototype.canActivate=function(e){if(this.fastActivation)return!1;if("postpaid"===this.type&&this.isLight)return!1;if(!this.canActivateOptions)return!1;if("terminated"===this.status)return!1;if("pendingActivation"===this.status)return!1;if(!e.autoRenews&&"prepaid"===this.type&&this.billingGroup.balance<e.cost)return!1;if(this.activeOptions[e.id]){if(!e.autoRenews)return!0;var t,n=this.activeOptions[e.id].subDetails[this.id];for(var o in n)if(t=n[o][0],["INSTALLING","WAITING"].indexOf(t.status)>-1)return!1;return!t.willRenew}return!!e.applicableRateplans[this.rateplan.id]},D.prototype.cantActivateReason=function(e){if(this.fastActivation)return"cantActivateFastActivation";if("postpaid"===this.type&&this.isLight)return"cantActivateIsLight";if("terminated"===this.status)return"cantActivateTerminated";if(!this.canActivateOptions)return"cantActivateOptionsRateplanChangePending";if("pendingActivation"===this.status)return"cantActivatePendingActivation";if(!e.autoRenews&&"prepaid"===this.type&&this.billingGroup.balance<e.cost)return"cantActivateNotEnoughBalance";if(this.activeOptions[e.id]){if(!e.autoRenews)return;var t,n=this.activeOptions[e.id].subDetails[this.id];for(var o in n)if(t=n[o][0],["INSTALLING","WAITING"].indexOf(n[o][0].status)>-1)return"cantActivateAlreadyInstalling";if(t.willRenew)return"cantActivateAlreadyActive"}else if(!e.applicableRateplans[this.rateplan.id])return"cantActivateNotApplicableToRateplan"},D.prototype.canDeactivate=function(e){if("postpaid"===this.type&&this.isLight)return!1;if("terminated"===this.status)return!1;if(!this.canActivateOptions)return!1;if(this.activeOptions[e.id]){var t=this.activeOptions[e.id].subDetails[this.id][0][0];return["INSTALLING","WAITING"].indexOf(t.status)>-1||!!t.willRenew}},D.prototype.setRecommendations=function(e){return e.clickedDeal&&(l.clickedDeal={sub:this,id:e.clickedDeal}),t.post("setSubscriptionRecommendations",{data:btoa(JSON.stringify(e)),subscriptionId:this.id,channel:d.channel,viewingMode:c.app?"app":"web"},2,!0).then(function(e){return!(!e||e.errorCode)&&e})},D.prototype.getRecommendations=function(e){var n,i=this;if(this.startedAttemptingToGetRecommendations=!0,this.currentPromotions=[],"terminated"===this.status)return this.recommendations={deals:[]},o.resolve();if(this.recommendationsLoaded&&!e)return o.resolve();var r=objToArray((null===(n=this.ca.creditCheckData)||void 0===n?void 0:n.deviceOptionMap)||{}),a=(r.find(function(e){return e.length>0})||[]).map(function(e){return{name:f.instant("device_".concat(e.deviceId,"_title")),id:e.deviceId,deviceOptionId:e.deviceOptionId,recurringDuration:e.recurringDuration,upfrontCost:e.upfrontCost,recurringCost:e.recurringCost}}),s=JSON.stringify({deviceOptions:a});return l.checkCustomerLoggedIn().then(function(){return i.getCurrentCountry()}).then(function(){return t.post("getSubscriptionRecommendations",{subscriptionId:i.id,channel:d.channel,viewingMode:c.app?"app":"web",extraData:s},4,!0)}).then(function(e){try{if(i.recommendations=JSON.parse(decodeURIComponent(e.recommendations)),console.log(angular.copy(i.recommendations)),i.currentPromotions=i.recommendations.currentPromotions||[],i.currentDevice=i.recommendations.currentDevice,i.optionPromotions=i.recommendations.optionPromotions,i.mostCalledCountry=i.recommendations.mostCalledCountry,i.currentPromotions.forEach(function(e){e.endDate=new Date(e.endDate),e.promoPrice&&(e.amount=1*e.promoPrice)}),i.recommendations.rateplanChangeProducts||(console.warn("No rateplan change recommendations"),i.recommendations.rateplanChangeProducts=[]),l.isTelesales?(i.recommendations.retentionRateplanChangeProducts||(i.recommendations.retentionRateplanChangeProducts=[]),i.recommendations.retentionRateplanChangeProducts.forEach(function(e){if(e.rateplanChangePoints=e.points||0,e.origProductString=e.product,e.product=g.findProductByName(e.product),e.promotion){e.promotion=e.promotion.replace("/s+/g","");var t=u.findPromotionByCode(e.promotion),n=u.findPromotionByCode(e.promotion),o=u.enablePromotionForChannel(n);e.promotion=o,e.promotion&&(t||e.promotion.limitToSubscriptions.push(i.id),"3offers"===e.type&&(e.promotion.priority=99965123))}}),i.recommendations.retentionRateplanChangeProducts.filter(function(e){return!e.product}).forEach(function(e){return console.warn("Invalid product sent",e)}),i.recommendations.retentionRateplanChangeProducts=i.recommendations.retentionRateplanChangeProducts.filter(function(e){return e.product})):(i.recommendations.rateplanChangeProducts.forEach(function(e){if(e.product=g.findProductByName(e.product),e.promotion){e.promotion=e.promotion.replace("/s+/g","");var t=u.findPromotionByCode(e.promotion),n=u.findPromotionByCode(e.promotion),o=u.enablePromotionForChannel(n);e.promotion=o,e.promotion&&(t||e.promotion.limitToSubscriptions.push(i.id),e.promotion.priority=99965123)}}),i.recommendations.rateplanChangeProducts.filter(function(e){return!e.product}).forEach(function(e){return console.warn("Invalid product sent",e)}),i.recommendations.rateplanChangeProducts=i.recommendations.rateplanChangeProducts.filter(function(e){return e.product})),i.recommendations.deals)return i.processDeals().then(function(){return i.doneLoadingRecommendations()});i.doneLoadingRecommendations()}catch(e){i.recommendations={deals:[]},i.doneLoadingRecommendations(),console.error("Subscription.getRecommendations",e)}})},D.prototype.doneLoadingRecommendations=function(){this.recommendationsLoaded=!0,c.$emit("recommendationsLoaded_"+this.id)},D.prototype.doneLoadingRpcPromos=function(){this.rpcPromosLoaded=!0,c.$emit("rpcPromosLoaded_"+this.id)},D.prototype.returnWhenDoneLoadingRpcPromos=function(){return this.rpcPromosLoaded?o.resolve(!0):l.waitForEvent("rpcPromosLoaded_"+this.id)},D.prototype.processDeals=function(){var e=this;return window.window.yolSiteData.roaming?(this.recommendations.deals=[],o.resolve()):o.all(this.recommendations.deals.map(function(e){return e.promotionCode&&p.getByFieldValue("promotion","rfe_promotion_code",e.promotionCode)})).then(function(t){return o.all(e.recommendations.deals.map(function(e,n){if(t[n]){e.promotionTitle=t[n][0]?t[n][0].data.title[0].text:"";var o=u.findPromotionByCode(e.promotionCode);return u.enablePromotionForChannel(o),o}}))}).then(function(t){e.recommendations.deals.forEach(function(n,o){if(n.promotion=t[o],n.subscription=e,n.device&&"string"==typeof n.device&&(n.device=g.data.devices[n.device]),n.product&&"string"==typeof n.product&&(n.productString=n.product,n.product="current"===n.product||"yallo_current"===n.product?e.getProduct():g.findProductByName(n.product)),n.option&&"string"==typeof n.option&&(n.option=r.findOptionByName(n.option)||r.options[n.option]),n.product){var i=-1!==["rateplanChange","addDevice","contractExtension","endOfContract"].indexOf(n.type)?e:void 0;n.config=n.product.findConfigsFromOptions(n.lock,n.device,null,i,!0),n.config.length&&(n.config=n.config[0]),n.config&&n.promotion&&(n.promotion.applies&&!n.promotion.applies(n.config)?n.config=[]:n.promotion.product.url===n.product.url&&(n.config=[]))}});var n=e.recommendations.deals.filter(function(t){var n,o;if(!t.type)return console.warn("Filtering out a deal because it has no type",t),!1;if("option"===t.type)return t.option&&e.canActivate(t.option)&&t.option.allowedInCurrentChannel();if("insurance"===t.type)return e.canAddHandsetInsurance();var i=null!==(n=t.product)&&void 0!==n&&n.hasTag("fiber")?"postpaid-fiber":null===(o=t.product)||void 0===o?void 0:o.type;if("addSubscription"===t.type)return t.product&&e.ca.canAddSubscription(i)&&t.product.allowedInCurrentChannel();if(-1!==["rateplanChange","addDevice","contractExtension","endOfContract"].indexOf(t.type)){var r=t.config&&e.canExtend(t.config);return t.product||console.warn("Filtering out a deal because there is no product found. (Check that a product is in the deal)",t),t.config||console.warn("Filtering out a deal because there is no config found. (promo was invalid, etc.)",t),!r&&t.config&&console.warn("Filtering out a deal because canExtend returned false due to: "+e.getCantExtendReason(t.config),t),r}return"default"===t.type||(console.warn('Unhandled deal type "'+t.type+'"'),!0)});e.recommendations.deals=n,e.newDealCount=e.recommendations.deals.filter(function(e){return e.isNew}).length,e.recommendations.deals.filter(function(e){return"popup"===e.displayType||"dealAndPopup"===e.displayType}).forEach(function(e){var t=h.popups.find(function(t){return t.data.display_name===e.prismicPopupTag});if(t){var n=angular.copy(t.data);n.body=[{slice_type:"prismic_medium_offer",deal:e}];var o=new m("prismicDealPopup_"+Math.random(),"prismic-popup.html",n,{});o.data.popup_type="Personalized prismic popup",h.popups.push(o)}}),h.eval(),e.recommendations.deals=e.recommendations.deals.filter(function(e){return"popup"!==e.displayType})})},D.prototype.isNewHandsetInsuranceCustomer=function(){return!((new Date).getTime()<new Date(2020,11,17).getTime())&&(this.hardwareInsurance&&this.hardwareInsurance.purchaseDate?new Date(this.hardwareInsurance.purchaseDate).getTime()>new Date(2020,11,17).getTime():(new Date).getTime()>new Date(2020,11,17).getTime())},D.prototype.showHandsetInsuranceCancelButton=function(){if(!this.hardwareInsurance)return!1;if("active"!==this.hardwareInsurance.status)return!1;var e=new Date(this.hardwareInsurance.purchaseDate);return e.setDate(daysInMonth(e.getMonth(),e.getFullYear())+1),e=e.addMonths(1),!(this.isNewHandsetInsuranceCustomer()&&differenceInMonths(e,new Date)<12)},D.prototype.getCurrentDiscountPromo=function(){var e="YALLO_PROMOTIONS";return e="LEBARA_PROMOTIONS",this.currentPromotions.find(function(t){return"chf"===t.type&&t.promoType==e&&differenceInDays(swissDate(),t.endDate)>7})},D.prototype.getRetentionPromo=function(){var e="YALLO_RETENTION";return e="LEBARA_RETENTION",this.currentPromotions.find(function(t){return"chf"===t.type&&t.promoType==e&&differenceInDays(swissDate(),t.endDate)>7})},D.prototype.getCurrentDiscount=function(){if((this.isHFC||this.isFiber&&C.get("fiber-change-plan-feature"))&&y.url().includes("change-subscription")&&C.get("hfc-phase-2"))return this.includedPromotions.length>0?this.includedPromotions.filter(function(e){return"monetary"===e.promotionType})[0].totalDiscountedAmount:0;if(!this.currentPromotions)return 0;var e=this.getCurrentDiscountPromo();return e?e.amount:0},D.prototype.getMsisdnActivationStatus=function(){var e=this;return t.post("msisdnActivationStatus",{subscriptionId:this.id}).then(function(t){e.activationStatus=t})},D.prototype.extensionPossibleDate=function(){return this.lockinEndDate?this.lockinEndDate.addDays(-60):swissDate()},D.prototype.earliestPortingDate=function(){if("prepaid"==this.type)return(new Date).addDays(7);if("postpaid"==this.type){var e=(new Date).addMonths(2);return roundToLastOfMonth(this.lockinEndDate&&this.lockinEndDate.getTime()>e.getTime()?this.lockinEndDate:e)}throwSafe(new Error("unknown type in Subscription.earliestPortingDate: "+this.type),"71-id")},D.prototype.calcExtraCostIfLeaving=function(){if("prepaid"==this.type)return this.billingGroup.balance+59;if("postpaid"==this.type){var e,t=differenceInMonths(new Date,this.earliestPortingDate());(t<2||!t)&&(t=2);return((null!==(e=this.getProduct())&&void 0!==e?e:g.data.products[this.rateplan.url]).recurringCost-this.getCurrentDiscount())*t+59}throwSafe(new Error("unknown type in Subscription.calcExtraCostIfLeaving: "+this.type),"70-id")},D.prototype.validateRateplanChange=function(e,n,i){var r=(new Date).addDays(1);r=(new Date).addHours(.01),i.getTime()<r.getTime()&&(i=r),i=swissDate(i);var a=this.rateplan.firstProduct();if(a&&e.url===a.url)return o.resolve({waiveFee:!0,date:"asap"});var s={newProduct:e.id,promotionCode:n?n.code:void 0,subscriptionId:this.id,switchDate:"postpaid"===e.rateplan.type||e.hasTag("HFC")?C.get("MBCR-MBCR-12315-rp-date-change")?i.toServerJSON():i.addDays(1).toServerJSON():i.toServerJSON()},c=["Port date cannot be today or tomorrow.","Change date should be in the future.","Rate plan change validation failed - status/SwitchDate"];return t.post("validateRateplanChange",s,4,!0).then(function(e){return e&&e.errorCode?-1===c.indexOf(e.errorDescription)?e:(s.switchDate=i.addDays(1).toServerJSON(),t.post("validateRateplanChange",s,4,!0)):e})},D.prototype.canDoPreToPost=function(){var e=this.ca.getSubscriptionFromMsisdn(this.msisdn,"postpaid");return"postpaid"!=this.type&&((!e||"terminated"===e.status)&&(!(this.billingGroup.balance<0)&&(200==this.serviceStatusId&&differenceInDays(this.subscriptionStartDate,swissDate())>=30)))},D.prototype.cantDoPrePostReason=function(){var e=this.ca.getSubscriptionFromMsisdn(this.msisdn,"postpaid");return"postpaid"==this.type?"postpaid":e&&"terminated"!==e.status?"alreadyInPreToPost":differenceInDays(this.subscriptionStartDate,swissDate())<30?"tooNewSub":this.billingGroup.balance<0?"balanceTooLow":200!=this.serviceStatusId?"wrongSubStatus":void 0},D.prototype.canAddDevice=function(){var e=!0,t="";if("postpaid"===this.type&&this.ca.isLightCustomer||this.isLight)e=!1,t="";else{var n=this.rateplan.devices,o=this.hasActiveDeviceOption();0===Object.size(n)?e=!1:this.lockinEndDate?o&&(t="deviceOptionActive"===o?"has-device-ordered-already":"",e=!1):e=!0}return{result:e,reason:t}},D.prototype.hasActiveDeviceOption=function(){if("terminated"===this.status)return!1;for(var e in this.devices)if(this.devices[e].posDateForNewDevice){var t=this.devices[e].posDateForNewDevice;t=t.substring(6,10)+"."+t.substring(3,5)+"."+t.substring(0,2);var n=new Date(t);if(n.getTime()>swissDate().getTime())return"deviceOptionActive"}return!1},D.prototype.canExtend=function(e){var t;if(this.fastActivation)return!1;var n=!0,o=this.getProduct();return o||(o={url:"yallo_go",productType:"internet"}),e&&(n=!o||e.url!==o.url),
(!n||!("postpaid"===this.type&&this.ca.isLightCustomer||this.isLight))&&(!this.pendingRateplanChange&&("terminated"!==this.status&&("pendingActivation"!==this.status&&((!this.pendingTermination||310==this.serviceStatusId)&&(!(this.pendingTermination&&e&&e.lockinLength>0)&&(!(200!=this.serviceStatusId&&310!=this.serviceStatusId||(null===(t=this.simcardInfo)||void 0===t?void 0:t.statusId)>1)&&(!!("yallo_home_4g"!==o.url||n&&"yallo_go"!==(null===e||void 0===e?void 0:e.url))&&(!this.lockinEndDate||!(this.hasActiveDeviceOption()&&null!==e&&void 0!==e&&e.lockinLength&&differenceInDays(swissDate(),this.lockinEndDate)>60)&&("ol"===d.channel||differenceInDays(swissDate(),this.lockinEndDate)<=60)))))))))},D.prototype.getCantExtendReason=function(e){var t;if(this.fastActivation)return"cantExtendFastActivation";var n=!0,o=this.getProduct();return o||(o={url:"yallo_go",productType:"internet"}),e&&(n=!o||e.url!==o.url),n&&("postpaid"===this.type&&this.ca.isLightCustomer||this.isLight)?"cantExtendIsLight":"pendingActivation"===this.status?"cantExtendContractBecauseOfStatusPendingActivation":this.pendingTermination&&310!=this.serviceStatusId?"cantExtendContractBecauseOfStatusPendingTermination":"terminated"===this.status?"cantExtendContractBecauseOfStatusTerminated":200!=this.serviceStatusId&&310!=this.serviceStatusId||(null===(t=this.simcardInfo)||void 0===t?void 0:t.statusId)>1?"cantExtendContractBecauseOfWrongServiceStatus":this.pendingRateplanChange?"cantExtendRateplanChangePending":"yallo_home_4g"!==o.url||n&&"yallo_go"!==(null===e||void 0===e?void 0:e.url)?this.lockinEndDate&&differenceInDays(swissDate(),this.lockinEndDate)>60?"cantExtendContractFutureContract":e&&e.lockinLength>0?"cantExtendInternetProduct":"cantExtendGeneric":"cantExtendInternetProduct"},D.prototype.getProduct=function(){if(this.rateplan&&"201609201814100218"==this.rateplan.id){console.log("[YDT-568] workaround for missing GO!(12) product, using product from GO! rateplan");var e=n.data.rateplans[0x2cc4280419eed40];return e?Object.first(e.products):void 0}return this.rateplan?Object.first(this.rateplan.products):void 0},D.prototype.getCurrentCountry=function(){var e,n,i,r=this;return"terminated"===this.status?o.resolve():null!==(e=this.getProduct())&&void 0!==e&&e.hasTag("fiber")?o.resolve("200903041337530279"):null!==(n=this.getProduct())&&void 0!==n&&n.hasTag("HFC")?o.resolve("200903041337530279"):"tv"==(null===(i=this.getProduct())||void 0===i?void 0:i.productType)?o.resolve("200903041337530279"):l.agentLoggedIn?o.resolve("200903041337530279"):t.post("getCurrentCountry",{subscriptionId:this.id}).then(function(e){return r.currentCountry=e?e.id:void 0,!!e&&e.id})},D.prototype.getType=function(){return"mobile"},D.prototype.canDoSimSwap=function(){return"active"===this.status&&8!==this.simcardInfo.statusId},D.prototype.futureContractDuration=function(){return this.lockinStartDate&&this.lockinStartDate.getTime()>swissDate().getTime()},D.prototype.validPostpaidRateplanChangeProducts=function(e,t){var n,o,i=l.isTelesales?null===(n=this.recommendations)||void 0===n?void 0:n.retentionRateplanChangeProducts:null===(o=this.recommendations)||void 0===o?void 0:o.rateplanChangeProducts;if(t&&i&&(i=i.filter(function(e){return e.product.allowedInCurrentChannel()})),!i||!i.length){i=objToArray(e).map(function(e){return{product:e}}).filter(function(e){return"yallo_home_max_fiber"!==e.product.url});var r=i.find(function(e){return"yallo_home_5g"===e.product.url});r&&(r.lock=24),console.warn("No recommendations available. Using defaults",i)}var a=this.getProduct();return a.hasTag("HFC")&&(i=i.filter(function(e){return e.product.hasTag("HFC")})),a.hasTag("fiber")&&(i=i.filter(function(e){return e.product.hasTag("fiber")})),a||(a={url:"yallo_go",productType:"internet"}),i=i.filter(function(e){return"postpaid"===e.product.type&&(e.product.url!==a.url&&("lebara_data"===a.url&&"mobile"===e.product.productType||e.product.productType===a.productType))})},D.prototype.optionConflict=function(e){return e.findExclusivityConflict(this.activeOptions)},D.prototype.getTopupHistory=function(){var e=this;if(!this.gettingTopupHistory){this.gettingTopupHistory=!0;var n={subscriptionId:this.id,fromDate:swissDate().addMonths(-6).toServerJSON(),toDate:swissDate().addDays(1).toServerJSON()};"terminated"!==this.status?t.post("getTopupHistory",n).then(function(t){e.gettingTopupHistory=!1,t&&(e.topupHistory=t.accountPaymentList,e.lastTopup=e.topupHistory[0])}):this.gettingTopupHistory=!1}},D.prototype.getCreditCardIdFromAliasCC=function(e){for(var t in this.creditCards)if(this.creditCards[t].aliasCC==e)return t;return!1},D.prototype.getSubOption=function(){var e;for(var t in this.activeOptions)if(this.activeOptions[t].childOption)return e=this.activeOptions[t],!!e.subDetails[this.id][0][0].willRenew&&(!this.activeOptions[e.childOption.id]&&!this.oneTimeOptions[e.childOption.id]&&e.childOption)},D.prototype.getRateplanChangeStatus=function(){var e=this;return t.post("getRatePlanStatus",{subscriptionId:this.id},2,!0).then(function(t){var o;t&&!t.errorCode&&(null===(o=t.ratePlanChangeDetailList)||void 0===o||o.forEach(function(t){if(!(new Date(t.changeDate).getTime()<(new Date).getTime())&&-1===["2","5"].indexOf(t.statusId)){e.pendingRateplanChange=t;var o=new Date;o.addDays(1),e.rateplanChangeMoreThanOneDayInFuture=differenceInDays(o,new Date(t.changeDate))>=1,t.newRateplan=n.data.rateplans[t.newRatePlanId],t.changeDate=new Date(t.changeDate)}}))})},D.prototype.getOnpStatus=function(){if(this.activeNpFlow){var e=this.activeNpFlow.rejectionCode||void 0,t=this.activeNpFlow.statusVoId||void 0;if("undefined"===e&&(e=void 0),"undefined"===t&&(t=void 0),"0"===e||"13"===e)return"error";if(void 0===e&&("24"===t||"4"===t))return"error";if("16"===t||"22"===t)return"waiting";if("2a"===e||"8"===t)return this.digitalPoaSigned?"waiting":"sign";if("3"===t||"15"===t||"1"===t)return"confirmed";if("1b"===e)return this.digitalPoaSigned?"waiting":"company";if("1"===e||"1a"===e||"2"===e)return this.digitalPoaSigned?"waiting":"person";if("2b"===e||"11"===e)return"499";if(void 0===e)return"waiting";if("7"!==e)return"6"===t?"error":"9"===t?"error":(throwSafe("Unknown rejectionCode activeNpFlow.rejectionCode '".concat(e,"', activeNpFlow.statusVoId '").concat(t,"'"),"34-id"),"unknown")}},D.prototype.checkCanActivateOptions=function(){return!this.pendingRateplanChange||this.rateplanChangeMoreThanOneDayInFuture},D.prototype.calcActiveOrder=function(){var e;return this.activeOrder=null===(e=this.orders)||void 0===e?void 0:e.filter(function(e){return-1!==["Initial","Ready","Error","SENDING_FF_ORDER","FF_ORDER_SENT","FF_ORDER_FULFILLED","ORDER_RETURNED","RETURN_ACCEPTED","DELIVERY_PUT_ONHOLD"].indexOf(e.status)}).sort(function(e,t){return t.orderDate>e.orderDate?1:-1})[0],this.activeOrder},D.prototype.getOrderStatus=function(e,t){return"RETURN_ACCEPTED"===(null===e||void 0===e?void 0:e.status)?null===e||void 0===e?void 0:e.status.toLowerCase():"PICKUP_AT_STORE"===(null===e||void 0===e?void 0:e.shippingMethod)?"pickupAtPosNeeded":!t&&this.ca.findIdsBeingChecked().length?this.ca.waitingForPostIdent()?"idBeingCheckedPostIdent":"idBeingChecked":t||this.ca.findIdsInStatus("approved").length?null===e||void 0===e?void 0:e.status.toLowerCase():this.fastActivation?"idCheckNeededFastActivation":"idCheckNeeded"},D.prototype.getActiveOrderStatus=function(){return this.calcActiveOrder(),this.getOrderStatus(this.activeOrder)},D.prototype.needsFiberAction=function(){var e=this.getFiberStatus();return"waitingForOto"===e||("waiting"===e||("pluginRouter"===e||("waitingForAcceptance"===e||"waitingForBep"===e)))},D.prototype.getFiberStatus=function(){var e=this.installationInfo;return e.hwPlugInDate?"pluggedIn":e.active&&!e.hwPlugInDate?"pluginRouter":"waitCustomerInput"===e.qualifiedBy&&"0"!==e.status?"waitingForOto":["WAITING","CANCELLED_IN_RATOR","SENT","EXCEPTION"].includes(e.statusId)?"waitingForAcceptance":"byAddress"===e.qualifiedBy?"waitingForBep":"waiting"},D.prototype.onpActionNeeded=function(){var e=this.getOnpStatus();return!!e&&("waiting"!==e&&("confirmed"!==e&&(console.log(e),!0)))},D.prototype.getEsimQrCodeLink=function(){return this.simcardInfo.matchingId},D.prototype.getEsimQrCode=function(){var e=this;return loadScript("/assets/other/qrcode.js").then(function(){var t=qrcode(8,"L");return t.addData(e.getEsimQrCodeLink()),t.make(),v(),t.createDataURL(10,0)})},D.prototype.getEsimInfo=function(){var e=this;return this.simcardInfo.matchingId?this.gettingEsimInfo?l.waitForEvent("gotEsimInfo_"+this.id):(this.gettingEsimInfo=!0,t.post("getEsimInfo",{subscriptionId:this.id,matchingId:this.simcardInfo.matchingId}).then(function(t){return t&&(e.esimInfo=t,e.esimInfo.active=["INSTALLED","INSTALLED_ENABLED","INSTALLED_DISABLED"].includes(e.esimInfo.esimStatus),e.esimInfo.needsReset=["DELETE_SUCCEEDED"].includes(e.esimInfo.esimStatus),e.esimInfo.allowReset=e.esimInfo.needsReset&&e.esimInfo.resetCounter<e.esimInfo.totalCounter,e.esimInfo.esimStatus?e.esimInfo.allowScan=["ALLOCATED","RELEASED"].includes(e.esimInfo.esimStatus):e.esimInfo.allowScan=e.esimInfo.qrCodeDownloaded,e.esimInfo.pending=!e.esimInfo.active&&!e.esimInfo.needsReset&&!e.esimInfo.allowScan),e.gettingEsimInfo=!1,c.$emit("gotEsimInfo_"+e.id,e.esimInfo),e.esimInfo})):o.resolve(!1)},D.prototype.resetEsim=function(){var e=this;return t.post("resetEsim",{subscriptionId:this.id,matchingId:this.simcardInfo.matchingId}).then(function(t){return!!t&&e.getEsimInfo()})},D.prototype.validateEsimSwap=function(){return t.post("validateESimSwap",{subscriptionId:this.id,language:b.data.current}).then(function(e){if(e)return e.keyToken})},D.prototype.startEsimSwap=function(e,n,o){var i=this;return t.post("startESimSwap",{subscriptionId:this.id,tmxSessionId:e,keyToken:n,code:o}).then(function(e){if(e)return i.simcardInfo.matchingId=e.matchingId,i.getEsimInfo().then(function(){return console.log(e),e})})},D}]),app.service("missingTranslationHandler",["State","Language",function(e,t){var n=function t(n){!e.languageLoaded||-1!==t.ignores.indexOf(n)||n.indexOf("meta_")>-1||n.indexOf("_pagetitle")>-1||n.indexOf("input_error")>-1||n.indexOf("no_report_")};return n.ignores=[],n}]),app.factory("User",["Network","$q",function(e,t){function n(){var t=i.shift();return r=!0,e.post("updateUserInfo",t.params).then(function(e){return t.deferred.resolve(e)}).catch(function(e){return t.deferred.reject(e)}).then(function(e){return i.length?n():r=!1,e})}var o=function(e){this.id=e.id,this.setData(e)};o.prototype.setData=function(e){this.title=e.personalDetails.title,this.fixTitle(),this.username=e.username,this.firstName=sanitizeRfeString(e.personalDetails.firstName),this.lastName=sanitizeRfeString(e.personalDetails.lastName),this.emailAddress=e.personalDetails.emailAddress,this.contactNumber=e.contactNumber,this.emailValidated=e.personalDetails.emailValidated,this.dob=stringToDateObj(e.personalDetails.dob),this.age=Math.floor((Date.now()-objToDate(this.dob).getTime())/1e3/60/60/24/365),this.preferredLang=e.personalDetails.preferredLang.toLowerCase(),this.idDetails=e.personalDetails.idDetails?e.personalDetails.idDetails:{},this.idDetails.idNumber&&(this.idDetails.idNumber=sanitizeRfeString(this.idDetails.idNumber)),this.address=e.address?e.address:{};for(var t in this.address)this.address[t]=sanitizeRfeString(this.address[t])},o.prototype.fixTitle=function(){if(!(this.title.indexOf("<")<0))return this.title.indexOf("Signora")>-1?this.title="Ms":this.title.indexOf("Signor")>-1?this.title="Mr":void 0};var i=[],r=!1;return o.prototype.updateInfo=function(e){var o=t.defer();return i.push({deferred:o,params:_objectSpread(_objectSpread({},e),{},{userId:this.id})}),r||n(),o.promise},o}]);var changeAspectRatio=function(){return function(e,t,n){var o=t/n>e.width/e.height,i=e.ownerDocument.createElement("canvas"),r=i.getContext("2d"),a=e.getContext("2d").getImageData(0,0,e.width,e.height);return i.width=o?e.height*(t/n):e.width,i.height=o?e.height:e.width*(n/t),r.putImageData(a,(i.width-e.width)/2,(i.height-e.height)/2),i}}();Date.prototype.addDays=function(e){return dayjs(this).add(e,"day").toDate()},Date.prototype.addHours=function(e){return dayjs(this).add(e,"hour").toDate()},Date.prototype.dayStart=function(){var e=new Date(this);return e.setHours(0,0,0,0),e},Date.prototype.addMonths=function(e){return addMonths(this,e)},window.utcDate=utcDate,Date.prototype.toServerJSON=function(){return isValidDate(this)||throwSafe("Failed to convert a non-date to server-JSON."),dayjs(this).format("YYYY-MM-DDTHH:mm:ss[Z]")},window.timeTravelTo=timeTravelTo,lookForPretendDate(),window.isTest&&(window.objToDate=objToDate,window.addMonths=addMonths,window.swissDate=swissDate,window.dateToObj=dateToObj,window.compareDatesIgnoreHours=compareDatesIgnoreHours,window.dateInList=dateInList,window.differenceInDays=differenceInDays,window.differenceInMonths=differenceInMonths,window.stringToDateObj=stringToDateObj,window.yolStringToDate=yolStringToDate,window.dateToYolString=dateToYolString,window.tomorrow=tomorrow,window.daysInMonth=daysInMonth,window.dateIsInOfficeHours=dateIsInOfficeHours,window.isWeekDay=isWeekDay,window.swissDateOffset=swissDateOffset,window.isDayBefore=isDayBefore,window.isDSTFallback=isDSTFallback,window.roundToLastOfMonth=roundToLastOfMonth);var RfeRegex='[^><=:%)^(\\\\"]+',RfeForbiddenCharacters='^><=:%)^("',RfeAllowedCharacters="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ĂăĀāĄąÅåÃãĆćČčÇçĈĉĊċĎďÐðĐđĔĕĚěËëĖėĒēĘęĞğĢģĜĝĠġĤĥĦħĬĭÏïİĪīĮįĨĩıĴĵĶķĹĺĽľĻļĿŀŁłŃńŇňŅņÑñŊŋŉŎŏŐőŌōØøÕõŔŕŘřŖŗŚśŠšŞşŜŝẞßŤťŢţŦŧÞþŬŭŰűŪūŲųŮůŨũŴŵÝýŶŷŸÿŹźŽžŻżÆæĲĳ&'*+,-./_`‚„‘’“”–—ÀÁÂÄÈÉÊÌÍÎÒÓÔÖÙÚÛÜàáâäèéêìíîòóôöùúûü]*",numberPattern=/\d+[a-zA-Z]*/g;String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.capitalizeFirstLetterOnEachWord=function(){for(var e=this.split(" "),t=[],n=0;n<e.length;n++)t.push(e[n].charAt(0).toUpperCase()+e[n].slice(1));return t.join(" ")},String.prototype.replaceAll=function(e,t){return this.split(e).join(t)};var forEach=function(e,t,n){if("[object Object]"===Object.prototype.toString.call(e))for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(n,e[o],o,e);else for(var i=0,r=e.length;i<r;i++)t.call(n,e[i],i,e)};String.prototype.paddTo=function(e){return paddTo(this,e)},Object.first=function(e){for(var t in e)return e[t]},Object.reverse=function(e){for(var t={},n=objToArray(e,!0),o=n.length-1;o>=0;o--)t[n[o].objKey]=n[o];return t},Object.size=function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n};var userAgent=navigator.userAgent||navigator.vendor||window.opera,isAndroid=/android/i.test(userAgent),isIOS=/iPad|iPhone|iPod/.test(userAgent)&&!window.MSStream||userAgent.indexOf("ipad")>-1||userAgent.toLowerCase().indexOf("macintosh")>-1&&"ontouchend"in document,IsSymbianIos=/Nokia|Benq|Arima|Lenovo|Motorola|Panasonic|Samsung|Sendo|Sharp|Siemens|Sony Ericsson|LG/.test(userAgent);if(isIOS)var iosVersion=iOSVersion(),isIOS8OrMore=iosVersion&&Math.floor(iosVersion)>=8;var isSafari=/constructor/i.test(window.HTMLElement)||function(e){return"[object SafariRemoteNotification]"===e.toString()}(!window.safari||safari.pushNotification),webkit=!!userAgent.match(/WebKit/i),isIOSSafari=isIOS&&webkit&&!userAgent.match(/CriOS/i),isIE=!!document.documentMode,isEdge=!isIE&&!!window.StyleMedia,isChrome=!!window.chrome&&!!window.chrome.webstore;Array.getIndex=function(e,t,n){for(var o in e)if(e[o][t]==n)return 1*o};var loadedScripts={};window.isTest&&(window.paddTo=paddTo);var lineCheckResolveProduct=function(e){var t,n,o,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=(getUsedFiberLayer(e.fiber),e.fiber),s=e.hfc;null===(t=e["4G"])||void 0===t||null===(n=t.indoor)||void 0===n||n.maxBandwidthDown,null===(o=e["5G"])||void 0===o||null===(i=o.indoor)||void 0===i||i.maxBandwidthDown;switch(r){case"fiber":return null!==a&&void 0!==a&&a.available?"fiber":null!==s&&void 0!==s&&s.available?"HFC":"MBB";case"HFC":return null!==s&&void 0!==s&&s.available?"HFC":null!==a&&void 0!==a&&a.available?"fiber":"MBB";case null:return null!==a&&void 0!==a&&a.available&&"byOTOId"==a.qualifiedBy?"fiber":null!==s&&void 0!==s&&s.available?"HFC":null!==a&&void 0!==a&&a.available?"fiber":"HFC"}},getUsedFiberLayer=function(e){if(!e)return{};var t=getFiberLineCheckLayer(e);if(null===t)return{};var n=e[t];return{layerUsed:t,otoIdState:n.otoIdState,tspId:n.tspId,accessType:n.accessType,status:n.status}},getFiberLineCheckLayer=function(e){var t=!!e.l1,n=!!e.l3,o=t&&"OTOREADY"===e.l1.otoIdState,i=n&&"OTOREADY"===e.l3.otoIdState;return!t&&n?"l3":!o&&i?"l3":t?"l1":null};"undefined"!=typeof process&&"test"===(null===(_process$env=process.env)||void 0===_process$env?void 0:_process$env.NODE_ENV)&&(window.lineCheckResolveProduct=lineCheckResolveProduct,window.getUsedFiberLayer=getUsedFiberLayer);var processBundle=function(e,t,n,o,i,r){if(!(e.bundleName.indexOf("chf")>-1)){var a=e.initialBalance,s=e.remainingBalance,c=!1,d=!1,u=t?"option_"+t.url+"_title":"bundle_"+urlify(e.bundleName)+"_title";a||s||!(e.bundleName.indexOf("unlimited")>-1||e.bundleName.indexOf("unlimitiert")>-1||e.bundleName.indexOf("illimité")>-1||e.bundleName.indexOf("illimitato")>-1)||(d=!0,c=e.bundleName.indexOf("throttled")>-1),a>=40*Math.pow(1024,3)&&(d=!0),"MIN"===e.type&&a>48e4&&(d=!0);var l=swissDate(),p=new Date(l.getFullYear(),l.getMonth(),daysInMonth(l.getMonth(),l.getFullYear())+1);t&&(p=void 0);var g=100-100/a*s,f={type:"bundle",bundle:e,initial:a,remaining:s,isThrottled:c,isUnlimited:d,isOption:!!t,endDate:e.endDate||p,name:u,percent:g,option:t};if(e.circles)e.circles.forEach(function(t){t&&n[t]&&(o&&r&&e.countries&&e.countries.length&&e.countries!=["200903041337530279"]&&!e.countries.includes(r)||n[t].items.push(f))});else{var h,m=e.countries?e.countries.filter(function(e){return"200903041337530279"!==e}):[];if(e.countries&&0!==m.length&&e.countries.length){if(!o)return;if(r&&!e.countries.includes(r))return;"BYTES"===e.type?h=n.roamingData:"MIN"===e.type?h=n.roamingMin:console.log("ignoring bundle",e)}else{if(o)return;if("BYTES"===e.type)h=n.nationalData;else if("MIN"===e.type){var v=urlify(e.bundleName);h=v.indexOf("international")>-1||v.indexOf("europe")>-1?n.internationalMin:n.nationalMin}else console.log("ignoring bundle",e)}if(!h)return;if(!i)return h.items.push(f);if(!h.rateplanBundle)return h.items.push(f);h.rateplanBundle.initial+=f.initial,h.rateplanBundle.remaining+=f.remaining,h.rateplanBundle.percent=100-100/h.rateplanBundle.initial*h.rateplanBundle.remaining,f.isUnlimited&&(h.rateplanBundle.isUnlimited||(h.rateplanBundle.isUnlimited=!0,h.rateplanBundle.isThrottled=f.isThrottled))}}},trimCanvas=function(){function e(e,t,n){for(var o=0;o<t;++o)if(0!==e.data[n*t*4+4*o+3])return!1;return!0}function t(e,t,n,o,i){for(var r=o;r<i;++r)if(0!==e.data[r*t*4+4*n+3])return!1;return!0}return function(n){for(var o=n.getContext("2d"),i=n.width,r=o.getImageData(0,0,n.width,n.height),a=0,s=r.height,c=0,d=r.width;a<s&&e(r,i,a);)++a;for(;s-1>a&&e(r,i,s-1);)--s;for(;c<d&&t(r,i,c,a,s);)++c;for(;d-1>c&&t(r,i,d-1,a,s);)--d;var u=o.getImageData(c,a,d-c,s-a),l=n.ownerDocument.createElement("canvas"),p=l.getContext("2d");return l.width=u.width,l.height=u.height,p.putImageData(u,0,0),l}}();app.filter("activePopups",["$rootScope",function(e){return function(t){var n=[];for(var o in t)t[o].active&&n.push(t[o]);return e.activePopup=!!n.length,n}}]),app.filter("address",function(){return function(e){if(e)return e.streetName+" "+e.streetNumber+", "+e.postCode+" "+e.city}}),app.filter("allowedIdTypes",function(){return function(e,t){t||(t=[]);var n={};if(!e)return[];var o=Object.keys(e).map(function(t){return e[t].id=t,e[t].sort="201411201909407895"===t?2:"201411201909407894"===t?1:"202001091121324242"===t?-1:0,e[t]});for(var i in o)t.indexOf(o[i].id)>-1&&(n[i]=o[i]);return n}}),app.filter("bundleFilter",["CommonData",function(e){return function(t){var n=[];for(var o in t)e.extras&&e.extras.hiddenBundles&&e.extras.hiddenBundles.indexOf(urlify(t[o].bundleName))<0&&n.push(t[o]);return n}}]),app.filter("buyableFromSelfcare",["CommonData",function(e){return function(t,n){var o=[];for(var i in t)if(t[i].buyableFromSelfcare()&&(n||!t[i].requiredOptions.length)&&(!n||!t[i].requiredOptions.length||t[i].requiredOptions.find(function(e){return n.activeOptions[e]})||t[i].requiredOptions.indexOf("1179")>-1&&"lebara_data_unlimited"===n.rateplan.url)&&(!n||!(t[i].notCompatibleWith.find(function(e){return n.activeOptions[e]})||-1!==t[i].notCompatibleWith.indexOf("1179")&&"lebara_data_unlimited"===n.rateplan.url))&&(window.showHiddenOptions||!e.extras||!e.extras.hideOption||-1===e.extras.hideOption.indexOf(e.channel+"_"+t[i].id)))for(var r in t[i].channels)if(t[i].channels[r].buyableFromSelfcare){o.push(t[i]);break}return o}}]),app.filter("buyableOnSignup",["CommonData",function(e){return function(t){var n=[];for(var o in t)if(t[o].channels[e.channel]&&t[o].channels[e.channel].buyableOnSignup){if(t[o].requiredOptions.length)continue;n.push(t[o])}return n}}]),app.filter("bytes",["$translate",function(e){return function(t,n,o,i,r){for(var a=t,s=["kb","mb","gb","tb"],c=0,d=0;d<s.length&&(a/=1024,c=d,!(a<1024));d++);return n&&(n.bytesTypeIndex&&c<n.bytesTypeIndex?(c=n.bytesTypeIndex,a=t/Math.pow(1024,c+1)):n.bytesTypeIndex=c),a=Math.floor(100*a)/100,i&&(a=Math.round(a)),r&&(a=a.toFixed(r)),a+(o?"":" "+e.instant(s[c]))}}]),app.filter("channelFilter",["CommonData",function(e){return function(t,n,o,i){var r=[];if(i||(i=e.channel),o)return t;for(var a in t)if(n){if(!t[a][n].channels.length)continue;t[a][n].channels.indexOf(i)>-1&&r.push(t[a])}else{if(!t[a].channels.length)continue;t[a].channels.indexOf(i)>-1&&r.push(t[a])}return r}}]),app.filter("commonData",["CommonData","Language",function(e,t){return function(n,o){if(e[o]&&e[o][n])return e[o][n][t.data.current]}}]),app.filter("countryLookup",["Language","Countries",function(e,t){return function(n){var o;return null===(o=t.countriesObj[n])||void 0===o?void 0:o[e.data.current]}}]),app.filter("countrySort",["Language","Countries",function(e,t){return function(n){if(!n)return[];var o=t.countriesObj,i=n.slice();return i.sort(function(t,n){var i=o[t.id][e.data.current],r=o[n.id][e.data.current];return i.localeCompare(r)}),i}}]),app.filter("creditCard",function(){return function(e){return"•••• "+e.substr(-4)}}),app.filter("creditCards",function(){return function(e,t){var n={};e:for(var o in e)if(t||0==e[o].status){for(var i in n)if(n[i].aliasCC==e[o].aliasCC)continue e;n[o]=e[o]}return n}}),app.filter("customCurrency",function(){return function(e,t,n){if(!e)return t?"0.–":"CHF 0.–";var o=1*e,i="";return t||(i+="CHF "),o%1!=0?o=o.toFixed(2):o+=".–",i+=o,n&&(i=i.replace(".–","")),i}}),app.filter("deviceCapacity",["$translate",function(e){return function(t){return t>=1e3?t/1e3+" "+e.instant("tb"):t+" "+e.instant("gb")}}]),app.filter("filterDevices",["CommonData",function(e){return function(t,n,o){var i=[];n||(n=e.channel);for(var r in t)t[r].allowedInChannel(n,o)&&i.push(t[r]);return i}}]),app.filter("filterOption",function(){return function(e,t,n){var o=[];for(var i in e)(!n||e[i].initialBalance||e[i].remainingBalance)&&(e[i].initialBalance&&!e[i].remainingBalance||o.push(e[i]));return o.length||t||o.push(e[e.length-1]),o}}),app.filter("subscriptionFilter",function(){return function(e,t,n){Array.isArray(t)||(t=[t]);var o=[];for(var i in e)t.indexOf(e[i].status)>-1&&(n&&!e[i].canDoSimSwap()||o.push(e[i]));return o}}),app.filter("floor",function(){return function(e){return Math.floor(e)}}),app.filter("hideProducts",["CommonData",function(e){return function(t,n){var o,i=[],r=_createForOfIteratorHelper(t);try{e:for(r.s();!(o=r.n()).done;){var a=o.value;if((!n||!a.isHomeProduct)&&("ol"!==e.channel||!a.hiddenInEshop)){for(var s in a.channels)if(e.ignoredChannels.indexOf(a.channels[s])<0){i.push(a);continue e}a.channels.indexOf(e.channel)>-1&&i.push(a)}}}catch(e){r.e(e)}finally{r.f()}return i}}]),app.filter("highlightedDevices",function(){return function(e,t,n){return n?e.filter(function(e){return e.variations.find(function(e){return-1!==t.indexOf(e.id)})}):e}}),app.filter("minSec",function(){return function(e){return Math.floor(e/60)+":"+("0"+Math.ceil(e%60)).slice(-2)}}),app.filter("nonRequiredOptions",["CommonData",function(e){return function(e){var t=[];for(var n in e)e[n].requiredOptions.length||t.push(e[n]);return t}}]),app.filter("inString",function(){return function(e,t,n){if(!n||!t)return e;var o=[],i="!"==n[0];for(var r in e)i?-1!==n.indexOf(e[r][t])&&o.push(e[r]):-1===n.indexOf(e[r][t])&&o.push(e[r]);return o}}),app.filter("objSize",function(){return function(e,t){t||(t=0);var n,o=0;for(n in e)if(e.hasOwnProperty(n)&&(o+=1),o>=t)return!0;return!1}}),app.filter("objToArray",function(){return function(e){return e?Object.keys(e).map(function(t){return e[t].objectKey=t,e[t]}):[]}}),app.filter("objToDate",function(){return objToDate}),app.filter("onlyCountry",function(){return function(e,t,n){if(!t)return e;var o={};for(var i in e)if(e[i].subDetails){if(Array.isArray(e[i].subDetails)){for(var r in e[i].subDetails)if(e[i].subDetails[r].countries.indexOf(t)>-1){o[i]=e[i];break}}else for(var r in e[i].subDetails[n][0])if(e[i].subDetails[n][0][r].countries.indexOf(t)>-1){o[i]=e[i];break}}else e[i].countries.indexOf(t)>-1&&(o[i]=e[i]);return o}}),app.filter("optionsWithParent",function(){return function(e,t){var n=[];for(var o in e)if(Object.size(e[o].parentOptions))for(var i in e[o].parentOptions)e[o].parentOptions[i].subDetails[t.id]&&n.push(e[o]);else n.push(e[o]);return n}}),app.filter("paddTo",function(){return function(e,t){return e.toString().paddTo(t)}}),app.filter("phoneNumber",function(){return function(e){var t=[];return e.map(function(e){var n;return!(null!==(n=e.msisdn.match(/[A-Z]/g))&&void 0!==n&&n.length)>0&&t.push(e)}),t}}),app.filter("productFilter",function(){return function(e,t,n,o,i,r,a,s,c){var d=[];for(var u in e){var l=!1;if(e[u]&&((c||!e[u].hiddenFromSheets)&&("all"==t||e[u].type==t))){if(n){if(!e[u].channels.length)continue;if(i){if(e[u].channels.indexOf(n)>-1)continue}else if(e[u].channels.indexOf(n)<0)continue}for(var p in o)if(o[p]&&!e[u].hasTag(o[p])){l=!0;break}e[u].hasTag("non-default")||l||d.push(e[u])}}return r||(d=d.filter(function(e){return!0})),Array.isArray(e)&&d.sort(function(t,n){return e.indexOf(t)>e.indexOf(n)?1:-1}),d}}),app.filter("rateplanFilter",function(){return function(e,t){if(!e)return[];for(var n=objToArray(e),o=0;o<n.length;o++)"production"!=window.environment||n[o].visible?t&&n[o].type==t?(n.splice(o,1),o--):n.find(function(e){return e.id!=n[o].id&&e.url==n[o].url&&e.type==n[o].type})&&(n.splice(o,1),o--):(n.splice(o,1),o--);return n=n.sort(function(e,t){return e.name.localeCompare(t.name)})}}),app.filter("rates",["Language",function(e){return function(t,n){return t?Object.keys(t).map(function(o){return t[o].key=o,t[o].key&&n[o]?t[o].name=n[o][e.data.current]:t[o].name="",t[o]}).sort(function(e,t){return e.name.localeCompare(t.name)}):[]}}]),app.filter("recurringTopups",function(){return function(e,t){if(!t)return e;var n={};for(var o in e)e[o].aliasCC==t&&(n[o]=e[o]);return n}}),app.filter("removeSpaces",function(){return function(e){return e.split(" ").join("")}}),app.filter("replaceText",function(){return function(e,t,n){return e?e.split(t).join(n):""}}),app.filter("reverse",function(){return function(e){return e?e.slice().reverse():[]}}),app.filter("roamingOptions",function(){return function(e,t){if(!t)return e;var n=[];for(var o in e)e[o].countries.indexOf(t)>-1&&n.push(e[o]);return n}}),app.filter("slice",function(){return function(e,t,n){if(e)return n?e.slice(t,n):e.slice(t)}}),app.filter("subscriptionType",function(){return function(e,t){return e.filter(function(e){return"fiber"===t?e.rateplan.firstProduct().hasTag("fiber"):!e.rateplan.firstProduct().hasTag("fiber")})}}),app.filter("translationCheck",["$translate",function(e){return function(t,n,o){return n&&o&&t?t.filter(function(t){var i=n.split("*KEY*").join(t[o]);return i!==e.instant(i)}):t||[]}}]),app.filter("encodeUri",function(){return function(e){return encodeURI(e)}}),app.filter("urlify",function(){return function(e){return e?("number"==typeof e&&(e=e.toString()),e.replaceAll(" ","_").replaceAll(".","").replaceAll("!","").toLowerCase().split("_(")[0].split("(")[0]):e}}),app.filter("usageDaysFilter",function(){return function(e){return e.filter(function(e){return e.items.length})}}),app.filter("visibleDevicesOnly",function(){return function(e){return e.filter(function(e){return e.showOnDevicesPage})}}),app.service("ResolveAllowed",["$q","State","$route",function(e,t,n){this.resolve=function(){if("pos"==n.current.params.logintype)return t.checkAgentLoggedIn().then(function(t){return!!t||e.reject("posNotLoggedin")})}}]),app.service("ResolveAutoOffer",["$location","$q","$route",function(e,t,n){this.resolve=function(o){if(o)return o.returnWhenRecommendationsLoaded().then(function(i){var r=n.current.params.type.split("_").map(function(e,t){return 0===t?e:e[0].toUpperCase()+e.substring(1)}).join(""),a=o.recommendations.deals.find(function(e){return e.type===r});if(!a)return t.reject("checkoutConfigNotValid");var s="change-postpaid";a.product.url===o.getProduct().url&&(s="addPromo"===r||"endOfContract"===r?"add-promo":"extend-postpaid");var c="/eshop/".concat(s,"/checkout/").concat(a.product.url),d={subscription:o.id,skip:"true"};a.promotionCode&&(d.promotions=a.promotionCode),e.path(c).search(d).replace()})}}]),app.service("ResolveCmsPage",["$q","$location","Cms","$rootScope","State","CustomerAccount","Storage","Redirect","FeatureFlags",function(e,t,n,o,i,r,a,s,c){this.redirectTo=function(e){var n=e.view_count_from,o=e.view_count_to;if(null!==n||null!==o){var i=t.path().substring(4),r="redirect_counter : "+i+" | "+e.url+" | "+e.user_type+" | "+e.customer_type,c=a.get(r,2160)||0;if(c+=1,n&&c<n)return!1;if(o&&c>o)return!1;a.set(r,c)}return s.redirect(e.url),!0},this.checkLoggedInAndSubId=function(t){return t?i.checkCustomerLoggedIn().then(function(e){if(!e)return!1;var n=r.subscriptions[t];return!!n&&n.returnWhenRecommendationsLoaded().then(function(){return!0})}):e.resolve(!0)},this.resolve=function(s,d){var u=this;d||(d=t.path().substring(4));var l=d.split("/").filter(function(e){return"pos"!==e})[1];return d=d.split("/").find(function(e){return"pos"!==e}),this.checkLoggedInAndSubId(l).then(function(t){return t?n.getByUid("landing_page",d.toLowerCase(),s).then(function(t){if(!t&&s)return e.reject("pageReallyNotFound");if(!t)return u.resolve(!0);if(o.hidePageFromSearch="Hide in search"===t.data.hidden_from_search,t.data.featureflag_only&&!c.get(t.data.featureflag_only))return e.reject("pageNotFound");var n=t.data.body.filter(function(e){return"redirect"===e.slice_type||"redirect_"===e.slice_type}).map(function(e){return e.primary});return(n.filter(function(e){return"All"!==e.user_type}).length?i.checkCustomerLoggedInNoCreditCheck():e.resolve(!1)).then(function(e){var i,s=r.getSubscriptionsByType("prepaid").length,c=r.getSubscriptionsByType("postpaid").length,d=a.get("everLoggedIn",2160),l=d&&d.prepaid,p=d&&d.postpaid,g=_createForOfIteratorHelper(n);try{for(g.s();!(i=g.n()).done;){var f=i.value;if(f.url&&("Only first page load"!==f.only_on_first_load||!o.history.length)){if("All"===f.user_type&&u.redirectTo(f))return;if("Not logged in"===f.user_type&&!e&&u.redirectTo(f))return;if("Was logged in at some point in the last 90 days (not logged in now)"===f.user_type&&!e&&d){if("Prepaid only (no postpaid)"===f.customer_type&&!p&&u.redirectTo(f))return;if("Postpaid only (no prepaid)"===f.customer_type&&!l&&u.redirectTo(f))return;if("Prepaid"===f.customer_type&&l&&u.redirectTo(f))return;if("Postpaid"===f.customer_type&&p&&u.redirectTo(f))return;if("All"===f.customer_type&&u.redirectTo(f))return}if("Logged in now or at some point in the last 90 days"===f.user_type&&(e||d)){if("Prepaid only (no postpaid)"===f.customer_type&&!c&&!p&&u.redirectTo(f))return
;if("Postpaid only (no prepaid)"===f.customer_type&&!s&&!l&&u.redirectTo(f))return;if("Prepaid"===f.customer_type&&(s||l)&&u.redirectTo(f))return;if("Postpaid"===f.customer_type&&(c||p)&&u.redirectTo(f))return;if("All"===f.customer_type&&u.redirectTo(f))return}if("Logged in"===f.user_type&&e){if("Prepaid only (no postpaid)"===f.customer_type&&!c&&u.redirectTo(f))return;if("Postpaid only (no prepaid)"===f.customer_type&&!s&&u.redirectTo(f))return;if("Prepaid"===f.customer_type&&s&&u.redirectTo(f))return;if("Postpaid"===f.customer_type&&c&&u.redirectTo(f))return;if("All"===f.customer_type&&u.redirectTo(f))return;if("Postpaid voice"===f.customer_type&&r.getSubscriptionsByType("postpaid",!0).filter(function(e){return"mobile"===e.getType()}).length&&u.redirectTo(f))return;if("No postpaid voice"===f.customer_type&&!r.getSubscriptionsByType("postpaid",!0).filter(function(e){return"mobile"===e.getType()}).length&&u.redirectTo(f))return}}}}catch(e){g.e(e)}finally{g.f()}return t})}):e.reject("pageNotFound")})}}]),app.service("ResolveConfigure",["Products","$location","Promotions","SavingsOptions","$q","$timeout","Network","CustomerAccount","$route","Notifications","$rootScope","State","AgentAccount","Authentication","$cookies","FeatureFlags","Language","ErrorReporting",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g,f,h,m,v){this.getSubIfNeeded=function(e){var t=(null===e||void 0===e?void 0:e.subscription)||(null===e||void 0===e?void 0:e.preToPostSubscription);return t?t.setActive().then(function(){return e}):i.resolve(e)},this.refreshAccountDataIfNeeded=function(){return l.customerLoggedIn?l.agentLoggedIn?p.updateExistingCustomer().then(function(){if(c.current.params.subscription&&s.subscriptions[c.current.params.subscription])return s.subscriptions[c.current.params.subscription].setActive()}):s.refreshData(0,!0).then(function(){if(c.current.params.subscription&&s.subscriptions[c.current.params.subscription])return s.subscriptions[c.current.params.subscription].setActive()}):l.customerLoggingIn?i.resolve():l.agentLoggedIn?a.post("removeCustomerData",{},1,!0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,!1).then(function(){return g.logoutSelfcare()}):a.post("logout",{},1,!0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,!0).then(function(){return f.remove("posLoginDetails"),g.logoutPos()})},this.getSearch=function(){var e,n=t.search();return{productUrl:c.current.params.productUrl,lockinLength:parseInt(n.ll)||null,deviceId:n.devices,optionUrls:(null===(e=n.options)||void 0===e?void 0:e.split("*"))||[],promoCode:n.promotions,subscriptionId:n.subscription,preToPostSubscriptionId:n.preToPostSubscription,from:n.from||"na"}},this.assertNoDoubleTV=function(e){return"tv"===Object.first(e.products).product.productType&&s.hasTVSubscription()?i.reject("checkoutDoubleTV"):e},this.checkLineCheck=function(e){var t,n;if(!e)return e;var o=Object.first(e.products);if(!(null!==o&&void 0!==o&&null!==(t=o.config)&&void 0!==t&&t.hasTag("fiber")||null!==o&&void 0!==o&&null!==(n=o.config)&&void 0!==n&&n.hasTag("HFC")))return e;var r=o.config.getType();return("product-item"!==e.from||u.globalLineCheckResults)&&u.globalLineCheckResults?(e.fiberLineCheck=angular.copy(u.globalLineCheckResults.fiber),e.hfcLineCheck=angular.copy(u.globalLineCheckResults.hfc),e):i.reject("noLineCheck"+r)},this.doCreditCheckIfNeeded=function(){return l.customerLoggedIn?s.doCreditCheck(!1,1):i.resolve()},this.validateRateplanChange=function(e){if(!e.subscription)return-1!==c.current.params.ordertype.indexOf("change-postpaid")&&(d.add("error","bad"),t.path("/".concat(m.data.current,"/")+(l.agentLoggedIn?"pos":"account")),v.reportThrowSafe("Was performing rateplan change but subscription is missing somehow. This should not happen. ",239492341)),i.resolve(e);var n=Object.first(e.products);return e.subscription.validateRateplanChange(n.config,n.promotion,new Date).then(function(o){if(!o||o.errorCode)throw"cantExtendSubscription_"+o.errorCode;if(e.rateplanChangeData=o,!0!==o){var i;if(e.rateplanChangeData.ratePlanChangeFeeTypeOrig=o.ratePlanChangeFeeType,e.rateplanChangeData.waiveFee=!1,null!==(i=e.subscription.recommendations)&&void 0!==i&&i.rateplanChangeProducts){var r=e.subscription.recommendations.rateplanChangeProducts.find(function(e){return e.product===n.product.url});null!==r&&void 0!==r&&r.waiveFee&&(e.rateplanChangeData.waiveFee=!0)}"42"==t.search().accountSub&&(e.rateplanChangeData.waiveFee=!0),l.agentLoggedIn&&!l.isTelesales&&(e.rateplanChangeData.waiveFee=!0),e.rateplanChangeData.rateplanChangeFeeOrig=e.rateplanChangeData.rateplanChangeFee,e.rateplanChangeData.waiveFee&&(e.rateplanChangeData.rateplanChangeFee=0)}return e})},this.resolve=function(){var t=this;return n.returnWhenPromosLoaded().then(l.returnWhenBootloaderDone).then(l.returnWhenDeviceDataLoaded).then(l.checkCustomerLoggedInNoCreditCheck).then(function(){return t.refreshAccountDataIfNeeded()}).then(function(){return t.doCreditCheckIfNeeded()}).then(function(){var o=t.getSearch();if("yallo_home_max_fiber"===o.productUrl&&l.customerLoggedIn&&s.getSubscriptionsByType("postpaid",!0).filter(function(e){return"mobile"===e.getType()}).length){if(!e.findProductByName("yallo_home_max_fiber").getValidPromotions(void 0,!0).find(function(e){return e.recurringDiscount>30})){var i=n.findPromotionByCode(Date.now()<16430976e5?"yallohomemaxfiber4012024with":"xxxxx");null!==i&&void 0!==i&&i.allowedInCurrentChannel()&&(o.promoCode=promoCode)}}if("yallo_premium_tv"===o.productUrl)if(s.applyForFreePremiumTV())o.promoCode="yallopremiumtv_chf20_120months";else if("yallopremiumtv_chf20_120months"===o.promoCode)throw"checkoutConfigNotValid";e.resetDevicePricing();var r=t.createConfig(o),a=t.getConfigError(r,o);if(a)throw console.warn(a),"checkoutConfigNotValid";return console.log(r),r}).then(this.assertNoDoubleTV).then(this.getSubIfNeeded).then(this.validateRateplanChange).then(this.checkLineCheck)},this.getConfigError=function(e,t){var n;if(!e)return"Config could not be created";var o=Object.first(e.products);if(!o.config)return"No config";if(!o.config.allowedInCurrentChannel()&&!e.subscription)return"Not allowed in channel";for(var i in o.options)if(!o.config.rateplan.options[o.options[i].id])return"Option invalid";if(t.promoCode&&!o.promotion)return"Promotion code not valid";if(t.deviceId&&(null===(n=o.device)||void 0===n?void 0:n.id)!==t.deviceId)return"Device ID not valid";if(e.subscription){if(!e.subscription.canExtend(o.config))return e.subscription.getCantExtendReason(o.config)||"generic";if(e.device&&!subscription.canAddDevice().result)return"Cant add device"}return e.preToPostSubscription&&!e.preToPostSubscription.canDoPreToPost()?e.preToPostSubscription.cantDoPrePostReason()||"generic":void 0},this.createConfig=function(i){var r,a={products:{},from:i.from,preCheckoutPath:u.previousPath,preCheckoutSearch:u.previousSearch};i.subscriptionId&&(a.subscription="auto"===i.subscriptionId?s.getSubscriptionsByType("postpaid",!0)[0]:s.subscriptions[i.subscriptionId]),i.preToPostSubscriptionId&&(a.preToPostSubscription="auto"===i.preToPostSubscriptionId?s.getSubscriptionsByType("prepaid",!0)[0]:s.subscriptions[i.preToPostSubscriptionId]);var c=e.findProductByName("current"===i.productUrl?a.subscription.getProduct().url:i.productUrl);if(c){var d=parseInt(i.lockinLength)||null,l=i.promoCode?n.findPromotionByCode(i.promoCode):null;l&&n.enablePromotionForChannel(l);var p=i.deviceId?e.data.devices[i.deviceId]:null,g=c.findConfigsFromOptions(d,p,l,a.subscription,!0)[0];if(g){var f=g.neededToApply();f&&(p=f);var h=i.optionUrls.reduce(function(e,t){var n=o.findOptionByName(t);return e[n.id]=n,e},{});return a.products[i.productUrl]={product:c,config:g,device:p,promotion:l,options:h,subscriptionDetails:{prePost:{},newMsisdn:{}},dontPreselectHandsetInsurance:"true"===t.search().dphi,ignoreDefaultPromotion:!!i.subscription||!!t.search().np,highlightedDevices:(null===(r=t.search().sd)||void 0===r?void 0:r.split(",").filter(function(e){return e}))||[]},a}}}}]),app.service("ResolveConfirmation",["Checkout","Storage",function(e,t){this.resolve=function(){return e.lastOrder&&t.set("order",e.lastOrder,!0),e.lastOrder||t.get("order")}}]),app.service("ResolveDeviceData",["State",function(e){this.resolve=function(){return e.returnWhenDeviceDataLoaded()}}]),app.service("ResolveDevice",["Products","$route","$q","State",function(e,t,n,o){this.resolve=function(){return o.returnWhenBootloaderDone().then(function(){return o.returnWhenDeviceDataLoaded().then(function(){var o=e.data.deviceGroups.find(function(e){return urlify(e.name)===t.current.params.deviceName});return o||n.reject("deviceNotFound")})})}}]),app.service("ResolveFeatureFlag",["$q","FeatureFlags",function(e,t){this.resolve=function(n){return!!t.get(n)||e.reject("pageNotFound")}}]),app.service("ResolveFetchImages",["CheckoutCache","Network","$location","Storage","State",function(e,t,n,o,i){this.resolve=function(){return e.get().then(function(){var e=o.get("idCheckAccessCodeData");return null!==e&&void 0!==e&&e.accessCode?t.post("fetchIdImages",{accessCode:e.accessCode}).then(function(e){var t=o.get("idCheckReturnUrl");t.search.fetchImages=!0,o.set("fetchedImagesData",e),n.path(t.path).search(t.search)}):n.path(i.agentLoggedIn||i.agentLoggingIn?"/pos":"")})}}]),app.service("ResolveLoggedin",["$q","State",function(e,t){this.resolve=function(n){return t.checkCustomerLoggedIn().then(function(t){return!!t||e.reject("accountNotLoggedin".concat(n||""))})}}]),app.service("ResolveNotLoggedin",["$q","State",function(e,t){this.resolve=function(n){return t.checkCustomerLoggedIn().then(function(t){return!t||e.reject("accountAlreadyLoggedin".concat(n||""))})}}]),app.service("ResolveOption",["SavingsOptions","$route","State","$q",function(e,t,n,o){this.resolve=function(i){return n.returnWhenBootloaderDone().then(function(){var n=e.findOptionByName(i||urlify(t.current.params.optionName));return n||o.reject("optionNotFound")})}}]),app.service("ResolveOrderData",["Checkout","CheckoutCache","$q","Network","CheckoutRecovery","AgentAccount","$location","$route","CheckoutSteps",function(e,t,n,o,i,r,a,s,c){function d(){if(a.search().ioid&&a.search().ioid!==e.orderData.internalOrderId)return n.reject("wrongOrderData");if(a.path().split("process/").length>1&&["new-postpaid","new-prepaid","pre-to-post"].indexOf(s.current.params.ordertype)>-1){if(["customer-data","overview","payment-options"].indexOf(a.path().split("process/")[1].split("/")[0])>-1){var t=Object.first(e.orderData.config.products);if(!t)return n.reject("checkoutNoOrderData");if(c.getSteps().includes("phone-number")){var o=t.subscriptionDetails.msisdn,i=t.subscriptionDetails.subscriptionType;if(!o||!i||"none"===i)return n.reject("checkoutNoOrderData")}}}}this.getImages=function(t){var i=n.defer();if(t.accessCodeData&&t.accessCodeData.accessCode){var r={accessCode:t.accessCodeData.accessCode,filteredOutCheckSumValues:[]},a=t.images;t.images={},o.post("getCaptureData",r).then(function(n){if(!n)return i.reject("no-images-set");for(var o in n.imageDetails){var r=e.convertDocType(n.imageDetails[o].docCategory);["side1","side2","selfie"].indexOf(r)<0||(a.indexOf(n.imageDetails[o].checkSumValue)<0||n.imageDetails[o].imageData&&(t.images[r]={b64:"data:image/jpeg;base64,"+n.imageDetails[o].imageData,confirmed:!0,fileType:n.imageDetails[o].fileType,checkSumValue:n.imageDetails[o].checkSumValue,documentType:e.convertDocType(n.imageDetails[o].docCategory)}))}i.resolve()})}else i.reject("no-access-code");return i.promise},this.redoAccessCode=function(t){return t?e.getAccessCode(!0):n.resolve()},this.ensureAccessCode=function(t){return t?e.orderData.accessCodeData?n.resolve():e.getAccessCode(!0):n.resolve()},this.recoverExistingCustomer=function(e){return e?r.getExistingCustomer(e.username,!0).then(function(e){return e||n.reject("checkoutNoOrderData")}):n.resolve()},this.getSubIfNeeded=function(e){var t;return e&&e.config&&e.config.subscription&&(t=e.config.subscription),e&&e.config&&e.config.preToPostSubscription&&(t=e.config.preToPostSubscription),t?(t.setActive(),t.returnWhenDataLoaded().then(function(){return e})):e},this.resolve=function(t,n){var o=this;return this.getOrderData().then(function(i){var r=d();return r||o.ensureAccessCode(n).then(function(){return"memory"===i?e.orderData:o.afterFetchOrderData(t)})})},this.getOrderData=function(){var o=this;return e.orderData.config&&Object.size(e.orderData.config.products)?(e.orderData.goBackoneStep=!1,n.resolve("memory")):i.get().then(function(e){return o.recoverExistingCustomer(e)}).then(function(){return t.update(e.orderData)}).then(this.getSubIfNeeded).then(function(t){return t?(e.orderData=t,"api"):n.reject("checkoutNoOrderData")})},this.afterFetchOrderData=function(t){var n=this;return this.getImages(e.orderData).then(function(t){return n.redoAccessCode(e.orderData.redoAccessCode)}).then(function(n){return delete e.orderData.redoAccessCode,e.orderData.goBackoneStep=!!t&&!e.orderData.contract&&!e.orderData.poa,e.orderData}).catch(function(n){return console.error(n),"no-access-code"!==n&&"no-images-set"!==n&&throwSafe(n,"35-id"),e.orderData.goBackoneStep=!!t&&!e.orderData.contract&&!e.orderData.poa,e.orderData})}}]),app.service("ResolveOrder",["State","CustomerOrders","$route","$q",function(e,t,n,o){this.resolve=function(){return e.checkAgentLoggedIn().then(function(){return e.checkCustomerLoggedIn().then(function(e){return e?t.getOrders().then(function(e){var i=n.current.params.orderId;return("auto"===i?e.filter(function(e){return-1!==t.allowedPickupStatuses.indexOf(e.status)}).filter(function(e){return 1===e.orderLines.length}).sort(function(e,t){return t.orderDate>e.orderDate?1:-1})[0]:e.find(function(e){return e.orderId===i}))||o.reject("orderNotFound")}):o.reject("noExistingCustomer")})})}}]),app.service("ResolvePos",["State","$q",function(e,t){this.notLoggedin=function(){return e.checkAgentLoggedIn().then(function(e){return!e||t.reject("agentAlreadyLoggedIn")})}}]),app.service("ResolveProduct",["State","Products","$route","$location","Notifications","SavingsOptions","$q",function(e,t,n,o,i,r,a){this.resolve=function(s){return e.returnWhenBootloaderDone().then(function(){if(!n.current.params)return a.reject("productNotFound");var e=t.findProductByName(n.current.params.productName);if(!e)return a.reject("productNotFound");if(o.search().a||s)var c=e.bestConfig,d=c.best,u={config:c,device:d.device,promotion:d.promotion,options:{}};else{var l=o.search().o,p={};if(l){l=l.split(",");for(var g in l){var f=r.findOptionByName(l[g]);f&&(p[f.id]=f)}}var u=e.validateOptions(1*o.search().l,t.data.devices[o.search().d],null,p,!1)}return u?{product:e,config:u.config,device:u.device,promotion:u.promotion,options:u.options}:(i.add("Product combination not valid"),a.reject("productNotFound"))})}}]),app.service("ResolveWIN",["$route",function(e){this.resolve=function(){return!!e.current.params["no-win-redirect"]||(!((new Date).getTime()>new Date(2020,8,19,13).getTime())||(window.location.href="https://www.yallo.ch/home-internet",!1))}}]),app.service("ResoShortUrlToken",["$route","Network","$q",function(e,t,n){this.resolve=function(){return t.post("../cfg/getShortLink",{code:e.current.params.shortUrlToken}).then(function(e){return e.link?e.link:n.reject("invalidShortUrl")})}}]),app.service("ResolveSubscription",["$route","CustomerAccount","$q","State",function(e,t,n,o){this.resolve=function(i,r,a,s,c){return o.checkCustomerLoggedIn().then(function(){var o;return(o="auto-postpaid"===e.current.params.subscriptionId?i?t.getSubscriptionsByType(i)[0]:t.getSubscriptionsByType("postpaid")[0]:"auto-prepaid"===e.current.params.subscriptionId?i?t.getSubscriptionsByType(i)[0]:t.getSubscriptionsByType("prepaid")[0]:"auto"===e.current.params.subscriptionId?i?t.getSubscriptionsByType(i)[0]:t.getFilteredSubList(!0)[0]:t.subscriptions[e.current.params.subscriptionId])?i&&o.type!==i?n.reject("subNotFound"):(r&&o.setActive(a),r?o.returnWhenDataLoaded().then(function(){return o}):o):n.reject("subNotFound")}).then(function(e){return s?e.getRecommendations(c).then(function(){return e}):e})}}]),app.service("ResolveViewOffer",["$location","$q","$route",function(e,t,n){this.resolve=function(e){if(e)return e.returnWhenRecommendationsLoaded().then(function(o){var i;if(n.current.params.type){var r=n.current.params.type.split("_").map(function(e,t){return 0===t?e:e[0].toUpperCase()+e.substring(1)}).join("");i=e.recommendations.deals.find(function(e){return e.type===r})}else i=e.recommendations.deals.find(function(e){return e.offerTag.toLowerCase()===n.current.params.prismicTag.toLowerCase()});return i||t.reject("checkoutConfigNotValid")})}}]),app.service("AddressCheck",["Network","$timeout","$q","$rootScope","Analytics","FeatureFlags",function(e,t,n,o,i,r){var a=this,s=[{postCode:"3703",streetName:"Zwygartenstrasse"},{postCode:"6950",streetName:"Via Carlo Battaglini",streetNumber:14},{postCode:"7563"},{postCode:"7562"},{postCode:"8052",streetName:"Mattackerstrasse",streetNumber:81}];this.isLineCheck=!1;var c=r.get("AddressLookup-new-endpoint")?window.microServiceEndpoint:null,d=r.get("AddressLookup-new-endpoint")?"application/json":null,u=!!r.get("AddressLookup-new-endpoint");this.check=function(e,t,o,i,r){if(this.isLineCheck=r,!0!==e.validCity||!0!==e.validPostCode||!0!==e.validStreetName||!0!==e.validStreetNumber&&!e.noHouseNumbers?void 0!==e.validCity&&void 0!==e.validPostCode&&void 0!==e.validStreetName&&void 0!==e.validStreetNumber?e.valid=!1:e.valid=void 0:e.valid=!0,e.loading=!1,e.fallbackMode&&(e.valid=!0),e.oldPostCode!=e.postCode){if(e.oldPostCode=e.postCode,e.postCode&&4==e.postCode.length)return e.valid=!1,e.loading=!0,this.getCities(e,t,o,i);e.foundCities=[]}else if(e.oldCity!=e.city){if(e.oldCity=e.city,e.city)return e.valid=!1,e.loading=!0,this.checkCity(e,t,o,i)}else if(e.oldStreetName!=e.streetName){var a,s=null===(a=e.oldStreetName)||void 0===a?void 0:a.startsWith(null===e||void 0===e?void 0:e.streetName);if(e.foundStreetNames=[],e.oldStreetName=e.streetName,e.streetName&&e.streetName.length>=2&&e.postCode&&e.city)return e.valid=!1,e.loading=!0,this.getStreetNames(e,t,o,i,s)}else if(e.oldStreetNumber!=e.streetNumber){var c,d=(null===(c=e.oldStreetNumber)||void 0===c?void 0:c.startsWith(null===e||void 0===e?void 0:e.streetNumber))||""===e.streetNumber;if(e.oldStreetNumber=e.streetNumber,e.streetNumber&&e.streetNumber.length&&e.streetName&&e.postCode&&e.city)return e.valid=!1,e.loading=!0,this.getStreetNumbers(e,t,o,i,void 0,d)}return n.resolve()},this.getCities=function(n,a,s,l){var p=this;n.findingPostCode=!0;var g=!1,f=setTimeout(function(){g=!0,n.findingPostCode=!1,o.$emit("enableAddressCheckFallbackMode"),console.warn("Enabled address fallback mode, postcalltooktoolong"),i.event("postcalltooktoolong","findcity","error"),n.loading=!1,t()},5e3),h={action:"findCity",postCode:n.postCode},m={postcode:n.postCode};this.isLineCheck&&(m.lookupMethod="linecheck");var v=r.get("AddressLookup-new-endpoint")?"address-lookup/city":"addressLookup",b=r.get("AddressLookup-new-endpoint")?m:h;return n.apiId&&(h.apiId=n.apiId),e.post(v,b,2,!0,c,d,u).then(function(e){if(!g)return n.findingPostCode=!1,clearTimeout(f),e&&!e.errorCode?(e.cities||(e.cities=[]),e.cities=e.cities.map(function(e){return e.split("(").join("").split(")").join("")}),n.validPostCode=!!e.cities.length,s&&s.postCode&&s.postCode.$setValidity("validValue",n.validPostCode),n.foundCities=removeDuplicateCities(e.cities),n.foundCities.length?1==n.foundCities.length?(n.city=n.foundCities[0],n.validCity=!0):n.foundCities.indexOf(n.city)<0?(n.city="",n.validCity=!1):n.validCity=!0:(n.streetName="",n.streetNumber="")):(n.validPostCode=!1,n.foundCities=[]),p.check(n,a,s,l)})},this.checkCity=function(e,t,n,o){return e.validCity=!!(e.foundCities&&e.foundCities.indexOf(e.city)>-1),t||(e.streetName="",e.streetNumber=""),e.foundStreetNames=[],e.foundStreetNumbers=[],this.check(e,t,n,o)},this.getStreetNames=function(a,s,l,p,g){var f=this;if(s||(a.streetNumber=""),!a.postCode)return n.resolve();a.foundStreetNumbers=[];var h={action:"findStreetName",postCode:a.postCode,city:a.city,streetName:a.streetName},m={postcode:a.postCode,city:a.city,streetName:a.streetName};this.isLineCheck&&(m.lookupMethod="linecheck"),a.apiId&&(h.apiId=a.apiId),a.findingStreetName=!0,a.noHouseNumbers=!1,a.latestStreetNameLookup=new Date;var v=a.latestStreetNameLookup,b=!1,w=setTimeout(function(){b=!0,a.findingStreetName=!1,a.loading=!1,o.$emit("enableAddressCheckFallbackMode"),console.warn("Enabled address fallback mode, postcalltooktoolong"),i.event("postcalltooktoolong","findStreetName","error"),t()},5e3),C=r.get("AddressLookup-new-endpoint")?"address-lookup/street":"addressLookup",y=r.get("AddressLookup-new-endpoint")?m:h;return e.post(C,y,2,!0,c,d,u).then(function(e){if(clearTimeout(w),!b&&v==a.latestStreetNameLookup)return a.findingStreetName=!1,e&&e.streetNames?(e.streetNames=e.streetNames.map(function(e){return e.split("(").join("").split(")").join("")}),a.validStreetName=!!e.streetNames.length,p&&!a.validStreetName?(a.validStreetName=!0,a.warnStreetName=!0):a.warnStreetName=!1,l&&l.streetName.$setValidity("validValue",a.validStreetName),a.foundStreetNames=e.streetNames.map(function(e){return e.split(" (")[0]}),a.hoverStreetName=0,a.autoStreetName&&e.streetNames[0]&&f.select(a,"streetName","foundStreetNames",0,!0),1!==e.streetNames.length||g&&e.streetNames[0]!==a.streetName||(a.streetName=e.streetNames[0],f.checkIfStreetHasNumbers(a),a.foundStreetNames=[],a.autoCompletedStreetName=e.streetNames[0])):(a.validStreetName=!1,a.foundStreetNames=[],a.autoCompletedStreetName=void 0),f.check(a,s,l,p)})},this.getStreetNumbers=function(t,o,i,a,s,l){var p=this;if(!t.postCode)return n.resolve();var g={action:"findStreetNumber",postCode:t.postCode,city:t.city,streetName:t.streetName,streetNumber:t.streetNumber},f={postcode:t.postCode,city:t.city,streetName:t.streetName,streetNumber:t.streetNumber};this.isLineCheck&&(f.lookupMethod="linecheck"),t.apiId&&(g.apiId=t.apiId),t.findingStreetNumber=!0,t.latestStreetNumberLookup=new Date;var h=t.latestStreetNumberLookup,m=[],v=r.get("AddressLookup-new-endpoint")?"address-lookup/street-number":"addressLookup",b=r.get("AddressLookup-new-endpoint")?f:g;return e.post(v,b,null,null,c,d,u).then(function(e){if(t.reallyValidStreetNumber=!1,h==t.latestStreetNumberLookup||s)return t.findingStreetNumber=!1,e?(e.streetNumbers||(e.streetNumbers=[]),t.validStreetNumber=!(!s&&!e.streetNumbers.length),a&&!t.validStreetNumber?(t.validStreetNumber=!0,t.warnStreetNumber=!0):t.warnStreetNumber=!1,p.addressBlocked(t)&&(t.validStreetNumber=!1,e.streetNumbers=[]),i&&i.streetNumber.$setValidity("validValue",t.validStreetNumber),t.foundStreetNumbers=e.streetNumbers,t.foundStreetNumbers.sort(function(e,t){return e>t?1:-1}),t.hoverStreetNumber=0,1!==e.streetNumbers.length||l&&e.streetNumbers[0]!==t.streetNumber||(t.streetNumber=e.streetNumbers[0],t.foundStreetNumbers=[],t.reallyValidStreetNumber=!0,t.autoCompletedStreetNumber=e.streetNumbers[0]),e.streetNumbers[0]===t.streetNumber&&(t.reallyValidStreetNumber=!0),t.autoStreetNumber&&m.push(p.select(t,"streetNumber","foundStreetNumbers",0,!0))):(t.validStreetNumber=!1,t.foundStreetNumbers=[]),s?e.streetNumbers:(m.push(p.check(t,o,i,a)),n.all(m))})},this.select=function(e,o,i,r,a){var s=n.defer();if(a){var c=angular.copy(e[i]);t(function(){c.indexOf(e[o])<0&&(e[o]=c[r],e[i]=[],e["old"+o.capitalizeFirstLetter()]=e[o],s.resolve())},100)}else e[o]=e[i][r],e[i]=[],e["old"+o.capitalizeFirstLetter()]=e[o],s.resolve();return e["warn"+o.capitalizeFirstLetter()]=!1,0===e.foundStreetNumbers.length&&(e.reallyValidStreetNumber=!0),s.promise},this.addressBlocked=function(e){for(var t in s){var n=!0;for(var o in s[t])if(e[o]!=s[t][o]){n=!1;break}if(n)return!0}},this.checkIfStreetHasNumbers=function(e){e.checkingIfStreetNasNumbers||e.fallbackMode||a.checkIfStreetHasNumbersInternal(e).then(function(t){e.noHouseNumbers=!t,t||(e.valid=!0)})},this.checkIfStreetHasNumbersInternal=function(e,t){e.checkingIfStreetNasNumbers=!0,t||(t=1);var n=angular.copy(e);return n.streetNumber=t.toString(),a.getStreetNumbers(n,!1,!1,!1,!0).then(function(n){return e.checkingIfStreetNasNumbers=!1,!!e.fallbackMode||(!(null===n||void 0===n||!n.length)||!(t>=9)&&(!(n&&!n.length)||a.checkIfStreetHasNumbersInternal(e,t+1)))})}}]),app.service("AgentAccount",["Network","$location","$q","$interval","Notifications","Products","CommonData","$rootScope","CustomerAccount","State","Analytics","Promotions","$cookies","Storage","Popup","Language","$timeout","Authentication","$http",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g,f,h,m,v,b){var w=this;this.data={},a.changeChannel("ol"),e.agent=this,r.agent=this,c.agent=this,this.posRecoverOrderPopup=new f("posRecoverOrderPopup","agent-go-back-to-completed-order.html",{title:"posRecoverOrderPopupTitle"},{confirm:function(){g.remove("lastNotCompletedAgentOrderToken_"+w.data.username),location.href=w.posRecoverOrderPopup.data.url+"?checkoutRecoveryToken="+w.posRecoverOrderPopup.data.token},hide:function(){g.remove("lastNotCompletedAgentOrderToken_"+w.data.username)}}),this.agentRightsPopup=new f("agentRightsPopup","agent-rights-popup.html",{title:"agentRightsPopupTitle",agent:this}),this.init=function(){var n=this;if(!this.hasInitted)return d.agentLoggingIn=!0,this.waitTillCanInit().then(function(){if(!n.hasInitted)if(n.hasInitted=!0,d.agentLoggingIn=!1,t.search().agent_token||t.search().sso_token){var o=t.search().agent_token||t.search().sso_token,i=t.search().agentFirstName,r=t.search().agentLastName;d.agentLoggingIn=!0,v.posSsoLogin(o,i,r).then(function(e){loadScript("/assets/other/jwt-decode.min.js").then(function(){v.posToken&&(e=jwt_decode(v.posToken)),n.processLoginResponse(e,v.posToken,!0),s.$emit("doneCheckingAgentLoggedIn")})})}else{var a=p.getObject("posLoginDetails");a?v.renewToken("pos").then(function(){if(v.posToken){var o=v.posToken;loadScript("/assets/other/jwt-decode.min.js").then(function(){var i=jwt_decode(o);i.details&&1===i.details.forcePasswordChange&&t.path("/".concat(h.data.current,"/pos/reset−password"));var r=i.details.tempChannel?i.details.tempChannel:void 0;n.processLoginResponse(i,o,!1,r);var a=g.get("posCustDetails");a&&p.get("posFoundCustomer")?c.processLoginResponse(a,void 0,void 0,void 0,"agent init"):(e.post("removeCustomerData",{},1,!0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,!1),p.remove("loggedin"),g.remove("posCustDetails"),g.remove("x-pos-cust-username")),s.$emit("doneCheckingAgentLoggedIn")})}else e.post("removeCustomerData",{},1,!0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,!1),p.remove("loggedin"),g.remove("posCustDetails"),g.remove("x-pos-cust-username"),s.$emit("doneCheckingAgentLoggedIn")}):v.renewToken("pos").then(function(){if(v.posToken)return loadScript("/assets/other/jwt-decode.min.js").then(function(){var e=jwt_decode(v.posToken);e.details&&1===e.details.forcePasswordChange&&t.path("/".concat(h.data.current,"/pos/reset−password")),p.putObject("posLoginDetails",e,cookieOptions),d.agentLoggedIn=!0,s.$emit("doneCheckingAgentLoggedIn"),window.location.reload()});s.$emit("doneCheckingAgentLoggedIn")})}})},this.waitTillCanInit=function(){return d.returnWhenBootloaderDone().then(function(){return d.returnWhenRateplanDataLoaded().then(function(){if(t.search().sso_token)return m(function(){},2500)})})},this.logout=function(){var t=this;return d.agentLoggingOut?n.resolve():(d.agentLoggingOut=!0,s.preventNavigation=!0,g.remove("ccData"),e.returnWhenNoOpenRequests().then(function(){return s.preventNavigation=!1,t.removeCustomerData().then(function(){v.logoutPos().then(function(){return d.agentLoggingOut=!1,g.remove("lastNotCompletedAgentOrderToken_"+t.data.username),e.authorization&&(delete e.authorization,console.warn("Removed auth token. Agent logged out"),g.remove("AuthorizationToken")),t.removeLoginData(),window.location.href=window.newPosEndpoint+h.data.current+"/auth/login",!0})})}))},this.removeLoginData=function(){this.rawAccountresponse="",d.isTelesales=!1,p.remove("posLoginDetails"),g.remove("x-pos-cust-username"),g.remove("authSelfcareToken"),g.remove("authPosToken"),s.$emit("clearRFEToken"),(d.agentLoggedIn||d.agentLoggingIn)&&(d.agentLoggedIn=!1,d.agentLoggingIn=!1,this.data={},this.showUpfront=!1,"/pos"!==t.path().substring(3)&&t.path("/pos"),t.path("/pos-login").search({}),g.get("pos-login-location")?setTimeout(function(){return location.href=g.get("pos-login-location")},500):setTimeout(function(){return window.location.reload()},500))},this.login=function(n,o,i){var r=this;if(!d.agentLoggingIn){t.path().indexOf("/backoffice")&&(window.location.href=window.newPosEndpoint+h.data.current+"/auth/login"+"?tempChannel=".concat(i));if(-1===["pt99999admin"].indexOf(n.trim())&&window.isPos&&window.isApp)return performAppInit(n,o);d.agentLoggingIn=!0,e.returnWhenNoOpenRequests().then(function(){v.logoutPos().then(function(){v.posUsernameLogin(n,o,i).then(function(e){if(!v.posToken)return d.agentLoggingIn=!1;loadScript("/assets/other/jwt-decode.min.js").then(function(){e=jwt_decode(v.posToken);var n=r.processLoginResponse(e,null,!0,i);e&&n&&("re"===a.realChannel?t.path("/pos/find-existing-customer").search({mode:"msisdn"}):t.path("/pos").search({}))})})})})}},this.updateAgentData=function(e,n,o){var i;o&&(e.tempChannel=o),n?e.token=n:n=e.token,w.token=n,w.data=angular.copy(e),w.data.rights={},w.data.normalChannel=w.data.channel;for(var r in e.rights)w.data.rights[e.rights[r]]=!0;window.isTest&&(w.data.rights.SUNRISE_INTERNET=!0,w.data.rights.LEAD_GENERATION=!0),w.data.realChannel=e.channel,e.channel!==w.tempLoginMainChannel&&w.tempLoginMainChannel||(w.data.channel=e.tempChannel?e.tempChannel:e.channel),a.changeChannel(w.data.channel),a.realChannel=w.data.realChannel,d.isTelesales=-1!==["ib","ob","re","cs"].indexOf(a.realChannel),w.updatePosLoginCookie(e);var s=(null===(i=t.search().pal)||void 0===i?void 0:i.split(","))||[];return l.getPromotions().then(function(){s.forEach(function(e){var t=l.findPromotionByCode(e);l.enablePromotionForChannel(t)})})},this.showUpcBox=function(){return["ib","ob"].includes(a.realChannel)},this.processLoginResponse=function(e,t,o,l,p){var f=this,h=n.defer();if(o&&-1===location.href.indexOf("sso")?g.set("pos-login-location",location.href):g.remove("pos-login-location"),this.rawAccountresponse=JSON.parse(JSON.stringify(e)),d.agentLoggingIn=!1,u.setDimention("userType","pos"),e){if(e.details.channel!==this.tempLoginMainChannel&&l&&o)return i.add("tempChannelSelectFailed","bad"),this.logout(),h.resolve(!1),h.promise;if(-1!==["ob","ib","re","cs","ab","os"].indexOf(e.details.channel)&&!l)return i.add("Please login with special login link","bad"),this.logout(),h.resolve(!1),h.promise;d.agentLoggedIn=!0,console.log("agent logged in"),this.updateAgentData(e.details,t,l).then(function(){p?f.updateExistingCustomer():c.doneCheckingLoggedIn(!0),s.$emit("AgentLoggedin"),r.processHiddenDevices(),h.resolve(!0)})}else h.resolve(!0);if("pt"===a.realChannel&&Date.now()<new Date(2021,0,15).getTime()){var m=r.findProductByName("yallo_home_max_fiber");if(m){m.channels=m.channels.filter(function(e){return"pt"!==e});for(var v in m.configs){var b=m.configs[v];b.channels=b.channels.filter(function(e){return"pt"!==e})}}}return h.promise},this.updatePosLoginCookie=function(e){if(!t.search().kitsunePosToken){var n=p.getObject("posLoginDetails")||{},o=Object.assign(n,e);p.putObject("posLoginDetails",o,cookieOptions)}},this.startSimSwap=function(t,n){var o={subscriptionId:t,newIccid:n};return e.post("startSimSwap",o).then(function(e){return e&&i.add("simSwapSuccess","good"),e})},this.removeCustomerData=function(o){var i=this,r=g.get("x-new-pos-search");return g.set("x-new-pos-search",!1),this.removingCustomerData?n.resolve():(s.preventNavigation=!0,this.removingCustomerData=!0,e.returnWhenNoOpenRequests().then(function(){if(s.preventNavigation=!1,c.removeLoginData(!0,!0),i.removingCustomerData=!1,g.remove("posCustDetails"),g.remove("x-pos-cust-username"),!o&&"/pos"===t.path().substring(3,7)){
if(r)return window.location.href=window.newPosEndpoint+"en/customer-find";t.path("/pos/find-existing-customer")}return v.logoutSelfcare(),e.post("removeCustomerData",{},1,!0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,!1)}))},this.findExistingCustomer=function(t,n,o,i){var r={firstName:n,lastName:o,username:t,dob:i};return c.refreshingAccountData=!0,e.post("findExistingCustomer",r).then(function(e){return c.refreshingAccountData=!1,e})},this.getExistingCustomer=function(t,n){var o=this;return g.set("x-pos-cust-username",t),c.refreshingAccountData=!0,e.post("getAccountDetails",{}).then(function(e){return o.removingCustomerData=!1,c.refreshingAccountData=!1,e&&n?(p.put("posFoundCustomer","true",cookieOptions),e.username=t,g.remove("posCustDetails"),g.remove("x-pos-cust-username"),g.set("posCustDetails",e),c.processLoginResponse(e,void 0,void 0,void 0,"agent getExistingCustomer"),c.doneCheckingLoggedIn(!0).then(function(){return e})):e})},this.updateExistingCustomer=function(){var t=this;return c.refreshingAccountData=!0,d.refreshingAccountData=!0,e.post("getAccountDetails",{}).then(function(e){return t.removingCustomerData=!1,e?c.doneCheckingLoggedIn(!0).then(function(){return e}):e}).then(function(e){e&&c.updateData(e,!1,"agent"),c.refreshingAccountData=!1,d.refreshingAccountData=!1,s.$emit("accountDataRefreshed")})},this.allowPosReporting=function(){return!(!this.data||!this.data.username)&&(-1===this.data.username.indexOf("yolds")&&"et"==this.data.channel)},this.allowUnsubscribe=function(){return!(!this.data||!this.data.username)},this.allowPickupAtStore=function(){return"sc"===this.data.channel},this.allowFileIdValidation=function(e){return!!d.agentLoggedIn&&("et"!==this.data.channel&&("ss"!==this.data.channel&&("cs"===this.data.channel||!this.data.rights.FORCE_SHIPMENT)))};var C=window.location.pathname;(C.endsWith("/pos")||C.endsWith("/pos-login")||C.indexOf("/pos/")>-1)&&this.init()}]),app.service("Alignment",["$rootScope",function(e){this.apply=function(){var t,n=Array.prototype.slice.call(document.querySelectorAll("[align-box]")),o={},i=_createForOfIteratorHelper(n);try{for(i.s();!(t=i.n()).done;){var r=t.value;r.style.minHeight="";var a=r.getAttribute("align-box");if("string"==typeof r.getAttribute("align-desktop-only")&&!e.isDesktop)return;o[a]||(o[a]=[]),o[a].push(r)}}catch(e){i.e(e)}finally{i.f()}for(var s in o){var c,d=this.calcMax(o[s]),u=_createForOfIteratorHelper(o[s]);try{for(u.s();!(c=u.n()).done;){c.value.style.minHeight=d+"px"}}catch(e){u.e(e)}finally{u.f()}}},this.calcMax=function(e){var t,n=0,o=_createForOfIteratorHelper(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;i.offsetHeight>n&&(n=i.offsetHeight)}}catch(e){o.e(e)}finally{o.f()}return n},e.$watch(this.apply.bind(this))}]),app.service("Analytics",["$rootScope","$location","Popups","$routeParams","State","$cookies","Storage","FeatureFlags",function(e,t,n,o,i,r,a,s){function c(){return window.location.pathname.substring(3)||"/"}function d(e,t){return s.get("GTM-testing-changes")?{name:t&&t.device?t.device.deviceName:"",brand:f(),category:b(e,t),variant:C(t.config,e,t),id:t.config.id,price:t.config.recurringCost}:{name:t&&t.device?t.device.deviceName:"",brand:u(),category:b(e,t),variant:y(t.config)}}function u(){var e=window.location.href;return-1!==e.indexOf("/change-postpaid/")?"change plan":-1!==e.indexOf("/extend-postpaid/")||-1!==e.indexOf("/add-promo/")?"extend plan":"new plan"}function l(e){return"postpaid mobile"===e?"59":"prepaid mobile"===e?"0":"99"}function p(e){return Object.keys(e).forEach(function(t){"external_id"!=t&&delete e[t]})}function g(e){return e.best.hasOwnProperty("promotion")?e.best.promotion.recurringDiscount:"0"}function f(){return"yallo"===window.brand?"yallo":"lebara"}function h(e){var t=e.config.lockinLength;return 0===t?0:t||12}function m(e,t){return"plan/"+e+"/monthly charges"+(t?"/"+t+" months":"")}function v(e,t){return"service fees/service/"+(t?"first bill":"online payment")+"/"+h(e)+" months"}function b(e,t){var n;if(!e||!t)return"";var o,i;return o=1*e.recurringCost&&1*e.upfrontCost?"monthly charges and online payment":1*e.recurringCost&&1*!e.upfrontCost?"monthly charges":1*!e.recurringCost&&1*e.upfrontCost?"online payment":"no charge",i="TV Box"==(null===(n=t.device)||void 0===n?void 0:n.deviceName)?"tv box":"mobile phone","device/".concat(i,"/").concat(o,"/").concat(h(t)," months")}function w(e){var t,n=e.config.productName;return"yallo_home_4g"===e.config.url&&null!==(t=e.promotion)&&void 0!==t&&t.promotionDevices.length&&(n="yallo Home 4G"),n+" "+h(e)+" months"}function C(e,t,n){var o;if("internet"!==e.tags[0]||"hfc"!==e.tags[1]&&"fiber"!==e.tags[1]){if("internet"!==e.tags[0]||"hfc"===e.tags[1]&&"fiber"===e.tags[1])o=e.tags[0];else if(o="MBB",b(t,n).includes("device/mobile phone"))return"device/router"}else o=e.tags[1];if(e.productName.toLowerCase().includes("cable")&&(o="cable"),null!==t&&null!==n&&"mobile"===e.tags[0]&&!e.isHomeProduct&&!e.isLightProduct&&b(t,n).includes("device/mobile phone"))return"device/mobile phone";if("tv"===e.tags[0]){if(m(y(e)).includes("plan/postpaid tv")&&!b(t,n).includes("device/tv box"))return"tv subscription";if(b(t,n).includes("device/tv box"))return"tv box"}return"yallo Go"===e.productName&&(o=""),e.type+" "+o}function y(e){var t;return t="internet"!==e.tags[0]||"hfc"!==e.tags[1]&&"fiber"!==e.tags[1]?"internet"!==e.tags[0]||"hfc"===e.tags[1]&&"fiber"===e.tags[1]?e.tags[0]:"MBB":e.tags[1],e.type+" "+t}var D=this,S=0,I=[],k={page_url:"first-page"},P={};e.$on("prepaidProductsUrls",function(e,t){I=t}),e.$on("selectBox",function(){s.get("GTM-testing-changes")?-1!==removeNumbersFromPath(window.location.href).indexOf("addDeviceMode&subscription")&&(D.fireCheckoutEvent("selectBox",void 0,D.checkoutService.orderData.config.subscription.ca.accountOwner),D.fireCheckoutEvent("selectBox","begin_checkout",D.checkoutService.orderData.config.subscription.ca.accountOwner)):D.fireCheckoutEvent("selectBox")}),e.$on("pickedDevice",function(){s.get("GTM-testing-changes")?-1!==removeNumbersFromPath(window.location.href).indexOf("addDeviceMode&subscription")&&D.fireCheckoutEvent("pickedDevice",void 0,D.checkoutService.orderData.config.subscription.ca.accountOwner):D.fireCheckoutEvent("pickedDevice")}),e.$on("removedDevice",function(){s.get("GTM-testing-changes")?-1!==removeNumbersFromPath(window.location.href).indexOf("addDeviceMode&subscription")&&D.fireCheckoutEvent("removedDevice",void 0,D.checkoutService.orderData.config.subscription.ca.accountOwner):D.fireCheckoutEvent("removedDevice")}),this.fireCheckoutEvent=function(e,t,n){this.checkoutService.orderData.config&&(s.get("GTM-testing-changes")?this.checkoutEvent(Object.first(this.checkoutService.orderData.config.products),"add",angular.copy(this.checkoutService.getOrderDevice()),null,e,t,n):this.checkoutEvent(Object.first(this.checkoutService.orderData.config.products),"add",angular.copy(this.checkoutService.getOrderDevice()),null,e))},e.$on("$routeChangeSuccess",function(){S=setTimeout(function(){var e=c();-1===e.indexOf("/checkout/")&&-1===e.indexOf("/process")&&(e.split("?")[0].endsWith("/confirmation")||(-1!==e.indexOf("/confirmation/")&&(e=removeNumbersFromPath(e)),-1===e.indexOf("/confirmation/hidden_numbers")&&("/fiber"===e&&(e="/product/yallo_home_max_fiber"),D.fireGaEvent("virtual page view",e,e.split("/")[1]||"home",window.location.href,void 0,void 0,!0),S=!1)))},0)}),e.$on("onHidePopup",function(e,t){setTimeout(function(){var e=0===n.activePopups().length,o=-1!==t.popup.name.indexOf("devicePopup");e&&o&&window.location.href.indexOf("/confirmation/")<0&&D.replayPreviousGaEvent()},200)}),s.get("GTM-testing-changes")&&(this.checkoutEvent=function(e,t,n,o,i,r,u){if(e){var b={event:void 0!==r?r:"virtual page view",page_name:c()||k.page_name,page_type:c().split("/")[1]||"home"||k.page_type,page_url:removeNumbersFromPath(window.location.href),page_referrer:k.page_url,page_language:P.language,viewing_mode:P.mode,user_status:P.userType,visitor_id:P.visitorId,account_id:P.accountId,ever_logged_in:P.everLoggedIn,user_data:P.accountId?{first_name:"".concat(void 0!==(null===u||void 0===u?void 0:u.billingCustomerDetails)?u.billingCustomerDetails.firstName:u.firstName),last_name:"".concat(void 0!==(null===u||void 0===u?void 0:u.billingCustomerDetails)?u.billingCustomerDetails.lastName:u.lastName),email_address:"".concat(void 0!==(null===u||void 0===u?void 0:u.billingCustomerDetails)?u.billingCustomerDetails.emailAddress:u.emailAddress),phone_number:"".concat(void 0!==(null===u||void 0===u?void 0:u.billingCustomerDetails)?u.billingCustomerDetails.contactNumber:u.contactNumber),country:"".concat(a.get("userCountry")),city:"".concat(void 0!==(null===u||void 0===u?void 0:u.billingAddress)?u.billingAddress.city:u.address.city),postal_code:"".concat(void 0!==(null===u||void 0===u?void 0:u.billingAddress)?u.billingAddress.postCode:u.address.postCode),street_address:"".concat(void 0!==(null===u||void 0===u?void 0:u.billingAddress)?u.billingAddress.streetName:u.address.streetName),date_of_birth:void 0!==(null===u||void 0===u?void 0:u.billingCustomerDetails)?"".concat(u.billingCustomerDetails.dob.year,"/").concat(u.billingCustomerDetails.dob.month,"/").concat(u.billingCustomerDetails.dob.day):"".concat(u.dob.year,"/").concat(u.dob.month,"/").concat(u.dob.day),external_id:P.visitorId}:"",customer_data:{email_address:"".concat(void 0!==(null===u||void 0===u?void 0:u.billingCustomerDetails)?u.billingCustomerDetails.emailAddress:u.emailAddress),phone_number:"".concat(void 0!==(null===u||void 0===u?void 0:u.billingCustomerDetails)?u.billingCustomerDetails.contactNumber:u.contactNumber),external_id:P.visitorId}};if(void 0===P.accountId&&(b.user_data=b.customer_data),s.get("Ayma-google-tag-manager-changes")&&r&&!n&&this.addCustomCookies(r,e.product.productName),"add_to_cart"===r&&void 0===P.accountId&&(p(b.user_data),p(b.customer_data)),"pickedDevice"===i)b.event="gtm visitor interaction",b.interaction_name="add device to plan",b.ecommerce={add:{products:[d(n,e)]}};else if("removedDevice"===i){if(!n)return;b.event="gtm visitor interaction",b.interaction_name="unselect device",b.ecommerce={remove:{products:[d(n,e)]}}}else{if(b.ecommerce=_defineProperty({currencyCode:"CHF"},t,{products:[{name:w(e),brand:f(),category:m(C(e.config),h(e)),variant:C(e.config),quantity:1,id:e.config.id,price:e.config.recurringCost-g(e.config)}]}),s.get("Ayma-google-tag-manager-changes")&&void 0!==r){var D,S,I;e.config.url,I=e.config.productName,this.addCustomCookies(r,I,null,u,null===e||void 0===e?void 0:null===(D=e.promotion)||void 0===D?void 0:D.code,null===e||void 0===e?void 0:null===(S=e.device)||void 0===S?void 0:S.deviceName,C(e.config))}var T=e.device;if(o){var O,_=(null===(O=this.checkoutSteps.getSteps())||void 0===O?void 0:O.indexOf(o))||-1;b.ecommerce.checkout.actionField={step:_+1},b.ecommerce.checkout.currencyCode="CHF"}T&&b.ecommerce[t].products.push(d(n,e)),-1===window.location.href.indexOf("/extend-postpaid/")&&-1===window.location.href.indexOf("/change-postpaid/")&&-1===window.location.href.indexOf("/add-promo/")&&b.ecommerce[t].products.push({name:"activation and sim card",brand:f(),category:v(e,!0),variant:y(e.config).toLowerCase().includes("postpaid mbb")?"service fees/service":"sim card",quantity:1,id:y(e.config)+" activation",price:l(y(e.config))})}this.dataLayerPush({ecommerce:null}),this.dataLayerPush(b)}}),this.fiberLineCheck=function(e,t){var n,o="negative";if(null!==e&&void 0!==e&&null!==(n=e.fiber)&&void 0!==n&&n.available){var i=!!e.fiber.l1,r=!!e.fiber.l3,a=i&&"OTOREADY"===e.fiber.l1.otoIdState,c=r&&"OTOREADY"===e.fiber.l3.otoIdState,d="l1";i?!a&&c&&(d="l3"):d="l3";var u=e.fiber[d].otoIdState;"OTOREADY"===u&&(o="positive oto"),"UNKNOWN"===u&&(o="positive unknown"),"BEPREADY"===u&&(o="positive bep")}s.get("GTM-testing-changes")&&this.dataLayerPush({ecommerce:null}),this.dataLayerPush({event:"gtm visitor interaction",interaction_name:"home fiber line check",home_fiber_line_result:o}),"otoId"===t&&this.fiberContinue("line check","submit")},s.get("GTM-testing-changes")||(this.checkoutEvent=function(e,t,n,o,i){if(e){var r={event:"virtual page view",page_name:c()||k.page_name,page_type:c().split("/")[1]||"home"||k.page_type,page_url:removeNumbersFromPath(window.location.href),page_referrer:k.page_url,page_language:P.language,viewing_mode:P.mode,user_status:P.userType,visitor_id:P.visitorId,account_id:P.accountId,ever_logged_in:P.everLoggedIn};if("pickedDevice"===i)r.event="gtm visitor interaction",r.interaction_name="add device to plan",r.ecommerce={add:{products:[d(n,e)]}};else if("removedDevice"===i){if(!n)return;r.event="gtm visitor interaction",r.interaction_name="unselect device",r.ecommerce={remove:{products:[d(n,e)]}}}else{r.ecommerce=_defineProperty({},t,{products:[{name:w(e),brand:u(),category:m(y(e.config),h(e)),variant:y(e.config),quantity:1}]});var a=e.device;if(o){var s,l=(null===(s=this.checkoutSteps.getSteps())||void 0===s?void 0:s.indexOf(o))||-1;r.ecommerce.checkout.actionField={step:l+1}}a&&r.ecommerce[t].products.push(d(n,e)),-1===window.location.href.indexOf("/extend-postpaid/")&&-1===window.location.href.indexOf("/change-postpaid/")&&-1===window.location.href.indexOf("/add-promo/")&&r.ecommerce[t].products.push({name:"activation and sim card",brand:f(),category:v(e,!0),variant:"service fees/service",quantity:1})}this.dataLayerPush(r)}}),this.fiberContinue=function(e,t){s.get("GTM-testing-changes")&&this.dataLayerPush({ecommerce:null}),this.dataLayerPush({event:"gtm visitor interaction",interaction_name:"oto id",oto_id_action:t,location:e})},s.get("GTM-testing-changes")&&(this.fireTransactionEvent=function(e,n,o,i,r,c){var u,l=i.totalrecurringCost-i.totalRecurringDiscount,p=Object.first(n.config.products),g=h(p),b=p.promotion,D=f(),S=(y(p.config),C(p.config)),I=0,T=0;if(s.get("Ayma-google-tag-manager-changes-2")){if("purchase"===r){var O,_;this.addCustomCookies(r,Object.values(n.config.products)[0].device?Object.values(n.config.products)[0].device.deviceName:Object.values(n.config.products)[0].product.productName,null,null,null===(O=Object.values(n.config.products)[0].promotion)||void 0===O?void 0:O.code,null===(_=Object.values(n.config.products)[0].device)||void 0===_?void 0:_.deviceName,C(p.config),e)}}else if("purchase"===r){var A,L;this.addCustomCookies(r,Object.values(n.config.products)[0].device?Object.values(n.config.products)[0].device.deviceName:Object.values(n.config.products)[0].product.productName,null,null,null===(A=Object.values(n.config.products)[0].promotion)||void 0===A?void 0:A.code,null===(L=Object.values(n.config.products)[0].device)||void 0===L?void 0:L.deviceName,null)}window.isTest&&b&&void 0===b.discountDuration&&console.warn("Please, set a discount duration for the promotion "+b.code),b&&0!==b.discountDuration?(I=Math.min(g,b.discountDuration||0),T=Math.max(0,g-I)):T=g;var N=I*l+T*i.totalrecurringCost,x=i.totalUpfrontCost;o&&(u=d(o,p),u.id=p.device.id,u.price=(o.recurringCost*o.recurringDuration+o.upfrontCost).toFixed(2),u.quantity=1,u.metric1=o.upfrontCost.toFixed(2),u.metric2="0.00");var E=(N+x).toFixed(2),R={event:void 0!==r?r:"virtual page view",page_title:window.document.title,page_name:t.path().slice(3),page_type:"confirmation",page_url:window.location.href,page_referrer:k.page_url,page_language:P.language,viewing_mode:P.mode,user_status:P.userType,visitor_id:P.visitorId,account_id:P.accountId,ever_logged_in:P.everLoggedIn,metric3:(o&&o.upfrontCost||0).toFixed(2),metric4:x.toFixed(2),ecommerce:{currencyCode:"CHF",purchase:{actionField:{id:e,affiliation:o&&o.paymentMethods.length>0?o.paymentMethods[0]:"",revenue:E,tax:(.075*E).toFixed(2),shipping:"0.00",coupon:b?b.code:""},products:[{name:w(p),id:p.config.id,price:N.toFixed(2),brand:D,category:m(S,g),variant:S,quantity:1,metric1:"0.00",metric2:"0.00"}]}},user_data:void 0!==c?{first_name:"".concat(c.firstName),last_name:"".concat(c.lastName),email_address:"".concat(c.emailAddress),phone_number:"".concat(c.contactNumber),country:"".concat(a.get("userCountry")),city:"".concat(c.address.city),postal_code:"".concat(c.address.postCode),street_address:"".concat(c.address.streetName),date_of_birth:"".concat(c.dob.year,"/").concat(c.dob.month,"/").concat(c.dob.day),external_id:P.visitorId}:"",customer_data:void 0!==n?{first_name:"".concat(n.billingCustomerDetails.firstName),last_name:"".concat(n.billingCustomerDetails.lastName),email_address:"".concat(n.billingCustomerDetails.emailAddress),phone_number:"".concat(n.billingCustomerDetails.contactNumber),country:"".concat(a.get("userCountry")),city:"".concat(n.billingAddress.city),postal_code:"".concat(n.billingAddress.postCode),street_address:"".concat(n.billingAddress.streetName),date_of_birth:"".concat(n.billingCustomerDetails.dob.year,"/").concat(n.billingCustomerDetails.dob.month,"/").concat(n.billingCustomerDetails.dob.day),external_id:P.visitorId}:""};void 0===c&&(R.user_data=R.customer_data),o&&R.ecommerce.purchase.products.push(u),-1===window.location.href.indexOf("/extend-postpaid/")&&-1===window.location.href.indexOf("/change-postpaid/")&&-1===window.location.href.indexOf("/add-promo/")&&i.simPrice>0&&R.ecommerce.purchase.products.push({name:"activation and sim card",id:"SIM_CARD",price:i.simPrice.toFixed(2),brand:D,category:v(p,g,p.config.type),variant:"service fees/service",quantity:1,metric1:"0.00",metric2:i.simPrice.toFixed(2)}),this.event("order-placed",p.product.url,p.config.type),s.get("GTM-testing-changes")&&this.dataLayerPush({ecommerce:null}),this.dataLayerPush(R)}),this.fireCustomPurchaseEvent=function(e,t,n,o,i,r,a,s,c){this.addCustomCookies(e,t,null,null,s,c,o);var d={event:e,ecommerce:{currency:"chf",add:{products:[{name:t,brand:brand,category:n,variant:o,price:i,quantity:r,id:a}]}}};"purchase"===e&&(d.ecommerce.add.products[0].transactionId="unavailable"),this.dataLayerPush(d)},s.get("GTM-testing-changes")||(this.fireTransactionEvent=function(e,n,o,i){var r,a=i.totalrecurringCost-i.totalRecurringDiscount,s=Object.first(n.config.products),c=h(s),u=s.promotion,l=f(),p=y(s.config),g=0,b=0;window.isTest&&u&&void 0===u.discountDuration&&console.warn("Please, set a discount duration for the promotion "+u.code),u&&0!==u.discountDuration?(g=Math.min(c,u.discountDuration||0),b=Math.max(0,c-g)):b=c;var C=g*a+b*i.totalrecurringCost,D=i.totalUpfrontCost;o&&(r=d(o,s),r.id=s.device.id,r.price=(o.recurringCost*o.recurringDuration+o.upfrontCost).toFixed(2),r.quantity=1,r.metric1=o.upfrontCost.toFixed(2),r.metric2="0.00");var S=(C+D).toFixed(2),I={event:"virtual page view",page_title:window.document.title,page_name:t.path().slice(3),page_type:"confirmation",page_url:window.location.href,page_referrer:k.page_url,page_language:P.language,viewing_mode:P.mode,user_status:P.userType,visitor_id:P.visitorId,account_id:P.accountId,ever_logged_in:P.everLoggedIn,metric3:(o&&o.upfrontCost||0).toFixed(2),metric4:D.toFixed(2),ecommerce:{purchase:{actionField:{id:e,affiliation:o&&o.paymentMethods.length>0?o.paymentMethods[0]:"",revenue:S,tax:(.075*S).toFixed(2),shipping:"0.00",coupon:u?u.code:""},products:[{name:w(s),id:s.config.id,price:C.toFixed(2),brand:l,category:m(p,c),variant:p,quantity:1,metric1:"0.00",metric2:"0.00"}]}}};o&&I.ecommerce.purchase.products.push(r),-1===window.location.href.indexOf("/extend-postpaid/")&&-1===window.location.href.indexOf("/change-postpaid/")&&-1===window.location.href.indexOf("/add-promo/")&&i.simPrice>0&&I.ecommerce.purchase.products.push({name:"activation and sim card",id:"SIM_CARD",price:i.simPrice.toFixed(2),brand:l,category:v(s,c,s.config.type),variant:p,quantity:1,metric1:"0.00",metric2:i.simPrice.toFixed(2)}),this.event("order-placed",s.product.url,s.config.type),this.dataLayerPush(I)}),this.replayPreviousGaEvent=function(){"/new-postpaid/confirmation/hidden_numbers"!==k.page_name&&"/confirmation/extension"!==k.page_name&&(s.get("GTM-testing-changes")&&this.dataLayerPush({ecommerce:null}),this.dataLayerPush(k))},this.dataLayerPush=function(e){var t=lowerCaseObjectValues(angular.copy(e),!0,["originalLocation"]);window.dataLayer.push(t)},this.fireGaInteraction=function(e,t){s.get("GTM-testing-changes")&&D.dataLayerPush({ecommerce:null}),D.dataLayerPush(_objectSpread({event:"gtm visitor interaction",interaction_name:e},t))},this.fireGaEvent=function(e,n,i,r,a,c,d){var u=this;S&&(clearTimeout(S),S=!1);var l=n||k.page_name,p={event:e,page_title:window.document.title,page_name:l,page_type:i||k.page_type,page_url:removeNumbersFromPath(r||window.location.href),page_referrer:k.page_url,page_language:P.language,viewing_mode:P.mode,user_status:P.userType,visitor_id:P.visitorId,account_id:P.accountId,ever_logged_in:P.everLoggedIn};(l.indexOf("/topup/success")>-1||l.indexOf("/topup-success")>-1)&&(p.topup_amount=t.search().amount);var g=[],f=[];l.startsWith("/product/")&&g.push(l.split("/product/")[1].split("?")[0].split("#")[0]),l.startsWith("/home-internet-offer")?(g.push("yallo_home_4g"),g.push("yallo_home_5g")):l.startsWith("/home-internet")?(g.push("yallo_home_4g"),g.push("yallo_home_5g"),g.push("yallo_home_max_fiber")):l.startsWith("/internet-home-offer")?g.push("yallo_home_4g"):l.startsWith("/homeinternet5g-offer")&&g.push("yallo_home_5g"),l.startsWith("/internet-go")&&(g.push("yallo_go"),f.push("2107")),l.startsWith("/device/")&&f.push(o.deviceId),(g.length||f.length)&&this.productsService&&this.productsService.data&&this.productsService.data.products&&(p.ecommerce={detail:{products:g.map(function(e){return u.productsService.data.products[e]}).filter(Boolean).map(function(e){return{name:e.productName,brand:"new plan",category:m(y(e)),variant:y(e)}}).concat(f.map(function(e){return u.productsService.data.devices[e]}).filter(Boolean).map(function(e){return{name:e.deviceName,brand:"new plan",category:"device/mobile phone/monthly charges and online payment",variant:"postpaid mobile plan"}}))}}),a&&(p.interaction_name=a),c&&(p.tab_name=c),d&&(k=p),s.get("GTM-testing-changes")&&this.dataLayerPush({ecommerce:null}),this.dataLayerPush(p)},this.customEvent=function(e,t,n,o){var i={event:e,interaction_name:t,current_tab:n,tab_switched_to:o};this.dataLayerPush(i)},this.event=function(e,n,o,r){if("server_error"!==e&&(i.agentLoggedIn&&(e+="_pos"),(t.path().indexOf("/extend-postpaid")>-1||t.path().indexOf("/add-promo")>-1)&&(e+="_extension"),t.path().indexOf("/change-postpaid")>-1&&(e+="_change")),1*o!=="-1"){var a={event:"visitor interaction",event_category:e,event_action:n,event_label:o};(window.isTest&&!a.event_category||!a.event_category)&&(alert("spotted undefined GA event check logs"),console.error(a));for(var c in r)a[c]=r[c];s.get("GTM-testing-changes")&&this.dataLayerPush({ecommerce:null}),this.dataLayerPush(a)}},this.setDimention=function(e,t){P[e]=t},this.dataLayerPush({originalLocation:document.location.protocol+"//"+document.location.hostname+document.location.pathname+document.location.search}),this.getCookies=function(t){return{_fbp:r.get("_fbp"),_fbc:r.get("_fbc"),_ga:r.get("_ga"),_gid:r.get("_gid"),orderTrackingId:t,gclid:e.gclid||a.get("gclid"),fbclid:e.fbclid||a.get("fbclid"),client_user_agent:navigator.userAgent,event_source_url:location.href}},this.addCustomCookies=function(t,n,o,i,c,d,u,l){if(!e.isPos&&s.get("Ayma-google-tag-manager-changes")){var p,g,f,h=a.get("offerDetails");o=h?h.area:"overview",null!==(p=r.get("conversion_path_click"))&&void 0!==p&&p.includes("footer")&&s.get("Ayma-google-tag-manager-changes-2")&&(o="footer");var m=t;"purchase"===t&&(m="purchase new product"),"add_to_cart"===t&&(m="add product to cart"),"begin_checkout"===t&&(m="begin checkout "),cookieOptions.expires=(new Date).addHours(2);var v;i&&null!==i&&void 0!==i&&i.products&&(Object.values(i.config.products)[0].device&&Object.values(i.config.products)[0].device.deviceName,Object.values(i.config.products)[0].promotion&&(v=Object.values(i.config.products)[0].promotion.code));var b=(null===(g=this.checkoutService.orderData.config)||void 0===g?void 0:null===(f=g.subscription)||void 0===f?void 0:f.getCurrentDiscountPromo())||null;b&&(v=b.promoName);var w="";s.get("Ayma-google-tag-manager-changes-2")&&u&&(w=" - "+u);var C={selfcare_conversion_path:o?m+" - "+o+w:t,selfcare_offer_type:h?h.offerType:"unavailable",selfcare_offer_tag:h?h.offerTag:"unavailable",selfcare_product_name:n||"unavailable"};if(s.get("Ayma-google-tag-manager-changes-2")){var y;C.selfcare_device=d||n||"unavailable",C.selfcare_promo_code=v||c||"unavailable","overview"!==o||d||(C.selfcare_device="unavailable"),null!==h&&void 0!==h&&h.isAddDevice&&(C.selfcare_product_name="unavailable",C.selfcare_promo_code="unavailable"),d&&"purchase"===t&&l?C.transactionId=l:"purchase"===t&&(C.transactionId="unavailable"),null!==(y=r.get("conversion_path_click"))&&void 0!==y&&y.includes("change plan")&&(C.selfcare_device="unavailable")}r.putObject(t,C,cookieOptions)}},this.conversionPathTracking=function(t,n,o,i,a,c){if(!e.isPos&&s.get("Ayma-google-tag-manager-changes")){cookieOptions.expires=(new Date).addHours(2);var d={selfcare_conversion_path:o?o+" - "+i:"purchase new product - overview",selfcare_offer_type:n||"unavailable",selfcare_offer_tag:"unavailable",selfcare_product_name:t||"unavailable"};s.get("Ayma-google-tag-manager-changes-2")&&(d.selfcare_device="unavailable",d.selfcare_promo_code="unavailable"),r.putObject("conversion_path_click",d,cookieOptions),a&&(d={event:"gtm visitor interaction",interaction_name:"selfcare conversion path click",sc_conversion_path_click:"purchase new product",sc_area_clicked:"overview",sc_link_name:t,sc_product_tab:i,sc_overview_tab:"unavailable",sc_offer_tag:"unavailable",sc_offer_type:"unavailable"},s.get("Ayma-google-tag-manager-changes-2")&&(d.selfcare_device="unavailable",d.selfcare_promo_code="unavailable")),c||this.dataLayerPush(d)}}}]),app.service("AppRate",["$translate","State","$rootScope","Storage","Language",function(e,t,n,o,i){function r(){s={"lebara-android-pos":{appId:"ch.lebara.pos",appIconText:"Lebara Partner"},"lebara-android-selfcare":{appId:"ch.lebara.app",appIconText:"Lebara"},"lebara-ios-pos":{appId:"ch.lebara.Lebara-POS",appIconText:"Lebara Partner",appleID:1091199954},"lebara-ios-selfcare":{appId:"ch.lebara.Lebara",appIconText:"Lebara",appleID:959484194}}["".concat(brand,"-").concat(window.cordova.platformId,"-").concat(window.isPos?"pos":"selfcare")],AppRate.setPreferences({displayAppName:"lebara"===brand?"Lebara":"yallo",simpleMode:!1,reviewType:{ios:"InAppReview",android:"InAppReview"},storeAppURL:{ios:s.appleID||void 0,android:"market://details?id="+s.appId},customLocale:{title:e.instant("feedbacktitle"),message:e.instant("feedbackmessage"),cancelButtonLabel:e.instant("feedbackcancelButtonLabel"),laterButtonLabel:e.instant("feedbacklaterButtonLabel"),rateButtonLabel:e.instant("feedbackrateButtonLabel"),yesButtonLabel:e.instant("feedbackyesButtonLabel"),noButtonLabel:e.instant("feedbacknoButtonLabel"),appRatePromptTitle:e.instant("feedbackappRatePromptTitle"),feedbackPromptTitle:e.instant("feedbackfeedbackPromptTitle")},callbacks:{handleNegativeFeedback:function(){var e={de:"Liebes%20".concat(brand,"-Team%2C%20ich%20habe%20ein%20Problem%20innerhalb%20der%20App!&body=%0D%0A%0D%0AMit%20freundlichen%20Gr%C3%BC%C3%9Fen%2C"),fr:"Ch%C3%A8re%20%C3%A9quipe%20".concat(brand,"%2C%20j'ai%20un%20probl%C3%A8me%20avec%20l'application%20!&body=%0D%0A%0D%0ASalutations%2C"),en:"Dear%20".concat(brand,"%20team%2C%20I%20have%20an%20issue%20inside%20the%20app!&body=%0D%0A%0D%0ABest%20regards%2C"),it:"Caro%20team%20di%20".concat(brand,"%2C%20ho%20un%20problema%20all'interno%20dell'app!&body=%0D%0A%0D%0ACordiali%20saluti%2C")},t="mailto:info@".concat(brand,".ch?subject=").concat(e[i.data.current]);window.cordova.InAppBrowser.open(t,"_system","location=no,footer=no,hidenavigationbuttons=yes,hideurlbar=yes")},onRateDialogShow:function(e){e(1)}}})}var a=this;a.canPrompt=!1;var s,c=new Date,d="version-"+c.getFullYear()+"-"+Math.floor((c.getMonth()+1)/4),u=!1;n.app&&!o.get(d)&&(Promise.all([t.returnWhenCordovaLoaded(),t.returnWhenLanguageLoaded()]).then(function(){window.cordova&&window.AppRate&&window.AppRate.setPreferences&&r()}),n.$on("inactivitySince",function(e,n){n>5e3&&a.canPrompt&&t.customerLoggedIn&&s&&!u&&(u=!0,AppRate.promptForRating(),o.set(d,1))}),n.$on("doneCheckingCustomerLoggedIn",function(e){e&&setTimeout(function(){return a.canPrompt=!0},45e3)}))}]),app.service("Authentication",["$http","Language","Notifications","Storage","$rootScope","State","$q","$location","$cookies","$injector",function(e,t,n,o,i,r,a,s,c,d){var u=this;this.newIdentityEndpointSelfcare=window.microServiceEndpoint+"identity/selfcare/",this.newIdentityEndpointPos=window.microServiceEndpoint+"identity/pos/",this.selfcareToken=void 0,this.endpoint=window.microServiceEndpoint+"auth/",this.brandKey="LEB",this.renewing={},this.checkIfEmailExists=function(e){return u.doPost("findExisting/email",{email:e,brandKey:u.brandKey},{dontShowError:!0})},this.loginMsisdn=function(e){var n={method:"phone",value:e,brand:window.brand,language:t.data.current};return u.doPostV1(u.newIdentityEndpointSelfcare+"login",n).then(function(e){return e||!1})},this.loginEmail=function(e,n){var o={method:"email",value:e,brand:window.brand,language:t.data.current};return u.doPostV1(u.newIdentityEndpointSelfcare+"login",o,{returnError:!0}).then(function(e){return e||!1})},this.checkCode=function(e,t){var n={secret:t,code:e};return u.doPostV1(u.newIdentityEndpointSelfcare+"validate",n,{returnError:!0}).then(function(e){return"ERR_TOO_MANY_CODE_REQUESTS"===e.error?"ERR_TOO_MANY_CODE_REQUESTS":e.error?u.handleError(e.error):e.accessToken?(u.selfcareToken=e.accessToken,i.$emit("clearRFEToken"),e.accessToken):void 0})},this.selfcareTokenLogin=function(e,t){return u.doPostV1(u.newIdentityEndpointSelfcare+"token",{token:e,brand:window.brand}).then(function(e){return!!e.accessToken&&(u.selfcareToken=e.accessToken,!0)})},this.loginUsername=function(e,t){if(u.posToken)return u.logoutPos().then(function(){return u.loginUsername(e,t)});var n={value:e,password:t,brand:window.brand,method:"credential",language:window.lang};return u.doPostV1(u.newIdentityEndpointSelfcare+"login",n).then(function(e){return!!e.secret&&u.doPostV1(u.newIdentityEndpointSelfcare+"validate",{secret:e.secret,code:"cred"}).then(function(e){return!!e.accessToken&&(u.selfcareToken=e.accessToken,i.$emit("clearRFEToken"),!0)})})},this.posUsernameLogin=function(e,t,n){var o={brand:window.brand,username:e,password:t,tempChannel:n};return u.doPostV1(u.newIdentityEndpointPos+"login",o).then(function(e){return!!e.secret&&u.doPostV1(u.newIdentityEndpointPos+"validate",{secret:e.secret}).then(function(e){return!!e.accessToken&&(u.posToken=e.accessToken,i.$emit("clearRFEToken"),!0)})})},this.posSsoLogin=function(e){return u.doPostV1(u.newIdentityEndpointPos+"token",{brand:window.brand,token:e}).then(function(e){return!!e.accessToken&&(u.posToken=e.accessToken,i.$emit("clearRFEToken"),!0)})},this.posFindCustomerMsisdn=function(e){return u.loginMsisdn(e)},this.posFindCustomerEmail=function(e,t){return u.loginEmail(e,t)},this.checkCodePos=function(e,t){return u.checkCode(e,t).then(function(e){if(u.selfcareToken)return loadScript("/assets/other/jwt-decode.min.js").then(function(){var e=jwt_decode(u.selfcareToken);return!!e.details.username&&(o.set("x-pos-cust-username",e.details.username),u.selfcareToken=void 0,!0)})})},this.doPostV1=function(t,n,o){return o||(o={}),e.post(t,n,{headers:o.headers}).then(function(e){return e.data}).catch(function(e){var t;if(console.log(e),o.returnError)return e.data;var n=(null===e||void 0===e?void 0:null===(t=e.data)||void 0===t?void 0:t.error)||(null===e||void 0===e?void 0:e.error);return n&&u.handleError(n,o.dontShowError),!1})},this.doPost=function(t,n,o){var i;return o||(o={}),null!==(i=o.headers)&&void 0!==i&&i.Authorization&&(o.headers.Authorization=u.posToken),e.post(t,n,{headers:o.headers}).then(function(e){return o.returnError?e.data:e.data.status?e.data.data:u.handleError(e.data.errorDesc,o.dontShowError)}).catch(function(e){var i
;return console.log(e),"ERR_UNAUTHOZIED_ACCESS"!==(null===e||void 0===e?void 0:null===(i=e.data)||void 0===i?void 0:i.errorDesc)||o.isRetry?(u.handleHttpError(e,o.dontShowError),!1):u.renewToken(u.posToken,"posToken").then(function(){return u.doPost(t,n,_objectSpread({isRetry:!0},o))})})},this.handleError=function(e,t){return t||n.add("error_"+e,"bad"),console.log(e),!["ERR_INVALID_CODE","ERR_TOO_MANY_CODE_REQUESTS","ERR_PLEASE_USE_EMAIL_METHOD","ERR_INVALID_USERNAME_OR_PASSWORD","ERR_INVALID_MSISDN","ERR_INVALID_TOKEN"].includes(e)&&(throwSafe(e),!1)},this.handleHttpError=function(e,t){throwSafe(e),t||n.add("error","bad")},this.renewToken=function(t){if(u.renewing[t])return r.waitForEvent("renewedToken_"+t);u.renewing[t]=!0,u.renewingTokens=!0;var n=("pos"===t?u.newIdentityEndpointPos:u.newIdentityEndpointSelfcare)+"refresh-token";return e.post(n).then(function(e){if(200==e.status&&e.data.accessToken){var n=e.data.accessToken;return u.renewingTokens=!1,"selfcare"===t?(console.log("updating selfcare token"),u.selfcareToken=n):"pos"===t&&(console.log("updating pos token"),u.posToken=n||void 0),u.renewing[t]=!1,void i.$emit("renewedToken_"+t)}}).catch(function(e){return console.warn(e),u.renewingTokens=!1,u.renewing[t]=!1,i.$emit("renewedToken_"+t,!1),!1})},this.logoutPos=function(n){return console.warn("logout pos"),e.post(u.newIdentityEndpointPos+"logout",{}).then(function(e){window.location.href=null!==n?window.newPosEndpoint+"/"+t.data.current+"/auth/login?tempChannel="+n:window.newPosEndpoint+"/"+t.data.current+"/auth/login",console.warn("logout pos success"),u.posToken=void 0}).catch(function(e){console.error("Error:",e)})},this.logoutSelfcare=function(){return console.info("logout selfcare started"),e.post(u.newIdentityEndpointSelfcare+"logout",{}).then(function(e){console.warn("logout selfcare success"),u.selfcareToken=void 0,o.remove("authSelfcareToken"),i.$emit("clearRFEToken"),i.$emit("accountNotLoggedin")}).catch(function(e){console.error("Error:",e)})}}]),app.service("BootloaderDistributer",["$rootScope","$q","Products","SavingsOptions","Promotions","State","Countries","$timeout","FeatureFlags",function(e,t,n,o,i,r,a,s,c){var d=this;if(this.init=function(s){var c=t.defer();return a.addCountries(s.countries,s.nationalities||{}),n.addProducts(s.products),n.addDevices(s.devices),n.getBestConfigs(),o.processOptions(s.buyableOptions),e.$emit("bootloaderInitialDone"),r.bootloaderInitialDone=!0,i.returnWhenPromosLoaded().then(function(){n.findBest(),c.resolve(!0),r.bootloaderDone=!0,e.$emit("bootloaderDone")}),c.promise},r.bootloaderRawData)this.init(r.bootloaderRawData);else var u=e.$on("bootloaderRawDataIn",function(e,t){d.init(t),u()})}]),app.service("Bootloader",["$q","Network","State","$rootScope",function(e,t,n,o){this.init=function(){return n.bootloaderDone?e.resolve():n.bootloaderStarted?n.returnWhenBootloaderDone():(n.bootloaderStarted=!0,this.doBootloader())},this.doBootloader=function(e){var n=this,o=window.rfeBootEndPoint+"rest/service/";return t.post("bootloader",{},e?10:0,void 0,o,void 0,void 0,void 0,!e).then(function(t){return n.handleResponse(t,e)})},this.handleResponse=function(e,t){if(e)return n.bootloaderRawData=e,o.$emit("bootloaderRawDataIn",e);if(!t)return this.doBootloader(!0);throw"criticalRfeError - "+JSON.stringify(e)}}]),app.service("Camera",["$rootScope","$q","$timeout",function(e,t,n){var o=this;["; SM-G","FIG-LX1","SM-A320FL","WAS-LX2J","Nokia","ONEPLUS"].find(function(e){return-1!==navigator.userAgent.indexOf(e)}),this.mobileCamera=(isAndroid||isIOS)&&!e.app,this.stopCamera=function(e){return e.getTracks().map(function(e){return e.stop&&e.stop()})},this.getConstraints=function(e,n){if(n)return t.resolve({video:n});if("user"===e)return t.resolve({video:e});var i={video:{width:1920,height:1920,facingMode:e}},r=["; SM-G","FIG-LX1","SM-A320FL","WAS-LX2J","Nokia","ONEPLUS"];return o.isAndroid&&!r.find(function(e){return-1!==navigator.userAgent.indexOf(e)})&&(i.video.width=2560,i.video.height=2560),-1!==navigator.userAgent.indexOf("SM-G98")&&(i.video.width=1920,i.video.height=1080),navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then(function(e){return e.filter(function(e){return"videoinput"===e.kind})}).then(function(e){if(-1!==navigator.userAgent.indexOf(" SM-")&&-1===navigator.userAgent.indexOf(" SM-G996"))return e.find(function(e){return"camera2 0, facing back"===e.label});var t=e.filter(function(e){return-1!==e.label.indexOf("facing back")});return 1===t.length?t[0]:e.find(function(e){return"camera2 2, facing back"===e.label})}).then(function(e){return e?{video:_objectSpread(_objectSpread({},i.video),{},{deviceId:e.deviceId})}:i}):t.resolve(i)},this.startCamera=function(e,n){return o.getConstraints(e,n||"user"===e).then(function(e){var n;if(null===(n=window.navigator.mediaDevices)||void 0===n||!n.getUserMedia){var o=t.defer();return window.navigator.getUserMedia&&window.navigator.getUserMedia(e,o.resolve,o.reject),navigator.webkitGetUserMedia&&navigator.webkitGetUserMedia(e,o.resolve,o.reject),o.promise}return window.navigator.mediaDevices.getUserMedia(e)})},this.checkIfDeviceHasCamera=function(){var e=t.defer(),o=!1;return navigator.mediaDevices?(navigator.mediaDevices.enumerateDevices().then(function(t){o||(o=!0,e.resolve(!!t.find(function(e){return"videoinput"===e.kind})))}),n(function(){o||(o=!0,e.resolve(!1))},1e3),e.promise):t.resolve(!1)}}]),app.service("CaptureInfo",["$http",function(e){var t=this;this.endpoint=window.microServiceEndpoint+"capture-info/",this.submitOrderDetails=function(e){return t.doPost("submitOrderDetails",e)},this.submitLineCheckDetails=function(e){return t.doPost("submitLineCheckDetails",e)},this.submitContestDetails=function(e){return t.doPost("submitContestDetails",e)},this.doPost=function(n,o,i){var r=t.endpoint+n;return i||(i={}),e.post(r,o,{headers:i.headers}).then(function(e){if(i.returnError)return e.data;if(!e.data.status)throw e.data;return e.data.data}).catch(function(e){throw throwSafe(e),e})}}]),app.service("Channels",["Cms",function(e){var t=this;this.channels=e.getByType("channel").then(function(e){return(null===e||void 0===e?void 0:e.map(function(e){return{code:e.data.channel_code,id:e.id,name:e.data.channel_name,canPerformRelocation:e.data.can_perform_relocation,canPerformRateplanChange:e.data.can_perform_hfc_upgrade_or_downgrade,SpecialLinkPromos:e.data.special_link_promos}}))||[]}),this.getChannels=function(){return t.channels}}]),app.service("Chat",["$timeout","Popup","Notifications","$rootScope","$q","Analytics","OpeningTimes","Storage","Language","$location","ZendeskChat","State",function(e,t,n,o,i,r,a,s,c,d,u,l){function p(t,n){(g.tryShowChatInvite||n)&&(t<g.showInviteTime&&!n||h&&!n||(h=!0,g.tryShowChatInvite=!1,g.checkAgentAvailability(brand+"_sales",!0,!0).then(function(t){if(window.isTest&&(t=!0),g.showChatInvite=t,e(),t)return i.resolve(t)}).then(function(e){h=!1})))}var g=this;u.chat=this;var f=0;g.activeChat=s.get("activeChat",2),this.map={lebara_sales:"saleschat",lebara_retention:"carechat"},this.agentAvailability={},this.agentStatus={},this.agentShouldBeAvailable={},this.agentAvailabilityLoadingStatus={},this.loading={},this.showChatInvite=!1,this.activeChat=!1,this.showConfirm=!1,this.shouldShowConfirm=!1,this.tryShowChatInvite=!1,this.jwt="",this.namePopup=new t("namePopup","chat-name-popup.html",{title:"namePopupTitle"}),this.salesCallPopup=new t("salesCallPopup","sales-call-popup.html",{chat:g},{tomorrow:tomorrow,show:function(){var e="";g.isWinContext?e="salesCall":!g.isSupportContext||g.isSalesContext||g.isCancellationContext?g.isSupportContext||!g.isSalesContext||g.isCancellationContext?g.isSupportContext||g.isSalesContext||!g.isCancellationContext||(e="cancellationCall"):e="salesCall":e="careCall",g.salesCallPopup.data.title=e}}),o.$on("$locationChangeSuccess",function(e,t){g.hideAll=-1!==t.indexOf("/internet"),g.processLocationChange()}),this.processLocationChange=function(){var e=d.path().substring(3),t=!1,n=!1,i=!1,r=!1,s=!1;"/account/topup"!==e&&-1===e.indexOf("/support")||(n=!0),(e.indexOf("360001703758")>-1||e.indexOf("360001703738")>-1||e.indexOf("/account/porting-date")>-1)&&(r=!0),o.checkoutMode&&o.checkoutMode.active||"/for-you"===e||"/mobile-products"===e||"/postpaid-products"===e||-1!==e.indexOf("/topup")||"/internet-products"===e||"/swype-info-page"===e||"/roaming"===e||"/options"===e||-1!==e.indexOf("/option/")||-1!==e.indexOf("/device/")||-1!==e.indexOf("/product/")||"/prepaid"===e&&-1===e.indexOf("/idv")?(t=!0,this.checkAgentAvailability("lebara_sales")):this.agentShouldBeAvailable.lebara_sales=!1,-1===e.indexOf("/account/change-subscription/")&&-1===e.indexOf("/eshop/extend-postpaid/")&&-1===e.indexOf("/eshop/add-promo/")&&-1===e.indexOf("/eshop/change-postpaid/")||(i=!0,n=!0,t=!1),-1===e.indexOf("/internet-deal")&&-1===e.indexOf("/sunrise-internet/")&&-1===e.indexOf("/hidden/")||(s=!0,this.checkAgentAvailability(brand+"_sales")),-1!==e.indexOf("/idv")&&(t=!1),window.isTest&&(window.proActiveSalesChatCheckout=2e4),g.showChatInvite=!1;var c=!1,l=0;if(t?a.check("salescall").then(function(e){window.isTest&&(e={model:!0}),e&&e.model&&(g.tryShowChatInvite=!0,g.showInviteTime=1e4)}):-1!==e.indexOf("/account/porting-date")&&(c=!0,l=1e4),g.tryShowChatInvite=c,g.showInviteTime=l,g.isSalesContext=t,g.isSupportContext=n,g.isCancellationContext=i,g.isRetentionContext=r,g.isWinContext=s,(g.isSupportContext||g.isRetentionContext)&&-1===e.indexOf("account/porting-date")){var p=g.isRetentionContex;u.loadingZendesk||u.startZendesk(p,g.isRetentionContext?"retention":"support",!0)}else u.hideZendesk()},o.$on("exitIntent",function(t,n){-1!==["navigateOutOfCheckout","navigateBackCheckout"].indexOf(n)&&(p(1/0,!0),e())});var h=!1;o.$on("inactivitySince",function(e,t){return p(t,!1)}),this.isCheckingAnyAgentAvailability=function(){for(var e in g.agentAvailabilityLoadingStatus)if(g.agentAvailabilityLoadingStatus[e])return!0;return!1},this.checkAgentAvailability=function(e,t,n){return g.noAgentAvailable=!1,g.activeChat?i.resolve(!1):(t&&(g.agentAvailabilityLoadingStatus[e]=!0),a.check(this.map[e]).then(function(t){var n=i.defer();return window.isTest&&(t={model:!0}),t?(g.agentAvailability[e]=t.model,g.agentShouldBeAvailable[e]=t.model,g.agentAvailabilityLoadingStatus[e]=!1,n.resolve(t.model),n.promise):(g.agentAvailabilityLoadingStatus[e]=!1,i.resolve(!1))}))},this.startSupportCallPopup=function(){g.saveContext(),g.isSupportContext=!0,g.salesCallPopup.functions.hide=function(){return g.restoreContext()},g.salesCallPopup.show()};var m;this.saveContext=function(){m={isSupportContext:g.isSupportContext,isCancellationContext:g.isCancellationContext,isSalesContext:g.isSalesContext};for(var e in m)g[e]=!1},this.restoreContext=function(){for(var e in m)g.salesCallPopup[e]=m[e]},this.startChatPopup=function(e){if(!l.agentLoggedIn){if(e){if(g.agentShouldBeAvailable[e]=!0,-1!==e.indexOf("_support"))return g.startZendesk(!1,e)}else this.processLocationChange();g.noAgentAvailable=!1,g.namePopup.show(),r.dataLayerPush({event:"gtm visitor interaction",chat_initiated:"visitor clicked",interaction_name:"open chat name popup"}),setTimeout(function(){focusField("chatName")},300)}},this.statusUpdate=function(t,n){g.activeChat=t,s.set("activeChat",t,!0);var o={yallo_support:"commence support text chat",yallo_sales:"commence sales text chat",yallo_video:"commence sales video chat",lebara_sales:"commence support text chat",sunrise_giga_sales:"commence sunrise giga sales text chat"};t?(f=Date.now(),r.dataLayerPush({event:"gtm visitor interaction",commence_chat_type:o[n],interaction_name:"commence chat conversation"})):r.dataLayerPush({event:"gtm visitor interaction",interaction_name:"close chat window",chat_duration:Math.floor((Date.now()-f)/1e3)}),e()},this.startChat=function(t,r,a){return l.agentLoggedIn?i.reject("Not for agent"):(g.loading[t]=!0,"yallo_support"===t?(window.location.href="https://support.yallo.ch/hc/".concat(o.zendeskLang),i.resolve("opened")):g.checkAgentAvailability(t,!0).then(function(o){return window.isTest&&(o=!0),o||a?o||r?u.startZendesk(!0,t).then(function(n){g.loading[t]=!1,g.namePopup.active&&g.namePopup.hide(),e()}).catch(function(e){n.add("error","bad"),g.loading[t]=!1}):n.add("noAgentsAvailableMessage","good"):(g.namePopup.show(),g.loading[t]=!1,g.noAgentAvailable=!0,o)}).catch(function(e){throwSafe(e,"55-id")}))},this.processLocationChange(),this.showChat=function(){return(g.isWinContext||g.isSalesContext||g.isSupportContext&&!g.isCancellationContext)&&!g.activeChat&&g.agentShouldBeAvailable.lebara_sales},this.showCall=function(){return g.isWinContext||g.isSalesContext||g.isSupportContext||g.isCancellationContext}}]),app.service("ZendeskChat",["$rootScope","$location","Language","CustomerAccount","State","$q","$timeout","$translate","FeatureFlags",function(e,t,n,o,i,r,a,s,c){function d(e){return"".concat(brand,"_").concat(e)}function u(t){i.customerLoggedIn?p.prefillZendeskData():"support"===f&&(!e.loginPopup||e.loginPopup.active||t?e.$on("loginPopupReady",function(){return e.loginPopup.show}):(e.noLoginRedirect=!0,e.loginPopup.show(),zE("webWidget","hide")),e.$emit("zendeskShown")),p.isShown=!0,a()}var l=this,p=this;this.jwt="";var g=!1,f="",h={en:"English",de:"German",fr:"French",it:"Italian"},m="yallo"===brand?"https://static.zdassets.com/ekr/snippet.js?key=c1a71664-a75b-4a1e-a35e-8bbb934564d5":"https://static.zdassets.com/ekr/snippet.js?key=8139bf9f-7395-4bc5-9e1d-ed5dfe89b427";e.$on("$locationChangeSuccess",function(e,t){var n="/"+t.split("/").splice(3).join("/"),o={title:n.split("/").pop(),url:n};window.zE&&window.zE("webWidget","updatePath",o)}),e.$on("closingEasyLoginPopup",function(){e.noLoginRedirect&&window.zE&&window.zE("webWidget","show"),p.prefillZendeskData()}),e.$on("customerLogout",function(){l.prefillZendeskData(),window.zE&&window.zE(function(){g&&(t.search(_objectSpread(_objectSpread({},t.search()),{},{loggedout:"true"})),window.location.reload(!0))})}),this.prefillZendeskData=function(){var e=p.getData();window.zE&&window.zE("webWidget","prefill",{name:{value:e.name,readOnly:!!e.name},email:{value:e.email,readOnly:!!e.email},phone:{value:e.phone||"",readOnly:!(!i.customerLoggedIn||!e.phone)}})},this.startZendesk=function(t,o,i){var s=o.split("_").pop();return f=s,l.loadingZendesk=!0,loadScript(m,"ze-snippet").then(function(o){var s=r.defer();if(c.get("YDT-2685-Zendesk-issues"))var l=function(e,t){var n="chatbot_online_"+e,o="chatbot_offline_"+e;zE("webWidget:on","chat:departmentStatus",function(i){if(console.log(i),"yallo Chatbot"===i.name&&"online"===i.status)$zopim.livechat.departments.filter(),$zopim.livechat.departments.setVisitorDepartment("yallo Chatbot"),zE("webWidget","chat:addTags",[n]),zE("webWidget","chat:removeTags",[o]),zE("webWidget","updateSettings",{webWidget:{chat:{departments:{select:"yallo chatbot"}}}});else if("yallo Chatbot"===i.name&&"online"!==i.status){var r="chatbot_offline_"+e;$zopim.livechat.departments.filter(),$zopim.livechat.departments.setVisitorDepartment("chat yallo support "+t),zE("webWidget","chat:addTags",[r]),zE("webWidget","chat:removeTags",[n]),zE("webWidget","updateSettings",{webWidget:{chat:{departments:{select:"chat yallo support "+t}}}})}})},m=function(){"undefined"==typeof zE||null===zE?(clearInterval(b),p.loadingZendesk=!1):zE(function(){$zopim(function(){"en"==v&&c.get("zendesk-lang")&&(l("EN","English"),p.loadingZendesk=!1),"en-gb"==v?(l("EN","English"),p.loadingZendesk=!1):"de"==v?(l("DE","German"),p.loadingZendesk=!1):"fr"==v?(l("FR","French"),p.loadingZendesk=!1):"it"==v&&(l("IT","Italian"),p.loadingZendesk=!1),zE("webWidget","setLocale",v)}),null!=$zopim.livechat&&(clearInterval(b),p.loadingZendesk=!1)})},v=document.documentElement.lang.toLowerCase(),b=setInterval(m,500);else p.setZendeskDepartment(f),p.setChatLanguage();return p.loadingZendesk=!1,t&&(zE("webWidget","open"),zE("webWidget","show")),i&&zE("webWidget","show"),o?(u(!t),r.resolve()):(window.yolAppHistory.slice(Math.max(window.yolAppHistory.length-10,-1)).map(function(e){var t={title:e.split("/").pop(),url:e};window.zE("webWidget","updatePath",t)}),zE("webWidget:on","chat:start",function(){g=!0,p.chat.statusUpdate(!0,d(f))}),zE("webWidget:on","close",function(){var t,n=window.location.href;(-1!==n.indexOf("/hidden/")||-1!==n.indexOf("/internet-deal/")||-1!==n.indexOf("/sunrise-internet/")||"support"===f&&!p.chat.isSupportContext||"sales"===f&&!p.chat.isSalesContext||"retention"===f&&!p.chat.isRetentionContext||"cancellation"===f&&!p.chat.isCancellationContext||null!==(t=e.checkoutMode)&&void 0!==t&&t.active)&&(zE("webWidget","hide"),p.isShown=!1,a())}),zE("webWidget:on","chat:end",function(){zE("webWidget","hide"),p.chat.statusUpdate(!1,d(f))}),zE("webWidget:on","chat:departmentStatus",function(e){var t,o=n.data.current.toLowerCase(),i=h[n.data.current];"support"===f&&(e.name==="yallo chatbot "+o&&"online"===e.status?t="yallo chatbot "+o:e.name==="yallo chatbot "+o&&"online"!==e.status?t="chat yallo support "+i:console.error("not selectedDepartment"),t&&zE("webWidget","updateSettings",{webWidget:{chat:{departments:{enabled:[""],select:t}}}}))}),zE("webWidget:on","open",function(){s.resolve(),u()}),s.promise)})},this.updateZendeskTitle=function(){var e=0,t="zeTitle".concat(f),o=setInterval(function(){e++;var i=s.instant(t,void 0,void 0,n.data.current);i===t&&e<300||(clearInterval(o),zE("webWidget","updateSettings",{webWidget:{helpCenter:{title:{"*":i}},contactForm:{title:{"*":i}},chat:{title:{"*":i}}}}))},100)},this.setChatLanguage=function(){window.zE&&(window.$zopim&&$zopim.livechat.departments.filter(""),zE("webWidget","setLocale",n.data.current),p.updateZendeskTitle())},this.setZendeskDepartment=function(e){window.zE(function(){$zopim(function(){var t="lebara"===window.brand?"Lebara":window.brand,o=h[n.data.current],i="".concat(t," ").concat(e," ").concat(o);"support"===e&&(i="chat "+t+" support "+o),console.log("setting department to ",i),$zopim.livechat.departments.setVisitorDepartment(i),$zopim.livechat.departments.filter(""),$zopim.livechat.setOnConnected(function(){$zopim.livechat.concierge.setAvatar(window.location.origin+"/assets/favicon/favicon-32x32.png"),$zopim.livechat.concierge.setName(t)})})})},this.hideZendesk=function(){if(window.zE){var e=window.zE&&zE("webWidget:get","display");"hidden"!==e&&"launcher"!==e&&e||window.zE&&zE("webWidget","hide")}},this.getData=function(){var t,n,r,a,s,c=null!==(t=null===(n=o.currentUser)||void 0===n?void 0:n.subscription)&&void 0!==t?t:i.customerLoggedIn?Object.first(o.subscriptions):"",d=i.customerLoggedIn?{email:i.customerLoggedIn?o.accountOwner.emailAddress:null===(r=e.SSOUserData)||void 0===r?void 0:r.email,name:i.customerLoggedIn?"".concat(o.currentUser.firstName," ").concat(o.currentUser.lastName):null===(a=e.SSOUserData)||void 0===a?void 0:a.email,phone:c?c.msisdn:null===(s=e.SSOUserData)||void 0===s?void 0:s.contactNumber,subdomain:brand,brand:brand}:{email:"",name:"",phone:"",subdomain:brand,brand:brand};return i.customerLoggedIn&&(d.accountId=o.accountId,d.subscriptionId=c.id),window.isTest&&(d.test=!0,d.external_id=randomString(20)),d},e.$on("langChangeEnd",function(){return loadScript(m,"ze-snippet").then(function(){l.setChatLanguage()})})}]),app.service("CheckoutCache",["Products","Promotions","SavingsOptions","CustomerAccount","Storage","State",function(e,t,n,o,i,r){this.set=function(e,t,n){if(e.config){var o={billingAddress:e.billingAddress,installationAddress:e.installationAddress,billingCustomerDetails:e.billingCustomerDetails,billingMethod:e.billingMethod,signup:e.signup,validated:e.validated,paymentMethod:e.paymentMethod,stepHistory:[],images:[],config:{}};for(var r in e.images)e.images[r].checkSumValue&&o.images.push(e.images[r].checkSumValue);var a={};for(var s in e.config.products){a[s]={config:e.config.products[s].config.id,subscriptionDetails:e.config.products[s].subscriptionDetails,product:e.config.products[s].product.url,prepaidDevice:e.config.products[s].prepaidDevice,prepaidImei:e.config.products[s].prepaidImei,takeHandsetInsurance:e.config.products[s].takeHandsetInsurance,dontPreselectHandsetInsurance:e.config.products[s].dontPreselectHandsetInsurance,simType:e.config.products[s].simType};var c=e.config.products[s].device;c&&(a[s].device=c.id,c.deviceOption&&(a[s].deviceOption=c.deviceOption),c.imei&&(a[s].deviceImei=c.imei));var d=e.config.products[s].promotion;d&&(a[s].promotion=d.code),a[s].options=[];for(var u in e.config.products[s].options)a[s].options.push(e.config.products[s].options[u].id)}if(o.stepHistory=e.stepHistory,o.manualCcAllowed=e.manualCcAllowed,o.internalOrderId=e.internalOrderId,o.skipConfirmation=e.skipConfirmation,o.canSkipConfirmation=e.canSkipConfirmation,o.fiberLineCheck=e.fiberLineCheck,o.hfcLineCheck=e.hfcLineCheck,o.lineCheckDoneWithAddress=e.lineCheckDoneWithAddress,o.singlePageCheckoutMode=e.singlePageCheckoutMode,o.showContactNumberOnCustomerDataPage=e.showContactNumberOnCustomerDataPage,o.countDownDate=e.countDownDate,o.accessCodeData=e.accessCodeData,o.gdprAllOptIn=e.gdprAllOptIn,o.tmxSessionId=e.tmxSessionId,o.orderTrackingId=e.orderTrackingId,window.testingIgnoreGoBackOneStep&&(e.contractUnsigned&&(o.contractcheckSumValue=e.contractUnsigned.checkSumValue),e.poaUnsigned&&(o.poacheckSumValue=e.poaUnsigned.checkSumValue),o.testingIgnoreGoBackOneStep=!0),e.config.subscription&&(o.config.subscription=e.config.subscription.id),e.config.preToPostSubscription&&(o.config.preToPostSubscription=e.config.preToPostSubscription.id),o.config.products=a,o.config.preCheckoutPath=e.config.preCheckoutPath,o.config.preCheckoutSearch=e.config.preCheckoutSearch,o.config.rateplanChangeData=e.config.rateplanChangeData,n)return o;i.set("checkoutCache",o,!!t)}},this.get=function(){return r.checkCustomerLoggedIn().then(function(){var o=i.get("checkoutCache",2);if(o){for(var r in o.config.products){o.config.products[r].product=e.data.products[o.config.products[r].product]||e.data.lightProducts[o.config.products[r].product],o.config.products[r].config=e.data.productConfigs[o.config.products[r].config]||e.data.lightProductConfigs[o.config.products[r].config],o.config.products[r].device&&(o.config.products[r].device=e.data.devices[o.config.products[r].device],o.config.products[r].device.deviceOption=o.config.products[r].deviceOption,o.config.products[r].device.imei=o.config.products[r].deviceImei);var a={};for(var s in o.config.products[r].options)a[o.config.products[r].options[s]]=n.options[o.config.products[r].options[s]];if(o.config.products[r].options=a,o.config.products[r].promotion){var c=t.findPromotionByCode(o.config.products[r].promotion);o.config.products[r].promotion=c}}return o}})},this.update=function(e){return this.get().then(function(t){if(t){e.billingAddress=t.billingAddress,e.installationAddress=t.installationAddress,e.billingMethod=t.billingMethod,e.paymentMethod=t.paymentMethod,e.validated=t.validated,e.config={},e.config.products=t.config.products,e.config.preCheckoutPath=t.config.preCheckoutPath,e.config.preCheckoutSearch=t.config.preCheckoutSearch,e.config.rateplanChangeData=t.config.rateplanChangeData,e.signup=t.signup,e.stepHistory=t.stepHistory,e.manualCcAllowed=t.manualCcAllowed,e.internalOrderId=t.internalOrderId,e.skipConfirmation=t.skipConfirmation,e.canSkipConfirmation=t.canSkipConfirmation,e.fiberLineCheck=t.fiberLineCheck,e.hfcLineCheck=t.hfcLineCheck,e.lineCheckDoneWithAddress=t.lineCheckDoneWithAddress,e.singlePageCheckoutMode=t.singlePageCheckoutMode,e.showContactNumberOnCustomerDataPage=t.showContactNumberOnCustomerDataPage,e.countDownDate=t.countDownDate?new Date(t.countDownDate):void 0,e.accessCodeData=t.accessCodeData,e.images=t.images,e.gdprAllOptIn=t.gdprAllOptIn,e.tmxSessionId=t.tmxSessionId,e.orderTrackingId=t.orderTrackingId,t.testingIgnoreGoBackOneStep&&(window.testingIgnoreGoBackOneStep=!0,t.contractcheckSumValue&&(e.contractUnsigned={checkSumValue:t.contractcheckSumValue,b64:"na"},e.contract={checkSumValue:t.contractcheckSumValue,b64:"na"}),t.poacheckSumValue&&(e.poaUnsigned={checkSumValue:t.poacheckSumValue,b64:"na"},e.poa={checkSumValue:t.poacheckSumValue,b64:"na"})),t.config.subscription&&(e.config.subscription=o.subscriptions[t.config.subscription]),t.config.preToPostSubscription&&(e.config.preToPostSubscription=o.subscriptions[t.config.preToPostSubscription]);for(var n in t.billingCustomerDetails)e.billingCustomerDetails[n]=t.billingCustomerDetails[n];for(var n in t.billingCustomerDetails)e.billingCustomerDetails[n]=t.billingCustomerDetails[n];for(var n in e.config.products)e.config.products[n].ignoreDevicePopup=!0,e.config.products[n].ignoreDefaultPromotion=!0;return e.redoAccessCode=t.redoAccessCode,e}})},this.clear=function(){i.remove("checkoutCache")}}]),app.service("CheckoutRecovery",["Network","$location","CheckoutCache","$translate","$q","Storage","CustomerAccount","$routeParams","Language","$timeout","AgentAccount","CommonData","State","ThreatMetrix","Analytics",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g,f){this.token=void 0,this.version=1,this.init=function(){var t=r.get("checkoutRecoveryToken");t&&(this.token=t,e.checkoutRecoveryToken=this.token)},this.get=function(n,o){var a=this,s=n||t.search().checkoutRecoveryToken;if(s){var c=p.agentLoggedIn?void 0:g.profile();return this.deleteCurrentToken(s).then(function(){var t={token:s};return e.post("get_token_data",t,2,!0,window.oldEshopBasePath,"text/plain",!0,!1).then(function(t){if(t&&!t.errorCode&&t.version==a.version){a.token=s,e.checkoutRecoveryToken=a.token;try{var n=JSON.parse(t.data_string);if(n.tmxSessionId=c,o)return n;n.redoAccessCode=!0;var i=n.recoverPosUserData;if(delete n.recoverPosUserData,r.set("checkoutCache",n,!0),i)return i}catch(e){throwSafe(e,"ID-136")}}})})}return i.resolve()},this.save=function(t){var i=this,g=this.checkoutSteps.getCurrentStepIndex();if(!(g<0)){var h=this.checkoutSteps.getSteps(),m=this.checkoutSteps.steps[g],v=h.length;d(function(){console.log("CheckoutRecovery - async save (10ms delay)");var d=t.billingCustomerDetails.emailAddress,b="eshop"===s.logintype||"self-register"===s.logintype;if((!b||d)&&"change-postpaid"!==s.ordertype&&"add-promo"!==s.ordertype&&"extend-postpaid"!==s.ordertype&&!("pre-to-post"===s.ordertype||p.customerLoggedIn&&b)){var w=Object.first(t.config.products);if(w&&w.config){var C=location.href.split("?")[0];C=C.split("/"+m)[0]+"/"+h[0],i.url=C,m=h[0];var y=n.set(t,!0,!0);p.agentLoggedIn&&p.customerLoggedIn&&(y.recoverPosUserData={username:a.accountOwner.username,dob:a.accountOwner.dob});var D=f.getCookies(y.orderTrackingId);f.dataLayerPush({tracking_cookie:D});var S={token:i.token?i.token:void 0,string:JSON.stringify(y),productName:o.instant("product_".concat(w.config.url,"_title")),promotionName:w.promotion?w.promotion.title:void 0,deviceName:w.device?o.instant("device_".concat(w.device.id,"_title")):void 0,emailAddress:d,currentStep:m,currentStepIndex:g,totalSteps:v,version:i.version,language:c.data.current,url:C,channel:l.realChannel||l.channel,agentUser:p.agentLoggedIn?u.data.username:void 0,cookies:JSON.stringify(D)};e.post("submit_token_data",S,2,!0,window.oldEshopBasePath,"text/plain",!0,!1).then(function(n){n&&!n.errorCode&&n.token?(i.token=n.token,e.checkoutRecoveryToken=i.token,r.set("checkoutRecoveryToken",i.token,!0)):n&&n.errorCode&&i.token&&(delete i.token,delete e.checkoutRecoveryToken,r.remove("checkoutRecoveryToken"),i.save(t,m,g,v,h))})}}},10)}},this.deleteCurrentToken=function(t){if(!this.token||this.token===t)return i.resolve();var n={token:this.token,deleteData:!0};return delete this.token,r.remove("checkoutRecoveryToken"),delete e.checkoutRecoveryToken,e.post("delete_token_data",n,2,!0,window.oldEshopBasePath,"text/plain",!0,!1)},this.init()}]),app.service("CheckoutSteps",["$routeParams","AgentAccount","Checkout","CustomerAccount","$location","Language","$rootScope","$route","CheckoutRecovery","Storage","Analytics","$q","SavingsOptions","State","Products","Promotions","ThreatMetrix","FeatureFlags",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g,f,h,m,v){var b=this;this.steps=[],this.step=void 0,this.doneSteps=[],n.checkoutSteps=this,c.checkoutSteps=this,u.checkoutSteps=this,a.$on("customerLogout",function(){var e,t,o,r;if(n.orderData.accountIdUsed=!1,a.checkoutMode&&a.checkoutMode.active?b.goToStartStep(!0,!1,!1,!0):n.clearOrderData(),null!==(e=n.orderData)&&void 0!==e&&null!==(t=e.config)&&void 0!==t&&t.products){var s=Object.first(n.orderData.config.products);if(null!==s&&void 0!==s&&null!==(o=s.config)&&void 0!==o&&o.hasTag("fiber"))return i.path(g.agentLoggedIn?"/pos":"/");return["yallopremiumtv_chf20_120months",Date.now()<16430976e5?"yallohomemaxfiber4012024with":"xxxx"].includes(null===(r=s.promotion)||void 0===r?void 0:r.code)?i.path((g.agentLoggedIn?"/pos/":"/")+"product/"+s.product.url):void 0}}),a.$on("doneCheckingCustomerLoggedIn",function(e){if(g.customerLoggedIn&&a.checkoutMode&&a.checkoutMode.active&&b.canHaveOrderAfterLogin()){var t=b.getSteps();b.step&&t.indexOf(b.step)<0?b.regenAccessCodeIfNeeded().then(function(e){e&&n.copyCustomerDataToOrderData(e.idCheckRequired,n.orderData),b.goToLastDoneStep();var t=Object.first(n.orderData.config.products);if("yallo_home_max_fiber"===t.config.url&&g.customerLoggedIn&&o.getSubscriptionsByType("postpaid",!0).filter(function(e){return"mobile"===e.getType()}).length){if(!t.product.getValidPromotions(void 0,!0).find(function(e){return e.recurringDiscount>30})){var i=h.findPromotionByCode(Date.now()<16430976e5?"yallohomemaxfiber4012024with":"xxxxx");i&&(t.promotion=i,n.save())}}if("yallo_premium_tv"===t.config.url&&o.applyForFreePremiumTV()){var r=h.findPromotionByCode("yallopremiumtv_chf20_120months");r&&(t.promotion=r,n.save())}}):b.step&&s.reload()}}),this.canHaveOrderAfterLogin=function(){var e;n.orderData.manualCcAllowed=null===o||void 0===o?void 0:null===(e=o.creditCheckData)||void 0===e?void 0:e.manualCcAllowed;var t=n.orderData.config&&!!n.orderData.config.subscription,a=n.orderData&&n.orderData.config?Object.first(n.orderData.config.products):void 0,s=null===a||void 0===a?void 0:a.config.hasTag("fiber");if(t||!a||o.canAddSubscription(s?"postpaid-fiber":a.config.type))if("tv"===(null===a||void 0===a?void 0:a.product.productType)&&o.hasTVSubscription())i.path("/".concat(r.data.current).concat(g.agentLoggedIn?"/pos":"","/double-tv"));else if(a&&!o.isOldEnoughToOrder(a.config)){var c;b.goToError("not-old-enough-to-order",!1,{reason:null===o||void 0===o?void 0:null===(c=o.creditCheckData)||void 0===c?void 0:c.expertReason})}else if(g.customerLoggedIn&&o.onHold&&o.onHold.active)b.goToError("on-hold");else{if(o.isAccountOwner()||g.agentLoggedIn)return!a||!a.device||f.getDevicePrice(a.device,a.config,!!n.orderData.config.subscription).then(function(e){if(!e){var t;return void b.goToError("cant_add_device",!1,{reason:null===o||void 0===o?void 0:null===(t=o.creditCheckData)||void 0===t?void 0:t.expertReason})}return!0});b.goToError("only-owner-can-order",!0)}else{var d;b.goToError("cant-add-subscription",!1,{reason:null===o||void 0===o?void 0:null===(d=o.creditCheckData)||void 0===d?void 0:d.expertReason})}},this.regenAccessCodeIfNeeded=function(){return n.orderData.accessCodeData?(a.showFullScreenLoader=!0,b.regening=!0,n.getAccessCode(!0).then(function(e){return a.showFullScreenLoader=!1,b.regening=!1,e})):l.resolve()},this.getSteps=function(){var e,t;if(!n.orderData.config||this.regening)return[];var o=Object.first(n.orderData.config.products),i=[],r=!!n.orderData.config.preToPostSubscription,a=!!n.orderData.config.subscription,s=o.config.hasTag("fiber"),c=o.config.hasTag("HFC"),d="tv"===o.product.productType,u=n.orderData.accessCodeData;return this.forceIdentification=!1,g.agentLoggedIn||g.customerLoggedIn||window.testNoEmailStep||i.push("email"),g.agentLoggedIn||r||a||s||d||c||i.push("phone-number"),!s||null!==(e=n.orderData.fiberLineCheck)&&void 0!==e&&e.available||i.push("not-available"),!c||null!==(t=n.orderData.hfcLineCheck)&&void 0!==t&&t.available||i.push("not-available"),s&&i.push("oto"),
u&&u.idCheckRequired?(n.orderData.accountIdUsed&&(n.orderData.accountIdUsed=!1,n.orderData.billingCustomerDetails.billingIdDetails={}),this.forceIdentification=!0):u||(this.forceIdentification=!0),a?i.push("extend-data"):i.push("customer-data"),n.orderData.skipConfirmation||(n.shouldShowPaymentOptionsStep()?i.push("payment-options"):i.push("overview")),this.steps=i,this.calcDoneSteps(),i},this.getCurrentStepIndex=function(e){var t=i.path().split("process/")[1];if(!t)return-1;t.indexOf("/")>-1&&(t=t.split("/")[0]);var o=Object.first(n.orderData.config.products),r=this.getSteps().filter(function(t){return!e||("phone-number"!==t||!o.product.hasTag("noMsisdnSelection"))});return this.step=t,r.indexOf(t)},this.calcDoneSteps=function(){this.doneSteps=[];var e,t=n.orderData.stepHistory,o=_createForOfIteratorHelper(this.steps);try{for(o.s();!(e=o.n()).done;){var i=e.value,r=t.indexOf(i);r<0||(this.step==i&&"customer-data"==i||r==t.length-1&&"customer-data"!=i||this.doneSteps.push(i))}}catch(e){o.e(e)}finally{o.f()}},this.goToStep=function(t,o){if(n.orderData.orderTrackingId){var a=u.getCookies(n.orderData.orderTrackingId);u.dataLayerPush({tracking_cookie:a})}if(-1===t)return i.path(n.orderData.config.preCheckoutPath||"/").search(n.orderData.config.preCheckoutSearch||{});if(!t)try{throwSafe("Undefined checkout step : ".concat(this.step," : ").concat(JSON.stringify(this.steps)," : ").concat(JSON.stringify(this.doneSteps)))}catch(e){console.warn(e)}if(!e.ordertype||"undefined"===e.ordertype||void 0===e.ordertype)return void console.warn("Ignoring request to go to "+t+" step because no ordertype is set");var s=r.data.current,c="self-register"==e.logintype;i.search();s+=g.agentLoggedIn?"/pos/":c?"/self-register/":"/eshop/",s+=e.ordertype+"/"+e.productUrl,s+="/process/"+t;var d={ioid:n.orderData.internalOrderId};i.search()["tv-token"]&&(d["tv-token"]=i.search()["tv-token"]),"email"===t&&i.search().openLogin&&(d.openLogin=i.search().openLogin),-1!==i.path().indexOf("/extend-data")||o||i.search().skip?i.path(s).search(d).replace():i.path(s).search(d),n.orderData.stepHistory.indexOf(t)<0&&["overview","payment-options"].indexOf(t)<0&&n.orderData.stepHistory.push(t),"email"!==this.step||!("phone-number"===t||"oto"===t||["yallo_home_supermax_cable_plus_tv","yallo_home_supermax_cable","yallo_home_max_cable_plus_tv","yallo_home_max_cable","yallo_home_cable_m","yallo_home_cable_s","yallo_home_cable_s_plus_tv","yallo_home_cable_m_plus_tv"].indexOf(e.productUrl)>-1)||g.customerLoggedIn||g.customerLoggingIn||-1!==location.pathname.indexOf("process/email")&&window.dataLayer.push({event:"gtm visitor interaction",interaction_name:"website interaction",user_type:"new user funnel",user_previous_path:"visited email page"}),this.step=t},this.goToConfirmation=function(){var n=r.data.current,o="self-register"==e.logintype;n+=g.agentLoggedIn?"/pos/":o?"/self-register/":"/eshop/",n+=e.ordertype+"/"+e.productUrl+"/confirmation",i.path(n).search({}),c.deleteCurrentToken(),g.agentLoggedIn&&d.remove("lastNotCompletedAgentOrderToken_"+t.data.username)},this.goToNextStep=function(){var e=this.getCurrentStepIndex()+1,t=this.getSteps()[e];this.goToStep(t),n.save(),this.calcDoneSteps()},this.goToStartStep=function(e,t,r,a,s){var d=this;n.convertOrderDataToPrefillData();var u=g.agentLoggedIn?void 0:m.profile();n.clearOrderData(a),g.agentLoggedIn||n.prefillIfAvailable(),e||c.deleteCurrentToken(),n.orderData.tmxSessionId=u;var l=n.orderData.config;if(!l)return i.path(g.agentLoggedIn?"/pos":"/");var p=Object.first(l.products),f="tv"===(null===p||void 0===p?void 0:p.product.productType),h=o.eligibleForFreeTvBox(),v=null===p||void 0===p?void 0:p.device;if(f&&h&&(v=!1),g.agentLoggedIn||l&&(l.preToPostSubscription||l.subscription))n.getAccessCode().then(function(e){if(e){var t=d.getSteps(),o=t[0];s&&"email"===o&&(o=t[1]),d.goToStep(o),n.save()}}).catch(function(e){console.error(e),"already_getting_access_code"!==e&&(i.path(g.agentLoggedIn?"/pos":t?"/login":"/").search({}),throwSafe(e,"55-id"))}),!l.preToPostSubscription||g.agentLoggedIn||v||(n.orderData.canSkipConfirmation=!0,n.orderData.skipConfirmation=!0,n.save());else{var b=this.getSteps(),w=b[0];s&&"email"===w&&(w=b[1]),this.goToStep(w,r),n.orderData.canSkipConfirmation=p&&!v&&!g.agentLoggedIn&&!l.subscription,n.orderData.skipConfirmation=n.orderData.canSkipConfirmation,n.save()}},this.goToLastDoneStep=function(){this.getSteps(),this.calcDoneSteps();var e=this.doneSteps[this.doneSteps.length-1];e?this.goToStep(e):this.goToStartStep(!1,!1,!1,!0)},this.goToError=function(t,n,o){o||(o={});var a=["no_devices","already_exists","702","715","718","762","payment","657","614","614-tv","987","server_overloaded","946","620","light","807","manualCreditCheck","eshop-light","4g-suggestion","change-5g-linecheck"];["swype","614","614-tv","987"].includes(t)&&c.deleteCurrentToken();var s="error";a.indexOf(t)>-1&&(s="info");var d=r.data.current;d+=g.agentLoggedIn?"/pos/":"/eshop/",d+=e.ordertype+"/"+e.productUrl+"/process/"+s+"/"+t,-1!==i.path().indexOf("/extend-data")||n?i.path(d).search(o).replace():i.path(d).search(o)}}]),app.service("Checkout",["Analytics","Network","CustomerAccount","CommonData","$location","Storage","$rootScope","MsisdnSearch","Language","Notifications","AgentAccount","$timeout","CheckoutCache","Products","Reporting","State","$q","CheckoutRecovery","$routeParams","Files","SavingsOptions","$interval","SwypeLeads","CustomerOrders","Authentication","Gdpr","ErrorReporting","FeatureFlags",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g,f,h,m,v,b,w,C,y,D,S,I,k,P,T){var O=this,_=this;f.checkoutService=_,e.checkoutService=_,this.docTypes={side1:"ID_FRONT",side2:"ID_BACK",selfie:"ID_VIDEO",contract:"SUBSCRIPTION_SIGNED_CONTRACT_DOC",poa:"SUBSCRIPTION_SIGNED_POA_DOC",contractUnsigned:"UNSIGNED_CONTRACT",poaUnsigned:"UNSIGNED_POA",contractSignature:"CONTRACT_SIGNATURE",poaSignature:"POA_SIGNATURE"},_.orderId="",a.$on("$routeChangeSuccess",function(t,n){if(-1!==i.path().indexOf("/checkout/")||-1!==i.path().indexOf("/product/")||i.hash()||(O.countDownDate=void 0),O.checkoutSteps&&O.orderData.config){var o=_.checkoutSteps.getCurrentStepIndex(),r=_.checkoutSteps.steps[o],a=_.getOrderDevice(),s=window.location.href;if(T.get("GTM-testing-changes")&&-1!==s.indexOf("/process/customer-data")&&(e.checkoutEvent(Object.first(O.orderData.config.products),"checkout",a&&angular.copy(a),r,null,void 0,O.orderData),e.checkoutEvent(Object.first(O.orderData.config.products),"checkout",a&&angular.copy(a),r,null,"begin_checkout",O.orderData)),!T.get("GTM-testing-changes")&&-1!==s.indexOf("/process"))return e.checkoutEvent(Object.first(O.orderData.config.products),"checkout",a&&angular.copy(a),r,null,"begin_checkout",O.orderData);n.params.ordertype&&n.params.productUrl&&-1!==s.indexOf("/checkout")&&e.checkoutEvent(Object.first(O.orderData.config.products),"add",a&&angular.copy(a),r||null,null,void 0,O.orderData)}}),this.convertDocType=function(e){for(var t in this.docTypes)if(this.docTypes[t]==e)return t},this.checkSwitchConfig=function(){if(this.orderData.config){var e=Object.first(this.orderData.config.products),t=e.product.getConfigWithLowestCost();return e.promotion&&!e.promotion.applies(t,this.orderData.config.subscription)||e.config==t?void 0:t}},this.save=function(){v.save(this.orderData),p.set(this.orderData,!0)},this.returnWhenDoneGettingAccessCode=function(){return O.gettingAccessCode?h.waitForEvent("donegettingAccessCode").then(function(){return O.returnWhenDoneGettingAccessCode()}):m.resolve()},this.getAccessCode=function(e){var n=this;return this.returnWhenDoneGettingAccessCode().then(function(){var i,r=Object.first(n.orderData.config.products),s=r.subscriptionDetails.subscriptionType;if(("prePost"==s||"existing"==s)&&!h.customerLoggedIn)return m.reject("customer_is_not_logged_in");if(!s){var c;s=null!==(c=r.config)&&void 0!==c&&c.hasTag("fiber")?h.customerLoggedIn?"bbContractExtention":"newFiber":"existing"}if("porting"===s){if(!r.subscriptionDetails.porting.previousProvider)return m.reject("no_donor_selected");s="postpaid"===r.subscriptionDetails.porting.previousProvider.donorType?"portingFromPostpaid":"portingFromPrepaid"}"prePost"===s&&(s="preToPostpaid"),null!==(i=r.config)&&void 0!==i&&i.hasTag("HFC")&&(s=h.customerLoggedIn&&"change-postpaid"===b.ordertype?"bbContractExtention":"newHFC"),"existing"===s&&(s="contractExtention"),"tv"==r.product.productType&&(s="newTV");var d=h.agentLoggedIn?"POS_ORDER":"ESHOP_ORDER";"self-register"===b.logintype&&(d="RS_ORDER"),h.agentLoggedIn&&u.data.rights.FORCE_SHIPMENT&&(d="OUTBOUND_ORDER");var l={productId:r.config.id,channel:o.channel,accessCodeType:d,returnUrl:"".concat(location.origin).concat(h.agentLoggedIn?"/pos":"/cust","/fetch-images"),scanType:"digital",subscriptionType:s,promotionCode:r.promotion?r.promotion.code:"",deviceId:r.device?r.device.id:""};return h.agentLoggedIn&&(l.agentId=u.data.username),n.gettingAccessCode=!0,t.post("generateAccessCode",l).then(function(t){if(_.gettingAccessCode=!1,a.$emit("donegettingAccessCode"),_.orderData.billingCustomerDetails&&(_.orderData.billingCustomerDetails.idCheckDone=!1,_.orderData.billingCustomerDetails.pixelScanned=!1),t){delete _.orderData.qRCode,delete l.subscriptionType;var n=angular.copy(_.orderData.images);return _.orderData.images={},_.orderData.accessCodeData=t,t.contractSignRequired||t.poaSignRequired?_.orderData.skipConfirmation=!1:_.orderData.canSkipConfirmation&&(_.orderData.skipConfirmation=!0),e&&_.oldAccessCodeData?t.idCheckRequired!==_.oldAccessCodeData.idCheckRequired?t:t.contractSignRequired!==_.oldAccessCodeData.contractSignRequired?t:t.poaSignRequired!==_.oldAccessCodeData.poaSignRequired?t:n&&Object.size(n)?_.reUploadImages(n,t):t:t}return t}).finally(function(){_.gettingAccessCode=!1})})},this.reUploadImages=function(e,t){var n=m.defer(),o=0,i=0;return e.side1&&e.side2&&(e.side2.previousImgCheckSum=e.side1.checkSumValue),this.reUploadImage(e.side1,t.accessCode).then(function(){for(var r in e)["side1","side2","selfie"].indexOf(r)<0||(_.orderData.images[r]=e[r],"side1"!==r&&e[r].b64&&("side2"===r&&(e[r].previousImgCheckSum=e.side1.checkSumValue),o+=1,_.saveCaptureData(_.orderData.images[r],t.accessCode,!0).then(function(){(i+=1)===o&&n.resolve(t)})));o||n.resolve(t)}),n.promise},this.reUploadImage=function(e,t){return e?_.saveCaptureData(e,t,!0):m.resolve()},this.setupOrderData=function(){this.orderData={orderTrackingId:randomString(12),signup:{password:randomString(18)},billingCustomerDetails:{},billingAddress:{},shippingAddress:{},billingMethod:"email",stepHistory:[],images:{},internalOrderId:randomString(12)},this.order&&delete this.order,h.customerLoggedIn&&this.copyCustomerDataToOrderData(!1,this.orderData),this.disableFields=!1},this.prefillIfAvailable=function(){h.customerLoggedIn||this.prefillData&&(this.orderData.billingCustomerDetails=this.prefillData.billingCustomerDetails||{},this.orderData.billingAddress=this.prefillData.billingAddress||{},this.prefillData=void 0)},this.convertOrderDataToPrefillData=function(){this.prefillData||h.customerLoggedIn||this.orderData.billingCustomerDetails&&(this.prefillData={billingCustomerDetails:angular.copy(this.orderData.billingCustomerDetails),billingAddress:angular.copy(this.orderData.billingAddress)})},this.clearOrderData=function(t){var n,o,i,r,s,c,d,u;t&&(this.orderData.fiberLineCheck&&(this.orderData.config.fiberLineCheck=this.orderData.fiberLineCheck),this.orderData.hfcLineCheck&&(this.orderData.config.hfcLineCheck=this.orderData.hfcLineCheck));var l=(null===(n=this.orderData.config)||void 0===n?void 0:null===(o=n.fiberLineCheck)||void 0===o?void 0:o.address)||(null===(i=this.orderData.config)||void 0===i?void 0:null===(r=i.hfcLineCheck)||void 0===r?void 0:r.address);this.orderData.billingCustomerDetails={},this.orderData.billingAddress={},this.orderData.installationAddress=l||{},this.orderData.differentBillingAddress=!1,this.orderData.differentShippingAddress=!1,this.orderData.shippingAddress={},this.orderData.skipConfirmation=!1,this.orderData.canSkipConfirmation=!1,this.orderData.countDownDate=void 0,this.orderData.billingMethod="email",this.orderData.approved=!1,this.orderData.fiberLineCheck=null===(s=this.orderData.config)||void 0===s?void 0:s.fiberLineCheck,this.orderData.hfcLineCheck=null===(c=this.orderData.config)||void 0===c?void 0:c.hfcLineCheck,this.orderData.fiberLineCheck&&(this.orderData.fiberLineCheck.wishDate=dateToObj((new Date).addDays(10),!0)),this.orderData.hfcLineCheck&&(this.orderData.hfcLineCheck.wishDate=dateToObj((new Date).addDays(10),!0)),null!==(d=this.orderData.config)&&void 0!==d&&d.fiberLineCheck&&(null===(u=this.orderData.config)||void 0===u||delete u.fiberLineCheck),this.orderData.images={},this.orderData.firedIdTypesCall=!1,this.orderData.stepHistory=[],this.orderData.internalOrderId=randomString(12),this.orderData.signup={password:randomString(18)},this.orderData.orderTrackingId=randomString(12),this.oldAccessCodeData=this.orderData.accessCodeData,this.orderData.accessCodeData=void 0;var p=e.getCookies(this.orderData.orderTrackingId);e.dataLayerPush({tracking_cookie:p}),h.customerLoggedIn?this.copyCustomerDataToOrderData(!1,this.orderData):a.globalLineCheckResults&&a.globalLineCheckAddress&&!l&&(this.orderData.billingAddress=angular.copy(a.globalLineCheckAddress),this.orderData.lineCheckDoneWithAddress=angular.copy(a.globalLineCheckAddress))},this.getCheckoutData=function(){var e=window.rfeBootEndPoint+"rest/service/";t.post("getCheckoutData",null,10,void 0,e).then(function(e){e&&(o.personalIdTypes=Object.assign(e.postpaidPersonalIdTypes,e.prepaidPersonalIdTypes),o.providers=e.providers),h.checkoutDataLoaded=!0,a.$emit("checkoutDataLoaded")}),t.get("/data/holidays.675297af96.json").then(function(e){e&&(o.holidays=e.holidays)})},this.validateOrder=function(){var o=this,i=Object.first(this.orderData.config.products),r=i.config.hasTag("fiber"),s=i.config.hasTag("HFC"),c="tv"===i.product.productType;if(_.manualCcAllowed=!1,!(_.orderData.firedIdTypesCall||r||c||s)){if(_.orderData.billingCustomerDetails&&_.orderData.billingCustomerDetails.billingIdDetails&&_.orderData.billingCustomerDetails.billingIdDetails.nationality){var p=_.orderData.billingCustomerDetails.billingIdDetails.nationality;return _.getIdTypes(p,void 0,void 0,!0).then(function(e){return e&&e.allowedIdTypes&&e.allowedIdTypes.indexOf(_.orderData.billingCustomerDetails.billingIdDetails.idTypeId)<0&&_.orderData.accessCodeData&&!_.orderData.accessCodeData.idCheckRequired&&(_.orderData.billingCustomerDetails.billingIdDetails.idTypeId=e.allowedIdTypes[0]),_.validateOrder()})}return throwSafe("No nationality set in billingIdDetails","112-id"),m.resolve({errorCode:"no_nationality_in_billing_details"})}if(this.validatingOrder)return m.resolve({errorCode:"was_already_validating"});this.disableFields=!0,this.validatingOrder=!0,delete this.orderData.contract,delete this.orderData.poa;var g=h.agentLoggedIn?"pos":"eshop";"self-register"===b.logintype&&(g="rs");var f=this.createOrderRequest(this.orderData,n,!1,g,"validate");return a.preventNavigation=!0,t.post("validateOrder",f,8,!0).then(function(t){if((i.config.isFiber||i.config.hasTag("HFC")||"tv"===i.product.productType)&&(t.lightProductsOnly=!1),a.preventNavigation=!1,a.allowManualCcCall=!1,_.validatingOrder=!1,t&&!t.errorCode){o.orderData.rfeId=t.rfeId,o.orderData.manualCcAllowed=t.manualCcAllowed;var n=t.remainingPostpaidSubs<=0&&"extend-postpaid"!==b.ordertype;if((i.config.isFiber||i.config.hasTag("HFC"))&&"change-postpaid"!==b.ordertype&&(n=t.remainingBroadBandSubs<=0),"tv"===i.product.productType&&(n=t.remainingTVSubs<=0),null!==t.expertReason&&n&&!t.username){if(!h.agentLoggedIn){if("tv"===i.product.productType)return{errorCode:"614-tv"};var r;return a.allowManualCcCall=t.manualCcAllowedRaw&&(null===(r=o.orderData.images)||void 0===r?void 0:r.side1),{errorCode:"swype"}}if(_.disableFields=!1,o.save(),"tv"===i.product.productType)return{errorCode:o.orderData.manualCcAllowed?"manualCreditCheck":"614-tv",reason:t.expertReason};if(t.lightProductsOnly)return{errorCode:"light",reason:t.expertReason};if(o.orderData.manualCcAllowed||-1!==["ob","ib","et"].indexOf(a.agent.data.realChannel))return o.orderData.manualCcAllowed?o.orderData.manualCcAllowed?{errorCode:"manualCreditCheck",reason:t.expertReason}:{errorCode:"614",reason:t.expertReason}:{errorCode:"swype"};d.add("SwypeNotEligibleMessage","bad",null,3),l(function(){window.location.replace("/pos/existing-customer")},3e3)}if(t.imageDetails&&(!f.devices.length||t.deviceOptions&&t.deviceOptions.length)){var s,c=_createForOfIteratorHelper(t.imageDetails);try{for(c.s();!(s=c.n()).done;){var p=s.value;p.fileType=p.fileType.toLowerCase(),p.b64=p.imageData,delete p.imageData,p.documentType=_.convertDocType(p.docCategory),delete p.docCategory,"contractUnsigned"===p.documentType&&(_.orderData.contract=p,_.orderData.contractUnsigned=angular.copy(p),isIOS||a.app||!h.agentLoggedIn||u.data.rights.FORCE_SHIPMENT||_.printPdf(p.b64,"contract.pdf")),"poaUnsigned"===p.documentType&&(_.orderData.poa=p,_.orderData.poaUnsigned=angular.copy(p),isIOS||a.app||!h.agentLoggedIn||u.data.rights.FORCE_SHIPMENT||_.printPdf(p.b64,"poa.pdf"))}}catch(e){c.e(e)}finally{c.f()}}if(t.onpAuthToken&&(Object.first(_.orderData.config.products).subscriptionDetails.onpAuthToken=t.onpAuthToken),window.testingIgnoreGoBackOneStep&&_.save(),void 0!==t.username&&(h.agentLoggedIn||t.loginToken))return e.event("order","customer already exists"),_.disableFields=!1,h.agentLoggedIn?{errorCode:"already_exists_pos",username:t.username,dob:_.orderData.billingCustomerDetails.dob}:{errorCode:"already_exists",username:t.username,loginToken:t.loginToken};if(t.lightProductsOnly){e.event("order","light only"),_.disableFields=!1;var g="newMsisdn"===f.subscriptionDetails.subscriptionType;return window.dontOfferSwype&&(g=!1),h.agentLoggedIn&&(g=!1),{errorCode:g?"eshop-light":"light",reason:t.expertReason}}if(t.deviceOptions&&f.devices.length){var m;if(!t.deviceOptions.length)return{errorCode:"no_devices",reason:"EXTERNAL_SYSTEM_DOWN"===t.expertReason?t.expertReason:void 0};m=t.deviceOptions.sort(function(e,t){return t.upfrontCost<e.upfrontCost})[0];var v=_.getOrderDevice();return m.devicePricingWarning=!!v.deviceOption&&m.deviceOptionId!=v.deviceOption.deviceOptionId,v.oldDeviceOption=v.deviceOption,v.deviceOption=m,_.disableFields=!1,_.orderData.validated=!0,{errorCode:null}}return _.orderData.config.subscription?_.checkContractExtensionWarning().then(function(){return _.orderData.validated=!0,{errorCode:null}}):(_.orderData.validated=!0,{errorCode:null})}return!t||"614"!==t.errorCode&&"987"!==t.errorCode||h.agentLoggedIn&&!u.data.rights.FORCE_SHIPMENT?(_.disableFields=!1,t):(_.disableFields=!1,{errorCode:"swype"})})},this.checkContractExtensionWarning=function(){if(_.orderData.config)return _.orderData.config.subscription.setActive(),_.orderData.config.subscription.returnWhenDataLoaded().then(function(){_.orderData.config.subscription.includedPromotions&&(_.busy=!1,_.orderData.config.subscription.includedPromotions.length&&Object.first(_.orderData.config.products).promotion?_.orderData.warningMessage="willRemovePromotionExtension":_.orderData.config.subscription.includedPromotions.length&&Object.first(_.orderData.config.products).device&&(_.orderData.warningMessage="willRemovePromotionExtensionDevice"))})},this.checkAllowContinueWithoutDevice=function(){if(!this.orderData||!this.orderData.config)return!1;var e=Object.first(this.orderData.config.products);return!!e&&!e.promotion},this.getOrderDevice=function(){if(this.orderData.config)for(var e in this.orderData.config.products)if(this.orderData.config.products[e].device)return this.orderData.config.products[e].device},this.shouldShowPaymentOptionsStep=function(){if(_.orderData.config){if("tv"===Object.first(_.orderData.config.products).product.productType&&n.eligibleForFreeTvBox())return!1;var e=this.getOrderDevice(),t=e?e.deviceOption:null,o=g.computeAllPrices(_.orderData.config.products,!!_.orderData.config.subscription,"creditCard",u,t,_.orderData.config.rateplanChangeData);return t||o.totalCreditCardCost>0}},this.printPdf=function(e,t){var n=b64toBlob(e);n?w.saveAs2(n,t):d.add("error_couldntDownloadPdf","bad")},this.editCustomerData=function(){this.orderData.validated=!1,this.disableFields=!1,this.agree=!1,e.event("editCustomerData","click")},this.doCheckout=function(){if(this.checkingOut||Object.size(s.searching))return m.reject("already_checking_out_or_searching");if(!this.orderData.validated)return m.reject("orderData_not_validated");var e=h.agentLoggedIn?"pos":"eshop";"self-register"===b.logintype&&(e="rs");var t=this.createOrderRequest(this.orderData,n,this.agree||!this.agbEmail,e,"orderComplete");return t?(this.checkingOut=!0,this.disableFields=!0,this.sendCheckoutCall(t)):m.reject("no_order_obj")},this.sendCheckoutCall=function(e){return a.preventNavigation=!0,t.post("orderComplete",e,5,!0).then(function(t){return a.preventNavigation=!1,_.orderId=t.orderId,_.processCheckoutResponse(t,e)})},this.processCheckoutResponse=function(t,i){if(i.idWillBeChecked=this.orderData.accessCodeData&&this.orderData.accessCodeData.idCheckRequired,_.checkingOut=!1,_.disableFields=!1,!t||t.errorCode||t.username||t.lightProductsOnly)return t.username?h.agentLoggedIn?{errorCode:"already_exists_pos"}:{errorCode:"already_exists"}:t.lightProductsOnly?{errorCode:"light"}:{errorCode:t.errorCode};if("string"==typeof t.paymentNeeded&&"true"===t.paymentNeeded||"boolean"==typeof t.paymentNeeded&&t.paymentNeeded){if(!r.test())return{errorCode:"no_localstorage"};_.checkingOut=!0,p.set(_.orderData,!0);var a=m.defer();return r.set("order_refno",t.dataTrans.refno),loadDatatransScripts(t.dataTrans.dataTransURL,function(){t.language=c.data.current,createDatatransForm(t,c.data.current).then(function(){window.onbeforeunload=function(e){},Datatrans.startPayment({form:"#paymentForm",loaded:function(){},closed:function(){a.resolve({errorCode:"payment_cancelled"}),l(function(){e.event("order","datatrans","close"),_.checkingOut=!1,_.disableFields=!1},2500)},error:function(e){throwSafe(e,"56-id"),_.checkingOut=!1,a.resolve({errorCode:e?JSON.stringify(e):"payment_failed"})}})})}),a.promise}var s,d,v,b,w;_.lastOrder=angular.copy(i),_.lastOrder.matchingId=t.matchingId,console.log(_.lastOrder.matchingId,t),_.lastOrder.accessCodeData=_.orderData.accessCodeData,_.lastOrder.newCustomerUsername=t.newCustomerUsername,_.lastOrder.accessCodeData.idCheckRequired&&"ValidateDigital"===i.validationType&&r.set("idUnderReview",!0);var C=""+Date.now();t.orderId||(t.orderId="order-"+C),_.orderData.config.subscription&&(t.orderId="extension-"+C),_.lastOrder.orderId=t.orderId;var D=h.agentLoggedIn?"pos":i.subscriptionDetails.iccid?"self-registration":"eshop",P=this.getOrderDevice();_.lastOrder.orderTrackingId=_.orderData.orderTrackingId,h.agentLoggedIn||f.sendData(_.lastOrder,D,i.username||t.newCustomerUsername,P),_.lastOrder.pdfData=t.pdfData;var O=Object.first(this.orderData.config.products),A=O.product.url,L=i.subscriptionDetails.subscriptionType,N="new-subscription";if("prePost"===L&&(N="pre-to-post"),"existing"===L){var x,E;N="contract-extension";(null===(x=this.orderData.config.subscription)||void 0===x?void 0:null===(E=x.getProduct())||void 0===E?void 0:E.url)!==A?N="rateplan-change":O.device?N="add-device":!O.config.lockinLength&&O.promotion&&(N="add-promo")}f.reportCioEvent(N,O),i.devices.length&&e.event("order","order-with-device","success"),null===(s=_.orderData.config)||void 0===s||null===(d=s.subscription)||void 0===d||d.setRecommendations({rateplanChangeSuccess:{type:dashToCamel(N),rateplan:A,lockinLengthAdded:O.config.lockinLength,deviceId:null===(v=O.device)||void 0===v?void 0:v.id,promotionCode:null===(b=O.promotion)||void 0===b?void 0:b.code,customerUsername:null===(w=n.accountOwner)||void 0===w?void 0:w.username,customerAccountId:n.accountId,channel:o.realChannel,agentUsername:u.data.username,msisdn:i.subscriptionDetails.msisdn,rateplanChangeProductId:_.orderData.config.subscription.clickedRateplan}}),t.poaPdfData&&(_.lastOrder.poaPdfData=t.poaPdfData);var R,F=_.getOrderDevice();return F&&(R=angular.copy(F.deviceOption),_.lastOrder.devices[0].deviceId=F.id,delete F.deviceOption),_.lastOrder.orderDateTime=new Date,e.event("order","success",t.orderId+""),h.customerLoggedIn&&k.showGdprCheckboxForExistingCustomers&&_.orderData.gdprAllOptIn&&k.updateGdprSettingsOnTransaction(t.orderId).then(function(){return e.event("gdpr","existing-customer-update-settings","success")}).catch(function(t){e.event("gdpr","existing-customer-update-settings","fail"),throwSafe(t,"id-88")}),h.agentLoggedIn||h.customerLoggedIn?h.agentLoggedIn||l(function(){"PICKUP_AT_STORE"===i.shipmentMethod?S.getOrders().then(function(){return S.pickupOrder(t.orderId,n.accountOwner)}):S.getOrders()},500):window.testingMode||window.crisisMode||(h.customerLoggingIn=!0,h.customerLoggingInNoCreditCheck=!0,l(function(){console.log("checkout - async login (delayed by 500ms)"),I.loginUsername(t.newCustomerUsername,i.signup.password).then(function(o){I.selfcareToken&&(k.subscribeAccountWithDefault().then(function(){return e.event("gdpr","account-opt-in-after-order","success")}).catch(function(t){e.event("gdpr","account-opt-in-after-order","fail"),throwSafe(t,"id-89")}),n.getLoginDataFromRfeAndDoLoginResponse().then(function(e){e&&"PICKUP_AT_STORE"===i.shipmentMethod?S.getOrders().then(function(){return S.pickupOrder(t.orderId,n.accountOwner)}):e&&S.getOrders(),console.log("checkout - schedule async customer account refresh in 120s"),y(function(){console.log("checkout - exec async customer account refresh (delayed by 120s)"),h.customerLoggedIn&&n.refreshData(0,!0)},12e4,1)}))})},500)),T.get("GTM-testing-changes")&&l(function(){_.orderData.config&&(e.fireTransactionEvent(t.orderId,_.orderData,R,g.computeAllPrices(_.orderData.config.products,!!_.orderData.config.subscription,"creditCard",u),void 0,n.accountOwner),e.fireTransactionEvent(t.orderId,_.orderData,R,g.computeAllPrices(_.orderData.config.products,!!_.orderData.config.subscription,"creditCard",u),"purchase",n.accountOwner),_.setupOrderData())}),T.get("GTM-testing-changes")||l(function(){_.orderData.config&&(e.fireTransactionEvent(t.orderId,_.orderData,R,g.computeAllPrices(_.orderData.config.products,!!_.orderData.config.subscription,"creditCard",u),"purchase",n.accountOwner),_.setupOrderData())}),h.agentLoggedIn&&h.customerLoggedIn?u.updateExistingCustomer().then(function(){n.doCreditCheck(!0)}):h.customerLoggedIn&&n.refreshData(0,!0).then(function(){n.doCreditCheck(!0)}),t.paymentNeeded,window.orderid=_.lastOrder.orderId,window.revenue=_.getOrderTotal(_.lastOrder),p.clear(),{errorCode:null}},this.getOrderTotal=function(e){return(g.data.productConfigs[e.productId]||g.data.lightProductConfigs[e.productId]).recurringCost},this.startHfcRelocation=function(e,n,o){var i=e.hfc.address;return t.post("startHfcRelocation",{subscriptionId:o,relocationDate:n.toServerJSON(),isNewAddress:!0,waiveRelocationFee:!0,address:{city:i.city,postCode:i.postCode,streetName:i.streetName,streetNumber:i.streetNumber,country:i.country}})},this.createOrderRequest=function(e,t,s,d,l){var p,g,f,m,v={},w=i.search(),y=e.billingCustomerDetails;if("orderComplete"===l&&(v.parentRfeId=e.rfeId),e.accessCodeData.idCheckRequired&&(h.agentLoggedIn?u.data.rights.FORCE_SHIPMENT?v.validationType=e.approved&&e.images&&e.images.side1?"Approved":"Park":v.validationType="Approved":(v.validationType="Park",e.images.side1&&e.images.selfie&&(v.validationType="ValidateDigital"))),e.accessCodeData&&(v.accessCode=e.accessCodeData.accessCode),v.fileCheckSumValues=[],e.accessCodeData&&e.accessCodeData.idCheckRequired&&["Approved","ValidateDigital"].includes(v.validationType))for(var D in e.images)["side1","side2","selfie"].indexOf(e.images[D].documentType)<0||e.images[D].checkSumValue&&v.fileCheckSumValues.push(e.images[D].checkSumValue);if(e.contract&&e.contract.checkSumValue&&e.accessCodeData&&e.accessCodeData.contractSignRequired){if("orderComplete"===l&&!e.contract.signed)return P.debugWarning("rejecting because contract is not signed"),!1;v.fileCheckSumValues.push(e.contract.checkSumValue)}var S;if(e.accessCodeData&&e.accessCodeData.poaSignRequired)if(e.poa&&e.poa.checkSumValue){if(S=e.poa.sendPhysicalPoa?"physical":"digital",e.poa.sendPhysicalPoa||v.fileCheckSumValues.push(e.poa.checkSumValue),"orderComplete"===l&&!e.poa.signed&&!e.poa.sendPhysicalPoa)return P.debugWarning("rejecting because poa is not signed"),!1}else"orderComplete"===l&&(P.debugWarning("Something bad happened. Poa was required but not included."),throwSafe("something bad","57-id"));v.postIdentChargeType="INVOICE",v.postIdentFee=e.accessCodeData.postIdentFee,v.agbSigned=!0,v.username=h.customerLoggedIn?n.accountOwner.username:"",v.buyableOptions=[];var I=Object.first(e.config.products);v.waiveActivationFee=!!I.waiveActivationFee,!h.agentLoggedIn&&null!==(p=a.activationFeesOffered)&&void 0!==p&&p[I.config.url]&&"postpaid"===I.config.type&&(v.waiveActivationFee=!0),window.isTest&&"change-postpaid"===b.ordertype&&_.orderData.config.subscription.recommendations.rateplanChangeProducts.map(function(e){b.productUrl===e.product.url&&(v.waiveActivationFee=e.waiveFee)});for(var D in I.options){var k=0;window.isTest&&("1255"===I.options[D].id&&(k=2),"1297"===I.options[D].id&&(k=2),"1429"===I.options[D].id&&(k=2),"1179"===I.options[D].id&&(k=3)),"1175"===I.options[D].id&&"1059"===I.config.id&&(k=1),v.buyableOptions.push({optionId:I.options[D].id,freePeriodDuration:k})}if(v.productId=I.config.id,d&&(v.orderType=d),v.devices=[],I.device){var O={deviceId:I.device.id+""};if(I.device.imei&&(O.imei=I.device.imei),"validate"!==l&&I.device.deviceOption&&(delete O.deviceId,O.deviceOptionId=I.device.deviceOption.deviceOptionId.toString()),v.devices.push(O),h.agentLoggedIn||(v.paymentMethod="creditCard"),I.takeHandsetInsurance){var A=e.config.subscription;v.insuranceOptionIsUpdate=!(!A||!A.hardwareInsurance||40===A.hardwareInsurance.statusId),v.insuranceOptions=[{optionId:!v.insuranceOptionIsUpdate&&A&&A.hardwareInsurance&&40===A.hardwareInsurance.statusId?C.insuranceReactivationOption.id:C.insuranceOption.id,freePeriodDuration:0}]}}I.prepaidDevice&&(v.prepaidImei=I.prepaidImei),I.promotion&&(v.promotionCode=I.promotion.code);var L=I.subscriptionDetails.subscriptionType;if("tv"===I.product.productType&&(L="newTV"),null!==(g=I.config)&&void 0!==g&&g.hasTag("HFC")&&(L="change-postpaid"===b.ordertype?"bbContractExtention":"newHFC"),v.subscriptionDetails={subscriptionType:L||"fixed"},v.subscriptionDetails.simType="ESIM"===I.simType?"ESIM":"PHYSICAL",S&&"validate"!==l&&(v.subscriptionDetails.poaSignMethod=S),L&&I.subscriptionDetails[L]&&(v.subscriptionDetails.msisdn=I.subscriptionDetails[L].msisdn),I.subscriptionDetails.iccid&&"ESIM"!==I.simType&&(v.subscriptionDetails.iccid=I.subscriptionDetails.iccid),"porting"==L&&(v.subscriptionDetails.fastPorting="fast"==I.subscriptionDetails.porting.portingSpeed,"fast"==I.subscriptionDetails.porting.portingSpeed?v.subscriptionDetails.wishDate=objToDate(I.subscriptionDetails.porting.wishDate,!0).toServerJSON():v.subscriptionDetails.wishDate=swissDate().addDays(15).toServerJSON(),v.subscriptionDetails.previousProvider=I.subscriptionDetails.porting.previousProvider.id,"prepaid"==I.config.type&&(v.subscriptionDetails.tempMsisdn=I.subscriptionDetails.newMsisdn.msisdn),"postpaid"==I.subscriptionDetails.porting.previousProvider.donorType&&(I.subscriptionDetails.portingOwnerIsSameUser?v.portingOwnerDetails={firstName:h.customerLoggedIn?y.firstName:y.firstName.toLowerCase().capitalizeFirstLetterOnEachWord(),lastName:h.customerLoggedIn?y.lastName:y.lastName.toLowerCase().capitalizeFirstLetterOnEachWord(),postCode:e.billingAddress.postCode,city:e.billingAddress.city,streetName:e.billingAddress.streetName.substring(0,30),streetNumber:e.billingAddress.streetNumber||void 0}:(v.subscriptionDetails.shipPoa=!v.subscriptionDetails.iccid&&e.poa&&e.poa.sendPhysicalPoa,v.portingOwnerDetails={
firstName:I.subscriptionDetails.portingUser.firstName,lastName:I.subscriptionDetails.portingUser.lastName,postCode:I.subscriptionDetails.portingUser.address.postCode,city:I.subscriptionDetails.portingUser.address.city,streetName:I.subscriptionDetails.portingUser.address.streetName.substring(0,30),streetNumber:I.subscriptionDetails.portingUser.address.streetNumber||void 0}))),e.config.subscription&&(v.subscriptionDetails.subscriptionId=e.config.subscription.id,v.subscriptionDetails.applyFee=!e.config.rateplanChangeData.waiveFee,v.subscriptionDetails.ratePlanChangeFeeType=e.config.rateplanChangeData.ratePlanChangeFeeType,v.subscriptionDetails.ratePlanChangeFee=e.config.rateplanChangeData.rateplanChangeFeeOrig,v.subscriptionDetails.switchDate=e.config.rateplanChangeData.firstPossibleChangeDate),e.accessCodeData.idCheckRequired&&"Park"===v.validationType&&(v.subscriptionDetails.fastActivation="fast"===I.idCheckConfirmMethod),v.billingMethod=e.billingMethod,h.agentLoggedIn&&"postpaid"===I.config.type&&"mobile"===I.product.productType&&t.postpaidBillingGroup&&"ebpp"===t.postpaidBillingGroup.billingMethod&&(v.billingMethod=t.postpaidBillingGroup.billingMethod),"prepaid"===I.config.type&&(v.billingMethod="paper"),"yallo_premium_tv"===window.location.href.split("/")[6]&&r.get("tvShippingAddress")){var N=r.get("tvShippingAddress");e.billingAddress={city:N.city,postCode:N.postCode,streetName:N.streetName.substring(0,30),streetNumber:N.streetNumber,country:N.country,co:N.co||void 0}}if(e.differentShippingAddress&&r.set("tvShippingAddress",e.shippingAddress),v.billingAddress={city:e.billingAddress.city,postCode:e.billingAddress.postCode,streetName:e.billingAddress.streetName.substring(0,30),streetNumber:e.billingAddress.streetNumber,country:e.billingAddress.country,co:e.billingAddress.co||void 0},(I.config.hasTag("fiber")||I.config.hasTag("HFC"))&&(v.installationAddress={city:e.installationAddress.city,postCode:e.installationAddress.postCode,streetName:e.installationAddress.streetName.substring(0,30),streetNumber:e.installationAddress.streetNumber,country:e.installationAddress.country},I.config.hasTag("HFC")&&(v.installationAddress.addressCode=a.globalLineCheckResults.hfc.network,v.installationAddress.streetType=a.globalLineCheckResults.hfc.addressType),h.customerLoggedIn&&!e.differentShippingAddress?v.shippingAddress=v.billingAddress:h.customerLoggedIn||e.differentShippingAddress||(v.shippingAddress=v.installationAddress)),I.config.hasTag("fiber")&&(v.installationDetails={tspId:e.fiberLineCheck.tspId,requestDate:objToDate(this.orderData.fiberLineCheck.wishDate,!0).toServerJSON(),startDate:utcDate().addDays(h.isTelesales?3:0).toServerJSON(),installationCode:e.fiberLineCheck.accessType,communicationAttributes:e.fiberLineCheck.otoIdState,otoId:"BEPREADY"===e.fiberLineCheck.otoIdState?void 0:e.fiberLineCheck.otoId,lineCheckState:e.fiberLineCheck.status},v.installationDetails.orderType="BEPREADY"===e.fiberLineCheck.otoIdState?"byAddress":e.fiberLineCheck.qualifiedBy,"BEPREADY"===e.fiberLineCheck.otoIdState||e.fiberLineCheck.otoId||(v.installationDetails.orderType="waitCustomerInput")),I.config.hasTag("HFC")){var x="ob"===o.realChannel?3:0;v.installationDetails={orderType:"byAddress",tspId:e.hfcLineCheck.tspId,requestDate:objToDate(this.orderData.hfcLineCheck.wishDate,!0).addDays(x).toServerJSON(),startDate:utcDate().addDays(x).toServerJSON(),installationCode:e.hfcLineCheck.accessType,lineCheckState:e.hfcLineCheck.status},v.installationAddress.building=e.hfcLineCheck.addressId,v.installationAddress.streetUnitType=e.hfcLineCheck.billingMethod}e.differentShippingAddress&&(v.shippingAddress={city:e.shippingAddress.city,postCode:e.shippingAddress.postCode,streetName:e.shippingAddress.streetName.substring(0,30),streetNumber:e.shippingAddress.streetNumber,country:e.shippingAddress.country,co:e.shippingAddress.co||void 0}),v.shipmentMethod=I.shipmentMethod||"WAREHOUSE",I.config.hasTag("fiber")||"tv"===I.product.productType||I.config.hasTag("HFC")||(y.billingIdDetails||(y.billingIdDetails={}),y.billingIdDetails.idNumber||(y.billingIdDetails.idNumber="UNINITIALIZED"));var E=y.contactNumber;E&&(E=E.split("+").join("00"),E=E.split("0041").join("0"));var R=I.config.hasTag("fiber")||"tv"===I.product.productType||I.config.hasTag("HFC");if(v.billingCustomerDetails={billingIdDetails:R?void 0:{idNumber:y.billingIdDetails.idNumber.split(" ").join("").split("/").join("").split("-").join(""),idTypeId:y.billingIdDetails.idTypeId,nationality:y.billingIdDetails.nationality},title:y.title||"Mr",firstName:h.customerLoggedIn?y.firstName:y.firstName.toLowerCase().capitalizeFirstLetterOnEachWord(),lastName:h.customerLoggedIn?y.lastName:y.lastName.toLowerCase().capitalizeFirstLetterOnEachWord(),contactNumber:E?paddTo(E,10):void 0,dob:objToDate(y.dob,!0).toServerJSON(),preferredLang:y.preferredLang||c.data.current},T.get("company-name-field-testing")&&(v.billingCustomerDetails.companyName=y.companyName),v.billingCustomerDetails.billingIdDetails){var F;v.billingCustomerDetails.billingIdDetails.idNumber||(v.billingCustomerDetails.billingIdDetails.idNumber="NONE");var M=objToDate((null===(F=y.billingIdDetails)||void 0===F?void 0:F.expiry)||{},!0);isValidDate(M)?v.billingCustomerDetails.billingIdDetails.expiry=M.toServerJSON():v.billingCustomerDetails.billingIdDetails.expiry=swissDate().addDays(365).toServerJSON()}e.alternativeUser&&e.alternativeUser.use&&(v.userDetails={title:e.alternativeUser.title,firstName:e.alternativeUser.firstName.toLowerCase().capitalizeFirstLetterOnEachWord(),lastName:e.alternativeUser.lastName.toLowerCase().capitalizeFirstLetterOnEachWord(),dob:objToDate(e.alternativeUser.dob,!0).toServerJSON(),preferredLang:e.alternativeUser.preferredLang});var $=angular.copy(v.billingCustomerDetails);if(Object.assign($,v.userDetails),JSON.stringify($)===JSON.stringify(v.billingCustomerDetails)&&delete v.userDetails,h.customerLoggedIn){var B=t.getOldestActiveSub();if(B&&!v.billingCustomerDetails.contactNumber&&(v.billingCustomerDetails.contactNumber=B.msisdn),e.billingCustomerDetails.emailAddress){v.billingCustomerDetails.emailAddress=e.billingCustomerDetails.emailAddress.toLowerCase();var U=v.billingCustomerDetails.emailAddress;-1===U.indexOf("@yallo.ch")&&-1===U.indexOf("@lebara.ch")||(v.billingCustomerDetails.emailAddress="nomail@nomail.com")}}else v.signup=e.signup,!e.billingCustomerDetails.noEmail&&e.billingCustomerDetails.emailAddress&&(v.billingCustomerDetails.emailAddress=e.billingCustomerDetails.emailAddress.toLowerCase());return(null===(f=v.billingCustomerDetails)||void 0===f?void 0:null===(m=f.contactNumber)||void 0===m?void 0:m.length)<8&&(v.billingCustomerDetails.contactNumber="0777777777"),h.agentLoggedIn||(v.tmxSessionId=e.tmxSessionId),w["tv-token"]&&(v.tvMigrationJwtToken=w["tv-token"]),v},this.copyCustomerDataToOrderData=function(e,t){var o,i,r,a=t&&t.billingCustomerDetails?angular.copy(t.billingCustomerDetails.billingIdDetails):void 0,s=!!a&&t.billingCustomerDetails.pixelScanned,c=null===t||void 0===t?void 0:null===(o=t.billingCustomerDetails)||void 0===o?void 0:o.idCheckDone,d=n;t.manualCcAllowed=null===(i=n.creditCheckData)||void 0===i?void 0:i.manualCcAllowed,t.billingCustomerDetails={title:d.accountOwner.title,firstName:d.accountOwner.firstName,lastName:d.accountOwner.lastName,dob:d.accountOwner.dob,preferredLang:null===(r=d.accountOwner.preferredLang)||void 0===r?void 0:r.toLowerCase(),emailAddress:d.accountOwner.emailAddress.toLowerCase(),contactNumber:d.accountOwner.contactNumber||"",billingIdDetails:{}};var u,l;if(t.config){var p=Object.first(t.config.products);l=(!p||"postpaid"==p.config.type)&&"change-postpaid"===b.ordertype&&_.orderData.config.rateplanChangeData}var g=d.findPrimaryID(l);if(T.get("hfc-phase-2")){if(d.primaryId||g)u=g,t.accountIdUsed=!0;else if(h.customerLoggedIn&&("add-promo"==b.ordertype||"extend-postpaid"==b.ordertype)){if(!d.personalIdsList.length)throw"No id set so cant do contract extension: "+d.accountOwner.username;u=d.personalIdsList[0]}}else if(d.primaryId||g)u=g,t.accountIdUsed=!0;else if(h.customerLoggedIn&&("add-promo"==b.ordertype||"extend-postpaid"==b.ordertype||"change-postpaid"==b.ordertype)){if(!d.personalIdsList.length)throw"No id set so cant do contract extension: "+d.accountOwner.username;u=d.personalIdsList[0]}return e&&a&&a.idNumber?(t.accountIdUsed=!1,t.billingCustomerDetails.idCheckDone=!!c,t.billingCustomerDetails.pixelScanned=s,t.billingCustomerDetails.billingIdDetails={idNumber:a.idNumber,idTypeId:a.idTypeId,nationality:a.nationality,expiry:a.expiry}):u?t.billingCustomerDetails.billingIdDetails={idNumber:u.idNumber,idTypeId:u.idTypeId,nationality:d.accountOwner.idDetails.nationality,expiry:u.expireDate?u.expireDate:dateToObj(new Date(1900,1,1))}:console.warn("No id to copy"),t.billingAddress={city:d.accountOwner.address.city,postCode:d.accountOwner.address.postCode,streetName:d.accountOwner.address.streetName.substring(0,30),streetNumber:d.accountOwner.address.streetNumber,country:d.accountOwner.address.country},d.postpaidBillingGroup&&(t.billingMethod=d.postpaidBillingGroup.billingMethod),u},this.forceEmailBilling=function(){var e=_.orderData.billingCustomerDetails.billingIdDetails;if(!e)return!1;if(_.orderData.config)return"prepaid"!=Object.first(_.orderData.config.products).config.type&&["201411201909407900","201411201909407899"].indexOf(e.idTypeId)>-1},this.showDriversLicenceConfirmation=function(){return!!(this.orderData&&this.orderData.config&&this.orderData.config.products)&&("prepaid"!=Object.first(this.orderData.config.products).config.type&&(!!_.orderData.billingCustomerDetails.billingIdDetails&&["201411201909407901"].indexOf(_.orderData.billingCustomerDetails.billingIdDetails.idTypeId)>-1))},this.allSubscriptionsHaveMsisdn=function(){if(!this.orderData.config)return!1;for(var e in this.orderData.config.products)if("SUB"==this.orderData.config.products[e].config.category&&!this.orderData.config.products[e].subscriptionDetails.msisdn)return!1;return!0},this.checkForPaymentInfo=function(){_.checkingOut=!0,_.disableFields=!0,a.preventNavigation=!0;var e=r.get("order_refno");return t.post("checkPaymentStatus",{refno:e},7,!0).then(function(e){if(a.preventNavigation=!1,e&&!e.errorCode){if("Success"==e.paymentStatus){_.checkingOut=!1,_.disableFields=!1;var t=h.agentLoggedIn?"pos":"eshop";"self-register"===b.logintype&&(t="rs");var o=_.createOrderRequest(_.orderData,n,_.agree||!_.agbEmail,t);return _.processCheckoutResponse(e,o)}return{errorCode:null,checkAgain:!0}}return e&&e.errorCode||(e={errorCode:100}),_.processCheckoutResponse({errorCode:e.errorCode},{})})},this.saveCaptureData=function(e,n){if(!e.documentType||!_.docTypes[e.documentType])return m.reject("Image doesnt exist");var o={accessCode:n||this.orderData.accessCodeData.accessCode,docCategory:_.docTypes[e.documentType],fileType:e.fileType,pixelCheck:!1,previousImgCheckSum:e.previousImgCheckSum||void 0,imageBinaryData:e.b64.split(",")[1]};return t.post("saveCaptureData",o,2,!0).then(function(t){return t&&"0"===t.errorCode&&(t.errorCode=0),t&&!t.errorCode?e.checkSumValue=t.checkSumValue:d.add(t.errorCode+" - "+t.errorDescription,"bad"),!(!t||t.errorCode)&&t})},this.getIdTypes=function(e,o,i,r){if(!e)return m.resolve(!1);if(!o&&!(o=n.getProductId(i||this.orderData)))return m.resolve(!1);var a={countryId:e,productId:o};return t.post("getValidIdTypesForNationality",a).then(function(e){return _.orderData&&r&&(_.orderData.firedIdTypesCall=!0),e})},this.continueWithoutDevice=function(){if(O.orderData.config){var e=Object.first(O.orderData.config.products),t=!!i.search().subscription;delete e.device;var n=e.product.getConfigWithLowestCost();!e.promotion||e.promotion.applies(n,_.orderData.config.subscription)?e.config=n:e.promotion.applies(e.config,_.orderData.config.subscription)||delete e.promotion,O.orderData.extension?h.agentLoggedIn||i.path("/".concat(c.data.current,"/account")):(O.disableFields=!0,O.checkingOut=!0,O.getAccessCode(!0).then(function(){var e="/"+c.data.current+"/"+b.logintype+"/"+b.ordertype+"/"+b.productUrl,n=e+(t?"/process/extend-data":"/process/customer-data");i.path()!==n&&i.path(n),O.disableFields=!1,O.checkingOut=!1}))}},this.continueWithLight=function(){var e;if(null!==(e=O.orderData)&&void 0!==e&&e.config){var t=g.getAvailableLightProduct();O.changeProduct(t.config,t.promotion,t.device)}},this.previewProductChange=function(e){var t=e.bestConfig,n=t.getBestPromotionAndDevice(!0);return{config:t,product:e,promotion:n.promotion,device:n.device}},this.changeProduct=function(e,t,n){if(!O.orderData.config)return m.resolve(!1);var o=Object.first(O.orderData.config.products),r=angular.copy(o.subscriptionDetails),a={config:e,product:e.product,promotion:t,device:n,subscriptionDetails:r,simType:o.simType};return O.orderData.config.products={},O.orderData.config.products[a.config.url]=a,O.disableFields=!0,O.checkingOut=!0,O.getAccessCode(!0).then(function(){var e="/"+c.data.current+"/"+b.logintype+"/"+b.ordertype+"/"+a.config.url,t=e+"/process/customer-data";i.path()!==t&&i.path(t),O.disableFields=!1,O.checkingOut=!1,O.save()})},this.continueWithCurrent=function(){var e=Object.first(O.orderData.config.products),t="/"+c.data.current+"/"+b.logintype+"/"+b.ordertype+"/"+e.config.url,n=O.orderData.config.subscription?"extend-data":"customer-data",o=t+"/process/"+n;O.orderData.allowContinueWithoutDowngrade=!0,i.path(o).search({auto:"true"}),O.disableFields=!1,O.checkingOut=!1,O.save()},h.returnWhenBootloaderDone().then(function(){return O.getCheckoutData()}),this.setupOrderData()}]),app.service("Cms",["$q","$rootScope","State","Language","Storage",function(e,t,n,o,i){var r=this,a={de:"de-ch",en:"en-gb",fr:"fr-ch",it:"it-ch"},s=function(){if(window.yolSiteData.prismicApi)return e.resolve(window.yolSiteData.prismicApi);var t=e.defer(),n=setTimeout(function(){return window.dummyPrismicApi&&t.resolve(window.dummyPrismicApi)},2e3);return window.setPrismicApi=function(e){clearTimeout(n),e&&clearTimeout(n),t.resolve(e)},t.promise};this.getApi=function(){return r.api?e.resolve(r.api):n.waitForEvent("prismicRefLoaded").then(function(){return r.api})},this.getLang=function(e){return e?a.en:a[o.data.current]},this.convertText=function(e){return e?Array.isArray(e)?PrismicDOM.RichText.asHtml(e,function(e){return Object.keys(a).find(function(t){return a[t]===e.lang})+"/"+e.uid}).replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/ /g," "):"string"==typeof e?e:"":""},this.convertRawText=function(e){return PrismicDOM.RichText.asText(e||[])},this.getById=function(e,t){return r.getApi().then(function(n){return void 0===e?throwSafe("CMS getById requested without id","58-id"):n.getByID(e,{lang:t?"*":r.getLang()}).then(function(n){return window.cachePrismicRequests&&(prismicDataCache.getByID[e]||(prismicDataCache.getByID[e]={}),prismicDataCache.getByID[e][t?"*":r.getLang()]=n),angular.copy(n)})})},this.getByTag=function(e){return r.getApi().then(function(t){return t.query(PrismicJS.Predicates.at("document.tags",[e]),{lang:r.getLang()}).then(function(t){if(window.cachePrismicRequests){var n=PrismicJS.Predicates.at("document.tags",[e]);prismicDataCache.query[n]||(prismicDataCache.query[n]={}),prismicDataCache.query[n][r.getLang()]=t}return t?angular.copy(t.results[0]):void 0})})},this.getByType=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return r.getApi().then(function(i){return i.query(PrismicJS.Predicates.at("document.type",e),{lang:r.getLang(t),pageSize:100,page:n}).then(function(i){if(i.results&&(i.results=o.concat(i.results)),i.total_pages>n)return r.getByType(e,t,n+1,i.results);if(window.cachePrismicRequests){var a=PrismicJS.Predicates.at("document.type",e);prismicDataCache.query[a]||(prismicDataCache.query[a]={}),prismicDataCache.query[a][r.getLang()]=i}return angular.copy(i.results)})})},this.getByFieldValue=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return r.getApi().then(function(a){return a.query(PrismicJS.Predicates.at("my.".concat(e,".").concat(t),n),{lang:r.getLang(),page:o}).then(function(a){if(a.results&&(a.results=i.concat(a.results)),a.total_pages>o)return r.getByFieldValue(e,t,n,o+1,a.results);if(window.cachePrismicRequests){var s=PrismicJS.Predicates.at("my.".concat(e,".").concat(t),n);prismicDataCache.query[s]||(prismicDataCache.query[s]={}),prismicDataCache.query[s][r.getLang()]=a}return angular.copy(a.results)})})},this.getHasFieldAllLangs=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return r.getApi().then(function(i){return i.query(PrismicJS.Predicates.has("my.".concat(e,".").concat(t)),{lang:"*",page:n,orderings:"[document.uid,document.lang]"}).then(function(i){if(i.results&&(i.results=o.concat(i.results)),i.total_pages>n)return r.getHasField(e,t,n+1,i.results);if(window.cachePrismicRequests){var a=PrismicJS.Predicates.has("my.".concat(e,".").concat(t));prismicDataCache.query[a]||(prismicDataCache.query[a]={}),prismicDataCache.query[a]["*"]=i}return angular.copy(i.results)})})},this.getByUid=function(e,t,n){return r.getApi().then(function(o){return o.getByUID(e,window["replaceUid_"+t]||t,n?void 0:{lang:r.getLang()}).then(function(o){var i;if("landing_page"===e&&null!==(i=window.replacePage)&&void 0!==i&&i[t])return r.getByUid(e,window.replacePage[t],n);if(n&&o&&o.lang!==r.getLang()){var a=o.alternate_languages.find(function(e){return e.lang===r.getLang()});return a?r.getByUid(e,a.uid):void 0}return window.cachePrismicRequests&&(prismicDataCache.getByUID[e]||(prismicDataCache.getByUID[e]={}),prismicDataCache.getByUID[e][window["replaceUid_"+t]||t]||(prismicDataCache.getByUID[e][window["replaceUid_"+t]||t]={}),prismicDataCache.getByUID[e][window["replaceUid_"+t]||t][r.getLang()]=o),angular.copy(o)})})},this.getByContentRelationShip=function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];return r.getApi().then(function(s){return s.query([PrismicJS.Predicates.at("document.type",e),PrismicJS.Predicates.at("my.".concat(e,".").concat(t,".").concat(n),o)],{lang:r.getLang(),pageSize:100,page:i}).then(function(s){return s.results&&(s.results=a.concat(s.results)),s.total_pages>i?r.getByContentRelationShip(e,t,n,o,i+1,s.results):angular.copy(s.results)})})},function(){s().then(function(e){r.api=e,window.yolSiteData.roaming||(window.production?i.get("previewMode")||window.location.href.indexOf("/preview")>-1?(i.set("previewMode",!0,!0),loadScript("https://static.cdn.prismic.io/prismic.min.js?repo=sunrise-".concat(brand)).then(function(){t.$emit("prismicRefLoaded")})):t.$emit("prismicRefLoaded"):loadScript("https://static.cdn.prismic.io/prismic.js?repo=sunrise-".concat(brand,"&new=true")).then(function(){t.$emit("prismicRefLoaded")}))})}()}]),window.cachePrismicRequests=!1,window.cachePrismicRequests&&(prismicDataCache=(_prismicDataCache={getByID:{}},_defineProperty(_prismicDataCache,"getByID",{}),_defineProperty(_prismicDataCache,"query",{}),_prismicDataCache)),app.service("CommonData",["$rootScope",function(e){this.ignoredChannels=["yb"],this.realChannel="ol",this.postIdentIdCards=["201411201909407899","201411201909407898","201411201909407897","201411201909407896","201411201909407900","201411201909407895","201411201909407894","201810301102494924","201810301102494923"],this.emailBlackList=["@yallo.","@lebara.","@ortel.","@yol."],this.europeanIds=["201412190713000010","201412190713000011","201411201909407920","201411201909407921","201411201909407922","201411201909407906","201411201909407907","201411201909407902","201411201909407904","201411201909407905","201412190713000001","201412190713000002","201412190713000003","201412190713000004","201412190713000005","201411201909407912","201412190713000006","201411201909407911","201412190713000007","201412190713000008","201412190713000009","201411201909407919","201411201909407917","201411201909407918","201411201909407915","201411201909407916","201411201909407913","201411201909407914"],this.nonRiskyIdTypes=["201411201909407894","201411201909407895","201411201909407897","201411201909407896","201411201909407898"],this.euPassports=["201910230913459788","201910230913459789","201910230913459809","201910230913459808","201910230913459801","201910230913459802","201910230913459787","201910230913459800","201910230913459805","201910230913459803","201910230913459799","201910230913459818","201910230913459790","201910241032301176","201910230913459810","201910230913459798","201910230913459811","201910230913459797","201910230913459812","201910230913459796","201910230913459813","201910230913459795","201910230913459814","201910230913459794","201910230913459815","201910230913459793","201910230913459792","201910230913459817","201910230913459791","201411201909407923","201910241031260798","201910241032081075"],this.regex={name:"[a-zA-Z0-9 ĂăĀāĄąÅåÃãĆćČčÇçĈĉĊċĎďÐðĐđĔĕĚěËëĖėĒēĘęĞğĢģĜĝĠġĤĥĦħĬĭÏïİĪīĮįĨĩıĴĵĶķĹĺĽľĻļĿŀŁłŃńŇňŅņÑñŊŋŉŎŏŐőŌōØøÕõŔŕŘřŖŗŚśŠšŞşŜŝẞßŤťŢţŦŧÞþŬŭŰűŪūŲųŮůŨũŴŵÝýŶŷŸÿŹźŽžŻżÆæĲĳ&'*+,-./_`‚„‘’“”–—ÀÁÂÄÈÉÊÌÍÎÒÓÔÖÙÚÛÜàáâäèéêìíîòóôöùúûü]*",fixnet:"(021|022|024|026|027|031|032|033|034|041|043|044|052|055|056|061|062|071|081|091)[0-9]*"},this.regex.sunriseName=this.regex.name.split("0-9").join(""),this.optionCategoryIcons={surf:"wifi",speedon:"wifi",roaming:"globe",unlimited:"bolt",countries:"flag",call:"phone",sms:"envelope",tv:"tv"},this.changeChannel=function(t){this.channel=t,e.$emit("channelChanged",t)}}]),app.service("ContactNumberCheck",function(){var e=this;this.check=function(t){return loadLibphonenumberScript().then(function(){if(!t)return!1;var n=libphonenumber.parsePhoneNumberFromString(t);return void 0!==n&&n.isValid()&&e.lengthIsValid(t)})},this.lengthIsValid=function(e){return!!e.match(/(^\+\d{9,13}$)|(^\d{10,14}$)/)}}),app.service("CordovaIntents",["$rootScope","$location","FeatureFlags","Language","$timeout",function(e,t,n,o,i){var r=this;this.init=function(){var t,n;e.app&&(null===(t=window.plugins)||void 0===t||null===(n=t.launchmyapp)||void 0===n||n.getLastIntent(function(e){r.handleIntent(e)},console.error)),window.handleOpenURL=function(e){return r.handleIntent(e)}},this.handleIntent=function(e){if(e){var n=e.split(r.getIntent())[1];e.indexOf(r.getIntent()>-1)?i(function(){n.startsWith("/")?t.path("/".concat(o.data.current).concat(n)):console.warn("Unhandled intent : "+e)},1):console.log("Unhandled intent "+e)}},this.getIntent=function(){return"".concat(window.brand).concat(e.isPos?"pos":"","schweiz://")},this.init()}]),app.service("Countries",["Network","Language","$rootScope","$q",function(e,t,n,o){var i=this;this.sortedCountries=[],this.countriesObj={},this.priorityCountries=[],this.callingCodesAdded=!1,this.addCountries=function(o,i){var r=this;e.get("/data/country-iso-codes.ce2c16c826.json").then(function(e){r.sortedCountries=r.initCountries(o,e,t.data.current),r.sortedNationalities=r.sortedCountries.concat(r.initCountries(i,e,t.data.current)),r.updateCountriesObj(),r.priorityCountries=r.sort([r.countriesObj["200903041337530279"],r.countriesObj["200903041337530149"],r.countriesObj["200903041337530142"],r.countriesObj["200903041337530176"],r.countriesObj["200903041337530245"]],t.data.current),r.euCountries=[r.countriesObj["200903041337530279"],r.countriesObj["200903041337530083"],r.countriesObj["200903041337530142"],r.countriesObj["200903041337530149"],r.countriesObj["200903041337530176"],r.countriesObj["200903041337530090"],r.countriesObj["200903041337530102"],r.countriesObj["200903041337530123"],r.countriesObj["200903041337530125"],r.countriesObj["200903041337530126"],r.countriesObj["200903041337530127"],r.countriesObj["200903041337530136"],r.countriesObj["200903041337530141"],r.countriesObj["200903041337530152"],r.countriesObj["200903041337530167"],r.countriesObj["200903041337530173"],r.countriesObj["200903041337530189"],r.countriesObj["200903041337530195"],r.countriesObj["200903041337530196"],r.countriesObj["200903041337530204"],r.countriesObj["200903041337530223"],r.countriesObj["200903041337530244"],r.countriesObj["200903041337530245"],r.countriesObj["200903041337530249"],r.countriesObj["200903041337530266"],r.countriesObj["200903041337530267"],r.countriesObj["200903041337530272"],r.countriesObj["200903041337530278"],r.countriesObj["200903041337530168"],r.countriesObj["200903041337530233"],r.countriesObj["200903041337530194"]],r.neighbouringCountries=[r.countriesObj["200903041337530279"],r.countriesObj["200903041337530149"],r.countriesObj["200903041337530142"],r.countriesObj["200903041337530176"],r.countriesObj["200903041337530083"],r.countriesObj["200903041337530194"]],n.$emit("countryDataLoaded")})},n.$on("langChangeEnd",function(e,t){i.sortedCountries=i.sort(i.sortedCountries,t),i.priorityCountries=i.sort(i.priorityCountries,t),n.$emit("newSortedCountries"),i.updateCountryNames(t)}),this.updateCountryNames=function(e){i.sortedCountries.map(function(t){return t.name=t[e],t}),i.updateCountriesObj()},this.sort=function(e,t){return e.sort(function(e,n){return e[t].localeCompare(n[t])})},this.addCallingCodes=function(){return i.callingCodesAdded?o.resolve():loadLibphonenumberScript().then(function(){i.sortedCountries.map(function(e){try{e.countryCallingCode=libphonenumber.getCountryCallingCode(e.countryCode)}catch(e){}}),i.updateCountriesObj(),i.callingCodesAdded=!0})},this.updateCountriesObj=function(){i.countriesObj=i.sortedCountries.reduce(function(e,t){return e[t.id]=t,e},{})},this.initCountries=function(e,t,n){var o=objToArray(e,!0).map(function(e){var o=["202005110950468967","202005110950468966","202005110950468969","202005110950468968"];if(e.id=e.objKey,e.name=e[n],t){var i,r=null===t||void 0===t?void 0:null===(i=t.find)||void 0===i?void 0:i.call(t,function(t){return t.id==e.id});r?e.countryCode=r.ISO2:o.includes(e.id)||console.log("country '".concat(e.en,"' not found in country-iso-codes.json (id: ").concat(e.id,")"),e)}return delete e.objKey,e});return i.sort(o,n)}}]),app.service("CustomerAccount",["Network","User","Subscription","$q","Notifications","$interval","$location","Language","$rootScope","Storage","Analytics","CustomerBills","$cookies","Products","Popups","Popup","State","CustomerOrders","CommonData","PrismicPopups","Authentication","Promotions","CordovaIntents","ErrorReporting","$http","$window","$timeout",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g,f,h,m,v,b,w,C,y,D,S,I,k,P){var T=this,O=this;if(this.users={},this.billingGroups={},this.subscriptions={},this.refreshOnFocus=!1,this.refreshDelay=36e5,this.prepaidBillingGroups=[],e.account=this,s.account=this,this.init=function(t){var n=this;m.customerLoggingIn=!0,m.customerLoggingInNoCreditCheck=!0,m.refreshingOrders=!0,t||(t=a.search()),m.returnWhenBootloaderDone().then(function(){m.returnWhenRateplanDataLoaded().then(function(){if(!a.path().match(/^\/[a-z]{2}\/pos(?:-login)?(?:\/\*)?/))return t.loginToken&&t.username?n.handleLoginToken(void 0,!0).then(function(){n.doneCheckingLoggedIn()}):void C.renewToken("selfcare").then(function(t){C.selfcareToken?(n.loginToken=C.selfcareToken,n.getLoginDataFromRfeAndDoLoginResponse().then(function(){n.doneCheckingLoggedIn(),delete e.username})):n.doneCheckingLoggedIn()}).catch(function(e){console.log("error while refresh token",e),n.doneCheckingLoggedIn()})})})},this.hasTVSubscription=function(){return!!m.customerLoggedIn&&!!T.getSubscriptionsByType("postpaid",!0).find(function(e){return"tv"===e.getType()})},this.applyForFreePremiumTV=function(){var e;if(!m.customerLoggedIn)return!1;if(null===(e=y.findPromotionByCode("yallopremiumtv_chf20_120months"))||void 0===e||!e.availableInCurrentChannel())return!1;var t=T.getSubscriptionsByType("postpaid",!0);return!t.find(function(e){return"tv"===e.getType()&&"terminated"!==e.status})&&!!T.findFreeTVEligibleSub(t)},this.findFreeTVEligibleSub=function(e){return e=e||T.getSubscriptionsByType("postpaid",!0),e.find(function(e){var t;return"terminated"!==e.status&&g.productAppliesForFreePremiumTV(null===(t=e.rateplan)||void 0===t?void 0:t.url)})},this.eligibleForFreeTvBox=function(){return!0},this.applySpecialPromotions=function(){var e=T.getSubscriptionsByType("postpaid",!0),t=[];T.applyForFreePremiumTV()&&t.push(y.findPromotionByCode("yallopremiumtv_chf20_120months")),Date.now()<16430976e5&&e.filter(function(e){return"mobile"===e.getType()}).length&&t.push(y.findPromotionByCode("yallohomemaxfiber4012024with")),t.filter(function(e){return e}).forEach(function(e){return y.enablePromotionForChannel(e)})},this.removeSpecialPromotions=function(){Date.now()<16430976e5&&y.removePromotion("yallohomemaxfiber4012024with"),y.removePromotion("yallopremiumtv_chf20_120months")},this.removeSubscriptionRecommendationProducts=function(){if(T.subscriptions)try{var e=[];e=m.isTelesales?Object.values(T.subscriptions).flatMap(function(e){var t;return null===(t=e.recommendations)||void 0===t?void 0:t.retentionRateplanChangeProducts}):Object.values(T.subscriptions).flatMap(function(e){var t;return null===(t=e.recommendations)||void 0===t?void 0:t.rateplanChangeProducts}),e.filter(function(e){return void 0!=e}).forEach(function(e){e.promotion&&y.removePromotion(e.promotion.code)})}catch(e){throwSafe(e,"id-234")}},this.doneCheckingLoggedIn=function(e){return m.customerLoggingInNoCreditCheck=!1,c.$emit("doneCheckingCustomerLoggedInNoCreditCheck",m.customerLoggedIn),this.applySpecialPromotions(),m.customerLoggedIn||e?this.doCreditCheck().then(function(){m.customerLoggingIn=!1,c.$emit("doneCheckingCustomerLoggedIn",!0)}):(m.customerLoggingIn=!1,c.$emit("doneCheckingCustomerLoggedIn",!1),o.resolve())},this.handleLoginToken=function(e,t){var n=this,i=e?e.loginToken:a.search().loginToken;i&&Array.isArray(i)&&(i=i[0]);var r=e?e.username:a.search().username;return r&&Array.isArray(r)&&(r=r[0]),i&&r?(this.checkedLoginToken=!0,this.loginToken=i,c.showFullScreenLoader=!0,this.restoreSession(r,t).then(function(e){return c.showFullScreenLoader=!1,e?d.set("keepLoginTokenOnLogout",!0):(d.remove("loginToken"),delete n.loginToken),e})):o.resolve()},this.handleLoginResponse=function(e,t,n,r){return e&&!e.errorCode?(cookieOptions.expires=(new Date).addDays(90),p.put("loggedin","true",cookieOptions),d.remove("loginData"),O.processLoginResponse(e,!0,!0,void 0,"handle login response - "+n,r),d.set("everLoggedIn",{prepaid:this.getSubscriptionsByType("prepaid",!0).length,postpaid:this.getSubscriptionsByType("postpaid",!0).length}),this.doneCheckingLoggedIn().then(function(){return u.event("login","success",e.accountId),f.hide("loginPopup"),!0})):(t||i.add("error_"+e.errorCode,"bad"),o.resolve(!1))},this.refreshOrders=function(){return m.refreshingOrders=!0,v.getOrders().then(function(e){m.refreshingOrders=!1,c.$emit("ordersRefreshed"),e&&objToArray(T.subscriptions).forEach(function(t){t.orders=e.filter(function(e){return e.subscriptionId===t.id}),t.calcActiveOrder()})})},this.processLoginResponse=function(e,t,n,o,i,a){if(this.rawAccountresponse=JSON.parse(JSON.stringify(e)),this.accountId&&e.accountId!==this.accountId)return this.handleDifferentUser();if(this.processUsers(e.users),this.processSubscriptions(e.subscriptions),this.setGoXLOnly(),g.resetDevicePricing(),n&&(u.setDimention("accountId",e.accountId),u.setDimention("userType","loggedin")),this.onHold={active:!1},e.onHoldStatus){var s=e.onHoldStatus[e.onHoldStatus.length-1];["Started","Customer Not Requested","Ready","Monitoring"].indexOf(s.status)>-1&&(this.onHold={active:["Started","Customer Not Requested"].indexOf(s.status)>-1,startDate:s.startDate,endDate:s.endDate})}if(this.personalIdsList=this.processIds(e.personalIdsList),this.needToVerifyId=this.checkIfNeedToVerifyId(c.isPos),this.canVerifyId=this.checkIfNeedToVerifyId(c.isPos,!0),this.primaryId=this.findPrimaryID(),this.hasIdValidatePostId=!!this.personalIdsList.find(function(e){return"TO_VALIDATE_POST_ID"===e.validationStatus}),
this.accountOwner=this.users[e.userId],!this.accountOwner)throw"no account owner. Owner id: "+e.userId+" - account id: "+e.accountId;this.accountId=e.accountId,this.statusId=e.statusId,this.setCurrentUser(a),this.billingGroups=e.billingGroups,this.processBillingGroups("login",i),this.advertising=e.advertising,this.recommendations=e.recommendations,this.lineCheckMethod=e.lineCheckMethod,this.swisscomPin=e.swisscomPin,this.balance=e.balance,m.customerLoggedIn=!0,this.refreshOrders(),!e.loginToken&&o&&(e.loginToken=o.loginToken),e.loginToken&&(this.loginToken=e.loginToken,d.set("loginToken",{username:this.accountOwner.username,token:this.loginToken})),g.processHiddenDevices(),n&&(this.accountRefresher=r(function(){console.log("refresh customer account after login"),O.refreshData()},this.refreshDelay,1),window.addEventListener("focus",function(){O.refreshOnFocus&&O.refreshData(),O.refreshOnFocus=!1})),this.checkEmailValidity()},this.setCurrentUser=function(e){var t=d.get("currentUserId");if(t){var n;this.currentUser=null!==(n=this.users[t])&&void 0!==n?n:this.accountOwner}else if(e){var o,i=null===(o=objToArray(this.subscriptions).find(function(t){return t.msisdn==e}))||void 0===o?void 0:o.user;this.currentUser=null!==i&&void 0!==i?i:this.accountOwner}else this.currentUser=this.accountOwner;d.set("currentUserId",this.currentUser.id)},this.restoreSession=function(t,n){var o=this;return m.customerLoggingIn=!0,m.customerLoggingInNoCreditCheck=!0,C.selfcareTokenLogin(O.loginToken,t).then(function(t){return!!C.selfcareToken&&e.post("getAccountDetails",{},8,!0).then(function(e){return e?(n&&u.event("login","token-login","token-login-success"),o.restoreSubscriptionDetails().then(function(){return l.billDataLoaded?l.getBills(!0).then(function(){return e}):e})):(n&&u.event("login","token-login","token-login-failed"),!1)}).then(function(e){return o.handleLoginResponse(e,!0,"restoreSession")})})},this.restoreSubscriptionDetails=function(){var e=o.defer(),t=[],n=0;for(var i in this.subscriptions)this.subscriptions[i].gotDetails&&t.push(this.subscriptions[i]);if(!t.length)return o.resolve();for(var r=0,a=t;r<a.length;r++){var s=a[r];s.getData(s.id,void 0,!0).then(function(){(n+=1)===t.length&&e.resolve()})}return e.promise},this.findIdWithStatus=function(e){var t,n=_createForOfIteratorHelper(this.personalIdsList);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(o.validationStatus==e)return o}}catch(e){n.e(e)}finally{n.f()}},this.findPrimaryID=function(e){if(this.personalIdsList.length){var t,n=_createForOfIteratorHelper(this.personalIdsList);try{for(n.s();!(t=n.n()).done;){var o=t.value;if("approved"==o.status)return o}}catch(e){n.e(e)}finally{n.f()}var i,r=_createForOfIteratorHelper(this.personalIdsList);try{for(r.s();!(i=r.n()).done;){var o=i.value;if("in-progress"==o.status)return o}}catch(e){r.e(e)}finally{r.f()}var a,s=_createForOfIteratorHelper(this.personalIdsList);try{for(s.s();!(a=s.n()).done;){var o=a.value;if("missing"==o.status&&o.idNumber)return o}}catch(e){s.e(e)}finally{s.f()}if(e){var c,d=_createForOfIteratorHelper(this.personalIdsList);try{for(d.s();!(c=d.n()).done;){var o=c.value;if("not-valid"==o.status&&o.idNumber)return o}}catch(e){d.e(e)}finally{d.f()}}}},this.findIdsInStatus=function(e){return this.personalIdsList?this.personalIdsList.filter(function(t){return t.status===e}):[]},this.findIdsBeingChecked=function(){return this.findIdsInStatus("in-progress").filter(function(e){return"PARK"!==e.validationStatus&&"TO_VALIDATE_PARTNER"!==e.validationStatus})},this.processIds=function(e){if(!e||!e.length)return[];var t,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.disabled=!1,"string"==typeof o.expireDate&&(o.expireString=o.expireDate,o.expireDate=stringToDateObj(o.expireDate)),"TO_VALIDATE_DIGITAL"==o.validationStatus?o.status="in-progress":"TO_VALIDATE_POST_ID"==o.validationStatus?o.status="in-progress":"PENDING_DOCUMENTS"==o.validationStatus?o.status="in-progress":"APPROVED"==o.validationStatus?o.status="approved":"REJECTED"==o.validationStatus?o.status="rejected":"FINAL_REJECTED"==o.validationStatus?o.status="rejected":"SWISSPOST_REJECTED"==o.validationStatus?o.status="rejected":"UNINITIALIZED"==o.validationStatus?o.status="missing":"NOT_VALID"==o.validationStatus?o.status="not-valid":"SWISSPOST_NOT_DELIVERED"==o.validationStatus?o.status="not-valid":"TO_VALIDATE_PARTNER"==o.validationStatus?o.status="in-progress":"PARK"==o.validationStatus?o.status="in-progress":"DEPRECATED"==o.validationStatus&&(o.status="not-valid",o.disabled=!0)}}catch(e){n.e(e)}finally{n.f()}var i,r=_createForOfIteratorHelper(e);try{for(r.s();!(i=r.n()).done;){var a,s=i.value,c=_createForOfIteratorHelper(e);try{for(c.s();!(a=c.n()).done;){var d=a.value;if(!d.disabled&&(s!==d&&s.idNumber===d.idNumber&&s.idTypeId===d.idTypeId&&"approved"!==s.status)){s.disabled=!0;break}}}catch(e){c.e(e)}finally{c.f()}}}catch(e){r.e(e)}finally{r.f()}return e.sort(function(e,t){return e.id>t.id?1:-1}),[e.pop()]},this.hasRejectedByPostId=function(){if(!m.customerLoggedIn)return!1;var e,t=_createForOfIteratorHelper(this.personalIdsList);try{for(t.s();!(e=t.n()).done;){var n=e.value;if("SWISSPOST_REJECTED"===n.validationStatus)return!0;if("SWISSPOST_NOT_DELIVERED"===n.validationStatus)return!0}}catch(e){t.e(e)}finally{t.f()}return!1},this.waitingForPostIdent=function(){if(!m.customerLoggedIn)return!1;var e,t=_createForOfIteratorHelper(this.personalIdsList);try{for(t.s();!(e=t.n()).done;){if("TO_VALIDATE_POST_ID"===e.value.validationStatus)return!0}}catch(e){t.e(e)}finally{t.f()}return!1},this.checkIfNeedToVerifyId=function(e,t){if(d.get("idUnderReview",.1))return!1;var n=this.youngestSubscriptionAge();if(!e&&n<300)return!1;var o,i=_createForOfIteratorHelper(this.personalIdsList);try{for(i.s();!(o=i.n()).done;){var r=o.value;if("approved"==r.status)return!1;if("in-progress"==r.status&&"PARK"!==r.validationStatus&&(!t||"TO_VALIDATE_POST_ID"!==r.validationStatus))return!1}}catch(e){i.e(e)}finally{i.f()}var a,s=_createForOfIteratorHelper(this.personalIdsList);try{for(s.s();!(a=s.n()).done;){var r=a.value;if("missing"==r.status)return!0}}catch(e){s.e(e)}finally{s.f()}return!0},this.youngestSubscription=function(){var e,t=(new Date).addDays(36500);for(var n in this.subscriptions)this.subscriptions[n].subscriptionStartDate<t&&(t=this.subscriptions[n].subscriptionStartDate,e=this.subscriptions[n]);return e},this.setGoXLOnly=function(){var e=!1,t=!1;for(var n in T.subscriptions){var o=T.subscriptions[n];if("active"==o.status&&o.rateplan){var i=o.rateplan.firstProduct();i&&"yallo_home_4g"===i.url?e=!0:t=!0}}T.isGoXLOnly=e&&!t},this.youngestSubscriptionAge=function(){var e=this.youngestSubscription();if(e){return(swissDate()-e.subscriptionStartDate)/1e3}},this.logout=function(){var t=C.newIdentityEndpointSelfcare+"logout";if(m.customerLoggingOut)return o.resolve();u.event("logout","start",O.accountId);var n=O.accountId,i={};m.customerLoggingOut=!0,c.preventNavigation=!0;try{return I.post(t).then(function(t){if(p.remove("loggedin"),C.selfcareToken=void 0,O.removeLoginData(!1,!0,!0),u.event("logout","success",n),u.setDimention("accountId",null),m.customerLoggingOut=!1,c.preventNavigation=!1,e.authorization&&(delete e.authorization,d.remove("AuthorizationToken"),console.warn("Removed auth token. Customer logged out")),c.$emit("customerLogout",!0),-1!==a.path().indexOf("/account/cockpit")){var o=a.path(),i=angular.copy(a.search());a.path("/".concat(s.data.current,"/auth/login")).search({redirectPath:encodeURIComponent(o),redirectSearch:encodeURIComponent(JSON.stringify(i)),redirectHash:a.hash()}).replace()}else a.path("/auth/login"),k.location.reload();return!0})}catch(e){console.log("logout error",e)}return this.loginToken&&!d.get("keepLoginTokenOnLogout")&&(i.loginToken=this.loginToken),O.removeLoginData(!1,!0,!0),u.event("logout","success",n),u.setDimention("accountId",null),m.customerLoggingOut=!1,e.authorization&&(delete e.authorization,d.remove("AuthorizationToken"),console.warn("Removed auth token. Customer logged out")),c.$emit("accountNotLoggedin"),c.$emit("customerLogout",!0),!0},this.removeLoginData=function(e,t,n){C.logoutSelfcare(),this.rawAccountresponse="",this.isLightCustomer=void 0,this.creditCheckData=void 0,this.fastActivation=void 0,g.loggedInDeviceOptions=void 0,this.emailAddressNotValid=void 0,this.checkedEmailValidity=!1,m.customerLoggedIn=!1,delete m.clickedDeal,this.removeSubscriptionRecommendationProducts();for(var o in O.subscriptions)O.subscriptions[o].stopRefreshing();g.resetDevicePricing(),delete cookieOptions.expires,O.users={},O.subscriptions={},O.checkedHasDevice=!1,O.allowDevice=null,O.allowDeviceDate=null,delete this.personalIdsList,delete this.loginToken,delete this.tempImages,delete this.needToVerifyId,delete this.accountId,delete this.primaryId,delete this.accountOwner,delete this.currentUser,O.prepaidBillingGroups=[],p.remove("loggedin"),d.remove("loginData"),p.remove("posFoundCustomer"),d.remove("posCustDetails"),d.remove("x-pos-cust-username"),d.remove("loginToken"),d.remove("idUnderReview"),d.remove("currentUserId"),d.remove("favSub"),d.remove("everLoggedIn"),d.remove("ccData"),d.remove("dontShowPopupGroup_yallo"),w.popups=w.popups.filter(function(e){return"Personalized prismic popup"!==e.data.popup_type}),w.eval(),O.activeSubscription=null,e||i.add("loggedout","good"),r.cancel(O.accountRefresher),O.accountRefresher=null,l.resetData(),n||c.$emit("customerLogout",!0),3===a.path().length&&(t=!0),t||"/account"!==a.path().substring(3,11)||a.path("/login"),this.removeSpecialPromotions()},this.forgotPassword=function(t,n,r){if(!n)return o.resolve();var a={username:t,dob:objToDate(n,!0).toServerJSON()};return u.event("forgotPassword","start"),e.post("customerForgotPassword",a).then(function(e){return e&&(i.add("tokenSent","good"),r||u.event("forgotPassword","success")),e})},this.resetPassword=function(t,n,o){var r={username:t,resetToken:n,newPassword:o};return u.event("resetPassword","start"),e.post("customerPasswordChange",r).then(function(e){return e&&(i.add("passwordChanged","good"),u.event("resetPassword","success")),e})},this.processUsers=function(e){for(var n in e)O.users[e[n].id]?O.users[e[n].id].setData(e[n]):O.users[e[n].id]=new t(e[n])},this.processSubscriptions=function(e){for(var t in e)if(O.subscriptions[e[t].subscriptionId])O.subscriptions[e[t].subscriptionId].setInitialData(e[t],O.users);else{var o=new n(e[t],O.users);O.subscriptions[o.id]=o,o.ca=this,o.fastActivation&&(this.fastActivation=!0),o.isFiber||(this.hasMobileSubs=!0),o.isFiber&&(this.hasFiberSubs=!0)}},this.removeUnneededSubscriptions=function(e){for(var t in O.subscriptions){var n=!1;for(var o in e)if(e[o].subscriptionId==t){n=!0;break}n||(O.subscriptions[t].prepareForRemoval(),delete O.subscriptions[t])}},this.removeUnneededUsers=function(e){for(var t in O.users){var n=!1;for(var o in e)if(e[o].id==t){n=!0;break}n||delete O.users[t]}},this.changeLang=function(e){var t=[],n=[];for(var o in this.subscriptions)t.indexOf(this.subscriptions[o].user.id)>=0||"terminated"!=this.subscriptions[o].status&&(t.push(this.subscriptions[o].user.id),n.push(this.subscriptions[o]),this.subscriptions[o].user.preferredLang=e);var i=n.length,r=0;for(var o in n){if((r+=1)==i)return n[o].changeLang(e);n[o].changeLang(e)}},this.canExtend=function(){return(!T.onHold||!T.onHold.active)&&(0==T.statusId||8==T.statusId||9==T.statusId)},this.requireAllSubscriptionData=function(){return o.all(objToArray(O.subscriptions).map(function(e){return e.setActive()}))},this.refreshData=function(e,t){m.refreshingAccountData=!0,e||(e=0);var n=o.defer();return r(function(){t||document.hasFocus()?O.doRefresh().then(function(e){m.refreshingAccountData=!1,c.$emit("accountDataRefreshed"),n.resolve(!!e)}):O.refreshOnFocus=!0},e,1),n.promise},this.doRefresh=function(){return m.customerLoggedIn?(O.refreshingAccountData=!0,e.post("getAccountDetails").then(function(e){return O.refreshingAccountData=!1,e&&(O.updateData(e,!0,"refresh"),O.refreshAllSubscriptions()),e})):o.resolve()},this.getLoginDataFromRfeAndDoLoginResponse=function(t){var n=this;return this.hiddenLogin=!0,e.post("getAccountDetails",{},2,!0).then(function(e){if(n.hiddenLogin=!1,e&&!e.errorCode)return d.remove("loginData"),d.set("loginData",e,!0),n.handleLoginResponse(e,!1,"getLoginDataFromRfeAndDoLoginResponse",t);p.remove("loggedin")})},this.processBillingGroups=function(e,t){delete this.postpaidBillingGroup;for(var n in this.billingGroups){this.billingGroups[n].id=n,this.billingGroups[n].subscriptions={};for(var o in this.subscriptions)this.subscriptions[o].billingGroupId==n&&(this.billingGroups[n].subscriptions[o]=this.subscriptions[o]);"PRE_PAID_CARD"==this.billingGroups[n].type&&(this.billingGroups[n].type="prepaid",delete this.billingGroups[n].balance,this.prepaidBillingGroups.push(this.billingGroups[n])),"POST_PAID"==this.billingGroups[n].type&&(this.billingGroups[n].type="postpaid",this.postpaidBillingGroup=this.billingGroups[n])}for(var n in this.subscriptions){var i=this.subscriptions[n].billingGroupId;this.subscriptions[n].billingGroup=this.billingGroups[i],this.subscriptions[n].billingGroup?(this.subscriptions[n].type=this.subscriptions[n].billingGroup.type,this.subscriptions[n].applyBillingGroup()):(throwSafe("billing group not set: "+i+", subId: "+this.subscriptions[n].id+", rfe_id: "+O.rfeId+" | "+e+" | "+t,"59-id"),window.location.reload())}},this.handleDifferentUser=function(){d.remove("loginData"),d.remove("posCustDetails"),d.remove("x-pos-cust-username"),window.location.reload()},this.updateData=function(e,t,n){this.rawAccountresponse=JSON.parse(JSON.stringify(e)),O.processUsers(e.users),O.removeUnneededUsers(e.users),O.processSubscriptions(e.subscriptions),O.removeUnneededSubscriptions(e.subscriptions),O.accountOwner=O.users[e.userId],O.setCurrentUser(),O.billingGroups=e.billingGroups,O.recommendations=e.recommendations,O.personalIdsList=O.processIds(e.personalIdsList),O.needToVerifyId=O.checkIfNeedToVerifyId(c.isPos),O.canVerifyId=O.checkIfNeedToVerifyId(c.isPos,!0),O.primaryId=O.findPrimaryID(),O.hasIdValidatePostId=!!O.personalIdsList.find(function(e){return"TO_VALIDATE_POST_ID"===e.validationStatus}),O.balance=e.balance,t&&(p.get("loggedin")&&(cookieOptions.expires=(new Date).addDays(90),p.put("loggedin","true",cookieOptions)),d.remove("loginData"),d.set("loginData",e,!0)),O.processBillingGroups("update",n),O.checkEmailValidity(),t&&(O.accountRefresher=r(function(){console.log("refresh customer account after save"),O.refreshData()},O.refreshDelay,1))},this.canAddDevice=function(e){var t,n;return!m.customerLoggedIn&&"ob"!==b.realChannel||!!this.canExtend()&&(null===(t=this.creditCheckData)||void 0===t?void 0:null===(n=t.deviceOptionMap[e.id])||void 0===n?void 0:n.length)},this.canDoPreToPost=function(e){return!!m.customerLoggedIn&&(!(differenceInDays(objToDate(this.accountOwner.dob),swissDate())<6570)&&e.canDoPreToPost())},this.cantDoPrePostReason=function(e){return!!m.customerLoggedIn&&(differenceInMonths(objToDate(this.accountOwner.dob),swissDate())<216?"tooYoung":e.cantDoPrePostReason())},this.canEnablePremiumCalls=function(e){var t,n;return!e||null!==e&&void 0!==e&&null!==(t=e.user)&&void 0!==t&&t.age||S.reportThrowSafe("YDT-1970 no user was set for subscription : user present ? "+(e.user?"yes":"no")+e.msisdn+" investigate...",233949),!!(e&&e.user&&e.user.age)&&(null===e||void 0===e?void 0:null===(n=e.user)||void 0===n?void 0:n.age)>=16},this.isOldEnoughToOrder=function(e){return!m.customerLoggedIn||differenceInDays(objToDate(this.accountOwner.dob),swissDate())+this.getMinAge(e)>0},this.getMinAge=function(e){return null!==e&&void 0!==e&&e.isFiber?-6570:"tv"===(null===e||void 0===e?void 0:e.product.productType)?-6570:e&&"postpaid"!=e.type?-4745:-5840},this.isAccountOwner=function(){return!this.currentUser||(differenceInMonths(objToDate(this.currentUser.dob,!0),new Date)/12>18||!this.accountOwner||!this.currentUser||this.currentUser.id===this.accountOwner.id)},this.getCreditCheckKey=function(){var e={subs:this.getFilteredSubList(!0).map(function(e){return e.id}),userDetails:{firstName:this.accountOwner.firstName,lastName:this.accountOwner.lastName,dob:this.accountOwner.dob},address:this.accountOwner.address};return hashString(JSON.stringify(e))},this.doCreditCheck=function(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:48;if(!m.customerLoggedIn)return o.resolve({});var r=this.getCreditCheckKey();if(!t){var a=d.get("ccData",i);if(a&&a.key===r)return this.creditCheckData=a.data,this.isLightCustomer=this.creditCheckData.lightFlag,g.loggedInDeviceOptions=this.creditCheckData.deviceOptionMap,o.resolve(a.data)}return this.doingCreditCheck?m.waitForEvent("creditCheckDone"):(this.doingCreditCheck=!0,e.post("creditCheck",{},2,!0).then(function(e){n.doingCreditCheck=!1,c.$emit("creditCheckDone"),!e||e.errorCode?n.creditCheckData=void 0:(n.creditCheckData=e,n.isLightCustomer=n.creditCheckData.lightFlag,g.loggedInDeviceOptions=n.creditCheckData.deviceOptionMap,d.set("ccData",{key:r,data:e}))}))},this.canAddSubscription=function(e){if(!m.customerLoggedIn)return!0;var t=0;for(var n in this.subscriptions)"terminated"!=this.subscriptions[n].status&&"prepaid"==this.subscriptions[n].type&&(t+=1);return"prepaid"===e?t<99:this.creditCheckData&&(this.creditCheckData.remainingPostpaidSubs>0||this.creditCheckData.remainingBroadBandSubs>0||this.creditCheckData.remainingTVSubs>0)},this.passwordChangePopup=new h("passwordChangePopup","password-change-popup.html",{title:"passwordChangePopupTitle"},{onSubmit:function(){O.passwordChangePopup.hide()}}),this.emailManagementPopup=new h("emailManagementPopup","email-management-popup.html",{title:"emailValidationTitle"},{show:function(e){var t;e&&(e.title=null!==O&&void 0!==O&&null!==(t=O.accountOwner)&&void 0!==t&&t.emailAddress?"emailValidationTitle":"emailAddTitle")}}),this.subscriptionCount=function(){return Object.size(this.subscriptions)},this.getValidPreToPostSubs=function(){var e=[];for(var t in this.subscriptions)this.canDoPreToPost(this.subscriptions[t])&&e.push(this.subscriptions[t]);return e},this.refreshAllSubscriptions=function(){for(var e in this.subscriptions)this.subscriptions[e].gotDetails&&O.subscriptions[e].setActive(!0)},this.unblockSubscriptionOnhold=function(){if(!this.unblockingSubscriptionOnhold){this.unblockingSubscriptionOnhold=!0;var t={};for(var n in this.subscriptions)if("postpaid"==this.subscriptions[n].type){t.subscriptionId=this.subscriptions[n].id;break}return e.post("unblockSubscriptionOnhold",t).then(function(e){return O.unblockingSubscriptionOnhold=!1,e&&O.refreshData(0,!0).then(function(){O.refreshAllSubscriptions()}),e})}},this.getOldestActiveSub=function(e){for(var t in this.subscriptions)if("active"==this.subscriptions[t].status){if(e&&"prepaid"===this.subscriptions[t].type)continue;return this.subscriptions[t]}},this.findOldestActiveMobileSub=function(){return Object.values(this.subscriptions).find(function(e){return"active"===e.status&&"mobile"===e.getType()})},this.updateLocalStorage=function(){var e=d.get("loginData"),t=this.accountOwner.preferredLang.toUpperCase(),n=this.accountOwner.idDetails.nationality;if(e){for(var o=0;o<e.users.length;o++)e.users[o].personalDetails.preferredLang=t,e.users[o].id===this.accountOwner.id&&(e.users[o].personalDetails.idDetails.nationality=n);d.update("loginData",e)}},this.getProductId=function(e){if(e&&e.config){var t=Object.first(e.config.products);return!(!t||!t.config)&&t.config.id}if(!m.customerLoggedIn){var n=objToArray(g.findProductsByChannels([b.channel]));return(n.find(function(e){return"postpaid"===e.type})||n[0]).getConfigWithLowestCost().id}var o;if(this.postpaidBillingGroup){var i,r=null===(i=Object.first(this.postpaidBillingGroup.subscriptions))||void 0===i?void 0:i.rateplan;r&&(o=Object.first(r.products))}else{var a,s,c=null===(a=Object.first(null===(s=this.prepaidBillingGroups.filter(function(e){return Object.keys(e.subscriptions).length>0})[0])||void 0===s?void 0:s.subscriptions))||void 0===a?void 0:a.rateplan;if(!c)return!1;o=Object.first(c.products)}return o?o.bestConfig.id:this.getAccessCodeProductId()},this.getPendingIdDocument=function(){var e,t=_createForOfIteratorHelper(this.personalIdsList);try{for(t.s();!(e=t.n()).done;){var n=e.value;if("UNINITIALIZED"===n.validationStatus||"PARK"===n.validationStatus)return n}}catch(e){t.e(e)}finally{t.f()}},this.getInprogressIdDocument=function(){var e,t=_createForOfIteratorHelper(this.personalIdsList);try{for(t.s();!(e=t.n()).done;){var n=e.value;if("TO_VALIDATE_DIGITAL"===n.validationStatus)return n}}catch(e){t.e(e)}finally{t.f()}},this.generateAccountVerifyAccessCode=function(){var t=m.agentLoggedIn?"POS_ORDER":"ESHOP_ORDER";m.agentLoggedIn&&T.agent.data.rights.FORCE_SHIPMENT&&(t="OUTBOUND_ORDER");var n="".concat(window.isApp?D.getIntent():location.origin).concat(m.agentLoggedIn?"/pos":"/cust","/fetch-images"),o={productId:T.getAccessCodeProductId(),channel:"xx",accessCodeType:t,returnUrl:n,scanType:"digital",subscriptionType:"IDVALID",promotionCode:"",deviceId:""};return m.agentLoggedIn&&(o.agentId=T.agent.data.username),e.post("generateAccessCode",o,2,!0,void 0,void 0,void 0,void 0,void 0,void 0,!0)},this.getAccessCodeProductId=function(){var e="1045",t="1015";return e="1053",t="1037",T.postpaidBillingGroup?t:e},this.getSubscriptionFromMsisdn=function(e,t){for(var n in T.subscriptions)if((!t||T.subscriptions[n].type===t)&&T.subscriptions[n].msisdn===e)return T.subscriptions[n]},this.getFilteredSubList=function(e,t,n){var o=T.getUsersSubs().sort(function(e,t){return"terminated"===e.status?1:"terminated"===t.status?-1:"prepaid"===e.type?1:"prepaid"===t.type?-1:t.subscriptionStartDate>e.subscriptionStartDate?1:-1});if("mobile"===n&&(o=o.filter(function(e){return"mobile"===e.getType()||"none"===e.getType()&&"yallo_home_5g"!==e.rateplan.url})),"internet"===n&&(o=o.filter(function(e){return"internet"===e.getType()||"yallo_home_5g"===e.rateplan.url})),"tv"===n&&(o=o.filter(function(e){return"tv"===e.getType()})),!e)return o;var i=o.filter(function(e){return"terminated"!==e.status});return i.length>0?i:t?[]:o},this.getUsersSubs=function(){return T.isAccountOwner()?objToArray(T.subscriptions||{}):objToArray(T.subscriptions||{}).filter(function(e){var t;return(null===(t=e.user)||void 0===t?void 0:t.id)===T.currentUser.id})},this.getAccountOwnerName=function(){return T.accountOwner?T.accountOwner.firstName+" "+T.accountOwner.lastName:""},this.getAccountOwnersActiveSubs=function(){var e=T.accountOwner;return objToArray(T.subscriptions||{}).filter(function(t){var n;return(null===(n=t.user)||void 0===n?void 0:n.id)==e.id}).filter(function(e){return"active"===e.status}).sort(function(e,t){return e.subscriptionStartDate>t.subscriptionStartDate?1:-1})},this.getSubscriptionsByType=function(e,t){return T.getFilteredSubList(!0,t).filter(function(t){return t.type===e})},this.getCurrentSubscription=function(){var e,t=a.search().id;return t&&(e=T.subscriptions[t]),!e&&d.get("favSub")&&(e=T.subscriptions[d.get("favSub")]),e||(e=T.getFilteredSubList(!0)[0]),e},this.checkEmailValidity=function(){if(!m.customerLoggedIn)return!1;var t=T.accountOwner.emailAddress;if(!t)return T.emailAddressNotValid=!0;if(!(T.checkedEmailValidity&&T.checkedEmailValidity===t||(T.checkedEmailValidity=t||!0,T.accountOwner.emailValidated))){return/^([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,10})$/.test(t)?b.emailBlackList.find(function(e){return t.indexOf(e)>-1})?T.emailAddressNotValid=!0:void e.post("checkEmailValidity",{emailAddress:t},1,!0).then(function(e){T.emailAddressNotValid=!1,e.errorCode&&"630"===e.errorCode&&(T.emailAddressNotValid=!0)}):T.emailAddressNotValid=!0}},-1!==a.path().indexOf("/s/"))var _=c.$on("$locationChangeStart",function(e,t){if(-1===t.indexOf("/s/")){var n=createManualSearch(t);n&&n.username&&n.loginToken&&!T.checkedLoginToken?(c.showFullScreenLoader=!0,c.showFullScreenLoader=!1,T.checkedLoginToken||T.init(n),_()):T.init()}});else this.init()}]),app.service("CustomerBills",["Network","$q","Files","Language","Notifications","Analytics","State","$rootScope","$timeout",function(e,t,n,o,i,r,a,s,c){function d(e){return Math.round(20*e)/20}var u=this,l=this;this.bills=[],l.totalOpenAmount=0,l.totalDueAmount=0,l.totalDunningAmount=0,l.dunningLevel=0,this.getBills=function(n){var o=this;return this.gettingBills?this.waitForBillData():this.billDataLoaded&&!n&&this.bills?t.resolve(this.bills):(this.gettingBills=!0,a.checkCustomerLoggedIn().then(function(){return e.post("getBills").then(function(e){if(o.gettingBills=!1,e){o.billDataLoaded=!0,o.billExpiryTimeout&&c.cancel(o.billExpiryTimeout),o.billExpiryTimeout=c(function(){return o.billDataLoaded=!1},18e5),o.bills=o.processBills(e.bills);var t=d(e.totalOpenAmount),n=d(e.totalDueAmount);o.eligableForDunningStop=e.dunningEligible&&o.dunningLevel<60,o.dunningStopActive=!!e.lockEndDate,e.lockEndDate&&(o.dunningStopEndDate=new Date(e.lockEndDate)),o.credit=t<0?t:0,o.totalOpenAmount=t>.1?t:0,o.totalDueAmount=n>.1?n:0,o.invoiceDueAmount=e.invoiceDueAmount,o.totalDunningAmount=d(e.dunningAmount),o.totalInstallmentPlanAmount=d(e.installmentPlanAmount),o.backupReference=e.backupReference&&e.backupReference.substr(-10)}return o.gotBills=!0,s.$emit("gotBills"),o.bills})}))},this.processBills=function(e){return e=e.filter(function(e){return"999"!=e.invoiceNumber}),e.forEach(function(e){var t=(e.startDate||"").split("-").map(function(e){return parseInt(e)}),n=(e.endDate||"").split("-").map(function(e){return parseInt(e)});e.startDate=new Date(t[0],t[1],1),e.endDate=e.endDate?new Date(n[0],n[1]-1,daysInMonth(n[1]-1,n[0])):void 0,e.amount=d(e.amount),e.rawUsage={},e.invoicePaymentDetail&&(e.amount=d(e.invoicePaymentDetail.originalAmount),e.partiallyPaid=Math.abs(d(e.invoicePaymentDetail.openAmount))-Math.abs(d(e.invoicePaymentDetail.originalAmount))>.101,e.invoicePaymentDetail.openAmount=d(e.invoicePaymentDetail.openAmount),e.invoicePaymentDetail.dunnedAmount=d(e.invoicePaymentDetail.dunnedAmount),e.invoicePaymentDetail.dueDate=new Date(e.invoicePaymentDetail.dueDate),"00"!==e.invoicePaymentDetail.dunningLevel&&e.invoicePaymentDetail.openAmount>0&&(l.dunningLevel=parseInt(e.invoicePaymentDetail.dunningLevel))),e.paid="closed"===e.status&&!e.invoicePaymentDetail,e.overdue=e.endDate&&e.invoicePaymentDetail&&e.invoicePaymentDetail.dueDate.getTime()<swissDate().dayStart().getTime(),e.amount<=0&&(e.paid=!0,e.overdue=!1)}),e},this.waitForBillData=function(){var e=this;if(this.gotBills)return t.resolve();var n=t.defer(),o=s.$on("gotBills",function(){o(),n.resolve(e.bills)});return n.promise},this.getLastUnpaidBill=function(){var e=this.bills.filter(function(e){return!e.paid});return e[e.length-1]},this.resetData=function(){this.billDataLoaded=!1,this.gettingBills=!1,this.bills=[],l.totalOpenAmount=0,l.totalDueAmount=0,l.totalDunningAmount=0,l.dunningLevel=0,this.eligableForDunningStop=void 0,this.dunningStopActive=void 0},this.getBillFromId=function(e){return u.bills.find(function(t){return t.id===e})},this.getCurrentBill=function(){return u.bills.slice().sort(function(e,t){return e.startDate<t.startDate?1:-1})[0]},this.getBillFromMonthYear=function(e,t){var n=u.bills.find(function(n){return n.startDate.getMonth()===e&&n.startDate.getFullYear()===t});return n||u.bills.find(function(n){return n.endDate.getMonth()===e&&n.endDate.getFullYear()===t})},this.startCCPayment=function(n,r){return this.getBills(!0).then(function(){var a=t.defer();return e.post("payInvoiceWithCC",{billingGroupId:r,amount:n}).then(function(e){e&&loadDatatransScripts(e.dataTrans.dataTransURL,function(){e.language=o.data.current,createDatatransForm(e,o.data.current,void 0,void 0,!0).then(function(){Datatrans.startPayment({form:"#paymentForm",loaded:function(){},closed:function(){return a.resolve()},error:function(e){throwSafe(e,"60-id"),i.add("ccPaymentError","bad")}})})})}),a.promise})},this.isBillOfAfirstPostpaidMonth=function(e){return!1},this.downloadBillPdf=function(t){var o="invoice_"+t.invoiceNumber+".pdf";if(!t.gettingPdf){if(t.pdfData)return n.saveAs2(t.pdfData,o);t.gettingPdf=!0;var a={invoiceNumber:t.invoiceNumber};e.post("getInvoicePdf",a,void 0,!0).then(function(e){t.gettingPdf=!1,e.errorCode&&"652"===e.errorCode?i.add("billWillBeDownloadableInAFewDays","good"):e&&(t.pdfData=e.pdfData,i.add("SuccessfullyDownloadedMonthlyUsageReport","good"),n.saveAs2(e.pdfData,o))}),r.fireGaInteraction("download file",{download_name:t.startDate.toISOString().substring(0,10)+" - "+t.endDate.toISOString().substring(0,10)})}},this.setDunningStop=function(){var t=this;return e.post("setDunningStop",{}).then(function(e){if(e)return t.getBills(!0)})}}]),app.service("CustomerOrders",["Network","$rootScope","State","$q","Language",function(e,t,n,o,i){var r=this;this.allowedPickupStatuses=["Initial","Ready","SENDING_FF_ORDER","FF_ORDER_SENT","FF_ORDER_FULFILLED","ORDER_RETURNED","RETURN_ACCEPTED"],this.allowedPickupStatusesForOnp=[],this.orders=[],this.getOrders=function(i){return i&&r.gotOrders?o.resolve(r.orders):r.loadingOrders?r.returnWhenOrdersLoaded():n.checkCustomerLoggedIn().then(function(o){return!!o&&(r.loadingOrders=!0,e.post("getOrders").then(function(e){if(r.loadingOrders=!1,r.gotOrders=!0,t.$emit("ordersLoaded"),n.ordersLoaded=!0,e){var o=["LOGISTICS","HFC_INSTALLATION"];return r.orders=e.orders.filter(function(e){return o.includes(e.code)&&e.orderLines&&e.orderLines.length})||[],r.orders.forEach(function(e){var t,n,o;e.subscriptionId=e.orderLines[0].subscriptionId,e.orderId=e.orderNumber,e.trackingNumber=e.responseParameters?null===(t=e.responseParameters.split("TRACKING_NUMBER_0="))||void 0===t?void 0:null===(n=t[1])||void 0===n?void 0:null===(o=n.split(";"))||void 0===o?void 0:o[0]:void 0}),r.orders||[]}}))})},this.returnWhenOrdersLoaded=function(){return n.ordersLoaded?o.resolve(r.orders||[]):n.waitForEvent("ordersLoaded").then(function(){return r.orders||[]})},this.orderAllowedToBePickedUp=function(e,t,n){if(!n&&!window.enablePickupAtStore)return!1;if(!e)return!1;if(e.activationPushedByShop)return!1;if(-1===r.allowedPickupStatuses.indexOf(e.status))return!1;if(1!==e.orderLines.length)return!1;var o=t[e.subscriptionId];return!("PICKUP_AT_STORE"===e.shippingMethod&&!n)&&!(o&&o.activeNpFlows&&o.activeNpFlows.length&&-1===r.allowedPickupStatusesForOnp.indexOf(e.status))},this.orderIsSent=function(e){return!!e&&-1!==["SENDING_FF_ORDER","FF_ORDER_SENT","FF_ORDER_FULFILLED","ORDER_RETURNED","RETURN_ACCEPTED"].indexOf(e)},this.getOrderCantBePickedUpReason=function(e,t){if(!e)return"noOrderFound";if(-1===r.allowedPickupStatuses.indexOf(e.status))return"orderInWrongStatus";if(1!==e.orderLines.length)return"tooManyOrderLines";var n=t[e.subscriptionId];return n&&n.activeNpFlows&&n.activeNpFlows.length&&-1===r.allowedPickupStatusesForOnp.indexOf(e.status)?"npWaitForDelivery":void 0},this.getReadyForPickupOrders=function(e,t){return r.orders.filter(function(n){return r.orderAllowedToBePickedUp(n,e,t)})},this.pickupOrder=function(t,n){return o.all([loadScript("/assets/other/qrcode.js"),loadScript("/assets/other/barcode-generator.js")]).then(function(){var o="".concat(window.location.origin,"/pos/pickup?username=").concat(n.username,"&dob=").concat(objToDate(n.dob).toJSON(),"&orderId=").concat(t),i=qrcode(0,"L");console.log("adding data to qr code",o);var r=n.dob;console.log(r);var a=n.username+paddTo(r.day,2)+paddTo(r.month,2)+r.year;console.log("adding data to barcode",a);var s=document.createElement("canvas");JsBarcode(s,a,{format:"CODE128",width:2,height:40,displayValue:!1});var c=s.toDataURL("image/jpg",.7);console.log(c),i.addData(o),i.make();var d=i.createDataURL(10,0),u={orderId:t,userId:n.id,activationQrCode:d+"|"+c,pasLink:o};return e.post("pickupOrderAtPos",u)})},this.retryOrder=function(t,n){return n={city:n.city,postCode:n.postCode,streetName:n.streetName,streetNumber:n.streetNumber,country:n.country,co:n.co},e.post("retryOrder",{orderId:t,shippingAddress:n})},this.terminateOrder=function(t){
return e.post("terminateOrder",{subscriptionId:t,language:i.data.current})},this.terminateOrderVc=function(t,n,o){return e.post("terminateOrderVC",{subscriptionId:t,keyToken:n,code:o})}}]),app.service("Customerio",["Language",function(e){this.identifyUser=function(t,n){var o=o||[],i={id:t.id,first_name:t.ca.accountOwner.firstName,domain:window.microServiceEndpoint.split("-")[0]+".dev.".concat(window.brand,".ch/")+e.data.current,user_language:e.data.current,brand:window.brand,subscription_type:t.type,overdue_value:0};n&&(i.overdue_value=n),function(){var e,t,n;for(e=function(e){return function(){o.push([e].concat(Array.prototype.slice.call(arguments,0)))}},t=["load","identify","sidentify","track","page","on","off"],n=0;n<t.length;n++)o[t[n]]=e(t[n]);var r=document.createElement("script"),a=document.getElementsByTagName("script")[0];r.async=!0,r.id="cio-tracker",r.setAttribute("data-site-id","50a2c65bbb9a5174c8f0"),r.setAttribute("data-use-array-params","true"),r.setAttribute("data-use-in-app","true"),r.src="https://assets.customer.io/assets/track-eu.js",a.parentNode.insertBefore(r,a),o.identify(i),window._cio=o}();var r=function(e){console.log("Type: ",e.type),console.log("Message Id: ",e.detail.messageId),console.log("Delivery Id: ",e.detail.deliveryId)};o.on("in-app:message-opened",r),o.on("in-app:message-dismissed",function(e){}),o.on("in-app:message-error",function(e){})}}]),app.service("EndpointReplacer",["FeatureFlags",function(e){var t=this,n=[{old:"/ms/shorturl",new:"/shorturl",dateForProd:!1},{old:"/ms/capinfos",new:"/capture-info",dateForProd:1663027199e3},{old:"/ms/oidcp",new:"/oidc",dateForProd:!1},{old:"/rest/service/tv-service/DoFreeTvSignup",new:"/tv-service/DoFreeTvSignup",dateForProd:!1},{old:"/ms/auth/public",new:"/auth",dateForProd:1662940799e3},{old:"/ms/telegram-alert",new:"/telegram-alert",dateForProd:1662940799e3},{old:"/ms/operatorLookup",new:"/carrier-lookup",dateForProd:1662940799e3},{old:"/telegram-alert",new:"/telegram-alert",dateForProd:!1},{old:"/ms/gdpr/public/getGdprParams",new:"/gdpr-service/getGdprParams",dateForProd:1663459199e3}],o=["preprod","test","integration","production"];this.init=function(){t.checkNewEndpoint=function(t,i){var r,a;if(t.includes("dummy_rfe"))return t;var s="t01"===window.testEnvName?"preprod":"t02"===window.testEnvName?"test":"t03"===window.testEnvName?"integration":"production";if(-1!==location.hostname.indexOf("local-9002.dev.")&&(s="test"),!o.filter(function(e){return e===s}).length>0)return t;var c="https://".concat(s,"-ms.dev.").concat(brand,".ch");if(i)return c;var d;if(n.forEach(function(e){t.search(e.old)>0&&!d&&(d=e)}),!d)return t;var u="".concat(c,"/").concat(t.split("/").slice(3).toString().replaceAll(",","/")),l=u.replace(null===(r=d)||void 0===r?void 0:r.old,null===(a=d)||void 0===a?void 0:a.new);if(!e.get("endpoint-replacement")){if(e.get("endpoint-replacement-prod")&&window.production){c="https://ms.".concat(brand,".ch");var p=d.dateForProd;if(p&&!1!==p&&p<Date.now()){var g;return l="".concat(c).concat(null===(g=d)||void 0===g?void 0:g.new)}}return t}return l}},this.init()}]),app.service("ErrorReporting",["TelegramAlert","CommonData",function(e,t){var n,o=this,i=[],r=function(e){var t,n,o;if(null!==(t=e)&&void 0!==t&&t.message)o="Error: "+e.message+"\n",o+="Stack: "+e.stack;else if(null!==(n=e)&&void 0!==n&&n.path){var i;o=e.path.toString()+" : "+(null===(i=e.path[0])||void 0===i?void 0:i.src)}else{if("object"===_typeof(e))try{e=JSON.stringify(e)}catch(e){console.warn("Failed to stringify the error object")}o="Error: "+e}return o},a=function(e){return e=e.split("Possibly unhandled rejection: ").join(""),!!i.includes(e)||(i.push(e),!1)},s=function(e,t){var n,o;return!!a(e)||(["Failed to fetch","The network connection was lost.","Network request failed","annullato","NetworkError","Abgebrochen","cancelled","annulé","anulowane","ERR_CUST_AUTH_KEY_COOKIE_MISSING","find variable: ttq","Script error.","ttq is not defined","Error: Illegal invocation Stack: TypeError: Illegal invocation"].find(function(t){return e.includes(t)})||(null===t||void 0===t?void 0:t.includes("lottie-player.js"))&&(null===(n=window.navigator)||void 0===n?void 0:null===(o=n.userAgent)||void 0===o?void 0:o.includes("Windows")))},c=function(e,t){var n,o;return(!e.includes("is not allowed by Access-Control-Allow-Origin")||null===(n=window.navigator)||void 0===n||null===(o=n.userAgent)||void 0===o||!o.includes("Applebot"))&&((null===t||void 0===t||!t.includes("https://analytics.tiktok.com"))&&!["pintrk","gtm.js","tiktok"].find(function(t){return e.includes(t)}))};this.reportJsError=function(t){var n=r(t.error||t),o=t.filename;if(!s(n,o))return c(n,o)?e.submitError(n,{type:"js",source:o,notifyToTelegram:!0}):e.submitWarning(n,{type:"js",source:o,notifyToTelegram:!1})},this.reportUnhandledRejection=function(t){var n=r(t.reason),o=new RegExp(/http\S+\/.+\.js/).exec(n),i=null===o||void 0===o?void 0:o[0];if(!s(n,i))return e.submitError(n,{type:"js-promise",source:i,notifyToTelegram:c(n,i)})},this.reportAngularError=function(t){var n=r(t);if(!s(n)&&!n.includes("telegram-alert/submitNotification"))return e.submitError(n,{type:"angular",notifyToTelegram:c(n)})},this.reportThrowSafe=function(t,n){var o=r(t).split("\n")[0];if(!s(o))return n&&(o=o+" | ID: "+n),e.submitWarning(o,{type:"throwsafe",notifyToTelegram:c(o)})},this.reportRfeError=function(n,o,i,r,a){var s,c="RFE ID: "+r+"\n";return c+="callName: "+n+"\n",c+="errorCode: "+o+"\n",c+="POS agent: "+(null===a||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.username)+" - "+(null===t||void 0===t?void 0:t.channel)+"\n",c+="errorDescription: "+i,e.submitError(c,{type:"RFE"})},this.reportInvalidPromotionCode=function(t){var n="Promotion not found:----"+t;return e.submitWarning(n,{source:"Prismic promotions - 999 - rfe_id=prismic",type:"PROMOTION",notifyToTelegram:!0})},this.debugLog=function(){if(window.isTest){var e;(e=console).log.apply(e,arguments)}},this.debugWarning=function(){if(window.isTest){var e;(e=console).warn.apply(e,arguments)}},window.angularErrorReporter=this.reportAngularError,window.throwSafeErrorReporter=this.reportThrowSafe,window.addEventListener("error",this.reportJsError.bind(this)),window.addEventListener("unhandledrejection",this.reportUnhandledRejection.bind(this)),null===(n=window.onloadErrors)||void 0===n||n.forEach(function(e){return o.reportJsError(e)}),this.test=function(){throw"testing error string"}}]),app.service("ExitIntent",["$rootScope",function(e){function t(){r=Date.now()}var n=this,o=!0,i="",r=Date.now(),a=!0;window.onpagehide=function(){n.triggerIntent("onPageHide")},document.onmouseleave=function(e){(event.clientY<=0||event.clientX<=0||event.clientX>=window.innerWidth||event.clientY>=window.innerHeight)&&n.triggerIntent("mouseLeave")};var s=window.innerHeight;window.addEventListener("resize",function(){window.innerHeight<=s?a||(n.triggerIntent("navBarOpen"),s=window.innerHeight,a=!0):a=!1}),n.processLocationChangeStart=function(r,a,s){if(t(),!i)return void(i=s);var c=!1;if(!o&&a.split("?")[0]===i.split("?")[0]){var d;-1!==s.indexOf("/eshop/")?-1!==a.indexOf("/eshop/")&&(d="navigateBackCheckout"):d="navigateBack",d&&(c=n.triggerIntent(d))}return-1!==s.indexOf("/eshop/")&&-1===s.indexOf("/confirmation")&&-1===a.indexOf("/eshop/")&&(c=n.triggerIntent("navigateOutOfCheckout")),o||-1===s.indexOf("/checkout/")&&-1===s.indexOf("/process/email")||-1!==a.indexOf("/checkout/")||-1!==a.indexOf("/process/email")||-1!==a.indexOf("/process/phone-number")||(c=n.triggerIntent("leaveCheckoutWithoutPuttingEmail")),c&&(r.preventDefault(),e.$emit("$routeChangeCancel")),o=!1,i=s,c},n.triggerIntent=function(t){e.$emit("exitIntent",t)},window.addEventListener("keypress",t),window.addEventListener("touchend",t),window.addEventListener("touchstart",t),setInterval(function(){return e.$emit("inactivitySince",Date.now()-r)},1e3)}]);var availableFeatureFlags=[["debug-level",["debug","info","off"]],"experimental","YDT-721","hfc-phase-2","device-env-prismic","endpoint-replacement","telco-act-postpaid","tv-info-internet-products","rateplanPlus","special-link-feature","company-name-field-testing","GTM-testing-changes","BlackFriday-release","new-activation-fee","device-status-delivery","remove-linecheck-condition-YDT-2455","endpoint-replacement-prod","AddressLookup-new-endpoint","performLinecheck-new-endpoint","linecheck-new-parsing","Yallo-Black-Plus-enabling-for-pos","invalid-fields-YDT-2560","Ayma-google-tag-manager-changes","YDT-2685-Zendesk-issues","device-display-selfcare","MBCR-MBCR-12315-rp-date-change","relocation-hfc","fiber-change-plan-feature","test-5g-option-new-discount","new-identity-login","Ayma-google-tag-manager-changes-2","Fiber-layer-priority","showInflationStatus","zendesk-lang","customerio_integration","new-admin-fee","new_barecode_test","debug-barcode-ios"],telcoAct2EnabledByDefault=function(){return Date.now()>1664582399e3?"telco-act-postpaid":""},rateplanPlusEnabledByDefault=function(){return Date.now()>16606116e5?"rateplanPlus":""},NewActivationFeeEnabledByDefault=function(){return Date.now()>1663452e6?"new-activation-fee":""},yalloBlackPlusEnabledForPos=function(){return Date.now()>1667779199e3?"Yallo-Black-Plus-enabling-for-pos":""},getEnabledFlags=function(e,t){return e?["telco-act-postpaid","endpoint-replacement-prod","GTM-testing-changes","Ayma-google-tag-manager-changes","AddressLookup-new-endpoint","new_barecode_test","new-admin-fee"]:"t01"===t?["endpoint-replacement","device-status-delivery","telco-act-postpaid","GTM-testing-changes","Ayma-google-tag-manager-changes","Ayma-google-tag-manager-changes-2","AddressLookup-new-endpoint","new_barecode_test","new-admin-fee"]:"t02"===t?["YDT-721","endpoint-replacement","device-status-delivery","telco-act-postpaid","GTM-testing-changes","Ayma-google-tag-manager-changes","Ayma-google-tag-manager-changes-2","AddressLookup-new-endpoint","new_barecode_test","new-admin-fee"]:"t03"===t?["endpoint-replacement","device-status-delivery","telco-act-postpaid","GTM-testing-changes","Ayma-google-tag-manager-changes","special-link-feature","Ayma-google-tag-manager-changes-2","AddressLookup-new-endpoint","new_barecode_test","new-admin-fee"]:[]},localDefaultValues={"debug-level":"debug"},getDefaultValues=function(e,t){return e?{"debug-level":"off"}:"t01"===t?{"debug-level":"info"}:"t02"===t?{"debug-level":"info"}:"t03"===t?{"debug-level":"info"}:{"debug-level":"off"}},stringToInternalValue=function(e){return"true"===e||"false"!==e&&e};app.service("FeatureFlags",["Storage","$location",function(e,t){var n=this;this.init=function(){var o=getEnabledFlags(window.production,window.testEnvName),i=getDefaultValues(window.production,window.testEnvName),r=e.get("featureFlags",1/0,!0)||{},a=t.search();n.featureFlags=availableFeatureFlags.map(function(e){var t=Array.isArray(e)?e[0]:e,n=a["ff.".concat(t)];if(n)return[t,stringToInternalValue(n)];if(void 0!==r[t])return[t,r[t]];if(Array.isArray(e)){return[t,window.localDevEnv&&localDefaultValues[t]||i[t]]}return[t,o.includes(t)]}).reduce(function(e,t){var n=_slicedToArray(t,2),o=n[0],i=n[1];return _objectSpread(_objectSpread({},e),{},_defineProperty({},o,i))},{}),e.set("featureFlags",n.featureFlags,!0)},this.resetToDefault=function(){e.remove("featureFlags"),n.init()},this.availableFeatureFlags=function(){return availableFeatureFlags.map(function(e){var t=Array.isArray(e)?e[0]:e;return{options:Array.isArray(e)?e[1]:null,name:t,value:n.get(t)}})},this.get=function(e){var t;return e?null!==(t=n.featureFlags[e])&&void 0!==t&&t:n.featureFlags},this.set=function(t,o){n.featureFlags[t]=stringToInternalValue(o),e.set("featureFlags",n.featureFlags,!0)},this.enable=function(e){return n.set(e,!0)},this.disable=function(e){return n.set(e,!1)},this.getEnabledFlagsForEnvironment=function(e){return"prod"===e?getEnabledFlags(!0):getEnabledFlags(!1,e)},this.init()}]);var _0x184e8a=_0xf655;(function(e,t){for(var n=_0xf655,o=e();[];)try{if(435771===parseInt(n(378))/1*(parseInt(n(382))/2)+-parseInt(n(373))/3*(parseInt(n(379))/4)+parseInt(n(375))/5+parseInt(n(376))/6+parseInt(n(384))/7*(-parseInt(n(377))/8)+parseInt(n(380))/9*(-parseInt(n(371))/10)+parseInt(n(381))/11)break;o.push(o.shift())}catch(e){o.push(o.shift())}})(_0x490d),app[_0x184e8a(374)](_0x184e8a(372),function(){this.chck=function(e){return e===_0xf655(383)}}),app.service("FileUpload",["$http",function(e){this.uploadFileAndFieldsToUrl=function(t,n,o){var i=new FormData;i.append("file",t);for(var r=0;r<n.length;r++)i.append(n[r].name,n[r].data);return e.post(o,i,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})}}]),app.service("Files",["$rootScope","Notifications","State",function(e,t,n){this.saveAs2=function(o,i){if(o){var r=o instanceof Blob?o:b64toBlob(o,"application/pdf");if(window.ReactNativeWebView&&r){var a=JSON.stringify({pdfB64:o,fileName:i,pdfBlob:r});return void window.ReactNativeWebView.postMessage(a)}if(!e.app&&r)return loadScript("/assets/other/FileSaver.min.js").then(function(){return saveAs(r,i)});window.cordova&&n.returnWhenCordovaLoaded().then(function(e){var n="android"===window.cordova.platformId?window.cordova.file.externalRootDirectory:window.cordova.file.documentsDirectory;window.resolveLocalFileSystemURL(n,function(e){e.getFile(i,{create:!0},function(e){e.createWriter(function(e){e.onwriteend=function(){window.cordova.plugins.fileOpener2.open(n+i,"application/pdf",{error:function(e){throw t.add("error","bad"),e},success:function(e){t.add("savedFile","good")}})},e.onerror=function(e){throw t.add("error","bad"),e},e.write(r)},function(e){throw t.add("error","bad"),e})})})})}}}]),app.service("FoundCustomerCheckout",["Checkout","AgentAccount","CustomerAccount","Storage","$cookies","CheckoutSteps","$q",function(e,t,n,o,i,r,a){var s=this;this.data=o.get("customer-exists-data")||{},this.start=function(e,t,n){r.goToStep("customer-exists"),this.data.username=e,this.data.dob=t,this.data.productType=n,o.set("customer-exists-data",this.data,!0)},this.findExistingCustomer=function(){if(!this.data.dob)return a.resolve();var e=this.data.username,n=this.data.dob;return t.findExistingCustomer(e,null,null,objToDate(n,!0).toServerJSON()).then(function(e){return s.accounts=e?e.accounts:[],e})},this.continue=function(e){var t=this;return this.getExistingCustomer(e).then(function(e){return!!e&&n.doCreditCheck().then(function(){r.canHaveOrderAfterLogin()&&t.validateOrder()})})},this.validateOrder=function(){var t,n,o,i,a=null===(t=e.orderData)||void 0===t?void 0:null===(n=t.billingCustomerDetails)||void 0===n?void 0:n.idCheckDone,s=null===(o=e.orderData)||void 0===o?void 0:null===(i=o.billingCustomerDetails)||void 0===i?void 0:i.pixelScanned;return e.getAccessCode(!0).then(function(t){if(!t)return r.goToError("technical");e.copyCustomerDataToOrderData(t.idCheckRequired,e.orderData),t.idCheckRequired?(a&&(e.orderData.billingCustomerDetails.idCheckDone=!0),s&&(e.orderData.billingCustomerDetails.pixelScanned=!0)):e.orderData.images={},r.goToStep("customer-data"),e.save()}).catch(function(e){return throwSafe(e,"61-id"),r.goToError("technical")})},this.getExistingCustomer=function(e){return t.getExistingCustomer(e.username).then(function(r){return r&&(i.put("posFoundCustomer","true",cookieOptions),o.remove("posCustDetails"),o.remove("x-pos-cust-username"),r.username=e.username,o.set("posCustDetails",r),n.processLoginResponse(r,void 0,void 0,void 0,"found customer getExistingCustomer"),t.customer=n),r})}}]),app.service("Gdpr",["$http","Authentication","Notifications","State","CustomerAccount",function(e,t,n,o,i){var r=this;this.showGdprCheckboxForExistingCustomers=!1,this.endpoint=window.microServiceEndpoint+"gdpr-service/",this.brandKey="lebara",this.showOptAllIn=function(){return o.customerLoggedIn?r.gdprAccountCheck().then(function(e){var t;return null===(t=e.found)||void 0===t||t}):Promise.resolve(!0)},this.subscribeWithDefault=function(e,t,n){return r.doPost("subscribeGdprWithDefault",{item:t,itemValue:e,brand:r.brandKey},n)},this.subscribeAccountWithDefault=function(e){return r.doPost("subscribeGdprForAccount",{},{"selfcare-token":t.selfcareToken},e)},this.gdprAccountCheck=function(e){return r.doGet("gdprAccountCheck",{"selfcare-token":t.selfcareToken,showNotification:e})},this.updateGdprSettingsOnTransaction=function(e,n){return r.doPost("updateGdprSettingsOnTransaction",{orderNumber:e},{"selfcare-token":t.selfcareToken},n)},this.getAllItemsForAccount=function(e){return r.doGet("getGdprItemsForAccount",{"selfcare-token":t.selfcareToken},e)},this.getSettingsForAccount=function(e){return r.doPost("getGdprSetttigsForItem",{item:"account",itemValue:i.accountId},{"selfcare-token":t.selfcareToken},e)},this.doPost=function(t,n,o,i){return e.post(r.endpoint+t,n,{headers:o}).then(function(e){return e.data.status?e.data.data:r.handleError(e.data.errorDesc,i)}).catch(function(e){return r.handleHttpError(e,i),!1})},this.doGet=function(t,n,o){return e.get(r.endpoint+t,{headers:n}).then(function(e){return e.data.status?e.data.data:r.handleError(e.data.errorDesc,o)}).catch(function(e){return r.handleHttpError(e,o),!1})},this.handleError=function(e,t){return console.log(e),throwSafe(e),t&&n.add("error_"+e,"bad"),!1},this.handleHttpError=function(e,t){throwSafe(e),t&&n.add("error","bad")}}]),app.service("Identification",["Network","Notifications","Camera","Checkout","CommonData","CustomerAccount","Storage","$q",function(e,t,n,o,i,r,a,s){this.docTypes={side1:"ID_FRONT",side2:"ID_BACK",selfie:"ID_VIDEO",contract:"SIGNED_CONTRACT",poa:"SIGNED_POA",contractUnsigned:"UNSIGNED_CONTRACT",poaUnsigned:"UNSIGNED_POA",contractSignature:"CONTRACT_SIGNATURE",poaSignature:"POA_SIGNATURE"},r.identification=this,this.convertDocType=function(e){for(var t in this.docTypes)if(this.docTypes[t]==e)return t},this.createImage=function(e,t,n,o){return{b64:e,fileType:t,documentType:n,inputType:o,confirmed:!1}},this.getCurrentStep=function(e,t,n){return e.find(function(e){return e.documentType===t&&e.confirm===n})},this.saveCaptureData=function(o,i,r,c){if(!o||!o.documentType)return s.reject("Image doesnt exist");var d={accessCode:i,docCategory:this.docTypes[o.documentType],fileType:o.fileType,pixelCheck:!r,previousImgCheckSum:o.previousImgCheckSum,imageBinaryData:o.b64.split(",")[1]};return e.post("saveCaptureData",d,2,!0).then(function(e){if(e&&"0"===e.errorCode&&(e.errorCode=0),window.isTest&&(!e||e.errorCode)){var i=a.get("errorImages")||[];i.length>3&&i.splice(0,1),i.push(d),a.set("errorImages",i)}var s=checkPixelIsError(e,r);if(o.pixelChecked=!r,!1===s)o.checkSumValue=e.checkSumValue,o.secondPageRequired=e.secondPageRequired;else{if("partial"===s)return"partial";if(!c){var u=n.mobileCamera?"webcam-info":"bad";e.errorCode&&[301,302,303,304].indexOf(1*e.errorCode)>-1?t.add("pixelError-"+urlify(e.errorCode),u,5,2):e.errorCode&&console.warn(e.errorCode+" - "+e.errorDescription)}}return!s&&e})},this.sendExternalInfo=function(t,n){var o={accessCode:t,extraInfo:n};return e.post("addAccessCodeInfo",o,2,!0)},this.convertMrzData=function(e){return{dob:{day:e.dateOfBirth?parseInt(e.dateOfBirth.substring(8,10)):void 0,month:e.dateOfBirth?parseInt(e.dateOfBirth.substring(5,7)):void 0,year:e.dateOfBirth?parseInt(e.dateOfBirth.substring(0,4)):void 0},firstName:e.firstName,lastName:e.lastName,title:e.gender?"m"===e.gender?"Mr":"Ms":void 0,expiry:{day:e.expirationDate?parseInt(e.expirationDate.substring(8,10)):void 0,month:e.expirationDate?parseInt(e.expirationDate.substring(5,7)):void 0,year:e.expirationDate?parseInt(e.expirationDate.substring(0,4)):void 0},idNumber:e.documentNumber,idTypeId:e.documentType,nationality:e.nationality}},this.uploadStartScannedId=function(e,t,n,r){return o.getIdTypes(e.nationality,t).then(function(t){if(t&&t.allowedIdTypes&&t.allowedIdTypes.indexOf(e.idTypeId)>-1)return o.reUploadImages(r,n).then(function(){return i.tempIdCheckResult=void 0,!0})})}}]),app.service("KeepAlive",["Network","State",function(e,t){setInterval(function(){return(t.agentAccountLoggedIn||t.customerLoggedIn)&&e.post("bootloader")},108e4)}]),app.service("Keys",function(){this.pressed={},this.tracking=[];var e=this;this.register=function(t,n,o){Array.isArray(t)||(t=[t]);for(var i in t)e.tracking.push({key:t[i],callback:n,preventDefault:o})},this.unRegister=function(e,t){Array.isArray(e)||(e=[e]);for(var n in e)for(var o=0;o<this.tracking.length;o++)this.tracking[o].key==e[n]&&this.tracking[o].callback==t&&(this.tracking.splice(n,1),o--)},document.addEventListener("keydown",function(t){e.pressed[t.keyCode]=!0;for(var n in e.tracking)e.tracking[n].key==t.keyCode&&(e.tracking[n].callback(t.keyCode),e.tracking[n].preventDefault&&t.preventDefault())}),document.addEventListener("keyup",function(t){delete e.pressed[t.keyCode]})}),app.service("Language",["$translate","Storage","$location","Analytics","$rootScope","$timeout","Popup","State","$q","Notifications",function(e,t,n,o,i,r,a,s,c,d){var u=this,l=this;this.data={current:"",languages:["de","fr","it","en"],zendeskLang:""};this.changeLang=function(r){this.data.current=r,i.lang=r,i.zendeskLang="en"===r?"en-gb":r,this.data.zendeskLang=i.zendeskLang,s.languageLoaded=!1,this.loadingLang=!0,i.$emit("langChangeStart",r),e.use(r),t.set("lang",r);var a=this.getPathWithoutLanguage(),c="/"+l.data.current+"/"+a;"/"===c.substring(c.length-1,c.length)&&(c=c.substring(0,c.length-1)),n.path()!==c&&n.path(c).replace(),o.setDimention("language",l.data.current),window.lang&&this.promotions.fixCustomPromos(),window.lang=r,this.onLanguageChangeFinished().then(function(){i.$emit("langChangeEnd",r),s.languageLoaded=!0,s.languageLoadedInitial=!0})},this.onLanguageChangeFinished=function(){return u.loadingLang?s.waitForEvent("$translateChangeSuccess"):c.resolve()},this.getPathWithoutLanguage=function(){return n.path().split("/").filter(function(e){return e.length>0}).filter(function(e,t){return!(0==t&&u.isValidLanguage(e))}).join("/")},this.isValidLanguage=function(e){return l.data.languages.includes(e)};var p=new a("accountLanguagePopup1","account-language-popup.html",{classes:["center","small","no-header"],hideHeader:!0},{setAccountLanguage:function(){u.account.changeLang(p.data.lang),p.hide()},hide:function(){t.set("langPopupAnswered",!0,!0)}});this.showLanguagePopup=function(e){p.data.lang=e,!s.agentLoggedIn&&s.customerLoggedIn&&!i.checkoutMode.active&&e!==u.account.accountOwner.preferredLang&&e!==u.data.current&&matchPaths(["?/account/settings"])&&r(function(){return p.show()},1)},l.changeLang(yolSiteData.lang),i.$on("$translateChangeSuccess",function(){u.loadingLang=!1,s.languageLoadedInitial=!0}),i.$on("$translateChangeError",function(e,t){var n=t.language,o="Sorry, a system error has occurred. Please try again later.";if("de"==n&&(o="Ein technischer Fehler ist aufgetreten. Bitte versuchen Sie es später noch einmal."),"fr"==n&&(o="Une erreur technique est survenue. Veuillez réessayer ultérieurement."),"it"==n&&(o="Purtroppo si è verificato un errore di sistema. Riprovi più tardi."),d.add(o,"bad",10,300),window.isTest)throw"$translateChangeError, lang: "+t.language})}]),app.service("Linecheck",["Network","Popup","Analytics","$rootScope","Notifications","FeatureFlags","CaptureInfo",function(e,t,n,o,i,r,a){var s=this;this.linecheckFromLocalstorage=function(e){if(e){var t,n=e.data.eligibleAccess.find(function(e){return null!==e.lri&&void 0!==e.l1})||null;n||console.log("no lri from kitsune data"),n&&(t=n.lri.slice(0,15));var o=s.formatResponse(e.data,!1,"checkout",t,t?void 0:{});s.setGlobal(o),setTimeout(function(){localStorage.removeItem("kitsuneCheckout")},2e4),s.internalLineCheckRes=o}},this.lineCheck=function(e,t,n,o){return s.lineCheckInternal(e,t,n,o).then(function(n){try{var i,r={};e?r={city:e.city,zip:e.postCode,streetName:e.streetName,streetNumber:e.streetNumber}:null!==(i=s.internalLineCheckRes)&&void 0!==i&&i.address&&(r={streetName:s.internalLineCheckRes.address.street,streetNumber:s.internalLineCheckRes.address.houseNr,zip:s.internalLineCheckRes.address.zipcode,city:s.internalLineCheckRes.address.city}),a.submitLineCheckDetails(_objectSpread({lineCheckResultJson:JSON.stringify(s.internalLineCheckRes),feCalculatedResult:n?JSON.stringify(n):"something went wrong with the linecheck, result is: "+n,brand:brand,otoId:t,source:o},r))}catch(e){throwSafe(e)}return n})};var c=function(e){return{postCode:e.zipcode,city:e.city,streetName:e.street,streetNumber:e.houseNr,valid:!0,country:"200903041337530279"}};this.lineCheckInternal=function(t,n,o,i){var a={};t?r.get("performLinecheck-new-endpoint")?a.address={postCode:t.postCode,city:t.city,streetName:t.streetName,streetNumber:t.streetNumber}:a.address={postCode:t.postCode,city:t.city,streetName:t.streetName,streetNumber:t.streetNumber,building:""}:a.otoId=n;var c=r.get("performLinecheck-new-endpoint")?"linecheck/performTechnicalLineCheck":"performTechnicalLineCheck",d=r.get("performLinecheck-new-endpoint")?window.microServiceEndpoint:null,u=!!r.get("performLinecheck-new-endpoint");return e.post(c,a,void 0,!0,d,void 0,u,!0,void 0,!0).then(function(e){return s.formatResponse(e,o,i,n,t)})},this.formatResponse=function(e,t,n,o,a){var d,u,l,p,g,f;s.internalLineCheckRes=e;var h={isRetry:t};if(!e||e.errorCode){var m;if(!t||-1!==(null===e||void 0===e?void 0:e.errorDescription.indexOf("Only nearby address could be found"))){var v,b;if(-1!==(null===(v=e.errorDescription)||void 0===v?void 0:v.indexOf(" found ["))&&(m=null===(b=e.errorDescription)||void 0===b?void 0:b.split(" found [")[1].split("]")[0].trim()),m){var w,C,y=m.split(", ")[1].split(" ")[0],D=m.split(", "+y+" ")[1],S=m.split(", "+y+" ")[0],I=null===(w=S)||void 0===w?void 0:w.split(" ").pop();if(S=null===(C=S)||void 0===C?void 0:C.split(" ").slice(0,-1).join(" "),y&&D&&S&&I)return console.log("Retrying with suggested address",{postCode:y,city:D,streetName:S,streetNumber:I}),s.lineCheck({postCode:y,city:D,streetName:S,streetNumber:I},o,!0,n+" - retry");m=void 0}}return m||i.add("error_"+e.errorCode),!1}var k=null===(d=e.eligibleAccess)||void 0===d?void 0:null===(u=d.find(function(e){return"MOBILE"===e.technology}))||void 0===u?void 0:u.coverage;null===k||void 0===k||k.forEach(function(e){return h[e.layer]=e}),h["5G"]||(h["5G"]={indoor:{maxBandwidthDown:0,maxBandwidthUp:0},outdoor:{maxBandwidthDown:0,maxBandwidthUp:0}}),h["4G"]||(h["4G"]={indoor:{maxBandwidthDown:0,maxBandwidthUp:0},outdoor:{maxBandwidthDown:0,maxBandwidthUp:0}});var P=null===(l=e.eligibleAccess)||void 0===l?void 0:l.find(function(e){return"L1_XGS_DHCP_FIBER"===e.access.accessType});!a&&P&&P.lri&&(P.otoIdList||(P.otoIdList=[]),P.otoIdList.push({otoId:P.lri,otoIdState:P.otoIdState}));var T=null===(p=e.eligibleAccess)||void 0===p?void 0:p.find(function(e){return"L3_XGS_DHCP_FIBER"===e.access.accessType});h.fiber={qualifiedBy:a?"byAddress":"byOTOId"},"byOTOId"===h.fiber.qualifiedBy&&(h.fiber.otoId=o),P&&(h.fiber.l1={accessType:P.access.accessType,otoIdList:P.otoIdList,otoIdState:P.otoIdState,tspId:P.access.tspId,status:P.status},"PLANNED"===h.fiber.l1.status&&(h.fiber.l1.otoIdState="BEPREADY"),h.fiber.l1&&h.fiber.l1.otoIdList&&h.fiber.l1.otoIdList.length&&h.fiber.l1.otoIdList.forEach(function(e){return e.otoId=e.otoId.substring(0,15)}),"PLANNED"===P.status&&h.fiber.l1.otoIdList.forEach(function(e){return e.otoIdState="BEPREADY"})),T&&(h.fiber.l3={accessType:T.access.accessType,otoIdList:T.otoIdList,otoIdState:T.otoIdState,tspId:T.access.tspId,status:T.status},"PLANNED"===h.fiber.l3.status&&(h.fiber.l3.otoIdState="BEPREADY"),h.fiber.l3.otoIdList.forEach(function(e){return e.otoId=e.otoId.substring(0,15)}),"PLANNED"===T.status&&h.fiber.l3.otoIdList.forEach(function(e){return e.otoIdState="BEPREADY"})),h.fiber.otoIdList=[],h.fiber.l1&&h.fiber.l1.otoIdList&&h.fiber.l1.otoIdList.forEach(function(e){return h.fiber.otoIdList.push(_objectSpread({layer:"l1"},e))}),h.fiber.l3&&h.fiber.l3.otoIdList.forEach(function(e){return h.fiber.otoIdList.push(_objectSpread({layer:"l3"},e))}),h.fiber.preferredLayer=P?"l1":T?"l3":"",h.fiber.available=!(!P&&!T);var O=(null===P||void 0===P?void 0:P.address)||(null===T||void 0===T?void 0:T.address)||e.address;O&&(h.fiber.address=c(O)),h.upc={available:!(null===(g=e.accessProviderStatus.find(function(e){return"UPC"===e.name}))||void 0===g||!g.accesses.find(function(e){return"OK"===e.result}))};var _=null===(f=e.eligibleAccess)||void 0===f?void 0:f.find(function(e){return"CABLE_HFC"===e.access.accessType});return r.get("remove-linecheck-condition-YDT-2455"),h.hfc=_?_objectSpread(_objectSpread({},h.hfc),{},{qualifiedBy:a?"byAddress":"byOTOId",accessType:_.access.accessType,addressType:_.addressType,addressId:_.addressId,tspId:_.access.tspId,status:_.status,billingMethod:_.billingMethod,network:_.network,address:c(e.address||_.address),available:r.get("remove-linecheck-condition-YDT-2455")?"T1"===_.addressType:"UPC"===_.network&&"T1"===_.addressType}):{available:!1},h},this.actionFromResults=function(e,t){var n,o,i,r;if("hfc"===t)return null!==e&&void 0!==e&&null!==(n=e.hfc)&&void 0!==n&&n.available?"superfast":"bad";if("fiber"===t)return null!==e&&void 0!==e&&null!==(o=e.fiber)&&void 0!==o&&o.available?"superfast":"bad";var a=null===e||void 0===e?void 0:null===(i=e[t])||void 0===i?void 0:null===(r=i.indoor)||void 0===r?void 0:r.maxBandwidthDown;return"number"!=typeof a?"":"5G"===t?a<2e4?"bad":a<5e4?"slow":"superfast":"4G"===t?a<5e3?"slow":a<4e4?"fast":"superfast":void 0},this.resolveProduct=lineCheckResolveProduct,this.setGlobal=function(e){o.globalLineCheckResults=_objectSpread({messages:{"4G":s.actionFromResults(e,"4G"),"5G":s.actionFromResults(e,"5G"),fiber:s.actionFromResults(e,"fiber"),hfc:s.actionFromResults(e,"hfc")}},e),o.$emit("globalLineCheckUpdated")},this.linecheckPopup=new t("linecheckPopup","line-check-popup.html",{title:"linecheckPopupTitle"},{hide:function(){s.linecheckPopup.data.address={},n.event("linecheck-mobile","linecheck","linecheck-popup-closing")},show:function(){n.event("linecheck-mobile","linecheck","linecheck-popup-opening")}}),this.linecheckPopup.data.address={}}]),app.service("ManualCreditCheck",["Network","Checkout","CustomerAccount","State","$routeParams","Language","Products","CommonData",function(e,t,n,o,i,r,a,s){this.check=function(c,d,u,l){var p,g,f,h,m,v,b,w,C,y=c.map(function(e){return{binaryData:e.b64.split("base64,")[1],documentType:"FILE",documentName:e.name+"."+e.fileType}});if(u&&l){var D;u={billingIdDetails:{idNumber:null===(D=u.billingIdDetails.idNumber)||void 0===D?void 0:D.split(" ").join("").split("/").join("").split("-").join(""),idTypeId:u.billingIdDetails.idTypeId,nationality:u.billingIdDetails.nationality,expiry:objToDate(u.billingIdDetails.expiry,!0).toServerJSON()},title:u.title,firstName:o.customerLoggedIn?u.firstName:u.firstName.toLowerCase().capitalizeFirstLetterOnEachWord(),lastName:o.customerLoggedIn?u.lastName:u.lastName.toLowerCase().capitalizeFirstLetterOnEachWord(),contactNumber:u.contactNumber?paddTo(u.contactNumber,10):void 0,dob:objToDate(u.dob,!0).toServerJSON(),preferredLang:u.preferredLang||r.data.current,emailAddress:u.emailAddress.toLowerCase()},l={city:l.city,postCode:l.postCode,streetName:l.streetName,streetNumber:l.streetNumber,country:l.country,co:l.co||void 0}}else{var S,I,k,P=o.agentLoggedIn?"pos":"eshop";"self-register"===i.logintype&&(P="rs"),C=t.createOrderRequest(t.orderData,n,!1,P,"validate");var T=null===(S=Object.first(null===(I=t.orderData)||void 0===I?void 0:null===(k=I.config)||void 0===k?void 0:k.products))||void 0===S?void 0:S.device;if(T){var O,_;C.devices=[{deviceOptionId:(null===(O=T.oldDeviceOption)||void 0===O?void 0:O.deviceOptionId)||T.deviceOption.deviceOptionId}],null!==(_=C.devices)&&void 0!==_&&_[0].imei&&(C.devices[0].imei=C.devices[0].imei)}}var A=(null===(p=C)||void 0===p?void 0:p.billingCustomerDetails)||u,L=(null===(g=C)||void 0===g?void 0:g.billingAddress)||l,N=objToArray(a.findProductsByChannels([s.channel])).filter(function(e){return"postpaid"===e.type})[0];N||(N=objToArray(a.data.products).filter(function(e){return"postpaid"===e.type})[0])
;var x=(null===(f=C)||void 0===f?void 0:f.productId)||(null===(h=N)||void 0===h?void 0:null===(m=h.bestConfig)||void 0===m?void 0:m.id),E=null===(v=C)||void 0===v?void 0:v.devices,R=(null===(b=C)||void 0===b?void 0:null===(w=b.subscriptionDetails)||void 0===w?void 0:w.subscriptionType)||"newMsisdn";return e.post("manualCreditCheck",{billingAddress:L,billingCustomerDetails:A,attachedDocument:y,productId:x,devices:E,subscriptionType:R,freeText:d||""})}}]),app.service("MetaData",["$rootScope","$location","$translate","$route","State","$q",function(e,t,n,o,i,r){function a(e){e=e||"/";var t="meta_"+e+"_pagetitle",o="meta_"+e+"_metadescription",i=[n.instant(t),n.instant(o)];return r.resolve(i[0]!==t&&[i[0],o!==i[1]?i[1]:i[0]])}var s=this,c=this,d=!1,u=["/my-friend/","help-your-friend","help-a-friend","help-friend"],l=document.querySelector('meta[name="Description"]'),p=document.querySelector('meta[name="robots"]');setInterval(function(){var e=t.path().substring(3).split("/");if((e.indexOf("change-subscription")>-1||e.indexOf("checkout")>-1||e.indexOf("process")>-1||e.indexOf("internet-deal")>-1||e.indexOf("sunrise-internet")>-1)&&!i.agentLoggedIn){if(d=!d,document.hasFocus())return s.set();if(d&&!window.noblinktest)return a("/blinktitle").then(c.setPageMeta);s.set()}},1e3),this.set=function(){var i=t.path().substring(3).split("/"),r=e.hidePageFromSearch||!1;if(u.forEach(function(e){i.indexOf(e)>-1&&(r=!0)}),p.setAttribute("content",r?"noindex":"index,follow"),o.current&&"pages/404.html"===o.current.loadedTemplateUrl){var s=n.instant("meta_/404_pagetitle");c.setPageMeta([s,s])}else a(i.slice(0,3).join("/")).then(function(e){e?c.setPageMeta(e):a(i.slice(0,2).join("/")).then(function(e){e?c.setPageMeta(e):a(i.slice(0,1).join("/")).then(function(e){e?c.setPageMeta(e):c.setPageMeta(["Lebara","Lebara"])})})})},this.setPageMeta=function(e){document.title=e[0],l.setAttribute("content",e[1])},e.$on("langChangeEnd",this.set),e.$on("$routeChangeSuccess",this.set)}]),app.service("MsisdnSearch",["Network","$rootScope","State",function(e,t,n){var o=this;this.searching={},this.msisdns=[],this.msisdnToNotClear,this.get=function(i,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;o.searching[r]=!0,n.gotMsisdns=!1;var s=this.msisdns.slice()||[];return s.includes(this.msisdnToNotClear)&&s.splice(s.indexOf(this.msisdnToNotClear),1),e.post("msisdnSearch",{pattern:i,productId:r,applyFilter:a<3,clearMsisdns:s}).then(function(s){return(!s||s.msisdns&&!s.msisdns.length)&&a<3?o.get(i,r,a+1):(delete o.searching[r],o.msisdns=s?s.msisdns:[],s&&!o.msisdns.length&&throwSafe("No msisdns in msisdnSearch response. RFE_ID: "+e.lastResponseRequestObj.rfeId,"439"),t.$emit("gotMsisdns"),n.gotMsisdns=!0,s)})}}]),app.service("NetworkIgnoreErrors",function(){this.notreallyErrorCodes=["652","401","643","630","614","987","978","994"],this.notReallyErrors=["Blocked by Adguard","Agent detials not found","Agent details not found","No shop Agent was found","Anumber is not available.","No user found","Sim card is not free","SIM card is not free","Simcard not found by given ICC and Brand","Sim mismatch for Prepaid or Postpaid type","Insufficient balance. Change Simcard not allowed.","Simcard change already in progress","The new SIM card’s type does not match","The NP phone number is already","No device found for ProductId and DeviceId","Password does not match.","Force sim activation is not possible. Subscription is not new.","Simcard is not yet completely processed in the logistics.","Force sim activation is not possible. Service is not new.","There are no order lines for this subscription","Activation in progress","Handle Order Process workflow is not in waiting activity!","Voucher could not be used. 7 - Msisdn locked","Voucher could not be used. 101 - Press Adapter Error","Voucher not found","Unsuccessful operation: Voucher not found","Secret code is not valid","Unable to find: 'MSISDN' with value: ","Bundled SimCard is not free","Invalid ICCID for the Msisdn","No bundled simcard found for given phone number","Token is invalid.","Credit Check Fail","Credit card expired","Max number of top-ups for subscription per day will be exceeded","Max number of top-ups for subscription per month will be exceeded","Max top-up amount for subscription per month will be exceeded","Customer is not eligible for adding new device!","General error.","Max amount of subscriptions reached","Rateplan change is not allowed. Mimimum duration","User must wait till verified","Not enough balances","Could not find subscription for MSISDN","MSISDN is not active","No prepaid billingGroupId is found for this MSISDN","Invalid Token or Username in the logout Request!!","User has no email to validate","Customer already has an account","Invalid Access Code!!!","Missing mandatory element with the key: REQUESTING_AGENT_ID","Phone number has a postpaid subscription.","An active rate plan change is already scheduled","Remote exception, could not retrieve network status.","MSISDN is already active in other porting flow"]}),app.service("Network",["$http","$q","Notifications","Analytics","$rootScope","NetworkIgnoreErrors","$location","State","Storage","Authentication","ErrorReporting","FeatureFlags","TelegramAlert",function(e,t,n,o,i,r,a,s,c,d,u,l,p){var g=this,f=this;this.errorsReported=0,this.retried={},this.openRequests=[],this.maxRfeErrorsPerSession=4,window.lastRfeId="",u.network=this,this.post=function(n,o,r,s,c,u,f,h,m,v,b,w,C){var y;if(i.criticalErrorMode)return t.resolve(!1);var D;o||(o={}),u||(u="application/json"),c?D=!0:c=window.yolBackendEndpoint;var S=c===window.yolBackendEndpoint,I=S?g.setupPostHeaders(n,u):{};"submit_upc_order"===n&&(I=g.setupPostHeaders(n,u));var k=void 0===h||h,P=window.yolSessionId+"_"+randomString(10).toLowerCase(),T=(y={callName:n,params:o,rfeId:P,dontLog:D,urgency:r,returnError:s,dontSendRfeId:f,withCredentials:h,muteNofications:m,endpoint:c,contentType:u,extraErrorInfo:v,swallowErrorReport:b},_defineProperty(y,"rfeId",P),_defineProperty(y,"ignore401Errors",w),_defineProperty(y,"dontRetryCallIfAuthFails",C),y);T.selfcareToken=d.selfcareToken,T.posToken=d.posToken,D||g.openRequests.push(T);var O=c+n+(f?"":"?rfe_id="+P);if(window.lastRfeId=P,"updateUserInfo"===n){var _={rfeId:P,params:o,url:a.url()};p.submitInfo("YDT-2560: rfeId: \n "+JSON.stringify(_)),delete o.lastName,delete o.firstName}return"logout"===n&&l.get("new-identity-login")&&(O=window.microServiceEndpoint+"identity/selfcare/logout",o=null,I=null,h=null),e({method:"POST",url:O,data:o,headers:I,withCredentials:k}).then(function(e){return g.handlePostResponse(e,T)},function(e){return g.handlePostErrorResponse(e,T)})},this.handlePostResponse=function(e,t){var o;if(g.lastResponseRequestObj=angular.copy(t),!i.versionMissmatch)return t.dontLog||g.openRequests.splice(g.openRequests.indexOf(t),1),g.openRequests.length||i.$emit("noOpenRfeRequests"),e&&null!==e&&void 0!==e&&e.data&&t.callName.includes("address-lookup")&&l.get("AddressLookup-new-endpoint")?e.data:e&&null!==e&&void 0!==e&&e.data&&t.callName.includes("performTechnicalLineCheck")&&l.get("performLinecheck-new-endpoint")?e.data:e&&1==(null===(o=e.data)||void 0===o?void 0:o.status)?(g.setAuthentication(e),g.setAccountRfeId(t),"validateOrder"===t.callName&&(e.data.data.rfeId=t.rfeId),e.data.data):g.handleTokenRenewal(e,t).then(function(o){var i;if(o)return o;if(g.doErrorReporting(e,t),"generateAccessCode"===t.callName&&401==e.data.errorCode)return f.account.removeLoginData(),f.agent.removeLoginData(),a.path(s.agentLoggedIn?"/pos":"/"),!1;if(!f.retried[t.callName]&&-1!==["getCheckoutData"].indexOf(t.callName))return f.retried[t.callName]=!0,f.post(t.callName,t.params,t.urgency,t.returnError,t.endpoint,t.contentType,t.dontSendRfeId,t.withCredentials,t.muteNofications,t.extraErrorInfo,t.swallowErrorReport,t.ignore401Errors);if(t.returnError){var r,c;return{errorCode:(null===e||void 0===e?void 0:null===(r=e.data)||void 0===r?void 0:r.errorCode)+"",errorDescription:null===e||void 0===e?void 0:null===(c=e.data)||void 0===c?void 0:c.errorDescription}}return t.muteNofications||n.add("error_"+(null===e||void 0===e?void 0:null===(i=e.data)||void 0===i?void 0:i.errorCode),"bad",t.urgency),!1})},this.handleTokenRenewal=function(e,n){if((401===e.status||401==e.data.errorCode||401==e.errorCode)&&!n.ignore401Errors){if(!n.dontRetryCallIfAuthFails){console.log("401 error, need to renew token",n.callName);var o=n.posToken?"pos":"selfcare";return d.renewToken(o).then(function(e){return!!("pos"==o?d.posToken:d.selfcareToken)&&f.post(n.callName,n.params,n.urgency,n.returnError,n.endpoint,n.contentType,n.dontSendRfeId,n.withCredentials,n.muteNofications,n.extraErrorInfo,n.swallowErrorReport,n.ignore401Errors,!0)}).catch(function(e){if(401===e.error)return console.log("identity renew failed will logout"),!1})}-1!==e.status&&-1===n.callName.indexOf("logout")&&(console.warn("Removed auth token. 401",n),g.removeAuthentication()),f.account.removeLoginData(),f.agent.removeLoginData()}return t.resolve(!1)},this.newIdentityCall=function(t,n){console.log("identity call ",t);var o=window.microServiceEndpoint+"identity/".concat(t,"/").concat(n);return e.post(o).then(function(e){return e}).catch(function(e){e.status;return e})},this.handlePostErrorResponse=function(e,t){return t.callName.includes("address-lookup")&&404===e.status?{errorCode:"BAD_RESPONSE",errorMessage:JSON.stringify(t),errorDetails:e}:g.handleTokenRenewal(e,t).then(function(i){return i?(t.dontLog||f.openRequests.splice(f.openRequests.indexOf(t),1),i):(window.logNetworkErrorDetails&&401!=e.status&&-1!=e.status&&throwSafe("status: ".concat(e.status,", error: ").concat(e,", requestObj: ").concat(JSON.stringify(t)),"ID-134"),g.lastResponseRequestObj=angular.copy(t),t.dontLog||f.openRequests.splice(f.openRequests.indexOf(t),1),o.event("server_error",t.callName,e.status+""),t.returnError||t.muteNofications||n.add("error","bad",t.urgency),!!t.returnError&&{errorCode:"BAD_RESPONSE",errorMessage:JSON.stringify(t),errorDetails:e})})},this.get=function(o,i){var r=t.defer();return e.get(o,{withCredentials:!1}).then(function(e){r.resolve(e.data)},function(e){window.logNetworkErrorDetails&&throwSafe("error fetching '".concat(o,"', error: ").concat(e.message?e.message.substring(0,100)+"...":e),"ID-135"),i||n.add("error","bad"),r.resolve(!1)}),r.promise},this.returnWhenNoOpenRequests=function(){if(!f.openRequests.length)return t.resolve();var e=t.defer(),n=i.$on("noOpenRfeRequests",function(){n(),e.resolve()});return e.promise},this.setupPostHeaders=function(e,t){var n={"Content-Type":t};if(["getCheckoutData","checkPromotionCode","bootloader","addressLookup"].includes(e))return n;if("submit_upc_order"===e)d.posToken&&(n["pos-token"]=d.posToken);else{if(!(s.agentLoggedIn||s.customerLoggedIn||d.selfcareToken||d.posToken||-1!==["orderComplete"].indexOf(e)||-1!==["logout"].indexOf(e)))return n;var o=g.authorization||c.get("AuthorizationToken"),i=c.get("posCustDetails").username||c.get("x-pos-cust-username");d.posToken&&i?n["x-pos-cust-username"]=i:(c.remove("x-pos-cust-username"),c.remove("posCustDetails")),o&&(f.authorization=o,window.rfeAuthorization=o,n.RFEAuthorization=f.authorization),d.selfcareToken&&(n.SCAuthorization=d.selfcareToken),d.posToken&&(n.POSAuthorization=d.posToken),"changePaygSettings"===e&&delete n.POSAuthorization}return n},this.setAuthentication=function(e){e.headers("RFEAuthorization")&&g.authorization!==e.headers("RFEAuthorization")&&(console.log("changed RFEAuthorization",g.authorization,e.headers("RFEAuthorization")),g.authorization=e.headers("RFEAuthorization"),window.rfeAuthorization=g.authorization)},this.removeAuthentication=function(){i.$emit("accountNotLoggedin",!0),i.$emit("customerLogout",!0),c.remove("AuthorizationToken"),g.authorization=void 0,console.log("removed AuthorizationToken")},this.setAccountRfeId=function(e){["getAccountDetails"].indexOf(e.callName)&&f.account&&(f.account.rfeId=e.rfeId)},this.doErrorReporting=function(e,t){var n,a,s,c;if(!t.swallowErrorReport){if("addressLookup"===t.callName){var d,l,p;"991"!==(null===(d=e.data)||void 0===d?void 0:d.errorCode)&&"992"!==(null===(l=e.data)||void 0===l?void 0:l.errorCode)&&"401"!==(null===(p=e.data)||void 0===p?void 0:p.errorCode)&&(i.$emit("enableAddressCheckFallbackMode"),console.warn("Enabled address fallback mode, error",e.data),t.muteNofications=!0)}if(("performTechnicalLineCheck"!==t.callName||-1===(null===(n=e.data)||void 0===n?void 0:null===(a=n.errorDescription)||void 0===a?void 0:a.indexOf("Only nearby address could be found")))&&"getRatePlanStatus"!==t.callName){var h=(null===(s=e.data)||void 0===s?void 0:s.errorDescription)&&r.notReallyErrors.find(function(t){var n;return(null===(n=e.data)||void 0===n?void 0:n.errorDescription.indexOf(t))>-1}),m=r.notreallyErrorCodes.indexOf(null===(c=e.data)||void 0===c?void 0:c.errorCode)>-1;if(h||m||t.dontLog){var v;o.event("not_really_error",t.callName,(null===(v=e.data)||void 0===v?void 0:v.errorCode)+"")}else if(g.errorsReported<g.maxRfeErrorsPerSession){var b,w,C;g.errorsReported+=1,o.event("error",t.callName,(null===(b=e.data)||void 0===b?void 0:b.errorCode)+"");var y=window.location.href;y+=" | location history: "+window.yolAppHistory.slice(Math.max(window.yolAppHistory.length-10,1)).join(" | ");var D=(null===(w=e.data)||void 0===w?void 0:w.errorDescription)||"[No error description sent from RFE]";t.extraErrorInfo&&"string"==typeof t.extraErrorInfo&&(D+="   - Extra info:"+t.extraErrorInfo);try{D.includes("Invalid Parameters")&&(D+=" | Params: "+JSON.stringify(t.params))}catch(e){console.warn(e)}f.checkoutRecoveryToken&&(D+=" | checkoutRecoveryToken: "+f.checkoutRecoveryToken),u.reportRfeError(t.callName,null===(C=e.data)||void 0===C?void 0:C.errorCode,D,t.rfeId,f.agent)}}}},i.$on("clearRFEToken",function(){return g.removeAuthentication()})}]),app.service("NewsLetter",["Notifications","Analytics","Network","Language","Storage","Popups",function(e,t,n,o,i,r){var a=this;a.subscribed=!1,a.loading=!1,this.subscribe=function(s,c){return this.loading=!0,n.post("subscribe_to_email",{email:s,language:o.data.current,source:c,brand:window.brand},2,!1,window.oldEshopBasePath,"text/plain",!0,!1).then(function(n){if(a.loading=!1,n){var o=r.activePopups();o[0]&&o[0].hide(),t.event("newsletter","subscription-"+c,"success"),a.success=!0,e.add("newsletterSuccess","good"),i.set("hasSeenNewsletter",!0)}})}}]),app.service("Notifications",["Notification",function(e){this.data={notifications:[]};var t=this,n=1;this.add=function(o,i,r,a){t.data.notifications.push(new e(o,i,r,a,t,n)),n+=1},this.remove=function(e){for(var n in t.data.notifications)if(e==t.data.notifications[n].id)return void(t.data.notifications=[])},document.addEventListener("mouseup",function(e){if(0==e.button)for(var n in t.data.notifications)t.data.notifications[n].autoRemovable&&t.data.notifications[n].remove()}),document.addEventListener("touchend",function(e){for(var n in t.data.notifications)t.data.notifications[n].autoRemovable&&t.data.notifications[n].remove()})}]),app.service("Offers",["Cms","$translate","SavingsOptions","CustomerAccount","State","Countries","Language",function(e,t,n,o,i,r,a){var s=this;this.getOfferByType=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.getByTag(t).then(function(e){return s.processOffer(e,n)})},this.getOfferById=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return window.replaceOffers&&window.replaceOffers[o[0]]?(console.log("offer with tag:",o[0],"replaced with offer with tag:",window.replaceOffers[o[0]]),s.getOfferByType(window.replaceOffers[o[0]],n)):e.getById(t).then(function(e){return s.processOffer(e,n)})},this.processOffer=function(t,n){var o,i,r,a=this;if(!t)return console.error("Offer not found",n);var s=this.doReplacements(e.convertText(t.data.offer_content,!0),n),c=t.data.body.find(function(e){return"count_down"===e.slice_type});c&&(c.items=c.items.filter(function(e){return e.count_down_date}).map(function(e){var t=e.count_down_date;return-1!==t.indexOf("+")&&(t=t.split("+")[0]+".000Z"),new Date(t)}));var d=t.data.body.filter(function(e){return"offer_cta"===e.slice_type});d.forEach(function(e){e.color=e.primary.button_color,e.text=a.doReplacements(e.primary.button_text,n),e.link=a.doReplacements(e.primary.button_link,n),e.sticky="true"===e.primary.sticky_cta,-1===e.link.indexOf("http")&&-1===e.link.indexOf("www")&&"/"!==e.link[0]&&"#"!==e.link[0]&&(e.link="/"+e.link)});var u,l=t.data.body.find(function(e){return"squircle"===e.slice_type});l&&(u={fixed:"Fixed"===l.primary.squircle_position,text:this.doReplacements(l.primary.text,n),secondaryText:l.primary.secondary_text?this.doReplacements(l.primary.secondary_text,n):this.doReplacements(l.primary.text,n)},u.text||(u=void 0));var p=t.data.body.find(function(e){return"share_cta"===e.slice_type}),g=t.data.body.find(function(e){return"open_popup_cta"===e.slice_type});if(p&&(p.button_text=this.doReplacements(p.primary.button_text,n),p.primary.share_title&&(p.share_title=this.doReplacements(p.primary.share_title,n)),p.primary.share_text&&(p.share_text=this.doReplacements(p.primary.share_text,n)),p.primary.share_link&&(p.share_link=this.doReplacements(p.primary.share_link,n)),p={buttonText:p.button_text,title:p.share_title,text:p.share_text,url:p.share_link}),g){var f;g={popupId:null===(f=g.primary.popup)||void 0===f?void 0:f.id,buttonText:this.doReplacements(g.primary.button_text,n)}}return{key:t.id,image:null===(o=t.data.offer_image)||void 0===o?void 0:o.url,mediumImage:null===(i=t.data.offer_image)||void 0===i?void 0:i.medium.url,mobileImage:null===(r=t.data.offer_image)||void 0===r?void 0:r.mobile.url,description:s,countDown:c,squircle:u,shareCta:p,popupCta:g,squircleFixed:void 0,actions:d}},this.doReplacements=function(e,n){if(!e)return"";if(!n)return e;if(n.product&&"string"!=typeof n.product&&(e=e.split("{{productId}}").join(n.product.bestConfig.id),e=e.split("{{productUrl}}").join(n.product.url),e=e.split("{{productName}}").join(t.instant("product_".concat(n.product.url,"_title"))),e=e.split("{{productUsp}}").join(t.instant("product_".concat(n.product.url,"_usp")))),n.option&&(e=e.split("{{optionName}}").join(t.instant("option_".concat(n.option.url,"_title"))),e=e.split("{{optionId}}").join(n.option.id),e=e.split("{{optionUrl}}").join(n.option.url)),n.code&&(e=e.split("{{code}}").join(n.code)),n.customReplaces)for(var s in n.customReplaces)e=e.split("{{"+s+"}}").join(n.customReplaces[s]);if(i.customerLoggedIn&&n.subscription){var c,d,u=null===(c=n.subscription.rateplan.firstProduct())||void 0===c?void 0:c.recurringCost,l=u-n.subscription.getCurrentDiscount();e=e.split("{{firstName}}").join(o.accountOwner.firstName),e=e.split("{{lastName}}").join(o.accountOwner.lastName),e=e.split("{{subscriptionId}}").join(n.subscription.id);var p=n.subscription.lockinEndDate;if(e=p?e.split("{{contractEndDate}}").join(p.getDate()+"."+(p.getMonth()+1)+"."+p.getFullYear()):e.split("{{contractEndDate}}").join(""),e=e.split("{{currentRateplan}}").join(n.subscription.rateplan.name),e=e.split("{{currentPromotion}}").join(n.subscription.getCurrentDiscount().toFixed(2)),e=e.split("{{currentPromotionPercent}}").join(Math.floor(100/u*l)),e=e.split("{{msisdn}}").join(n.subscription.msisdn),e=e.split("{{promotionCode}}").join(n.promotionCode),e=e.split("{{currentDevice}}").join(n.subscription.currentDevice),e=e.split("{{deviceId}}").join(n.deviceId),n.promotion&&n.product){e=e.split("{{discountAmount}}").join(n.promotion.recurringDiscount.toFixed(2));var g=Math.floor(100/n.product.recurringCost*n.promotion.recurringDiscount);e=e.split("{{discountPercent}}").join(g.toString());var f=n.product.recurringCost-n.promotion.recurringDiscount;e=e.split("{{priceDifference}}").join(Math.ceil(f-l).toFixed(2)),e=e.split("{{promotionName}}").join(n.promotionTitle)}n.subscription.mostCalledCountry&&(e=e.split("{{mostCalledCountry}}").join(r.countriesObj[n.subscription.mostCalledCountry][a.data.current])),n.subscription.currentCountry&&(e=e.split("{{currentCountry}}").join((null===(d=r.countriesObj[n.subscription.currentCountry])||void 0===d?void 0:d[a.data.current])||""))}return e}}]),app.service("Offline",["$rootScope","$window","$timeout",function(e,t,n){e.online=!0,e.offlineClicked=!1;var o=this;e.offlineClick=function(t){e.offlineClicked=t},this.init=function(){t.addEventListener("online",o.gotOnline),t.addEventListener("offline",o.gotOffline)},this.gotOffline=function(){e.online&&(e.online=!1,n())},this.gotOnline=function(){e.online||(e.offlineClicked=!1,e.online=!0,n())},this.init()}]),app.service("OpenID",["Authentication","TelegramAlert","$http",function(e,t,n){var o=this;this.endpoint=window.microServiceEndpoint+"oidc/",this.complete=function(t){return o.doPost("auth/complete",{},{headers:{"Oidc-Jwt":t,"Selfcare-Jwt":e.selfcareToken},returnError:!0})},this.doPost=function(e,i,r){var a=o.endpoint+e;return r||(r={}),n.post(a,i,{headers:r.headers}).then(function(e){if(r.returnError)return e.data;if(!e.data.status)throw e.data;return e.data.data}).catch(function(n){if("ERR_UNAUTHOZIED_ACCESS"===n.data.errorCode&&n.config.url.includes("auth/complete")&&r.returnError)return n.data;switch(null===n||void 0===n?void 0:n.errorCode){case"ERR_NO_ACTIVE_TV_SUBSCRIPTION_FOUND":t.submitInfo("OPENID[".concat(e,"] - ERR_NO_ACTIVE_TV_SUBSCRIPTION_FOUND"),{type:"OPENID",source:"srvs_openid.js"});break;default:t.submitError("OPENID[".concat(e,"] - error code: ").concat(null===n||void 0===n?void 0:n.errorCode),{type:"OPENID",source:"srvs_openid.js"})}throw n})}}]),app.service("OpeningTimes",["$q","CommonData","$rootScope","Cms",function(e,t,n,o){this.init=function(){var e=this;return this.initted=!0,o.getByType("opening_times").then(function(o){if(t.openingTimes={},o)return o.forEach(function(e){var n=[];n.push(e.data.sunday),n.push(e.data.monday),n.push(e.data.tuesday),n.push(e.data.wednesday),n.push(e.data.thursday),n.push(e.data.friday),n.push(e.data.saturday),n=n.map(function(e){return e.filter(function(e){return null!==e.hour}).map(function(e){return[e.hour,e.minute||0]})});var o=[];e.data.body.forEach(function(e){var t=e.items.filter(function(e){return null!==e.hour}).map(function(e){return[e.hour,e.minute||0]});o.push({date:e.primary.date,times:t})}),t.openingTimes[e.data.type.toLowerCase()]={normalDays:n,specialDays:o}}),e.openingTimesLoaded=!0,n.$emit("openingTimesLoaded"),t.openingTimes})},this.returnWhenDataLoaded=function(){if(this.openingTimesLoaded)return e.resolve();var t=e.defer(),o=n.$on("openingTimesLoaded",function(){o(),t.resolve()});return t.promise},this.check=function(n){var o=this;return"wincall"===n&&(n="salescall"),window.closeTelesales&&-1!==["salescall","saleschat"].indexOf(n)?e.resolve():(this.initted||this.init(),this.returnWhenDataLoaded().then(function(){if(!t.openingTimes[n]||!t.openingTimes[n].normalDays)return e.resolve();var i=o.checkIfOpen(swissDate(),t.openingTimes[n]).open,r=o.findNextTime(swissDate(),t.openingTimes[n]);return r=r.getDate()==swissDate().getDate()?paddTo(r.getHours(),2)+":"+paddTo(r.getMinutes(),2):paddTo(r.getDate(),2)+"."+paddTo(r.getMonth()+1,2)+"."+r.getFullYear(),{model:i,nextTime:r}}))},this.findNextTime=function(e,t){for(var n=0;n<365;n++){var o=e.addDays(n),i=this.checkIfOpen(o,t).next;if(i||(o=new Date(o.getFullYear(),o.getMonth(),o.getDate()),i=this.checkIfOpen(o,t).next),i){var r=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),i[0],i[1])),a=1e3*swissDateOffset(r)*60*60;return new Date(r.getTime()-a)}}},this.checkIfOpen=function(e,t){var n=new Date(e.getTime()),o=t.normalDays[n.getDay()],i=!1,r=null;for(var a in t.specialDays){var e=new Date(t.specialDays[a].date);!1!==compareDatesIgnoreHours(e,n)&&(o=t.specialDays[a].times)}for(var s=!1,c=n.getHours(),d=n.getMinutes(),u=[c,d],a=1,l=0;a<o.length+1;l=a++){var p=o[l];this.isLater(p,u)&&(i=s=!s),r||this.isLater(p,u)||(r=p)}return{open:i,next:r}},this.isLater=function(e,t){return t[0]>e[0]||t[0]==e[0]&&t[1]>e[1]}}]),app.service("Poa",["Network",function(e){this.generatePOA=function(t){return e.post("generatePOA",t,1,!0)},this.signPOA=function(t){return e.post("signPOA",t)}}]),app.service("Popups",function(){var e=this;this.data={},this.register=function(e){this.data[e.name]=e},this.unregister=function(e){delete this.data[e.name]},this.show=function(t){e.data[t]&&e.data[t].show()},this.hide=function(t){e.data[t].data.hideClose||e.data[t].hide()},this.activePopups=function(){var e=[];for(var t in this.data)this.data[t].active&&!this.data[t].closing&&e.push(this.data[t]);return e}}),app.service("PrismicPopups",["State","Cms","$rootScope","$location","Popup","$timeout","Storage","Popups","Analytics",function(e,t,n,o,i,r,a,s,c){var d=this;this.popups=[],this.waiters=[],this.init=function(){o.search().nopopups||t.getByType("popup").then(function(t){if(t&&t.length){if(d.popups=t.map(function(e){var t=d.popups.find(function(t){return t.data.display_name===e.data.display_name}),n=d.processRawPopupData(e.data,e.id,e.tags,t);return n.functions={onSuccess:function(){return n.hide()},show:function(){return c.event("popup","show",n.data.display_name)}},n}).filter(function(e){return e}),window.replacePrismicPopups?d.aBtestingSetup():setTimeout(function(){return window.replacePrismicPopups&&d.aBtestingSetup()},1e3),o.search().pop){var i=o.search().popdelay||0;i*=1e3;var a=d.popups.find(function(e){return e.data.display_name===o.search().pop});a&&r(function(){s.activePopups().length||a.show()},i)}n.$emit("prismicPopupsLoaded"),e.prismicPopupsLoaded=!0,d.eval()}})},this.aBtestingSetup=function(){d.popups.forEach(function(e){if(window.replacePrismicPopups[e.data.display_name]){var t=d.popups.find(function(t){return t.data.display_name===window.replacePrismicPopups[e.data.display_name]});if(!t)return;var n=["backgroundColour","body","headerColour","title"];for(var o in t.data)-1!==n.indexOf(o)&&(e.data[o]=t.data[o]);e.title=t.title,e.body=t.body,e.backgroundColour=t.backgroundColour}})},this.processRawPopupData=function(e,n,o,r){return e.title=e.popup_title,e.id=n,e.tags=o,e.popupGroup=e.popup_group,e.headerColour=e.header_colour,e.backgroundColour=e.background_colour,e.body.filter(function(e){return"count_down"===e.slice_type}).forEach(function(e){e.items=e.items.filter(function(e){return e.count_down_date}).map(function(e){var t=e.count_down_date;return-1!==t.indexOf("+")&&(t=t.split("+")[0]+".000Z"),new Date(t)})}),e.body.filter(function(e){return"content"===e.slice_type}).forEach(function(e){return e.primary.content=t.convertText(e.primary.content)}),e.body.filter(function(e){return"icon___content"===e.slice_type}).forEach(function(e){return e.primary.content=t.convertText(e.primary.content)}),e.body.filter(function(e){return"offer_cta"===e.slice_type}).forEach(function(e){e.primary.classes=[];var t=e.primary.style.toLowerCase();"Red"===e.primary.color&&e.primary.classes.push("red"),"Orange"===e.primary.color&&e.primary.classes.push("orange"),-1!==t.indexOf("full width")&&e.primary.classes.push("full-width"),-1!==t.indexOf("big")&&e.primary.classes.push("big"),-1!==t.indexOf("centered")&&(e.primary.centered=!0),-1!==t.indexOf("right")&&(e.primary.right=!0),e.primary.classes=e.primary.classes.join(" ")}),e.body.filter(function(e){return"image"===e.slice_type}).forEach(function(t){"Left"===t.primary.image_location?e.imageLocation="left":"Right"===t.primary.image_location&&(e.imageLocation="right")}),e.logic.forEach(function(e){e.showOnExit="Show only on exit intent"===e.exit_intent,e.partialMatch="Partial match (BE CAREFUL)"===e.math_type,e.path=e.page_url,e.deviceType=e.device_type,delete e.page_url,delete e.exit_intent,delete e.math_type,delete e.device_type}),delete e.popup_title,r?(r.data=e,r.name="prismicPopup_"+n,r):new i("prismicPopup_"+n,"prismic-popup.html",e,{})},this.eval=function(){d.waiters.forEach(function(e){return e.timer&&clearTimeout(e.timer)}),d.waiters=[];var t=o.path().substring(3)||"/";"/account/deals"!==t&&(o.search().nopopups||d.popups.forEach(function(o){"Deal template"!==o.data.popup_type&&(a.get("dontShowPopup_"+o.data.id,o.data.min_time_between_shows||-1)||o.data.popupGroup&&a.get("dontShowPopupGroup_"+o.data.popupGroup,o.data.min_time_between_shows||-1)||o.data.logic.forEach(function(i){if(i.partialMatch||t===i.path){if(i.path.split("*").length>1){var c,u=i.path.split("*"),l=t,p=_createForOfIteratorHelper(u);try{for(p.s();!(c=p.n()).done;){var g=c.value;if(-1===l.indexOf(g))return;l=l.split(g)[1]}}catch(e){p.e(e)}finally{p.f()}}else if(i.partialMatch&&-1===t.indexOf(i.path))return;if(("Mobile"!==i.deviceType||n.isMobile)&&("Non mobile"!==i.deviceType||!n.isMobile)){var f={type:i.showOnExit?"exit":"time",delay:i.delay,popup:o};i.showOnExit||(f.timer=setTimeout(function(){s.activePopups().length||e.agentLoggedIn||(o.show(),a.set("dontShowPopup_"+o.data.id,{}),o.data.popupGroup&&a.set("dontShowPopupGroup_"+o.data.popupGroup,{}),r())},250+1e3*i.delay)),d.waiters.push(f)}}}))}))},e.returnWhenBootloaderDone().then(function(){return d.init()}),n.$on("langChangeEnd",function(){return e.languageLoadedInitial&&d.init()}),n.$on("$routeChangeSuccess",function(){return d.eval()}),n.$on("exitIntent",function(t,n){-1!==["mouseLeave","mobileScrollUp","onPageHide","navigateOutOfCheckout"].indexOf(n)&&d.waiters.filter(function(e){return"exit"===e.type}).forEach(function(t){e.agentLoggedIn||s.activePopups().length||(t.popup.show(),a.set("dontShowPopup_"+t.popup.data.id,{}),t.popup.data.popupGroup&&a.set("dontShowPopupGroup_"+t.popup.data.popupGroup,{}),r(),d.waiters.splice(d.waiters.indexOf(t),1))})})}]),app.service("PrismicWinInMenus",["Cms","$rootScope",function(e,t){this.init=function(){e.getByType("win_in_menus").then(function(e){var n;if(e&&e.length){var o=null===(n=e[0])||void 0===n?void 0:n.data;t.show_win_to_logged_in_users=o.show_win_to_logged_in_users,t.show_win_to_everyone=o.show_win_to_everyone,t.show_win_to_pos=o.show_win_to_pos}})},this.init()}]),app.service("Products",["Product","ProductConfig","Device","$q","$rootScope","Network","CommonData","Analytics","SavingsOptions","State","Cms","FeatureFlags",function(e,t,n,o,i,r,a,s,c,d,u,l){var p=this,g=this;s.productsService=this,this.prepaidProductsUrls=[],this.waitingForDeviceResponse=[],this.data={productConfigs:{},devices:{},deviceGroups:[],devicePrices:{},devicePricesLoading:{}},this.productsThatApplyForFreePremiumTV=l.get("rateplanPlus")?["yallo_home_max_fiber_plus_tv","yallo_home_5g_plus_tv","yallo_home_max_cable_plus_tv","yallo_home_cable_s_plus_tv","yallo_home_cable_m_plus_tv"]:["yallo_home_max_fiber","yallo_home_5g","yallo_home_max_cable","yallo_home_cable_s","yallo_home_cable_m"];this.init=function(){r.get("/data/commondataextras.2565654f39.json").then(function(e){a.extras=e,d.commonDataExtrasLoaded=!0,i.$emit("commonDataExtrasLoaded")}),p.getDeviceData()},this.addProducts=function(e){g.data.products={},g.data.productConfigs={},g.data.lightProducts={},g.data.lightProductConfigs={};for(var t in e)g.addProduct(e[t],t);for(var t in g.data.products){var n=g.data.products[t];"prepaid"===n.type&&-1===this.prepaidProductsUrls.indexOf(n.url)&&this.prepaidProductsUrls.push(n.url)}i.$emit("prepaidProductsUrls",this.prepaidProductsUrls)},l.get("device-env-prismic")&&i.$on("channelChanged",function(){return p.getDeviceData()}),this.processHiddenDevices=function(){for(var e in g.data.devices)g.data.devices[e].hiddenChannels=[];var t=now().getTime();for(var n in a.extras)if("hideDevice"===n.substring(0,10)){var o=n.substring(11).split("_")[0],i=n.substring(11).split("_")[1];if(!g.data.devices[i])continue;var r,s=_createForOfIteratorHelper(a.extras[n]);try{for(s.s();!(r=s.n()).done;){var c=r.value;if(35===c.length){var d=yolStringToDate(c.split(" - ")[0]).getTime(),u=yolStringToDate(c.split(" - ")[1]).getTime();if(!(t<d||t>u)){g.data.devices[i].hiddenChannels.push(o);break}}else console.warn("Invalid date",c,n)}}catch(e){s.e(e)}finally{s.f()}}},
this.addProduct=function(n,o){var i=urlify(n.productName),r=-1===n.tags.indexOf("light")?g.data.products:g.data.lightProducts,a=-1===n.tags.indexOf("light")?g.data.productConfigs:g.data.lightProductConfigs,s=r[i],c=new t(n,o);s||(s=new e(n),r[urlify(s.productName)]=s),a[o]=c,s.addConfig(c),c.addProduct(s)},this.getProductPricing=function(){var e=this;return d.returnWhenPromotionsLoaded().then(function(){var t={};for(var n in e.data.products){var o=e.data.products[n],i=o.bestConfig.getBestPromotionAndDevice(!0).promotion;i&&i.recurringDiscount?t[n]={price:o.bestConfig.recurringCost-i.recurringDiscount,insteadOfPrice:o.bestConfig.recurringCost}:t[n]={price:o.bestConfig.recurringCost}}return t})},this.getDeviceData=function(){u.getByType("device",!0).then(function(e){e?(g.deviceInfo=e.map(function(e){return e.data}),g.addDeviceData(),g.createDeviceGroups()):g.deviceInfo=[],d.deviceDataLoaded=!0,i.$emit("deviceDataLoaded")})},this.createDeviceGroups=function(){var e=this;this.data.deviceGroups=[];for(var t in this.data.devices)!function(t){var n=e.data.devices[t],o=e.data.deviceGroups.find(function(e){return urlify(e.name)===urlify(n.title)});if(o)o.variations.push(n),o.channels=[].concat(_toConsumableArray(o.channels),_toConsumableArray(n.channels));else{var i={name:n.title,variations:[n],channels:n.channels.slice(),priority:n.priority,url:urlify(n.title),manufacturer:n.manufacturer};e.data.deviceGroups.push(i)}}(t);this.data.deviceGroups.forEach(function(e){var t=e.variations.slice().sort(function(e,t){return e.priority<t.priority?1:-1})[0];e.images=t.images,e.showOnDevicesPage=!!e.variations.find(function(e){return e.showOnDevicesPage})}),l.get("device-env-prismic")&&"lebara"===brand&&(this.data.deviceGroups=this.devicePrismicEnv())},this.devicePrismicEnv=function(){var e=[a.channel,{prod:"Production (and test)",test:"Test"}],t=e[0],n=e[1],o=[],i=[],r=this.data.deviceGroups.map(function(e){return e});return r.forEach(function(e){-1===e.channels.indexOf(t)&&o.push(e.url),e.variations.map(function(o){var r=o.cmsData.available_in_channels.filter(function(e){return e.channel.slug});r.filter(function(e){return e.channel.slug===t}).length<1&&i.push({variationId:o.id,groupUrl:e.url}),window.production&&r.filter(function(e){return e.environment===n.prod}).length<1&&i.push({variationId:o.id,groupUrl:e.url})})}),function(e){e.map(function(e){var t=r.findIndex(function(t){return t.url===e.groupUrl});if(-1!==t){var n=r[t].variations.findIndex(function(t){return t.id===e.variationId}),o=r[t].variations[n];-1!==n&&o&&r[t].variations.splice(n,1)}})}(i),r.map(function(e){e.variations.length<1&&o.push(e.url)}),o.map(function(e,t){var n=r.findIndex(function(t){return t.url===e}),o=r[n];-1!==n&&o&&r.splice(n,1)}),r},this.getDeviceColors=function(e,t,n){t||(t=a.channel);var o=[];return null===e||void 0===e||e.variations.forEach(function(e){e.color&&(o.find(function(t){return t.url===e.color.url})||e.allowedInChannel(t,n)&&o.push(e.color))}),o},this.getDeviceCapacities=function(e,t,n){t||(t=a.channel);var o=[];return e.variations.forEach(function(e){e.capacity&&(o.includes(e.capacity)||e.allowedInChannel(t,n)&&o.push(e.capacity))}),o},this.addDeviceData=function(){if(g.deviceInfo&&g.loadedDevices){for(var e in g.data.devices){var t=g.data.devices[e],n=g.deviceInfo.find(function(t){return t.rfe_device_id===e});if(n){var o;t.priority=n.device_priority,t.title=n.device_name,t.color={name:n.device_color,colorCode:n.color,url:urlify(n.device_color)},t.capacity=n.device_capacity,t.manufacturer=n.manufacturer,t.showOnDevicesPage=!1!==n.show_on_devices_page,t.cmsData=n,t.techSpecs=n.tech_specs||[],t.images=n.device_images.map(function(e){return e.image.url}),t.deliveryDelayed=!!n.show_device_delay_message,t.is5G=n.is_5g_capable,t.priceBeforeDiscount=n.price_before_discount,null!==(o=t.images)&&void 0!==o&&o.length||t.images.push(location.origin+"/assets/images/devices/default_0")}else console.warn("Device not set up in prismic",t.id,t.deviceName),delete g.data.devices[e]}d.returnWhenCommonDataExtrasLoaded().then(this.processHiddenDevices)}},this.addDevices=function(e){for(var t in e)g.data.devices[t]=new n(e[t],t,g.data.productConfigs);g.loadedDevices=!0,g.addDeviceData(),g.createDeviceGroups()},this.findProductByName=function(e){e=urlify(e);for(var t in g.data.products)if(urlify(g.data.products[t].productName)==e)return g.data.products[t];for(var t in g.data.lightProducts)if(urlify(g.data.lightProducts[t].productName)==e)return g.data.lightProducts[t]},this.findProductById=function(e){return g.data.productConfigs[e]||g.data.lightProductConfigs[e]},this.findDeviceByName=function(e,t){t||(t=a.channel),e=urlify(e);for(var n in g.data.devices){var o=g.data.devices[n];if(urlify(o.deviceName)===e&&-1!==o.channels.indexOf(t))return o}},this.findProductsByChannels=function(e){var t={};"string"==typeof e&&(e=[e]);for(var n in g.data.products)for(var o in e)g.data.products[n].allowedInChannel(e[o])&&(t[n]=g.data.products[n]);return t},this.findBest=function(){g.findBestPromotions(),g.getBestConfigs()},this.findBestPromotions=function(){for(var e in g.data.productConfigs)g.data.productConfigs[e].getBestPromotionAndDevice();for(var e in g.data.lightProductConfigs)g.data.lightProductConfigs[e].getBestPromotionAndDevice()},this.getBestConfigs=function(){for(var e in g.data.products)g.data.products[e].getBestConfig();for(var e in g.data.lightProducts)g.data.lightProducts[e].getBestConfig()},this.getDevicePrice=function(e,t,n,i){var r=this,a=e.id+""+t.id,s=this.data.devicePrices;if(!t)return i?void 0:o.resolve();if(s[a])return i?void 0:o.resolve(s[a]);if(this.data.devicePricesLoading[a]){if(i)return;var c=o.defer();return this.waitingForDeviceResponse.push({deferred:c,deviceIdconfigId:a}),c.promise}if(this.loggedInDeviceOptions&&this.loggedInDeviceOptions[t.id]){var u,l=this.loggedInDeviceOptions[t.id].find(function(t){return t.deviceId.toString()===e.id});if(d.agentLoggedIn&&this.agent.data.rights.FORCE_SHIPMENT&&null!==(u=l)&&void 0!==u&&u.upfrontCost&&(l=!1),l){if(s[a]=l,s[a].loaded=!0,i)return;return o.resolve(l)}return s[a]={loaded:!0},i?void 0:o.resolve(!1)}return this.data.devicePricesLoading[a]=!0,this.getLowestPrice(t.id,e.id,!!n).then(function(e){return delete r.data.devicePricesLoading[a],d.agentLoggedIn&&r.agent.data.rights.FORCE_SHIPMENT&&e.upfrontCost&&(e={}),r.waitingForDeviceResponse.filter(function(e){return e.deviceIdconfigId===a}).forEach(function(t){return t.deferred.resolve(e)}),r.waitingForDeviceResponse=r.waitingForDeviceResponse.filter(function(e){return e.deviceIdconfigId!==a}),!!e&&(s[a]=e,s[a].loaded=!0,i?void 0:e)})},this.getLowestPrice=function(e,t,n){var o={productId:e,deviceId:t,isExtension:n};return p.initiatedGetFirstPrice?p.returnWhenLoadedAtLeastOneLowestDevicePrice().then(function(){return r.post("getDeviceLowestPrice",o,4,!0)}):(p.initiatedGetFirstPrice=!0,r.post("getDeviceLowestPrice",o,4,!0).then(function(e){return p.gotAtLeastOneDeviceLowestPrice=!0,i.$emit("gotAtLeastOneDeviceLowestPrice"),e}))},this.returnWhenLoadedAtLeastOneLowestDevicePrice=function(){if(p.gotAtLeastOneDeviceLowestPrice)return o.resolve();var e=o.defer(),t=i.$on("gotAtLeastOneDeviceLowestPrice",function(){t(),e.resolve()});return e.promise},this.resetDevicePricing=function(){this.gotAtLeastOneDeviceLowestPrice=!1,this.initiatedGetFirstPrice=!1;for(var e in this.data.devicePrices)delete this.data.devicePrices[e]},this.productAppliesForFreePremiumTV=function(e){return p.productsThatApplyForFreePremiumTV.includes(e)},this.posWillShipOrder=function(e,t){var n;return!d.agentLoggedIn||(!!e.config.hasTag("HFC")||(!!e.config.hasTag("fiber")||("tv"===e.product.productType||(!!t.data.rights.FORCE_SHIPMENT||!!["yallo_home_4g","yallo_home_5g","yallo_home_5g_plus_tv","yallo_home_5g_start","yallo_home_5g_start_plus_tv"].includes(e.config.url)&&(null!==(n=e.subscriptionDetails)&&void 0!==n&&n.iccid&&delete e.subscriptionDetails.iccid,!0)))))},this.computeAllPrices=function(e,t,n,o,i,r,s){var u=0,p=0,g=0,f=0,h=0,m=0,v=0,b=0,w=0,C=0,y=Object.first(e),D=59;void 0!==window.eshopPostpaidActivationFee&&(D=window.eshopPostpaidActivationFee),(y.config.hasTag("fiber")||y.config.hasTag("HFC")||y.config.hasTag("home")&&l.get("new-activation-fee"))&&(D=99),"tv"==y.product.productType&&(D=0,s=!0),r&&"ratePlanChangeFee"===r.ratePlanChangeFeeType&&(w+=1*r.rateplanChangeFee,p+=1*r.rateplanChangeFee),r&&"adminFee"===r.ratePlanChangeFeeType&&(C+=1*r.rateplanChangeFee,p+=1*r.rateplanChangeFee);for(var S in e){var I=e[S];if(!I)return{};u+=I.config.recurringCost,t||s||(!d.agentLoggedIn||o.data.rights.FORCE_SHIPMENT||this.posWillShipOrder(I,o)||["pd"].includes(a.realChannel)?"postpaid"==I.config.type||d.agentLoggedIn?(v="postpaid"==I.config.type?D:0,I.waiveActivationFee&&(v=0),p+=v):(v=0,h+=v):(v="postpaid"==I.config.type?["fu","mi","op","pt","pd","sc","mz","mw","mt"].includes(a.channel)?59:"id"===a.channel?49:40:0,m+=v)),I.takeHandsetInsurance&&(u+=c.insuranceOption.cost,b=c.insuranceOption.cost);for(var k in I.options)I.options[k].autoRenews?u+=I.options[k].cost:p+=I.options[k].cost;I.promotion&&(I.promotion.dontCrossOutPrice||(g+=I.promotion.recurringDiscount),f+=v),i&&(i.recurringCost&&(u+=i.recurringCost),i.upfrontCost&&(d.agentLoggedIn||"creditCard"!=n?d.agentLoggedIn?m+=i.upfrontCost:p+=i.upfrontCost:h+=i.upfrontCost))}return{totalrecurringCost:u,totalUpfrontCost:p,totalRecurringDiscount:g,totalUpfrontDiscount:f,totalCreditCardCost:h,totalChargedAtPos:m,simPrice:v,handsetInsurance:b,rateplanChangeFee:w,rateplanChangeAdminFee:C}},this.getAvailableLightProduct=function(){var e,t,n;for(var o in p.data.lightProducts){var i=p.data.lightProducts[o];if(i.allowedInCurrentChannel()){e=i;break}}if(!e)return void console.warn("Couldnt find light product for channel");e.getBestConfig();var r,a=e.getValidPromotions(!1,!0),s=_createForOfIteratorHelper(a);try{for(s.s();!(r=s.n()).done;){var c=r.value,d=e.findConfigsFromOptions(null,null,c,!1,!0);if(d.length){n=c,t=d[0];break}}}catch(e){s.e(e)}finally{s.f()}return t||(t=e.bestConfig),{product:e,config:t,promotion:n}},this.getAvailableProductsForChannel=function(){return objToArray(p.data.products).filter(function(e){return e.allowedInCurrentChannel()})},setTimeout(function(){return p.init()},2e3)}]),app.service("Promotions",["Promotion","$location","$rootScope","Notifications","$q","CommonData","Products","Cms","Language","State","Channels","ErrorReporting",function(e,t,n,o,i,r,a,s,c,d,u,l){var p=this,g=this;c.promotions=this,this.promotions=[],this.init=function(){var e=this;g.getPromotions().then(function(){return d.returnWhenCommonDataExtrasLoaded().then(function(){return e.checkCustomText()})})},this.loadUrlPromotions=function(){var e=this;return this.returnWhenPromosLoaded().then(function(){var n;((null===(n=t.search().p)||void 0===n?void 0:n.split("%2C").join(",").split("%252C").join(",").split(","))||[]).forEach(function(t){return e.enablePromotionForChannel(e.findPromotionByCode(t,!0))})})},this.removePromotion=function(e){var t=this.findPromotionByCode(e);t&&(t.channels=[],t.configs.forEach(function(e){return e.getBestPromotionAndDevice()}))},this.checkCustomText=function(){if(r.extras&&r.extras.prodPromo){var e,t=_createForOfIteratorHelper(r.extras.prodPromo);try{for(t.s();!(e=t.n()).done;){var n=e.value,o=n.split(".")[0],i=n.split(".")[1],s=n.split(".")[2];o=a.data.products[o]||a.data.lightProducts[o],o&&i&&s&&(o.customText[i]||(o.customText[i]={}),o.customText[i][s]=n)}}catch(e){t.e(e)}finally{t.f()}}},this.returnWhenPromosLoaded=function(){return d.doneCheckingDefaultPromos?i.resolve():d.waitForEvent("finishedGettingPromos")},this.fixCustomPromos=function(){objToArray(this.data).forEach(function(e){return e.getCmsData()})},this.getPromotions=function(){var t=this;return window.yolSiteData.roaming?d.returnWhenBootloaderInitialDone().then(function(){d.doneCheckingDefaultPromos=!0,n.$emit("finishedGettingPromos")}):u.getChannels().then(function(o){t.channelIds=null!==o&&void 0!==o?o:[];var a=r.realChannel;if(n.isPos&&"ol"===a)return d.returnWhenBootloaderInitialDone().then(function(){d.doneCheckingDefaultPromos=!0,n.$emit("finishedGettingPromos")});var c=[a];["ib","ob","re","rs","os","ab","cs"].includes(a)&&c.push("ol"),["fm"].includes(a)&&c.push("fu");var u=c.map(function(e){return t.channelIds.find(function(t){return t.code===e}).id});return i.all(u.map(function(e){return s.getByContentRelationShip("promotion","available_in_channels","channel",e)})).then(function(o){return d.returnWhenBootloaderInitialDone().then(function(){var i,r=(i=[]).concat.apply(i,_toConsumableArray(o)).map(function(e){return e}).filter(function(e){return!!e.data.rfe_promotion_code&&e.data.available_in_channels.find(function(e){return!!c.includes(e.channel.slug)&&(!window.production||"Test"!==e.environment)})}),a=[];r.forEach(function(e){return a.find(function(t){return e.id===t.id})||a.push(e)}),a.forEach(function(n){var o=new e(n.data,n.id);o.valid&&t.promotions.push(o)}),d.doneCheckingDefaultPromos=!0,t.loadUrlPromotions().then(function(){n.$emit("finishedGettingPromos")})})})})},this.getChannelData=function(){return p.rawChannelData?i.resolve(p.rawChannelData):s.getByType("channel").then(function(e){return p.rawChannelData=e,e})},this.findPromotionByCode=function(e,t){var n=this.promotions.find(function(t){return t.code===e});return!n&&t&&(o.add("error_promotion-code-not-valid","bad"),l.reportInvalidPromotionCode(e)),n},this.findPromotionById=function(e){return this.promotions.find(function(t){return t.id===e})},this.enablePromotionForChannel=function(e,t){if(e)return t||(t=r.channel),e.availableChannels.includes(t)?e.channels.push(t):console.warn("Promotion is not allowed in channel ".concat(t),e),e},this.getBackupPromotions=function(){var e=this;return this.backupPromotions?i.resolve(this.backupPromotions):s.getByType("default_online_promotions",!0).then(function(t){var n,o;return e.backupPromotions=(null===(n=t[0])||void 0===n?void 0:null===(o=n.data)||void 0===o?void 0:o.default)||[],e.backupPromotions})},g.init(),n.$on("$routeChangeSuccess",function(){return p.loadUrlPromotions()})}]),app.service("Rateplans",["Network","Rateplan","$rootScope","$timeout","State",function(e,t,n,o,i){var r=this;this.data={rateplans:{},defaultCountry:"200903041337530279"},this.init=function(){var o=this;e.get("/data/rateplans.cea6170deb.json").then(function(e){if(e){for(var r in e.rateplans){var a=o.data.rateplans[r];if(a){var s=e.rateplans[r].extraBuckets||[];a.extraBuckets=s.map(function(e){return e.isExtra=!0,"unlimited_calling_sms_roaming"==e.bundleName&&(e.countries=["200903041337530074","200903041337530083","200903041337530090","200903041337530102","200903041337530107","200903041337530123","200903041337530125","200903041337530126","200903041337530127","200903041337530136","200903041337530139","200903041337530141","200903041337530142","200903041337530149","200903041337530151","200903041337530152","200903041337530153","200903041337530167","200903041337530168","200903041337530173","200903041337530176","200903041337530189","200903041337530194","200903041337530195","200903041337530196","200903041337530204","200903041337530213","200903041337530223","200903041337530233","200903041337530244","200903041337530245","200903041337530249","200903041337530250","200903041337530258","200903041337530266","200903041337530267","200903041337530272","200903041337530278","200903041337530291","200903041337530298","200903041337530299"]),e}),a.rates=e.rateplans[r].data,a.countries=e.countries,a.visible=e.rateplans[r].visibleinprod,a.calcCountryGroups()}else o.data.rateplans[r]=new t(e.rateplans[r].name,e.rateplans[r].type,e.rateplans[r].data,e.rateplans[r].extraBuckets,e.rateplans[r].icontype,r,e.rateplans[r].visibleinprod,e.countries);o.data.rateplans[r].id=r}e.rateplans[r].loaded=!0}i.rateplanDataLoaded=!0,n.$emit("rateplanDataLoaded")})},this.addRateplan=function(e,n,o,i){r.data.rateplans[e]=new t(n,o,{},[],i,e,!0)},this.findRateplanByUrl=function(e){for(var t in this.data.rateplans)if(this.data.rateplans[t].url==e)return this.data.rateplans[t]},this.getProductsFromRateplans=function(e){var t={};return forEach(e,function(n){if(!n)return console.warn("No rateplan data",e);forEach(n.products,function(e,n){t[n]=e})}),t},i.returnWhenBootloaderDone().then(function(){return r.init()})}]),app.service("Redirect",["$location",function(e){this.redirect=function(t,n,o){if(t){var i=document.createElement("a");i.href=t;var r=-1!==t.substring(t.lastIndexOf("/")+1).indexOf("."),a=i.host===location.host,s=i.search,c=i.pathname,d=searchStringToObject(s);if(s||(d=e.search()),!a||o||r)try{document.location.replace(t)}catch(e){throw"could not redirect to "+t+" - Error: "+e}else{if(n)return e.path(c).search(d).hash(i.hash);e.path(c).search(d).hash(i.hash).replace()}}}}]),app.service("Reporting",["$location","Network","Storage","Analytics","$rootScope","Language","State","FeatureFlags","CaptureInfo",function(e,t,n,o,i,r,a,s,c){function d(e,n){return p.mgmData.mgmCode&&o.event("mgm","use-code",p.mgmData.mgmCode),t.post(n,e,2,!0,window.oldEshopBasePath,"text/plain",!0,!1)}var u=this,l={0:"y",1:"0",2:"f",3:"w",4:"9",5:"3",6:"b",7:"a",8:"m",9:"x"},p=this;this.init=function(){var t=Math.round((new Date).getTime()/1e3);this.mgmData={mgmCode:e.search().mgm,utmParams:window.location.search,mgmTime:t,utmTime:t};var o=n.get("mgmData");o&&(!this.mgmData.utmParams&&o.utmParams&&(this.mgmData.utmParams=o.utmParams,this.mgmData.utmTime=o.utmTime),!this.mgmData.mgmCode&&o.mgmCode&&(this.mgmData.mgmCode=o.mgmCode,this.mgmData.mgmTime=o.mgmTime)),n.set("mgmData",this.mgmData),this.numberToCode=function(e){return e.split("").map(function(e){return l[e]}).join("")}},this.sendWinData=function(e){var t=o.getCookies(e.orderTrackingId);return o.dataLayerPush({tracking_cookie:t}),"undefined"===u.mgmData.mgmCode&&(u.mgmData.mgmCode=void 0),u.reportCioEvent("new-win-subscription"),d(_objectSpread(_objectSpread({},e),{},{mgm_code:u.mgmData.mgmCode,utm_param:u.mgmData.utmParams,utm_arrive_time:u.mgmData.utmTime,mgm_arrive_time:u.mgmData.mgmTime,order_type:"win",lang:r.data.current,brand:i.sunriseMode?"sunrise":window.brand,cookies:JSON.stringify(t)}),"submit_win_order_detail")},this.sendData=function(e,t,n,i){var a=o.getCookies(e.orderTrackingId);o.dataLayerPush({tracking_cookie:a}),"undefined"===this.mgmData.mgmCode&&(this.mgmData.mgmCode=void 0);var s={rfeOrderId:e.orderId.toString(),newMsisdn:e.subscriptionDetails.msisdn||"",mgmCode:this.mgmData.mgmCode,utmParam:this.mgmData.utmParams,campaignInfo:e.promotionCode,utmArrivedTime:this.mgmData.utmTime,mgmArrivedTime:this.mgmData.mgmTime,orderType:t,emailAddress:e.billingCustomerDetails.emailAddress||this.checkoutService.orderData.billingCustomerDetails.emailAddress,lang:r.data.current,brand:window.brand,accessCode:e.accessCode,username:n,cookies:JSON.stringify(a),userAgentDetail:window.navigator.userAgent};i&&(s.deviceId=i.id),this.mgmData.mgmCode&&o.event("mgm","use-code",this.mgmData.mgmCode),c.submitOrderDetails(s)},this.init();var g=i.$on("$routeChangeSuccess",function(){e.search().mgm&&(u.init(),g())});this.reportCioEvent=function(e,o,i){var r=n.get("cio",24);if(r){var s={cio_id:r,type:e.split("-").join("_"),withDevice:!(null===o||void 0===o||!o.device)};return n.remove("cio"),t.post("cio_event",s,2,!0,window.oldEshopBasePath,"text/plain",!0,!1)}if(a.clickedDeal){var c=a.clickedDeal.sub.recommendations.deals.find(function(e){return e.id===a.clickedDeal.id});if(null!==c&&void 0!==c&&c.successCriteria){var d=[];if(!c.successCriteria.find(function(t){var n,r,a;if(t.type&&t.type!==e)return void d.push("Criteria type doesnt match",t.type,e);if("add-option"===t.type&&t.optionId&&t.optionId!==i)return void d.push("Option id doesnt match",t.optionId,i);if(t.product&&t.product!==(null===o||void 0===o?void 0:null===(n=o.config)||void 0===n?void 0:n.url)){var s;return void d.push("Product url doesnt match",t.product,null===o||void 0===o?void 0:null===(s=o.config)||void 0===s?void 0:s.url)}if(t.deviceId&&t.deviceId!==(null===o||void 0===o?void 0:null===(r=o.device)||void 0===r?void 0:r.id)){var c;return void d.push("Device id doest match",t.deviceId,null===o||void 0===o?void 0:null===(c=o.device)||void 0===c?void 0:c.id)}if(t.promotionCode&&t.promotionCode!==(null===o||void 0===o?void 0:null===(a=o.promotion)||void 0===a?void 0:a.code)){var u;return void d.push("Promotion code doesnt match",t.promotionCode,null===o||void 0===o?void 0:null===(u=o.promotion)||void 0===u?void 0:u.code)}return!0}))return console.warn("Action not counted as deal success because:",d)}a.clickedDeal.sub.setRecommendations({dealSuccess:a.clickedDeal.id}),delete a.clickedDeal}}}]),app.service("SavingsOptions",["Option","Network","$rootScope","State","FeatureFlags",function(e,t,n,o,i){var r=this;r.options={},r.categories=[];var a=["UNLIMITED","SURF","COUNTRIES","ROAMING","SMS","SPEEDON"].reverse();r.processOptions=function(t){t=r.organizeOptions(t);var i=[];for(var s in t)"INSURANCE"!==t[s].category?"REACTIVATE INSURANCE"!==t[s].category?(i.indexOf(t[s].category)<0&&i.push(t[s].category),r.options[t[s].id]=new e(t[s])):this.insuranceReactivationOption=new e(t[s]):this.insuranceOption=new e(t[s]);i=i.sort(function(e,t){return a.indexOf(e)>a.indexOf(t)?-1:1}),r.categories=i;for(var s in r.options)r.options[s].linkParentOption(r.options);if(o.customerLoggedIn)r.getOptionBundles();else var c=n.$on("doneCheckingCustomerLoggedIn",function(e){e&&(r.getOptionBundles(),c())});o.returnWhenCommonDataExtrasLoaded().then(function(){for(var e in r.options)r.options[e].calcPriceNewCustomer(),r.options[e].calcNormalCost()})},r.organizeOptions=function(e){for(var t in e)e[t].id=t;return objToArray(e).sort(function(e,t){return t.priority>e.priority?1:-1})},r.findOptionByName=function(e){for(var t in r.options)if(r.options[t].name==e||urlify(r.options[t].name)==e)return r.options[t]},r.getOptionBundles=function(){t.get("/data/option_bundles.7ddde4510e.json").then(function(e){if(e)for(var t in r.options)r.options[t].extraBundles=e[r.options[t].url]||[]})}}]),app.service("State",["$rootScope","$q",function(e,t){var n=this;this.languageVersions={},this.bootloaderDone=!1,this.commonDataExtrasLoaded=!1,this.countryDataLoaded=!1,this.checkoutDataLoaded=!1,this.customerLoggedIn=!1,this.customerLoggingIn=!1,this.customerLoggingOut=!1,this.agentLoggedIn=!1,this.agentLoggingIn=!1,this.agentLoggingOut=!1,this.cordovaLoaded=!1,this.languageLoaded=!1,this.prismicPopupsLoaded=!1,this.gotMsisdns=!0,this.doneRenewingTokens=!0,this.refreshingAccountData=!1,this.refreshingOrders=!1,this.returnWhenBootloaderDone=function(){return n.bootloaderDone?t.resolve():n.waitForEvent("bootloaderDone")},this.returnWhenBootloaderInitialDone=function(){return n.bootloaderInitialDone?t.resolve():n.waitForEvent("bootloaderInitialDone")},this.returnWhenDeviceDataLoaded=function(){return n.deviceDataLoaded?t.resolve():n.waitForEvent("deviceDataLoaded")},this.returnWhenCommonDataExtrasLoaded=function(){return n.commonDataExtrasLoaded?t.resolve():n.waitForEvent("commonDataExtrasLoaded")},this.returnWhenCountryDataLoaded=function(){return n.countryDataLoaded?t.resolve():n.waitForEvent("countryDataLoaded")},this.returnWhenCheckoutDataLoaded=function(){return n.checkoutDataLoaded?t.resolve():n.waitForEvent("checkoutDataLoaded")},this.returnWhenRateplanDataLoaded=function(){return n.rateplanDataLoaded?t.resolve():n.waitForEvent("rateplanDataLoaded")},this.returnWhenAccountDataRefreshed=function(){return n.refreshingAccountData?n.waitForEvent("accountDataRefreshed"):t.resolve()},this.returnWhenOrdersRefreshed=function(){return n.refreshingOrders?n.waitForEvent("ordersRefreshed"):t.resolve()},this.checkCustomerLoggedIn=function(){return n.customerLoggingIn?n.waitForEvent("doneCheckingCustomerLoggedIn").then(function(){return n.customerLoggedIn}):t.resolve(n.customerLoggedIn)},this.checkCustomerLoggedInNoCreditCheck=function(){return n.customerLoggingInNoCreditCheck?n.waitForEvent("doneCheckingCustomerLoggedInNoCreditCheck").then(function(){return n.customerLoggedIn}):t.resolve(n.customerLoggedIn)},this.checkAgentLoggedIn=function(){return n.agentLoggingIn?n.waitForEvent("doneCheckingAgentLoggedIn").then(function(){return n.agentLoggedIn}):t.resolve(n.agentLoggedIn)},this.returnWhenCordovaLoaded=function(){return n.cordovaLoaded?t.resolve(!0):n.waitForEvent("cordovaLoaded").then(function(){return n.cordovaLoaded})},this.returnWhenLanguageLoaded=function(){return n.languageLoaded?t.resolve(!0):n.waitForEvent("langChangeEnd")},this.returnWhenPrismicPopupsLoaded=function(){return n.prismicPopupsLoaded?t.resolve(!0):n.waitForEvent("prismicPopupsLoaded")},this.returnWhenGotMsisdnSearch=function(){return n.gotMsisdns?t.resolve(!0):n.waitForEvent("gotMsisdns")},this.returnWhenAuthDoneRenewing=function(){return n.doneRenewingTokens?t.resolve(!0):n.waitForEvent("doneRenewingTokens")},this.returnWhenPromotionsLoaded=function(){return n.doneCheckingDefaultPromos?t.resolve(!0):n.waitForEvent("finishedGettingPromos")},this.waitForEvent=function(n){var o=t.defer(),i=e.$on(n,function(e){o.resolve(e),i()});return o.promise}}]),app.service("Storage",function(){this.get=function(e,t,n){try{var o;t=null!==(o=t)&&void 0!==o?o:1/0;var i=n?null:localStorage.getItem(e);return i||(i=sessionStorage.getItem(e)),!!(i&&(i=JSON.parse(i),i.savedTime+36e5*t>(new Date).getTime()))&&i.data}catch(e){this.log(e)}},this.set=function(e,t,n){try{t={savedTime:(new Date).getTime(),data:t},n?sessionStorage.setItem(e,JSON.stringify(t)):localStorage.setItem(e,JSON.stringify(t))}catch(e){this.log(e)}},this.update=function(e,t){try{var n,o=sessionStorage.getItem(e);if(o?n=!0:o=localStorage.getItem(e),!o)return!1;o=JSON.parse(o),o.data=t,n?sessionStorage.setItem(e,JSON.stringify(o)):localStorage.setItem(e,JSON.stringify(o))}catch(e){this.log(e)}},this.remove=function(e){try{localStorage.removeItem(e),sessionStorage.removeItem(e)}catch(e){this.log(e)}},this.clear=function(e){try{var t={};forEach(e,function(e){t[e]={},t[e].data=localStorage.getItem(e),t[e]||(t[e].data=sessionStorage.getItem(e),t[e].session=!0)});var n=e.filter(function(e){return e&&-1!==e.indexOf("?")}).map(function(e){return e.split("?").join("")});for(var o in localStorage)!function(e){n.forEach(function(n){-1!==e.indexOf(n)&&(t[e]={},t[e].data=localStorage.getItem(e),t[e]||(t[e].data=sessionStorage.getItem(e),t[e].session=!0))})}(o);localStorage.clear(),sessionStorage.clear(),forEach(t,function(e,t){e.data&&(e.session?sessionStorage.setItem(t,e.data):localStorage.setItem(t,e.data))})}catch(e){this.log(e)}},this.clearMatch=function(e){for(var t in localStorage)-1!==t.indexOf(e)&&localStorage.removeItem(t);for(var n in sessionStorage)-1!==n.indexOf(e)&&sessionStorage.removeItem(n)},this.log=function(e){console.error("error clearing",e)},this.test=function(){try{return localStorage.setItem("localstoragetest","works"),localStorage.removeItem("localstoragetest","works"),!0}catch(e){return!1}}}),app.service("Support",["Network","Notifications","$rootScope","Language","$q","HelpTopic","HelpArticle",function(e,t,n,o,i,r,a){var s=this;this.gettingSupportData=!1,this.getSupportData=function(n,o){var r=i.defer();s.supportDataLoaded=!1;var a={de:"/data/support_de.420d270b75.json",fr:"/data/support_fr.4309f3ed63.json",it:"/data/support_it.576ffe7a58.json",en:"/data/support_en.cfa27a0522.json"};return!o&&s.gettingSupportData?r.resolve():(s.gettingSupportData=!0,e.get(a[n]).then(function(e){s.gettingSupportData=!1,e?(s.processNewHelpArticles(e.helpArticles),s.processNewTopics(e.helpTopics),s.linkSubTopics(),r.resolve()):t.add("faqLoadError","bad")})),r.promise},this.linkSubTopics=function(){for(var e in this.helpTopics)this.helpTopics[e].linkSubTopics(this.helpTopics)},this.processNewTopics=function(e){this.helpTopics={};for(var t in e)this.helpTopics[t]=new r(t,e[t],s.helpArticles);this.supportDataLoaded=!0},this.processNewHelpArticles=function(e){s.helpArticles={};for(var t in e)s.helpArticles[t]=new a(t,e[t])},this.getTopicsWithTag=function(e){var t={};for(var n in this.helpTopics)this.helpTopics[n].hasTag(e)&&(t[n]=this.helpTopics[n]);return t},this.search=function(e,t){if(s.resetPoints(),e)if(e=e.replace(/\n/g," "),t)for(var n in t.helpArticles)s.helpArticles[n].search(e);else for(var n in s.helpArticles)s.helpArticles[n].topic.tags.indexOf("hideByDefault")<0&&s.helpArticles[n].search(e)},this.resetPoints=function(){for(var e in s.helpArticles)s.helpArticles[e].resetPoints()},n.$on("langChangeStart",function(e,t){s.getSupportData(t)}),this.getSupportData(o.data.current)}]),app.service("SwypeLeads",["Network","Language","AgentAccount",function(e,t,n){var o=this;this.signupFromOrder=function(e){var t,i={email:e.billingCustomerDetails.emailAddress,firstName:e.billingCustomerDetails.firstName,lastName:e.billingCustomerDetails.lastName,city:e.billingAddress.city,zip:e.billingAddress.postCode,street:e.billingAddress.streetName,streetNumber:e.billingAddress.streetNumber};return o.signup(i,brand+"_light_auto",null===n||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.username)},this.signupFromPOS=function(e,t){return o.signup(e,"pos_order_"+brand,t)},this.signupFromEshop=function(e,t){return o.signup(e,"eshop_order_".concat(brand,"_").concat(t))},this.signup=function(n,o,i){var r={email:n.email,firstName:n.firstName,lastName:n.lastName,city:n.city,zip:n.zip+"",street:n.street,streetNumber:n.streetNumber||"",type:o,language:t.data.current,agentUsername:i,orderStep:"COMPLETE"};return e.post("add_swype_lead",r,2,!0,window.oldEshopBasePath,"text/plain",!0,!1).then(function(e){if(e&&e.errorCode){if("ERR_ORDER_ALREADY_EXISTS"==e.errorCode)return!0;throwSafe("error adding swype lead: "+e.errorCode,"ID-58")}else e||throwSafe("error adding swype lead, no response: ","ID-59");return e})}}]),app.service("TabControl",["Storage","$rootScope","State","$q","CustomerAccount","AgentAccount",function(e,t,n,o,i,r){var a=this;this.currentStatus="",this.getStatus=function(){return[!!i.rawAccountresponse&&hashString(JSON.stringify(i.rawAccountresponse)),!!r.rawAccountresponse&&hashString(JSON.stringify(r.rawAccountresponse||""))]},this.getStatusString=function(){return JSON.stringify(a.getStatus())},this.goToCorrectRoute=function(e,t){var o="/";t?(o+="pos",e&&(o+="/existing-customer")):e?window.yolSiteData.roaming?o+="account/cockpit":o+="account":n.agentLoggedIn&&(o+="pos-login"),window.onbeforeunload=function(e){},window.location.href=window.location.origin+o},this.check=throttle(function(){var t=a.getStatusString();if(t===a.currentStatus){var n=JSON.parse(e.get("tabStatus")||"[]");t!==e.get("tabStatus")&&a.goToCorrectRoute.apply(a,_toConsumableArray(n))}else e.get("tabStatus")!==t&&e.set("tabStatus",t);a.currentStatus=t},100),o.all([n.returnWhenBootloaderDone(),n.checkCustomerLoggedIn(),n.checkAgentLoggedIn()]).then(function(){window.onfocus=function(){return a.check()},t.$watch(function(){return a.check()}),a.check(!0)})}]),app.service("TelegramAlert",["$http","FeatureFlags","$q",function(e,t,n){var o=this;this.endpoint=window.microServiceEndpoint+"telegram-alert/",this.telegramGroupId=(window.brand,"1001282293249"),this.appName="yallo"==window.brand?"yalloFrontEnd":"lebaraFrontEnd",window.isTest&&(this.telegramGroupId=(window.brand,"1001506510290")),this.submit=function(t,n){var o={logLevel:"info",notifyToTelegram:!0,type:"FE",historyLength:10,source:"main.min.js"},i=_objectSpread(_objectSpread({},o),n),r=window.yolAppHistory.slice(Math.max(window.yolAppHistory.length-i.historyLength,1)),a=window.location.href;i.historyLength&&(a+=" | location history: "+r.join(", "));var s={appName:this.appName,source:i.source||"?????",message:t+" | rfe id: "+lastRfeId+" | yolSessionId: "+window.yolSessionId,location:a,logLevel:i.logLevel,type:i.type,notifyToTelegram:i.notifyToTelegram,userAgent:window.navigator.userAgent,telegramGroupId:this.telegramGroupId};"info"===i.logLevel?console.log(t,s):"warning"===i.logLevel?console.warn(t,s):"error"===i.logLevel?console.error(t,s):"debug"===i.logLevel&&console.debug(t,s)
;var c=this.endpoint+"submitNotification";return e.post(c,s)},this.submitInfo=function(e,t){return o.submit(e,_objectSpread({historyLength:0,notifyToTelegram:!1},t))},this.submitWarning=function(e,t){return o.submit(e,_objectSpread({logLevel:"warning"},t))},this.submitError=function(e,t){return o.submit(e,_objectSpread({logLevel:"error"},t))}}]),app.service("ThreatMetrix",["ErrorReporting",function(e){var t=this,n="t.lebara.ch";this.tmxSessionId,this.checkIfProfilingStarted=function(){return"undefined"!=typeof tmx_profiling_started&&tmx_profiling_started},this.profile=function(){t.tmxSessionId=window.yolSessionId+"_"+randomString(10),e.debugLog("TMX profiling started... Session id: ",t.tmxSessionId);try{return jupiter.go(n,"35z6rce3",t.tmxSessionId),t.tmxSessionId}catch(e){throwSafe(e)}},this.profileWIN=function(e){try{return jupiter.go(n,"35z6rce3",e),e}catch(e){throwSafe(e)}},window.isTest&&(window.tmx_profiling_complete=function(e){console.log("TMX device profiling complete for sessionId "+e)})}]),app.service("Topup",["Network","CustomerAccount","$q","Language","Notifications","$location","$rootScope","$translate",function(e,t,n,o,i,r,a,s){var c=this;this.data={creditCards:{}},this.gotCreditCards=!1;var d=this;this.topupvalues=[10,20,30,50,100],this.lowestAmounts=[2,5,10,20],this.defaultTopupValue=20,a.$on("customerLogout",function(){d.data={creditCards:{}},d.gotCreditCards=!1}),this.getSavedCreditCards=function(o){var i=n.defer();if(this.gotCreditCards&&!o)return n.resolve();if(this.gettingCreditCards)return n.resolve();if(!t.isAccountOwner())return n.resolve();this.gettingCreditCards=!0;var r=0,a=0;return forEach(t.subscriptions,function(t){if("prepaid"==t.type){r+=1;var n={subscriptionId:t.id};e.post("getCreditCardInfo",n).then(function(e){if(a+=1,a==r&&(d.gettingCreditCards=!1,i.resolve()),e){for(var n in e.creditCards){var o=parseInt(e.creditCards[n].expiry.split("/")[0]),s=parseInt("20"+parseInt(e.creditCards[n].expiry.split("/")[1])),c=swissDate();s>c.getFullYear()||(s===c.getFullYear()&&o>c.getMonth()+1||delete e.creditCards[n])}d.addCreditCards(e.creditCards),forEach(e.scheduledTopups,function(e){e.type=getCreditCardType(e.maskedCCdNumber),"MONTHLY"==e.type?e.type="monthly":"DAILY"==e.type&&(e.type="daily")}),forEach(e.balanceTopups,function(e){e.type=getCreditCardType(e.maskedCCdNumber)}),t.creditCards=e.creditCards,t.scheduledTopups=e.scheduledTopups,t.balanceTopups=e.balanceTopups}})}}),i.promise},this.getAllRecurringTopups=function(){var e=[];return forEach(t.subscriptions,function(t){e=e.concat(objToArray(t.scheduledTopups)),e=e.concat(objToArray(t.balanceTopups))}),e},this.addCreditCards=function(e){for(var t in e)e[t].type=getCreditCardType(e[t].maskedCCdNumber),c.data.creditCards[t]=e[t]},this.removeScheduledTopup=function(n){return e.post("deleteTopup",{rechargeTicketId:n}).then(function(e){if(e)return forEach(t.subscriptions,function(e){"prepaid"==e.type&&e.scheduledTopups[n]&&delete e.scheduledTopups[n],"prepaid"==e.type&&e.balanceTopups[n]&&delete e.balanceTopups[n]}),e})},this.activeCreditCards=function(){var e={};for(var t in this.data.creditCards){var n=this.data.creditCards[t];0==n.status&&(e[t]=n)}return e},this.findSubscriptionWithCreditCard=function(e){for(var n in t.subscriptions){var o=t.subscriptions[n];if("prepaid"==o.type&&o.creditCards[e])return o}},this.copyCreditCard=function(t,n){return e.post("copyCreditCard",{rechargeTicketId:t,subscriptionId:this.findSubscriptionWithCreditCard(t).id,toSubscriptionId:n.id}).then(function(e){return e?d.getSavedCreditCards(!0):e})},this.doTopup=function(e,t,n,o){if(n&&!e.getCreditCardIdFromAliasCC(n)){var i=this.findCreditCardIdFromAliasCC(n);return this.copyCreditCard(i,e).then(function(i){if(i){var r=e.getCreditCardIdFromAliasCC(n);return d.topupCall(e,t,r,o)}return!1})}var r=e.getCreditCardIdFromAliasCC(n);return this.topupCall(e,t,r,o)},this.findCreditCardIdFromAliasCC=function(e){for(var n in t.subscriptions){var o=t.subscriptions[n],i=o.getCreditCardIdFromAliasCC(e);if(i)return i}},this.topupCall=function(t,a,c,d){var u=n.defer();return e.post(c?"savedCreditCardTopup":"creditCardTopup",{subscriptionId:t.id,amount:a,creditCardId:c,saveCreditCard:d},null,!0).then(function(e){if(e.errorCode)return i.add(s.instant("error_"+e.errorCode),"bad"),u.resolve("failed"),u.promise;if(e){if(!e.dataTrans)return t.billingGroup.balance+=a,r.path("/".concat(o.data.current,"/account/topup-success")).search({amount:a,subscription:t.id});loadDatatransScripts(e.dataTrans.dataTransURL,function(){e.language=o.data.current,createDatatransForm(e,o.data.current,t.id).then(function(){Datatrans.startPayment({form:"#paymentForm",loaded:function(){return console.log("loaded")},closed:function(){return u.resolve("success")},error:function(e){console.error(e),throwSafe(e,"63-id"),i.add("topupError","bad"),u.resolve("failed")}})})})}else u.resolve("failed")}).catch(function(e){}),u.promise},this.addScheduledTopup=function(e,t,n,o,i){var r=e.getCreditCardIdFromAliasCC(n);if(!r){var a=this.findCreditCardIdFromAliasCC(n);return this.copyCreditCard(a,e).then(function(a){return!!a&&(r=e.getCreditCardIdFromAliasCC(n),d.sendAddScheduledTopupCall(e,t,i,o,r))})}return d.sendAddScheduledTopupCall(e,t,i,o,r)},this.sendAddScheduledTopupCall=function(t,n,o,i,r){return e.post("setupScheduledTopup",{subscriptionId:t.id,type:n,day:o,amount:i,rechargeTicketId:r})},this.addBalanceTopup=function(e,t,n,o){var i=e.getCreditCardIdFromAliasCC(t);if(!i){var r=this.findCreditCardIdFromAliasCC(t);return this.copyCreditCard(r,e).then(function(r){return!!r&&(i=e.getCreditCardIdFromAliasCC(t),d.sendAddBalanceTopupCall(e,i,n,o))})}return d.sendAddBalanceTopupCall(e,i,n,o)},this.sendAddBalanceTopupCall=function(t,n,o,i){return e.post("setupBalanceTopup",{subscriptionId:t.id,lowerbalance:o,amount:i,rechargeTicketId:n})},this.doVoucherTopup=function(t,n){return e.post("voucherTopup",{subscriptionId:t.id,voucherNumber:n})},this.deleteRecurringTopupsByCC=function(e){var t=this;return n.all(this.getTopupIdsByCC(e).map(function(e){return t.removeScheduledTopup(e)}))},this.getTopupIdsByCC=function(e){var n=[];return objToArray(t.subscriptions).forEach(function(e){return n=n.concat(objToArray(e.scheduledTopups,!0),objToArray(e.balanceTopups,!0))}),n.filter(function(t){return t.aliasCC===e}).map(function(e){return e.objKey})},this.deleteCreditCard=function(o){var i=n.defer();return this.deleteRecurringTopupsByCC(o).then(function(){var n=0,r=0;for(var a in t.subscriptions)!function(){var s=t.subscriptions[a];for(var c in s.creditCards)!function(t){s.creditCards[t].aliasCC==o&&(n+=1,e.post("deleteTopup",{rechargeTicketId:t}).then(function(e){e&&(delete s.creditCards[t],delete d.data.creditCards[t]),(r+=1)==n&&i.resolve()}))}(c)}();r==n&&i.resolve()}),i.promise}}]),app.service("VersionCheck",["Network","$translate","$rootScope",function(e,t,n){var o=this;this.check=function(){var o=this;if(!(n.winMode||n.checkoutMode&&n.checkoutMode.active)){var i=window.location.href;if(!(i.indexOf("/checkout/")>-1||i.indexOf("/process/")>-1))return e.get("data/version.json?cachebreak="+Date.now(),3,!0).then(function(e){if(e&&!e.errorCode){o.version||(o.version=e.version);var n=e.version!==o.version;return n&&window.confirm&&window.confirm(t.instant("updateReloadText"))&&window.location.reload(),n}})}},this.check(),setInterval(function(){o.check()},432e5)}]),app.service("WinOrder",["$http","Language","WinRecovery","$rootScope","Storage","$q","Network","State","PrismicPopups","ThreatMetrix",function(e,t,n,o,i,r,a,s,c,d){function u(){return"?lang=".concat(t.data.current).concat(h.csrfToken?"&token="+h.csrfToken:"").concat(h.hashedSiteId?"&hashedSiteId="+h.hashedSiteId:"")}function l(e){var n={},o="Mr"===e;return"en"===t.data.current?n.title=o?"Mr.":"Mrs.":"de"===t.data.current?n.title=o?"Herr":"Frau":"it"===t.data.current?n.title=o?"Signor":"Signora":n.title=o?"Monsieur":"Madame",n.titleCode=o?"Man":"Woman",n}function p(e){return"".concat(e.year,"-").concat(e.month.toString().paddTo(2),"-").concat(e.day.toString().paddTo(2),"T12:00:01+01:00")}function g(e,t){return angular.extend(_objectSpread(_objectSpread(_objectSpread({},e),k),t),{params:e})}var f=this,h=this;n.winOrder=h;var m,v="https://rest.".concat(brand,".ch/sunrise-proxy");window.location.port&&(v="https://".concat("lebara"===brand?"rest-":"").concat(brand,"-t01.sunrise.ch/sunrise-proxy")),window.isTest&&(v="https://".concat("lebara"===brand?"rest-":"").concat(brand,"-").concat(window.testEnvName,".sunrise.ch/sunrise-proxy"),-1!==window.location.href.indexOf("sunrise.ch")&&(v="https://".concat("lebara"===brand?"rest-":"").concat(brand,"-t02.sunrise.ch/sunrise-proxy")));var b="https://www.sunrise.ch";window.isTest&&(b=v);var w="/sunrisecommercewebservices/v2/".concat(o.sunriseMode?"web":"yallo");this.token="",this.apiPrefix=w;var C,y=!0,D=0,S=0,I={withCredentials:!1};h.lastLinecheckRequest={};var k={withCredentials:!0,headers:{"Content-Type":"application/json"}};h.csrfToken,h.cartId="",h.electricianPackages=[],window.production&&(k["X-Sunrise-SESSIONID"]="d257e0138100679bd251b2f1a0b4a356"),o.$on("AgentLoggedin",function(e){i.remove(n.key)}),this.resetService=function(){delete f.csrfToken,delete f.cartId,m&&clearInterval(m)},h.checkAlreadyCustomer=function(e){var t={firstName:e.personalDetails&&e.personalDetails.firstName||void 0,lastName:e.personalDetails&&e.personalDetails.lastName||void 0,emailAddress:e.emailAddress||e.personalDetails&&e.personalDetails.emailAddress||void 0,streetNumber:e.address&&e.address.streetNumber||void 0,contactNumber:cleanupNumberLandline(e.personalDetails.contactNumber)||void 0};return t.emailAddress||t.contactNumber||t.streetNumber&&t.firstName&&t.lastName?a.post("check_already_sunrise_customer",t,2,!1,window.oldEshopBasePath,"text/plain",!0,!1):r.reject()},h.showAlreadyCustomerPopup=function(){s.returnWhenPrismicPopupsLoaded().then(function(e){f.alreadyCustomerPopup.show()})},s.returnWhenPrismicPopupsLoaded().then(function(e){h.alreadyCustomerPopup=c.popups.find(function(e){return e.data.display_name==="".concat(o.sunriseMode?"Sunrise":"","win").concat(o.isPos?"Pos":"","AlreadyCustomerPopup")}),h.alreadyCustomerPopup||throwSafe("Popup missing","64-id")}),h.productsSold=[{offerKey:"we-home-s",productNames:["We Home S"],niceName:"We Home S",options:[],name:"P1 : We Home S",description:""},{offerKey:"we-home-l",productNames:["We Home L"],niceName:"We Home L",options:[],name:"P1 : We Home L",description:"",fallbackProduct:"We Home S"}],h.preferredProductSold=h.productsSold[0],h.checkAlreadyCustomerDebounced=debouncePromise(h.checkAlreadyCustomer,100,{leading:!0}),h.getProductPrice=function(n){var o=n.productNames?n.productNames[0]:n;return encodeURI,e.get("".concat(v).concat(w,"/products/list?ids=").concat(encodeURI(o),"&cacheResults=true&promoDiscount=true&lang=").concat(t.data.current))},h.lineCheck=function(t,n,o){h.productSold=t,D++;var i=D,r={segmentCode:"RC",qualifyAllProducts:!0,inputProductsList:t.productNames,interactionNote:"PostPexmanLineCheck"};o?r.lri=o:n?r.address={postalCode:n.postCode,town:n.city,streetName:n.streetName,streetNumber:n.streetNumber}:console.error("no data for linecheck");var a="".concat(v).concat(w,"/home/linecheck").concat(u(),"&promoDiscount=true");return h.lastLinecheckRequest={request:r,url:a},e.post(a,r,k).then(function(e){return i===D&&(h.lineCheckTransactionId=e.data.uniqueTransactionId),e.data}).catch(function(e){var t=e&&e.data&&e.data.errors&&e.data.errors[0]&&e.data.errors[0].message;if("Invalid LRI"===t||"OTO Id checksum validation failed"===t||"Address not found for LRI"===t)return Promise.reject("wrongOTO");throw e})},h.lineCheckOTO=function(t,n){S++;var o={segmentCode:"RC",qualifyAllProducts:!0,inputProductsList:t.productNames,interactionNote:"PostPexmanLineCheck",lri:n};return e.post("".concat(v).concat(w,"/home/linecheck").concat(u(),"&promoDiscount=true"),o,k).then(function(e){return e.data}).catch(function(e){var t=e&&e.data&&e.data.errors&&e.data.errors[0]&&e.data.errors[0].message;if("Invalid LRI"===t||"OTO Id checksum validation failed"===t||"Address not found for LRI"===t)return Promise.reject("wrongOTO");throw e})},h.getCSRFSecureToken=function(t){return e.get(v+"/csrf-secure",angular.copy(k,{})).then(function(e){var t=e.data.token;if(!t)return Promise.reject("/csrf-secure did not give us a token...");h.csrfToken=t})},h.initCsrf=function(e){m||(h.getCSRFSecureToken(),m=setInterval(h.getCSRFSecureToken,275e3))},h.createCart=function(t){return e.post(v+w+"/users/current/carts"+u(),{interactionNote:"PostCart"},k).then(function(e){return h.cartId=e.data.guid,d.profileWIN(h.cartId),o.$emit("cartIdSet"),e})};var P;h.addToCart=function(){var t={productCode:h.productSold.productNames[0],segmentCode:"RC",lang:"en",interactionNote:"PostCartEntries",flowIdentifier:"PEXMAN"};return h.csrfToken&&(t.token=h.csrfToken),e.post("".concat(v).concat(w,"/users/current/carts/").concat(h.cartId,"/entries"),t,g(t)).then(function(e){return P=e.data.cartModifications[0].cartPackage.id,e})},h.getCart=function(t){return e.get(v+w+"/users/current/carts/"+h.cartId+u(),k).then(function(e){if(y=!1,e.data){if(e.data.appliedProductPromotions){var t=e.data.appliedProductPromotions,n=t[0];y="BINDING_PROMOTION"===n.promotion.promoType}}else throwSafe("missing resp.data","id-321");return e}).catch(function(e){if(!t)throw e;return e})},h.evaluateCart=function(t){return e.get(v+w+"/users/current/carts/"+h.cartId+"/home/evaluateHomeCart/"+h.lineCheckTransactionId+"/"+u(),k)},h.getCSRFGranite=function(t){return e.get(v+"/libs/granite/csrf/token.json",I)},h.getPhoneInfos=function(t){return e.get("".concat(v).concat(w,"/users/current/home/getTspInfo/").concat(t).concat(u()),k)},h.getElectricianPackages=function(){return e.get(v+w+"/users/current/carts/"+h.cartId+"/home/getElectricianPackages/"+h.lineCheckTransactionId+"/"+u(),k).then(function(e){return h.electricianPackages=e.data.electricianPackages,e.data})},h.addElectricianAndOptions=function(t,n){var o=[t],i={interactionNote:"PutCartsEntries",userActions:[].concat(_toConsumableArray(o.filter(function(e){return e}).map(function(e){var t;return{action:"add",productCode:e.code,componentCode:null===(t=e.defaultBundleTemplates)||void 0===t?void 0:t.find(function(e){return e.id.startsWith(P)}).id,segmentCode:"RC"}})),_toConsumableArray(n.map(function(e){return{action:"add",componentCode:e.componentCode,productCode:e.productCode,segmentCode:"RC"}})),_toConsumableArray(h.electricianPackages.filter(function(e){return e.purchasable&&e.code!==t.code}).map(function(e){return{action:"remove",productCode:e.code,componentCode:e.defaultBundleTemplates[0].id,segmentCode:"RC"}})))};return 0===i.userActions.length?r.resolve():e.put("".concat(v).concat(w,"/users/current/carts/").concat(h.cartId,"/entries").concat(u()),i,k).then(function(e){h.cart=e.data})},h.getProviders=function(n){return e.get(v+w+"/codelist/providers?lang="+t.data.current,k)},h.getNumbers=function(t){return e.get("".concat(v).concat(w,"/users/current/home/numbers/new")+u(),k).then(function(e){return e.data})},h.getNumber=function(){return e.get(v+w+"/users/current/carts/"+h.cartId+"/home/numbers/new"+u(),k).then(function(e){return e.data})},h.bookNumber=function(t){return C===t?r.resolve():(C=t,e.post(v+w+"/users/current/carts/"+h.cartId+"/home/numbers/reserve"+u(),{},g({phoneNumber:t,interactionNote:"PostNumberSelectionReservation"})))},h.getTitles=function(n){return e.get(v+w+"/titles?lang="+t.data.current,k)},h.getCountries=function(n){return e.get(v+w+"/countries?lang="+t.data.current,k)},h.getPassportTypes=function(n){return e.get(v+w+"/codelist/passporttypes?lang="+t.data.current,k)},h.addPersonalInformations=function(t,n){var o=angular.extend({},{type:"cartWsDTO",customer:{name:"Anonymous",uid:"anonymous",idCheckRequired:!0},defaultAddress:{inJurisdiction:!1,postalCode:t.address.postCode,streetName:t.address.streetName,streetNumber:t.address.streetNumber,town:t.address.city,titleCode:l(t.personalDetails.title).titleCode,title:l(t.personalDetails.title).title,firstName:t.personalDetails.firstName,lastName:t.personalDetails.lastName,email:t.personalDetails.emailAddress,emailConfirmation:t.personalDetails.emailAddress,phone:"0"+t.personalDetails.contactNumber.substr(-9,9),country:{isocode:"CH",country:"Switzerland"}},sameActivationAddress:t.differentLivingAddress,differentBillingAddress:t.differentBillingAddress,differentDeliveryAddress:t.differentDeliveryAddress,preferredCommunication:"Email",interactionNote:"PostCheckoutPersonalInformation",isVoucherRemoved:!1,applySubscriber:!1,porting:{currentProvider:t.currentProvider||"",endOfContractDate:"end"===t.porting,asap:"asap"===t.porting,numberNew:t.keepCurrentNumber?"":n,numberTransfer:t.keepCurrentNumber?t.landlineNumber:"",number:t.keepCurrentNumber?t.landlineNumber:n,numberType:"STANDARD",portingDateOption:"asap"===t.porting?"asap":"end"===t.porting?"end":"",transferDate:"date"===t.porting?p(t.contractStart):"",fixnetPreviousTSP:t.fixnetPreviousTSP||"NONE",type:t.keepCurrentNumber?"TRANSFER":"NEW",contractOwner:"me",ownerType:"private",accessDescriptor:"",differentOwner:!1,privatePerson:!0,relocationFlag:!("date"!==t.porting||!t.differentLivingAddress)&&t.relocationFlag},otoId:t.otoNumber||"",cli:"",portingDate:"date"===t.porting?p(t.contractStart):"",isFastPorting:"asap"===t.porting,portOnEndOfContract:"end"===t.porting,currentProvider:t.currentProvider,bindingPromotion:y});return window.skipWinIdCheck||(o.identityCheck={birthDate:p(t.idDetails.dob),nationality:t.idDetails.nationality,passportExpiryDate:p(t.idDetails.expiry),passportNumber:t.idDetails.idNumber,type:t.idDetails.idType.code,typeValue:t.idDetails.idType.value,youngProduct:!1}),t.differentDeliveryAddress?o.deliveryAddress={inJurisdiction:!1,firstName:t.deliveryAddress.firstName,lastName:t.deliveryAddress.lastName,companyName:t.deliveryAddress.companyName,postalCode:t.deliveryAddress.postCode,streetName:t.deliveryAddress.streetName,streetNumber:t.deliveryAddress.streetNumber,town:t.deliveryAddress.city,titleCode:l(t.deliveryAddress.title).titleCode,title:l(t.deliveryAddress.title).title}:o.deliveryAddress={firstName:t.personalDetails.firstName,lastName:t.personalDetails.lastName,inJurisdiction:!1},t.differentLivingAddress?o.currentAddress={postalCode:t.livingAddress.postCode,streetName:t.livingAddress.streetName,streetNumber:t.livingAddress.streetNumber,town:t.livingAddress.city}:o.currentAddress={postalCode:t.address.postCode,streetName:t.address.streetName,streetNumber:t.address.streetNumber,town:t.address.city},t.livingDeliveryAndRelocationFlag&&(o.currentAddress={postalCode:t.livingAndDeliveryAddress.postCode,streetName:t.livingAndDeliveryAddress.streetName,streetNumber:t.livingAndDeliveryAddress.streetNumber,town:t.livingAndDeliveryAddress.city},o.deliveryAddress={inJurisdiction:!1,firstName:t.livingAndDeliveryAddress.firstName,lastName:t.livingAndDeliveryAddress.lastName,companyName:t.livingAndDeliveryAddress.companyName,postalCode:t.livingAndDeliveryAddress.postCode,streetName:t.livingAndDeliveryAddress.streetName,streetNumber:t.livingAndDeliveryAddress.streetNumber,town:t.livingAndDeliveryAddress.city,titleCode:l(t.livingAndDeliveryAddress.title).titleCode,title:l(t.livingAndDeliveryAddress.title).title}),t.differentBillingAddress?o.billingAddress={country:{isocode:t.billingAddress.country},town:t.billingAddress.town,firstName:t.billingAddress.firstName,lastName:t.billingAddress.lastName,companyName:t.billingAddress.companyName,postalCode:t.billingAddress.postCode,streetName:t.billingAddress.streetName,streetNumber:t.billingAddress.streetNumber,title:l(t.billingAddress.title).title,titleCode:l(t.billingAddress.title).title}:o.billingAddress={country:{isocode:"CH"}},f.lastPersonalDetailsData=angular.copy(o),e.post("".concat(v).concat(w,"/users/current/carts/").concat(h.cartId,"/checkout/personal-information").concat(u()),o,k)},h.validateCart=function(t){return e.get("".concat(v).concat(w,"/users/current/carts/").concat(h.cartId,"/checkout/validate").concat(u()),k)},h.setPayment=function(t){var n={paymentModeCode:"checkout_invoice",interactionNote:"PutPaymentFlowCheckoutPaymentMode"};return e.put("".concat(v).concat(w,"/users/current/carts/").concat(h.cartId,"/checkout/payment/mode").concat(u()),n,g(n))},h.tosAccept=function(t){var n={termsOfUse:!0,interactionNote:"PutPaymentFlowCheckoutSubmit"};return e.put("".concat(v).concat(w,"/users/current/carts/").concat(h.cartId,"/checkout/submit").concat(u()),n,g(n))},h.successCall=function(){var t={redirectUrl:"".concat(b).concat(w,"/users/current/checkout/orders/").concat(h.cartId).concat(u())};return e.post("".concat(v).concat(w,"/users/current/carts/").concat(h.cartId,"/checkout/payment/success").concat(u()),t,g(t))},h.submitPOA=function(n,o){return e.post(window.oldEshopBasePath+"submit_win_poa",{env:v.indexOf("sunrise.ch")<0?"prod":"t03",applicationId:o.data.code,siteId:o.data.siteID.substr(1),company:"Sunrise Communications AG",title:l(n.personalDetails.title).title,firstName:n.personalDetails.firstName,lastName:n.personalDetails.lastName,streetName:n.address.streetName,streetNumber:n.address.streetNumber,city:n.address.city,postCode:n.address.postCode,landlineNumber:n.landlineNumber,language:t.data.current,portingDate:"date"===n.porting?p(n.contractStart):"",isFastPorting:"fast"===n.porting,portOnEndOfContract:"end"===n.porting,currentProvider:n.currentProvider,customerNumber:"",signature:n.signature},{withCredentials:!1,headers:{"Content-Type":"text/plain"}})},h.connectionStep=function(t){var n={uniqueTransactionId:h.lineCheckTransactionId,segmentCode:"RC",lri:t,relocation:!1,date:""};return e.post("".concat(v).concat(w,"/users/current/carts/").concat(h.cartId,"/home/connectionstep").concat(u()),n,g(n))},h.findMatchingId=function(e){return{"201411201909407896":"B","201411201909407897":"C","201810301102494924":"F",201411201909407900:"G","201411201909407899":"L","201810301102494923":"N","201411201909407906":"Identity card France","201910230913459796":"Foreign passport","201411201909407904":"Identity card Germany","201910230913459797":"Foreign passport","201411201909407911":"Identity card Italy","201910230913459801":"Foreign passport","201411201909407919":"Identity card Portugal","201910230913459811":"Foreign passport","201411201909407895":"Swiss Passport","201411201909407894":"Swiss Identity Card"}[e]},h.yalloSunriseMapping={"200903041337530069":"AF","200903041337530070":"AX","200903041337530071":"AL","200903041337530072":"DZ","200903041337530073":"AS","200903041337530074":"AD","200903041337530075":"AO","200903041337530076":"AI","200903041337530077":"AQ","200903041337530078":"AG","200903041337530079":"AR",200903041337530080:"AM","200903041337530081":"AW","200903041337530082":"AU","200903041337530083":"AT","200903041337530084":"AZ","200903041337530085":"BS","200903041337530086":"BH","200903041337530087":"BD","200903041337530088":"BB","200903041337530089":"BY","200903041337530090":"BE","200903041337530091":"BZ","200903041337530092":"BJ","200903041337530093":"BM","200903041337530094":"BT","200903041337530095":"BO","200903041337530096":"BA","200903041337530097":"BW","200903041337530098":"BV","200903041337530099":"BR","200903041337530101":"BN","200903041337530102":"BG","200903041337530103":"BF","200903041337530104":"BI","200903041337530105":"KH","200903041337530106":"CM","200903041337530107":"CA","200903041337530108":"CV","200903041337530109":"KY","200903041337530110":"CF","200903041337530111":"TD","200903041337530112":"CL","200903041337530113":"CN","200903041337530114":"CX","200903041337530116":"CO","200903041337530117":"KM","200903041337530118":"CG","200903041337530119":"CD","200903041337530120":"CK","200903041337530121":"CR","200903041337530123":"HR","200903041337530124":"CU","200903041337530125":"CY","200903041337530126":"CZ","200903041337530127":"DK",200903041337530100:"DG","200903041337530128":"DJ","200903041337530122":"CI","200903041337530149":"DE","200903041337530142":"FR","200903041337530129":"DM","200903041337530130":"DO","200903041337530131":"EC","200903041337530132":"EG","200903041337530133":"SV","200903041337530134":"GQ","200903041337530135":"ER","200903041337530136":"EE","200903041337530137":"ET","200903041337530138":"FK","200903041337530139":"FO",200903041337530140:"FJ","200903041337530141":"FI","200903041337530143":"GF","200903041337530144":"PF","200903041337530145":"TF","200903041337530146":"GA","200903041337530147":"GM","200903041337530148":"GE","200903041337530150":"GH","200903041337530151":"GI","200903041337530152":"GR","200903041337530153":"GL","200903041337530154":"GD","200903041337530155":"GP","200903041337530156":"GU","200903041337530157":"GT","200903041337530158":"GG","200903041337530159":"GN","200903041337530176":"IT","200903041337530160":"GW","200903041337530161":"GY","200903041337530162":"HT","200903041337530163":"HM","200903041337530165":"HN","200903041337530166":"HK","200903041337530167":"HU","200903041337530168":"IS","200903041337530169":"IN","200903041337530170":"ID","200903041337530171":"IR","200903041337530172":"IQ","200903041337530173":"IE","200903041337530174":"IM","200903041337530175":"IL","200903041337530177":"JM","200903041337530178":"JP","200903041337530179":"JE",200903041337530180:"JO","200903041337530181":"KZ","200903041337530182":"KE","200903041337530183":"KI","200903041337530184":"KP","200903041337530185":"KR","200903041337530186":"KW","200903041337530187":"KG","200903041337530189":"LV","200903041337530190":"LB","200903041337530191":"LS","200903041337530192":"LR","200903041337530164":"VA","200903041337530193":"LY","200903041337530194":"LI","200903041337530195":"LT","200903041337530196":"LU","200903041337530197":"MO","200903041337530198":"MK","200903041337530199":"MG",200903041337530200:"MW","200903041337530201":"MY","200903041337530202":"MV","200903041337530203":"ML","200903041337530204":"MT","200903041337530205":"MH","200903041337530206":"MQ","200903041337530207":"MR","200903041337530208":"MU","200903041337530209":"YT","200903041337530210":"MX","200903041337530211":"FM","200903041337530212":"MD","200903041337530213":"MC","200903041337530214":"MN","200903041337530215":"ME","200903041337530216":"MS","200903041337530217":"MA","200903041337530218":"MZ","200903041337530219":"MM","200903041337530220":"NA","200903041337530221":"NR","200903041337530222":"NP","200903041337530223":"NL","200903041337530245":"PT","200903041337530232":"MP","200903041337530225":"NC","200903041337530226":"NZ","200903041337530227":"NI","200903041337530228":"NE","200903041337530229":"NG","200903041337530230":"NU","200903041337530231":"NF","200903041337530233":"NO","200903041337530234":"OM","200903041337530235":"PK","200903041337530236":"PW","200903041337530237":"PS","200903041337530238":"PA","200903041337530239":"PG",200903041337530240:"PY","200903041337530241":"PE","200903041337530242":"PH","200903041337530243":"PN","200903041337530244":"PL","200903041337530246":"PR","200903041337530247":"QA","200903041337530248":"RE","200903041337530249":"RO","200903041337530250":"RU","200903041337530251":"RW","200903041337530252":"SH","200903041337530256":"VC","200903041337530253":"KN","200903041337530254":"LC","200903041337530255":"PM","200903041337530279":"CH","200903041337530285":"TP","200903041337530258":"SM","200903041337530259":"ST","200903041337530260":"SA","200903041337530261":"SN","200903041337530262":"RS","200903041337530263":"SC","200903041337530264":"SL","200903041337530265":"SG","200903041337530266":"SK","200903041337530267":"SI","200903041337530268":"SB","200903041337530269":"SO",200903041337530270:"ZA","200903041337530271":"GS","200903041337530272":"ES","200903041337530273":"LK","200903041337530274":"SD","200903041337530275":"SR","200903041337530276":"SJ","200903041337530277":"SZ","200903041337530278":"SE","200903041337530280":"SY","200903041337530281":"TW","200903041337530282":"TJ","200903041337530283":"TZ","200903041337530284":"TH","200903041337530286":"TG","200903041337530287":"TK","200903041337530257":"WS","200903041337530313":"BL","200903041337530314":"MF","200903041337530288":"TO","200903041337530289":"TT","200903041337530290":"TN","200903041337530291":"TR","200903041337530292":"TM","200903041337530293":"TC","200903041337530294":"TV","200903041337530295":"UG","200903041337530296":"UA","200903041337530297":"AE","200903041337530298":"GB","200903041337530299":"US",200903041337530300:"UM","200903041337530301":"UY","200903041337530302":"UZ","200903041337530303":"VU","200903041337530304":"VE","200903041337530305":"VN","200903041337530306":"VG","200903041337530307":"VI","200903041337530308":"WF","200903041337530309":"EH","200903041337530310":"YE","200903041337530311":"ZM","200903041337530312":"ZW","201001261203364913":"KV","201503231536495513":"BQ","201503231536525514":"CW","201503231536555515":"SX","201503231536585516":"SS","200903041337530224":"","200903041337530188":""}}]),app.service("WinRecovery",["Network","$location","$rootScope","$q","Storage","CustomerAccount","$routeParams","Language","AgentAccount","CommonData","State","ErrorReporting",function(e,t,n,o,i,r,a,s,c,d,u,l){var p=this;this.token=void 0,this.version=1;var g="checkoutWinRecoveryToken",f="checkoutWinRecoveryToken";this.key="checkoutCacheWin",this.init=function(){var t=i.get(g);t&&(this.token=t,e[f]=this.token)},this.get=function(){var n=this,r=t.search().checkoutRecoveryToken;return r?this.deleteCurrentToken(r).then(function(t){var o={token:r};return e.post("get_token_data",o,2,!0,window.oldEshopBasePath,"text/plain",!0,!1).then(function(t){if(t&&!t.errorCode&&t.version==n.version){n.token=r,e[f]=n.token;try{var o=JSON.parse(t.data_string);delete o.linecheckResults,delete o.creditCheckResult,i.set(n.key,o,!0)}catch(e){throwSafe(e,"ID-139")}}})}):o.resolve()},this.save=function(t){var o=this,h=t.personalDetails.emailAddress,m="eshop"===a.logintype;if((!m||h)&&(u.customerLoggedIn&&m&&l.debugWarning("not persisted to backend."),!u.agentLoggedIn)){u.agentLoggedIn&&u.customerLoggedIn&&(orderData.recoverPosUserData={username:r.accountOwner.username,dob:r.accountOwner.dob});var v=t.url.split("?")[0];if(n.sunriseMode){if(!p.winOrder.iframeLocation)return Promise.reject("Missing iframe location");v=v+"?"+{de:"cid=AFF_202002JN09833",fr:"cid=AFF_202002JN09834",it:"cid=AFF_202002JN09835",en:"cid=AFF_202002JN09836"}[s.data.current]}var b={token:this.token?this.token:void 0,string:JSON.stringify(t),productName:t.productSold.name,promotionName:"",deviceName:"none",emailAddress:h,currentStep:"",currentStepIndex:1,totalSteps:1,version:this.version,language:s.data.current,url:v,channel:d.realChannel||d.channel,agentUser:u.agentLoggedIn?c.data.username:void 0};return e.post("submit_token_data",b,2,!0,window.oldEshopBasePath,"text/plain",!0,!1).then(function(t){t&&!t.errorCode&&t.token&&(o.token=t.token,e[f]=o.token,i.set(g,o.token,!0))}).catch(function(e){return throwSafe(e,"65-id")})}},this.deleteCurrentToken=function(t){if(!this.token||this.token===t)return o.resolve();var n={token:this.token,deleteData:!0};return delete this.token,delete e[f],i.remove(g),e.post("delete_token_data",n,2,!0,window.oldEshopBasePath,"text/plain",!0,!1)},this.init()}]),app.directive("activeOptions",["Popup","CustomerAccount",function(e,t){return{restrict:"E",templateUrl:"/scripts/directives/active-options/dirc_active-options.html",scope:{subscription:"=data",thirds:"=?",onlyCountry:"=?"},link:function(n){n.activeOptionPopup=new e("activeOptionPopup"+n.$id,"active-option-popup.html",{title:"activeOptionPopupTitle",subscription:n.subscription,account:t},{activate:function(e){n.activeOptionPopup.data.activating=!0,e.activate(n.subscription).then(function(e){n.activeOptionPopup.data.activating=!1,e&&n.activeOptionPopup.hide()})},deactivate:function(e){n.activeOptionPopup.data.deactivating=!0,e.deactivate(n.subscription).then(function(e){n.activeOptionPopup.data.deactivating=!1,e&&n.activeOptionPopup.hide()})}}),n.showOptionPopup=function(e){n.activeOptionPopup.data.option=e,
n.activeOptionPopup.show()},n.$on("$destroy",function(){return n.activeOptionPopup.delete()})}}}]),app.directive("accountDeals",["CustomerAccount","State",function(e,t){return{restrict:"E",templateUrl:"/scripts/directives/account-deals/dirc_account-deals.html",scope:{},link:function(n){n.loading=!0,t.checkCustomerLoggedIn().then(function(t){if(n.loading=!1,t){var o=e.getOldestActiveSub(!0);o||(o=e.getOldestActiveSub()),o&&(n.loading=!0,o.getRecommendations().then(function(){n.loading=!1,n.deals=o.recommendations.deals.filter(function(e){return"accountLevel"===e.dealLevel})}))}})}}}]),app.directive("activeOptionsPrepaid",["Popup","CustomerAccount",function(e,t){return{templateUrl:"/scripts/directives/active-options-prepaid/dirc_active-options-prepaid.html",scope:{subscription:"=data",thirds:"=?",roamingOnly:"=?"},link:function(n){n.activeOptionPopup=new e("activeOptionPopupPrepaid"+n.$id,"active-option-popup.html",{title:"activeOptionPopupTitle",subscription:n.subscription,account:t},{activate:function(e){n.activeOptionPopup.data.activating=!0,e.activate(n.subscription).then(function(e){n.activeOptionPopup.data.activating=!1,e&&n.activeOptionPopup.hide()})},deactivate:function(e){n.activeOptionPopup.data.deactivating=!0,e.deactivate(n.subscription).then(function(e){n.activeOptionPopup.data.deactivating=!1,e&&n.activeOptionPopup.hide()})}}),n.showOptionPopup=function(e){n.activeOptionPopup.data.option=e,n.activeOptionPopup.show()},n.$on("$destroy",function(){return n.activeOptionPopup.delete()})}}}]),app.directive("addOptionItemListView",["$filter",function(e){return{templateUrl:"/scripts/directives/add-option-item-list-view/dirc_add-option-item-list-view.html",scope:{options:"=data",prodInfo:"=",pop:"=?"},link:function(t){t.selectOption=function(e){t.removeNoneCompatibleOptions(e)&&(t.prodInfo.options[e.id]=e)},t.removeOption=function(e){return t.allowRemove(e)&&delete t.prodInfo.options[e.id],!0},t.allowRemove=function(e){return!t.prodInfo.includedOptions||(!t.prodInfo.includedOptions[e.id]||!t.prodInfo.includedOptions[e.id].required)},t.showPopup=function(n){t.pop.data.option=n,t.pop.data.title=e("translate")("option_"+n.url+"_title"),t.pop.data.noTitleTranslate=!0,t.pop.show()},t.removeNoneCompatibleOptions=function(e){var n={};n[e.id]=e;for(var o in t.prodInfo.options)if(!t.prodInfo.options[o].compatibleWith(n)){if(!t.allowRemove(t.prodInfo.options[o]))return!1;delete t.prodInfo.options[t.prodInfo.options[o].id]}return!0}}}}]),app.directive("addOptions",["SavingsOptions","Popup",function(e,t){return{restrict:"E",templateUrl:"/scripts/directives/add-options/dirc_add-options.html",scope:{rateplan:"=data",prodInfo:"="},link:function(e){-1!==window.location.href.indexOf("prepaid")?e.categories=["UNLIMITED","COUNTRIES","SURF","SMS"]:e.categories=["UNLIMITED","COUNTRIES","SMS"],e.optionInfoPopup=new t("optionInfoPopup","option-information-popup.html",{})}}}]),app.directive("addRecurringTopup",["Topup","Notifications","$location",function(e,t,n){return{templateUrl:"/scripts/directives/add-recurring-topup/dirc_add-recurring-topup.html",scope:{subscription:"=data"},link:function(o){o.Topup=e,o.daysInMonth=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28],o.data={type:"balance",amount:20,threshold:2,day:1},e.getSavedCreditCards().then(function(){o.data.ccs=e.activeCreditCards(),o.data.cc=Object.first(o.data.ccs),Object.size(o.subscription.balanceTopups)&&(o.data.type="monthly",o.data.balanceTopupDisabled=!0)}),o.addRecurringTopup=function(){if(!o.addingRecurringTopup)return o.addingRecurringTopup=!0,("balance"===o.data.type?o.addBalanceTopup:o.addScheduledTopup)().then(function(e){o.addingRecurringTopup=!1,e&&(t.add("balance"===o.type?"balanceTopupAdded":"scheduledTopupAdded","good"),n.path("/account").search({id:o.subscription.id}))})},o.addScheduledTopup=function(){return e.addScheduledTopup(o.subscription,"MONTHLY",o.data.cc.aliasCC,o.data.amount,o.data.day)},o.addBalanceTopup=function(){return e.addBalanceTopup(o.subscription,o.data.cc.aliasCC,o.data.threshold,o.data.amount)}}}}]),app.directive("addressChecker",["AddressCheck","Keys","$timeout","CommonData","$rootScope","$q","WinOrder","Countries","Analytics","$location","FeatureFlags",function(e,t,n,o,i,r,a,s,c,d,u){return{transclude:!0,templateUrl:"/scripts/directives/address-checker/dirc_address-checker.html",scope:{address:"=",check:"=",editable:"=",showCo:"=?",allowInvalid:"=?",requireCo:"=?",animateAddress:"=?",notRequired:"=?",forceSwissAddress:"=?",forceNeighbouringCountry:"=?",winMode:"=?",switzerlandId:"=?",dontWarnInvalid:"=?",context:"=?",isLineCheck:"=?"},link:function(l,p){function g(e){"13"==e.keyCode&&(0===l.activeFieldId&&l.address.foundStreetNames.length?(e.preventDefault(),l.select(l.address,"streetName","foundStreetNames",l.address.hoverStreetName),focusField("streetNumber"),n()):1===l.activeFieldId&&l.address.foundStreetNumbers.length&&(e.preventDefault(),l.select(l.address,"streetNumber","foundStreetNumbers",l.address.hoverStreetNumber),n()))}l.rs=i,l.countries=s.sortedCountries,l.neighbouringCountries=s.neighbouringCountries,l.allowedCharsRegex=o.regex.name,l.allowedStreetCharsRegex=/^(?=.*[a-zA-ZÀ-ÿ0-9])[a-zA-ZÀ-ÿ0-9\s\-'.]+$/,l.isRequired=!l.notRequired,l.addressCheck=e,l.activeFieldId=null,l.autofill=!0,l.fallbackMode=!1,l.address||(l.address={reallyValidStreetNumber:!1}),l.switzerlandId=l.switzerlandId||"200903041337530279",l.context=l.context?"-".concat(l.context):"",l.outoffocusAnalyticsEvent=function(e){u.get("Ayma-google-tag-manager-changes")&&d.url().includes("contact-informations")&&c.dataLayerPush({event:"gtm visitor interaction",interaction_name:"form interaction",form_name:"contact informations",form_field:e})};var f={};l.setupModelControllers=function(){f.postCode=angular.element(p[0].querySelector("#postCode")).controller("ngModel"),f.streetName=angular.element(p[0].querySelector("#streetName")).controller("ngModel"),f.streetNumber=angular.element(p[0].querySelector("#streetNumber")).controller("ngModel")},l.setupModelControllers(),l.modelController=f,l.$watch("address.streetName",function(t){var n;null!==(n=l.address.autoCompletedStreetName)&&void 0!==n&&n.length&&((null===t||void 0===t?void 0:t.length)>=l.address.autoCompletedStreetName.length?(l.address.streetName=l.address.autoCompletedStreetName,e.checkIfStreetHasNumbers(l.address)):l.address.autoCompletedStreetName=void 0)}),l.$watch("address.streetNumber",function(e){var t;null!==(t=l.address.autoCompletedStreetNumber)&&void 0!==t&&t.length&&((null===e||void 0===e?void 0:e.length)>=l.address.autoCompletedStreetNumber.length?l.address.streetNumber=l.address.autoCompletedStreetNumber:l.address.autoCompletedStreetNumber=void 0)}),l.$watch("address.country",function(){if(l.address.oldCountry!=l.address.country&&(l.address.country==l.switzerlandId&&(l.address.postCode="",l.address.city="",l.address.streetName="",l.address.streetNumber=""),l.address.noHouseNumbers=!1,l.address.foundStreetNames=[],l.address.foundStreetNumbers=[],l.address.validStreetName=void 0,l.address.validStreetNumber=void 0,l.address.validPostCode=void 0,l.address.validCity=void 0,l.address.oldPostCode="",l.address.oldCity="",l.address.oldStreetName="",l.address.oldStreetNumber="",l.address.country==l.switzerlandId))for(var e in f)f[e].$setValidity("validValue",!0);l.address.oldCountry=l.address.country}),l.address.oldCountry=l.address.country,l.address.country&&s.countriesObj[l.address.country]||(l.address.country=l.switzerlandId),l.forceSwissAddress&&(l.address.country=l.switzerlandId),l.setActiveFieldToNull=function(e){n(function(){l.activeFieldId==e&&(l.activeFieldId=null)},100)},l.hoverChange=function(e,o,i,r){t.register(r,function(){null!==l.activeFieldId&&(e[i]&&e[i].length<=1||(e[o]+="40"==r?1:-1,"38"==r&&e[o]<0?e[o]=0:"40"==r&&e[o]>=e[i].length&&(e[o]=e[i].length-1),n()))})},l.changeCo=function(){l.address.co&&(l.address.co.length<3||("c/o "===l.address.co.toLowerCase().substring(0,4)&&(l.address.co=l.address.co.substring(4)),"co "===l.address.co.toLowerCase().substring(0,3)&&(l.address.co=l.address.co.substring(3))))},l.hoverChange(l.address,"hoverStreetName","foundStreetNames","38"),l.hoverChange(l.address,"hoverStreetName","foundStreetNames","40"),l.hoverChange(l.address,"hoverStreetNumber","foundStreetNumbers","38"),l.hoverChange(l.address,"hoverStreetNumber","foundStreetNumbers","40"),document.addEventListener("keydown",g),l.checkAddress=function(e){if(!e||l.address.streetNumber){window.addressFallback&&(l.fallbackMode=!0);var t=l.address;t.streetName||(t.streetNumber="");var n,o;if(!t.houseNumber&&t.streetName&&!e&&!t.dontExtractHouseNumber){var i,a;o=extractCharFromString(t.streetName),n=(null===(i=o)||void 0===i?void 0:i[1])||(null===(a=o)||void 0===a?void 0:a[0]),n&&(t.streetName=t.streetName.replace(n,"").trim())}if(t.country==l.switzerlandId){if(t.confirmCorrectAddress=!1,!l.fallbackMode)return l.addressCheck.check(t,!1,f,l.allowInvalid,l.isLineCheck).then(function(){if(n)return t.dontExtractHouseNumber=!0,t.streetNumber||(t.streetNumber=n),l.activeFieldId=void 0,l.addressCheck.check(t,!1,f,l.allowInvalid,l.isLineCheck)});for(var s in f)f[s].$setValidity("validValue",!0);return r.resolve()}}},window.isTest&&(window.fillFunctions||(window.fillFunctions={}),window.fillFunctions.checkAddress=function(){l.checkAddress(),n(function(){},1e3)}),l.select=function(t,o,i,r,a){a?n(function(){t["block_"+o]||l.select(t,o,i,r)},10):(t["block_"+o]=!0,n(function(){t["block_"+o]=!1},100),e.select(t,o,i,r,a).then(function(){"streetName"==o&&e.checkIfStreetHasNumbers(l.address)}))},l.address.oldPostCode=void 0,l.address.oldCity=void 0,l.address.oldStreetName=void 0,l.address.oldStreetNumber=void 0,l.check&&l.address.country===l.switzerlandId&&l.addressCheck.check(l.address,!0,f,l.allowInvalid,l.isLineCheck).then(function(){l.address.streetName&&l.address.streetName.length>0&&l.addressCheck.checkIfStreetHasNumbers(l.address)}),l.$watch("address",function(e){l.address.country===l.switzerlandId&&e&&l.check&&l.addressCheck.check(l.address,!0,f,l.allowInvalid,l.isLineCheck)}),l.$watchGroup(["address.foundStreetNumbers.length","address.reallyValidStreetNumber"],function(e){0!==e[0]&&!0===e[1]&&null!==l.activeFieldId&&(l.address.reallyValidStreetNumber=!1)});var h=i.$on("enableAddressCheckFallbackMode",function(){if(!l.fallbackMode){l.fallbackMode=!0,l.address.fallbackMode=!0,n(function(){l.address.valid=!0,l.address.reallyValidStreetNumber=!0},1);for(var e in f)f[e].$setValidity("validValue",!0)}});l.$on("$destroy",function(){document.removeEventListener("keydown",g),h()}),l.winMode&&a.getCountries().then(function(e){return l.winCountries=e.data.countries})}}}]),app.directive("addressPreview",["Popup","CustomerAccount","AgentAccount","$timeout",function(e,t,n,o){return{restrict:"E",templateUrl:"/scripts/directives/address-preview/dirc_address-preview.html",scope:{customerData:"=",addressData:"=",allowEdit:"=?",shipSim:"=?",isPostpaid:"=?",editable:"=?",forceSwissAddress:"=?",forceNeighbouringCountry:"=?"},link:function(i){i.data={},i.editDataPopup=new e("editDataPopup","address-preview-popup.html",{title:"editAddressDataPopupTitle",isPostpaid:i.isPostpaid,shipSim:i.shipSim,agent:n,forceSwissAddress:i.forceSwissAddress,forceNeighbouringCountry:i.forceNeighbouringCountry,newAddress:angular.copy(i.addressData)},{hide:function(){o(function(){return i.editDataPopup.data.newAddress=angular.copy(i.addressData)})},submit:function(){if(!i.editDataPopup.data.hideClose){var e={};if(i.editDataPopup.data.newAddress.country==i.addressData.country&&i.editDataPopup.data.newAddress.city==i.addressData.city&&i.editDataPopup.data.newAddress.postCode==i.addressData.postCode&&i.editDataPopup.data.newAddress.streetName==i.addressData.streetName&&i.editDataPopup.data.newAddress.co==i.addressData.co&&i.editDataPopup.data.newAddress.streetNumber==i.addressData.streetNumber||(e.country=i.editDataPopup.data.newAddress.country,e.city=i.editDataPopup.data.newAddress.city,e.postCode=i.editDataPopup.data.newAddress.postCode,e.streetName=i.editDataPopup.data.newAddress.streetName,e.streetNumber=i.editDataPopup.data.newAddress.streetNumber||void 0,e.co=i.editDataPopup.data.newAddress.co||""),Object.size(e)<=1)return i.editDataPopup.hide();i.editDataPopup.data.hideClose=!0,t.accountOwner.updateInfo(e).then(function(e){if(e){for(var n in i.editDataPopup.data.newAddress)i.addressData[n]=i.editDataPopup.data.newAddress[n];t.doRefresh().then(function(){i.editDataPopup.data.hideClose=!1,i.editDataPopup.hide()})}else i.editDataPopup.data.hideClose=!1})}}})}}}]),app.directive("afo",["$rootScope","Storage",function(e,t){return{link:function(n,o,i){var r=i.afo.split(",").map(function(e){return e.trim()});e.activationFeesOffered||(e.activationFeesOffered={}),r.forEach(function(t){return e.activationFeesOffered[t]=!0}),t.set("activationFeesOffered",e.activationFeesOffered,!0)}}}]),app.directive("allProducts",["CommonData","Products","AgentAccount","CustomerAccount","State","$rootScope","FeatureFlags",function(e,t,n,o,i,r,a){return{transclude:!0,templateUrl:"/scripts/directives/all-products/dirc_all-products.html",scope:{linkExtension:"=?",customDisplayOrder:"=?"},link:function(s){var c,d,u,l,p,g,f;if(s.CommonData=e,s.Products=t,s.data={},s.output={},s.rs=r,s.data.selectedMode="",s.showSelectionMode=!0,s.showSelectionMode=!1,s.data.selectedMode="mobile",s.loading=!0,s.hasTVSubscription=o.hasTVSubscription(),s.hfcProduct=t.findProductByName("yallo_home_max_cable"),s.hfcAvailable=null===(c=s.hfcProduct)||void 0===c?void 0:c.allowedInCurrentChannel(),s.fiberProduct=t.findProductByName("yallo_home_max_fiber"),s.fiberAvailable=null===(d=s.fiberProduct)||void 0===d?void 0:d.allowedInCurrentChannel(),s.fourGProduct=t.findProductByName("yallo_home_4g"),s.fourGAvailable=null===(u=s.fourGProduct)||void 0===u?void 0:u.allowedInCurrentChannel(),s.fiveGProduct=t.findProductByName("yallo_home_5g"),s.fiveGAvailable=null===(l=s.fiveGProduct)||void 0===l?void 0:l.allowedInCurrentChannel(),s.fiveGStartProduct=t.findProductByName("yallo_home_5g_start"),s.fiveGStartAvailable=null===(p=s.fiveGStartProduct)||void 0===p?void 0:p.allowedInCurrentChannel(),s.cableSProduct=t.findProductByName("yallo_home_cable_s"),s.cableSProductAvailable=null===(g=s.cableSProduct)||void 0===g?void 0:g.allowedInCurrentChannel(),s.cableMProduct=t.findProductByName("yallo_home_cable_m"),s.cableMProductAvailable=null===(f=s.cableMProduct)||void 0===f?void 0:f.allowedInCurrentChannel(),a.get("rateplanPlus")){var h,m,v,b,w,C,y,D;s.cableStvProduct=t.findProductByName("yallo_home_cable_s_plus_tv"),s.cableStvProductAvailable=null===(h=s.cableStvProduct)||void 0===h?void 0:h.allowedInCurrentChannel(),s.cableMtvProduct=t.findProductByName("yallo_home_cable_m_plus_tv"),s.cableMtvProductAvailable=null===(m=s.cableMtvProduct)||void 0===m?void 0:m.allowedInCurrentChannel(),s.home5GtvProduct=t.findProductByName("yallo_home_5g_plus_tv"),s.home5gtvProductAvailable=null===(v=s.home5GtvProduct)||void 0===v?void 0:v.allowedInCurrentChannel(),s.home5GStarttvProduct=t.findProductByName("yallo_home_5g_start_plus_tv"),s.home5gStarttvProductAvailable=null===(b=s.home5GStarttvProduct)||void 0===b?void 0:b.allowedInCurrentChannel(),s.fiberPlusTvProduct=t.findProductByName("yallo_home_max_fiber_plus_tv"),s.fiberPlusTvProductAvailable=null===(w=s.fiberPlusTvProduct)||void 0===w?void 0:w.allowedInCurrentChannel(),s.homeMaxPlusTvProduct=t.findProductByName("yallo_home_max_cable_plus_tv"),s.homeMaxPlusTvProductAvailable=null===(C=s.homeMaxPlusTvProduct)||void 0===C?void 0:C.allowedInCurrentChannel(),s.homeSuperMaxCableProduct=t.findProductByName("yallo_home_supermax_cable"),s.homeSuperMaxCableProductAvailable=null===(y=s.homeSuperMaxCableProduct)||void 0===y?void 0:y.allowedInCurrentChannel(),s.homeSuperMaxCablePlusTvProduct=t.findProductByName("yallo_home_supermax_cable_plus_tv"),s.homeSuperMaxCablePlusTvProductAvailable=null===(D=s.homeSuperMaxCablePlusTvProduct)||void 0===D?void 0:D.allowedInCurrentChannel()}s.homeProducts=[],s.cableSProductAvailable&&s.homeProducts.push(s.cableSProduct),s.cableMProductAvailable&&s.homeProducts.push(s.cableMProduct),s.hfcAvailable&&s.homeProducts.push(s.hfcProduct),s.fiberAvailable&&s.homeProducts.push(s.fiberProduct),s.fourGAvailable&&s.homeProducts.push(s.fourGProduct),s.fiveGAvailable&&s.homeProducts.push(s.fiveGProduct),s.fiveGStartAvailable&&s.homeProducts.push(s.fiveGStartProduct),s.cableStvProductAvailable&&s.homeProducts.push(s.cableStvProduct),s.cableMtvProductAvailable&&s.homeProducts.push(s.cableMtvProduct),s.home5gtvProductAvailable&&s.homeProducts.push(s.home5GtvProduct),s.home5gStarttvProductAvailable&&s.homeProducts.push(s.home5GStarttvProduct),s.fiberPlusTvProductAvailable&&s.homeProducts.push(s.fiberPlusTvProduct),s.homeMaxPlusTvProductAvailable&&s.homeProducts.push(s.homeMaxPlusTvProduct),s.homeSuperMaxCableProductAvailable&&s.homeProducts.push(s.homeSuperMaxCableProduct),s.homeSuperMaxCablePlusTvProductAvailable&&s.homeProducts.push(s.homeSuperMaxCablePlusTvProduct),s.tvProducts=t.getAvailableProductsForChannel().filter(function(e){return"tv"===e.productType});var S=s.homeProducts.length>0,I=s.tvProducts.length>0;S||I||(s.showSelectionMode=!1,s.data.selectedMode="mobile"),s.$watch("rs.globalLineCheckResults",function(){var e,t,n,o,i,a,c,d,u,l,p,g,f,h,m,v,b,w,C,y;s.homeDisabledProducts={},null!==(e=r.globalLineCheckResults)&&void 0!==e&&null!==(t=e.fiber)&&void 0!==t&&t.available||(s.homeDisabledProducts.yallo_home_max_fiber=!0),null!==(n=r.globalLineCheckResults)&&void 0!==n&&null!==(o=n.hfc)&&void 0!==o&&o.available||(s.homeDisabledProducts.yallo_home_max_cable=!0),null!==(i=r.globalLineCheckResults)&&void 0!==i&&null!==(a=i.hfc)&&void 0!==a&&a.available||(s.homeDisabledProducts.yallo_home_cable_s=!0),null!==(c=r.globalLineCheckResults)&&void 0!==c&&null!==(d=c.hfc)&&void 0!==d&&d.available||(s.homeDisabledProducts.yallo_home_cable_m=!0),null!==(u=r.globalLineCheckResults)&&void 0!==u&&null!==(l=u.hfc)&&void 0!==l&&l.available||(s.homeDisabledProducts.yallo_home_cable_s_plus_tv=!0),null!==(p=r.globalLineCheckResults)&&void 0!==p&&null!==(g=p.hfc)&&void 0!==g&&g.available||(s.homeDisabledProducts.yallo_home_cable_m_plus_tv=!0),null!==(f=r.globalLineCheckResults)&&void 0!==f&&null!==(h=f.fiber)&&void 0!==h&&h.available||(s.homeDisabledProducts.yallo_home_max_fiber_plus_tv=!0),null!==(m=r.globalLineCheckResults)&&void 0!==m&&null!==(v=m.hfc)&&void 0!==v&&v.available||(s.homeDisabledProducts.yallo_home_max_cable_plus_tv=!0),null!==(b=r.globalLineCheckResults)&&void 0!==b&&null!==(w=b.hfc)&&void 0!==w&&w.available||(s.homeDisabledProducts.yallo_home_supermax_cable_plus_tv=!0),null!==(C=r.globalLineCheckResults)&&void 0!==C&&null!==(y=C.hfc)&&void 0!==y&&y.available||(s.homeDisabledProducts.yallo_home_supermax_cable=!0)},!0),i.checkAgentLoggedIn().then(function(e){i.checkCustomerLoggedIn().then(function(){if(s.loading=!1,s.tabData=[{id:"postpaid"},{id:"prepaid"}],s.tabOptions={activeTab:"postpaid"},e){var r,a,c;s.tabData=[],s.lightProductsOnly=o.isLightCustomer;var d=null===(r=n.data)||void 0===r?void 0:null===(a=r.rights)||void 0===a?void 0:a.POSTPAID_SIGNUP;i.customerLoggedIn&&o.creditCheckData.remainingPostpaidSubs<=0&&!s.lightProductsOnly&&(d=!1),d&&s.tabData.push({id:"postpaid"}),n.data.rights.PREPAID_SIGNUP&&s.tabData.push({id:"prepaid"}),d||(s.tabOptions.activeTab="prepaid"),s.lightProducts=[null===(c=t.getAvailableLightProduct())||void 0===c?void 0:c.product]}})}),s.$watch(function(){return Object.size(s.output)},function(){Object.size(s.output)&&s.output.mobile&&s.output.internet&&!s.output.mobile.length&&!s.output.internet.length&&(s.tabOptions.activeTab="prepaid")}),s.onLineCheckDone=function(e){s.fiberLinecheckResults=e}}}}]),app.directive("allRecurringTopups",["Topup","CustomerAccount",function(e,t){return{templateUrl:"/scripts/directives/all-recurring-topups/dirc_all-recurring-topups.html",scope:{creditCardId:"=?"},link:function(n){n.Topup=e,n.account=t,n.noRecurringTopups=!e.getAllRecurringTopups().length}}}]),app.directive("alternativeUser",function(){return{templateUrl:"/scripts/directives/alternative-user/dirc_alternative-user.html",scope:{data:"=",editable:"=",productUrl:"=?"},link:function(e){e.data||(e.data={use:!1})}}}),app.directive("analyticsEvent",["Analytics",function(e){return{scope:{pageName:"=?",pageUrl:"=?",pageType:"=?",fireOnDestroy:"=?"},link:function(t){var n="href"===t.pageUrl?window.location.href:t.pageName;"/error-page/404-error"===t.pageName&&e.event("404-page",n,"visited"),e.fireGaEvent("virtual page view",t.pageName,t.pageType,n,void 0,void 0,!0),t.fireOnDestroy&&t.$on("$destroy",e.replayPreviousGaEvent)}}}]),app.directive("appDate",["$timeout","CommonData","Notifications","$rootScope",function(e,t,n,o){return{restrict:"E",transclude:!0,templateUrl:"/scripts/directives/app-date/dirc_app-date.html",scope:{data:"=",editable:"=",fewestDaysFromNow:"=",mostDaysFromNow:"=",required:"=",forceId:"=?",allowAnyDate:"=?",isWishDate:"=?",autoFixDate:"=?",inline:"=?",customValidationFunction:"=?",autoComplete:"=?"},link:function(i,r){function a(){i.days=[],i.months=[],i.years=[],s=(new Date).addDays(i.fewestDaysFromNow),c=(new Date).addDays(i.mostDaysFromNow),i.allowAnyDate&&(s=s.addDays(-3650),c=new Date);for(var e=s.getFullYear();e<=c.getFullYear();e++)i.years.push(e);i.years.reverse();for(var e=1;e<=12;e++)i.months.push(e);for(var e=1;e<=31;e++)i.days.push(e);i.isWishDate&&i.fixWishDate(),i.correctDate()}i.data||(i.data={});var s,c;i.focus={},i.options={},i.isIOS=isIOS,i.forceId&&(i.$id=i.forceId);var d=r[0].querySelector("input");d.addEventListener("keydown",function(t){9==t.keyCode&&(i.data.year||(t.preventDefault(),i.dateString+=".",e()))});var u=angular.element(d).controller("ngModel");i.$watch("fewestDaysFromNow",function(e){e&&a()}),i.$watch("mostDaysFromNow",function(e){e&&a()}),i.fixWishDate=function(){if(i.data&&i.data.day){for(var e=objToDate(i.data,!0),n=!1,o=0,r=!1;!n;){o++,o>1500&&(n=!0);var a=(new Date).addDays(i.fewestDaysFromNow),s=i.fewestDaysFromNow&&i.autoFixDate&&e<=a;!isWeekDay(e)||dateInList(e,t.holidays)||s?(e=e.addDays(1),r=!0):(n=!0,(e=dateToObj(e,!0))&&(i.data.day=e.day,i.data.month=e.month,i.data.year=e.year))}return r}},i.changeDateString=function(){if(!i.dateString)return void(i.data&&(delete i.data.day,delete i.data.month,delete i.data.year));i.dateString=i.dateString.replace(/[^0-9.]+/,".").trim().replaceAll("..",".");var e=i.dateString?i.dateString.replaceAll("/",".").split("."):[];1===e.length&&e[0].length>2&&(e=[e[0].substring(0,2),e[0].substring(2)]),2===e.length&&e[1].length>2&&(e=[e[0],e[1].substring(0,2),e[1].substring(2)]),e.length>=1&&e[0]&&(i.data.day=1*e[0]),e.length>=2&&e[1]?i.data.month=1*e[1]:i.data.month=void 0,e.length>=3&&e[2]?(i.data.year=1*e[2],i.data.year<100&&(s>new Date(2e3)||i.data.year<=parseInt(((new Date).getFullYear()+"").slice(2,4))?i.data.year=2e3+i.data.year:i.data.year=1900+i.data.year,e[2]=""+i.data.year)):i.data.year=void 0,e.length>=3&&4===e[2].length?i.checkDateValidity(i.data):(i.weekendDay=!1,i.isHoliday=!1,i.notValid=!1)},i.focusMain=function(){o.isDesktop||setTimeout(function(){d.focus&&d.focus()},1)},i.createDateString=function(){var e="";i.data&&(void 0!==i.data.day&&(e+=i.data.day),void 0!==i.data.month&&(e+="."+i.data.month),void 0!==i.data.year&&(e+="."+i.data.year)),i.dateString=e},i.checkDateValidity=function(e){if(e&&(e.day||e.month||e.year)){if(i.days.indexOf(e.day)<0||i.months.indexOf(e.month)<0||i.years.indexOf(e.year)<0)return i.setValidity(!1,"notInRange");var t=objToDate(e,!0);if(i.setValidity(!0,"notInRange"),i.setValidity(!0,"notInRangeTo"),i.setValidity(!0,"notInRangeFrom"),i.editable&&(e.day&&e.month&&e.year?t<s?i.setValidity(!1,"notInRangeFrom"):t>c&&i.setValidity(!1,"notInRangeTo"):(throwSafe("should not happen","16-id"),i.setValidity(!1,"notInRange")),i.customValidationFunction)){i.customValidationFunction(t).forEach(function(e){return i.setValidity(e.valid,e.key)})}}},i.hideHelp=function(){e(function(){for(var e in i.focus)if(i.focus[e])return;i.options.showHelp=!1,i.isWishDate&&i.fixWishDate()&&n.add("wishDateChanged","good"),i.createDateString()},10)},i.setValidity=function(e,t){i.required||!i.data||i.data.day||i.data.month||i.data.year||(e=!0),u.$setValidity(t,e),"notValid"===t&&(i.notValid=!e),"weekendDay"===t&&(i.weekendDay=!e),"isHoliday"===t&&(i.isHoliday=!e)},i.$watch("data",function(){i.correctDate()},!0),i.$watch("editable",function(){i.checkDateValidity(i.data)}),i.correctDate=function(){i.data&&("string"==typeof i.data.day&&(i.data.day*=1),"string"==typeof i.data.month&&(i.data.month*=1),"string"==typeof i.data.year&&(i.data.year*=1),i.data&&i.data.day&&i.data.month&&i.data.year&&i.data.year>999&&i.checkDateValidity(i.data),i.focus[0]||i.createDateString())},a()}}}]),app.directive("appFooter",["$rootScope","$location","CustomerAccount","AgentAccount","Analytics","Storage",function(e,t,n,o,i,r){return{restrict:"E",templateUrl:"/scripts/directives/app-footer/dirc_app-footer.html",link:function(t){t.root=e,t.account=n,t.agent=o,t.newNotifications=function(){var e=n.notifications();for(var t in e)if(e[t].isNew)return!0;return!1},t.interaction=function(e){e&&i.fireGaInteraction("menu interaction",{menu_location:"bottom",menu_item:e})},t.getCurrentSub=function(){return t.currentSub=n.getCurrentSubscription(),t.currentSub}}}}]),app.directive("autoCountrySelector",["State","Language","Countries","$rootScope",function(e,t,n,o){return{templateUrl:"/scripts/directives/auto-country-selector/dirc_auto-country-selector.html",scope:{subsciption:"=subData",showEmptyFirstEntry:"=?",outObj:"=?"},link:function(i){i.Language=t,i.Countries=n,e.returnWhenCommonDataExtrasLoaded().then(function(){i.updateCountries()}),i.$watch("subsciption",function(){i.subsciption&&e.checkCustomerLoggedIn().then(function(e){e&&i.subsciption.getCurrentCountry().then(function(e){e&&(i.selectedCountry="200903041337530279"===e?"":e)})})}),i.$watch("selectedCountry",function(){e.selectedRoamingCountry=i.selectedCountry,i.outObj&&(i.outObj.selectedCountry=i.selectedCountry)}),i.updateCountries=function(){i.countries=n.sortedCountries.filter(function(e){return"200903041337530279"!==e.id})},i.updateCountries(),o.$on("newSortedCountries",function(){return i.updateCountries()})}}}]),app.directive("autofocus",function(){return{restrict:"A",link:function(e,t){var n=-1!==walkThree(t[0]).indexOf("popup");setTimeout(function(){return t[0].focus()},n?300:0),isIOS&&t.removeAttr("autofocus")}}}),app.directive("backButton",["$window","$location","$rootScope","State","Language","CustomerAccount",function(e,t,n,o,i,r){return{restrict:"E",template:'\n      <span class="pointer backbutton" ng-if="!hideBack">\n        <i icon="fontawesome/chevron-left" class="icon-inline"></i>\n        <span translate="signMethodBackButton"></span>\n      </span>\n      <br>\n      <br>\n    ',link:function(a,s,c){s.on("click",function(){if(n.history.length<2){if(c.defaultUrl){var a=c.defaultUrl.split("#");return t.path(a[0]).hash(a[1]||"")}return o.checkAgentLoggedIn().then(function(e){if(e)return t.path("/".concat(i.data.current,"/pos"));o.checkCustomerLoggedIn().then(function(e){t.path("/".concat(i.data.current,"/").concat(e?"account":""))})})}var s=t.url().includes("account/change-subscription/")&&t.url().includes("cantExtendSubscription_812");(c.double||s)&&e.history.back();var d={"/en/account/id-check/verify-id":"/en/account/id-documents","/en/account/id-check/verify-id/document-data":"/en/account/id-check/verify-id"},u=t.url();return d[u]?t.path(d[u]):"/en/account/id-documents"===u?t.path("/account/settings").search({id:r.getCurrentSubscription().id}):void e.history.back()}),a.hideBack=t.search().hideback||n.app||0==e.history.length}}}]),app.directive("bigToggler",["$timeout",function(e){return{transclude:!0,templateUrl:"/scripts/directives/big-toggler/dirc_big-toggler.html",scope:{title:"=togglerData",isToggled:"=",icon:"=togglerIcon",dontTranslateTitle:"="},link:function(t,n,o){t.data={isToggled:t.isToggled},t.toggle=function(){o.onToggle?e(function(){t.$parent.$eval(o.onToggle)}):t.data.isToggled=!t.data.isToggled},t.$watch("isToggled",function(){t.data.isToggled=t.isToggled}),null===t.isToggled&&(t.isToggled=!1)}}}]),app.directive("billSwitcher",["CustomerBills",function(e){return{templateUrl:"/scripts/directives/bill-switcher/dirc_bill-switcher.html",scope:{bill:"=",onChange:"=?"},link:function(t){if(t.date=swissDate(),!t.bill)return console.warn("no bill");e.getBills().then(function(e){t.bills=angular.copy(e),t.bills&&(t.bills.sort(function(e,t){return e.startDate>t.startDate?1:-1}),t.bills=t.bills.slice(-7),t.selectedBillIndex=t.bills.indexOf(t.bills.find(function(e){return e.id===t.bill.id})))}),t.sameMonth=function(e){var t=e.startDate.getMonth()+1,n=e.startDate.getFullYear(),o=e.endDate.getMonth()+1,i=e.endDate.getFullYear();return t===o&&n===i},t.switchBill=function(e){if(t.bills){t.selectedBillIndex+=e;var n=t.bills[t.selectedBillIndex];if(!n)return console.warn("No bill",t.bills,t.selectedBillIndex);t.onChange&&t.onChange(n),t.setPos&&t.setPos(t.selectedBillIndex)}},t.reverseSetPos=function(){return t},t.setMobileSidewaysScrollPos=function(e){if(t.bills){t.selectedBillIndex=e;var n=t.bills[t.selectedBillIndex];if(!n)return console.warn("No bill",t.bills,t.selectedBillIndex);t.onChange&&t.onChange(n)}}}}}]),app.directive("billsGraph",["$rootScope",function(e){return{templateUrl:"/scripts/directives/bills-graph/dirc_bills-graph.html",scope:{months:"="},link:function(t){if(t.months){t.rs=e;var n=t.months.slice(e.isMobile?-6:-12).sort(function(e,t){return e.bill.amount<t.bill.amount?1:-1}),o=n[0]?n[0].bill.amount:0,i=1/0,r=[5,10,25,50,75,100,150,200,500,1e3];r.map(function(e){return o/e}).map(function(e){return Math.abs(e-4)}).forEach(function(e,n){e<i&&(i=e,t.lineSpacing=r[n])});var a=Math.ceil(o/t.lineSpacing)*t.lineSpacing;a<t.lineSpacing&&(a=t.lineSpacing),t.maxVal=a-t.lineSpacing,t.lines=new Array(t.maxVal/t.lineSpacing),t.extraSpacing=o-t.lineSpacing*t.lines.length}}}}]),app.directive("billingSettings",["CustomerAccount","Analytics","Network","CustomerBills","Language","Notifications","$timeout",function(e,t,n,o,i,r,a){return{templateUrl:"/scripts/directives/billing-settings/dirc_billing-settings.html",scope:{},link:function(s){s.language=i,s.account=e,s.billingMethod=s.account.postpaidBillingGroup,s.$watch("account.postpaidBillingGroup.billingMethod",function(e){return s.billingMethod=e}),s.gettingBills=!0,o.getBills().then(function(e){s.bill=e.filter(function(e){return!!e.invoiceNumber})[0],s.gettingBills=!1}),s.tryAndSaveBillingMethod=function(){s.saving||(s.saving=!0,"email"!==s.billingMethod||e.accountOwner.emailValidated&&e.accountOwner.emailAddress?s.updateBillingMethod():s.showEmailManagementPopup())},s.updateBillingMethod=function(){var o={billingGroupId:e.postpaidBillingGroup.id,billingMethod:s.billingMethod};"email"!==s.billingMethod||e.accountOwner.emailAddress?(t.event("changeBillingGroupSettings","start"),t.dataLayerPush({event:"gtm visitor interaction",interaction_name:"settings toggle control",settings_section:"billing settings",settings_control_name:"billingmethod",settings_control_action:"paper"===s.billingMethod?"on":"off"}),n.post("changeBillingGroupSettings",o).then(function(e){s.saving=!1,e?(t.event("changeBillingGroupSettings","success"),s.account.postpaidBillingGroup.billingMethod=s.billingMethod):s.billingMethod=s.account.postpaidBillingGroup.billingMethod,a()}).catch(function(e){s.saving=!1,Notification.add("error",fail)})):(s.saving=!1,s.billingMethod=s.account.postpaidBillingGroup.billingMethod,r.add("noEmailField","bad"))},s.showEmailManagementPopup=function(){var t=e.emailManagementPopup;t.data.customerAccount=e,t.data.onDone=function(){t.hide()},t.functions.onHide=function(){s.updateBillingMethod()},t.show()},s.settingsDisabled=function(){
return!!s.saving||(!!e.onHold.active||("ebpp"===s.billingMethod||!e.isAccountOwner()))}}}}]),app.directive("bindHtmlCompile",["$compile",function(e){return{restrict:"A",link:function(t,n,o){t.$watch(function(){return t.$eval(o.bindHtmlCompile)},function(o){n.html(o&&o.toString()),e(n.contents())(t)})}}}]),app.directive("bundle",["$filter","CommonData",function(e,t){return{templateUrl:"/scripts/directives/bundle/dirc_bundle.html",scope:{bundle:"=data",sub:"=?"},link:function(n){n.isTranslated=function(){var t="bundle_"+urlify(n.bundle.bundleName)+"_text";return n.translated=t!==e("translate")(t),n.translated},n.showBundleBar=function(){return!!t.extras&&!(t.extras.hiddenBundlesBar&&t.extras.hiddenBundlesBar.indexOf(urlify(n.bundle.bundleName))>-1)}}}}]),app.directive("cRoute",["Language","$rootScope",function(e,t){return{restrict:"A",replace:!0,transclude:!0,template:"<a disabled ng-transclude></a>",link:function(n,o,i){function r(){if(i.dontLink&&"false"!==i.dontLink)i.$set("href","#");else{if("#"===i.cRoute[0])return i.$set("href",i.cRoute);"www"===i.cRoute.substring(0,3)&&(i.cRoute="https://"+i.cRoute);var t="true"===i.noLang||"http"===i.cRoute.substring(0,4),n=t?"":e.data.current;i.$set("href",n+i.cRoute)}}r(),n.checker=t.$on("langChangeEnd",r),i.$observe("cRoute",r),i.$observe("dontLink",r),n.$on("$destroy",n.checker)}}}]),app.directive("callback",["Popup","CustomerAccount",function(e,t){return{transclude:!0,template:'<div ng-transclude ng-click="showCallBackForm($event)"></div>',scope:{},link:function(n,o,i){n.pop=t.callbackPopup||new e("callbackFormPopup"+n.$id,"callback-form-popup.html",{title:"callbackFormTitle"}),n.pop.data.context=i.context,n.showCallBackForm=function(e){n.pop.show(),e.preventDefault(),e.stopPropagation()}}}}]),app.directive("callbackForm",["Network","Language","Notifications","CustomerAccount",function(e,t,n,o){return{templateUrl:"/scripts/directives/callback-form/dirc_callback-form.html",scope:{cb:"&?",context:"<?"},link:function(i){var r,a,s,c;i.context=i.context||t.getPathWithoutLanguage(),i.submit=function(o,r){var a={contactNumber:o,brand:brand.capitalizeFirstLetter(),language:t.data.current.toUpperCase(),context:i.context,contactName:r};i.loading=!0,e.post("submit_call_back_request",a,2,!0,window.oldEshopBasePath,"text/plain",!0,!1).then(function(){return n.add("callbackFormSuccess","good")}).catch(function(){return n.add("error","bad")}).then(function(){i.loading=!1,i.cb&&i.cb()})},i.data={},i.data.customerName=[null===o||void 0===o?void 0:null===(r=o.currentUser)||void 0===r?void 0:r.firstName,null===o||void 0===o?void 0:null===(a=o.currentUser)||void 0===a?void 0:a.lastName].filter(function(e){return e}).join(" "),i.data.phoneNumber=null===o||void 0===o?void 0:null===(s=o.currentUser)||void 0===s?void 0:null===(c=s.subscription)||void 0===c?void 0:c.msisdn}}}]),app.directive("ccBillPayment",["CustomerBills","CustomerAccount",function(e,t){return{templateUrl:"/scripts/directives/cc-bill-payment/dirc_cc-bill-payment.html",scope:{paymentAmount:"="},link:function(n){n.startPayment=function(){var o="all"===n.paymentAmount?e.totalOpenAmount:e.totalDueAmount;o&&(n.loading=!0,e.startCCPayment(o,t.postpaidBillingGroup.id).then(function(){n.loading=!1}))}}}}]),app.directive("channelList",["CommonData","$rootScope","State",function(e,t,n){return{templateUrl:"/scripts/directives/channel-list/dirc_channel-list.html",scope:{channels:"=",showAllChannels:"=?",outputData:"=?"},link:function(o){o.CommonData=e,o.lang=t.lang,o.loading=!0,n.returnWhenCommonDataExtrasLoaded().then(function(){o.loading=!1,o.outputData&&(o.outputData.filteredChannels=o.channels.filter(function(e){return o.hideChannel(e)}))}),o.hideChannel=function(t){return"xx"==t||!o.showAllChannels&&(!e.extras||(!("mw"!=t||!o.channels.includes("mz"))||e.extras.hiddenChannels.indexOf(t)>-1))}}}}]),app.directive("chat",["Chat","CustomerAccount",function(e,t){return{templateUrl:"/scripts/directives/chat/dirc_chat.html",scope:{},link:function(n){n.chat=e,n.name=t.currentUser&&t.currentUser.firstName||"",n.disabled=e.isCheckingAnyAgentAvailability}}}]),app.directive("chatInvite",["Chat","Storage","Popups","State","$rootScope","ZendeskChat","Analytics","$location",function(e,t,n,o,i,r,a,s){return{templateUrl:"/scripts/directives/chat-invite/dirc_chat-invite.html",scope:{},link:function(s){var c="hideChatInvite"+(i&&i.checkoutMode&&i.checkoutMode.active?"-checkout":"-site"),d=.05;window.isTest&&(d=0),s.hidden=t.get(c,d,!0)||o.agentLoggedIn,s.rs=i;var u=["unsubscribe-email","signing","account","account-porting-date","sign","idv","idp","idv-scan","idp-scan","idp-success","idv-success","new-postpaid"];s.show=function(){return!i.currentPage.includes("new-postpaid")&&(!i.isPos&&-1===u.indexOf(i.currentPage)&&!window.closeTelesales&&!n.activePopups().length&&!s.hidden&&!i.mobileMenuToggled&&!i.showGdpr&&e.showChatInvite&&!e.activeChat&&!r.isShown)},s.startChat=function(){var t="".concat(brand,"_sales");a.event("chat-invite","accepted-invite-to-chat-click",t),s.loading=!0,e.startChat(t).then(function(){s.loading=!1,s.close()},!0,!0)},s.close=function(n){s.closing=!0,setTimeout(function(o){s.closing=!1,e.showChatInvite=!1,n||(s.hidden=!0,t.set(c,!0,!0)),s.$evalAsync()},450)}}}}]),app.directive("checkEmail",["Network","$timeout","CommonData",function(e,t,n){return{require:"ngModel",link:function(o,i,r,a){function s(i){if(!r.ngDisabled||o.editable||o.emailOnlyEditable||"true"===r.editable){if(o.data&&(o.data.emailValid=!1),!i)return a.$setValidity("validEmailAddress",!0);if(!a.$error.pattern&&!a.$error.required){if(i=i.toLowerCase(),n.emailBlackList.find(function(e){return i.indexOf(e)>-1}))return a.$setValidity("validEmailAddress",!1);a.$setValidity("validEmailAddress",!0),t(),e.post("checkEmailValidity",{emailAddress:i},1,!0).then(function(e){e.errorCode&&"630"===e.errorCode?(a.$setValidity("validEmailAddress",!1),o.data&&(o.data.emailValid=!1)):(a.$setValidity("validEmailAddress",!0),o.data&&(o.data.emailValid=!0))})}}}var c;o.data&&(o.data.emailValid=!1),o.$watch(r.ngModel,function(){t.cancel(c),o.data&&(o.data.emailValid=!1),c=t(function(){s(a.$modelValue)},500)})}}}]),app.directive("chatInviteRetention",["Chat","Storage","Popups","State","$rootScope","ZendeskChat","Analytics",function(e,t,n,o,i,r,a){return{templateUrl:"/scripts/directives/chat-invite-retention/dirc_chat-invite-retention.html",scope:{},link:function(s){s.chat=e;var c="hideChatInvite-retention",d=.05;window.isTest&&(d=0),s.hidden=t.get(c,d,!0),s.rs=i,s.show=function(){return!i.isPos&&!o.agentLoggedIn&&!window.closeTelesales&&!n.activePopups().length&&!s.hidden&&!i.mobileMenuToggled&&!i.showGdpr&&e.showChatInvite&&!e.activeChat&&!r.isShown},s.startChat=function(){var t="".concat(brand,"_retention");a.event("chat-invite-retention","accepted-invite-to-chat-click",t),s.loading=!0,e.startChat(t).then(function(){s.loading=!1,s.close()},!0,!0)},s.close=function(n){s.closing=!0,setTimeout(function(){s.closing=!1,e.showChatInvite=!1,n||(s.hidden=!0,t.set(c,!0,!0)),s.$evalAsync()},450)}}}}]),app.directive("checkIccid",["Network","Checkout",function(e,t){return{require:"ngModel",link:function(n,o,i,r){n.$watch(i.ngModel,function(){if("true"===i.dontCheck)return console.warn("Not checking iccid");var o=r.$modelValue;t.orderData.config?n.subscriptionDetails=Object.first(t.orderData.config.products).subscriptionDetails:n.subscriptionDetails={},r.$setValidity("validIccid",iccidCheckSum(o)),o&&iccidCheckSum(o)&&(n.checkingIccid=!0,n.subscriptionDetails.busy=!0,e.post("validateIccid",{iccid:o,productId:i.productId}).then(function(e){n.subscriptionDetails.busy=!1,e&&n.iccidResult&&(n.iccidResult.data=e),n.checkingIccid=!1,o===r.$modelValue&&r&&r.$setValidity("realIccid",!!e)}))})}}}]),app.directive("checkImei",function(){return{require:"ngModel",link:function(e,t,n,o){e.$watch(n.ngModel,function(){var e=o.$modelValue;e&&"111111"==e.substring(0,6)?o.$setValidity("validImei",!0):o.$setValidity("validImei",imeiCheckSum(o.$modelValue))})}}}),app.directive("checkMsisdn",["Network",function(e){return{require:"ngModel",link:function(t,n,o,i){t.$watch(o.ngModel,function(){var n=i.$modelValue;if(n&&10===n.length||i.$setValidity("msisdnMatchesIccid",!0),n){var r={msisdn:n,iccid:o.iccid};t.checkingMsisdn=!0,e.post("getBundledSimInfo",r).then(function(e){t.checkingMsisdn=!1,n===i.$modelValue&&(e&&t.msisdnResult&&(t.msisdnResult.data=n),i&&i.$setValidity("msisdnMatchesIccid",!!e))})}})}}}]),app.directive("checkoutOrderOverview",["Checkout","$rootScope","AgentAccount","$routeParams","State",function(e,t,n,o,i){return{templateUrl:"/scripts/directives/checkout-order-overview/dirc_checkout-order-overview.html",scope:{prodInfo:"=",hideMsisdn:"=?",notEditable:"=?"},link:function(r){r.agent=n,r.loginType=o.logintype,r.state=i,r.checkout=e,e.orderData.config&&(r.extension=!!e.orderData.config.subscription);var a=t.$on("pricingInfo",function(e,t){r.prices=t});if(r.rs=t,r.config=e.orderData.config,r.config){var s=Object.first(r.config.products);r.hideDataForHFC=s.config.hasTag("HFC"),null!==s&&void 0!==s&&s.config&&s.config.hasTag("noMsisdnSelection")&&(r.hideMsisdn=!0)}r.$on("$destroy",function(){a()})}}}]),app.directive("checkoutPageFooter",["Checkout","$rootScope","$routeParams",function(e,t,n){return{template:'<div ng-include="getTemplate()"></div>',scope:{orderData:"=",prodInfo:"=",extension:"=",showProductInfo:"=?",hideButton:"=?",disableButton:"=?",loading:"=?",buttonText:"=?",click:"=?",hidePricing:"=?"},link:function(o){o.rs=t,o.pricingInfo={},o.lang=t.lang,o.checkout=e,o.showProductInfo||(o.showProductInfo=function(){return!0}),o.buttonText||(o.buttonText="continueToCheckoutButton"),o.isSelfRegistration="self-register"===n.logintype,o.getTemplate=function(){return o.orderData.config.subscription||t.isMobile?"/scripts/directives/checkout-page-footer/dirc_checkout-page-footer-simple.html":"/scripts/directives/checkout-page-footer/dirc_checkout-page-footer.html"}}}}]),app.directive("checkoutSteps",["CheckoutSteps","Checkout","CustomerAccount","AgentAccount","$routeParams","State","$rootScope",function(e,t,n,o,i,r,a){return{restrict:"E",templateUrl:"/scripts/directives/checkout-steps/dirc_checkout-steps.html",scope:{allowChange:"="},link:function(s){s.agent=o,s.account=n,s.rs=a,s.data={},s.checkout=t,s.CheckoutSteps=e,s.selectedStep=e.getCurrentStepIndex(!0),s.extension="extend-postpaid"==i.ordertype||"change-postpaid"==i.ordertype||"add-promo"==i.ordertype,s.state=r,s.orderData=t.orderData,s.prodInfo=Object.first(s.orderData.config.products),s.showBasketDetails=a.isMobile,s.hideSteps=function(e){if(!e)return!1;var n=s.prodInfo.subscriptionDetails&&"porting"===s.prodInfo.subscriptionDetails.subscriptionType,o=n&&s.prodInfo.subscriptionDetails.portingOwnerIsSameUser;s.hideOverviewStep=!r.agentLoggedIn&&t.orderData.accessCodeData&&t.orderData.accessCodeData.poaSignRequired&&o,s.hideMsisdnStep=!!s.prodInfo.product.hasTag("noMsisdnSelection");var i=e.length;return s.hideMsisdnStep&&-1!==e.indexOf("phone-number")&&(i-=1),1===i||!!t.orderData.singlePageCheckoutMode},s.getSteps=function(){return e.getSteps(!0).filter(function(e){return("phone-number"!==e||!s.prodInfo.product.hasTag("noMsisdnSelection"))&&(("phone-number"!==e||!s.hideMsisdnStep)&&("extend-data"!==e&&("overview"!==e||!s.hideOverviewStep)))})},s.notSamePerson=function(){n.logout()}}}}]),app.directive("a",["smoothScroll","$rootScope","$location","Popups","Analytics",function(e,t,n,o,i){return{restrict:"E",link:function(r,a){a[0].hasAttribute("data-linked")||(a[0].setAttribute("data-linked","true"),a.on("click",function(r){var s=a[0],c=s.attributes.href?s.attributes.href.value:"";if(!c)return void r.preventDefault();if(-1!==c.indexOf("tel:"))return allowNavigateAway(),r.stopPropagation(),void i.event("tel","click-tel-link",c.split("tel:")[1]);var d=s.attributes.externalapp&&s.attributes.externalapp.value&&t.app,u=s.attributes.target&&"_blank"===s.attributes.target.value,l=d||c&&-1!==c.indexOf("http"),p=-1!==c.substring(c.lastIndexOf("/")+1).indexOf(".");t.app&&(p||l)&&window.cordova&&window.cordova.InAppBrowser&&(r.preventDefault(),r.stopPropagation(),allowNavigateAway(),window.cordova.InAppBrowser.open(c,"_system"));var g=s.hash.substr(1),f=a.attr("c-route")?window.location.pathname.slice(3):window.location.pathname;f=""===f?"/":f;var h=f===s.pathname.slice(3)||f===s.pathname||c.startsWith("#"),m=document.querySelector(".popup"),v=searchStringToObject(s.search);if(m&&s.pathname&&!p&&(l||(r.preventDefault(),setTimeout(function(){return n.path(s.pathname).hash(g||"").search(v)},301)),!u)){var b=o.activePopups(),w=b.pop();w&&w.hide()}if(g&&h){r.preventDefault();var C=document.getElementById(g);C&&e(C,{offset:siteHeaderHeight()})}}))}}}]),app.directive("circleGraph",function(){return{transclude:!0,template:'<div class="circle {{circleColor}}" ng-class="{\'unlimited\': colorData.isUnlimited && !colorData.isThrottled}">\n      <svg height="20" width="20" viewBox="0 0 20 20" ng-if="!calc()">\n        <circle r="9.75" cx="10" cy="10" fill="#eeeeee" />\n        <circle r="4.75" cx="10" cy="10" fill="transparent" ng-style="{\'stroke-dashoffset\': showAnimation ? (percentToShow + \'px\') : 0}"\n          stroke="{{colorMap[circleColor]}}"\n          stroke-width="10"\n          stroke-dasharray="{{percentToShow}} 31.4"\n          transform="rotate(-90) translate(-20)" />\n        <circle ng-attr-r="{{bigLine ? 8.5 : 9}}" cx="10" cy="10" fill="#fafafa" />\n      </svg>\n    <div class="circle-content" ng-transclude></div></div>',scope:{percent:"=",colorData:"=?",smallCircle:"=?",animateCircle:"=?"},link:function(e,t){e.showAnimation=e.animateCircle,(isIE||isEdge)&&(e.showAnimation=!1),e.colorMap={green:"#0094f6",orange:"#fab400",red:"#b91866"},e.$watch("percent",function(){e.percent>95?e.circleColor="red":e.percent>75?e.circleColor="orange":e.circleColor="green",e.colorData&&(e.colorData.isUnlimited?e.circleColor=e.colorData.isThrottled?"red":"green":e.colorData.remaining||(e.circleColor=e.colorData.initial?"red":"orange"),e.colorData.color=e.circleColor),e.percentToShow=e.percent,e.colorData&&e.colorData.isUnlimited&&(e.percentToShow=100),isNaN(e.percentToShow)&&(e.percentToShow=0),e.percentToShow=31.4*e.percentToShow/100}),e.calc=function(){var n=t[0].getBoundingClientRect(),o=n.width;e.bigLine=o<120,e.lastBigLine=e.bigLine},e.calc()}}}),app.directive("collapsibleSection",function(){return{restrict:"E",transclude:!0,templateUrl:"/scripts/directives/collapsible-section/dirc_collapsible-section.html",scope:{title:"@"},link:function(e){e.showDetails=!1,e.toggle=function(){e.showDetails=!e.showDetails}}}}),app.directive("productConfigurator",["AgentAccount","Checkout","CustomerAccount","$location","Products","$rootScope","Notifications","Promotions","$timeout","State","CommonData",function(e,t,n,o,i,r,a,s,c,d,u){return{templateUrl:"/scripts/directives/configurator/dirc_configurator.html",scope:{prodInfo:"=",hideLink:"=",options:"=",theConfig:"=config",extension:"=?",editable:"=?",notVisible:"=?"},link:function(l){if(l.$watch("tabOptions.activeTab",function(){l.tabOptions.visitedDeviceTab||(l.tabOptions.visitedDeviceTab="devices"==l.tabOptions.activeTab)}),l.state=d,l.account=n,l.agent=e,l.tabOptions={},l.options={},l.options.hideDevices=!!l.prodInfo.device,l.deviceTabOptions={},l.product=l.prodInfo.product,l.subscriptionDetails=l.prodInfo.subscriptionDetails,l.Checkout=t,l.theConfig.tabs=l.tabOptions,l.hideConfiguration=!!o.search().hideConfiguration,l.availableDevices=[],l.addDeviceMode=!!o.search().addDeviceMode,l.hideTitleForObChannel="ob"===u.realChannel,!l.prodInfo.ignoreDefaultPromotion&&!l.prodInfo.promotion){var p=l.product.getValidPromotions(l.theConfig.subscription,!0);for(var g in p){var f=null;o.search().ll&&(f=l.prodInfo.config.lockinLength);var h=l.product.findConfigsFromOptions(f,l.prodInfo.device,p[g],l.theConfig.subscription,!0);if(h.length){l.prodInfo.config=h[0],l.prodInfo.promotion=p[g];break}}}l.showDeviceTab=function(){return!(!d.agentLoggedIn||!e.data.rights.DEVICE_OPTIONS)||!(d.agentLoggedIn||!Object.size(l.prodInfo.product.devices))},l.showMsisdnSelectionTab=function(){return!(l.theConfig.preToPostSubscription&&!d.agentLoggedIn)&&("SUB"==l.prodInfo.config.category&&!l.theConfig.subscription&&!l.prodInfo.config.hasTag("noMsisdnSelection"))},l.tabOptions.deviceTabEnabled=l.showDeviceTab(),l.showOptionsTab=function(){return"prepaid"==l.prodInfo.config.type},l.tabs=[{title:"msisdnSelection",key:"msisdnSelection",active:l.showMsisdnSelectionTab()},{title:"subscriptionInfo",key:"subscriptionInfo",active:!!l.theConfig.subscription||!!l.theConfig.preToPostSubscription},{title:"lockinLength",key:"lockinLength",active:!l.extension&&l.product.allowLockinLengthSelection()},{title:"devices",key:"devices",active:l.showDeviceTab()},{title:l.extension?"add_promotions":"promotions",key:"promotions",active:!!Object.size(l.prodInfo.product.getValidPromotions(l.theConfig.subscription,!0))},{title:l.extension?"add_options":"options",key:"options",active:l.showOptionsTab()}],l.getAvailableDevices=function(){l.availableDevices=l.prodInfo.config.getValidDevices(l.prodInfo.promotion,l.theConfig.subscription)},l.devicesAvailable=function(){return Object.size(l.availableDevices)},l.notCorrect=function(){l.theConfig.correct=!1},l.$watch("prodInfo.promotion",l.notCorrect),l.$watch("prodInfo.device",l.notCorrect),l.$watch("prodInfo.config",l.notCorrect),l.$watch("prodInfo.options",l.notCorrect),l.$watch("prodInfo.subscriptionDetails",l.notCorrect,!0),l.$watch("tabOptions.activeTab",function(){l.tabOptions.visitedDeviceTab||(l.tabOptions.visitedDeviceTab="devices"==l.tabOptions.activeTab)}),l.updateUrl=function(){l.applyingUpdate||(l.applyingUpdate=!0,c(function(){l.applyingUpdate=!1,l.updateUrlForReal()},20))},l.updateUrlForReal=function(){var e=o.search(),t={};delete e.p,delete e.promotions,delete e.devices,delete e.ll,delete e.products;for(var n in e)""!==e[n]&&(t[n]=e[n]);l.prodInfo.promotion&&(t.promotions=l.prodInfo.promotion.code),l.prodInfo.device&&(t.devices=l.prodInfo.device.id),t.ll=l.prodInfo.config.lockinLength,l.oldSearch&&JSON.stringify(t)!==JSON.stringify(l.oldSearch)&&o.search(t).replace(),l.oldSearch=angular.copy(t)},l.$on("$routeUpdate",function(){var e=o.search();if((e.devices?i.data.devices[e.devices]:null)!=l.prodInfo.device)if(e.devices){var t=i.data.devices[e.devices];t&&l.selectDevice(t)}else l.selectDevice(null);var n=void 0!==e.ll?1*e.ll:null,r=e.promotions?s.findPromotionByCode(e.promotions):null,a=l.prodInfo.product.findConfigsFromOptions(n,l.prodInfo.device,r,l.theConfig.subscription,!0);a.length&&(r!=l.prodInfo.promotion&&l.selectPromotion(r),a[0]!=l.prodInfo.config&&l.selectConfig(a[0]),l.autoSelectBox())}),l.selectConfig=function(e){if(l.prodInfo.config=e,l.getAvailableDevices(),e.needsDevice()){var t=e.neededToApply();t&&l.selectDevice(t)}l.updateUrl()},l.selectDevice=function(e){var t=l.prodInfo.device&&l.prodInfo.device.id,n=t!==(e&&e.id);e||r.$emit("removedDevice"),e&&(n&&t&&r.$emit("removedDevice"),l.prodInfo.device=e,i.getDevicePrice(e,l.prodInfo.config,l.extension).then(function(t){e.deviceOption=t,n&&r.$emit("pickedDevice")})),l.prodInfo.device=e,l.getAvailableDevices(),l.updateUrl()},l.selectPromotion=function(e){l.prodInfo.promotion=e,l.getAvailableDevices(),l.updateUrl()},l.removeProduct=function(e){delete l.theConfig.products[e.url]};var m=r.$on("shipSimChange",function(e){e&&l.prodInfo.device&&(l.selectDevice(null),a.add("deviceRemovedShipSimNotification","good"))});l.$on("$destroy",function(){m()}),l.getAvailableDevices(),d.customerLoggedIn&&l.theConfig.preToPostSubscription&&(l.subscriptionDetails.subscriptionType="prePost",l.subscriptionDetails.prePost={msisdn:l.theConfig.preToPostSubscription.msisdn},l.subscriptionDetails.msisdn=l.subscriptionDetails.prePost.msisdn)}}}]),app.directive("configureBoxes",["$timeout","smoothScroll","Popup","Products","AgentAccount","$rootScope","Checkout","State",function(e,t,n,o,i,r,a,s){return{templateUrl:"/scripts/directives/configure-boxes/dirc_configure-boxes.html",link:function(o){o.boxes=[],o.rs=r,o.autoSelectBox=function(){for(var e in o.boxes)if(o.boxes[e].config==o.prodInfo.config&&o.boxes[e].promotion==o.prodInfo.promotion){o.selectedBox=o.boxes[e];break}if(!o.selectedBox)for(var e in o.boxes)if(o.boxes[e].config==o.prodInfo.config){o.selectedBox=o.boxes[e],o.addDeviceMode&&(o.selectedBox.promotion=void 0);break}o.selectedBox||(o.selectedBox=o.boxes[0]),o.selectBox(o.selectedBox,!0)},o.promotionPopup=new n("promotionPopup"+o.$id,"promotion-popup.html",{title:"promotionPopupTitle",promotion:{},prodInfo:o.prodInfo},{select:function(){o.promotionPopup.data.promotion!=o.prodInfo.promotion||o.promotionPopup.data.config!=o.prodInfo.config?(o.selectPromotion(o.promotionPopup.data.promotion),o.selectConfig(o.promotionPopup.data.config)):o.selectPromotion(null),o.promotionPopup.hide()}}),o.showPromotionPopup=function(e){var t=o.promotionPopup.data;t.promotion=e,t.configs=o.prodInfo.product.findConfigsFromOptions(null,o.prodInfo.device,e,o.theConfig.subscription,!0),t.configs.length?t.warning=!1:(t.warning=!0,t.configs=o.prodInfo.product.findConfigsFromOptions(null,null,e,o.theConfig.subscription,!0)),e==o.prodInfo.promotion&&t.configs.indexOf(o.prodInfo.config)>-1?t.config=o.prodInfo.config:t.config=t.configs[0],o.promotionPopup.show()},o.setupBoxes=function(){o.boxes.length=0;for(var e in o.prodInfo.product.promotions){var t=o.prodInfo.product.promotions[e],n=o.prodInfo.product.findConfigsFromOptions(null,null,t,o.theConfig.subscription,!0);if("cs"===r.rs.agent.data.realChannel&&(n=Object.keys(n).map(function(e){if(0===n[e].lockinLength&&!n[e].isHomeProduct)return n[e]}).filter(function(e){return void 0!==e})),n.length)for(var c in n){var d={promotion:t,config:n[c],allowDevices:!!Object.size(n[c].getValidDevices(t,o.theConfig.subscription))};o.boxes.push(d)}}var n=o.prodInfo.product.getValidConfigs(o.extension);"cs"===r.rs.agent.data.realChannel&&(n=Object.keys(n).map(function(e){if(0===n[e].lockinLength&&!n[e].isHomeProduct)return n[e]}).filter(function(e){return void 0!==e}));for(var e in n){var u=n[e],l={promotion:null,config:u,allowDevices:!!Object.size(u.getValidDevices(null,o.theConfig.subscription))};o.boxes.length||o.boxes.push(l);for(var c in o.boxes){var p=o.boxes.filter(function(e){return e.config==u});if(p.length&&(!o.prodInfo.ignoreDefaultPromotion||p.find(function(e){return e.promotion===o.prodInfo.promotion}))){if(p.find(function(e){return e.allowDevices}))continue;if(!l.allowDevices)continue}o.boxes.push(l);break}}if(o.theConfig.subscription)for(var e=0;e<o.boxes.length;e++)o.theConfig.subscription.canExtend(o.boxes[e].config)||(o.boxes.splice(e,1),e--);var g=999;for(var e in o.boxes)o.boxes[e].config.lockinLength<g&&(g=o.boxes[e].config.lockinLength);for(var e=0;e<o.boxes.length;e++){var f=o.boxes[e];if(!o.boxes.find(function(e){return e.config.lockinLength==f.config.lockinLength&&e.promotion&&e.promotion.nonDefault&&f.promotion&&!f.promotion.nonDefault})){if(f.promotion)continue;if(o.boxes.find(function(e){return e.config.recurringCost!=f.config.recurringCost}))continue;if(f.allowDevices&&!o.boxes.find(function(e){return e!=f&&e.allowDevices}))continue;if(f.config.lockinLength==g)continue;if(!o.boxes.find(function(e){return e.config.lockinLength<f.config.lockinLength}))continue}f.promotion&&f.promotion===o.prodInfo.promotion||(!f.promotion&&o.prodInfo.ignoreDefaultPromotion||(o.boxes.splice(e,1),e--))}var h=59;void 0!==window.eshopPostpaidActivationFee&&(h=window.eshopPostpaidActivationFee);var m,v=_createForOfIteratorHelper(o.boxes);try{for(v.s();!(m=v.n()).done;){var b,f=m.value;if(!a.orderData.config)return;if(!Object.first(a.orderData.config.products))return;f.upfrontCost=s.agentLoggedIn&&!i.data.rights.FORCE_SHIPMENT?40:h,f.recurringCost=f.config.recurringCost,f.waiveActivationFee=!(null===(b=f.promotion)||void 0===b||!b.waiveActivationFee),f.recurringDiscount=f.promotion?f.promotion.recurringDiscount:0,f.finalUpfrontCost=f.waiveActivationFee?0:f.upfrontCost,f.finalRecurringCost=f.recurringCost-f.recurringDiscount}}catch(e){v.e(e)}finally{v.f()}},o.selectBox=function(n,i){o.selectConfig&&(o.selectedBox=n,o.selectConfig(n.config),o.selectPromotion(n.promotion),o.prodInfo.device&&!n.config.matchesOptions(null,o.prodInfo.device,n.promotion,o.theConfig.subscription)&&o.selectDevice(null),!i&&Object.size(o.prodInfo.config.getValidDevices(o.prodInfo.promotion,o.theConfig.subscription))&&e(function(){var e=document.getElementById("configure-devices");e&&t(e,{offset:100})},1),r.$emit("selectBox"))},o.switchToConfigWithDevices=function(){var e,t=o.boxes.sort(function(e,t){return e.config.lockinLength>t.config.lockinLength?1:-1}),n=_createForOfIteratorHelper(t);try{for(n.s();!(e=n.n()).done;){var i=e.value;if(i.allowDevices){o.selectBox(i);break}}}catch(e){n.e(e)}finally{n.f()}},o.refreshBoxes=function(){o.setupBoxes(),o.autoSelectBox()},o.anyDevicesAvailable=function(){return!!o.boxes.find(function(e){return 1==e.allowDevices})},r.$on("appliedNewPromo",o.refreshBoxes),r.$on("shipSimChange",o.refreshBoxes),o.$on("$destroy",function(){return o.promotionPopup.delete()}),o.refreshBoxes()}}}]),app.directive("configureDevices",["Analytics","AgentAccount","CustomerAccount","Popup","Products","Checkout","$location","State","ErrorReporting","CommonData",function(e,t,n,o,i,r,a,s,c,d){return{templateUrl:"/scripts/directives/configure-devices/dirc_configure-devices.html",link:function(u){var l;if(u.products=i,u.prodInfo.showOnlyHighlightedDevices=!(null===(l=u.prodInfo)||void 0===l||!l.highlightedDevices.length),u.deviceGroups=i.data.deviceGroups.filter(function(e){return e.variations.find(function(e){return u.product.devices[e.id]&&e.allowedInCurrentChannel(u.extension)})}),u.deviceGroups.forEach(function(e){e.selectedDevice=e.variations.find(function(e){return u.product.devices[e.id]&&e.allowedInCurrentChannel(u.extension)&&!!e.priceBeforeDiscount})||e.variations.find(function(e){return u.product.devices[e.id]&&e.allowedInCurrentChannel(u.extension)})}),u.deviceGroupData={},u.hideBoxForObChannel="ob"===d.realChannel,u.prodInfo.device)if(u.deviceGroupData.selectedDeviceGroup=u.deviceGroups.find(function(e){return e.variations.includes(u.prodInfo.device)}),u.deviceGroupData.selectedDeviceGroup)u.deviceGroupData.selectedDeviceGroup.selectedDevice=u.prodInfo.device;else{var p,g,f,h;c.reportThrowSafe("Cannot find device group for device id : "+(null===(p=u.prodInfo)||void 0===p?void 0:null===(g=p.device)||void 0===g?void 0:g.id)+" title : "+(null===(f=u.prodInfo)||void 0===f?void 0:null===(h=f.device)||void 0===h?void 0:h.title),9492303)}u.prodInfo.highlightedDevices.forEach(function(e){var t=u.deviceGroups.find(function(t){return t.variations.find(function(t){return t.id===e})});t&&(t.selectedDevice=t.variations.find(function(t){return t.id===e}))}),u.agent=t,u.devicePrices=i.data.devicePrices,u.products=i;var m="devicePopup"+u.$id;u.devicePopup=new o(m,"device-popup.html",{title:"devicePopupTitle",agent:t,account:n,device:{},prodInfo:u.prodInfo,deviceTabOptions:{},newSubscription:!0,subscription:u.theConfig.subscription,configs:{}}),u.getDevicePrice=function(e){var t=e.selectedDevice;t||(t=e.variations.find(function(e){return u.product.devices[e.id]&&e.allowedInCurrentChannel(u.extension)}));var n=u.product.findConfigsFromOptions(null,t,u.prodInfo.promotion,u.theConfig.subscription,!0)[0];if(n||(n=u.product.findConfigsFromOptions(null,t,null,u.theConfig.subscription,!0)[0]),n)return i.getDevicePrice(t,n,u.extension,!0),i.data.devicePrices[t.id+""+n.id]||i.data.devicePricesLoading[t.id+""+n.id]},u.getPriceBeforeDiscount=function(e,t){var n=e.variations.find(function(e){return e.id===t.id&&!!e.priceBeforeDiscount});return n?n.priceBeforeDiscount:0},u.selectNoDevice=function(){u.deviceGroupData.selectedDeviceGroup=void 0,u.selectDevice(null)},u.selectDeviceGroup=function(e){u.deviceGroupData.selectedDeviceGroup=e,e.variations.includes(u.prodInfo.device)||u.selectDevice(e.selectedDevice)},u.getColors=function(e){var t=i.getDeviceColors(e,void 0,u.extension);if(!e.variations||!e.variations.length)return t;var n=e.variations.reduce(function(e,t){return t.priceBeforeDiscount&&t.color&&t.color.name&&-1===e.indexOf(t.color.name)&&e.push(t.color.name),e},[]);return 0===n.length?t:t.filter(function(e){return-1!==n.indexOf(e.name)}).concat(t.filter(function(e){return-1===n.indexOf(e.name)}))},u.getCapacities=function(e){var t=null===e||void 0===e?void 0:e.variations.filter(function(e){return e.allowedInCurrentChannel()}),n=t.find(function(e){return!!e.priceBeforeDiscount});if(!n)return i.getDeviceCapacities(e,void 0,u.extension);var o=n.capacity,r=_toConsumableArray(i.getDeviceCapacities(e,void 0,u.extension)),a=r.indexOf(o);return a>-1&&(r.splice(a,1),r.unshift(o)),r},u.selectColor=function(e,t){var n=e.variations.filter(function(e){return u.product.devices[e.id]&&e.allowedInCurrentChannel()});e.selectedDevice=n.find(function(n){return n.color.url===t.url&&n.capacity===e.selectedDevice.capacity}),e.selectedDevice||(e.selectedDevice=n.find(function(e){return e.color.url===t.url})),u.selectDevice(e.selectedDevice)},u.selectCapacity=function(e,t){var n=e.variations.filter(function(e){return u.product.devices[e.id]&&e.allowedInCurrentChannel()});e.selectedDevice=n.find(function(n){return n.color.url===e.selectedDevice.color.url&&n.capacity===t}),e.selectedDevice||(e.selectedDevice=n.find(function(e){return e.capacity===t})),u.selectDevice(e.selectedDevice)},u.showDevicePopup=function(t){var n=u.devicePopup.data;n.willRemovePromotion=!1,t!=n.prodInfo.device&&(t.imei=""),n.device=t,n.configs=u.product.findConfigsFromOptions(null,t,u.prodInfo.promotion,u.theConfig.subscription,!0),n.configs.length||(n.configs=u.product.findConfigsFromOptions(null,t,null,u.theConfig.subscription,!0),n.willRemovePromotion=!0),n.config=n.configs[0],e.fireGaEvent("virtual page view","/checkout/mobile-phones/"+t.url,"checkout","/checkout/mobile-phones/"+t.url,void 0,void 0,!1),u.devicePopup.show(),n.deviceTabOptions={}},u.showDevicePopupFor&&u.showDevicePopup(u.showDevicePopupFor),u.prodInfo.device||!u.prodInfo.device||u.prodInfo.ignoreDevicePopup||a.search().loadCheckoutCache||(u.showDevicePopup(u.prodInfo.device),u.prodInfo.device=null,1!=u.devicePopup.data.configs.length||s.agentLoggedIn||u.devicePopup.functions.select()),r.showDevicePopup=u.showDevicePopup,u.$on("$destroy",function(){return u.devicePopup.delete()})}}}]),app.directive("configureMsisdn",["MsisdnSearch","CommonData","$timeout","CustomerAccount","AgentAccount","$location","SavingsOptions","$rootScope","smoothScroll","Notifications","State","Network","Products","Checkout","PrismicPopups","FeatureFlags",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g,f,h){return{templateUrl:"/scripts/directives/configure-msisdn/dirc_configure-msisdn.html",scope:{theConfig:"=",prodInfo:"=",editable:"=",selfRegistration:"=?"},link:function(f){function m(e){try{var t=JSON.parse(e.data);return"FlankerExpoApp"===t.from&&"from"in t?("data"in t&&"setBarecodeFlag"in t.data&&t.data.setBarecodeFlag&&(console.log("testing app, will set flag for barecode"),h.set("new_barecode_test",!0)),void("data"in t&&"iccid"in t.data&&"FlankerExpoApp"===t.from&&(console.log("iccid: ",t.data.iccid),f.subscriptionDetails.iccid=t.data.iccid,f.scannedIccid=!0,f.scannerOptions.show=!1,f.scannerOptions.result=null,n(function(){var e=document.querySelector('[data-testid="config-msisdn-iccid"]');e===document.activeElement&&e.blur()},0),n(function(){var e=document.querySelector('[data-testid="config-msisdn-iccid"]');e===document.activeElement&&e.focus()},1e3)))):void console.log("react message not valid")}catch(t){return void console.log("error while parsing react message",t,e)}}function v(){var e={};e=t.providers,f.sortedProviders=Object.keys(e).map(function(t){return e[t].id=t,
e[t].defaultProvider="201503171510421893"===t?12:"201008241110339249"===t?11:"201008241110339256"===t?10:"201008241110339255"===t?9:"201008241110339248"===t?8:"201008241110339247"===t?7:"201402252149055340"===t?6:"201402252149055341"===t?5:"201007201328005623"===t?4:"201503181127335104"===t?3:"201008241110329230"===t?2:"201008241110329229"===t?1:0,e[t]})}f.rs=s,f.isTest=window.isTest,f.products=p,f.MsisdnSearch=e,f.CommonData=t,f.account=o,f.agent=i,f.orderData=g.orderData,f.patternData={pattern:""},f.subscriptionDetails=f.prodInfo.subscriptionDetails,void 0===f.subscriptionDetails.portingOwnerIsSameUser&&(f.subscriptionDetails.portingOwnerIsSameUser=!0),f.prodInfo.simType||(f.prodInfo.simType="PHYSICAL"),f.showSimTypeSelection=window.showSimTypeSelection||u.agentLoggedIn,f.state=u,f.iccidResult={},f.msisdnResult={},f.dontGetNewNumber=f.theConfig.subscription||f.theConfig.preToPostSubscription,f.data={},f.barcodeIosFix=h.get("debug-barcode-ios"),f.showContinueButton=!s.isMobile,f.msisdnTabs=[{title:"newMsisdnField",key:"newMsisdn",active:!r.search().gsw},{title:"portingField",key:"keepMsisdn",active:!0}],f.scannerOptions={show:!1,result:null},f.msisdnScannerOptions={show:!1,result:null},window.addEventListener("message",m,!1),h.set("new_barecode_test",!0),f.$on("$destroy",function(){window.removeEventListener("message",m,!1)}),f.startScan=function(){window.ReactNativeWebView&&h.get("new_barecode_test")?(console.log("will ask native screen"),window.ReactNativeWebView.postMessage("openNativeBareCodeComponent")):f.scannerOptions.show=!0},f.toggleMsisdns=function(){f.subscriptionDetails.showMsisdns=!f.subscriptionDetails.showMsisdns,window.innerWidth<640&&tryRestoreSmoothScroll(f.subscriptionDetails.showMsisdns?"newmsisdnfield_content":"topSectionSteps",0,c)},f.checkShowMsisdnSection=function(){return!f.prodInfo.config.hasTag("noMsisdnSelection")&&(!f.theConfig.preToPostSubscription&&(!u.agentLoggedIn&&!f.selfRegistration||!(f.selfRegistration&&!f.subscriptionDetails.msisdn)&&(!(!f.subscriptionDetails.iccid||!f.subscriptionDetails.validIccid)||(!(!u.agentLoggedIn||!i.data.rights.FORCE_SHIPMENT&&!f.posWillShipOrder())||"ESIM"===f.prodInfo.simType))))},f.posWillShipOrder=function(){return p.posWillShipOrder(f.prodInfo,i)},f.$watch("scannerOptions.result",function(e){e&&(f.subscriptionDetails.iccid=e,f.scannedIccid=!0,f.scannerOptions.show=!1,f.scannerOptions.result=null)}),f.$watch("msisdnScannerOptions.result",function(e){e&&(f.scannedMsisdn=e,f.msisdnScannerOptions.show=!1,f.msisdnScannerOptions.result=null)}),f.getProductId=function(){return f.prodInfo.config.id},f.$watch("iccidResult.data",function(e){if(e){if(f.subscriptionDetails.validIccid=!0,f.theConfig.invalidProduct=!1,e.allowedProducts&&e.allowedProducts.length&&e.allowedProducts.indexOf(f.prodInfo.config.id)<0)return f.theConfig.invalidProduct=!0,void console.error("invalid product for iccid");if(f.prodInfo.includedOptions={},e.includedOptions&&e.includedOptions.length){for(var t in e.includedOptions){var o=a.options[e.includedOptions[t].id];for(var i in f.prodInfo.options)f.prodInfo.options[i].exclusivityGroup==o.exclusivityGroup&&(f.prodInfo.options[i].isExclusive||o.isExclusive)&&delete f.prodInfo.options[i];f.prodInfo.options[o.id]=o,f.prodInfo.includedOptions[e.includedOptions[t].id]={free:e.includedOptions[t].free,required:e.includedOptions[t].required}}f.selfRegistration&&d.add("optionAddedToOrder","good")}e.bundled?(f.scanMsisdn=!0,f.subscriptionDetails.forceMsisdn=!0,f.scannedIccid&&n(function(){f.msisdnScannerOptions.show=!0},250)):(f.subscriptionDetails.forceMsisdn=!1,f.scanMsisdn=!1,f.subscriptionDetails.newMsisdn.msisdn||f.getMsisdn()),f.scannedIccid=!1}}),f.$watch("msisdnResult.data",function(e){f.correctBundledSim=!!e,f.subscriptionDetails.correctBundledSim=!!e,e&&(f.subscriptionDetails.newMsisdn.msisdn=e,f.updateMsisdn(e))}),f.changeSimType=function(){"ESIM"===f.prodInfo.simType&&f.getMsisdn()},f.stopScanningIccid=function(){f.scannerOptions.show=!1},f.stopScanningMsisdn=function(){f.msisdnScannerOptions.show=!1},f.showIccidScanButton=function(){if(!isIE)return!f.scannerOptions.show&&(!(!u.agentLoggedIn&&s.isDesktop)&&(u.cordovaLoaded&&CameraPreview||navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia))},!s.app&&focusFirstField(),f.changeSubscriptionType=function(e){if(f.showPreToPostMessage=!1,"preToPost"==e)return f.showPreToPostMessage=!0,f.subscriptionDetails.oldSubscriptionType=f.subscriptionDetails.subscriptionType,f.subscriptionDetails.subscriptionType="none";f.theConfig.preToPostSubscription||("newMsisdn"==e?f.subscriptionDetails.subscriptionType="newMsisdn":"contractExtension"==e?(f.subscriptionDetails.oldSubscriptionType=f.subscriptionDetails.subscriptionType,f.subscriptionDetails.subscriptionType="none"):(f.subscriptionDetails.subscriptionType="porting",f.subscriptionDetails.porting?f.updateMsisdn(f.subscriptionDetails.msisdn,!0):f.subscriptionDetails.porting={wishDate:dateToObj(swissDate().addDays(u.agentLoggedIn||f.selfRegistration?10:15),!0),portingSpeed:"slow"}),f.msisdnInit())},f.updateMsisdn=function(e,t){var n,o;null!==(n=f.subscriptionDetails)&&void 0!==n&&null!==(o=n.porting)&&void 0!==o&&o.msisdn&&(f.subscriptionDetails.porting.msisdn=f.subscriptionDetails.porting.msisdn.split(" ").join("")),e&&(e=e.split(" ").join("")),(f.subscriptionDetails.msisdn!==e||t)&&(f.subscriptionDetails.previousProviderType=void 0,f.subscriptionDetails.porting&&(f.subscriptionDetails.porting.previousProviderId=void 0),this.MsisdnSearch.msisdnToNotClear=e,e&&"porting"===f.subscriptionDetails.subscriptionType&&(f.subscriptionDetails.autoDetectedPreviousProvider=!1,f.lookingUpMsisdn=!0,f.subscriptionDetails.porting.previousProviderId=void 0,f.previousProviderMode=void 0,l.post("carrier-lookup/msisdn",{msisdn:e},2,!0,microServiceEndpoint,"text/plain",!0,!1).then(function(e){if(f.lookingUpMsisdn=!1,e&&e.carrierName){if(f.changePreviousProviderType(e),h.get("BlackFriday-release")){var t={SUNRISE:"sunrise"};Object.keys(t).map(function(t){t.indexOf(e.carrierName)>-1&&(f.showBanner=!0)})}f.subscriptionDetails.porting.previousProviderId&&(f.subscriptionDetails.autoDetectedPreviousProvider=!0)}})),f.dontGetNewNumber||(f.subscriptionDetails.msisdn=e,f.selfRegistration&&(f.subscriptionDetails.contactNumber=e)))},f.changePreviousProviderType=function(e){var n,o=e.carrierName.toLowerCase(),i=null===(n=e.paymentType)||void 0===n?void 0:n.toLowerCase();if(f.subscriptionDetails.porting.previousProviderId=void 0,"lbara"===o&&"prepaid"===i)return f.subscriptionDetails.porting.previousProviderId="preToPost",f.changedProvider();if("lbara"===o&&"postpaid"===i)return f.subscriptionDetails.porting.previousProviderId="contractExtension",f.changedProvider();var r,a=Object.values(t.providers),s=a.filter(function(e){return"postpaid"===e.donorType});i?function(){var e=a.filter(function(e){return e.donorType===i}),t={sunrise:"sunrise",conga:"yallo",lbara:"lebara",netpl:"net+",swype:"swype",dgtec:"digitec",media:"era mobile",aldi:"aldi",talk:"talk",post3:"quickline",mason:"sunrise",bc_man:"sunrise",tsun:"sunrise"};for(var n in t){var s=function(n){var i;return-1===o.indexOf(n)?"continue":(r=null===(i=e.find(function(e){if("yallo Swype"!==e.name||"conga"!==o)return-1!==e.name.toLowerCase().indexOf(t[n])}))||void 0===i?void 0:i.id,r?"break":void 0)}(n);if("continue"!==s&&"break"===s)break}}():function(){var e={swisscom:"swisscom",salt:"salt",lyca:"lyca","upc ":"upc "};for(var t in e){var n=function(t){var n,i;return-1===o.indexOf(t)?"continue":(r=null===(n=s.find(function(n){return-1!==n.name.toLowerCase().indexOf(e[t])}))||void 0===n?void 0:n.id,r||(r=null===(i=a.find(function(n){return-1!==n.name.toLowerCase().indexOf(e[t])}))||void 0===i?void 0:i.id),r?"break":void 0)}(t);if("continue"!==n&&"break"===n)break}}(),console.log(t.providers[r]),r&&(f.subscriptionDetails.porting.previousProviderId=r),f.changedProvider()},f.getMsisdn=function(){f.gotMsisdns||f.dontGetNewNumber||e.get("",f.prodInfo.config.id).then(function(e){e&&e.msisdns.length&&(f.gotMsisdns=!0,f.subscriptionDetails.newMsisdn.msisdn&&"porting"!=f.subscriptionDetails.subscriptionType||(f.subscriptionDetails.newMsisdn.msisdn=e.msisdns[0],"porting"!==f.subscriptionDetails.subscriptionType&&f.updateMsisdn(e.msisdns[0])))})},f.msisdnInit=function(){if(f.subscriptionDetails.subscriptionType&&f.subscriptionDetails.newMsisdn.msisdn)f.subscriptionDetails.forceMsisdn||f.prodInfo&&f.prodInfo.config&&f.getMsisdn();else{if(!f.prodInfo)return;if(!f.prodInfo.config)return;e.searching[f.prodInfo.config.id]&&f.subscriptionDetails.subscriptionType||(f.subscriptionDetails.subscriptionType="newMsisdn",u.agentLoggedIn&&!i.data.rights.FORCE_SHIPMENT&&!f.posWillShipOrder()||f.selfRegistration||f.getMsisdn())}"none"!==f.subscriptionDetails.subscriptionType&&f.updateMsisdn(f.subscriptionDetails[f.subscriptionDetails.subscriptionType].msisdn)},f.changedProvider=function(){var e=o.getSubscriptionFromMsisdn(f.subscriptionDetails.porting.msisdn,"prepaid");return"preToPost"!==f.subscriptionDetails.porting.previousProviderId||e&&e.canDoPreToPost()&&"prepaid"!==f.prodInfo.product.type?"contractExtension"===f.subscriptionDetails.porting.previousProviderId?(f.subscriptionDetails.porting.previousProviderId="",f.data.subscriptionType="contractExtension",void f.changeSubscriptionType("contractExtension")):void u.returnWhenCheckoutDataLoaded().then(function(){f.subscriptionDetails.porting.previousProvider=t.providers[f.subscriptionDetails.porting.previousProviderId]}):(f.subscriptionDetails.porting.previousProviderId="",f.data.subscriptionType="preToPost",void f.changeSubscriptionType("preToPost"))},f.showContactNumber=function(){return!(window.testContactNumber&&!f.dontGetNewNumber&&!f.prodInfo.config.hasTag("noMsisdnSelection"))&&("newMsisdn"===f.subscriptionDetails.subscriptionType&&(!f.selfRegistration&&(!u.agentLoggedIn&&!u.customerLoggedIn)))},f.showNoMsisdnContactNumber=function(){return"newMsisdn"===f.subscriptionDetails.subscriptionType&&(!u.agentLoggedIn&&f.prodInfo.config.hasTag("noMsisdnSelection"))},f.$watch("prodInfo.config",function(e,t){e!==t&&(f.theConfig.preToPostSubscription||f.msisdnInit())}),f.$watch("subscriptionDetails.porting.msisdn",function(e,t){if(f.subscriptionDetails.porting&&f.subscriptionDetails.porting.msisdn){if(u.customerLoggedIn){var n=o.getSubscriptionFromMsisdn(f.subscriptionDetails.porting.msisdn,"prepaid");n&&"prepaid"===n.type&&(f.subscriptionDetails.porting.previousProviderId="preToPost")}f.changedProvider()}}),f.$watch("subscriptionDetails.subscriptionType",function(e,t){"contractExtension"!==f.data.subscriptionType&&(f.data.subscriptionType=f.subscriptionDetails.subscriptionType,"none"===f.data.subscriptionType&&(f.data.subscriptionType="preToPost"),e!==t&&"none"!==f.subscriptionDetails.subscriptionType&&(f.theConfig.preToPostSubscription||f.msisdnInit()))},!0),f.msisdnInit(),u.returnWhenCheckoutDataLoaded().then(v),f.$on("$destroy",function(){if("porting"===f.subscriptionDetails.subscriptionType&&f.subscriptionDetails.porting.wishDate){objToDate(f.subscriptionDetails.porting.wishDate).getTime()-swissDate().addDays(u.agentLoggedIn||f.selfRegistration?10:15).getTime()<0&&(console.warn("wish date invalid. Setting to valid date"),f.subscriptionDetails.porting.wishDate=dateToObj(swissDate().addDays(u.agentLoggedIn||f.selfRegistration?10:15)))}"none"===f.subscriptionDetails.subscriptionType&&(f.subscriptionDetails.subscriptionType=f.subscriptionDetails.oldSubscriptionType)})}}}]),app.directive("configureOptions",function(){return{templateUrl:"/scripts/directives/configure-options/dirc_configure-options.html"}}),app.directive("configureSubscription",["$rootScope",function(e){return{templateUrl:"/scripts/directives/configure-subscription/dirc_configure-subscription.html",link:function(t){t.subscription=t.theConfig.subscription||t.theConfig.preToPostSubscription,t.theConfig.needToLogin="string"==typeof t.subscription,t.subscriptionDetails.subscriptionType=t.theConfig.subscription?"existing":"prePost",t.subscriptionDetails.existing={msisdn:t.subscription.msisdn?t.subscription.msisdn:"-"},t.subscriptionDetails.msisdn=t.subscription.msisdn?t.subscription.msisdn:"-",t.showLogin=function(){e.loginPopup.show()}}}}]),app.directive("confirmEmailAddress",["Network","$location",function(e,t){return{templateUrl:"/scripts/directives/confirm-email-address/dirc_confirm-email-address.html",scope:{},link:function(n){if(t.search().token){var o={token:t.search().token};n.confirming=!0,e.post("emailConfirmation",o,7,!0).then(function(e){n.confirming=!1,e=!e.errorCode,n.error=!e,n.success=!!e,console.log(n.error,n.success)})}}}}]),app.directive("confirmNoSigning",["Checkout","AgentAccount","$routeParams","State","$rootScope","FeatureFlags",function(e,t,n,o,i,r){return{templateUrl:"/scripts/directives/confirm-no-signing/dirc_confirm-no-signing.html",scope:{editable:"=",hasOneTimeCostsForExtension:"=?"},link:function(a){var s;a.state=o,a.activationFee=59,a.rs=i;var c=e.orderData&&e.orderData.config&&Object.first(e.orderData.config.products);a.prodInfo=c,window.eshopPostpaidActivationFee&&(a.activationFee=window.eshopPostpaidActivationFee),c.config.hasTag("fiber")&&(a.activationFee=99,a.isFiber=!0),c.config.hasTag("home")&&r.get("new-activation-fee")&&(a.activationFee=99),c.config.hasTag("HFC")&&(a.activationFee=99,a.isHFC=!0),"tv"==c.product.productType&&(a.isTV=!0),null!==c&&void 0!==c&&null!==(s=c.promotion)&&void 0!==s&&s.waiveActivationFee&&(a.activationFee=0),a.agent=t,a.checkout=e,a.prepaid="new-prepaid"==n.ordertype,a.extension="extend-postpaid"==n.ordertype||"change-postpaid"==n.ordertype||"add-promo"==n.ordertype,a.selfRegistration="self-register"===n.logintype,e.orderData.contract&&(a.printPdf=function(){e.printPdf(e.orderData.contract.b64,"contract.pdf")})}}}]),app.directive("confirmationTopupInfo",function(){return{templateUrl:"/scripts/directives/confirmation-topup-info/dirc_confirmation-topup-info.html"}}),app.directive("confirmationEsimPoller",["AgentAccount","$q","State","CustomerAccount","$timeout",function(e,t,n,o,i){return{templateUrl:"/scripts/directives/confirmation-esim-poller/dirc_confirmation-esim-poller.html",scope:{order:"=?"},link:function(r){r.getCustomer=function(){var o=t.defer();return i(function(){n.checkCustomerLoggedIn().then(function(){if(n.customerLoggedIn)return o.resolve(!0);n.agentLoggedIn&&e.getExistingCustomer(r.order.newCustomerUsername,!0).then(o.resolve).catch(o.reject)})},1e3),o.promise},r.waitBetweenPolls=function(){var e=t.defer();return i(function(){e.resolve()},3e4),e.promise},r.poll=function(){return r.subscription.simcardInfo.matchingId?r.subscription.getEsimInfo().then(function(e){if(e)return!(!e||!e.allowScan)||r.waitBetweenPolls().then(function(){return r.poll()})}):r.waitBetweenPolls().then(function(){return o.doRefresh().then(function(){return r.poll()})})},r.gettingCustomer=!0,r.getCustomer().then(function(e){console.log(e),r.gettingCustomer=!1,e&&(r.subscription=o.getSubscriptionFromMsisdn(r.order.subscriptionDetails.msisdn),r.polling=!0,r.poll().then(function(){return r.polling=!1}))})}}}]),app.directive("contact",["CommonData","Language","Network","$location","Chat",function(e,t,n,o,i){return{templateUrl:"/scripts/directives/contact/dirc_contact.html",scope:{forceCategory:"=?",hideCategory:"=?"},link:function(r){r.available={},r.data={},r.category=o.path().split("/")[3],r.availableMethods=function(){var e=[];for(var t in r.available)r.available[t]&&e.push(t);return e},r.show=function(e){return"carechat"==e||("saleschat"!=e||!i.activeChat&&i.agentShouldBeAvailable["".concat(brand,"_sales")])},r.click=function(e){"carechat"==e?i.startChatPopup("support"):"saleschat"==e&&i.startChatPopup("sales")},r.checkCategory=function(){r.forceCategory?r.selectedCategory=r.contactCategories[r.forceCategory]:r.category&&r.contactCategories[r.category]&&(r.selectedCategory=r.contactCategories[r.category],r.selectedCategory.methods.carechat&&i.checkAgentAvailability("".concat(brand,"_support")),r.selectedCategory.methods.saleschat&&i.checkAgentAvailability("".concat(brand,"_sales")))};var a={de:"/data/contact-categories_de.976ba63b0f.json",fr:"/data/contact-categories_fr.3ee5607bc3.json",it:"/data/contact-categories_it.67d380412c.json",en:"/data/contact-categories_en.f89c88c3b6.json"};e["contactCategories_"+t.data.current]?(r.contactCategories=e["contactCategories_"+t.data.current],r.checkCategory()):n.get(a[t.data.current]).then(function(n){e["contactCategories_"+t.data.current]=n,r.contactCategories=e["contactCategories_"+t.data.current],r.checkCategory()})}}}]),app.directive("countDown",function(){return{restrict:"E",templateUrl:"/scripts/directives/count-down/dirc_count-down.html",scope:{time:"=?",countDownDate:"=?",hideDays:"=?",hideHours:"=?",showLabels:"=?",repeatFrequency:"=?",timeOutput:"=?"},link:function(e,t){function n(){if("string"==typeof p)return void throwSafe("countdown time needs to be a number, not a string","20-id");if(p<=0&&(o(),p<=0))if(e.repeatFrequency){var n=c[c.length-1];if("string"==typeof n&&(n=yolStringToDate(n)),n){var r=(now().getTime()-n.getTime())/1e3,f=Math.ceil(r/e.repeatFrequency);p=-r+e.repeatFrequency*f}else p=e.repeatFrequency}else s=!0,g&&clearInterval(g);d=[1,60],e.hideHours?a(l[1]):d.push(3600),e.hideDays||p<86400?a(l[0]):d.push(86400),u=t[0].querySelectorAll(".count-down-number"),s&&(t[0].style.display="none");for(var h=i(p,d.slice(),[]);h.length<u.length;)h.unshift("0");for(var m in h)u[m]&&(u[m].innerHTML=h[m]);e.timeOutput&&(e.timeOutput.time=p),p-=1}function o(){for(var e in c){var t=_typeof(c[e]),n=void 0;if((n="string"===t?r(c[e]):(c[e].getTime()-now().getTime())/1e3)>0){p=n;break}}}function i(e,t,n){if(!t.length)return n;var o=t.pop(),r=Math.floor(e/o).toString();return 1===r.length&&(r="0"+r),i(e-r*o,t,n.concat([r[0],r[1]]))}function r(e){var t=yolStringToDate(e),n=t.getTime()-now().getTime();return n=Math.floor(n/1e3)}function a(e){e&&e.parentNode&&e.parentNode.removeChild(e),e=void 0}var s,c,d,u,l=t[0].querySelectorAll(".count-down-number-group"),p=e.time||0,g=setInterval(n,1e3);c=e.countDownDate?Array.isArray(e.countDownDate)?e.countDownDate:[e.countDownDate]:[],o(),n(),e.$on("$destroy",function(){return clearInterval(g)})}}}),app.directive("contest",["$location","Notifications","Language","State","CustomerAccount","$q","Reporting","Analytics","CaptureInfo","$timeout",function(e,t,n,o,i,r,a,s,c,d){return{restrict:"E",templateUrl:"/scripts/directives/contest/dirc_contest.html",scope:{contestName:"=",image:"=?",imageType:"=?",ctaText:"=?",askBirthDate:"=?",askName:"=?",askPhoneNumber:"=?",redirectUrl:"=?",errorUrl:"=?",successMessage:"=?",contestTitle:"=?",onSuccess:"=?",extraData:"=?"},link:function(u){if(!u.contestName)return u.error=!0;u.contestData={},u.data={cookies:"",language:n.data.current,contestName:e.search().contestname||u.contestName.toLowerCase(),brand:brand,extraData:{}},u.submitting=!1,u.success=!1,u.contestTrackingId=randomString(12),u.showFillButton=window.isTest,u.init=function(){(e.search().autoSubmit||e.search().autoFill)&&(u.loading=!0,o.checkCustomerLoggedIn().then(function(t){if(u.loading=!1,!t)return console.warn("Could not autoSubmit contest: not logged in");var n=i.accountOwner,o=i.findOldestActiveMobileSub();u.askName&&(u.data.firstName=n.firstName),u.askName&&(u.data.lastName=n.lastName),u.askBirthDate&&(u.contestData.dob=n.dob),u.askPhoneNumber&&(u.data.contactNumber=o?o.msisdn:n.contactNumber),u.data.emailAddress=n.emailAddress,e.search().autoSubmit&&(u.loading=!0,u.submit().then(function(){return u.loading=!1}))}))},u.afterSubmit=function(n){u.submitting=!1,n?(u.success=!0,s.dataLayerPush({tracking_cookie:u.cookies}),s.event("comp","submitted",e.search().contestname||u.contestName.toLowerCase()),a.reportCioEvent("comp"),u.onSuccess&&u.onSuccess(),u.successMessage&&t.add(u.successMessage,"good"),u.redirectUrl&&e.path(u.redirectUrl),o.customerLoggedIn&&!i.accountOwner.emailAddress&&(i.accountOwner.updateInfo({email:u.data.emailAddress}),s.event("comp","updated-email"))):u.handleError()},u.handleError=function(n){u.success=!1,u.submitting=!1,"ERR_INVALID_MSISDN_FORMAT"===n.errorCode?t.add("error_ERR_INVALID_MSISDN_FORMAT","bad"):u.errorUrl?e.path(u.errorUrl):t.add("error","bad")},u.submit=function(){if(u.submitting)return r.resolve();u.submitting=!0,u.cookies=s.getCookies(randomString(12)),u.contestData.dob&&(u.data.dob="".concat(u.contestData.dob.year,"-").concat((u.contestData.dob.month+"").paddTo(2),"-").concat((u.contestData.dob.day+"").paddTo(2))),Object.size(u.data.extraData)||(u.data.extraData=void 0);var e=angular.copy(u.data);e.trackingCookie=JSON.stringify(u.cookies),Object.size(u.data.extraData)&&(e.extraData=JSON.stringify(u.data.extraData)),e.contactNumber&&(e.contactNumber=e.contactNumber.replaceAll(" ","").replaceAll("-","")),c.submitContestDetails(e).then(u.afterSubmit).catch(u.handleError)},u.init(),window.isTest&&(u.fill=function(){d(function(){u.data.firstName=u.data.firstName||Math.random().toString(36).substring(7),u.data.lastName=u.data.lastName||Math.random().toString(36).substring(7),u.data.contactNumber=u.data.contactNumber||"0761234567",u.data.emailAddress=u.data.emailAddress||"tester.tester"+Math.random().toString(36).substring(7)+"@fgjawa.aah",u.contestData.dob=u.contestData.dob.year?u.contestData.dob:{day:getRandomInt(1,20).toString(),month:getRandomInt(1,11).toString(),year:getRandomInt(1950,1990).toString()}},500)})}}}]),app.directive("creditCards",["Topup","Popup","CustomerAccount",function(e,t,n){return{templateUrl:"/scripts/directives/credit-cards/dirc_credit-cards.html",scope:{},link:function(o){o.Topup=e,o.account=n,e.getSavedCreditCards(),o.deleteCreditCardPopup=new t("deleteCreditCard","delete-credit-card.html",{title:"deleteCreditCardPopupTitle"},{confirm:function(){o.deleteCreditCardPopup.data.deleting||(o.deleteCreditCardPopup.data.deleting=!0,e.deleteCreditCard(o.deleteCreditCardPopup.data.aliasCC).then(function(){o.deleteCreditCardPopup.data.deleting=!1,o.deleteCreditCardPopup.hide()}))}}),o.deleteCreditCard=function(e){o.deleteCreditCardPopup.data.aliasCC=e,o.deleteCreditCardPopup.show()}}}}]),app.directive("customerDataPreview",["Popup","Network","CustomerAccount","$rootScope","AgentAccount",function(e,t,n,o,i){return{restrict:"E",templateUrl:"/scripts/directives/customer-data-preview/dirc_customer-data-preview.html",scope:{data:"=",minAge:"=",editable:"=?",emailOnlyEditable:"=?",chooseLang:"=?",allowNoEmail:"=?",contactNumber:"=?",allowEdit:"=?"},link:function(t){t.editDataPopup=new e("editCustomerDataPopup","customer-data-preview-popup.html",{title:"editCustomerDataPopupTitle",newData:angular.copy(t.data),agent:i,minAge:t.minAge,emailOnlyEditable:t.emailOnlyEditable,chooseLang:t.chooseLang,allowNoEmail:t.allowNoEmail,contactNumber:t.contactNumber,shipSim:t.shipSim},{hide:function(){t.editDataPopup.data.newData=angular.copy(t.data)},submit:function(){if(!t.editDataPopup.data.hideClose){var e={};if(t.data.firstName!==t.editDataPopup.data.newData.firstName&&(e.firstName=t.editDataPopup.data.newData.firstName),t.data.lastName!==t.editDataPopup.data.newData.lastName&&(e.lastName=t.editDataPopup.data.newData.lastName),t.data.title!==t.editDataPopup.data.newData.title&&(e.title=t.editDataPopup.data.newData.title+"."),objToDate(t.data.dob).getTime()!==objToDate(t.editDataPopup.data.newData.dob).getTime()&&(e.dob=objToDate(t.editDataPopup.data.newData.dob,!0).toServerJSON()),Object.size(e)<=1)return t.editDataPopup.hide();t.editDataPopup.data.hideClose=!0,n.accountOwner.updateInfo(e).then(function(e){if(e){for(var o in t.editDataPopup.data.newData)"billingIdDetails"!==o&&(t.data[o]=t.editDataPopup.data.newData[o]);n.doRefresh().then(function(){t.editDataPopup.data.hideClose=!1,t.editDataPopup.hide()})}else t.editDataPopup.data.hideClose=!1})}}}),t.scannedDataWatcher=o.$on("scannedCustomerData",function(e,n){if(n){var o=t.editDataPopup.data.newData;(o.title!=n.title||o.firstName!=n.firstName||o.lastName!=n.lastName||o.dob.day!=n.dob.day||o.dob.month!=n.dob.month||o.dob.year!=n.dob.year)&&(o.title=n.title,o.pixel_title=n.title,o.firstName=n.firstName,o.pixel_firstName=n.firstName,o.lastName=n.lastName,o.pixel_lastName=n.lastName,o.dob=n.dob,o.pixel_dob=n.dob.year?n.dob:void 0,t.editDataPopup.show())}}),t.$on("$destroy",t.scannedDataWatcher)}}}]),app.directive("desktopCarousel",["$rootScope",function(e){return{link:function(t,n,o){function i(e){h.forEach(function(t,n){var o=!1,i=C;n<C&&(o=!0),n-y>=C&&(o=!0),o?setTimeout(function(){C===i&&t.classList.add("out-of-view")},e?0:500):t.classList.remove("out-of-view")})}function r(e){if(h){e<0&&(e=0),e>h.length-y&&(e=h.length-y);var t=100/h.length;h.forEach(function(n){return n.style.right="".concat(t*e,"%")}),C=e,a(),i()}}function a(){v&&b&&h&&(0===C?v.classList.add("disabled"):v.classList.remove("disabled"),C===h.length-y?b.classList.add("disabled"):b.classList.remove("disabled"))}function s(e){if(h){var t,n=_createForOfIteratorHelper(h);try{for(n.s();!(t=n.n()).done;){t.value.style.transition=e?"right .5s ease":"none"}}catch(e){n.e(e)}finally{n.f()}}}function c(){var e=y;y=parseInt(o.columnCount)||(window.innerWidth<1024?2:3),e!==y&&(m=!1),!m&&window.innerWidth>=640?d():m&&window.innerWidth<640&&u()}function d(){m=!0,l(),f(),g()}function u(){m=!1,p(),f()}function l(){t&&t();var t=e.$watch(function(){if(n[0].querySelectorAll(o.innerEl).length&&m&&(h=Array.from(n[0].querySelectorAll(o.innerEl)))){var e=100/h.length;if(h.length<=y)return u();var t,r=_createForOfIteratorHelper(h);try{for(r.s();!(t=r.n()).done;){var s=t.value;if(s.classList.contains("desktop-sideways-scrolled"))return;s.style.width="calc(".concat(e,"% - 24px)"),s.style.marginBottom="0px",s.style.position="relative",s.style.right="0",s.classList.add("desktop-sideways-scrolled"),s.classList.remove("mobile-sideways-scrolled")}}catch(e){r.e(e)}finally{r.f()}w=n[0].querySelector("div.row"),w.style.width="calc(".concat(h.length/y*100,"% + ").concat(24*h.length/y,"px)"),w.parentNode.style.overflow="hidden",w.parentNode.style.position="relative",n[0].style.display="block",n[0].style.margin="0 -24px",n[0].style.padding="0 24px",a(),i(!0)}})}function p(){if(w&&(w.style.width="",w.parentNode.style.overflow="",w.parentNode.style.position="",n[0]&&(n[0].style.display="",n[0].style.margin="",n[0].style.padding="",h))){var e,t=_createForOfIteratorHelper(h);try{for(t.s();!(e=t.n()).done;){var o=e.value;o.style.width="",o.style.marginBottom="",o.style.position="",o.style.right=""}}catch(e){t.e(e)}finally{t.f()}}}function g(){v=document.createElement("div"),v.className="scroll-helper helper-left desktop",v.addEventListener("click",function(e){e.preventDefault(),s(!0),r(C-1)}),n[0].appendChild(v),b=document.createElement("div"),b.className="scroll-helper helper-right desktop",b.addEventListener("click",function(e){e.preventDefault(),s(!0),r(C+1)}),n[0].appendChild(b),a()}function f(){v||(v=n[0].querySelector(".scroll-helper.helper-left")),b||(b=n[0].querySelector(".scroll-helper.helper-right")),v&&v.parentNode&&v.parentNode.removeChild(v),b&&b.parentNode&&b.parentNode.removeChild(b)}if("false"!==o.desktopCarousel){var h,m,v,b,w,C=0,y=parseInt(o.columnCount)||3;t.$on("$destroy",function(){u(),window.removeEventListener("resize",c)}),window.addEventListener("resize",c),c()}}}}]),app.directive("gallery",function(){return{templateUrl:"/scripts/directives/device-gallery/dirc_device-gallery.html",scope:{device:"=data"},link:function(e){e.data={},e.data.currentImage=e.device.images[0],e.$watch("device",function(){e.data.currentImage=e.device.images[0]}),e.reverseSetPos=function(){return e},e.setMobileSidewaysScrollPos=function(t){return e.mobileScrollPos=t}}}}),app.directive("deviceTile",["$translate",function(e){return{templateUrl:"/scripts/directives/device-tile/dirc_device-tile.html",scope:{device:"=",showStock:"=?",showPrices:"=?",click:"&?",showBanner:"=?",soldOutText:"=?"},link:function(t){t.soldOutText||(t.soldOutText=e.instant("soldOut")),t.doCallback=function(e){t.click&&"function"==typeof t.click&&t.click(e)}}}}]),app.directive("devices",["Products","State","CommonData","CustomerAccount","$filter",function(e,t,n,o,i){return{templateUrl:"/scripts/directives/devices/dirc_devices.html",scope:{channel:"=?",filterOutHomeBox:"=?",showFilter:"=?"},link:function(r){r.state=t,r.products=e,r.manufacturers=[],r.data={},r.data.manufacturer="all",r.currentChannel=n.channel,r.loading=!0,r.init=function(){return t.returnWhenDeviceDataLoaded().then(function(){return t.checkCustomerLoggedIn().then(function(e){if(e)return o.doCreditCheck(!1,1)})})},r.init().then(function(){r.loading=!1,r.account=o,r.devicePrices=e.data.devicePrices,r.deviceGroups=e.data.deviceGroups,r.getLowestDevicePrice=function(t){return e.getDevicePrice(t,t.highestPricedConfig(),!1,!0)},r.devicePrice=function(e){return r.devicePrices[e.id+""+e.highestPricedConfig().id]},r.manufacturers=[],r.deviceGroups.forEach(function(e){e.manufacturer&&e.variations.find(function(e){return e.allowedInCurrentChannel()})&&(r.manufacturers.includes(e.manufacturer)||r.manufacturers.push(e.manufacturer))}),r.manufacturers.sort()}),r.getDevicePrice=function(t){var n=t.variations.find(function(e){return e.allowedInCurrentChannel()});if(!n)return!0;var o=n.getValidProducts()[0].findConfigsFromOptions(null,n)[0];return e.data.devicePrices[n.id+""+o.id]?e.data.devicePrices[n.id+""+o.id]:(e.getDevicePrice(n,o,void 0,!0),!1)},r.getFilteredDevices=function(){var e=i("channelFilter")(r.deviceGroups,!1,!1,r.channel);return e=i("visibleDevicesOnly")(e),"all"!==r.data.manufacturer&&(e=e.filter(function(e){return e.manufacturer===r.data.manufacturer})),e=i("orderBy")(e,"-priority")},r.getGroupColors=function(t){var n=e.getDeviceColors(t);if(!t.variations||!t.variations.length)return n;var o=t.variations.reduce(function(e,t){return t.priceBeforeDiscount&&t.color&&t.color.name&&-1===e.indexOf(t.color.name)&&e.push(t.color.name),e},[]);return 0===o.length?n:n.filter(function(e){return-1!==o.indexOf(e.name)}).concat(n.filter(function(e){return-1===o.indexOf(e.name)}))},r.has5GDevice=function(e){return e.variations.find(function(e){return e.is5G})},r.getPriceBeforeDiscount=function(e,t){var n=e.variations.find(function(e){return t?e.id===t.id&&!!e.priceBeforeDiscount:!!e.priceBeforeDiscount});return n?n.priceBeforeDiscount:0},r.getDiscountedDevicePrice=function(t,n){var o,i,r=t.variations.find(function(e){return n?e.id===n.id&&!!e.priceBeforeDiscount:!!e.priceBeforeDiscount});if(!r)return null;var a=null===(o=r.getValidProducts())||void 0===o?void 0:null===(i=o[0].findConfigsFromOptions(null,r))||void 0===i?void 0:i[0];return e.data.devicePrices[r.id+""+a.id]?e.data.devicePrices[r.id+""+a.id]:(e.getDevicePrice(r,a,void 0,!0),null)},r.hasRecurringCost=function(){var e=r.getFilteredDevices();return!!e.length&&e.some(function(e){var t=r.getDevicePrice(e);return t&&void 0!==t.recurringCost})}}}}]),app.directive("doTopup",["Topup","Analytics","CustomerAccount","FeatureFlags","$cookies",function(e,t,n,o,i){return{templateUrl:"/scripts/directives/do-topup/dirc_do-topup.html",scope:{subscription:"=data"},link:function(r){r.subscription.getTopupHistory(),r.Topup=e,r.doingTopup=!1,r.data={amount:e.defaultTopupValue},r.loading=!0,e.getSavedCreditCards().then(function(){r.loading=!1,r.ccs=e.activeCreditCards(),r.data.cc=Object.first(r.ccs)}),r.doTopup=function(){if(r.data.amount&&!r.doingTopup){r.doingTopup=!0;var a={event:"add_to_cart",add:{products:[{brand:window.brand,category:"Top up",id:"unavailable",name:"Top up",price:r.data.amount,quantity:1,variants:"prepaid mobile"}]}},s={selfcare_conversion_path:"Top up ".concat(a.event," - overview"),selfcare_offer_type:"unavailable",selfcare_offer_tag:"unavailable",selfcare_product_name:"unavailable",selfcare_device:"unavailable",selfcare_promo_code:"unavailable"};o.get("Ayma-google-tag-manager-changes-2")&&(cookieOptions.expires=(new Date).addHours(2),t.dataLayerPush(a),i.putObject(a.event,s,cookieOptions),
a.eventName="begin_checkout",s.selfcare_conversion_path="Top up ".concat(a.event," - overview"),t.dataLayerPush(a),i.putObject(a.event,s,cookieOptions));var c=r.data.cc?r.data.cc.aliasCC:null,d=n.isAccountOwner();e.doTopup(r.subscription,r.data.amount,c,c?void 0:d).then(function(e){r.doingTopup=!1,"success"==e&&(o.get("Ayma-google-tag-manager-changes-2")&&(a.event="purchase",s.selfcare_conversion_path="Top up ".concat(a.event," - overview"),t.dataLayerPush(a),i.putObject(a.event,s,cookieOptions)),t.fireGaInteraction("topup",{saving_name:"",saving_action:""}))})}}}}}]),app.directive("documentSigning",["Checkout","Notifications","$location","AgentAccount","Network","$rootScope","Language","State","$timeout",function(e,t,n,o,i,r,a,s,c){return{transclude:!0,templateUrl:"/scripts/directives/document-signing/dirc_document-signing.html",scope:{editable:"="},link:function(c){if(c.checkout=e,c.agent=o,c.path=n.path(),c.signPadActive=!1,c.signData={},c.state=s,c.outboundMode=s.agentLoggedIn&&o.data.rights.FORCE_SHIPMENT,e.orderData.config){c.prodInfo=Object.first(e.orderData.config.products),c.data={contract:{},poa:{sendPhysicalPoa:!1}},s.agentLoggedIn||(c.signData.signMethod="digital");var d=c.prodInfo.subscriptionDetails&&"porting"===c.prodInfo.subscriptionDetails.subscriptionType,u=d&&c.prodInfo.subscriptionDetails.portingOwnerIsSameUser;c.autoSignMode=(!s.agentLoggedIn||s.agentLoggedIn&&o.data.rights.FORCE_SHIPMENT)&&d&&u,window.isTest&&(c.checkout.orderData.accessCodeData.contractSignRequired&&!c.checkout.orderData.contract&&t.add("Contract sign required but no contract sent by RFE","bad"),c.checkout.orderData.accessCodeData.poaSignRequired&&!c.checkout.orderData.poa&&t.add("Poa sign required but no poa document sent by RFE","bad")),c.checkIsAlreadyValid=function(){return!!c.checkout.orderData.accessCodeData&&(!!(!c.checkout.orderData.accessCodeData.contractSignRequired||c.checkout.orderData.contract&&c.checkout.orderData.contract.valid)&&!(c.checkout.orderData.accessCodeData.poaSignRequired&&(!c.checkout.orderData.poa||!c.checkout.orderData.poa.valid)))};var l=c.checkout.orderData;n.search().signedExternally&&c.checkIsAlreadyValid()&&(c.signData.signMethod="digital",l.contract&&(c.data.contract={b64:l.contract.b64,valid:!0,signed:!0}),l.poa&&(c.data.poa={b64:l.poa.b64,valid:!0,signed:!0})),c.autoSignMode&&function(){c.loading=!0;var e=new Image;e.onload=function(){c.signPadType="poa",c.signData.signMethod="digital",c.onSignConfirm(imageToB64(e),!0)},e.src="/assets/images/signed-digitally_"+a.data.current+".jpg"}(),c.onSignConfirm=function(t,n){c.signPadActive=!1,c.loading=!0;var o=c.signPadType,a=t.split(",")[1];if(!e.orderData[o+"Unsigned"])throw"Document doesnt exist: "+o;var d={accessCode:e.orderData.accessCodeData.accessCode,checkSum:e.orderData[o+"Unsigned"].checkSumValue,signatureDocumentList:[{binarySignData:a,signField:"CUST_SIGNATURE"}]};s.agentLoggedIn&&"contract"===o&&"postpaid"===c.prodInfo.product.type&&(d.signatureDocumentList.push({binarySignData:a,signField:"CUST_SIGNATURE_2"}),d.signatureDocumentList.push({binarySignData:a,signField:"CUST_SIGNATURE_3"})),e.orderData[o].signed=!1,delete c.data[o].fileType,i.post("signDoc",d).then(function(i){c.loading=!1,i&&i.checkSumValue&&(e.orderData[o].signed=!0,c.data[o].valid=!0,c.data[o].b64=t,e.orderData[o].valid=!0,e.orderData[o].checkSumValue=i.checkSumValue,n&&"poa"===o&&r.$emit("checkoutPoaSigned"))})},c.onSignCancel=function(){c.signPadActive=!1},c.showSignPad=function(e,t){c.signPadType=e,t||(c.signPadActive=!0)},c.saveDocument=function(t){return c.data[t].valid=!1,e.orderData[t]&&(e.orderData[t].signed=!1),c.data[t].documentType=t,c.loading=!0,e.saveCaptureData(c.data[t]).then(function(n){c.loading=!1,n?(e.orderData[t]=c.data[t],e.orderData[t].signed=!0):(e.orderData[t]=null,c.data[t].b64=void 0),c.data[t].valid=!!n})},c.checkIfCanAutoOpenSignPad=function(){e.orderData.accessCodeData.contractSignRequired||c.showSignPad("poa"),e.orderData.accessCodeData.poaSignRequired||c.showSignPad("contract")},c.$watch("data.contract.b64",function(){if(c.data.contract.b64&&c.data.contract.fileType)return c.data.poa&&c.data.poa.b64&&c.data.poa.b64==c.data.contract.b64?(c.data.poa={},c.data.contract={},void t.add("error_duplicateDocumentsUploaded","bad")):void c.saveDocument("contract")}),c.$watch("data.poa.sendPhysicalPoa",function(){e.orderData.poa&&(e.orderData.poa.sendPhysicalPoa=c.data.poa.sendPhysicalPoa)}),c.$watch("data.poa.b64",function(){if(c.data.poa.b64&&c.data.poa.fileType)return c.data.contract&&c.data.contract.b64&&c.data.contract.b64==c.data.poa.b64?(c.data.poa={},c.data.contract={},void t.add("error_duplicateDocumentsUploaded","bad")):void c.saveDocument("poa")})}}}}]),app.directive("downloadApp",["$rootScope",function(e){return{restrict:"E",templateUrl:"/scripts/directives/download-app/dirc_download-app.html",link:function(t){e.isMobile&&(t.fadeIos=!isIOS,t.fadeAndroid=!isAndroid)}}}]),app.directive("downloadLinks",function(){return{templateUrl:"/scripts/directives/download-links/dirc_download-links.html",scope:{links:"="}}}),app.directive("easyLogin",["Authentication","$timeout","Chat","$rootScope","AgentAccount","$location","CustomerAccount","State","Language","Notifications","$translate","Storage","ZendeskChat","$q","$window","OpenID","ErrorReporting",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g,f,h,m){return{restrict:"E",templateUrl:"/scripts/directives/easy-login/dirc_easy-login.html",scope:{onSuccess:"=?",popupData:"=?"},link:function(u){function v(){t.cancel(u.timer)}u.data={type:"sms",msisdn:"",recoveryMode:l.get("recoveryMode")},u.rs=o,u.agent=i,u.state=s,u.isIOS=isIOS,u.chat=n,u.isTest=window.isTest;var b,w=r.search(),C=w.redirectPath?decodeURIComponent(w.redirectPath):void 0,y=w.redirectSearch?decodeURIComponent(w.redirectSearch):void 0;w.msisdn&&(u.data.msisdn=w.msisdn,w.autosubmit&&t(function(){return u.doEasyLogin()}));try{y&&(y=JSON.parse(y))}catch(e){throwSafe(e,"ID-137")}var D=decodeURIComponent(r.search().redirectHash);u.init=function(){var e;null!==(e=u.popupData)&&void 0!==e&&e.email&&(u.data.val=u.popupData.email,u.doEasyLogin())},u.doEasyLoginMsisdn=function(){return b="07"+(u.data.val.match(/\d+(?:\.\d+)?/g)||[]).join("").slice(-8),10!==b.length?(d.add("error_ERR_INVALID_MSISDN","bad"),g.resolve(!1)):s.agentLoggedIn?e.posFindCustomerMsisdn(b):e.loginMsisdn(b)},u.doEasyLoginEmail=function(){return s.agentLoggedIn?e.posFindCustomerEmail(u.data.val):e.loginEmail(u.data.val)},u.doEasyLoginWithExtraInfo=function(){return u.data.msisdn||(u.data.msisdn=""),b="07"+(u.data.msisdn.match(/\d+(?:\.\d+)?/g)||[]).join("").slice(-8),10===b.length&&(u.loggingIn=!0,u.data.attemptExceeded=!1,u.data.allowResend=!1,s.agentLoggedIn?e.posFindCustomerEmail(u.data.val,u.data.msisdn).then(u.easyLoginResponse):e.loginEmail(u.data.val,u.data.msisdn).then(u.easyLoginResponse))},u.doEasyLogin=function(){var e;u.data.val||(u.data.val=""),u.data.type=u.data.val.indexOf("@")>-1?"email":"sms";var t=u.data.val.trim();if("testpromptrating"===t&&AppRate.promptForRating(),"sms"===u.data.type&&10===t.length&&!t.startsWith("07")&&t.match(/^[0-9]+$/))return u.initialValue=t,u.showRecovery();var n="email"===u.data.type?u.doEasyLoginEmail:u.doEasyLoginMsisdn;u.loggingIn=!0,u.data.attemptExceeded=!1,u.data.allowResend=!1,u.data.extraInfoRequired=!1,u.data.msisdn=void 0,null===(e=n())||void 0===e||e.then(u.easyLoginResponse)},u.easyLoginResponse=function(e){u.loggingIn=!1,e&&("ADDITIONAL_INFORMATION_REQUIRED"===e?u.data.extraInfoRequired=!0:"NO_ACTIVE_SUBS"===e?u.showRecovery():(u.data.secret=e.secret,u.data.codeSent=!0,u.data.timeRemaining=299,u.timer=t(function(){return u.data.allowResend=!0},1e3*u.data.timeRemaining)))},u.resend=function(){t.cancel(u.timer),delete u.data.timeRemaining,u.doEasyLogin()},u.doEasyLoginVc=function(){if(v(),!u.loggingIn){u.loggingIn=!0;(s.agentLoggedIn?e.checkCodePos:e.checkCode)(u.data.code,u.data.secret).then(function(t){return t?-1!==r.url().indexOf("/tv-login")?h.complete(r.search().oidcJwt,t).then(function(e){if(e.error){if(u.loggingIn=!1,!e.error)try{m.reportThrowSafe("YDT-1975 OPENID[".concat(path,"] - error code: ").concat(null===e||void 0===e?void 0:e.errorCode," here is the response we got : ").concat(JSON.stringify(e)),2349349)}catch(e){}return d.add(e.error||"open-id-error-"+e.error,"bad")}return f.location.href=e.data.redirectUrl}):"ERR_TOO_MANY_CODE_REQUESTS"==t?(u.data.attemptExceeded=!0,u.loggingIn=!1):t.error?u.loggingIn=!1:void(u.onSuccess?(u.onSuccess(t),s.agentLoggedIn&&e.logoutSelfcare()):a.getLoginDataFromRfeAndDoLoginResponse(b).then(function(){if(u.loggingIn=!1,!o.checkoutMode.active&&!s.agentLoggedIn){if(o.noLoginRedirect)return o.noLoginRedirect=!1;-1!==r.path().indexOf("/cockpit/login")&&r.path("/".concat(c.data.current,"/account/cockpit"));var e=window.testDealsAsHome?"/account/deals":"/account";if(C)return r.path(C).search(y||{}).hash(D);if(-1===r.path().indexOf("/protect")&&-1===r.path().indexOf("/account/")&&!o.stayOnPageAfterLogin){var t=a.getSubscriptionFromMsisdn(b);r.path("/".concat(c.data.current).concat(e)).search({id:null===t||void 0===t?void 0:t.id})}}})):u.loggingIn=!1})}},u.cancelEmail=function(){u.data.type="sms",t.cancel(u.timer)},u.enterCodeCancel=function(){u.data.type="sms",t.cancel(u.timer),delete u.data.timeRemaining,u.data.codeSent=!1},u.showRecovery=function(){u.enterCodeCancel(),u.cancelEmail(),u.data.recoveryMode=!0,l.set("recoveryMode",!0,!0),u.popupData&&(u.popupData.title="loginPageRecoveryTitle")},u.hideRecovery=function(){l.set("recoveryMode",!1,!0),u.data.recoveryMode=!1,u.popupData&&(u.popupData.title="loginPageTitle")},u.startZendeskChat=function(){u.loading=!0,p.startZendesk(!0,"support").then(function(){t(function(){return u.loading=!1},2e3)})};var S=o.$on("closingEasyLoginPopup",function(){return l.set("recoveryMode",!1,!0)});u.init(),u.$on("$destroy",function(){v(),S()})}}}]),app.directive("emailManagement",["CustomerAccount","Network","Notifications","CommonData",function(e,t,n,o){return{restrict:"E",templateUrl:"/scripts/directives/email-management/dirc_email-management.html",scope:{onDone:"="},link:function(i){var r;i.data={emailValid:!1},i.validationEmailSent=!1;var a=(null===(r=e.accountOwner)||void 0===r?void 0:r.emailAddress)||"";o.emailBlackList.find(function(e){return a.includes(e)})&&(a=""),i.model={email:a,emailChanged:!1},i.customerAccount=e,i.allDone=function(){return i.submitting=!0,e.doRefresh().then(function(){i.submitting=!1,i.onDone&&i.onDone()}).catch(function(){return i.submitting=!1})},i.sendActivationEmail=function(){i.submitting=!0},i.sentActivationEmail=function(t){i.submitting=!1,t&&(e.accountOwner.emailValidated=!0),i.validationEmailSent=!0},i.validationEmailSendingError=function(){n.add("error","bad"),i.submitting=!1},i.saveEmail=function(o){o&&(i.submitting=!0,t.post("updateUserInfo",{email:o.toLowerCase(),userId:e.accountOwner.id}).then(function(e){i.validationEmailSent=!0}).catch(function(e){n.add("error","bad")}).then(function(){i.submitting=!1}))}}}}]),app.directive("emailStatusInfo",["CustomerAccount","AgentAccount","State",function(e,t,n){return{restrict:"E",templateUrl:"/scripts/directives/email-status-info/dirc_email-status-info.html",scope:{},link:function(o){o.account=e,o.agent=t,o.state=n}}}]),app.directive("emailValidationSender",["Network","Notifications","CustomerAccount","Analytics","FeatureFlags",function(e,t,n,o,i){return{templateUrl:"/scripts/directives/email-validation-sender/dirc_email-validation-sender.html",scope:{user:"=",dontSetValidated:"=?",onSent:"=?",onError:"=?"},link:function(r){r.sendEmail=function(){r.sending||(r.sending=!0,i.get("Ayma-google-tag-manager-changes")&&o.dataLayerPush({event:"gtm visitor interaction",interaction_name:"send validation email"}),e.post("emailValidation",{userId:r.user.id},2,!0).then(function(e){r.sending=!1;var o="630"===e.errorCode;!e||e.errorCode&&!o?t.add("error_"+e.errorCode,"bad"):(t.add(o?"emailAlreadyValidated":"emailValidationSent","good"),r.onSent&&r.onSent(o),r.dontSetValidated||(n.accountOwner.emailValidated=!0))}).catch(function(e){r.sending=!1,r.onError?r.onError(e):t.add("error","bad")}))}}}}]),app.directive("endOfNextMonth",function(){return{transclude:!0,template:'{{date | date : "dd.MM.yyyy"}}',scope:{},link:function(e){e.date=new Date((new Date).addMonths(2).setDate(0))}}}),app.directive("esimQrCode",["$rootScope","Notifications",function(e,t){return{templateUrl:"/scripts/directives/esim-qr-code/dirc_esim-qr-code.html",scope:{subscription:"=subData"},link:function(n){n.showQrCode=!e.isMobile,n.codeTabData=[{key:"ios",title:"IOS"},{key:"android",title:"Android"}],n.tabOptions={activeTab:isAndroid?"android":"ios"},n.toggleQrCode=function(){n.showQrCode=!n.showQrCode},n.subscription.esimInfo.allowScan&&(n.subscription.getEsimQrCode().then(function(e){return n.qrCodeB64=e}),n.qrCodeLink=n.subscription.getEsimQrCodeLink(),n.iosQrCodeSmDp="snr.prod.ondemandconnectivity.com",n.iosQrCodeAcivationCode=n.qrCodeLink.split(".com$")[1]),n.copyQrCodeLink=function(e){var n=document.createElement("input");document.body.appendChild(n),n.value=e,n.select(),n.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(n),t.add("qrCodeLinkCopied","good")}}}}]),app.directive("esimStatus",["Notifications","$rootScope",function(e,t){return{templateUrl:"/scripts/directives/esim-status/dirc_esim-status.html",scope:{subscription:"=sub",onEsimReset:"=?"},link:function(n){n.rs=t,n.subscription.esimInfo?(n.allowReset=n.subscription.esimInfo.allowReset,n.allowScan=n.subscription.esimInfo.allowScan,n.needsReset=n.subscription.esimInfo.needsReset,n.pending=n.subscription.esimInfo.pending):n.pending=!1,n.doReset=function(){n.loading=!0,n.subscription.resetEsim().then(function(t){var o;n.loading=!1,t&&e.add("esimResetSuccess","good"),null===(o=n.onEsimReset)||void 0===o||o.call(n)})}}}}]),app.directive("externalLinkSending",["Network","Language",function(e,t){return{template:'<div ng-include="template"></div>',scope:{msisdn:"=",accessCode:"=",type:"=",notRequired:"=",outboundMode:"=?",onDone:"=?",extraParams:"=?",noForm:"=?",onChange:"=?",startingNumber:"=?",compact:"=?"},link:function(n){n.data={externalLinkMsisdn:n.msisdn},n.template="/scripts/directives/external-link-sending/dirc_external-link-sending".concat(n.noForm?"":"-form",".html"),n.$watch("data.success",function(e,t){t&&!e&&n.onChange&&n.onChange()}),n.sendExternalLink=function(o){if(!n.loading&&o){n.loading=!0;var i={type:n.type,msisdn:o,language:t.data.current,accessCode:n.accessCode,extraParams:n.extraParams||""};e.post("sendIdvUrl",i).then(function(e){n.loading=!1,e&&(n.data.success=!0,n.onDone&&n.onDone("fromExternalLinkSending"))})}}}}}]),app.directive("faq",function(){return{transclude:!0,templateUrl:"/scripts/directives/faq/dirc_faq.html",scope:{faq:"=data"}}}),app.directive("fiberLinecheck",["Linecheck","State","CustomerAccount","$location","Language","$rootScope","Analytics","FeatureFlags","PrismicPopups",function(e,t,n,o,i,r,a,s,c){return{restrict:"E",templateUrl:"/scripts/directives/fiber-linecheck/dirc_fiber-linecheck.html",scope:{posMode:"=?",onDone:"=?",hideOtoSearch:"=?",forwardToProduct:"=?",titleKey:"=?",disablePrefill:"=?",address:"=?"},link:function(d){d.loading=!1,d.data={address:d.address||{},otoId:""},d.forwardToProduct=d.forwardToProduct||"yallo_home_max_fiber",d.data.selectedTab="address",d.state=t,d.titleKey=d.titleKey||"fiberTabsHeaderNoFiber",t.customerLoggedIn&&!d.disablePrefill&&(d.data.address=angular.copy(n.accountOwner.address)),s.get("YDT-721")&&(d.data.address.apiId=2),d.afterLinecheck=function(t){if(d.loading=!1,t){if(e.setGlobal(t),d.onDone)return d.onDone(r.globalLineCheckResults);d.redirect()}},d.submit=function(){d.loading||(d.loading=!0,"address"===d.data.selectedTab?e.lineCheck(d.data.address,void 0,!1,"checkout").then(function(e){a.fiberLineCheck(e,"address"),d.afterLinecheck(e)}):e.lineCheck(null,d.data.otoId,!1,"checkout").then(function(e){a.fiberLineCheck(e,"otoId"),d.afterLinecheck(e)}))},d.selectMaxProduct=function(){if("max"!==d.forwardToProduct)return d.forwardToProduct;switch(e.resolveProduct(r.globalLineCheckResults)){case"HFC":return"yallo_home_max_cable";case"fiber":return"yallo_home_max_fiber";case"MBB4G":return"yallo_home_4g";case"MBB5G":return"yallo_home_5g"}},d.redirect=function(){var e=d.selectMaxProduct();o.path("/".concat(i.data.current,"/eshop/new-postpaid/checkout/").concat(e))},d.showFindOtoIdHelpPopup=function(){c.popups.find(function(e){return"Find oto help popup"===e.data.display_name}).show()};var u=o.search(),l=JSON.parse(localStorage.getItem("kitsuneCheckout"));if(l)return e.linecheckFromLocalstorage(),d.afterLinecheck(r.globalLineCheckResults);u.streetName&&u.streetNumber&&u.city&&u.postCode&&!l&&(d.data.address={streetName:decodeURIComponent(u.streetName),streetNumber:decodeURIComponent(u.streetNumber),city:decodeURIComponent(u.city),postCode:decodeURIComponent(u.postCode)},d.submit())}}}]),app.directive("fiberStatus",["Network","Linecheck","Notifications","$q","CustomerOrders","Popup","CustomerAccount","PrismicPopups","$timeout","Language","FeatureFlags",function(e,t,n,o,i,r,a,s,c,d,u){return{templateUrl:"/scripts/directives/fiber-status/dirc_fiber-status.html",scope:{subscription:"=data"},link:function(l){var p=this;l.data={},l.lang=d,l.init=function(){l.daysTillFiberActive=differenceInDays(new Date,new Date(l.subscription.installationInfo.predictedActivationDate)),l.status=l.subscription.getFiberStatus(),"pluggedIn"===l.status&&(l.status="pluginRouter"),"waiting"!==l.status&&"waitingForBep"!==l.status||(l.loading=!0,i.getOrders(!0).then(function(){l.loading=!1;var e=l.subscription.calcActiveOrder();e&&-1===["SENDING_FF_ORDER","FF_ORDER_SENT","FF_ORDER_DELIVERED","Ready","Initial"].indexOf(e.status)?(l.order=e,l.status="shipmentUnderway","RETURN_ACCEPTED"===l.order.status&&(l.status="shipmentReturned")):"waitingForBep"!==l.status&&(l.status="waitingForWishDate")}))},l.submitWitoutOtoId=function(){return t.lineCheck(l.subscription.installationInfo.address,void 0,!1,"selfcare").then(function(e){var t;if("OTOREADY"===(null===(t=e.fiber)||void 0===t?void 0:t.orderIdState))return n.add("cantContinueWithoutOto","bad"),!1;if(l.submitting)return!1;l.submitting=!0;var o=new Date(l.subscription.installationInfo.requestDate);differenceInDays(new Date,o)<14&&(o=(new Date).addDays(14));var i=new Date(l.subscription.installationInfo.startDate);differenceInDays(new Date,i)<1&&(i=utcDate().addDays(.1));var r={subscriptionId:l.subscription.id,requestDate:o.toServerJSON(),startDate:i.toServerJSON(),address:l.subscription.installationInfo.address};return l.doSubmit(r)})},l.submitOtoId=function(){return l.submitting?o.resolve(!1):(l.submitting=!0,t.lineCheck(void 0,l.data.otoId,!1,"selfcare").then(function(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.fiber)&&void 0!==t&&t.available){if("BEPREADY"===e.fiber.orderIdState)return p.scope.submitWitoutOtoId();var o=angular.copy(l.subscription.installationInfo.address),i=angular.copy(e.fiber.address);if(o.streetName=simplifyStreetName(o.streetName),i.streetName=simplifyStreetName(i.streetName),o.streetNumber&&(o.streetNumber=o.streetNumber.toLowerCase()),i.streetNumber&&(i.streetNumber=i.streetNumber.toLowerCase()),console.log(o.streetName," | ",i.streetName),window.ignoreStreetNameMissmatch&&(o.streetName=i.streetName),console.log("comparing postcodes : "+o.postCode+" with "+i.postCode+" and address "+o.streetName+" with "+i.streetName+" and streetnumber "+o.streetNumber+" with "+i.streetNumber),o.postCode==i.postCode&&o.streetName==i.streetName&&o.streetNumber==i.streetNumber){var r=new Date(l.subscription.installationInfo.requestDate);differenceInDays(new Date,r)<14&&(r=(new Date).addDays(14));var a=new Date(l.subscription.installationInfo.startDate);differenceInDays(new Date,a)<1&&(a=utcDate().addDays(.1));var s={subscriptionId:l.subscription.id,requestDate:r.toServerJSON(),startDate:a.toServerJSON(),otoId:l.data.otoId,address:l.subscription.installationInfo.address};if(u.get("Fiber-layer-priority")){var c,d,g,f,h,m,v,b;s.installationCode=(null===(c=e.fiber)||void 0===c?void 0:null===(d=c.l1)||void 0===d?void 0:d.accessType)||(null===(g=e.fiber)||void 0===g?void 0:null===(f=g.l3)||void 0===f?void 0:f.accessType),s.tspId=(null===(h=e.fiber)||void 0===h?void 0:null===(m=h.l1)||void 0===m?void 0:m.tspId)||(null===(v=e.fiber)||void 0===v?void 0:null===(b=v.l3)||void 0===b?void 0:b.tspId)}return l.doSubmit(s)}n.add("otoIdAddressDoesntMatch","bad"),console.log("error here 1"),l.submitting=!1}else n.add("otoIdAddressFiberNotAvailable","bad"),console.log("error here 2"),l.submitting=!1}))},l.doSubmit=function(t,o){return o||(o=1),delete t.address.streetUnitType,["addressCode","streetType"].forEach(function(e){return null===t||void 0===t||delete t.address[e]}),e.post("updateOtoId",t,2,!0).then(function(e){("822"===(null===e||void 0===e?void 0:e.errorCode)||"710"===(null===e||void 0===e?void 0:e.errorCode))&&o<4?c(function(){return l.doSubmit(t,o+1)},2e4):(null!==e&&void 0!==e&&e.errorCode&&n.add("error_"+e.errorCode,"bad"),l.afterDoSubmit())})},l.afterDoSubmit=function(){return a.doRefresh().then(function(){l.submitting=!1,l.init()})},l.showContinueWithoutPopup=function(){var e=new r("noFiberPopup","selfcare-no-fiber-popup.html",{hideHeader:!0,classes:["no-header"]},{confirm:function(){e.data.loading=!0,l.submitWitoutOtoId().then(function(){e.data.loading=!1,e.hide()})}});e.show()},l.showFindOtoIdHelpPopup=function(){s.popups.find(function(e){return"Find oto help popup"===e.data.display_name}).show()},l.init()}}}]),app.directive("ngFileModel",["$parse","$timeout",function(e,t){return{restrict:"A",link:function(n,o,i){var r=e(i.ngFileModel),a=i.multiple,s=r.assign;o.bind("change",function(){var e=[];angular.forEach(o[0].files,function(t){var n={name:t.name,size:t.size,url:URL.createObjectURL(t),_file:t};e.push(n)}),a?s(n,e):s(n,e[0]),t()})}}}]),app.directive("fileread",["Notifications","$timeout",function(e,t){return{restrict:"A",scope:{fileread:"=",fileName:"=?",targetResolution:"=",maxSize:"=",selector:"=?",dontRenameFile:"=?"},link:function(n,o,i){function r(e){e.preventDefault(),e.stopPropagation()}function a(){l&&l.classList.add("drop-hover")}function s(){l&&l.classList.remove("drop-hover")}function c(e){if(e.dataTransfer.items&&e.dataTransfer.items.length){var t=e.dataTransfer.items[0].getAsFile();n.applyImage(t.name,t)}}function d(){chooser.getFile((-1!==p.indexOf("jpg")?"image/*":"")+(-1!==p.indexOf("pdf")?"application/pdf":"")).then(function(e){if(e){var t=e.uri.split(".").pop();u(e.dataURI,t)}})}function u(i,r){if(!i||-1==p.indexOf(r.toLowerCase()))return n.fileName="",e.add("error_687","bad"),void(o[0].value="");["png","jpg","jpeg"].indexOf(r.toLowerCase())>-1?(n.fileread.loading=!0,t(),resizeToBytes(i,n.targetResolution,n.maxSize).then(function(e){n.fileread.fileType="jpeg",n.fileread.b64=e,n.fileread.loading=!1,t()})):(n.fileread.fileType=r,n.fileread.b64=i,t())}var l,p=i.accept.split(" ").join("").split(".").join("").split(",");n.selector&&t(function(){l=document.querySelector(n.selector),dragDropSupported()&&n.selector&&l&&(l.addEventListener("drag",r),l.addEventListener("dragstart",r),l.addEventListener("dragend",r),l.addEventListener("dragover",r),l.addEventListener("dragenter",r),l.addEventListener("dragleave",r),l.addEventListener("drop",r),l.addEventListener("dragover",a),l.addEventListener("dragenter",a),l.addEventListener("dragend",s),l.addEventListener("dragleave",s),l.addEventListener("drop",s),l.addEventListener("drop",c),n.$on("$destroy",function(){l.removeEventListener("drag",r),l.removeEventListener("dragstart",r),l.removeEventListener("dragend",r),l.removeEventListener("dragover",r),l.removeEventListener("dragenter",r),l.removeEventListener("dragleave",r),l.removeEventListener("drop",r),l.removeEventListener("dragover",a),l.removeEventListener("dragenter",a),l.removeEventListener("dragend",s),l.removeEventListener("dragleave",s),l.removeEventListener("drop",s),l.removeEventListener("drop",c)}))}),o.bind("change",function(e){var t=o[0].value;n.applyImage(t,e.target.files[0])}),window.cordova&&"android"===window.cordova.platformId&&window.chooser&&(o[0].addEventListener("click",d),n.$on("$destroy",function(){o[0].removeEventListener("click",d)})),n.applyImage=function(t,i){if(i&&i.name){if(!(i instanceof Blob))return n.dontRenameFile||(n.fileName=""),e.add("error_687","bad"),void(o[0].value="");var r=new FileReader;r.onload=function(e){var o=e.target.result;t=t.indexOf("/")>-1?t.split("/"):t.indexOf("\\")>-1?t.split("\\"):[t],n.fileName=t[t.length-1];var i=n.fileName.split(".");i=i[i.length-1],n.fileread.name=n.fileName,u(o,i)},r.readAsDataURL(i)}}}}}]),app.directive("finalPricingInfo",["$rootScope","AgentAccount","Products","$routeParams","CustomerAccount","State","FeatureFlags",function(e,t,n,o,i,r,a){return{templateUrl:"/scripts/directives/final-pricing-info/dirc_final-pricing-info.html",scope:{config:"=",deviceOption:"=?",paymentMethod:"=?",togglable:"=?",extension:"=?",outputData:"=?",hideActivationFee:"=?",sub:"=?",fiberLineCheck:"=?"},link:function(s,c){s.agent=t,s.account=i,s.state=r,s.rs=e,s.showInflationMessage=a.get("showInflationStatus"),s.prodInfo=Object.first(s.config.products),s.sub&&!s.prodInfo.promotion&&s.prodInfo.product.url===s.sub.getProduct().url&&s.sub.returnWhenRecommendationsLoaded().then(function(){s.currentPromo=s.sub.getCurrentDiscountPromo(),s.calcCosts()}),s.extension||(s.extension=["extend-postpaid","change-postpaid","add-promo"].indexOf(o.ordertype)>-1),s.isSelfRegistration="self-register"===o.logintype,s.getFirstProduct=function(){if(s.config)return s.prodInfo=Object.first(s.config.products),Object.first(s.config.products)},s.calcCosts=function(){if(s.config){var o=n.computeAllPrices(s.config.products,s.extension,s.paymentMethod,t,s.deviceCostData,s.config.rateplanChangeData,s.hideActivationFee);s.totalChargedAtPos=o.totalChargedAtPos,s.totalrecurringCost=o.totalrecurringCost,s.totalUpfrontCost=o.totalUpfrontCost,s.totalCreditCardCost=o.totalCreditCardCost,s.totalRecurringDiscount=o.totalRecurringDiscount,s.totalUpfrontDiscount=o.totalUpfrontDiscount,s.simPrice=o.simPrice,s.handsetInsurance=o.handsetInsurance,s.rateplanChangeFee=o.rateplanChangeFee,s.rateplanChangeAdminFee=o.rateplanChangeAdminFee,s.currentPromo&&(s.totalRecurringDiscount+=s.currentPromo.amount),s.outputData&&(s.outputData.totalChargedAtPos=o.totalChargedAtPos,s.outputData.totalrecurringCost=o.totalrecurringCost,s.outputData.totalUpfrontCost=o.totalUpfrontCost,s.outputData.totalCreditCardCost=o.totalCreditCardCost,s.outputData.totalRecurringDiscount=o.totalRecurringDiscount,s.outputData.totalUpfrontDiscount=o.totalUpfrontDiscount,s.outputData.simPrice=o.simPrice,s.outputData.handsetInsurance=o.handsetInsurance,s.outputData.rateplanChangeFee=o.rateplanChangeFee,s.outputData.rateplanChangeAdminFee=o.rateplanChangeAdminFee),e.$emit("pricingInfo",o)}},s.$watch("deviceOption",function(){s.getDevicePrice()}),s.$watch("prodInfo.device",function(){s.getDevicePrice()}),s.$watch("paymentMethod",function(){s.getDevicePrice()}),s.$watch("prodInfo.promotion",function(){s.getDevicePrice()}),s.getDevicePrice=function(){if(s.deviceOption)return s.deviceCostData=s.deviceOption,!0;if(!Object.first(s.config.products))return!0;var e=Object.first(s.config.products).config,t=Object.first(s.config.products).device;return t?!(!s.deviceCostData||s.deviceCostData.id!=t.id+""+e.id)||(s.deviceCostData={id:t.id+""+e.id},n.getDevicePrice(t,e,s.extension).then(function(n){n&&(s.deviceCostData=n,s.deviceCostData.id=t.id+""+e.id,s.calcCosts())}),!0):(delete s.deviceCostData,!0)},s.pricingLiCount=function(e){return c[0].querySelectorAll("."+e+" li").length}}}}]),app.directive("findExistingCustomer",["Network","AgentAccount","CustomerAccount","$location","Storage","Notifications","$timeout","$cookies","Language","CommonData","$rootScope","State",function(e,t,n,o,i,r,a,s,c,d,u,l){return{transclude:!0,templateUrl:"/scripts/directives/find-existing-customer/dirc_find-existing-customer.html",scope:{onSuccess:"=?",pickupMode:"=?",mode:"=?",dob:"=?",username:"=?",firstName:"=?",lastName:"=?",forward:"=?",autologin:"=?"},link:function(p){if(p.urlParams=o.search(),p.agent=t,p.editable=!0,t.searchData={dob:{}},p.data=t.searchData,p.showCustomerSelection=!1,p.tabs=[{title:"findBySms",key:"findBySms"},{title:"altFindByUsername",key:"altFindByUsername"},{title:"findByName",key:"findByName"}],p.tabOptions={activeTab:"name"==p.mode?"findByName":"msisdn"==p.mode?"altFindByUsername":"findBySms"},p.pickupMode&&(p.tabOptions.activeTab="altFindByUsername"),p.rs=u,p.enableFullScreenLoader=u.pretendFullScreenLoading,u.pretendFullScreenLoading=!1,p.data.username=p.username,p.dob){var g=p.dob;p.data.dob.day=1*g.substring(8,10),p.data.dob.month=g.substring(5,7),p.data.dob.year=g.substring(0,4)}p.firstName&&(p.data.firstName=p.firstName),p.lastName&&(p.data.lastName=p.lastName),a(function(){p.enableFullScreenLoader&&(u.pretendFullScreenLoading=!0),p.enableFullScreenLoader=!1;var n=p.forward||!0;if(p.autologin&&p.dob&&p.username)u.pretendFullScreenLoading=!0,p.find(n).then(function(){return u.pretendFullScreenLoading=!1});else{if(p.urlParams&&p.urlParams.username)return u.pretendFullScreenLoading=!0,e.returnWhenNoOpenRequests().then(function(){return t.getExistingCustomer(p.urlParams.username).then(function(e){if(e)return l.checkCustomerLoggedIn().then(function(){i.set("x-pos-cust-username",p.urlParams.username),i.set("x-new-pos-search",!0),p.handleSuccess(e,n).then(function(){u.pretendFullScreenLoading=!1,p.editable=!0})});p.editable=!0})});p.autologin&&p.dob&&p.firstName&&p.lastName?(p.tabOptions.activeTab="findByName",u.pretendFullScreenLoading=!0,p.find(n).then(function(){return u.pretendFullScreenLoading=!1})):(u.pretendFullScreenLoading=!1,!u.app&&focusFirstField())}}),d.tempIdCheckResult&&d.tempIdCheckResult.checked?d.tempIdCheckResult=void 0:d.tempIdCheckResult&&(d.tempIdCheckResult.checked=!0),p.find=function(t){var n=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],angular.copy(p.data));return"altFindByUsername"==p.tabOptions.activeTab||t?(delete n.firstName,delete n.lastName):delete n.username,n.dob=objToDate(n.dob,!0).toServerJSON(),p.editable=!1,e.post("findExistingCustomer",n).then(function(e){if(p.editable=!0,e)if(1===e.accounts.length){var n=e.accounts[0];if(n.username)return p.selectAccount(n,t);r.add("error","bad"),throwSafe("no username","21-id")}else e.accounts.length>1?(p.showCustomerSelection=!0,p.accounts=e.accounts):r.add("error_noAccountsFound","bad");else o.path().newCustomerOnContinue&&o.path("/"+c.data.current+"/pos/new-customer").search({})})},p.selectAccount=function(e,n){return p.editable=!1,t.foundAccounts=[],i.set("x-pos-cust-username",e.username),t.getExistingCustomer(e.username).then(function(e){if(e)return l.checkCustomerLoggedIn().then(function(){p.handleSuccess(e,n).then(function(){p.editable=!0})});p.editable=!0})},p.handleSuccess=function(e,a){return s.put("posFoundCustomer","true",cookieOptions),e.username=i.get("x-pos-cust-username"),i.remove("posCustDetails"),i.remove("x-pos-cust-username"),i.set("posCustDetails",angular.copy(e)),n.processLoginResponse(e,void 0,void 0,void 0,"find-existing-customer"),t.customer=n,n.doneCheckingLoggedIn(!0).then(function(){if(p.resetFields(),p.onSuccess)return p.onSuccess();!0===a?o.path("/"+c.data.current+"/pos/existing-customer").search({}).replace():"string"==typeof a&&a.match(/^\//)?o.path("/"+c.data.current+a).search({}).replace():o.path("/"+c.data.current+"/pos/existing-customer").search({}),r.add("posCustomerFoundTitle","good")})},p.onCancel=function(){p.showCustomerSelection=!1},p.resetFields=function(){p.data.username="",delete p.data.dob.day,delete p.data.dob.month,delete p.data.dob.year,p.data.firstName="",p.data.lastName=""},p.easyLoginSuccess=function(){e.post("getAccountDetails",{}).then(function(e){e&&p.handleSuccess(e)})}}}}]),
app.directive("siteFooter",["$rootScope","AgentAccount","$location","NewsLetter","CustomerAccount","State","FeatureFlags",function(e,t,n,o,i,r,a){return{templateUrl:"/scripts/directives/footer/dirc_footer.html",link:function(s){s.account=i,s.state=r,s.agent=t,s.location=n,s.news=o,s.rs=e,s.year=(new Date).getFullYear(),s.isBlackFriday=a.get("BlackFriday-release")}}}]),app.directive("footerContact",["Chat",function(e){return{templateUrl:"/scripts/directives/footer-contact/dirc_footer-contact.html",scope:{},link:function(t){t.chat=e}}}]),app.directive("forceActivate",["Network","Notifications","$location","$window",function(e,t,n,o){return{templateUrl:"/scripts/directives/force-activate/dirc_force-activate.html",link:function(i){i.activate=function(){if(!i.submitting){i.submitting=!0;var r={msisdn:i.msisdn,puk1:i.puk};e.post("simActivation",r).then(function(e){i.submitting=!1,e&&(t.add("forceActivateSuccess","good"),n.path("/auth/login"),o.location.reload())})}}}}}]),app.directive("form",["$translate","$q","smoothScroll",function(e,t,n){return{restrict:"E",scope:{customValidation:"=?"},link:function(o,i){o.checkFormErrors=function(){var n,r=Array.prototype.slice.call(i[0].querySelectorAll("div.error-element")),a=_createForOfIteratorHelper(r);try{for(a.s();!(n=a.n()).done;){var s=n.value;s.parentElement.removeChild(s)}}catch(e){a.e(e)}finally{a.f()}var c=[];if(o.customValidation){var d=o.customValidation.$error;for(var u in d){var l,p=_createForOfIteratorHelper(d[u]);try{for(p.s();!(l=p.n()).done;){(function(){var n=l.value,o=n.$$element[0];if(o.hasAttribute("dont-show-errors"))return"continue";var i=o.parentElement,r=document.createElement("div");r.classList.add("error-element");var a=u;"pattern"!==u&&"minlength"!==u&&"maxlength"!==u||!o.hasAttribute("validation-type")||(a="pattern_"+o.getAttribute("validation-type")),"co"!==o.getAttribute("validation-type")||"pattern"!==u&&"minlength"!==u&&"maxlength"!==u||(a=u+"_"+o.getAttribute("validation-type")),e("input_error_"+a).then(function(e){if(r){if(c.indexOf(o)>-1)return t.reject("input_error_"+a);c.push(o),r.innerText=e,i.appendChild(r)}}).catch(function(e){return console.warn(e)})})()}}catch(e){p.e(e)}finally{p.f()}}}},i.on("submit",function(){o.formWatcher&&o.formWatcher(),o.formWatcher=o.$watch(function(){if(!o.customValidation)return!0;var e=0;for(var t in o.customValidation.$error)e+=o.customValidation.$error[t].length;return e},function(){o.customValidation&&(o.checkFormErrors(),0===Object.size(o.customValidation.$error)&&o.formWatcher())},!0);var e=i[0].querySelector(".ng-invalid:not(form)");e&&(-1!==["radio","checkbox","select-one","sign-pad-container"].indexOf(e.type)?n(e.parentElement,{offset:siteHeaderHeight()+20}):(n(e.parentElement,{offset:siteHeaderHeight()+20}),e.focus&&e.focus()),o.checkFormErrors())})}}}]),app.directive("formatDate",["Language",function(e){return{templateUrl:"/scripts/directives/format-date/dirc_format-date.html",restrict:"E",scope:{format:"@?",date:"@?",longFormat:"=?"},link:function(t){var n={de:"de-ch",en:"en-gb",fr:"fr-ch",it:"it-ch"};t.options={weekday:"long",year:"numeric",month:"long",day:"numeric"},t.locale=n[e.data.current],t.format||(t.format="dd.MM.yyyy"),t.date?t.dateObj=new Date(t.date):t.dateObj=new Date}}}]),app.directive("gdprAllOptIn",["Gdpr","State",function(e,t){return{templateUrl:"/scripts/directives/gdpr-all-opt-in/dirc_gdpr-all-opt-in.html",scope:{data:"=",editable:"=",orderData:"=?"},link:function(t){e.showOptAllIn().then(function(e){t.show=e})}}}]),app.directive("fullHeight",function(){return{link:function(e,t,n){e.$watch(function(){"true"===n.fullHeight&&(t[0].style.height=window.innerHeight+"px")})}}}),app.directive("gdprCookie",["Storage","$rootScope","Popups","$window","ZendeskChat",function(e,t,n,o,i){return{restrict:"E",templateUrl:"/scripts/directives/gdpr-cookie/dirc_gdpr-cookie.html",link:function(r){var a="gdprAccepted",s=0;r.userAccepted=e.get(a),r.accepted=function(){e.set(a,!0),r.closing=!0,setTimeout(function(){r.userAccepted=!0,"cookie-policy"===t.currentPage&&o.history&&o.history.back(),r.$digest()},300)},setTimeout(function(){return s=!0},500),r.showGdpr=function(){var e=["forgot-username","reset-password","app-login","forgot-password","unsubscribe-email","signing","sign","idv","idp","idv-scan","idp-scan","for-you","s","internet-deal-form"];return t.showGdpr=!window.e2e&&s&&0===n.activePopups().length&&!r.userAccepted&&!1===t.mobileMenuToggled&&!t.isPos&&!t.checkoutMode.active&&!i.isShown&&!t.winMode&&!t.app&&-1===e.indexOf(t.currentPage)&&!window.noFixed,t.showGdpr}}}}]),app.directive("handsetInsuranceAdd",["Network","SavingsOptions","Notifications","Reporting","$location","Analytics","CustomerAccount","FeatureFlags",function(e,t,n,o,i,r,a,s){return{templateUrl:"/scripts/directives/handset-insurance-add/dirc_handset-insurance-add.html",scope:{subscription:"=sub",onCancel:"="},link:function(c){c.data={},c.SavingsOptions=t,c.currentModel=null,c.currentManufacturer=null,c.updateModel=function(e){c.currentModel=e,s.get("Ayma-google-tag-manager-changes")&&r.fireCustomPurchaseEvent("add_to_cart",e,c.SavingsOptions.insuranceOption.category,"".concat(a.getCurrentSubscription().type," mobile"),c.SavingsOptions.insuranceOption.cost,"1",c.SavingsOptions.insuranceOption.id,null,"unavailable")},c.init=function(){c.data.loading=!0;var t={};e.post("getInsuranceDeviceList",t).then(function(e){c.data.loading=!1,c.data.manufacturers=e?e.manufacturers:[]})},c.getModels=function(t){c.data.model="",c.data.gettingModels=!0,c.currentManufacturer=t;var n={manufacturer:t};e.post("getInsuranceDeviceList",n).then(function(e){c.data.gettingModels=!1,c.data.models=e?ArrNoDupe(e.models):[]})},c.addInsurance=function(){if(!c.data.loading){var d=c.subscription.hardwareInsurance;c.data.loading=!0;var u={subscriptionId:c.subscription.id,optionId:d&&40===d.statusId?t.insuranceReactivationOption.id:t.insuranceOption.id||void 0,model:c.data.model,manufacturer:c.data.manufacturer},l=d&&40!==d.statusId?"updateInsurance":"activateOption";e.post(l,u).then(function(e){s.get("Ayma-google-tag-manager-changes")&&r.fireCustomPurchaseEvent("begin_checkout",c.currentModel,c.SavingsOptions.insuranceOption.category,"".concat(a.getCurrentSubscription().type," mobile"),c.SavingsOptions.insuranceOption.cost,"1",c.SavingsOptions.insuranceOption.id,null,"unavailable"),c.data.loading=!1,e&&(s.get("Ayma-google-tag-manager-changes")&&r.fireCustomPurchaseEvent("purchase",c.currentModel,c.SavingsOptions.insuranceOption.category,"".concat(a.getCurrentSubscription().type," mobile"),c.SavingsOptions.insuranceOption.cost,"1",c.SavingsOptions.insuranceOption.id,null,"unavailable"),n.add("insuranceAdded","good"),c.subscription.getData(c.subscription.id),o.reportCioEvent("insurance"),i.path("/account").search({id:c.subscription.id}),c.onCancel())})}},c.init()}}}]),app.directive("globalLinecheckResults",["$rootScope","State",function(e,t){return{restrict:"E",templateUrl:"/scripts/directives/global-linecheck-results/dirc_global-linecheck-results.html",scope:{},link:function(n,o,i){n.rs=e,n.state=t,n.network=i.network,n.type="mobile"}}}]),app.directive("handsetStockCounter",["Network","State","$interval",function(e,t,n){return{templateUrl:"/scripts/directives/handset-stock-counter/dirc_handset-stock-counter.html",scope:{deviceId:"@?",inline:"=?"},link:function(o){o.state=t,o.loading=!0;var i;o.updateDeviceStock=function(){var t=o.deviceId?{deviceId:[parseInt(o.deviceId)]}:{};return e.post("get_device_inventry_balance",t,2,!0,window.oldEshopBasePath,"application/json",!0,!1).then(function(e){e.errorCode&&-1!=e.errorCode&&throwSafe(e,"ID-145"),e&&e.length>0&&(o.stock=e.reduce(function(e,t){return e+=Math.max(0,t.availableQty)},0))})},o.updateDeviceStock().then(function(){i=n(function(){o.updateDeviceStock()},3e5)}).catch(function(e){return throwSafe(e,"ID-144")}).finally(function(){o.loading=!1}),o.$on("$destroy",function(){n.cancel(i)})}}}]),app.directive("siteHeader",["$location","$window","Checkout","$timeout","Redirect",function(e,t,n,o,i){return{templateUrl:"/scripts/directives/header/dirc_header.html",controller:["$scope","CustomerAccount","AgentAccount","$rootScope","Analytics","State","FeatureFlags",function(r,a,s,c,d,u,l){r.account=a,r.agent=s,r.location=e,r.checkout=n,r.rs=c,r.dropdownclose=!1,r.state=u,r.isBlackFriday=l.get("BlackFriday-release"),r.isNewIdentity=l.get("new-identity-login"),r.showHalloweenLogo=!0,c.isPos&&(r.showHalloweenLogo=!1),Date.now()<new Date(2021,9,26).getTime()&&(r.showHalloweenLogo=!1),Date.now()>new Date(2021,10,1).getTime()&&(r.showHalloweenLogo=!1),r.closeDropdown=function(){r.dropdownclose=!0,o(function(){r.dropdownclose=!1},800)},r.interaction=function(e){d.fireGaInteraction("menu interaction",{menu_location:"sideDropdown",menu_item:e})},r.canGoBack=function(){var t=e.path();return t.indexOf("/pos/")<0&&t.indexOf("/pos-login")<0&&t.indexOf("/app-login")<0&&(t.indexOf("/account")<0||t.length>14)},r.disableBeforeUnload=function(){window.onbeforeunload=function(e){},setTimeout(function(){window.dontWarnBeforeLeaveCheckout||(window.onbeforeunload=function(e){return"Sure?"})},100)},r.back=function(){t.history.back()},r.msLogin=function(){var e=window.microServiceEndpoint.split("-")[0]+".dev."+brand+".ch/auth/login",t=window.isTest;i.redirect(t?e:"/auth/login")}}]}}]),app.directive("hfcSubscription",["CustomerAccount","CustomerOrders","Popup",function(e,t,n){return{transclude:!0,templateUrl:"/scripts/directives/hfc-subscription/dirc_hfc-subscription.html",scope:{subscription:"=data"},link:function(o){o.subscription.setActive(),o.subscription.orders&&o.subscription.orders.length&&(o.order=o.subscription.orders[0]),o.daysTillFiberActive=differenceInDays(new Date,new Date(o.subscription.installationInfo.predictedActivationDate)),o.returnHandlingPopup=new n("returnHandlingPopup","return-handling-popup.html",{title:"returnHandlingPopupTitle",address:{},billingAddress:{},firstName:o.subscription.user.firstName,lastName:o.subscription.user.lastName},{submit:function(){var n;o.returnHandlingPopup.data.submitting||(o.returnHandlingPopup.data.submitting=!0,t.retryOrder(null===(n=o.order)||void 0===n?void 0:n.orderId,o.returnHandlingPopup.data.address).then(function(t){t?e.refreshOrders().then(function(){if(o.returnHandlingPopup.data.differentBillingAddress){var t=e.accountOwner,n={country:o.returnHandlingPopup.data.billingAddress.country,city:o.returnHandlingPopup.data.billingAddress.city,postCode:o.returnHandlingPopup.data.billingAddress.postCode,streetName:o.returnHandlingPopup.data.billingAddress.streetName,streetNumber:o.returnHandlingPopup.data.billingAddress.streetNumber||void 0,co:o.returnHandlingPopup.data.billingAddress.co||""};t.updateInfo(n).then(function(){o.returnHandlingPopup.data.submitting=!1,o.returnHandlingPopup.hide()})}else o.returnHandlingPopup.data.submitting=!1,o.returnHandlingPopup.hide()}):o.returnHandlingPopup.data.submitting=!1}))}})}}}]),app.directive("icon",["$http","$templateCache",function(e,t){return{restrict:"A",link:function(n,o,i){var r=function(){var n=i.icon;e.get("/assets/images/icons/"+n+".svg",{cache:t}).then(function(e){o[0].innerHTML='<div class="custom-svg-icon '.concat(o[0].className||"",'">').concat(e.data,"</div>")}).catch(function(e){if(!e||!e.status)throw e;if(-1!==e.status)throw e})};n.$watch(function(){return i.icon},r)}}}]),app.directive("idCheck",["Identification","AgentAccount","Camera","$timeout","CommonData","Network","Language","$q","$rootScope","Checkout","Notifications","Analytics","Products","CustomerAccount","State","$interval","smoothScroll","$translate","Storage","$location","FeatureFlags",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g,f,h,m,v,b,w,C){return{templateUrl:"/scripts/directives/id-check/dirc_id-check.html",scope:{captureMode:"=?",blockCaptureModeChange:"=?",outputData:"=",productId:"=",promotionCode:"=?",deviceId:"=?",takeFaceVideo:"=?",accessCodeData:"=",onDone:"=",isPostpaid:"=?",onCancel:"=?",isExternal:"=?",eventCategory:"=?",externalLinkMsisdn:"=?",channel:"=?",minAge:"=?",showsReturn:"=?",arrowBack:"=?"},link:function(y,D){function S(){setTimeout(function(){o(function(){y.loading=!1,y.dontWorryAboutLoadingTime=!1},1)},1)}function I(){o()}y.state=f,y.maxTries=4,y.rs=c,y.outputData.done=!1,y.Identification=e,y.agent=t,y.Camera=n,y.webcamRestartCount=0,y.idData={selectedNationalityType:"swiss"},y.$watch("idData.selectedNationalityType",function(){y.idData.selectedidType="swiss"===y.idData.selectedNationalityType?"id-card":"eu-id-card"}),y.triggerTakePicturesAnalytics=function(){C.get("Ayma-google-tag-manager-changes")&&l.dataLayerPush({event:"gtm visitor interaction",interaction_name:"id check - take picture"})},y.$watch(function(){return y.data.captureMode&&!y.blockCaptureModeChange&&y.agent.allowFileIdValidation(!0)&&!y.rs.app},function(e){y.showsReturn=e}),y.scrolltoCameraButton=function(){var e=D[0].querySelector("#photoscroll");if(e&&window.innerWidth<640){var t=document.querySelector("popup");t?t.scrollTop=1e5:m(e,{offset:100,duration:300})}},y.reverseSetPos=function(){return y},y.setMobileSidewaysScrollPos=function(e){y.idPos=e;var t;t="world"===y.idData.selectedNationalityType?y.isPostpaid?["eu-id-card","eu-passport","plastic-permit","paper-permit"]:["eu-id-card","passport","plastic-permit","paper-permit"]:["id-card","swiss-passport"],y.idData.selectedidType=t[e]},y.isPostpaid?y.idCardsWorld=[v.instant("euIdCardTitle"),v.instant("euPassportTitle"),v.instant("plasticPermitTitle"),v.instant("paperPermitTitle")]:y.idCardsWorld=[v.instant("euIdCardTitle"),v.instant("passportTitle"),v.instant("plasticPermitTitle"),v.instant("paperPermitTitle")],loadScript("/assets/other/lottie-player.js"),y.data={captureMode:y.captureMode,blockCaptureModeChange:y.blockCaptureModeChange,currentStep:"side1",files:{side1:{},side2:{},selfie:{}},images:{side1:{},side2:{},selfie:{}},filteredOutCheckSumValues:[]};var k=window.location.pathname;window.enableRectangleDetection&&(y.enableRectangleDetection=!0),y.productConfig=p.findProductById(y.productId),y.minAge||(y.minAge=g.getMinAge(y.productConfig)),y.channel||(y.channel=i.channel),y.$watch("data.files.side1.b64",function(){return y.fileUpload()}),y.$watch("data.files.side2.b64",function(){return y.fileUpload()}),y.$watch("data.captureMode",function(){return y.changeCaptureMode()}),y.$watch("data.currentStep",function(){return y.changeCurrentStep()}),y.$watch("data.files.selfie.b64",function(){return y.fileUpload(!0)}),isIOS&&y.$watch(function(){return window.innerHeight<window.innerWidth},function(){setTimeout(function(){return document.documentElement.scrollTop=0},100),setTimeout(function(){return document.documentElement.scrollTop=0},250),setTimeout(function(){return document.documentElement.scrollTop=0},500),setTimeout(function(){return document.documentElement.scrollTop=0},1e3)}),y.fileUpload=function(e){if(y.data.files[y.data.currentStep].b64&&!y.ignoreFileUpload){var t=y.data.files[y.data.currentStep].b64;return o(),b64ToImage(t).then(function(n){var i=n.width>n.height;return rotateImage(t,i).then(function(t){y.ignoreFileUpload=!0,y.data.files[y.data.currentStep].b64=t;return y.prepAndSaveImage(t,!0,!1,e,!0).then(function(e){y.ignoreFileUpload=!1,e?(y.data.partialConfirmMode=!0,y.data.confirmMode=!0):y.data.files[y.data.currentStep].b64=void 0,o()})})})}},y.changeCurrentStep=function(){y.calcInfoImage()},y.calcInfoImage=function(){y.infoImage=void 0,"paper"===y.idMode?"side2"===y.data.currentStep?y.infoImage={url:"/assets/images/id-card-paper-back.png"}:"side1"===y.data.currentStep&&(y.infoImage={url:"/assets/images/id-card-paper-front.png"}):"side2"===y.data.currentStep?y.infoImage={url:"/assets/images/id-card-back.png"}:"side1"===y.data.currentStep&&(y.infoImage={url:"/assets/images/id-card-front.png"})},y.webcamPicture=function(t,n,i,r){var a=0;if(1===i?y.scanStartTime=Date.now():a=Date.now()-y.scanStartTime,"gif"===n&&"selfie"===y.data.currentStep)return y.data.images.selfie&&y.data.images.selfie.b64?s.resolve({retry:!1}):(y.prepImage(t,n),y.loading=!0,e.saveCaptureData(y.data.images[y.data.currentStep],y.accessCodeData.accessCode,!0,!0).then(function(e){return y.loading=!1,e&&y.goToNextStep(!0),{retry:!1}}).catch(function(e){return y.loading=!1,throwSafe(e,"id-311-a"),{retry:!1}}));var c=i>=y.maxTries;return a<1500&&c&&(c=!1),a>5e3&&!c&&(c=!0),y.prepAndSaveImage(t,!1,c).then(function(e){if(e&&("idTypeNotAllowed"===e||"idExpired"===e||"tooYoung"===e))return{retry:!1};if(e&&"partial"!==e)return y.goToNextStep(!0);if(c||"partial"===e)return y.data.partialConfirmMode="partial"===e,y.data.confirmMode=!0,o(),{retry:!1};if(!r||e)return{retry:!e}})},y.prepImage=function(t,n){var o=e.createImage(t,n,y.data.currentStep,y.data.captureMode);"side2"===y.data.currentStep&&(o.previousImgCheckSum=y.data.images.side1.checkSumValue),y.data.images[y.data.currentStep]=o},y.prepAndSaveImage=function(t,n,o,i,r){var a=this;y.prepImage(t,i?"gif":"jpeg"),n&&(y.loading=!0);var s=window.innerWidth>window.innerHeight;return rotateImage(t,s).then(function(t){return y.data.images[y.data.currentStep].b64=t,y.data.images[y.data.currentStep].rotated=!s,e.saveCaptureData(y.data.images[y.data.currentStep],y.accessCodeData.accessCode,i||r,o).then(function(e){if(y.loading=!1,e&&"partial"!==e){y.data.images[y.data.currentStep].checkSumValue=e.checkSumValue;var t,n;if(e.onBoardData&&hasSomeData(e.onBoardData.mrz)?(t=e.onBoardData.mrz,n="mrz"):e.onBoardData&&hasNoNull(e.onBoardData.viz,1)&&(t=e.onBoardData.viz,n="viz"),t)return y.saveScannedData(t,!1,"mrz"===n)}return e}).catch(function(e){a.loading=!1,throwSafe(e,"id-311-b")})})},y.done=function(n){if(c.$emit("externalDeviceConnected",!1),y.data.checkingForImages=!1,"order"===y.eventCategory&&l.dataLayerPush({event:"gtm visitor interaction",interaction_name:"scan app",scan_action:"scan app completed"}),f.agentLoggedIn&&t.data.rights.FORCE_SHIPMENT&&!n)return void(y.data.outboundApproveMode=!0);f.agentLoggedIn&&t.data.rights.FORCE_SHIPMENT&&n&&(y.outputData.approved=!0),y.outputData.images={},y.outputData.scannedData=y.data.scannedData;for(var o in y.data.images)y.data.images[o].b64&&(y.outputData.images[o]=y.data.images[o]);if(console.log(y.data.images),y.outputData.done=!0,y.outputData.idCheckMethod=y.data.captureMode,y.outputData.accessCodeData=y.accessCodeData,y.outputData.qrCodeData=y.data.qrCodeData,y.onDone(),y.eventCategory&&(l.event(y.eventCategory,"id-check_"+y.data.captureMode,(y.outputData.scannedData,"with-data")),y.sendGa("/id-check/"+y.data.captureMode+"/"+y.idMode+"/success/"+(y.outputData.scannedData?"with-data":"no-data"))),"camera"===y.data.captureMode){e.sendExternalInfo(y.accessCodeData.accessCode,"doneDoingIdCheck");var i={accessCode:y.accessCodeData.accessCode};r.post("submit_idscan_agent_detail",i,2,!0,window.oldEshopBasePath,"text/plain",!0,!1)}},y.goToNextStep=function(e){if("side1"!==y.data.currentStep||!y.data.images.side1.secondPageRequired&&"passport"===y.idMode)if("selfie"!==y.data.currentStep&&y.takeFaceVideo)y.data.cameraSwitchDisabled=!0,y.data.currentStep="selfie",o(function(){return y.data.cameraSwitchDisabled=!1},e?1e3:1),e&&(y.data.showSuccess=!0),y.eventCategory&&(l.event(y.eventCategory,"id-check_"+y.data.captureMode,"step_"+y.data.currentStep),y.sendGa("/id-check/"+y.data.captureMode+"/"+y.data.currentStep));else{var n=!1;window.isTest&&(n="upload"===y.data.captureMode&&f.agentLoggedIn&&t.data.rights.FORCE_SHIPMENT),y.done(n)}else y.data.currentStep="side2",e&&(y.data.showSuccess=!0),y.eventCategory&&(l.event(y.eventCategory,"id-check_"+y.data.captureMode,"step_"+y.data.currentStep),y.sendGa("/id-check/"+y.data.captureMode+"/"+y.idMode+"/"+y.data.currentStep));o(),y.data.showSuccess&&o(function(){return y.data.showSuccess=!1},1500),"side2"===y.data.currentStep&&"camera"===y.data.captureMode&&o(function(){y.data.showSide2Pre=!0,o(function(){return y.data.showSide2Pre=!1},"paper-permit"===y.idData.selectedidType?3500:2e3)},y.data.showSuccess?1500:0)},y.retry=function(){for(var e in y.data.images)y.data.images[e].checkSumValue&&y.data.filteredOutCheckSumValues.push(y.data.images[e].checkSumValue);y.data.files={side1:{},side2:{},selfie:{}},y.data.images={side1:{},side2:{},selfie:{}},y.eventCategory&&l.event(y.eventCategory,"id-check_"+y.data.captureMode,"retry"),y.data.currentStep="side1",y.data.confirmMode=!1,"camera"===y.data.captureMode&&y.startCameraTutorial(),"upload"===y.data.captureMode&&y.startUploadTutorial()},y.confirmImage=function(){var t=y.data.currentStep;y.eventCategory&&l.event(y.eventCategory,"id-check_"+y.data.captureMode,"manual-confirm_"+t),y.data.images[t].pixelChecked?(y.loading=!0,e.saveCaptureData(y.data.images[t],y.accessCodeData.accessCode,!0).then(function(e){y.data.images[t].checkSumValue=e.checkSumValue,y.loading=!1,y.goToNextStep(!1),y.data.confirmMode=!1})):(y.goToNextStep(!1),y.data.confirmMode=!1)},y.backButton=function(){y.data.eshopShowQrCode=!1,"upload"!==y.data.captureMode||y.showFileTutorial?y.data.captureMode="":y.showFileTutorial=!0},y.cancelWebcam=function(){"camera"===y.data.captureMode?y.startCameraTutorial():(y.data.captureMode="",y.blockCaptureModeChange&&y.blockCaptureModeChange&&y.onCancel())},y.restartWebcam=function(){y.webcamRestartCount>1&&(y.dontAllowRestart=!0),y.data.restartingWebcam=!0,o(),o(function(){y.webcamRestartCount+=1,y.data.restartingWebcam=!1})},y.changeCaptureMode=function(){if(window.enableNewIdCheck&&y.data.captureMode&&"upload"!==y.data.captureMode){y.loading=!0;var t=(window.isApp,"t"),n="https://idc."+brand+".ch/"+t+"/"+y.accessCodeData.token;if(window.isTest){n=C.get("endpoint-replacement")?function(){switch(window.testEnvName){case"t01":return"https://preprod-idc.dev.".concat(brand,".ch/");case"t02":return"https://test-idc.dev.".concat(brand,".ch/");case"t03":return"https://integration-idc.dev.".concat(brand,".ch/");default:return"https://preprod-idc.dev.".concat(brand,".ch/")}}()+t+"/"+y.accessCodeData.token:"https://idc-"+brand+"-"+window.testEnvName+".os-t1.sunrise.ch/"+t+"/"+y.accessCodeData.token}return y.externalLinkMsisdn&&(n+="?msisdn="+y.externalLinkMsisdn),f.isTelesales&&(n+=(y.externalLinkMsisdn?"&":"?")+"hideqr=true&allowsmslang=true"),b.set("idCheckReturnUrl",{path:w.path(),search:w.search()}),b.set("idCheckAccessCodeData",y.accessCodeData),void(window.cordova?y.openCordovaBrowser(n):(allowNavigateAway(),location.href=n))}y.data.checkingForImages=!1,y.data.confirmMode=!1,y.externalCapturing=!1,y.data.currentStep="side1";for(var o in y.data.images)y.data.images[o].checkSumValue&&y.data.filteredOutCheckSumValues.push(y.data.images[o].checkSumValue);y.data.files={side1:{},side2:{},selfie:{}},y.data.images={side1:{},side2:{},selfie:{}},"external"===y.data.captureMode?(y.externalDeviceStarted=!1,c.$emit("externalDeviceConnected",!1),e.sendExternalInfo(y.accessCodeData.accessCode,"na"),y.data.externalStatus="na",y.extraParams="&ac="+y.accessCodeData.accessCode+"&productId="+y.productId+(y.deviceId?"&deviceId="+y.deviceId:"")+"&id="+y.accessCodeData.idCheckRequired,y.data.qrCodeData?window.cordova&&y.openCordovaBrowser(y.getLink()):y.generateQrCode().then(function(){window.cordova&&y.openCordovaBrowser(y.getLink())}),y.setupExternalCapture()):"camera"===y.data.captureMode?y.showCameraTutorial=!0:(y.showFileTutorial=!0,c.fullScreenCameraActive=!1),y.eventCategory&&(l.event(y.eventCategory,"id-check_"+y.data.captureMode,"start"),y.sendGa("/id-check"+(y.data.captureMode?"/"+y.data.captureMode:"")+"/start")),"order"===y.eventCategory&&l.dataLayerPush({event:"gtm visitor interaction",interaction_name:"scan app",scan_action:"scan app start"})},y.getLink=function(){return y.externalLink().split("/auto-").join("/")},y.openCordovaBrowser=function(e){y.loading=!0,y.dontWorryAboutLoadingTime=!0,f.returnWhenCordovaLoaded().then(function(t){document.addEventListener("resume",S,!1),allowNavigateAway(),window.cordova.InAppBrowser.open(e,"_system")})},y.setupExternalCapture=function(e){y.showExternalCaptureWarning="fromExternalLinkSending"===e,"fromExternalLinkSending"!==e&&"fromQrCode"!==e||y.sendGa("/id-check/"+y.data.captureMode+"/waiting/"+("fromQrCode"===e?"qr":"sms")),y.externalCapturing||(y.data.externalCaptureUrl=window.location.host.split("www.").join("")+"/"+(f.agentLoggedIn?"idp":"idv"),y.externalCapturing=!0,y.data.checkingForImages=!0,h(function(){return y.checkForNewImages(!0)},1e3,1))},y.hideQrCode=function(){y.sendGa("/id-check/"+y.data.captureMode+"/start")},y.stopCheckingExternalCapture=function(){y.externalCapturing=!1,y.data.checkingForImages=!1},y.endCameraTutorial=function(e){"auto"===e&&("swiss-passport"===y.idData.selectedidType&&(e="passport"),"id-card"===y.idData.selectedidType&&(e="plastic"),"eu-id-card"===y.idData.selectedidType&&(e="plastic"),"passport"===y.idData.selectedidType&&(e="passport"),"eu-passport"===y.idData.selectedidType&&(e="passport"),"plastic-permit"===y.idData.selectedidType&&(e="plastic"),"paper-permit"===y.idData.selectedidType&&(e="paper")),y.showCameraTutorial=!1,c.fullScreenCameraActive=!0,y.idMode=e,y.data.images={side1:{},side2:{},selfie:{}},y.data.files={side1:{},side2:{},selfie:{}},y.data.currentStep="side1",y.eventCategory&&(l.event(y.eventCategory,"id-check_"+y.data.captureMode,e),y.sendGa("/id-check/"+y.data.captureMode+"/"+y.idMode)),y.calcInfoImage()},y.endFileTutorial=function(e){y.showFileTutorial=!1,y.idMode=e,y.data.images={side1:{},side2:{},selfie:{}},y.data.files={side1:{},side2:{},selfie:{}},y.data.currentStep="side1",o(function(){return document.querySelector("#file").click()}),y.eventCategory&&(l.event(y.eventCategory,"id-check_"+y.data.captureMode,e),y.sendGa("/id-check/"+y.data.captureMode+"/"+y.idMode)),y.calcInfoImage()},y.startCameraTutorial=function(){y.showCameraTutorial=!0,c.fullScreenCameraActive=!1,y.changeCaptureMode()},y.startUploadTutorial=function(){y.showFileTutorial=!0,y.changeCaptureMode()},y.generateQrCode=function(){return y.loading=!0,y.data.qrCodeData={},loadScript("/assets/other/qrcode.js").then(function(){var e=qrcode(8,"L");return e.addData(y.externalLink()),e.make(),y.data.qrCodeData.image=e.createDataURL(10,0),y.data.qrCodeData.link=y.externalLink().split("/auto-").join("/"),y.loading=!1,o(),!0},function(e){y.loading=!1,throwSafe(e,"22-id")})},y.externalLink=function(){var e=f.agentLoggedIn&&!t.data.rights.FORCE_SHIPMENT?"idp":"idv",n=y.accessCodeData;return window.location.origin+"/"+a.data.current+"/auto-"+e+"?ac="+n.accessCode+"&productId="+y.productId+"&deviceId="+y.deviceId+"&id="+n.idCheckRequired},y.checkForNewImages=function(t){if(y.externalCheckCount+=1,y.data.checkingForImages&&y.accessCodeData){var n={accessCode:y.accessCodeData.accessCode,filteredOutCheckSumValues:angular.copy(y.data.filteredOutCheckSumValues)};for(var i in y.data.images)y.data.images[i].checkSumValue&&n.filteredOutCheckSumValues.push(y.data.images[i].checkSumValue);n.filteredOutCheckSumValues=ArrNoDupe(n.filteredOutCheckSumValues),r.post("getCaptureData",n).then(function(n){if(n){for(var i in n.imageDetails){var r=e.convertDocType(n.imageDetails[i].docCategory),a="data:image/jpeg;base64,"+n.imageDetails[i].imageData;y.data.images[r].checkSumValue&&y.data.filteredOutCheckSumValues.push(y.data.images[r].checkSumValue),y.data.images[r]=e.createImage(a,"selfie"===r?"gif":"jpeg",r,y.data.captureMode),y.data.images[r].checkSumValue=n.imageDetails[i].checkSumValue}n.extraInfo&&"doneDoingIdCheck"===n.extraInfo&&(n.onBoardData&&hasSomeData(n.onBoardData.mrz)?y.saveScannedData(n.onBoardData.mrz,!0,!0).then(function(){return y.done()}):n.onBoardData&&hasNoNull(n.onBoardData.viz,1)?y.saveScannedData(n.onBoardData.viz,!0).then(function(){return y.done()}):y.done()),n.extraInfo&&(y.data.externalStatus=n.extraInfo),"starting"!==n.extraInfo||y.externalDeviceStarted||(y.externalDeviceStarted=!0,c.$emit("externalDeviceConnected",!0))}o(y.checkForNewImages,t?15e3:2e3)})}},y.saveScannedData=function(t,n,o){var r=e.convertMrzData(t);if(y.isPostpaid||-1===i.euPassports.indexOf(r.idTypeId)||(r.idTypeId="201411201909407901"),r.expiry.year&&!n){if(objToDate(r.expiry,!0).addDays(30).getTime()<swissDate().getTime())return y.retry(),u.add("idExpired","bad"),s.resolve("idExpired")}if(r.dob.year&&!n){if(objToDate(r.dob,!0).getTime()>swissDate().addDays(y.minAge).getTime())return y.retry(),u.add("tooYoung","bad"),s.resolve("tooYoung")}return!o||r.nationality||n?r.idTypeId&&r.nationality?d.getIdTypes(r.nationality,y.productId).then(function(e){if(e&&e.allowedIdTypes)return e.allowedIdTypes.indexOf(r.idTypeId)>-1?(y.data.scannedData=r,y.data.scannedData.fromMrz=!!o,!0):(n||(y.retry(),u.add("idTypeNotAllowed","bad")),"idTypeNotAllowed")}):(y.data.scannedData=r,y.data.scannedData.fromMrz=!!o,s.resolve(!0)):(n||(y.retry(),u.add("idTypeNotAllowed","bad")),s.resolve("idTypeNotAllowed"))},y.skipTries=0,y.trySkipSuccess=function(){y.data.showSuccess=!1,y.data.showSide2Pre=!1},window.addEventListener("resize",I),y.sendGa=function(e){l.fireGaEvent("virtual page view",k+e,k.split("/")[1]+e,window.location.href,void 0,void 0,!0)},y.$watch("data.confirmMode",function(){y.data.confirmMode&&y.sendGa("/id-check/"+y.data.captureMode+"/"+y.idMode+"/"+y.data.currentStep+"/confirm")}),y.$on("$destroy",function(){window.removeEventListener("resize",I),y.data.checkingForImages=!1,c.fullScreenCameraActive=!1,l.fireGaEvent("virtual page view",k,k.split("/")[1],window.location.href,void 0,void 0,!0),window.cordova&&document.removeEventListener("resume",S)})}}}]),app.directive("idCheckPrompt",["Popup","AgentAccount","Camera","Checkout","Identification","CustomerAccount","CommonData","$rootScope","$translate","State","$location","Storage",function(e,t,n,o,i,r,a,s,c,d,u,l){return{templateUrl:"/scripts/directives/id-check-prompt/dirc_id-check-prompt.html",scope:{forceCheck:"=?",checkDone:"=?",orderData:"=?",allowExistingCustomerPrefill:"=?",onClickShowField:"=?",showOptionForEnteringData:"=?"},link:function(p){if(p.rs=s,p.agent=t,p.isMobile=isIOS||isAndroid,p.state=d,p.enableNewIdCheck=window.enableNewIdCheck,p.data={},p.Identification=i,p.popup=new e("idCheckPromptPopup","id-check-prompt-popup.html",{title:"idCheckPromptPopupTitle"},{hide:function(e,t,n){return"background"!==e&&"escape-button"!==n&&(!(p.externalDeviceStarted&&!confirm(c.instant("idCheckCloseConfirmText")))&&void 0)},done:function(){p.done(p.popup.data.data)},cancel:function(){p.popup.hide()}}),p.done=function(e){p.orderData.billingCustomerDetails.idCheckDone=!0,p.orderData.billingCustomerDetails.pixelScanned=!!e.scannedData,p.orderData.billingCustomerDetails.idCheckMethod=e.idCheckMethod,p.orderData.billingCustomerDetails.fromMrz=e.scannedData&&e.scannedData.fromMrz,p.orderData.billingCustomerDetails.fromViz=p.orderData.billingCustomerDetails.pixelScanned&&!p.orderData.billingCustomerDetails.fromMrz,p.orderData.approved=!!e.approved,e.scannedData&&(d.customerLoggedIn?p.allowExistingCustomerPrefill&&s.$emit("scannedCustomerData",e.scannedData):(p.orderData.billingCustomerDetails.title=e.scannedData.title,p.orderData.billingCustomerDetails.pixel_title=e.scannedData.title,p.orderData.billingCustomerDetails.firstName=e.scannedData.firstName,p.orderData.billingCustomerDetails.pixel_firstName=e.scannedData.firstName,p.orderData.billingCustomerDetails.lastName=e.scannedData.lastName,p.orderData.billingCustomerDetails.pixel_lastName=e.scannedData.lastName,p.orderData.billingCustomerDetails.dob=e.scannedData.dob,p.orderData.billingCustomerDetails.pixel_dob=e.scannedData.dob.year?e.scannedData.dob:void 0),p.orderData.billingCustomerDetails.billingIdDetails={expiry:e.scannedData.expiry,pixel_expiry:e.scannedData.expiry.year?e.scannedData.expiry:void 0,idNumber:e.scannedData.idNumber,pixel_idNumber:e.scannedData.idNumber,idTypeId:e.scannedData.idTypeId,pixel_idTypeId:e.scannedData.idTypeId,nationality:e.scannedData.nationality,pixel_nationality:e.scannedData.nationality});for(var t in e.images)p.orderData.images[t]=e.images[t];o.save()},u.search().fetchImages){var g=l.get("fetchedImagesData");if(g){var f;g.done=!0,
g.idCheckMethod="external",g.accessCodeData=o.orderData.accessCodeData,g.onBoardData&&hasSomeData(g.onBoardData.mrz)?f=i.convertMrzData(g.onBoardData.mrz):g.onBoardData&&hasNoNull(g.onBoardData.viz,1)&&(f=i.convertMrzData(g.onBoardData.viz)),g.scannedData=f,g.images={};var h={idFront:"side1",idBack:"side2",faceVideo:"selfie"};g.idcScanImages.forEach(function(e){var t=h[e.fileName];g.images[t]={b64:"data:image/jpeg;base64,".concat(e.b64),checkSumValue:e.checkSum,documentType:t,fileType:"selfie"===t?"gif":"jpg",inputType:"external",pixelChecked:!0}}),d.agentLoggedIn&&t.data.rights.FORCE_SHIPMENT&&(g.approved=!0),p.done(g)}}p.redoIdCheck=function(){p.redoingIdCheck||(p.redoingIdCheck=!0,o.getAccessCode(!1).then(function(){p.redoingIdCheck=!1,p.orderData.images={},p.orderData.approved=!1,o.save(),p.data.redoConfirmation=!1,p.popup.show(),p.orderData.billingCustomerDetails.idCheckDone=!1,l.remove("fetchedImagesData")}))},p.$watch("checkDone",function(){p.checkDone&&p.popup.hide()}),p.popup.data.data={},p.popup.data.orderData=p.orderData;var m=Object.first(p.orderData.config.products);if(p.popup.data.productId=m.config.id,p.popup.data.isPostpaid="postpaid"===m.config.type,p.popup.data.deviceId=m.device?m.device.id:void 0,p.popup.data.promotionCode=m.promotion?m.promotion.code:void 0,p.popup.data.takeFaceVideo=!d.agentLoggedIn||t.data.rights.FORCE_SHIPMENT,p.popup.data.captureMode=n.mobileCamera?"camera":"external",t.allowFileIdValidation()&&!n.mobileCamera&&(p.popup.data.captureMode=""),d.agentLoggedIn&&t.data.rights.FORCE_SHIPMENT&&(p.popup.data.captureMode="external"),p.popup.data.blockCancel=!!p.popup.data.captureMode,window.isTest&&t.allowFileIdValidation(!0)&&(p.popup.data.blockCancel=!1),d.customerLoggedIn&&r.accountOwner.subscription?p.popup.data.msisdn=r.accountOwner.subscription.msisdn:p.popup.data.msisdn=Object.first(o.orderData.config.products).subscriptionDetails.contactNumber||o.orderData.billingCustomerDetails.contactNumber,p.popup.data.msisdn&&(p.popup.data.msisdn=p.popup.data.msisdn.split("+41").join("0"),"07"!==p.popup.data.msisdn.substring(0,2)&&(p.popup.data.msisdn=void 0)),a.tempIdCheckResult){var v=a.tempIdCheckResult.scannedData;v.idTypeId&&v.nationality&&i.uploadStartScannedId(v,p.productId,o.orderData.accessCodeData,a.tempIdCheckResult.images).then(function(e){e&&(p.popup.data.data=a.tempIdCheckResult,p.popup.functions.done())})}var b=s.$on("externalDeviceConnected",function(e,t){p.externalDeviceStarted=t});p.$on("$destroy",b)}}}]),app.directive("idDetails",["Language","CommonData","Checkout","Popups","State","Countries","Storage",function(e,t,n,o,i,r,a){return{templateUrl:"/scripts/directives/id-details/dirc_id-details.html",scope:{data:"=",editable:"=",orderData:"=?",forceNotEditable:"=?",nationalityOnly:"=?",noIdExpiration:"=?",simpleMode:"=?",allowPostIdentMessage:"=?",selfcare:"=?"},link:function(s){s.countries=r.sortedNationalities,s.priorityCountries=r.priorityCountries,s.CommonData=t,s.Countries=r,s.language=e.data,s.data||(s.data={}),s.allowIdChange=!1,s.showPostIdentMessage=function(){return s.data&&s.allowPostIdentMessage&&s.data.idTypeId&&(t.europeanIds.indexOf(s.data.idTypeId)>-1||t.euPassports.indexOf(s.data.idTypeId)>-1)&&!s.orderData.billingCustomerDetails.pixelScanned},s.forceIdChange=function(){return!s.forceNotEditable&&(!s.gettingIdTypes&&(!!s.allowIdChange||(!i.customerLoggedIn||(!s.data.nationality||(s.allowedIdTypes&&s.data&&s.allowedIdTypes.indexOf(s.data.idTypeId)<0?(s.allowIdChange=!0,delete s.data.idTypeId,!0):void 0)))))},s.switchCountry=function(e){s.gettingIdTypes=!0,n.getIdTypes(e,void 0,s.orderData).then(function(e){s.data&&(s.gettingIdTypes=!1,e&&(s.allowedIdTypes=e.allowedIdTypes,s.allowedIdTypes.indexOf(s.data.idTypeId)<0&&delete s.data.idTypeId))})},s.$watch("data.pixel_nationality",function(){s.data&&s.data.nationality&&s.switchCountry(s.data.nationality)}),s.$watch("data.nationality",function(e){e&&s.switchCountry(s.data.nationality),s.countries.map(function(t){t.id===e&&a.set("userCountry",t.countryCode)})}),window.isTest&&(window.fillFunctions||(window.fillFunctions={}),window.fillFunctions.switchCountry=s.switchCountry),s.personalIdType=function(n){return t.personalIdTypes&&t.personalIdTypes[n]?t.personalIdTypes[n][e.data.current]:""},s.changeIdType=function(){s.data.confirmCheckedDriversLicense=!1,s.orderData&&n.forceEmailBilling()&&(s.orderData.billingCustomerDetails.noEmail=!1,s.orderData.billingMethod="email"),s.data.riskyIdType=!i.customerLoggedIn&&-1===t.nonRiskyIdTypes.indexOf(s.data.idTypeId)},s.showPostIdentPopup=function(){return o.show("idCheckPromptPopup")},s.showDriversLicenceConfirmation=n.showDriversLicenceConfirmation}}}]),app.directive("idDetailsWin",["Language","WinOrder","$q",function(e,t,n){return{templateUrl:"/scripts/directives/id-details-win/dirc_id-details-win.html",scope:{data:"=",editable:"=",orderData:"=?",minAge:"=?",maxAge:"=?",forceNotEditable:"=?",nationalityOnly:"=?",noIdExpiration:"=?",simpleMode:"=?",allowPostIdentMessage:"=?",selfcare:"=?"},link:function(o){o.language=e.data,o.data||(o.data={});var i=o.data&&o.data.idType;i&&delete i.$$hashkey,o.loaded=n.all([t.getCountries().then(function(e){o.countries=e.data.countries}),t.getPassportTypes().then(function(e){o.passports=e.data.codeList;var t;i&&(t=i.code||i,o.data.idType=o.passports.find(function(e){return e.code===t}))})]),o.loaded.then(function(e){var t=[];o.passports.map(function(e){if(window.isTest&&!e.countries)return console.log("strange, pass has no countries.",e);e.countries&&e.countries.map(function(e){-1===t.indexOf(e.isocode)&&t.push(e.isocode)})}),o.countries=o.countries.filter(function(e){return window.isTest&&-1===t.indexOf(e.isocode)&&console.log("country has no passport",e),-1!==t.indexOf(e.isocode)})}),o.switchCountry=function(e){o.allowedIdTypes=o.passports.filter(function(t){if(t.countries)return t.countries.find(function(t){return t.isocode===e})}),o.data.idType&&!o.allowedIdTypes.find(function(e){return e.code===o.data.idType.code})&&delete o.data.idType},o.$watch("data.nationality",function(e){e&&o.loaded.then(function(){return o.switchCountry(o.data.nationality)})})}}}]),app.directive("idStatusInfo",["CustomerAccount","AgentAccount","State","Analytics","FeatureFlags",function(e,t,n,o,i){return{restrict:"E",templateUrl:"/scripts/directives/id-status-info/dirc_id-status-info.html",scope:{},link:function(r){r.account=e,r.agent=t,r.state=n,r.triggerAnalytics=function(){i.get("Ayma-google-tag-manager-changes")&&o.dataLayerPush({event:"gtm visitor interaction",interaction_name:"add id",add_id_btn_location:"overview"})}}}}]),app.directive("ifClosed",["OpeningTimes",function(e){return{transclude:!0,template:'<div ng-transclude ng-if="isClosed"></div>',scope:{},link:function(t,n,o){t.check=function(){return e.check(o.type).then(function(e){return t.isClosed=e&&!e.model})},t.check();var i=setInterval(t.check,15e3);t.$on("$destroy",function(){return clearInterval(i)})}}}]),app.directive("ifOpen",["OpeningTimes","$timeout",function(e,t){return{transclude:!0,template:'<div ng-transclude ng-if="isOpen"></div>',scope:{},link:function(n,o,i){n.check=function(){return e.check(i.type).then(function(e){return n.isOpen=e&&e.model})},n.check();var r=setInterval(n.check,15e3);n.$on("$destroy",function(){clearInterval(r),clearInterval(a)});var a=setInterval(function(){window.closeTelesales&&(n.isOpen=!1,clearInterval(a),t())},1e3)}}}]),app.directive("ifOpenOrClosed",["OpeningTimes","$timeout",function(e,t){return{transclude:{open:"?open",closed:"?closed"},template:'<div ng-transclude="open" ng-if="isOpen"></div><div ng-transclude="closed" ng-if="!isOpen"></div>',scope:{},link:function(n,o,i){n.check=function(){return e.check(i.type).then(function(e){return n.isOpen=e&&e.model})},n.check();var r=setInterval(n.check,15e3);n.$on("$destroy",function(){clearInterval(r),clearInterval(a)});var a=setInterval(function(){window.closeTelesales&&(n.isOpen=!1,clearInterval(a),t())},1e3)}}}]),app.directive("infoPageHero",function(){return{transclude:!0,templateUrl:"/scripts/directives/info-page-hero/dirc_info-page-hero.html"}}),app.directive("inputDisableKeys",function(){return{restrict:"A",link:function(e,t,n){function o(e){e.srcElement==t[0]&&n.inputDisableKeys==e.keyCode&&e.preventDefault()}document.addEventListener("keydown",o),e.$on("$destroy",function(){document.removeEventListener("keydown",o)})}}}),app.directive("inputInfo",function(){return{transclude:!0,templateUrl:"/scripts/directives/input-info/dirc_input-info.html",scope:{isPopup:"=?"},link:function(e,t){e.calcIsRight=function(){e.isRight=t[0].querySelector("div").getBoundingClientRect().x<window.innerWidth/2}}}}),app.directive("inputTracker",["$timeout","Analytics",function(e,t){return{link:function(e,n){var o=[],i=[];n[0].addEventListener("click",function(e){if(e.target&&e.target.name){var n=e.target.nodeName;"INPUT"!=n&&"SELECT"!=n||o.indexOf(e.target)<0&&(o.push(e.target),t.event("checkoutInput",e.target.name,"touched"),e.target.addEventListener("change",function(e){!e.target.classList.contains("ng-invalid")&&i.indexOf(e.target.name)<0&&(i.push(e.target.name),t.event("checkoutInput",e.target.name,"valid"))}))}})}}}]),app.directive("installBanner",["$rootScope","Storage",function(e,t){return{templateUrl:"/scripts/directives/install-banner/dirc_install-banner.html",link:function(n){n.hideInstallBanner=function(){t.set("hideInstallBanner",{},!0),n.closing=!0,setTimeout(function(){n.data.showInstallBanner=!1,e.dontShowInstallBanner=!0,n.$digest()},300)},n.data={},n.isAndroid=isAndroid,n.isIOS=isIOS,n.data.showInstallBanner=!(window.isApp&&t.get("hideInstallBanner")||isDesktop)}}}]),app.directive("instantTopup",["Network","Language","Notifications","Topup","Analytics","$timeout",function(e,t,n,o,i,r){return{transclude:!0,templateUrl:"/scripts/directives/instant-topup/dirc_instant-topup.html",scope:{},link:function(a,s){a.data={amount:o.topupvalues[0]},a.topup=o;for(var c=[],d=s[0].getElementsByClassName("instant-topup-msisdn-field"),u=0;u<d.length;u++)c.push(angular.element(d[u]).controller("ngModel"));setTimeout(function(){focusField("instant-topup-msisdn")},500),a.checkMsisdn=function(){var e=checkMsisdn(a.data.msisdn,a.data.repeatMsisdn);for(var t in c)c[t].$setValidity("msisdnMatch",e)},a.doTopup=function(){if(!a.doingTopup){a.doingTopup=!0;var t={msisdn:a.data.msisdn,amount:a.data.amount};i.event("instant-topup","start"),e.post("instantCeditCardTopup",t).then(function(e){e?a.startDatatrans(e):a.doingTopup=!1})}},a.startDatatrans=function(e){loadDatatransScripts(e.dataTrans.dataTransURL,function(){e.language=t.data.current,createDatatransForm(e,t.data.current,null,a.data.msisdn).then(function(){Datatrans.startPayment({form:"#paymentForm",loaded:function(){return console.log("loaded")},closed:function(){a.doingTopup=!1,r()},error:function(e){throwSafe(e,"23-id"),n.add("topupError","bad"),a.doingTopup=!1,r()}})})})}}}}]),app.directive("interactionWidget",["Chat","$rootScope","Analytics","$filter","FeatureFlags",function(e,t,n,o,i){return{templateUrl:"/scripts/directives/interaction-widget/dirc_interaction-widget.html",scope:{},link:function(r){r.rs=t,r.chat=e,r.$watch(function(){return" "+e.showChat()+" "+e.showCall()},function(e){t.chatItemsShown=e.split("true").length-1}),r.blackfridaymode=i.get("BlackFriday-release"),r.getCallType=function(){var t;return e.isWinContext?t="wincall":e.isCancellationContext?t="cancellationcall":e.isSalesContext?t="salescall":e.isSupportContext?t="carecall":throwSafe("dirc_interaction-widget -> getCallType: unkown context","id-653"),t},r.getButtonText=function(){return o("translate")(r.getButtonTextKey()).replace(/:\s?[\d+\s?]+/g,"")},r.getButtonTextKey=function(){return e.isWinContext?"winSalesCall":e.isCancellationContext?"getHelp":e.isSalesContext&&!e.isSupportContext?"freeSalesCall":"callButtonText"},r.openCallPopup=function(t){var o="call";e.isSupportContext&&(o="support call"),e.isSalesContext&&(o="sales call"),e.isWinContext&&(o="win sales call"),e.isCancellationContext&&(o="cancellation call"),n.event("popup","open",o),t&&t.preventDefault(),e.salesCallPopup.show()},r.showCall=function(){return!window.closeTelesales&&r.chat.showCall()},r.startChatPopup=function(){n.event("chat-bubble","interaction-widget","click");var t="chat";if(e.isWinContext&&(t="win sales chat"),e.isSupportContext&&(t="support chat"),e.isSalesContext&&(t="sales chat"),e.isCancellationContext&&(t="cancellation chat"),n.event("popup","open",t),(e.isWinContext||e.isSalesContext)&&!e.isSupportContext&&!e.isCancellationContext)return r.loading=!0,e.startChat(window.brand+"_sales",!0,!0).then(function(){return r.loading=!1});e.startChatPopup(t.split(" "))}}}}]),app.directive("invoiceSelection",function(){return{transclude:!0,templateUrl:"/scripts/directives/invoice-selection/dirc_invoice-selection.html",scope:{data:"=",editable:"="},link:function(e){e.$watch("data.billingCustomerDetails.noEmail",function(){e.data.billingCustomerDetails.noEmail?(e.data.billingMethod="paper",e.data.disableSelection=!0):(e.data.billingMethod="email",e.data.disableSelection=!1)})}}}),app.directive("isActive",function(){return{restrict:"A",scope:!1,link:function(e,t){function n(){matchPaths(i)?o.classList.add("active"):o.classList.remove("active")}var o=t[0],i=o.getAttribute("is-active").split(",");n(),e.$on("$locationChangeSuccess",n)}}}),app.directive("languagePicker",["Language","$rootScope","State","FeatureFlags",function(e,t,n,o){return{templateUrl:"/scripts/directives/language-picker/dirc_language-picker.html",link:function(i,r){i.language=e,i.closed=!0,i.dropdownclose=!1;var a=!1;i.blackfridaymode=o.get("BlackFriday-release"),i.addSetClosed=function(){i.closed=!0,setTimeout(i.$digest)},i.removeSetClosed=function(){setTimeout(function(){a||(i.closed=!1,i.$digest())})},i.clickCurrent=function(){a=!0,setTimeout(function(){i.closed=!i.closed,i.$digest(),a=!1})};var s=r[0].querySelector("ul");s.addEventListener("mouseleave",i.addSetClosed),i.pickLanguage=function(t){i.close(),t!==e.data.current&&e.showLanguagePopup(t)};var c=location.pathname.split("/").length<=3;i.getCurrentPathInLang=function(e){return c&&n.languageVersions[e]||t.currentPath},i.close=function(){i.closed=!0,i.dropdownclose=!0,setTimeout(function(){i.dropdownclose=!1,i.$digest()},200)},i.$on("$destroy",function(){s.removeEventListener("mouseenter",i.removeSetClosed),s.removeEventListener("mouseleave",i.addSetClosed)})}}}]),app.directive("languageSwitcher",["Language","CustomerAccount","$rootScope","State",function(e,t,n,o){return{transclude:!0,templateUrl:"/scripts/directives/language-switcher/dirc_language-switcher.html",link:function(i){i.closed=!0,i.language=e,i.account=t;var r=location.pathname.split("/").length<=3;i.pickLanguage=function(t){e.showLanguagePopup(t),i.closed=!0},i.getCurrentPathInLang=function(e){return r&&o.languageVersions[e]||n.currentPath},i.close=function(){return i.closed=!0}}}}]),app.directive("limitedStockHandsets",["Network","Products","State","$rootScope","$interval","CustomerAccount","$location","$translate","CommonData",function(e,t,n,o,i,r,a,s,c){return{templateUrl:"/scripts/directives/limited-stock-handsets/dirc_limited-stock-handsets.html",scope:{productSlug:"=",existingSubscription:"=?",deviceId:"@?",sortBy:"=?",sortOrder:"=?",showCrossSell:"=?",soldOutText:"=?",crossSellLinkTarget:"=?"},link:function(s){s.showCrossSell=!1,s.state=n,s.rs=o,s.ca=r,s.handsets=[],s.loading=!0,s.checkingLoggedIn=!0,s.data={};var d,u;s.linkExtension={},s.showFilter=!0,s.data={},s.data.manufacturer="all",s.data.color="all",s.data.capacity="all",s.manufacturers=[],s.capacities=[],s.steps=["deviceStep","subscriptionStep","checkoutStep"],s.currentStep=0,s.canHaveDevice=!0,s.init=function(){if(!s.product){var e=s.productSlug.split("-").join("_");s.product=t.findProductByName(e)}s.productData={product:s.product},s.getAccountSubscriptions()},e.post("get_device_inventry_balance",{},2,!1,window.oldEshopBasePath,"application/json",!0,!1).then(function(e){e&&n.returnWhenDeviceDataLoaded().then(function(){r.doCreditCheck(!1,1).then(function(){s.devices=Object.values(t.data.devices).filter(function(e){return e.allowedInChannel(c.channel)}).filter(function(t){return e.find(function(e){return(!s.deviceId||s.deviceId==t.id)&&(t.id==e.deviceId&&(t.stock=e.availableQty,!0))})}),s.manufacturers=s.devices.map(function(e){return e.manufacturer}).filter(function(e){return!!e}).filter(function(e,t,n){return n.indexOf(e)===t}),s.colors=s.devices.map(function(e){var t;return null===(t=e.color)||void 0===t?void 0:t.name}).filter(function(e){return!!e}).filter(function(e,t,n){return n.indexOf(e)===t}),s.capacities=s.devices.map(function(e){return e.capacity}).filter(function(e){return!!e}).filter(function(e,t,n){return n.indexOf(e)===t}),s.sortDevices(),s.addDevicePrices(),s.checkIfCanHaveDevice(),s.getAccountSubscriptions(),s.loading=!1,d=i(function(){s.updateDeviceStock()},3e5)})})}).catch(function(e){throwSafe(e,"id-90")}).finally(function(){s.loading=!1}),s.updateDeviceStock=function(){e.post("get_device_inventry_balance",{},2,!1,window.oldEshopBasePath,"application/json",!0,!1).then(function(e){e&&e.find&&s.devices.forEach(function(t){var n,o;t.stock=null!==(n=null===(o=e.find(function(e){return e.deviceId==t.id}))||void 0===o?void 0:o.availableQty)&&void 0!==n?n:0})})},s.checkIfCanHaveDevice=function(){var e;if(null!==(e=s.devices)&&void 0!==e&&e.length){var t,n=s.product.findConfigsFromOptions(null,s.devices[0],null,s.existingSubscription,!0),o=null!==(t=null===n||void 0===n?void 0:n[0])&&void 0!==t?t:s.product.bestConfig;o&&(s.canHaveDevice=r.canAddDevice(o))}},s.checkIfSubCanExtend=function(e){var t;if(null!==(t=s.devices)&&void 0!==t&&t.length){var n=s.product.findConfigsFromOptions(null,s.devices[0],null,e,!0);if(null!==n&&void 0!==n&&n[0])return e.canExtend(n[0])}return e.canExtend()},s.addDevicePrices=function(){var e;null!==(e=s.devices)&&void 0!==e&&e[0]&&(s.linkExtension={devices:s.devices[0]}),s.devices.forEach(function(e){var n=s.getPromoForDevice(e),o=s.product.findConfigsFromOptions(null,e,n,s.existingSubscription,!0);if(o&&0!=o.length)t.getDevicePrice(e,o[0],!!s.existingSubscription).then(function(t){null!==t&&void 0!==t&&t.deviceOptionId&&(e.prices=t)});else{var i;console.log("No config found for device id '".concat(e.id,"', lockin length 24, promo '").concat(null===n||void 0===n?void 0:n.code,"' and subscription id '").concat(null===(i=s.existingSubscription)||void 0===i?void 0:i.id,"'"))}})},s.getAccountSubscriptions=function(){s.subscriptions=r.getSubscriptionsByType("postpaid",!0).filter(function(e){return s.checkIfSubCanExtend(e)&&e.canAddDevice().result&&"internet"!=e.getType()}),s.subscriptions&&(s.existingSubscription&&s.existingSubscription.msisdn&&(s.data.selectedSubscription=s.subscriptions.find(function(e){return e.msisdn==s.existingSubscription.msisdn})),s.data.selectedSubscription||(s.data.selectedSubscription=s.subscriptions[0]))},n.checkCustomerLoggedInNoCreditCheck().then(function(){if(s.checkingLoggedIn=!1,n.customerLoggedIn){var e=a.path().split("/")[3];s.existingSubscription=r.subscriptions[e],s.init()}else u=o.$on("doneCheckingCustomerLoggedInNoCreditCheck",function(){var e=a.path().split("/")[3];s.existingSubscription=r.subscriptions[e],s.init()})}),s.selectDevice=function(e){s.selectedDevice=e,s.currentStep++},s.goToStep=function(e){0===e&&(s.currentStep=0)},s.getCheckoutLink=function(e){var t,n=s.selectedDevice;if(n.stock<=0)return"";var o="";s.data.selectedSubscription&&e?o+="/account/change-subscription/".concat(s.data.selectedSubscription.id,"?skip=true&keep=true&addDeviceMode&skipDeviceSelection&"):o+="/eshop/new-postpaid/checkout/".concat(s.product.url,"?"),o+="devices=".concat(n.id);var i=null===(t=s.getPromoForDevice(n))||void 0===t?void 0:t.code;return i&&(o+="&promotions=".concat(i)),o},s.getPromoForDevice=function(e){if(s.product&&s.product.promotions){return s.product.getValidPromotions(s.existingSubscription,!0).find(function(t){return s.product.findConfigsFromOptions(null,e,t,s.existingSubscription,!0).length})}},s.sortDevices=function(){var e="DESC"==s.sortOrder?1:-1;s.sortBy||(s.sortBy="deviceName"),s.devices=s.devices.sort(function(t,n){return t[s.sortBy]<n[s.sortBy]?e:-1*e})},s.init(),s.$on("$destroy",function(){i.cancel(d),u&&u()})}}}]);var testData=[[120,278,122,278,126,274,144,258,174,226,214,176,226,162,240,136,252,112,254,104,254,98,250,96,236,100,216,116,194,138,178,164,166,192,154,222,148,246,146,260,154,268,174,264,208,248,256,222,296,194,330,170,354,150,370,134,372,122,342,110,320,108,266,108,212,110,164,116,126,124,102,130,96,134,104,146,114,152,146,170,194,186,266,198,286,202,310,212,326,222,328,232,316,250,286,270,246,284,208,294,178,302,160,308,154,310,158,304,184,288,232,256,290,220,340,184,374,160,394,148,394,148,380,158,350,182,322,204,302,222,298,232,310,234,348,216,416,172]];app.directive("lineDrawing",function(){return{template:"<canvas id=\"canvas-drawing\"></canvas><div id=\"canvas-drawing-pointer\" ng-style=\"{'background-image': 'url(' + imageUrl + ')'}\"></div>",scope:{lineData:"=?",imageUrl:"=?",delayBetweenPoints:"=?",canvasWidth:"=",canvasHeight:"="},link:function(e,t){function n(){var t=angular.copy(e.lineData);i.width=e.canvasWidth,i.height=e.canvasHeight,r&&r.classList.remove("hidden"),a.clearRect(0,0,i.width,i.height),a.lineWidth=1,o=setInterval(function(){if(a.beginPath(),t[0]&&t[0].length<2&&t.splice(0,1),!t.length)return clearInterval(o),setTimeout(n,2e3),void(r&&r.classList.add("hidden"));a.moveTo(t[0][0],t[0][1]),a.lineTo(t[0][2],t[0][3]);var e=100/i.width*t[0][2],s=100/i.height*t[0][3];r&&(r.style.left="".concat(e,"%")),r&&(r.style.top="".concat(s,"%")),t[0].splice(0,2),a.stroke()},e.delayBetweenPoints||40)}e.lineData||(e.lineData=testData);var o,i=t[0].querySelector("#canvas-drawing"),r=e.imageUrl?t[0].querySelector("#canvas-drawing-pointer"):void 0,a=i.getContext("2d");n(),e.$on("$destroy",function(){clearInterval(o)})}}}),app.directive("linecheck",["Linecheck","Analytics","WinOrder","State","$rootScope",function(e,t,n,o,i){return{restrict:"E",templateUrl:"/scripts/directives/linecheck/dirc_linecheck.html",scope:{address:"=",showBad:"=",showSlow:"=",network:"=",type:"=",prodInfo:"=",testMore:"=",showLoader:"=",simpleMode:"=",proposeWin:"=",showAlways:"=",fallbackOtherNetwork:"=",lineCheckResults:"=?"},link:function(r){function a(t,n){if(n===s){r.loadingLineCheck=!1,e.setGlobal(t);var o=i.globalLineCheckResults.messages;r.message="bad"===o["5G"]&&!r.showBad||"slow"===o["4G"]&&!r.showSlow?"":t.message,r.lineCheckResults.mbbResults=t}}var s=0,c=0,d={mbbResults:!1,winResults:!1};r.state=o,r.winProduct=n.preferredProductSold,r.lineCheckResults=r.lineCheckResults||angular.copy(d,{}),r.$watchGroup(["address.valid","address.streetNumber","address.streetName"],function(e){r.address.valid&&r.address.reallyValidStreetNumber&&(r.loadingLineCheck=!1,u())}),r.testMoreAddresses=function(){e.linecheckPopup.data.prodInfo=r.prodInfo||!1,e.linecheckPopup.data.network=r.network,e.linecheckPopup.show()};var u=debounce(function(n){s++,c++;var o=s,i=r.address,u=!(i.valid&&i.city&&i.postCode&&i.streetName&&(i.noHouseNumbers||i.streetNumber));r.lineCheckResults=angular.copy(d,{}),u||(t.event("linecheck-mobile","linecheck-mobile","linecheck-".concat(r.type,"-").concat(r.network,"-start")),r.loadingLineCheck=!0,e.lineCheck(i,void 0,!1,"checkout").then(function(e){return a(e,o)}).catch(function(e){if(o===s)throw r.loadingLineCheck=!1,t.event("linecheck-mobile","linecheck-mobile","linecheck-".concat(r.type,"-").concat(r.network,"-error")),e}))},500,!1)}}}]),app.directive("linecheckAndAddress",["State","CustomerAccount","$rootScope","smoothScroll",function(e,t,n,o){return{restrict:"E",templateUrl:"/scripts/directives/linecheck-and-address/dirc_linecheck-and-address.html",scope:{prefill:"=?",hideResults:"=?"},link:function(i,r,a){i.network=a.network,i.scroll=a.scroll,i.address=n.globalLineCheckAddress||{},n.globalLineCheckAddress=i.address,i.prefill&&(i.loading=!0,e.checkCustomerLoggedIn().then(function(e){i.loading=!1,e&&(i.address={streetNumber:t.accountOwner.address.streetNumber,streetName:t.accountOwner.address.streetName,postCode:t.accountOwner.address.postCode,city:t.accountOwner.address.city,country:t.accountOwner.address.country})})),a.doneScroll&&(i.watcher=n.$on("globalLineCheckUpdated",function(){if(n.globalLineCheckResults&&a.doneScroll){var e=document.getElementById(a.doneScroll);e?o(e):console.warn("scroll target '"+a.doneScroll+"' not found")}}),i.$on("$destroy",function(){i.watcher()}))}}}]),app.directive("loadingButton",["Network",function(e){return{restrict:"E",transclude:!0,templateUrl:"/scripts/directives/loading-button/dirc_loading-button.html",scope:{loading:"=",isDisabled:"=?",typeButton:"=?",hideBar:"=?",buttonId:"=?",dontTrackLoadingTime:"=?"},link:function(t,n){var o,i=6e5;-1!==location.pathname.indexOf("internet-deal")&&(i=12e4),t.buttonId=t.buttonId||t.$id+"-btn",t.$watch("loading",function(r){r&&!t.dontTrackLoadingTime?o=setTimeout(function(){if(!document.querySelector("#datatransPaymentFrame")){var t=walkThree(n[0]);if(-1===t.indexOf("ng-hide")){var o="";throw e.openRequests.forEach(function(e){return o+=e.rfeId+", "}),"Loading took more than "+Math.floor(i/1e3)+" seconds in "+t+" - "}}},i):o&&clearTimeout(o)}),t.$on("$destroy",function(){return o&&clearTimeout(o)})}}}]),app.directive("login",["$location","CustomerAccount","Notifications","$rootScope","State","Language","Authentication","FeatureFlags",function(e,t,n,o,i,r,a,s){return{templateUrl:"/scripts/directives/login/dirc_login.html",scope:{onSuccess:"=?",options:"=?",loginButtonText:"=?",initialValue:"=?"},link:function(s){s.loading=!1,s.state=i,s.account=t,s.roamingPage=e.path().indexOf("/account/cockpit")>-1,s.roamingCockpit=o.roamingCockpit,s.app=o.app,s.data={};var c=e.search(),d=c.redirectPath?decodeURIComponent(c.redirectPath):void 0,u=c.redirectSearch?decodeURIComponent(c.redirectSearch):void 0;try{u&&(u=JSON.parse(u))}catch(e){throwSafe(e,"ID-138")}var l=decodeURIComponent(c.redirectHash);s.initialValue&&(s.data.username=s.initialValue),c.username&&"string"==typeof c.username&&(c.username=c.username.split("%20").join(" "),s.data.username=c.username),c.dob&&(s.data.dob=c.dob),c.loginError&&n.add(c.loginError,"bad"),s.doLogin=function(){s.loading=!0,a.loginUsername(s.data.username,s.data.password).then(function(n){if(s.loading=!1,n){if(s.onSuccess)return void s.onSuccess(n);s.loading=!0,t.getLoginDataFromRfeAndDoLoginResponse().then(function(t){if(s.loading=!1,t){-1!==e.path().indexOf("/cockpit/login")&&e.path("/".concat(r.data.current,"/account/cockpit"));var n=window.testDealsAsHome?"/account/deals":"/account";if(d)return e.path(d).search(u||{}).hash(l);-1!==e.path().indexOf("/protect")||-1!==e.path().indexOf("/account/")||-1!==e.path().indexOf("/internet-deal/")||-1!==e.path().indexOf("/sunrise-internet/")||o.stayOnPageAfterLogin||e.path("/".concat(r.data.current).concat(n)).search({})}})}})}}}}]),app.directive("mainNav",["$location","CustomerAccount","Analytics","$rootScope","State","FeatureFlags",function(e,t,n,o,i,r){return{templateUrl:"/scripts/directives/main-nav/dirc_main-nav.html",scope:{},link:function(a){a.account=t,a.location=e,a.isPos=o.isPos,a.app=o.app,a.rs=o,a.state=i,a.disableDevices=window.disableDevices,a.showUpcItem=swissDate().getTime()>16184376e5&&swissDate().getTime()<1618956e6,a.isBlackFriday=r.get("BlackFriday-release"),a.interaction=function(e){e&&n.fireGaInteraction("menu interaction",{menu_location:"top",menu_item:e})},a.show_win_to_logged_in_users=o.show_win_to_logged_in_users,a.getSubscription=function(){return t.getFilteredSubList(!0)[0]}}}}]),app.directive("manualCreditCheck",["ManualCreditCheck","$location","State","AgentAccount","Checkout","$window","$rootScope",function(e,t,n,o,i,r,a){return{templateUrl:"/scripts/directives/manual-credit-check/dirc_manual-credit-check.html",link:function(s){if(s.documents=[],s.idOk=!0,i.orderData.accessCodeData.idCheckRequired){var c,d;if(null!==(c=i.orderData)&&void 0!==c&&null!==(d=c.images)&&void 0!==d&&d.side1){var u=angular.copy(i.orderData.images.side1);if(u.name="id-scan-front",u.blockDeletion=!0,s.documents.push(u),i.orderData.images.side2){var l=angular.copy(i.orderData.images.side2);l.name="id-scan-back",l.blockDeletion=!0,s.documents.push(l)}}else s.idOk=!1}s.agent=o,s.data={tempDocument:{}},s.$watch("data.tempDocument.b64",function(e){return e&&s.addDocument()}),s.addDocument=function(){var e=angular.copy(s.data.tempDocument);s.documents.push(e),s.data.tempDocument={}},s.deleteDocument=function(e){s.documents.splice(s.documents.indexOf(e),1)},s.submit=function(){s.loading=!0,e.check(s.documents,s.data.freeText).then(function(e){s.loading=!1,s.success=!!e,e&&t.path("".concat(n.agentLoggedIn?"/pos":"","/manual-credit-check-submitted"))})},s.back=function(){a.showIdCheckPopupOnLoad=!0,r.history.back()}}}}]),app.directive("mobileMenu",["CustomerAccount","$rootScope","Analytics","State","$location",function(e,t,n,o,i){return{templateUrl:"/scripts/directives/mobile-menu/dirc_mobile-menu.html",link:function(r){r.root=t,r.state=o,o.checkCustomerLoggedIn().then(function(){var t=e.getFilteredSubList(!0)[0];r.subscriptionId=i.search().id||t&&t.id}),r.closeMenu=function(e){t.mobileMenuToggled=!1,e&&n.fireGaInteraction("menu interaction",{menu_location:"mobile",menu_item:e})},r.toggleDropdown=function(){return r.openProducts=!r.openProducts},r.toggleDropdown2=function(){return r.openProducts2=!r.openProducts2},r.toggleMenu=function(){return t.mobileMenuToggled=!t.mobileMenuToggled},r.$watch("mobileMenuToggled",function(e){if(e){var t,n;null===(t=r.computeOpening)||void 0===t||t.call(r),null===(n=r.computeOpening2)||void 0===n||n.call(r)}}),r.computeOpening=function(){return r.openProducts=matchPaths("/product/lebara_europe_plus,/product/lebara_europe,/product/lebara_swiss".split(","))},r.computeOpening2=function(){return r.openProducts2=matchPaths("?/product/lebara_plus,/topup".split(","))},r.logout=function(){return e.logout().then(function(){return r.closeMenu("logout")})},r.show_win_to_logged_in_users=t.show_win_to_logged_in_users,r.account=e,r.disableDevices=window.disableDevices}}}]),app.directive("mobileSidewaysScroll",["$rootScope","$timeout","Products","$location",function(e,t,n,o){return{link:function(i,r,a){function s(e){return e*window.innerWidth}function c(e){return Math.floor(e/window.innerWidth)}function d(e){if(T){e<0&&(e=0),e>T.length-1&&(e=T.length-1);var n,o=100/T.length,r=_createForOfIteratorHelper(T);try{for(r.s();!(n=r.n()).done;){n.value.style.right="".concat(o*e,"%")}}catch(e){r.e(e)}finally{r.f()}M!==e&&t(),M=e,N&&!N.classList&&throwSafe("leftHelper exists but does not have a class list, "+N+", proto: "+N.__proto__,"id-71"),N&&N.classList&&(0===e?N.classList.add("ng-hide"):N.classList.remove("ng-hide")),x&&x.classList&&(e>=T.length-1?x.classList.add("ng-hide"):x.classList.remove("ng-hide")),i.setMobileSidewaysScrollPos&&i.setMobileSidewaysScrollPos(e),q(!0)}}function u(e){if(T){var t,n=_createForOfIteratorHelper(T);try{for(n.s();!(t=n.n()).done;){t.value.style.right="".concat(e,"px")}}catch(e){n.e(e)}finally{n.f()}}}function l(){T&&T.map(function(e){return e.style.height=""}),_&&(_.style.transition="",_.style.height="")}function p(e){if(T){var t,n=_createForOfIteratorHelper(T);try{for(n.s();!(t=n.n()).done;){t.value.style.transition=e?"right .5s ease":"none"}}catch(e){n.e(e)}finally{n.f()}}}function g(){!L&&(window.innerWidth<640||a.always)?f(!0):L&&window.innerWidth>=640&&!a.always&&h(),q(!0)}function f(e){L=!0,w(),k(),S(),D(),e&&E&&(E=!1),a.autoHeightSelf?(_=R,_.style.transition="height .5s ease"):a.autoHeight&&(_=R.querySelector(a.autoHeight),_.style.transition="height .5s ease")}function h(){if(L=!1,P(),y(),S(),l(),T){var e,t=_createForOfIteratorHelper(T);try{for(t.s();!(e=t.n()).done;){var n,o=e.value
;o&&!o.classList&&throwSafe("element exists but does not have a class list, "+o+", proto: "+o.__proto__,"id-72"),null===o||void 0===o||null===(n=o.classList)||void 0===n||n.remove("mobile-sideways-scrolled")}}catch(e){t.e(e)}finally{t.f()}}}function m(e){O=!0,F=e.touches[0].clientX+s(M),A=0,p(!1),B=0,U=0,j=e.touches[0].clientX,H=e.touches[0].clientY,G=!1,V=!1,setTimeout(q,300)}function v(e){if(O&&!V){if($=void 0!==$?j-e.touches[0].clientX:0,B+=e.touches[0].clientX-j,U+=e.touches[0].clientY-H,j=e.touches[0].clientX,H=e.touches[0].clientY,!G){if(!(Math.abs(B)>20&&Math.abs(U)<20))return Math.abs(U)>20&&Math.abs(B)<20?void(V=!0):void 0;G=!0}e.preventDefault(),A=F-e.touches[0].clientX,u(A),q()}}function b(){O=!1;var e;return void 0===$||(!(G&&!V)||(Math.abs($)<4?(e=c(A+window.innerWidth/2))!==M&&(e=e>M?M+1:M-1):e=$>0?M+1:M-1,p(!0),d(e),$=void 0,A=0,q(),!0))}function w(){t&&t();var t=e.$watch(function(){if(T=Array.from(R.querySelectorAll(a.innerEl)),L&&T&&T.length&&T.find(function(e){return!e.classList.contains("mobile-sideways-scrolled")})){C(),p(!0);var e=r[0].querySelector("div.row");e&&(e.style.width=""),u(0);var t=0;T.length>1&&(t=48*(T.length-2),t+=48),R.style.width="calc(".concat(100*T.length,"% + ").concat(t,"px)"),R.style.display="block";var n=Math.floor((T.length-1)/2);"true"===a.autoPos&&(n=I()),a.startPos&&(n=1*a.startPos),"dont-set"!==a.startPos&&d(n),q()}})}function C(e){var t,n=100/T.length,o=_createForOfIteratorHelper(T);try{for(o.s();!(t=o.n()).done;){var i=t.value;i.classList&&(i.classList.remove("desktop-sideways-scrolled"),e||i.classList.add("mobile-sideways-scrolled")),i.style.width="calc(".concat(n,"% - 48px)"),i.style.marginBottom="0px",i.style.position="relative",i.style.right="0"}}catch(e){o.e(e)}finally{o.f()}}function y(){if(R&&(R.style.width="",R.style.display="",T)){var e,t=_createForOfIteratorHelper(T);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.style.width="",n.style.marginBottom="",n.style.position="",n.style.right=""}}catch(e){t.e(e)}finally{t.f()}}}function D(){N=document.createElement("div"),N.className="scroll-helper helper-left",N.addEventListener("click",function(e){e.preventDefault(),p(!0),"true"!==a.hideHelpers&&d(M-1)}),"true"!==a.hideHelpers||o.url().includes("change-subscription")||N.classList.add("hidden"),R.appendChild(N),x=document.createElement("div"),x.className="scroll-helper helper-right",x.addEventListener("click",function(e){e.preventDefault(),p(!0),"dont-set"!==a.startPos&&d(M+1)}),"true"!==a.hideHelpers||o.url().includes("change-subscription")||x.classList.add("hidden"),R.appendChild(x)}function S(){N||(N=R.querySelector(".scroll-helper.helper-left")),x||(x=R.querySelector(".scroll-helper.helper-right")),N&&N.parentNode&&N.parentNode.removeChild(N),x&&x.parentNode&&x.parentNode.removeChild(x)}function I(){if(!T)return 0;var e=Array.prototype.slice.call(T).map(function(e){return e.firstElementChild.id.split("product-item-")[1]}).map(n.findProductByName).map(function(e){return e?e.getBestPromotion():{priority:-1}});return e.indexOf(e.slice().sort(function(e,t){return e.priority<t.priority?1:-1})[0])}function k(){R.addEventListener("touchstart",m),R.addEventListener("touchmove",v),R.addEventListener("touchend",b)}function P(){R.removeEventListener("touchstart",m),R.removeEventListener("touchmove",v),R.removeEventListener("touchend",b)}var T,O,_,A,L,N,x,E=!1,R=r[0],F=0,M=0,$=0,B=0,U=0,j=0,H=0,G=!0,V=!1,W=!1,q=throttle(function(){var e,t;if(E||(E=!0),T&&a.autoHeight&&_&&(L&&window.innerWidth<640||a.always)&&(T.map(function(e,t){e.isInViewPort=!1;if((a.autoHeightItem?e:e.querySelector("lebara"===window.brand?".product-link":".product-item-content"))&&L){t===M&&(e.isInViewPort=!0);var n;O&&B<-20?n=T[M+1]:O&&B>20&&(n=T[M-1]),n&&(n.isInViewPort=!0)}}),0!==T.length)){var n=T.filter(function(e){return e.isInViewPort}).sort(function(e,t){return e.clientHeight>t.clientHeight?1:-1}),o=n[n.length-1];if(o){var i=o.clientHeight;if(i){var r=getComputedStyle(o),s=null!==(e=null===r||void 0===r?void 0:r.marginTop)&&void 0!==e?e:0,c=null!==(t=null===r||void 0===r?void 0:r.marginBottom)&&void 0!==t?t:0;i=i+parseInt(s)+parseInt(c),W=!0,_.style.height=i+("lebara"===window.brand||".overview-section-content"===a.autoHeightItem?0:33)+"px"}}}},200),z=setInterval(function(){q(),W&&clearInterval(z)},250);i.reverseSetPos&&t(function(){return i.reverseSetPos().setPos=function(e){return d(e)}});var Y=e.$on("recalculateAutoheight",function(){return q(!0)}),J=e.$on("appliedNewPromo",function(){return q(!0)});"true"===a.autoPos&&i.$watch(I,function(e){"number"==typeof e&&d(e)}),window.addEventListener("resize",g),g(),i.$on("$destroy",function(){h(),window.removeEventListener("resize",g),J(),Y()});var K=function(){if(T){var e=Array.from(R.querySelectorAll(a.innerEl));for(var t in e)if(!T[t]||T[t]!=e[t])return T=e,e}};i.$watch(K,function(){if(T){C(!0);var e=Math.floor((T.length-1)/2);a.startPos&&(e=1*a.startPos),"true"===a.autoPos&&(e=I()),"dont-set"!==a.startPos&&d(e)}})}}}]),app.directive("multipleCustomerSelection",["Popup",function(e){return{scope:{accounts:"=",onSelect:"&",onCancel:"&"},link:function(t){t.popup=new e("multipleCustomerSelectionPopup","multiple-customer-selection-popup.html",{title:"multipleCustomerSelectionPopup",accounts:t.accounts},{select:function(e){t.popup.hide(),t.onSelect()(e)},hide:function(){t.onCancel()()}}),t.popup.show()}}}]),app.directive("newsletterForm",["NewsLetter",function(e){return{scope:{source:"=",hideTitle:"="},templateUrl:"/scripts/directives/newsletter-form/dirc_newsletter_form.html",link:function(t){t.news=e}}}]),app.directive("monthSwitcher",function(){return{templateUrl:"/scripts/directives/month-switcher/dirc_month-switcher.html",scope:{month:"=",year:"=",onChange:"=?",earliestDate:"=?"},link:function(e){e.months=[];var t=-7;e.earliestDate&&(t=-differenceInMonths(e.earliestDate,swissDate())-1);for(var n=0;n>t;n--){var o=swissDate().addMonths(n);e.months.push({month:o.getMonth(),year:o.getFullYear()})}e.months=e.months.reverse(),e.selectedMonthIndex=e.months.indexOf(e.months.find(function(t){return t.month==e.month&&t.year==e.year})),e.switchMonth=function(t){e.selectedMonthIndex+=t;var n=e.months[e.selectedMonthIndex];e.onChange&&n&&e.onChange(n.month,n.year),e.setPos&&e.setPos(e.selectedMonthIndex)},e.reverseSetPos=function(){return e},e.setMobileSidewaysScrollPos=function(t){e.selectedMonthIndex=t;var n=e.months[e.selectedMonthIndex];e.onChange&&n&&e.onChange(n.month,n.year)}}}}),app.directive("nextSteps",["Products","CustomerAccount","AgentAccount","State","$q","FeatureFlags","$routeParams",function(e,t,n,o,i,r,a){return{templateUrl:"/scripts/directives/next-steps/dirc_next-steps.html",scope:{order:"="},link:function(s){s.agent=n,s.state=o,s.productConfig=e.data.productConfigs[s.order.productId]||e.data.lightProductConfigs[s.order.productId],s.getSubscription=function(){return t.getSubscriptionFromMsisdn(s.order.subscriptionDetails.msisdn)},i.all([o.checkCustomerLoggedInNoCreditCheck(),o.returnWhenAccountDataRefreshed()]).then(function(){s.applyForFreePremiumTV=t.applyForFreePremiumTV()}),s.isFiber=s.productConfig.hasTag("fiber"),s.isHFC=s.productConfig.hasTag("HFC"),s.isHomeProduct=s.productConfig.hasTag("home"),s.isTV=s.productConfig.hasTag("tv"),s.showHideTvInfoForInternetProducts=r.get("tv-info-internet-products"),s.showRoamingMessageForPostpaid=r.get("telco-act-postpaid"),s.showRateplanPlusfeature=r.get("rateplanPlus"),s.showSpecificTextForRateplanPlusProducts=["yallo_home_max_cable_plus_tv","yallo_home_cable_s_plus_tv","yallo_home_cable_m_plus_tv","yallo_home_max_fiber_plus_tv","yallo_home_5g_plus_tv"].indexOf(a.productUrl)>-1}}}]),app.directive("yolNotifications",["Notifications","$rootScope",function(e,t){return{restrict:"E",templateUrl:"/scripts/directives/notifications/dirc_notifications.html",link:function(n){n.notifications=e.data,n.rs=t}}}]),app.directive("offer",["Offers","Analytics","Checkout","$rootScope","Products","FeatureFlags","Linecheck","Storage","$cookies",function(e,t,n,o,i,r,a,s,c){return{transclude:!0,templateUrl:"/scripts/directives/offer/dirc_offer.html",scope:{id:"=?",replaceData:"=?",offerTags:"=?",buttonAlignment:"=?",selectedTab:"=?"},link:function(d,u,l){d.loading=!0,d.rs=o,i.getProductPricing().then(function(e){return d.productPrices=e}),d.countDownDateOutput={},(d.id||l.type)&&((d.id?e.getOfferById(d.id,d.replaceData,d.offerTags):e.getOfferByType(l.type,d.replaceData)).then(function(e){d.loading=!1,d.offer=e,d.offer&&(d.showCountdown=d.offer.countDown&&("Hide during office hours"!==d.offer.countDown.primary.hiding||!dateIsInOfficeHours(swissDate())))}),d.event=function(e){if(d.offer&&!d.dontShowCta&&(d.offer.shareCta||d.offer.actions[0]&&d.offer.actions[0].link)&&(d.showCountdown&&d.countDownDateOutput.time&&window.testCheckoutCountdown&&d.countDownDateOutput.time>420&&d.countDownDateOutput.time<259200&&(n.countDownDate=swissDate().addHours(d.countDownDateOutput.time/60/60)),d.replaceData&&d.replaceData.subscription&&d.replaceData.subscription.setRecommendations({clickedDeal:d.replaceData.id}).then(function(){var e;return null===(e=d.replaceData.subscription)||void 0===e?void 0:e.getRecommendations(!0)}),r.get("Ayma-google-tag-manager-changes"))){var o;["addSubscription","addDevice","rateplanChange"].indexOf(d.replaceData.type)>-1&&(d.productType=d.replaceData.product.productType,"addSubscription"===d.replaceData.type?d.conversionPath="purchase new product":"addDevice"===d.replaceData.type?d.conversionPath="add device":"rateplanChange"===d.replaceData.type?(d.conversionPath="change plan",d.parseData=d.replaceData.subscription.isHFC?d.replaceData.subscription.installationInfo.address:null,d.subInstallationDetails=d.replaceData.subscription.isHFC?void 0:d.replaceData.subscription.installationInfo.otoId,a.lineCheck(d.parseData,d.subInstallationDetails,!1,"checkout").then(function(e){e&&a.setGlobal(e)})):d.conversionPath="activate option"),"option"==d.replaceData.type&&(d.productType=d.replaceData.option.category,d.conversionPath="activate option"),"insurance"==d.replaceData.type&&(d.productType=d.replaceData.type,d.conversionPath="add insurance");var i={offerTag:d.replaceData.offerTag,offerType:d.replaceData.successCriteria[0].type,area:d.selectedTab?"overview":"deals"};if("add device"==d.conversionPath&&r.get("Ayma-google-tag-manager-changes-2")&&(i.isAddDevice=!0),"tv"==(null===(o=d.replaceData.product)||void 0===o?void 0:o.productType)&&(d.conversionPath="add tv"),r.get("Ayma-google-tag-manager-changes-2")&&(d.replaceData.product||"default"!=d.replaceData.type||(d.conversionPath="unavailable",d.replaceData.offerTag.includes("PrepaidTopUp")&&(d.conversionPath="Top up"))),s.set("offerDetails",i),r.get("Ayma-google-tag-manager-changes")){var u;cookieOptions.expires=(new Date).addHours(2);var l=null;if(d.offer.actions[0].primary.button_link.indexOf("devices=")>-1){var p,g=d.offer.actions[0].primary.button_link.split("devices=")[1].split("&")[0],f=Object.keys(d.replaceData.product.devices).indexOf(g);l=null===(p=Object.values(d.replaceData.product.devices)[f])||void 0===p?void 0:p.deviceName,d.replaceData.type=l}var h=null!==(u=d.replaceData.product)&&void 0!==u&&u.productName?d.replaceData.product.productName:"unavailable";r.get("Ayma-google-tag-manager-changes-2")&&(h=d.replaceData.product?h:"unavailable",!d.replaceData.product&&"default"==d.replaceData.type&&d.replaceData.offerTag.includes("PrepaidTopUp")&&(h="Top up"));var m={selfcare_conversion_path:d.conversionPath+" - "+(d.selectedTab?"overview":"deals"),selfcare_offer_type:d.replaceData.successCriteria[0].type,selfcare_offer_tag:d.replaceData.offerTag,selfcare_product_name:h};r.get("Ayma-google-tag-manager-changes-2")&&(m.selfcare_device=l||"unavailable",m.selfcare_promo_code=d.replaceData.promotionCode?d.replaceData.promotionCode:"unavailable"),c.putObject("conversion_path_click",m,cookieOptions)}t.dataLayerPush({event:"gtm visitor interaction",interaction_name:"selfcare conversion path click",sc_conversion_path_click:d.conversionPath,sc_area_clicked:"deals",sc_link_name:d.replaceData.type,sc_product_tab:d.selectedTab?d.selectedTab:"deals",sc_overview_tab:"ROAMING"===d.productType?"roaming":"within switzerland",sc_offer_tag:d.replaceData.offerTag,sc_offer_type:d.replaceData.successCriteria[0].type})}})}}}]),app.directive("offerBig",["Offers","Analytics","Checkout","$rootScope","Products","FeatureFlags",function(e,t,n,o,i,r){return{transclude:!0,templateUrl:"/scripts/directives/offer-big/dirc_offer-big.html",scope:{id:"=?",redButton:"=?",offerLink:"=?",offerTextAddon:"=?",replaceData:"=?",offerTags:"=?"},link:function(a,s,c){a.loading=!0,a.countDownDateOutput={},i.getProductPricing().then(function(e){return a.productPrices=e}),a.rs=o,(a.id?e.getOfferById(a.id,a.replaceData,a.offerTags):e.getOfferByType(c.type,a.replaceData)).then(function(e){a.loading=!1,a.offer=e,a.offer&&(a.showCountdown=a.offer.countDown&&("Hide during office hours"!==a.offer.countDown.primary.hiding||!dateIsInOfficeHours(swissDate())))}),a.event=function(){a.offer&&(a.dontShowCta||(a.offer.shareCta||a.offer.actions[0]&&a.offer.actions[0].link)&&(a.showCountdown&&a.countDownDateOutput.time&&window.testCheckoutCountdown&&a.countDownDateOutput.time>420&&a.countDownDateOutput.time<259200&&(n.countDownDate=swissDate().addHours(a.countDownDateOutput.time/60/60)),t.fireGaInteraction("advertising selection",{advertising_position:c.type,advertising_name:"unknown"}),r.get("Ayma-google-tag-manager-changes")&&"selfcare_premium_tv"===c.type&&t.conversionPathTracking("selfcare_premium_tv",void 0,"purchase new product","overview",!0,!1)))}}}}]),app.directive("offerHero",["Offers","Analytics","Chat","$timeout","Checkout","$rootScope","Products",function(e,t,n,o,i,r,a){return{transclude:!0,templateUrl:"/scripts/directives/offer-hero/dirc_offer-hero.html",scope:{addIcons:"=?",offerKey:"=?",dontShowCta:"=?",id:"=?",redButton:"=?",noArrow:"=?",offerTags:"=?",halfHeight:"=?",replaceData:"=?"},link:function(s,c,d){s.chat=n,s.type=d.type,s.forceSticky=d.forceSticky,a.getProductPricing().then(function(e){return s.productPrices=e}),s.h1=!1,s.imageToDisplay="",s.countDownDateOutput={},s.rs=r,s.showLebaraMobileOfferImage=!r.isMobile||window.showLebaraMobileOfferImage;for(var u=window.document.querySelectorAll("h1"),l=0;l<u.length;l++)-1===u[l].className.indexOf("offer-title")&&(s.h1=!0);s.calcOfferSize=function(){var e=s.offer;if(e){var t=s.isMobile,n=s.isMedium;s.isMobile=window.innerWidth<=640,s.isMedium=window.innerWidth>640&&window.innerWidth<1025,s.isMobile===t&&n===s.isMedium||(s.isMobile?s.imageToDisplay=e.mobileImage:s.isMedium&&s.halfHeight?s.imageToDisplay=e.mobileImage:s.imageToDisplay=e.image,o())}},s.getOffer=function(){s.loading=!0,(s.id?e.getOfferById(s.id,s.replaceData,s.offerTags):e.getOfferByType(d.type,s.replaceData)).then(function(e){s.loading=!1,s.offer=e,e&&(s.id=e.key),s.calcOfferSize(),s.offer&&(s.showCountdown=s.offer.countDown&&("Hide during office hours"!==s.offer.countDown.primary.hiding||!dateIsInOfficeHours(swissDate()))),window.addEventListener("resize",s.calcOfferSize)})},s.event=function(){s.offer&&(s.dontShowCta||(s.offer.shareCta||s.offer.actions[0]&&s.offer.actions[0].link)&&(s.offer.countDown&&s.countDownDateOutput.time&&window.testCheckoutCountdown&&s.countDownDateOutput.time>420&&s.countDownDateOutput.time<259200&&(i.countDownDate=swissDate().addHours(s.countDownDateOutput.time/60/60)),t.fireGaInteraction("advertising selection",{advertising_position:d.type,advertising_name:"unknown"})))},s.getOffer(),d.$observe("type",function(){console.log("type changed",d.type),s.type=d.type,delete s.id,s.getOffer()}),s.$on("$destroy",function(){return window.removeEventListener("resize",s.calcOfferSize)})}}}]),app.directive("offerHeroCentered",["Offers","Analytics","Chat","$timeout","Checkout",function(e,t,n,o,i){return{transclude:!0,templateUrl:"/scripts/directives/offer-hero-centered/dirc_offer-hero-centered.html",scope:{addIcons:"=?",offerKey:"=?",dontShowCta:"=?",id:"=?",redButton:"=?",noArrow:"=?",buttonAlignment:"=?"},link:function(r,a,s){r.chat=n,r.type=s.type,r.forceSticky=s.forceSticky,r.h1=!1,r.imageToDisplay="",r.countDownDateOutput={};for(var c=window.document.querySelectorAll("h1"),d=0;d<c.length;d++)-1===c[d].className.indexOf("offer-title")&&(r.h1=!0);r.calcOfferSize=function(){var e=r.offer;if(e){var t=r.isMobile,n=r.isMedium;r.isMobile=window.innerWidth<=640,r.isMedium=window.innerWidth>640&&window.innerWidth<1025,r.isMobile===t&&n===r.isMedium||(r.isMobile?r.imageToDisplay=e.mobileImage:r.imageToDisplay=e.image,o())}},r.loading=!0,(r.id?e.getOfferById(r.id):e.getOfferByType(s.type)).then(function(e){r.loading=!1,r.offer=e,e&&(r.id=e.key),r.calcOfferSize(),r.offer&&(r.showCountdown=r.offer.countDown&&("Hide during office hours"!==r.offer.countDown.primary.hiding||!dateIsInOfficeHours(swissDate()))),window.addEventListener("resize",r.calcOfferSize)}),r.event=function(){r.offer&&(r.offer.countDown&&r.countDownDateOutput.time&&window.testCheckoutCountdown&&r.countDownDateOutput.time>420&&r.countDownDateOutput.time<259200&&(i.countDownDate=swissDate().addHours(r.countDownDateOutput.time/60/60)),t.fireGaInteraction("advertising selection",{advertising_position:s.type,advertising_name:"unknown"}))},r.$on("$destroy",function(){return window.removeEventListener("resize",r.calcOfferSize)})}}}]),app.directive("offerSizeCalc",["$timeout",function(e){return{link:function(t,n){function o(){var o=t.offerSizeClass,i=n[0].getBoundingClientRect();t.width=i.right-i.left,t.width<592?t.offerSizeClass="small":t.width<976?t.offerSizeClass="medium":t.offerSizeClass="big",t.offerSizeClass!==o&&e()}t.calc=throttle(o,500),window.addEventListener("resize",t.calc),o(),t.$on("$destroy",function(){window.removeEventListener("resize",t.calc)})}}}]),app.directive("onpStatus",["CustomerAccount","Popup","Notifications","$rootScope","Language","Poa","$q",function(e,t,n,o,i,r,a){return{templateUrl:"/scripts/directives/onp-status/dirc_onp-status.html",scope:{sub:"="},link:function(s){var c=s.sub.activeNpFlow;s.language=i.data,s.np=c,s.data={file:{}},s.loading=!0,s.rs=o,s.allowUpload="8"===(null===c||void 0===c?void 0:c.statusVoId),s.computeStep=function(){s.status=c.status;var e=-1!==["sign","company","person"].indexOf(s.status);s.positive=!e&&-1!==["waiting","confirmed"].indexOf(s.status),s.onpPopupDigital.data.preventEditOnp=e&&-1===["company","person"].indexOf(s.status),s.onpPopupDigital.data.belongsTo="company"===s.status?"company":"person"===s.status?"person":void 0};var d=function(t){var n=s.sub.user,o=e.billingGroups[s.sub.billingGroupId].name;return _objectSpread(_objectSpread({},{subscriptionId:s.sub.id,billingGroupName:o}),t.address&&n.address?{userInfo:{company:t.companyName||void 0,language:i.data.current.toUpperCase()},npDetail:{portWishDate:c.portWishDate.toServerJSON(),phoneNumber:c.msisdn,fastPorting:s.sub.fastPorting,firstName:t.firstName||"",lastName:t.lastName||"",street:t.address.streetName,streetNumber:t.address.streetNumber,zip:t.address.postCode,city:t.address.city}}:{})};s.uploadSignedDocument=function(){s.loading=!0,r.generatePOA(d(s.generatePopupData())).then(function(e){return r.signPOA({jwtToken:e.token,manuallySignedPoa:s.data.file.b64.split("base64,")[1]})}).then(function(t){if(s.data.file.b64=!1,s.loading=!1,!t)return n.add("onp-digital-sign-fail","bad");s.loading=!0,s.actionPerformed=!0,e.refreshData(0,!0).then(function(){s.sub.getData(s.sub.id).then(function(){s.loading=!1,n.add("onp-digital-sign-success","good")})})})},s.generatePopupData=function(){return c&&{address:c.npUserVO?{city:"",co:"",country:s.sub.user&&s.sub.user.address?s.sub.user.address.country:"",postCode:c.npUserVO.zip,streetName:c.npUserVO.street,streetNumber:c.npUserVO.streetNumber}:s.sub.user&&s.sub.user.address?s.sub.user.address:{city:"",co:"",country:"",postCode:"",streetName:"",streetNumber:""},firstName:c.npUserVO.firstName||s.sub.user.firstName,lastName:c.npUserVO.lastName||s.sub.user.lastName,companyName:c.npUserVO.companyName||""}},s.sub.returnWhenDataLoaded().then(function(){s.loading=!1,s.onpPopupDigital=new t("onpPopupDigital","onp-popup-digital.html",_objectSpread({title:"onpPopupDigitalTitle",onpPopupLegal:new t("onpPopupLegal","onp-popup-legal.html")},s.generatePopupData()),{validateSignpad:function(){return o.$emit("validateSignpad")},submit:function(t){if(t&&!s.onpPopupDigital.data.loading){var o=s.onpPopupDigital.data;o.loading=!0,r.generatePOA(d(o)).then(function(e){return e.errorCode?a.resolve(e):e?r.signPOA({jwtToken:e.token,binarySignData:t.split("base64,")[1],signField:"CUST_SIGNATURE"}):a.resolve()}).then(function(t){if(o.loading=!1,t.errorCode)return n.add("error_"+t.errorCode,"bad");t?(o.loading=!0,s.onpPopupDigital.hide(),n.add("onp-digital-sign-success","good"),e.refreshData(0,!0).then(function(){s.sub.getData(s.sub.id).then(function(){o.loading=!1,n.add("onp-digital-sign-success","good")})})):n.add("onp-digital-sign-fail","bad")})}}}),s.$watch("subscription.activeNpFlow",s.computeStep,!0)})}}}]),app.directive("openPopupButton",["PrismicPopups","$timeout",function(e,t){return{transclude:!0,template:'\n    <div ng-click="openPopup()" ng-transclude></div>\n    ',scope:{prismicPopupId:"=?"},link:function(n){n.openPopup=function(){var o=e.popups.find(function(e){return e.data.id===n.prismicPopupId});t(function(){null===o||void 0===o||o.show()},250)}}}}]),app.directive("openidLogin",["$location","OpenID","Redirect","State","CustomerAccount","$window",function(e,t,n,o,i,r){return{restrict:"E",templateUrl:"/scripts/directives/openid-login/dirc_openid-login.html",scope:{},link:function(a){a.isLoading=!0,a.customerLoggedIn=!1,o.checkCustomerLoggedIn().then(function(e){e?a.onSuccess(e):a.isLoading=!1}),a.onSuccess=function(o){if(a.isLoading=!0,o)return t.complete(e.search().oidcJwt).then(function(e){return r.location.href=e.data.redirectUrl});i.getLoginDataFromRfeAndDoLoginResponse().then(function(){return a.customerLoggedIn=!0,t.complete(e.search().oidcJwt)}).then(function(e){var t=e.redirectUrl;n.redirect(t)}).catch(function(e){switch(null===e||void 0===e?void 0:e.errorCode){case"ERR_NO_ACTIVE_TV_SUBSCRIPTION_FOUND":a.error="no_tv_subscription";break;default:a.errorMsg="openid_generic"}}).finally(function(){a.isLoading=!1})}}}}]),app.directive("openingTimes",["OpeningTimes",function(e){return{scope:{type:"=",model:"=",nextTime:"="},link:function(t){t.model=!1,t.nextTime="",t.check=function(){e.check(t.type).then(function(e){e&&(t.model===e.model&&t.nextTime===e.nextTime||(t.model=e.model,t.nextTime=e.nextTime))})},t.check();var n=setInterval(t.check,15e3);t.$on("$destroy",function(){return clearInterval(n)})}}}]),app.directive("optionActivation",["CustomerAccount","Popup","SavingsOptions","$location","AgentAccount","$rootScope","Analytics","FeatureFlags",function(e,t,n,o,i,r,a,s){return{scope:{subscription:"=data",onClose:"=",selectedCountry:"=?",categories:"=?",option:"=?"},link:function(c){c.categories||(c.categories=n.categories),c.optionActivationPopup=new t("optionActivationPopup","option-activation-popup.html",{title:"optionActivationPopupTitle",SavingsOptions:n,classes:["no-padding"],selectedCountry:c.selectedCountry,categories:c.categories,oneCat:1===c.categories.length},{select:function(t){if(s.get("Ayma-google-tag-manager-changes")&&(a.fireCustomPurchaseEvent("add_to_cart",t.name,t.category,"".concat(e.getCurrentSubscription().type," mobile"),t.newCustomerCost,"1",t.id,null,"unavailable"),a.fireCustomPurchaseEvent("begin_checkout",t.name,t.category,"".concat(e.getCurrentSubscription().type," mobile"),t.newCustomerCost,"1",t.id,null,"unavailable")),c.confirmationPopup.data.option=t,c.confirmationPopup.data.conflict=c.subscription.optionConflict(t),c.confirmationPopup.data.conflict){var n,o=c.confirmationPopup.data.conflict.subDetails[c.confirmationPopup.data.subscription.id][0][0];o.optionrExpiryDate&&new Date(o.optionrExpiryDate)>0?n="optionrExpiryDate":o.endDate&&new Date(o.endDate)>0?n="endDate":o.optionrRenewalDate&&new Date(o.optionrRenewalDate)>0&&(n="optionrRenewalDate");var i=c.confirmationPopup.data.conflict.subDetails[c.confirmationPopup.data.subscription.id].sort(function(e,t){return new Date(e[0][n])>new Date(t[0][n])?1:-1})[0][0];c.confirmationPopup.data.conflictDate=i[n]}c.optionActivationPopup.hide("ignore"),c.confirmationPopup.show()},hide:function(e){"ignore"!==e&&c.onClose()}}),c.confirmationPopup=new t("confirmationPopup","option-activation-confirmation-popup.html",{title:"optionConfirmationPopupTitle",subscription:c.subscription,account:e,roamingCockpit:r.roamingCockpit,agent:i},{activate:function(e){c.confirmationPopup.data.activating||(c.confirmationPopup.data.activating=!0,e.activate(c.subscription).then(function(e){c.confirmationPopup.data.activating=!1,e&&c.confirmationPopup.hide()}))},deactivate:function(e){c.confirmationPopup.data.deactivating||(c.confirmationPopup.data.deactivating=!0,e.deactivate(c.subscription).then(function(e){c.confirmationPopup.data.deactivating=!1,e&&c.confirmationPopup.hide()}))},backButton:c.option?void 0:function(){c.confirmationPopup.hide("ignore"),c.optionActivationPopup.show()},hide:function(e){"ignore"!==e&&c.onClose()}}),c.optionActivationPopup.data.subscription=c.subscription;var d;o.search().option&&(d=n.findOptionByName(o.search().option)),c.option&&(d=c.option),d?c.optionActivationPopup.functions.select(d):c.optionActivationPopup.show()}}}]),app.directive("optionCarousel",["$rootScope","State","CustomerAccount",function(e,t,n){return{templateUrl:"/scripts/directives/option-carousel/dirc_option-carousel.html",scope:{options:"=optionData",rateplan:"=?"},link:function(o){o.rs=e,o.filteredOptions=[],o.data={position:0},t.checkCustomerLoggedInNoCreditCheck().then(function(e){if(e){var t=n.getCurrentSubscription();t&&t.returnWhenRecommendationsLoaded().then(function(){o.currentSub=t})}}),o.move=function(e){"left"==e?o.canMoveLeft()?o.data.position-=1:o.data.position=o.filteredOptions.length-o.columnCount():"right"==e&&(o.canMoveRight()?o.data.position+=1:o.data.position=0)},o.goToPos=function(e){3==o.columnCount()&&(e-=1),e<0&&(e=0),e>o.filteredOptions.length-o.columnCount()?o.data.position=o.filteredOptions.length-o.columnCount():o.data.position=e},o.isSelected=function(e){var t=o.columnCount(),n=e-(o.data.position+t)+1;return n<=0&&n>-t},o.canMoveRight=function(){return o.data.position<o.filteredOptions.length-o.columnCount()},o.canMoveLeft=function(){return o.data.position>0},o.columnCount=function(){return window.innerWidth<640?1:window.innerWidth<1024?2:3}}}}]),app.directive("optionItem",["State",function(e){return{templateUrl:"/scripts/directives/option-item/dirc_option-item.html",scope:{option:"=data",rateplan:"=?",currentSub:"=?"},link:function(t){t.checkUrl=function(){return e.agentLoggedIn?"/pos":""}}}}]),app.directive("optionItemSingle",["State",function(e){return{templateUrl:"/scripts/directives/option-item-single/dirc_option-item-single.html",scope:{option:"=data"},link:function(t){t.checkUrl=function(){return e.agentLoggedIn?"/pos":""}}}}]),app.directive("optionPrice",function(){return{templateUrl:"/scripts/directives/option-price/dirc_option-price.html",scope:{option:"=",currentSub:"=?",small:"=?",hideLegalText:"=?",boldPrices:"=?"},link:function(e){void 0===e.boldPrices&&(e.boldPrices=!0),e.optionCost=e.option.normalCost,e.discountedCost=e.option.calcPriceNewCustomer(),e.init=function(){if(e.currentSub)if(e.isActiveOption=e.option.subDetails[e.currentSub.id]&&!e.currentSub.canActivate(e.option),e.isActiveOption){var t;e.promo=e.currentSub.getPromoForOption(e.option),e.discountedCost=e.option.normalCost-((null===(t=e.promo)||void 0===t?void 0:t.totalDiscountedAmount)||0),e.discountedCost<=0&&(e.discountedCost=1e-6)}else e.promo=e.option.getPromo(e.currentSub),e.discountedCost=e.option.calcPriceNewCustomer(e.currentSub)},e.currentSub?e.currentSub.returnWhenDataLoaded().then(function(){return e.init()}):e.init()}}}),app.directive("options",["SavingsOptions","CommonData","State",function(e,t,n){return{restrict:"E",templateUrl:"/scripts/directives/options/dirc_options.html",scope:{rateplan:"=data",showHidden:"=?",hiddenUrls:"=?",extraOptions:"=?",categories:"=?"},link:function(n){n.countrySelector={selectedCountry:void 0},n.$watch("rateplan",function(){n.options=n.rateplan.options,n.extraOptions&&(n.options=_objectSpread(_objectSpread({},n.options),n.extraOptions)),n.categories||(n.categories=e.categories)}),n.getIcon=function(e){return t.optionCategoryIcons[e.toLowerCase()]}}}}]),app.directive("orderDetails",["CustomerAccount","Products","SavingsOptions","Promotions","AgentAccount","Files","State","Popup","$rootScope","FeatureFlags",function(e,t,n,o,i,r,a,s,c,d){return{templateUrl:"/scripts/directives/order-details/dirc_order-details.html",scope:{order:"="},link:function(d){var u,l,p;d.state=a,d.account=e,d.Products=t,d.SavingsOptions=n,d.Promotions=o,d.agent=i,d.config=t.data.productConfigs[d.order.productId]||t.data.lightProductConfigs[d.order.productId],null!==(u=d.order)&&void 0!==u&&u.devices&&(d.order.devices=d.order.devices.filter(function(e){return null===e||void 0===e?void 0:e.deviceId}).map(function(e){return t.data.devices[e.deviceId]})),d.rs=c,null!==(l=d.order)&&void 0!==l&&l.promotionCode&&(d.promotion=o.findPromotionByCode(d.order.promotionCode)),d.showActivatePremiumTVButton=t.productAppliesForFreePremiumTV(d.config.url)&&(null===(p=o.findPromotionByCode("yallopremiumtv_chf20_120months"))||void 0===p?void 0:p.availableInCurrentChannel()),d.orderPickupPopup=new s("orderPickupPopup","order-pickup-popup.html",{title:"orderPickupPopupTitle",orderId:d.order.orderId},{onSuccess:function(){d.pickedUpOrder=!0}}),d.downloadPdf=r.saveAs2,d.showOrderPickupPopup=function(){return d.orderPickupPopup.show()}}}}]),app.directive("orderDetailsExtension",["CustomerAccount","Products","SavingsOptions","Promotions","$routeParams","Files","$rootScope",function(e,t,n,o,i,r,a){return{templateUrl:"/scripts/directives/order-details-extension/dirc_order-details-extension.html",scope:{order:"="},link:function(s){s.account=e,s.Products=t,s.SavingsOptions=n,s.Promotions=o,s.rateplanChange="change-postpaid"==i.ordertype,s.posMode=a.isPos,s.lockinAdded=t.findProductById(s.order.productId).lockinLength,s.downloadPdf=r.saveAs2}}}]),app.directive("orderPickup",["Network","CustomerAccount","$q","CustomerOrders",function(e,t,n,o){return{templateUrl:"/scripts/directives/order-pickup/dirc_order-pickup.html",scope:{orderId:"=",onSuccess:"=?"},link:function(i){i.data={},i.account=t,i.submit=function(){i.confirming||i.doEmailThing().then(function(e){e&&(i.confirming=!0,i.data.qrCodeData={},o.pickupOrder(i.orderId,t.accountOwner).then(function(e){i.confirming=!1,i.success=!!e,i.shipmentCancelled=e&&e.shipmentCancelled,t.refreshOrders(),i.success&&i.onSuccess&&i.onSuccess()}))})},i.doEmailThing=function(){return t.accountOwner.emailAddress?n.resolve(!0):e.post("updateUserInfo",{email:i.data.emailAddress.toLowerCase(),userId:t.accountOwner.id}).then(function(){return t.doRefresh()})}}}}]),app.directive("orderStatus",["CustomerAccount","Popup","Notifications","Network","CustomerOrders",function(e,t,n,o,i){return{templateUrl:"/scripts/directives/order-status/dirc_order-status.html",scope:{order:"=",subscription:"=sub",onReturnHandlingSuccess:"=?",hideIdCheckWarnings:"=?"},link:function(r){var a,s,c,d,u,l,p;r.allowTermination=!1,window.isTest&&r.subscription.activeNpFlow&&(r.allowTermination=!0),r.init=function(){var t;r.showShipmentIcon=!1,r.status=r.subscription.getOrderStatus(r.order,r.hideIdCheckWarnings),"PICKUP_AT_STORE"===(null===(t=r.order)||void 0===t?void 0:t.shippingMethod)||!r.hideIdCheckWarnings&&e.findIdsBeingChecked().length||(r.hideIdCheckWarnings||e.findIdsInStatus("approved").length)&&("delivery_put_onhold"==r.status?r.showDeliveryOnHoldIcon=!0:r.showShipmentIcon="error"!==r.status&&"return_accepted"!==r.status),
r.allowPickupAtStore=r.order&&i.orderAllowedToBePickedUp(r.order,e.subscriptions)},r.orderPickupPopup=new t("orderPickupPopup","order-pickup-popup.html",{title:"orderPickupPopupTitle",orderId:null===(a=r.order)||void 0===a?void 0:a.orderId}),r.returnHandlingPopup=new t("returnHandlingPopup","return-handling-popup.html",{title:"returnHandlingPopupTitle",address:{},billingAddress:{},firstName:null===(s=r.order)||void 0===s?void 0:null===(c=s.address)||void 0===c?void 0:c.firstName,lastName:null===(d=r.order)||void 0===d?void 0:null===(u=d.address)||void 0===u?void 0:u.lastName},{submit:function(){var t;r.returnHandlingPopup.data.submitting||(r.returnHandlingPopup.data.submitting=!0,i.retryOrder(null===(t=r.order)||void 0===t?void 0:t.orderId,r.returnHandlingPopup.data.address).then(function(t){t?e.refreshOrders().then(function(){if(r.onReturnHandlingSuccess&&r.onReturnHandlingSuccess(),r.returnHandlingPopup.data.differentBillingAddress){var t=e.accountOwner,n={address:{country:r.returnHandlingPopup.data.billingAddress.country,city:r.returnHandlingPopup.data.billingAddress.city,postCode:r.returnHandlingPopup.data.billingAddress.postCode,streetName:r.returnHandlingPopup.data.billingAddress.streetName,streetNumber:r.returnHandlingPopup.data.billingAddress.streetNumber||void 0,co:r.returnHandlingPopup.data.billingAddress.co||""}};t.updateInfo(n).then(function(){r.returnHandlingPopup.data.submitting=!1,r.returnHandlingPopup.hide()})}else r.returnHandlingPopup.data.submitting=!1,r.returnHandlingPopup.hide()}):r.returnHandlingPopup.data.submitting=!1}))}}),r.shipOrderPopup=new t("shipOrderPopup","ship-order-popup.html",{title:"shipOrderPopupTitle",orderId:null===(l=r.order)||void 0===l?void 0:l.orderId,address:angular.copy(null===(p=e.accountOwner)||void 0===p?void 0:p.address)},{submit:function(){var t,i=JSON.stringify(addressToJson(r.shipOrderPopup.data.address))!==JSON.stringify(addressToJson(e.accountOwner.address)),a=addressToJson(r.shipOrderPopup.data.address);a.firstName=e.accountOwner.firstName,a.lastName=e.accountOwner.lastName;var s={orderId:null===(t=r.order)||void 0===t?void 0:t.orderId,shippingAddress:i?a:void 0};r.shipOrderPopup.data.loading=!0,o.post("shipOrder",s).then(function(t){r.shipOrderPopup.data.loading=!1,t&&(e.refreshOrders(),r.shipOrderPopup.hide(),n.add("orderWillBeShipped","good"))})}}),r.terminationPopup=new t("terminationPopup","termination-popup.html",{title:"terminationPopupTitle",code:""},{confirm:function(){r.terminationPopup.data.submitting||(r.terminationPopup.data.submitting=!0,i.terminateOrderVc(r.subscription.id,r.keyToken,r.terminationPopup.data.code).then(function(t){r.terminationPopup.data.submitting=!1,t&&(e.refreshOrders(),r.terminationPopup.hide(),n.add("orderCancelled","good"))}))}}),r.terminateOrder=function(){r.sendingTerminationRequest||(r.sendingTerminationRequest=!0,i.terminateOrder(r.subscription.id).then(function(e){r.sendingTerminationRequest=!1,e&&e.keyToken&&(r.keyToken=e.keyToken,r.terminationPopup.show())}))},r.init(),r.$watch("order",r.init)}}}]),app.directive("otoId",["Network","$timeout","CommonData",function(e,t,n){return{require:"ngModel",link:function(e,t,n,o){var i=n.allowedOtoIds?JSON.parse(n.allowedOtoIds):void 0;e.$watch(n.ngModel,function(t,n){e.changeOto(t,n)}),e.changeOto=function(e,t){if(e){var n=e.length;if((null===t||void 0===t?void 0:t.length)<=n&&(1!==n&&5!==n&&9!==n&&13!==n||(e+="."),[3,7,11,15].includes(n)&&"."===e.split("").pop()&&(e=e.substring(0,n-1))),15===n&&i){var r=i.find(function(t){return t.otoId===e});o.$setValidity("validOtoId",!!r)}e=e.toUpperCase(),o.$setViewValue(e),o.$render()}}}}}]),app.directive("passwordChange",["Network","Notifications","Analytics","CustomerAccount",function(e,t,n,o){return{transclude:!0,templateUrl:"/scripts/directives/password-change/dirc_password-change.html",scope:{user:"=data",oldPassword:"=?",onSubmit:"=?"},link:function(i,r){i.data={},i.account=o,i.editable=o.isAccountOwner(),i.oldPassword&&(i.data.oldPassword=i.oldPassword);for(var a=[],s=r[0].getElementsByTagName("input"),c=1;c<s.length;c++)a.push(angular.element(s[c]).controller("ngModel"));i.checkPassword=function(){var e=checkPassword(i.data.newPassword,i.data.repeatNewPassword);for(var t in a)a[t].$setValidity("passwordsMatch",e)},i.submit=function(){if(!i.changingPassword){i.changingPassword=!0;var o={userId:i.user.id,oldPassword:i.data.oldPassword,newPassword:i.data.newPassword};n.event("changePassword","start"),e.post("customerPasswordChange",o).then(function(e){if(i.changingPassword=!1,e){var o;n.event("changePassword","success"),t.add("saved","good"),i.data={},i.changePasswordForm.$setPristine(),null!==(o=i.onSubmit)&&void 0!==o&&o.call(i)&&i.onSubmit()()}})}}}}}]),app.directive("paymentReference",["CustomerBills","CustomerAccount","$timeout","$rootScope","Language","$translate",function(e,t,n,o,i,r){return{templateUrl:"/scripts/directives/payment-reference/dirc_payment-reference.html",scope:{paymentAmount:"="},link:function(a){var s;a.lang=i.data.current,a.rs=o,a.showPrint=o.isDesktop&&!isIE,a.account=t,a.bills=e,a.accountNumber="01-073820-1",a.accountNumberSimple=a.accountNumber.split("-").join(""),a.companyName=r.instant("Sunrise_UPC_GmbH"),a.loading=!0,e.getBills().then(function(){e.billDataLoaded&&(a.amount="all"===a.paymentAmount?e.totalOpenAmount:e.totalDueAmount,a.bill=e.getLastUnpaidBill(),a.billingGroupId=t.postpaidBillingGroup.name,s=a.bill?a.bill.invoiceNumber:e.backupReference,a.reference="000000".concat(a.billingGroupId).concat(paddTo(s,10)),a.reference+=mod10RecursiveCheckDigitCalc(a.reference),a.referenceSimple=a.reference,a.reference=a.reference.split("").map(function(e,t){return 2!==t&&(t-2)%5?e:" "+e}).join(""),a.billDate=a.bill?a.bill.endDate:new Date,a.payDate=angular.copy(a.billDate).addMonths(1),a.amountWhole=Math.floor(a.amount),a.amountCents=Math.round(a.amount%1*100),a.weirdAmount="01"+paddTo(Math.floor(100*a.amount),10),a.weirdAmount+=mod10RecursiveCheckDigitCalc(a.weirdAmount),window.mod10RecursiveCheckDigitCalc=mod10RecursiveCheckDigitCalc,a.loading=!1)}),a.print=function(){a.loading=!0;var e=document.title;document.title="invoice-"+s,window.print(),a.loading=!1,document.title=e,n()}}}}]),app.directive("paymentReferenceNew",["CustomerBills","CustomerAccount","$rootScope","$translate","FeatureFlags",function(e,t,n,o,i){return{templateUrl:"/scripts/directives/payment-reference-new/dirc_payment-reference-new.html",scope:{paymentAmount:"="},link:function(r){r.showPrint=n.isDesktop&&!isIE,r.account=t,r.brand="yallo"===brand?"yallo":"Lebara Mobile",r.loading=!0,r.adminfeeflag=i.get("new-admin-fee"),e.getBills().then(function(){r.createQRCode(),r.loading=!1}),n.$on("langChangeEnd",function(){r.createQRCode()}),r.createQRCode=function(){if(e.billDataLoaded){r.amount="all"===r.paymentAmount?e.totalOpenAmount:e.totalDueAmount,r.bill=e.getLastUnpaidBill(),r.billingGroupId=t.postpaidBillingGroup.name;var n=r.bill?r.bill.invoiceNumber:e.backupReference;r.reference="000000".concat(r.billingGroupId).concat(paddTo(n,10)),r.reference+=mod10RecursiveCheckDigitCalc(r.reference),r.referenceSimple=r.reference,r.reference=r.reference.split("").map(function(e,t){return 2!==t&&(t-2)%5?e:" "+e}).join("");var i="".concat(t.accountOwner.firstName," ").concat(t.accountOwner.lastName),a=t.accountOwner.address;r.iban="CH04 3000 0008 8750 3770 0",r.companyName=o.instant("Sunrise_UPC_GmbH");var s=["SPC","0200","1",r.iban.split(" ").join(""),"S",r.companyName,"","","8152","Glattpark (Opfikon)","CH","","","","","","","",r.amount.toFixed(2),"CHF","S",i,a.streetName,a.streetNumber,a.postCode,a.city,"CH","QRR",r.reference.split(" ").join(""),"","EPD",""],c=s.join("\n");Promise.all([loadScript("/assets/other/qr-code-with-image.js"),loadScript("/assets/other/utf8.js")]).then(function(e){var t=utf8.encode(c),n=document.getElementById("qr-c");n.innerHTML="",new QRCode(n,{text:t,binary:!0,width:512,height:512,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.M,logo:"/assets/other/CH-Kreuz_7mm.png",logoWidth:72,logoHeight:72})})}}}}}]),app.directive("personalDetails",["Language","Checkout","Popup","$timeout","State","CommonData","FeatureFlags","$location","Analytics",function(e,t,n,o,i,r,a,s,c){return{transclude:!0,templateUrl:"/scripts/directives/personal-details/dirc_personal-details.html",scope:{data:"=",editable:"=",radioMode:"=?",emailOnlyEditable:"=?",numberText:"=?",highlightEmailEmpty:"=?",blockEmail:"=?",companyName:"=?",phoneNumberMaxLength:"=?",hideTitle:"=?",hideBirthdate:"=?",compact:"=?",preventNameEdit:"=?",chooseLang:"=?",contactNumber:"=?",allowAnyDate:"=?",allowNoEmail:"=?",eshopMode:"=?",minAge:"=?",hideEmail:"=?",autoComplete:"=?",isWin:"=?"},link:function(d){d.data||(d.data={}),d.minAge||(d.minAge=-5840),d.checkout=t,d.langService=e,void 0===d.data.noEmail&&(d.data.noEmail=!1),d.data.noEmail&&(d.data.noEmail=!1),d.pattern=d.isWin?r.regex.sunriseName:r.regex.name,d.phonePattern=d.isWin?"[0-9+]*":"[0-9 +-]*",d.showCompanyField=a.get("company-name-field-testing"),d.outoffocusAnalyticsEvent=function(){s.url().includes("contact-informations")&&c.dataLayerPush({event:"gtm visitor interaction",interaction_name:"form interaction",form_name:"contact informations",form_field:"emailAddress"})},d.forceEmailPopup=new n("forceEmailPopup","force-email-popup.html",{title:"posForceEmailPopupTitle"},{show:function(){d.forceEmailPopup.data.willEnterEmail=!0,d.forceEmailPopup.data.emailAddress=""},hide:function(e){d.forceEmailPopup.data.showConfirmation=!1,"closeFromConfirmButton"!==e&&(d.data.noEmail=!1)},confirm:function(){return d.forceEmailPopup.data.confirming?d.forceEmailPopup.data.showConfirmation=!1:d.forceEmailPopup.data.emailAddress?(d.data.emailAddress=d.forceEmailPopup.data.emailAddress,void d.forceEmailPopup.hide()):(d.forceEmailPopup.data.confirming=!0,void o(function(){d.forceEmailPopup.data.confirming&&(d.forceEmailPopup.data.confirming=!1,d.forceEmailPopup.data.showConfirmation=!1,d.data.emailAddress="",d.forceEmailPopup.active&&d.forceEmailPopup.hide("closeFromConfirmButton"))},4e3))}}),d.toggleNoEmail=function(){d.data.noEmail&&i.agentLoggedIn&&d.forceEmailPopup.show()}}}}]),app.directive("phoneNumber",["Language","Countries","$timeout","ContactNumberCheck",function(e,t,n,o){return{templateUrl:"/scripts/directives/phone-number-input/dirc_phone_number_input.html",require:"ngModel",scope:{id:"@",name:"@",ngModel:"=",required:"@",label:"=",editable:"=?"},link:function(i,r,a,s){i.loading=!0,i.updateCountry=function(e){var t,n;i.selectedCountry=e;var o=null!==(t=null===(n=i.asYouType)||void 0===n?void 0:n.digits)&&void 0!==t?t:i.ngModel;i.asYouType=new libphonenumber.AsYouType(i.selectedCountry.countryCode),i.updateNumber(o)},i.updateNumber=function(e){if(i.asYouType.reset(),i.asYouType.input(e),i.asYouType.getNumber())i.phoneNumber=i.asYouType.getNumber(),i.ngModel=i.phoneNumber.number,s.$setViewValue(i.ngModel),s.$setValidity("invalid",i.isValid()),s.$setDirty();else if(i.ngModel=i.asYouType.digits,i.required){var t;s.$setValidity("required",null),s.$setValidity("required",(null===(t=i.ngModel)||void 0===t?void 0:t.length)>0)}else s.$setValidity("invalid",!0)},i.isValid=function(){var e;return!(i.required||i.ngModel&&0!=(null===(e=i.ngModel)||void 0===e?void 0:e.length))||i.phoneNumber&&i.phoneNumber.isValid()&&o.lengthIsValid(i.phoneNumber.number)},i.editable=!angular.isDefined(i.editable)||i.editable,i.currentLang=e.data.current,i.dropDownItems=[],t.addCallingCodes().then(function(){var e,o,r,a=null===(e=t.countriesObj)||void 0===e?void 0:e["200903041337530279"];if(null!==(o=a)&&void 0!==o&&o.countryCode&&null!==(r=a)&&void 0!==r&&r.countryCallingCode){i.priorityCountries=t.priorityCountries;var s=i.priorityCountries.map(function(e){return e.id});i.countries=t.sortedCountries.filter(function(e){return e.countryCode&&e.countryCallingCode&&!s.includes(e.id)}).map(function(e){return Object.assign({group:"──────────"},e)}),i.dropDownItems=[].concat(_toConsumableArray(i.priorityCountries),_toConsumableArray(i.countries))}else{var c,d;a||(a={de:"Schweiz",en:"Switzerland",fr:"Suisse",it:"Svizzera",id:"200903041337530279"}),a.countryCode=null!==(c=a.countryCode)&&void 0!==c?c:"CH",a.countryCallingCode=null!==(d=a.countryCallingCode)&&void 0!==d?d:"41",i.dropDownItems=[a]}if(i.ngModel){var u=libphonenumber.parsePhoneNumberFromString(i.ngModel),l=null!==u&&void 0!==u&&u.country?i.dropDownItems.find(function(e){return e.countryCode===u.country}):a;i.updateCountry(null!==l&&void 0!==l?l:a)}else i.updateCountry(a);i.loading=!1,n()}),i.phoneNumberDisplay=function(e){if(!arguments.length){var t=i.getDisplayValue();return i.updateCaret&&(i.updateCaretPos(t),i.updateCaret=!1),t}i.caretPosition=i.input[0].selectionStart,i.noOfWhitespaces=i.noOfWhitespacesBeforeCaret(e,i.caretPosition),i.updateNumber(e),i.updateCaret=!0},i.getDisplayValue=function(){var e,t,n;i.asYouType&&!i.asYouType.digits&&i.ngModel&&i.updateNumber(i.ngModel);var o;if("CH"===(null===(e=i.selectedCountry)||void 0===e?void 0:e.countryCode)&&!i.asYouType.template&&(null===(t=i.asYouType.digits)||void 0===t?void 0:t.length)>0&&"0"!=(null===(n=i.asYouType.digits)||void 0===n?void 0:n[0])){var r=new libphonenumber.AsYouType(i.selectedCountry.countryCode);r.input("0"+i.asYouType.digits),o=r.formattedOutput.replace(/^0/,"")}else{var a;o=null===(a=i.asYouType)||void 0===a?void 0:a.formattedOutput}return o},i.updateCaretPos=function(e){var t=i.noOfWhitespacesBeforeCaret(e,i.caretPosition),n=i.caretPosition+(t-i.noOfWhitespaces);setTimeout(function(){return i.input[0].setSelectionRange(n,n)},1),i.caretPosition=n},i.noOfWhitespacesBeforeCaret=function(e,t){return e&&t?(e.slice(0,t).match(/ /g)||[]).length:0}}}}]),app.directive("popupItem",["Keys","$rootScope","$timeout","State",function(e,t,n,o){return{templateUrl:"/scripts/directives/popup/dirc_popup.html",transclude:!0,scope:{templateUrl:"=",popup:"=data"},link:function(i){function r(){i.popup.data.hideClose||(i.popup.hide(void 0,void 0,"escape-button"),n())}i.rs=t,i.state=o,e.register("27",r),i.$on("$destroy",function(){e.unRegister("27",r)})}}}]),app.directive("yolPopups",["Popups","$rootScope",function(e,t){return{restrict:"E",templateUrl:"/scripts/directives/popups/dirc_popups.html",link:function(n){n.popups=e,n.rs=t}}}]),app.directive("portingUser",["CommonData",function(e){return{templateUrl:"/scripts/directives/porting-user/dirc_porting-user.html",scope:{portingUser:"=data",editable:"="},link:function(t){t.CommonData=e}}}]),app.directive("posAccountInfo",["AgentAccount","State","Channels",function(e,t,n){return{templateUrl:"/scripts/directives/pos-account-info/dirc_pos-account-info.html",link:function(o){o.agent=e,o.state=t,n.getChannels().then(function(e){return o.channels=e}),o.getChannelName=function(e){var t,n;return(null===(t=o.channels)||void 0===t?void 0:null===(n=t.find(function(t){return t.code===e}))||void 0===n?void 0:n.name)||e}}}}]),app.directive("posCustomerInfo",["CustomerAccount","AgentAccount",function(e,t){return{templateUrl:"/scripts/directives/pos-customer-info/dirc_pos-customer-info.html",link:function(n){n.agent=t,n.account=e}}}]),app.directive("posRateplanChangeCtas",["State",function(e){return{templateUrl:"/scripts/directives/pos-rateplan-change-ctas/dirc_pos-rateplan-change-ctas.html",scope:{subscription:"=sub"},link:function(t){t.state=e,console.log(t.subscription)}}}]),app.directive("postpaidFiberSubscription",function(){return{templateUrl:"/scripts/directives/postpaid-fiber-subscription/dirc_postpaid-fiber-subscription.html",scope:{subscription:"=data"},link:function(e){e.subscription.setActive()}}}),app.directive("posSimSwap",["AgentAccount","$location","CustomerAccount","Notifications","ThreatMetrix",function(e,t,n,o,i){return{transclude:!0,templateUrl:"/scripts/directives/pos-sim-swap/dirc_pos-sim-swap.html",link:function(r){r.tabs=[{key:"physicalSimSwap"},{key:"esimSwapTab"}],r.tabOptions={},r.account=n,r.data={},r.isTest=window.isTest,r.data.subs=n.getFilteredSubList(!0,!0).filter(function(e){return["pendingActivation","active"].includes(e.status)}),r.enterCodeMode=!1,1===r.data.subs.length&&(r.data.subscription=r.data.subs[0]),r.startSimSwap=function(){r.swapping||(r.swapping=!0,e.startSimSwap(r.data.subscription.id,r.data.newIccid).then(function(e){r.swapping=!1,e&&(t.path("/pos/existing-customer"),o.add("success","good"))}))},r.validateEsimSwap=function(){return r.loading=!0,r.data.subscription.validateEsimSwap().then(function(e){r.loading=!1,e&&(r.data.token=e,r.data.code="",r.enterCodeMode=!0)})},r.doEsimSwap=function(){r.loading=!0;var e=i.profile();r.data.subscription.startEsimSwap(e,r.data.token,r.data.code).then(function(e){r.loading=!1,e&&n.doRefresh().then(function(){o.add("esimSwapSuccess","good"),t.path("/pos/existing-customer/manage-subscriptions").search({id:r.data.subscription.id})})}).catch(function(e){console.error(e),r.loading=!1})}}}}]),app.directive("postpaidSubscription",["CustomerAccount","$location","State","FeatureFlags",function(e,t,n,o){return{templateUrl:"/scripts/directives/postpaid-subscription/dirc_postpaid-subscription.html",scope:{subscription:"=data"},link:function(i){var r;i.state=n,i.data={activeOverviewTab:0},i.tabs=[{key:"notRoamingSelection",index:0},{key:"roamingSelection",index:1}],i.tabOptions={activeTab:"notRoamingSelection",onClick:{notRoamingSelection:function(){return i.setPos(0)},roamingSelection:function(){return i.setPos(1)}}},i.init=function(){var e;null!==(e=i.subscription)&&void 0!==e&&e.simcardInfo.matchingId&&(i.loading=!0,i.subscription.getEsimInfo().then(function(e){i.loading=!1,null!==e&&void 0!==e&&e.active||(i.forceEsimAction=!0)}))},null!==(r=i.subscription)&&void 0!==r&&r.settings||n.checkCustomerLoggedIn().then(function(e){e&&(i.subscription.setActive(),i.subscription.getRecommendations())}),i.init(),i.startOnRoaming="roaming"===t.search().tab,i.nationalCircles={nationalData:{items:[],total:0,remaining:0,type:"BYTES",optionCats:["SURF"]},nationalMin:{items:[],total:0,remaining:0,type:"MIN"},internationalMin:{items:[],total:0,remaining:0,type:"MIN"}},i.nationalCircles.internationalMin.optionCats=["COUNTRIES","UNLIMITED"],i.roamingCircles={roamingData:{items:[],total:0,remaining:0,type:"BYTES",optionCats:["ROAMING"]},roamingMin:{items:[],total:0,remaining:0,type:"MIN",optionCats:["ROAMING"]}};var a=i.subscription.rateplan.firstProduct(),s=i.subscription.rateplan.id,c=[{rateplanId:"202201260905110446",toHardcodeGroup:{roamingMin:!0,roamingData:!0,roamingSms:!0}},{rateplanId:"202109281021286721",toHardcodeGroup:{roamingMin:!1,roamingData:!0,roamingSms:!1}},{rateplanId:"201907191405128191",toHardcodeGroup:{roamingMin:!1,roamingData:!1,roamingSms:!1}},{rateplanId:"202106091305193898",toHardcodeGroup:{roamingMin:!1,roamingData:!1,roamingSms:!0}},{rateplanId:"201701201053204424",toHardcodeGroup:{roamingMin:!0,roamingData:!1,roamingSms:!0}},{rateplanId:"201808201434341960",toHardcodeGroup:{roamingMin:!0,roamingData:!0,roamingSms:!0}},{rateplanId:"201907261313275478",toHardcodeGroup:{roamingMin:!0,roamingData:!0,roamingSms:!0}},{rateplanId:"201907261312525115",toHardcodeGroup:{roamingMin:!1,roamingData:!1,roamingSms:!0}}];!!o.get("telco-act-postpaid")&&(i.subscription.isHardcoded=c.find(function(e){return e.rateplanId===s})||!1),a&&"internet"!==a.tags[0]||(delete i.nationalCircles.nationalMin,delete i.nationalCircles.internationalMin,delete i.roamingCircles.roamingMin),i.reverseSetPos=function(){return i},i.showDataOptionsbutton=!e.isLightCustomer&&!i.subscription.isLight&&objToArray(i.subscription.rateplan.options).find(function(e){return"SURF"===e.category}),i.showRoamingOptionsbutton=!e.isLightCustomer&&!i.subscription.isLight&&objToArray(i.subscription.rateplan.options).find(function(e){return"ROAMING"===e.category}),i.setMobileSidewaysScrollPos=function(e){if(0!==e||t.search().tab){var n=t.search().id;t.search({id:n,tab:e?"roaming":"national"}).replace(),i.tabOptions.activeTab=i.tabs.find(function(t){return t.index==e}).key}}}}}]),app.directive("prepaidSubscription",["$location","Notifications","SavingsOptions","Topup","CommonData","State","$interval","Analytics","FeatureFlags",function(e,t,n,o,i,r,a,s,c){return{transclude:!0,templateUrl:"/scripts/directives/prepaid-subscription/dirc_prepaid-subscription.html",scope:{subscription:"=data"},link:function(a){var d;null!==(d=a.subscription)&&void 0!==d&&d.settings||r.checkCustomerLoggedIn().then(function(e){e&&(a.subscription.setActive(),a.subscription.getRecommendations())}),a.init=function(){var e;null!==(e=a.subscription)&&void 0!==e&&e.simcardInfo.matchingId&&(a.loading=!0,a.subscription.getEsimInfo().then(function(e){a.loading=!1,null!==e&&void 0!==e&&e.active||(a.forceEsimAction=!0)}))},a.cats={},a.SavingsOptions=n,a.Topup=o,a.getCents=function(){return paddToEnd((arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toString().split(".")[1]||"",2).substring(0,2)},e.search().topupError&&(t.add("topupError","bad"),e.search({id:a.subscription.id})),a.getIcon=function(e){return i.optionCategoryIcons[e.toLowerCase()]},a.openOption=function(e){c.get("Ayma-google-tag-manager-changes-2")&&s.conversionPathTracking(e.name,"saving options","activate option","overview - prepaid mobile",void 0,!1),a.selectedOption=e},a.closeOption=function(){return a.selectedOption=void 0},a.init()}}}]),app.directive("productComparisonItem",["AgentAccount","CustomerAccount","$rootScope","State","Products","$location",function(e,t,n,o,i,r){return{transclude:!0,templateUrl:"/scripts/directives/product-comparison-item/dirc_product-comparison-item.html",scope:{productdata:"=",linkExtension:"=?",customLink:"=?",hideDetailsButton:"=?",checkoutButtonText:"=?",isExtension:"=?",alwaysShowCheckout:"=?",subdued:"=?",currentProduct:"=?",customClick:"=?",subscription:"=subscriptionData",showUsp:"=?",simpleMode:"=?"},link:function(a){a.product=a.productdata.product,a.rs=n,a.agent=e,a.state=o,a.hasTVSubscription=t.hasTVSubscription(),a.hasHFCSubscription=t.accountOwner.subscription.isHFC,a.init=function(){void 0===a.productdata.lock&&(a.productdata.lock=null),a.config=a.product.findConfigsFromOptions(a.productdata.lock,a.productdata.device,a.productdata.promotion,a.subscription,!0)[0],a.promotion=a.productdata.promotion,o.isTelesales||a.calcBestPromo(),a.extension="",a.checkoutButtonText=a.checkoutButtonText||"checkoutButton",a.linkExtension.subscription&&(a.subscription=t.subscriptions[a.linkExtension.subscription]),a.promotion&&(a.extension+="promotions="+a.promotion.code+"&");for(var e in a.linkExtension)a.extension+=e,a.extension+="=",a.extension+=a.linkExtension[e];a.extension&&(a.extension="?"+a.extension)},a.calcBestPromo=function(){var e;a.isExtension&&a.config||(a.config=a.productdata.product.bestConfig);var t=a.linkExtension&&a.linkExtension.devices?i.data.devices[a.linkExtension.devices]:null,n=a.isExtension?null===(e=a.config)||void 0===e?void 0:e.lockinLength:null;if(a.linkExtension.promotion)a.promotion=Promotions.findPromotionByCode(a.linkExtension.promotion);else{var o=a.productdata.product.getValidPromotions(a.subscription,!0),s=r.search().p;if(s){var c=a.productdata.product.getValidPromotions(a.subscription,!0,void 0,!0),d=c.find(function(e){return e.code===s});d&&(-1!==o.indexOf(d)&&o.splice(o.indexOf(d),1),o.unshift(d))}var u,l=_createForOfIteratorHelper(o);try{for(l.s();!(u=l.n()).done;){var p=u.value;if(a.productdata.product.findConfigsFromOptions(n,t,p,a.subscription,!0).length){a.promotion=p;break}}}catch(e){l.e(e)}finally{l.f()}}var g=a.productdata.product.findConfigsFromOptions(n,t,a.promotion,a.subscription,!0);g.length||(g=a.productdata.product.findConfigsFromOptions(n,t,null,a.subscription,!0),g.length&&(a.promotion=null)),g.length&&(a.config=g[0])},a.getLink=function(){var e=a.productdata.getCTAType(),t="";t+=o.agentLoggedIn?"/pos":"checkout"!=e&&!a.isExtension||a.isPrepaidRateplanChange?"":"/eshop";var n="new-postpaid/checkout";return"prepaid"==a.productdata.type&&(n="new-prepaid/checkout"),a.customLink&&(n=a.customLink),"checkout"==e||a.alwaysShowCheckout?t+="/"+n+"/"+a.productdata.url:t+="/product/"+a.productdata.url+"?a",t+=a.extension},a.getPriceDifference=function(){return a.currentProduct&&a.subscription&&a.config?(a.newPrice=a.config.recurringCost-(a.promotion?a.promotion.recurringDiscount:0),a.currentPrice=a.currentProduct.recurringCost-a.subscription.getCurrentDiscount(),a.priceDifference=parseFloat((a.newPrice-a.currentPrice).toFixed(2)),a.priceDifference):0},a.init()}}}]),app.directive("productComparison",["Products","CommonData",function(e,t){return{templateUrl:"/scripts/directives/product-comparison/dirc_product-comparison.html",scope:{products:"=?prodData",linkExtension:"=?",invertChannelFilter:"=?",ignoreChannelFilter:"=?",outputData:"=?",customDisplayOrder:"=?",simpleMode:"=?",customLink:"=?",extension:"=?",alwaysShowCheckout:"=?",hideDetailsButton:"=?",type:"=?",checkoutButtonText:"=?",lebaraPrepaidHack:"=?",invertMultiProducts:"=?",ignoreMultiProducts:"=?",columnCount:"=?",currentProduct:"=?",customClick:"=?",manualOrder:"=?",subscriptionData:"=?",featuredProduct:"=?"},link:function(e,n,o){e.columnCount||(e.columnCount=4),e.type=e.type||"all",e.productSortBy=window.productSortBy||e.customDisplayOrder||"priority",e.productType=o.productType,e.ignoreChannelFilter||(e.channel=t.channel),e.lebaraPrepaidHack&&(e.channel="yb")}}}]);var productItemLink;app.run(["AgentAccount","Products","Promotions","CustomerAccount","$rootScope","State","Language","$translate","$location","FeatureFlags","Analytics",function(e,t,n,o,i,r,a,s,c,d,u){productItemLink=function(l){l.lang=a.data,l.rs=i,l.state=r,l.extraPromo="",l.url="",l.extraPromoPlaceHolder=s.instant("extraPromo_input"),l.extraPromoAvailable=function(){return["yallo_home_max_fiber","yallo_home_max_cable","yallo_home_cable_s","yallo_home_cable_s_plus_tv","yallo_home_cable_m_plus_tv","yallo_home_cable_m","yallo_home_max_cable_plus_tv","yallo_home_max_fiber_plus_tv","yallo_home_5g_plus_tv","yallo_home_5g","yallo_home_supermax_cable_plus_tv","yallo_home_supermax_cable"].includes(l.url)&&r.agentLoggedIn&&i.isPos},l.setExtraPromo=function(e){return l.extraPromo=e},l.handleExtraPromo=function(){return l.showExtraPromoInput=!l.showExtraPromoInput},l.init=function(){if(l.url=l.productdata.url,l.subdued||(l.subdued="checkout"!=l.productdata.getCTAType()&&!l.alwaysShowCheckout),l.linkExtension||(l.linkExtension={}),l.extension="",l.makeNiceABTest=window.makeNiceABTest,l.agent=e,l.checkoutButtonText=l.checkoutButtonText||"checkoutButton",l.linkExtension.subscription&&(l.subscription=o.subscriptions[l.linkExtension.subscription]),l.testProductBoxLinks=window.testProductBoxLinks,l.notAvailablePage=c.url().includes("not-available"),l.showRateplanfeatureWhenNotavailable=d.get("rateplanPlus"),l.notAvailablePage&&l.showRateplanfeatureWhenNotavailable)if("yallo_home_max_cable"===l.productdata.getText("title").replace("product_","").replace("_title",""))l.currentSuggestedPromotion=Object.keys(l.productdata.promotions).map(function(e){return"yallohomemaxcable3512024with"===l.productdata.promotions[e].code?l.productdata.promotions[e]:""}).filter(function(e){return""!==e})[0];else if("yallo_home_max_fiber"===l.productdata.getText("title").replace("product_","").replace("_title",""))l.currentSuggestedPromotion=Object.keys(l.productdata.promotions).map(function(e){return"yallohomemaxfiber3512024withafo"===l.productdata.promotions[e].code?l.productdata.promotions[e]:""}).filter(function(e){return""!==e})[0];else if("yallo_home_max_fiber_plus_tv"===l.productdata.getText("title").replace("product_","").replace("_title",""))l.currentSuggestedPromotion=Object.keys(l.productdata.promotions).map(function(e){return"yallohomemaxfiberplus5012024with"===l.productdata.promotions[e].code?l.productdata.promotions[e]:""}).filter(function(e){return""!==e})[0];else if("yallo_home_max_cable_plus_tv"===l.productdata.getText("title").replace("product_","").replace("_title",""))l.currentSuggestedPromotion=Object.keys(l.productdata.promotions).map(function(e){return"yallohomemaxcableplus5012024with"===l.productdata.promotions[e].code?l.productdata.promotions[e]:""}).filter(function(e){return""!==e})[0];else if("yallo_home_5g_plus_tv"===l.productdata.getText("title").replace("product_","").replace("_title",""))l.currentSuggestedPromotion=Object.keys(l.productdata.promotions).map(function(e){return"yallohome5gplus4512024with"===l.productdata.promotions[e].code?l.productdata.promotions[e]:""}).filter(function(e){return""!==e})[0];else if("yallo_home_5g"===l.productdata.getText("title").replace("product_","").replace("_title",""))l.currentSuggestedPromotion=Object.keys(l.productdata.promotions).map(function(e){return"yallohome5g3012024with"===l.productdata.promotions[e].code?l.productdata.promotions[e]:""}).filter(function(e){return""!==e})[0];else{if("yallo_home_4g"!==l.productdata.getText("title").replace("product_","").replace("_title",""))return;l.currentSuggestedPromotion=Object.keys(l.productdata.promotions).map(function(e){return"yallogoxl151200"===l.productdata.promotions[e].code?l.productdata.promotions[e]:""}).filter(function(e){return""!==e})[0]}l.config=l.productdata.bestConfig;var i=l.linkExtension&&l.linkExtension.devices?t.data.devices[l.linkExtension.devices]:null;if(l.linkExtension.promotion)l.promotion=n.findPromotionByCode(l.linkExtension.promotion);else{var r,a=l.productdata.getValidPromotions(l.subscription,!0),s=_createForOfIteratorHelper(a);try{for(s.s();!(r=s.n()).done;){var u=r.value;if(l.productdata.findConfigsFromOptions(null,i,u,l.subscription,!0).length){l.promotion=u;break}}}catch(e){s.e(e)}finally{s.f()}}if(l.productdata.presetPromotion)l.promotion=l.productdata.presetPromotion,l.extension+="promotions="+l.promotion.code+"&";else{var p=l.productdata.findConfigsFromOptions(null,i,l.promotion,l.subscription,!0);p.length||(p=l.productdata.findConfigsFromOptions(null,i,null,l.subscription,!0),p.length&&(l.promotion=null)),p.length&&(l.config=p[0],!l.linkExtension.promotion&&l.promotion&&(l.extension+="promotions="+l.promotion.code+"&"))}for(var g in l.linkExtension)l.extension+=g,l.extension+="=",l.extension+=l.linkExtension[g];l.extension&&(l.extension="?"+l.extension),l.productdata.productItemSelectedConfig=l.config,l.productdata.productItemSelectedPromotion=l.promotion},l.trackOrderNowAction=function(){var e="mobile";(l.productdata.isFiber||l.productdata.isHomeProduct||l.productdata.isHFC)&&(e="home"),u.conversionPathTracking(l.config.productName,void 0,void 0,e,!0,!1)},l.getLink=function(){var e=l.productdata.getCTAType(),t="";t+=r.agentLoggedIn?"/pos":"checkout"!=e&&!l.isExtension||l.isPrepaidRateplanChange?"":"/eshop";var n="new-postpaid/checkout";return"prepaid"==l.productdata.type&&(n="new-prepaid/checkout"),l.customLink&&(n=l.customLink),"checkout"==e||l.alwaysShowCheckout?t+="/"+n+"/"+l.productdata.url:t+="/product/"+l.productdata.url+"?a",l.notAvailablePage?t+="?promotions="+l.currentSuggestedPromotion.code:t+=l.extraPromoAvailable()&&""!==l.extraPromo?"?promotions="+l.extraPromo:l.extension,-1===t.indexOf("?")?t+="?from="+(l.from||"product-item"):"&"===t.slice(-1)?t+="from="+(l.from||"product-item"):t+="&from="+(l.from||"product-item"),t},l.init(),l.$watch("linkExtension",l.init);var p=i.$on("appliedNewPromo",l.init),g=i.$on("finishedGettingPromos",l.init);l.$on("$destroy",function(){p(),g()})}}]),app.directive("productItem",function(){return{transclude:!0,templateUrl:"/scripts/directives/product-item/dirc_product-item.html",scope:{productdata:"=",linkExtension:"=?",customLink:"=?",hideDetailsButton:"=?",checkoutButtonText:"=?",isExtension:"=?",alwaysShowCheckout:"=?",subdued:"=?",isPrepaidRateplanChange:"=?",from:"=?"},link:productItemLink}});var productItemHorizontalLink;app.run(["Products","Promotions","CustomerAccount","$rootScope","State",function(e,t,n,o,i){productItemHorizontalLink=function(e){e.rs=o,e.state=i,e.init=function(){e.subdued||(e.subdued="checkout"!=e.productdata.getCTAType()),
e.extension="",e.config=e.productdata.bestConfig;var t,n=e.productdata.getValidPromotions(e.existingSubscription,!0),o=_createForOfIteratorHelper(n);try{for(o.s();!(t=o.n()).done;){var i=t.value;if(e.productdata.findConfigsFromOptions(null,e.device,i,e.existingSubscription,!0).length){e.promotion=i;break}}}catch(e){o.e(e)}finally{o.f()}var r=e.productdata.findConfigsFromOptions(null,e.device,e.promotion,e.existingSubscription,!0);r.length||(r=e.productdata.findConfigsFromOptions(null,e.device,null,e.existingSubscription,!0),r.length&&(e.promotion=null)),r.length&&(e.config=r[0],e.promotion&&(e.extension+="promotions="+e.promotion.code+"&")),e.extension&&(e.extension="?"+e.extension),e.productdata.productItemSelectedConfig=e.config,e.productdata.productItemSelectedPromotion=e.promotion,e.existingSubscription&&e.existingSubscription.returnWhenRecommendationsLoaded().then(function(){e.existingPromotion=e.existingSubscription.getCurrentDiscountPromo()})},e.getLink=function(){var t=e.productdata.getCTAType(),n="";n+=i.agentLoggedIn?"/pos":"checkout"!=t||e.hideCta?"":"/eshop";var o="new-postpaid/checkout";return"prepaid"==e.productdata.type&&(o="new-prepaid/checkout"),"checkout"!=t||e.hideCta?n+="/product/"+e.productdata.url:n+="/"+o+"/"+e.productdata.url,n+=e.extension},e.init();var t=o.$on("appliedNewPromo",e.init),n=o.$on("finishedGettingPromos",e.init);e.$on("$destroy",function(){t(),n()})}}]),app.directive("productItemHorizontal",function(){return{templateUrl:"/scripts/directives/product-item-horizontal/dirc_product-item-horizontal.html",scope:{productdata:"=",hideCta:"=?",existingSubscription:"=?",device:"=?"},link:productItemHorizontalLink}}),app.directive("products",["Products","CommonData","Cms",function(e,t,n){return{templateUrl:"/scripts/directives/products/dirc_products.html",scope:{products:"=?prodData",cancenter:"=?",linkExtension:"=?",invertChannelFilter:"=?",ignoreChannelFilter:"=?",outputData:"=?",customDisplayOrder:"=?",customLink:"=?",extension:"=?",alwaysShowCheckout:"=?",hideDetailsButton:"=?",type:"=?",checkoutButtonText:"=?",lebaraPrepaidHack:"=?",invertMultiProducts:"=?",ignoreMultiProducts:"=?",limitTo:"=?",manualOrder:"=?",cmsProducts:"=?",ignoreHiddenFromSheets:"=?",prepaidRateplanChange:"=?",channel:"=?",hideHomeProducts:"=?",disabledProducts:"=?",from:"=?"},link:function(n,o,i){n.type=n.type||"all",n.productSortBy=window.productSortBy||n.customDisplayOrder||"priority",n.products||(n.products=e.data.products),n.products=_objectSpread({},n.products);for(var r in n.products){var a,s;null!==(a=n.products[r])&&void 0!==a&&null!==(s=a.channels)&&void 0!==s&&s.length||delete n.products[r]}n.addCmsProducts=function(t){n.manualOrder=!0,n.products=[],t.forEach(function(t){var o=t.product.slug.split("-").join("_"),i=e.findProductByName(o);i&&n.products.push(i);var r=i.promotions[t.promotion.id];t.presetPromo&&r&&r.availableChannels.includes("ol")&&(e.data.products[i.url].presetPromotion=r)}),n.products=n.products.filter(function(e,t,n){return t===n.findIndex(function(t){return t.url===e.url})})},n.cmsProducts&&(n.cmsProducts=n.cmsProducts.filter(function(e){var t;return null===(t=e.product)||void 0===t?void 0:t.id})),n.cmsProducts&&n.cmsProducts.length&&n.addCmsProducts(n.cmsProducts),n.productType=i.productType,n.ignoreChannelFilter||(n.channel=t.channel),n.lebaraPrepaidHack&&(n.channel="yb"),n.hideProduct=function(e){for(var n in e.channels)if(t.ignoredChannels.indexOf(e.channels[n])<0)return!1;return e.channels.indexOf(t.channel)<=-1}}}}]),app.directive("qrCodeDisplay",function(){return{templateUrl:"/scripts/directives/qr-code-display/dirc_qr-code-display.html",scope:{externalCaptureUrl:"=",image:"=",exampleImageUrl:"="}}}),app.directive("productsAuto",["Cms","FeatureFlags",function(e,t){return{templateUrl:"/scripts/directives/products-auto/dirc_products-auto.html",scope:{linkExtension:"=?",productType:"=?",customLink:"=?",mode:"=?"},link:function(t){t.loading=!0,t.prismicRedirection=function(e){window.production&&(t.prismicInputRedirection=e),"t01"===window.testEnvName&&(t.prismicInputRedirection=e.replace("yallo.ch","preprod.dev.yallo.ch")),"t02"===window.testEnvName&&(t.prismicInputRedirection=e.replace("yallo.ch","test.dev.yallo.ch")),"t03"===window.testEnvName&&(t.prismicInputRedirection=e.replace("yallo.ch","integration.dev.yallo.ch"))},"fiber"===t.mode?e.getByTag("default_product_home_preset").then(function(e){var n,o;t.loading=!1,t.products=e&&e.data&&e.data.products.map(function(e){return _objectSpread(_objectSpread({},e),{},{presetPromo:!0})}),t.CustomizableButton=e&&e.data&&e.data.body&&e.data.body[0]&&e.data.body[0].items&&e.data.body[0].items[0],null!==(n=t.CustomizableButton)&&void 0!==n&&null!==(o=n.link)&&void 0!==o&&o.url&&t.prismicRedirection(t.CustomizableButton.link.url)}):e.getByTag("default_product_preset").then(function(e){var n,o;t.loading=!1,t.products=e&&e.data&&e.data.products.map(function(e){return _objectSpread(_objectSpread({},e),{},{presetPromo:!0})}),t.CustomizableButton=e&&e.data&&e.data.body&&e.data.body[0]&&e.data.body[0].items&&e.data.body[0].items[0],null!==(n=t.CustomizableButton)&&void 0!==n&&null!==(o=n.link)&&void 0!==o&&o.url&&t.prismicRedirection(t.CustomizableButton.link.url)})}}}]),app.directive("qrScanner",["Camera","$timeout",function(e,t){return{restrict:"E",templateUrl:"/scripts/directives/qr-scanner/dirc_qr-scanner.html",scope:{onQrCode:"&",onCancel:"&",onError:"&"},link:function(n){function o(){var e=document.querySelector(".bg div");if(e&&!a){var t=e.getBoundingClientRect(),n=document.querySelector("#video"),o=n.getBoundingClientRect(),i=(-o.left+t.left-20)*(n.videoWidth/n.clientWidth),d=(-o.top+t.top-20)*(n.videoHeight/n.clientHeight),u=(t.width+40)*(n.videoWidth/n.clientWidth),l=(t.height+40)*(n.videoHeight/n.clientHeight);cropImage(n,Math.round(i),Math.round(d),Math.round(u),Math.round(l)).then(function(e){s.width=e.width,s.height=e.height,c.drawImage(e,0,0,s.width,s.height),c&&s.width&&r.postMessage(c.getImageData(0,0,s.width,s.height))})}}function i(){n.loading=!0,e.startCamera("environment",!0).then(function(e){return d.srcObject=n.stream=e}).catch(function(e){n.onError()(e)})}n.Camera=e;var r,a=!1,s=document.getElementById("canvas"),c=s.getContext("2d"),d=document.getElementById("video");n.loading=!0,n.$watch(function(){return window.innerHeight>window.innerWidth?"vertical":"horizontal"},function(e){return n.orientation=e}),d.onloadedmetadata=function(){n.loading=!1,t(),t(function(){d.removeAttribute("controls"),o()},100)},n.cancel=function(){n.onCancel()&&n.onCancel()()},n.$on("$destroy",function(){r&&r.terminate(),window.document.body.classList.remove("takingPicture"),n.stream&&e.stopCamera(n.stream),d.srcObject=null,a=!0}),function(){i(),r=new Worker("/assets/other/qrworker.js"),r.onmessage=function(e){var t=e.data;if(t&&n.onQrCode()&&!a)return n.onQrCode()(t);o()}}()}}}]),app.directive("recurringTopups",["Topup","Popup",function(e,t){return{templateUrl:"/scripts/directives/recurring-topups/dirc_recurring-topups.html",scope:{subscription:"=data",creditCardId:"=?"},link:function(n){e.getSavedCreditCards(),n.Topup=e,n.removeRecurringPopup=new t("removeRecurringPopup"+n.$id,"remove-recurring-topup.html",{title:"removeRecurringPopupTitle"},{confirm:function(){n.removeRecurringPopup.data.removing||(n.removeRecurringPopup.data.removing=!0,e.removeScheduledTopup(n.removeRecurringPopup.data.id).then(function(e){n.removeRecurringPopup.data.removing=!1,e&&n.removeRecurringPopup.hide()}))}}),n.removeScheduledTopup=function(e,t){n.removeRecurringPopup.data.id=e,n.removeRecurringPopup.data.type=t,n.removeRecurringPopup.show()},n.$on("$destroy",function(){return n.removeRecurringPopup.delete()})}}}]),app.directive("roamingInfo",["Countries","$rootScope","State",function(e,t,n){return{scope:{rateplan:"=?",country:"=?"},templateUrl:"/scripts/directives/roaming-info/dirc_roaming-info.html",link:function(o){n.returnWhenRateplanDataLoaded().then(function(){o.rateplan.convertRates(),o.countries=e.countriesObj,o.lang=t.lang}),o.hasCountry=function(e,t){return!t||""==t||e.filter(function(e){return e.id===t}).length>0}}}}]),app.directive("routeLoadingIndicator",function(){return{restrict:"E",templateUrl:"/scripts/directives/route-loading-indicator/dirc_route-loading-indicator.html"}}),app.directive("scanner",["$timeout","$rootScope","Camera",function(e,t,n){return{template:'<div class="barcode-scanner" ng-class="{horizontal : rs.orientation === \'horizontal\'}"><div id="preview-element"></div><video webkit-playsinline autoplay playsinline muted controls crossorigin="anonymous"></video></div><div class="scan-info" translate="{{::translateKey}}"></div>',scope:{data:"=scanData",mode:"=",defaultError:"=?"},link:function(o,i){function r(){var e=document.querySelector(".barcode-box");if(!u||!e)return Promise.reject("no ".concat(u?"target":"video"," present"));var t=e.getBoundingClientRect(),n=u.getBoundingClientRect(),o=(-n.left+t.left)*(u.videoWidth/u.clientWidth),i=(-n.top+t.top)*(u.videoHeight/u.clientHeight),r=t.width*(u.videoWidth/u.clientWidth),a=t.height*(u.videoHeight/u.clientHeight);return cropImage(u,Math.round(o-50),Math.round(i-20),Math.round(r+100),Math.round(a+40))}function a(t){o.data.error=o.defaultError||"technicalError",o.data.show=!1,throwSafe(t,"26-id"),e()}function s(){n.startCamera("environment").then(function(t){u.srcObject=o.stream=t,o.data.loading=!1,e(),d&&clearInterval(d),d=setInterval(function(){l||(l=!0,r().then(function(t){var i=document.querySelector(".barcode-box");i&&Quagga.decodeSingle({decoder:{readers:["code_128_reader"]},src:imageToB64(t)},function(t){l=!1,o.data.detected=!!t,t?i.classList.add("detected"):i.classList.remove("detected"),t&&t.codeResult&&c(t.codeResult.code)&&(n.stopCamera(o.stream),o.data.result=t.codeResult.code,o.showVideo=!1,e())},function(e){l=!1,throwSafe(e,"27-id")})}).catch(function(e){throwSafe(e,"28-id"),l=!1}))},100)}).catch(function(e){throwSafe(e,"36-id"),l=!1})}function c(e){return"iccid"===o.mode?iccidCheckSum(e):msisdnCheck(e)}o.translateKey="scan".concat(o.mode.capitalizeFirstLetter(),"Title"),o.data.loading=!0,o.rs=t;var d,u=i[0].querySelector("video"),l=!1;u.onloadedmetadata=function(){o.data.loading=!1,setTimeout(function(){return u.removeAttribute("controls")})},e(),loadScript("/assets/other/quagga.min.js").then(s).catch(a),o.$on("$destroy",function(e){window.document.body.classList.remove("takingPicture"),d&&clearInterval(d),o.stream&&n.stopCamera(o.stream)})}}}]),app.directive("scroll",["smoothScroll",function(e){return{templateUrl:"/scripts/directives/scroll/dirc_scroll.html",scope:{to:"@?"},link:function(t){t.id="scrolly",t.scroll=function(){var n,o;if(t.to)o=t.to,n=siteHeaderHeight();else{var i,r;o=t.id;var a=null!==(i=null===(r=document.getElementById(t.id))||void 0===r?void 0:r.clientHeight)&&void 0!==i?i:0;n=siteHeaderHeight()-a}var s=document.getElementById(o);s&&e(s,{offset:n})}}}}]),app.directive("shareButton",function(){return{scope:{data:"=?"},link:function(e,t){if(!navigator.share){var n;null===(n=t[0].closest("a"))||void 0===n||n.setAttribute("href","mailto:?Subject=".concat(encodeURIComponent(e.data.title),"&Body=").concat(encodeURIComponent(e.data.text),"%20-%20").concat(encodeURIComponent(e.data.url)))}t.bind("click",function(){navigator.share&&navigator.share({title:e.data.title,text:e.data.text,url:e.data.url}).catch(function(t){e.emailShare(),throwSafe(t,"43-id")})})}}}),app.directive("signPad",["$timeout","AgentAccount","$rootScope","State",function(e,t,n,o){return{templateUrl:"/scripts/directives/sign-pad/dirc_sign-pad.html",scope:{onCancel:"&",onConfirm:"&",widthCorrection:"=?",onClear:"&",inline:"=?",isSubmit:"=?",confirmText:"=?",hideClear:"=?",hideConfirmButton:"=?",initialImage:"=?",preventDrawing:"=?",hasData:"&"},link:function(i,r){function a(e){return e-m.getBoundingClientRect().left}function s(e){return e-m.getBoundingClientRect().top}function c(){var e,t,n=r[0].parentElement;i.inline?e=n.offsetWidth-(i.widthCorrection||0):(e=window.innerWidth)>700&&(e=700),(t=Math.floor(e/1.5))>window.innerHeight&&(t=window.innerHeight),(m.width!=e||m.height!=t)&&(C.length=0,m.width=e,m.height=t,v.style.width=e+"px",v.style.height=t+"px"),w=!1,I&&(i.drawCanvas(I),C.push([0,0]))}function d(t){i.preventDrawing||(t.preventDefault(),t.stopPropagation(),w=!0,C.push([a(t.clientX),s(t.clientY)]),T(),e())}function u(t){t.preventDefault(),t.stopPropagation(),w=!1,y=0,e()}function l(e){u(e)}function p(e){w&&!i.preventDrawing&&(e.preventDefault(),e.stopPropagation(),++y%D==0&&(C[C.length-1].push(a(e.clientX)),C[C.length-1].push(s(e.clientY)),T()))}function g(e){if(!i.preventDrawing){e.preventDefault(),e.stopPropagation();var t,n=_createForOfIteratorHelper(e.touches);try{for(n.s();!(t=n.n()).done;){var o=t.value;C.push([a(o.clientX),s(o.clientY)]),S["touch"+o.identifier]=C.length-1}}catch(e){n.e(e)}finally{n.f()}T()}}function f(t){t.preventDefault(),t.stopPropagation();var n,o=_createForOfIteratorHelper(t.touches);try{for(o.s();!(n=o.n()).done;){var i=n.value;delete S["touch"+i.identifier]}}catch(e){o.e(e)}finally{o.f()}e()}function h(e){if(!i.preventDrawing){e.preventDefault(),e.stopPropagation();var t,n=_createForOfIteratorHelper(e.touches);try{for(n.s();!(t=n.n()).done;){var o=t.value;C[S["touch"+o.identifier]]&&(C[S["touch"+o.identifier]].push(a(o.clientX)),C[S["touch"+o.identifier]].push(s(o.clientY)))}}catch(e){n.e(e)}finally{n.f()}T()}}i.state=o,i.agent=t,i.mobile=isAndroid||isIOS;var m=r[0].querySelector("#sign-pad-canvas"),v=r[0].querySelector("#sign-pad-container"),b=m.getContext("2d"),w=!1,C=[],y=0,D=window.innerWidth<1e3?3:1,S={},I="";i.$watch("initialImage",function(e,t){t&&!e&&(I="")});var k=n.$on("validateSignpad",function(){if(e(),i.showConfirm())i.confirm();else{var t=i.onConfirm();if(!t)return;t()}}),P=debounce(function(){I=m.toDataURL("image/png");var e=i.showConfirm();e=e&&e.length,i.hasData()&&i.hasData()(e)},500);i.drawCanvas=function(e){var t=new Image;t.onload=function(){b.drawImage(t,0,0),C.push([0,0])},t.src=e},i.initialImage&&"string"==typeof i.initialImage&&(I=i.initialImage,P(),i.drawCanvas(i.initialImage),C.push([0,0])),i.showConfirm=function(){return w||C.find(function(e){return e.length>=2})},i.confirm=function(e){var t=i.onConfirm();if(t)return t(changeAspectRatio(trimCanvas(m),83,29).toDataURL("image/png"),e)},i.poaListener=n.$on("checkoutNeedPoaSigned",function(){i.showConfirm()?(n.$emit("checkoutPoaSigning"),i.poaListener(),i.confirm(!0)):n.$emit("checkoutPoaSigningError")}),i.clear=function(e){b.clearRect(0,0,m.width,m.height),e||(w=!1,C.length=0),I="",P(),i.onClear&&i.onClear()&&i.onClear()()};var T=function(){b.beginPath();for(var e in C)C[e].length>3?C[e]=C[e].splice(C[e].length-4):drawPoint(b,C[e]),drawCurve(b,C[e],.3);b.lineWidth=2,b.stroke(),P()};m.addEventListener("mousedown",d),m.addEventListener("mouseup",u),m.addEventListener("mousemove",p),m.addEventListener("mouseout",l),m.addEventListener("touchstart",g),m.addEventListener("touchend",f),m.addEventListener("touchmove",h),window.addEventListener("resize",c),window.addEventListener("scroll",c);var O=setTimeout(c,500);c(),i.$on("$destroy",function(){k(),clearTimeout(O),m.removeEventListener("mousedown",d),m.removeEventListener("mouseup",u),m.removeEventListener("mousemove",p),m.removeEventListener("mouseout",l),m.removeEventListener("touchstart",g),m.removeEventListener("touchend",f),m.removeEventListener("touchmove",h),window.removeEventListener("resize",c),window.removeEventListener("scroll",c),i.poaListener()}),window.isTest&&(window.canvasLines=C,window.drawCanvas=T,window.digestCanvas=e)}}}]),app.directive("simInfo",function(){return{templateUrl:"/scripts/directives/sim-info/dirc_sim-info.html",scope:{subscription:"=data",hideActive:"=hideActive",obfuscate:"=obfuscate"},link:function(e){e.hide=e.obfuscate,e.toggleHide=function(){return e.hide=!e.hide}}}}),app.directive("siteSimpleHeader",["$location","$window","Checkout","$timeout",function(e,t,n,o){return{templateUrl:"/scripts/directives/site-simple-header/dirc_site-simple-header.html",controller:function(){}}}]),app.directive("slideInNewsletter",["Storage","Popups","$rootScope","Popup","State",function(e,t,n,o,i){return{scope:{},link:function(r){var a="hasSeenNewsletter";if(!e.get(a)){var s=new o("slideInPopup","slide-in-popup.html",{title:"newsletterTitle",classes:["sidePopup"]},{hide:function(){e.set(a,!0)}}),c=setTimeout(function(){(!i.customerLoggedIn&&t.activePopups().length||n.noMarketing)&&s.show()},window.newsLetterDelay||3e4);r.$on("$destroy",function(){return clearTimeout(c)})}}}}]),app.directive("smallProductCard",["State",function(e){return{templateUrl:"/scripts/directives/small-product-card/dirc_small-product-card.html",scope:{prodInfo:"=productData",addLink:"=?",showMobileDetails:"=?"},link:function(t){t.state=e}}}]),app.directive("speedOnInfo",["Popup","CustomerAccount","AgentAccount",function(e,t,n){return{templateUrl:"/scripts/directives/speed-on-info/dirc_speed-on-info.html",scope:{option:"=data",subscription:"=subData"},link:function(o){o.speedOnInfoPopup=new e("speedOnInfoPopup","option-activation-confirmation-popup.html",{title:"speedOnInfoPopupTitle",option:o.option,subscription:o.subscription,account:t,agent:n},{activate:function(e){o.speedOnInfoPopup.data.activating||(o.speedOnInfoPopup.data.activating=!0,e.activate(o.subscription).then(function(e){o.speedOnInfoPopup.data.activating=!1,e&&o.speedOnInfoPopup.hide()}))}})}}}]),app.directive("stickToBottom",["$rootScope",function(e){return{restrict:"A",transclude:!0,templateUrl:"/scripts/directives/stick-to-bottom/dirc_stick-to-bottom.html",scope:{isNotSticky:"=isNotSticky",stickyClass:"=?"},link:function(t,n){t.notSticking=!0,t.rs=e;var o=n[0],i=o.id||t.$id+"-sticky";o.id=i;var r,a=document.getElementById(i);if(a){var s=function(){var e;if(window.innerWidth>640||-1!==window.location.href.indexOf("/mobile-products")||t.isNotSticky&&!window.allSticky)e=!0;else if(r=r||a.clientHeight||0,t.notSticking)e=elementInViewport(a);else{var n=isOutOfViewport(a,siteHeaderHeight()+r);e=!n.top&&!n.bottom}t.notSticking!==e&&(t.notSticking=e,setTimeout(function(){return t.$digest()}))};window.addEventListener("resize",s),window.addEventListener("scroll",s),t.$on("$destroy",function(){window.removeEventListener("resize",s),window.removeEventListener("scroll",s)}),s()}}}}]),app.directive("stickyBox",["State","$rootScope",function(e,t){return{transclude:!0,templateUrl:"/scripts/directives/sticky-box/dirc_sticky-box.html",link:function(n,o){var i=o[0].querySelector(".sticky-box");n.$watch(function(){return t.isDesktop},function(){r()});var r=function(){var t,r=e.agentLoggedIn?24:120;if(window.innerWidth>640){var a=o[0],s=document.getElementsByClassName("sticky-box")[0],c=a.getBoundingClientRect(),d=s.getBoundingClientRect();t=c.top<r,d.bottom-d.top<c.bottom-24&&(s.offsetHeight+30>window.innerHeight?n.offset=0:c=t?-c.top+r:0)}else t=!1,c=0;i.style.transform="translateY("+c+"px)"};document.addEventListener("scroll",r),n.$on("$destroy",function(){document.removeEventListener("scroll",r)})}}}]),app.directive("stretchToFooter",function(){return{scope:{},link:function(e,t){function n(){var e=document.querySelector("site-footer");if(e){var n=e.getBoundingClientRect(),o=t[0].getBoundingClientRect(),i=n.top;i>window.innerHeight&&(i=window.innerHeight),t[0].style.minHeight=i-o.top+"px"}else{var r=t[0].getBoundingClientRect();t[0].style.minHeight=window.innerHeight-r.top+"px"}}window.addEventListener("resize",n),e.$watch(function(){return n()}),n(),e.$on("$destroy",function(){return window.removeEventListener("resize",n)})}}}),app.directive("subscription",["CustomerAccount","$location","AgentAccount","Popup","SavingsOptions","Analytics","State","$rootScope","CommonData","Linecheck","FeatureFlags","Channels",function(e,t,n,o,i,r,a,s,c,d,u,l){return{transclude:!0,templateUrl:"/scripts/directives/subscription/dirc_subscription.html",scope:{subscription:"=data"},link:function(p){p.state=a,p.agent=n,p.CommonData=c,p.account=e,p.rs=s,p.options={},p.SavingsOptions=i,p.ShowChangePlanForHFC=u.get("hfc-phase-2"),p.fiberChangePlan=u.get("fiber-change-plan-feature"),p.showRelocation=u.get("relocation-hfc"),p.showPosRcl=u.get("telco-act-postpaid"),p.checkIfCanPerformActions=function(){var e=[],t=[];p.getChannelsForRelocationPos=l.getChannels().$$state.value.find(function(t){!0===t.canPerformRelocation?e.push(t.code):e.push()}),p.getChannelsForChangePlanPos=l.getChannels().$$state.value.find(function(n){!0===n.canPerformRateplanChange?t.push(n.code):e.push()}),p.canRelocatePlan=!!e.includes(c.realChannel),p.canChangePlanHfc=!!t.includes(c.realChannel)},p.init=function(){var e;p.checkIfCanPerformActions(),p.subscription.getMsisdnActivationStatus(),null!==(e=p.subscription)&&void 0!==e&&e.simcardInfo.matchingId&&(p.loading=!0,p.subscription.getEsimInfo().then(function(e){p.loading=!1,null!==e&&void 0!==e&&e.active||(p.forceEsimAction=!0)}))},p.canAccessHandsetInsurance=function(){return i.insuranceOption&&i.insuranceOption.allowedInCurrentChannel()&&p.subscription.canAddHandsetInsurance()},p.topupAnalytics=function(){r.fireGaInteraction("topup",{})},p.buttonsAnalytics=function(e){r.fireGaInteraction("select info",{info_name:e})},p.openHFCrateplanChange=function(e){p.loading=!0,p.parseData=e.isHFC?e.installationInfo.address:null,p.subInstallationDetails=e.isHFC?void 0:e.installationInfo.otoId,d.lineCheck(p.parseData,p.subInstallationDetails,!1,"checkout").then(function(n){n&&(p.loading=!1,d.setGlobal(n),t.path("pos/existing-customer/change-subscription/"+e.id))})},"terminated"!=p.subscription.status&&(p.subscription.setActive(),p.isOpened=!0),p.isOpened&&t.search().option&&(p.options.showOptionActivation=!0),p.unblockOnHoldPopup=new o("unblockOnHoldPopup","unblock-on-hold.html",{title:"unblockOnHoldPopupTitle",unblocking:!1},{confirm:function(){p.unblockOnHoldPopup.data.unblocking=!0,e.unblockSubscriptionOnhold().then(function(e){p.unblockOnHoldPopup.data.unblocking=!1,e&&(p.unblockOnHoldPopup.hide(),p.unblockOnHoldSuccessPopup.show())})}}),p.unblockOnHoldSuccessPopup=new o("unblockOnHoldSuccessPopup","unblock-on-hold-success.html",{title:"unblockOnHoldSuccessPopupTitle"}),p.close=function(){t.search({id:""})},p.closeOptionActivation=function(){p.options.showOptionActivation=!1},p.contractExtendSubscription=function(){p.subscription.setActive(!1,!1,!0)},p.init()}}}]),app.directive("subscriptionBundles",function(){return{templateUrl:"/scripts/directives/subscription-bundles/dirc_subscription-bundles.html",scope:{subscription:"=data",hideExtra:"=?",onlyCountry:"=?"},link:function(e){e.bundleFilter={},e.hideExtra&&(e.bundleFilter.isExtra=!1)}}}),app.directive("subscriptionCirclePrimary",function(){return{templateUrl:"/scripts/directives/subscription-circle-primary/dirc_subscription-circle-primary.html",scope:{circle:"=",data:"=",key:"=?"},link:function(e){e.$watchGroup(["circle","data","key"],function(){e.data&&(e.isEmpty=!e.data.initial&&!e.data.isUnlimited&&!e.data.option,e.data.bundle&&e.data.option&&(e.check=e.data.bundle.willRenew||!e.data.option.autoRenews,e.alert=!e.data.bundle.willRenew&&e.data.option.autoRenews))})}}}),app.directive("subscriptionCircleGroup",["CustomerAccount","Popup","$rootScope","CommonData","$location","$timeout","Language","State","FeatureFlags","Linecheck","Analytics",function(e,t,n,o,i,r,a,s,c,d,u){return{templateUrl:"/scripts/directives/subscription-circle-group/dirc_subscription-circle-group.html",scope:{subscription:"=data",circles:"=",isRoaming:"=",showOptionsButton:"=?",hideButtons:"=?",hideCircles:"=?",hideSecondary:"=?",disableCircleClick:"=?"},link:function(l){var p,g;l.d={active:Object.first(l.circles)},l.rs=n,l.account=e,l.lang=a.data.current,l.state=s;for(var f=Object.entries(l.circles||{}),h=Object.entries((null===(p=l.subscription)||void 0===p?void 0:null===(g=p.isHardcoded)||void 0===g?void 0:g.toHardcodeGroup)||{}).filter(function(e){return e[1]}).map(function(e){return e[0]})||[],m=l.subscription.isHardcoded,v=0,b=f;v<b.length;v++){var w=_slicedToArray(b[v],2),C=w[0];w[1].isUnlimitedHardcoded=h.includes(C)&&m}l.showExtraInfos="debug"==c.get("debug-level"),l.changePlanTriggeringAnalytics=function(e,t){l.subscription.setActive(!1,!1,!0),c.get("Ayma-google-tag-manager-changes")&&(u.conversionPathTracking(void 0,void 0,e,(l.isRoaming?"roaming":"within switzerland")+" - overview",!0,!0),u.dataLayerPush({event:"gtm visitor interaction",interaction_name:"selfcare conversion path click",sc_conversion_path_click:t||"change plan",sc_area_clicked:"overview",sc_link_name:e,sc_product_tab:"mobile",sc_overview_tab:l.isRoaming?"roaming":"within switzerland",sc_offer_tag:"unavailable",sc_offer_type:t||"change plan"}))};var y=l.subscription.rateplan.firstProduct();y&&"internet"===y.tags[0]&&(l.isInternetProduct=!0),l.$watchGroup(["d.active","d.active.currentBundle"],function(){var e;l.d.data=null===(e=l.d.active)||void 0===e?void 0:e.currentBundle,l.d.isEmpty=l.d.data&&!l.d.data.initial&&!l.d.data.isUnlimited});var D=function(){if(!l.subscription.includedBundles)return throwSafe("Error in getsubscriptiondetails","29-id");for(var e in l.circles)l.circles[e].items=[];l.subscription.includedBundles.forEach(function(e){return processBundle(e,void 0,l.circles,l.isRoaming,!1,s.selectedRoamingCountry)});for(var t in l.circles){var n=l.circles[t],r=n.items.filter(function(e){return!e.isOption});n.rateplanBundle=r.find(function(e){return e.initial})}l.subscription.includedPromotions.forEach(function(e){return processBundle(e,void 0,l.circles,l.isRoaming,!0,s.selectedRoamingCountry)});for(var a in l.subscription.activeOptions)!function(e){var t=l.subscription.activeOptions[e];t.subDetails[l.subscription.id].forEach(function(e){return e.forEach(function(e){return processBundle(e,t,l.circles,l.isRoaming,!1,s.selectedRoamingCountry)})})}(a);for(var c in l.subscription.oneTimeOptions)!function(e){var t=l.subscription.oneTimeOptions[e];t.subDetails||(t.subDetails={});var n=t.subDetails[l.subscription.id];n&&n.forEach(function(e){return e.forEach(function(e){return processBundle(e,t,l.circles,l.isRoaming,!1,s.selectedRoamingCountry)})})}(c);for(var d in l.circles)!function(e){var t=l.circles[e];t.key=e,t.nextOptions=[],t.secondaryOptions=[],t.items.sort(function(e,t){var n,o;if(t.option&&"day_speed"===t.option.url)return-1;if(e.option&&"day_speed"===e.option.url)return 1;var i=(null===(n=e.endDate)||void 0===n?void 0:n.getTime())||0,r=(null===(o=t.endDate)||void 0===o?void 0:o.getTime())||0;return t.remaining?e.remaining?i>r?1:i<r?-1:e.isOption?1:-1:1:-1});var n=o.extras.isSecondaryBundle||[];if(t.items.forEach(function(e){return e.isSecondary=n.indexOf(urlify(e.bundle.bundleName))>-1}),t.currentBundle=t.items.find(function(e){return!e.isSecondary&&e.isUnlimited&&!e.isThrottled}),t.currentBundle||(t.currentBundle=t.items.find(function(e){return!e.isSecondary})||{}),t.isUnlimitedHardcoded&&(t.currentBundle.isUnlimited=!0),l.circles&&l.circles.nationalData){var i,r,a,s;"yallo_international_data_unlimited"===(null===(i=l.circles)||void 0===i?void 0:null===(r=i.nationalData)||void 0===r?void 0:null===(a=r.rateplanBundle)||void 0===a?void 0:null===(s=a.bundle)||void 0===s?void 0:s.bundleName)&&["nationalMin","internationalMin"].indexOf(t.key)>-1&&(t.isUnlimitedHardcoded=!0)}t.items.forEach(function(e){e.isSecondary?e.option&&e!==t.currentBundle&&t.secondaryOptions.push(e):e.option&&e!==t.currentBundle&&t.nextOptions.push(e)})}(d);i.search().circle&&l.circles[i.search().circle]&&l.switchActiveCircle(l.circles[i.search().circle],!0)};l.closeActivatePopup=function(){return l.d.showActivatePopup=!1},l.activeOptionPopup=new t("activeOptionPopup"+l.$id,"active-option-popup.html",{title:"activeOptionPopupTitle",subscription:l.subscription,account:e},{activate:function(e){l.activeOptionPopup.data.activating=!0,e.activate(l.subscription).then(function(e){l.activeOptionPopup.data.activating=!1,e&&l.activeOptionPopup.hide()})},deactivate:function(e){l.activeOptionPopup.data.deactivating=!0,e.deactivate(l.subscription).then(function(e){l.activeOptionPopup.data.deactivating=!1,e&&l.activeOptionPopup.hide()})}}),l.getUsageLink=function(){return"?month=".concat(swissDate().getMonth()+1,"&year=").concat(swissDate().getFullYear())},l.showOptionPopup=function(e){l.activeOptionPopup.data.option=e,l.activeOptionPopup.show()},l.clickCircle=function(t){if(t.currentBundle&&t.currentBundle.option)l.showOptionPopup(t.currentBundle.option);else if(t.optionCats&&!e.isLightCustomer&&!l.subscription.isLight){if(t.currentBundle&&t.currentBundle.isUnlimited&&!t.currentBundle.isThrottled&&!t.optionCats.find(function(e){return"UNLIMITED"===e}))return;l.d.cats=t.optionCats,l.d.showActivatePopup=!0}},l.optionButton=function(){l.d.cats=l.d.active.optionCats,l.d.showActivatePopup=!0,c.get("Ayma-google-tag-manager-changes")&&("ROAMING"===l.d.active.optionCats[0]?l.surfOrRoamingButtion="roaming option":l.surfOrRoamingButtion="surf option",l.changePlanTriggeringAnalytics("activate a "+l.surfOrRoamingButtion,l.d.active.optionCats[0]))},l.getOptionIconType=function(e){var t=l.subscription.optionConflict(e.option);return t&&e.bundle.willRenew?"clock":!t&&e.bundle.willRenew?"check":!e.bundle.willRenew&&e.option.autoRenews?"alert":void 0},l.switchActiveCircle=function(e,t){var o=i.search();if(o.circle=e.key,i.search(o),t)return l.d.active=e;l.d.animate=e,r(function(){l.d.animate=void 0,l.d.active=e,r(),n.$emit("recalculateAutoheight")},400)},l.openHFCrateplanChange=function(e){l.parseData=e.isHFC?e.installationInfo.address:null,l.subInstallationDetails=e.isHFC?void 0:e.installationInfo.otoId,d.lineCheck(l.parseData,l.subInstallationDetails,!1,"checkout").then(function(e){e&&(d.setGlobal(e),i.path("/account/change-subscription/"+i.search().id))})},l.$on("$destroy",function(){return l.activeOptionPopup.delete()}),s.returnWhenCommonDataExtrasLoaded().then(function(){return D()}),l.$watch("state.selectedRoamingCountry",function(){return D()})}}}]),app.directive("subscriptionDeviceInfo",["FeatureFlags",function(e){return{templateUrl:"/scripts/directives/subscription-device-info/dirc_subscription-device-info.html",scope:{devices:"=deviceData",subscription:"=subscriptionData"},link:function(t){if(t.deviceData=t.devices,t.subscriptionData=t.subscription,t.showForTestEnvs=e.get("device-display-selfcare"),e.get("device-display-selfcare")&&"mobile"===t.subscriptionData.getType()&&t.deviceData.length>0){t.FormataStringData=function(e){var t=e.split(".")[0],n=e.split(".")[1];return e.split(".")[2]+"-"+("0"+n).slice(-2)+"-"+("0"+t).slice(-2)};var n,o=_createForOfIteratorHelper(t.deviceData);try{for(o.s();!(n=o.n()).done;){var i=n.value;i.deviceLockingLengthStart=new Date(t.FormataStringData(i.contractEnds.split(" ")[0])).addMonths(-i.recurringDuration),i.deviceLockingLengthEnd=new Date(t.FormataStringData(i.contractEnds.split(" ")[0]))}}catch(e){o.e(e)}finally{o.f()}}}}}]),app.directive("subscriptionExtraInfos",["FeatureFlags",function(e){return{transclude:!0,templateUrl:"/scripts/directives/subscription-extra-infos/dirc_subscription-extra-infos.html",scope:{subscription:"=data"},link:function(t){var n=e.get("debug-level");t.showExtraInfos=["info","debug"].includes(n)&&window.isTest}}}]),app.directive("subscriptionSettings",["Network","Language","Analytics","CustomerAccount","Popup","$rootScope","$location","$anchorScroll","FeatureFlags","State",function(e,t,n,o,i,r,a,s,c,d){return{restrict:"E",transclude:!0,templateUrl:"/scripts/directives/subscription-settings/dirc_subscription-settings.html",scope:{subscription:"=data",onlyRoaming:"=?",voiceMailOnly:"=?",hideVoiceMail:"=?",callFilteringOnly:"=?"},link:function(u){u.account=o,u.voicemailLangs=["de","en","fr","it"],u.subscription.setActive();var l=u.subscription.type,p=["gprs_parent","roamingDataLimit","roamingData"];u.allowForPos=function(e){return!d.agentLoggedIn||d.agentLoggedIn&&"postpaid"===l&&p.includes(e)}
;var g=(Date.now()-objToDate(u.subscription.user.dob).getTime())/1e3/60/60/24/365;if(u.under16=g<16,u.isTelcoActpostaid=c.get("telco-act-postpaid"),u.costControlSettings=["gprs","roaming","roamingAirSeaSate","roamingGprs","paygRoaming","premium090x","premium0906","premiumSms"],u.voicemailSettings=["voicemail","voicemailLang"],u.callFilterSettings=["callFiltering"],"prepaid"===u.subscription.type||u.isTelcoActpostaid&&"postpaid"===l){u.paygDataLimit=u.subscription.settings.PAYG_DATA.children.PAYG_AMOUNT.children;var f=Object.entries(u.paygDataLimit).find(function(e){return!0===e[1]});u.paygDataLimitArray=[],Object.keys(u.paygDataLimit).sort(function(e,t){return e.replace("LIMIT_","")-t.replace("LIMIT_","")}).forEach(function(e){u.paygDataLimitArray.push({limit:e,value:u.paygDataLimit[e]})}),u.currentDataLimit=f?f[0]:"LIMIT_300",u.isDataLimit="LIMIT_300"!==u.currentDataLimit}u.subscription.returnWhenDataLoaded().then(function(){u.subscription&&(a.hash(!u.isDataLimit&&u.subscription&&u.subscription.oneTimeOptions&&u.subscription.oneTimeOptions.length<1?"roamingDataLimit":""),s(),u.settings=u.rfeToVisual(u.subscription.settings))}),u.findTrueChild=function(e){for(var t in e)if(e[t])return t},u.turnOffChildren=function(e){for(var t in e.children)e.children[t]=!1},u.rfeToVisual=function(e){if(!e)return{};e.ROAMING_STD&&(e.ROAMING=e.ROAMING_STD);var n={};if(e.VOICEMAIL){n.voicemail=e.VOICEMAIL.subscribed;var o=u.findTrueChild(e.VOICEMAIL.children);n.voicemailLang=o?o.substring(10,120).toLowerCase()||"en":t.data.current}if(e.PAYG_DATA&&(e.PAYG_DATA.children.BLOCK_PAYG?n.paygRoaming=!e.PAYG_DATA.children.BLOCK_PAYG:n.paygRoaming=!0,e.PAYG_DATA.children.PAYG_SPECIAL_ZONES?n.paygRoamingSpecialZones=e.PAYG_DATA.children.PAYG_SPECIAL_ZONES:n.paygRoamingSpecialZones=!1,e.PAYG_DATA.children.PAYG_AMOUNT)){n.paygLimit=u.findTrueChild(e.PAYG_DATA.children.PAYG_AMOUNT.children),u.paygLimits=[];for(var i in e.PAYG_DATA.children.PAYG_AMOUNT.children)u.paygLimits.push(i)}if(e.ROAM_AIR_SEA_SATE&&(n.roamingAirSeaSate=!e.ROAM_AIR_SEA_SATE.subscribed),e.ROAMING&&(n.roaming=e.ROAMING.subscribed),e.PREMIUM_SMS_MMS_PARENT&&(n.premiumSms=e.PREMIUM_SMS_MMS_PARENT.children.PREMIUM_SMS_MMS_BLOCK_NONE),e["090_NUMBERS_PARENT"]&&(e["090_NUMBERS_PARENT"].children["090X_BLOCK"]?(n.premium090x=!1,n.premium0906=!1):(n.premium090x=!0,n.premium0906=!e["090_NUMBERS_PARENT"].children["0906_BLOCK"])),e.GPRS_PARENT&&(e.GPRS_PARENT.children.GPRS_BLOCK?(n.gprs=!1,n.roamingGprs=!1):(n.gprs=!0,n.roamingGprs=!e.GPRS_PARENT.children.GPRS_ROAMING_BLOCK)),e.CALL_FILTER_PARENT){var r;n.callFiltering=null===(r=e.CALL_FILTER_PARENT.children)||void 0===r?void 0:r.CALL_FILTER_OPT_IN}return n},u.visualToRfe=function(e,t){var n={};if(t.VOICEMAIL&&(e.voicemail!=t.VOICEMAIL.subscribed||e.voicemail&&!t.VOICEMAIL.children["VOICEMAIL_"+e.voicemailLang.toUpperCase()])&&(n.VOICEMAIL=angular.copy(t.VOICEMAIL),n.VOICEMAIL.subscribed=e.voicemail,u.turnOffChildren(n.VOICEMAIL),e.voicemail&&(n.VOICEMAIL.children["VOICEMAIL_"+e.voicemailLang.toUpperCase()]=!0)),t.ROAM_AIR_SEA_SATE&&e.roamingAirSeaSate!=!t.ROAM_AIR_SEA_SATE.subscribed&&(n.ROAM_AIR_SEA_SATE=angular.copy(t.ROAM_AIR_SEA_SATE),n.ROAM_AIR_SEA_SATE.subscribed=!e.roamingAirSeaSate),t.ROAMING&&e.roaming!=t.ROAMING.subscribed&&(n.ROAMING=angular.copy(t.ROAMING),n.ROAMING.subscribed=e.roaming),t.PREMIUM_SMS_MMS_PARENT&&e.premiumSms!=t.PREMIUM_SMS_MMS_PARENT.children.PREMIUM_SMS_MMS_BLOCK_NONE&&(n.PREMIUM_SMS_MMS_PARENT=angular.copy(t.PREMIUM_SMS_MMS_PARENT),u.turnOffChildren(n.PREMIUM_SMS_MMS_PARENT),e.premiumSms?n.PREMIUM_SMS_MMS_PARENT.children.PREMIUM_SMS_MMS_BLOCK_NONE=!0:n.PREMIUM_SMS_MMS_PARENT.children.PREMIUM_SMS_MMS_BLOCK_ALL=!0),t["090_NUMBERS_PARENT"]&&(t["090_NUMBERS_PARENT"].children["090X"]&&(!e.premium090x||!e.premium0906)||t["090_NUMBERS_PARENT"].children["090X_BLOCK"]&&(e.premium090x||e.premium0906)||t["090_NUMBERS_PARENT"].children["0906_BLOCK"]&&(e.premium0906||!e.premium090x))&&(n["090_NUMBERS_PARENT"]=angular.copy(t["090_NUMBERS_PARENT"]),u.turnOffChildren(n["090_NUMBERS_PARENT"]),e.premium090x&&e.premium0906?n["090_NUMBERS_PARENT"].children["090X"]=!0:e.premium090x?n["090_NUMBERS_PARENT"].children["0906_BLOCK"]=!0:n["090_NUMBERS_PARENT"].children["090X_BLOCK"]=!0),t.GPRS_PARENT&&(t.GPRS_PARENT.children.GPRS_ALL&&(!e.gprs||!e.roamingGprs)||t.GPRS_PARENT.children.GPRS_BLOCK&&(e.gprs||e.roamingGprs)||t.GPRS_PARENT.children.GPRS_ROAMING_BLOCK&&(e.roamingGprs||!e.gprs))&&(n.GPRS_PARENT=angular.copy(t.GPRS_PARENT),e.gprs&&e.roamingGprs?n.GPRS_PARENT.children={GPRS_ALL:!0}:e.gprs&&"prepaid"==u.subscription.type?n.GPRS_PARENT.children={GPRS_ROAMING_BLOCK:!0}:e.gprs&&"postpaid"==u.subscription.type?n.GPRS_PARENT.children={GPRS_ROAMING_BLOCK:!0}:n.GPRS_PARENT.children={GPRS_BLOCK:!0}),t.ROAMING_STD&&n.ROAMING&&(n.ROAMING_STD=n.ROAMING,delete n.ROAMING),t.CALL_FILTER_PARENT){var o;e.callFiltering!=(null===(o=t.CALL_FILTER_PARENT.children)||void 0===o?void 0:o.CALL_FILTER_OPT_IN)&&(n.CALL_FILTER_PARENT=_objectSpread(_objectSpread({},t.CALL_FILTER_PARENT),{},{subscribed:!0,children:{CALL_FILTER_OPT_IN:e.callFiltering,CALL_FILTER_OPT_OUT:!e.callFiltering}}))}return n},u.visualToRfePayg=function(e,t){var n={};if(!t.PAYG_DATA)return n;var o=u.subscription.type,i=u.paygDataLimit,r=e.paygLimit;if(n.PAYG_DATA={children:{}},e.paygRoamingSpecialZones!==t.PAYG_DATA.children.PAYG_SPECIAL_ZONES&&(n.PAYG_DATA.children.PAYG_SPECIAL_ZONES=e.paygRoamingSpecialZones),e.paygRoaming){if(e.paygRoaming)switch(n.PAYG_DATA.children.BLOCK_PAYG=!1,n.PAYG_DATA.children.PAYG_AMOUNT={children:{}},n.PAYG_DATA.children.PAYG_AMOUNT.children[r]=!0,o){case"postpaid":case"prepaid":n.PAYG_DATA.children.PAYG_AMOUNT.children=i}}else switch(n.PAYG_DATA.children.BLOCK_PAYG=!0,n.PAYG_DATA.children.PAYG_SPECIAL_ZONES=!1,o){case"postpaid":case"prepaid":n.PAYG_DATA.children.PAYG_AMOUNT={children:{}},n.PAYG_DATA.children.PAYG_AMOUNT.children=i}return n},u.saveSettings=function(t,o){var i=angular.copy(u.visualToRfe(t,o));if(Object.size(i)){var r={subscriptionId:u.subscription.id,changedSettings:i};u.savingSettings=!0,n.event("changeSubscriptionSettings","start"),e.post("changeSubscriptionSettings",r,void 0,void 0,void 0,void 0,void 0,void 0,void 0,u.lastChanged).then(function(e){e&&(u.adjustCurrentSettings(o,i),n.event("changeSubscriptionSettings","success")),u.settings=u.rfeToVisual(u.subscription.settings),u.savingSettings=!1})}},u.savePaygSettings=function(t,o){var i=angular.copy(u.visualToRfePayg(t,o));if(i.PAYG_DATA&&Object.size(i.PAYG_DATA.children)){i.PAYG_DATA.subscribed=!0;var r={subscriptionId:u.subscription.id,changedPaygSettings:i};u.savingSettings=!0,n.event("changePaygSettings","start"),e.post("changePaygSettings",r,void 0,void 0,void 0,void 0,void 0,void 0,void 0,u.lastChanged).then(function(e){e&&(u.adjustCurrentSettings(o,i),n.event("changePaygSettings","success")),u.settings=u.rfeToVisual(u.subscription.settings),u.savingSettings=!1})}},u.adjustCurrentSettings=function(e,t){for(var n in t)if(t[n]&&t[n].children&&t[n].exclusive)for(var o in e[n].children)e[n].children[o]=!1;deepCopy(e,t),u.settings=u.rfeToVisual(e)},u.revertSettings=function(){u.settings=u.rfeToVisual(u.subscription.settings)},u.internetWarningPopup=new i("confirmPopup"+u.$id,"confirm-internet-off-popup.html",{title:"confirmPopupTitle"},{yes:function(){u.settings.gprs=!1,u.internetWarningPopup.hide(),u.change("gprs",null,!0)},no:function(){u.rollBack(),u.internetWarningPopup.hide()},hide:function(e){e&&u.rollBack()}}),u.rollBack=function(){u.settings.gprs=!0,u.change("gprs",null,!0)},u.change=function(e,t,o){if("gprs"===e&&0==u.settings.gprs&&!o)return u.internetWarningPopup.show();("roaming"===e&&!1===u.settings.roaming||"roamingGprs"===e&&!1===u.settings.roamingGprs)&&r.$emit("switchRoaming"),u.lastChanged=e;var i=u.settings,a=[e];"roamingGprs"==e&&i.roamingGprs?(i.gprs=!0,i.roaming=!0,a.push.apply(a,["gprs","roaming"])):"gprs"==e||"roaming"==e?i.roamingGprs=i.gprs&&i.roaming:"premium090x"==e?!i.premium090x&&i.premium0906&&(i.premium0906=!1,a.push("premium0906")):"premium0906"==e&&i.premium0906?i.premium090x||(a.push("premium090x"),i.premium090x=!0):"voicemailLang"==e?(u.settings.voicemailLang=t,a.push("voicemailLang")):"paygCostConrol"==e&&a.push("paygCostConrol");for(var s=0;s<a.length;s++)!function(){var e=a[s],t=u.settings[a[s]],o="";u.costControlSettings.indexOf(e)>-1&&(o="cost control"),u.voicemailSettings.indexOf(e)>-1&&(o="voicemail"),u.callFilterSettings.indexOf(e)>-1&&(o="call Filter");var i=void 0;"voicemailLang"==e&&(i=t),u.triggerAnalyticsForChanges=function(){c.get("Ayma-google-tag-manager-changes")&&n.dataLayerPush({event:"gtm visitor interaction",interaction_name:"settings toggle control",settings_section:o,settings_control_name:e,settings_control_action:i?t:t?"on":"off"})},u.triggerAnalyticsForChanges()}();u.applyChanges(e)},u.simpleChange=function(e){var t;u.costControlSettings.indexOf(e)>-1&&(t="cost control"),u.voicemailSettings.indexOf(e)>-1&&(t="voicemail"),u.callFilterSettings.indexOf(e)>-1&&(t="call Filter"),c.get("Ayma-google-tag-manager-changes")&&n.dataLayerPush({event:"gtm visitor interaction",interaction_name:"settings toggle control",settings_section:t,settings_control_name:e,settings_control_action:u.settings[e]?"on":"off"}),u.saveSettings(u.settings,u.subscription.settings)},u.applyChanges=function(e){"changePaygSettings"===e||"paygRoaming"===e?u.savePaygSettings(u.settings,u.subscription.settings):u.saveSettings(u.settings,u.subscription.settings)},u.handleLimit=function(e,t){"checkbox"===e?(Object.keys(u.paygDataLimit).forEach(function(e){return u.paygDataLimit[e]=!1}),u.currentDataLimit=u.isDataLimit?"LIMIT_300":"LIMIT_50",u.paygDataLimit[u.currentDataLimit]=!0,u.isDataLimit="LIMIT_300"!==u.currentDataLimit):(Object.keys(u.paygDataLimit).forEach(function(e){return u.paygDataLimit[e]=!1}),u.paygDataLimit[t]=!0,u.currentDataLimit=t,u.isDataLimit="LIMIT_300"!==u.currentDataLimit),u.change("paygRoaming")},u.settingsDisabled=function(e,t){return!!u.subscription.fastActivation||(!u.subscription.isActive||(!!u.savingSettings||(!(!o.onHold.active||"postpaid"!=u.subscription.type)||(!u.subscription.canActivateOptions||(!(e||!o.isLightCustomer&&!u.subscription.isLight||"postpaid"!=u.subscription.type)||(!t&&!o.isAccountOwner()||void 0))))))}}}}]),app.directive("subscriptionSwitcher",["CustomerAccount","$location","$rootScope","$timeout","Analytics","Storage","FeatureFlags",function(e,t,n,o,i,r,a){return{templateUrl:"/scripts/directives/subscription-switcher/dirc_subscription-switcher.html",scope:{data:"=",onActiveSubChange:"=?",showPromos:"=?",mode:"=?"},link:function(s){var c=-1;s.rs=n,s.account=e,s.showExtraDebug="debug"==a.get("debug-level"),s.showExtraInfos="info"==a.get("debug-level")||s.showExtraDebug,s.$watch("mode",function(){s.init(),s.tempDisable=!0,o(function(){return s.tempDisable=!1})}),s.init=function(){var n,o;c=-1;var i=s.mode;"fiber"===i&&(i="internet"),s.data.subs=e.getFilteredSubList(!0,!1,i);var a=t.search().id||r.get("favSub");if(a){var d=s.data.subs.indexOf(s.data.subs.find(function(e){return e.id===a}));s.data.sub=s.data.subs[d]}else e.pickedSubscription&&(s.data.sub=s.data.subs[e.pickedSubscription]);s.data.sub||(s.data.sub=s.data.subs.find(function(e){return e.isFiber&&e.needsFiberAction()})),s.data.sub||(s.data.sub=s.data.subs[0]),s.data.sub||(s.data.sub="newPostpaid"),e.pickedSubscription=s.data.sub,s.setMobileSidewaysScrollPos(s.data.subs.indexOf(s.data.sub)),s.isJunior=!e.isAccountOwner(),s.ownerName=e.getAccountOwnerName(),s.ownerMsisdn=null===(n=e.getAccountOwnersActiveSubs())||void 0===n?void 0:null===(o=n[0])||void 0===o?void 0:o.msisdn,s.loaded=!0},s.initMobileSwitcher=function(){s.data.startPos=s.data.subs.indexOf(s.data.sub),s.setPos&&o(function(){return s.setPos(s.data.startPos)},100)},s.reverseSetPos=function(){return s},s.setMobileSidewaysScrollPos=function(e){if(e!==c&&(c=e,s.loaded)){if(e===s.data.subs.length)s.data.sub="newPostpaid";else if(e===s.data.subs.length+1)s.data.sub="newPrepaid";else{var n,o,a;s.data.sub=s.data.subs[e];var d=s.data.sub.id;r.set("favSub",d);var u=null!==(n=s.data.sub.rateplan.firstProduct())&&void 0!==n&&n.hasTag("fiber")||null!==(o=s.data.sub.rateplan.firstProduct())&&void 0!==o&&o.hasTag("internet")?"true":"false";"yallo_go"===(null===(a=s.data.sub.rateplan.firstProduct())||void 0===a?void 0:a.url)&&(u=!1),t.search({id:d,tab:t.search().tab,circle:t.search().circle,home:u}).replace()}s.onActiveSubChange&&s.onActiveSubChange(s.data.sub),"newPostpaid"!==s.data.sub&&"newPrepaid"!==s.data.sub||i.fireGaInteraction("new abo",{abo_type:s.data.sub})}},s.visibleSlides=3,s.currentIndex=0,s.canSlideLeft=function(){return s.currentIndex>0},s.canSlideRight=function(){return s.currentIndex+s.visibleSlides<s.data.subs.length},s.slideLeft=function(){s.canSlideLeft()&&s.currentIndex--},s.slideRight=function(){s.canSlideRight()&&s.currentIndex++},s.isVisible=function(e){return e>=s.currentIndex&&e<s.currentIndex+s.visibleSlides},s.showArrows=function(){return s.data.subs&&s.data.subs.length>s.visibleSlides},s.init()}}}]),app.directive("subscriptionWarnings",["AgentAccount","State","CustomerAccount","$location","CustomerOrders","FeatureFlags",function(e,t,n,o,i,r){return{templateUrl:"/scripts/directives/subscription-warnings/dirc_subscription-warnings.html",scope:{subscription:"=sub",onEsimReset:"=?"},link:function(r){r.account=n,r.state=t,r.agent=e,r.showOnpStatus=!0,r.showOrderStatus=!0,i.returnWhenOrdersLoaded().then(function(){var e,t=r.subscription.getActiveOrderStatus(),i=r.subscription.onpActionNeeded();if(r.subIsEsim=!(null===(e=r.subscription.orders)||void 0===e||!e.find(function(e){return!!e.orderLines.find(function(e){return-1!==e.description.indexOf("eSIM")})})),r.subIsEsim||r.subscription.simcardInfo.matchingId){var a;if(null===(a=r.subscription.esimInfo)||void 0===a||!a.active){var s;"active"!==r.subscription.status&&!r.subscription.fastActivation&&"approved"!==(null===(s=n.findPrimaryID())||void 0===s?void 0:s.status)&&n.findPrimaryID()||(r.showEsimStatus=!0)}}r.showOnpStatus=!r.showEsimStatus&&(!t||i),n.needToVerifyId&&(r.showOnpStatus=!1),o.search().showonpstatus&&(r.showOnpStatus=!0),o.search().showesimStatus&&(r.showEsimStatus=!0),r.showOrderStatus=!r.showOnpStatus&&!r.showEsimStatus});var a=r.subscription&&r.subscription.orders&&r.subscription.orders[0],s=a&&a.orderLines&&a.orderLines[0];if(s){if(s.status.includes("ORDER_LINE_FULFILLED")){r.orderFulfilled=!0;var c=new Date(a.orderDate).addDays(14);r.hideDeviceStatus=!(new Date>c),r.description=s.description,r.fulfilledDate=a.responseParameters.split(";").slice(-1).toString().split("=").pop()}if(["Ready","FF_ORDER_SENT"].indexOf(s.status)>-1){r.orderNotFulfilled=!0;var d=new Date(a.orderDate).addDays(14);r.hideDeviceStatus=!(new Date>d),r.description=s.description}}}}}]),app.directive("swypeOrderForm",["AgentAccount","SwypeLeads","Notifications",function(e,t,n){return{templateUrl:"/scripts/directives/swype-order-form/dirc_swype-order-form.html",scope:{data:"=?",isAgent:"=?",formName:"@?"},link:function(o){o.data||(o.data={}),o.submit=function(){o.submitting=!0,(o.isAgent?t.signupFromPOS(o.data,e.data.username):t.signupFromEshop(o.data,o.formName)).then(o.handleResponse).finally(function(){return o.submitting=!1})},o.handleResponse=function(e){e&&!e.errorCode?(o.data={},o.swypeForm.$setPristine(),o.swypeForm.$setUntouched(),n.add("swypeOrderPosSuccess","good")):(n.add("error","bad"),throwSafe("Error submitting Swype order - formName '".concat(o.formName,"' - ").concat(null===e||void 0===e?void 0:e.errorCode),"46-id"))}}}}]),app.directive("tabs",["$timeout","Analytics","$rootScope",function(e,t,n){return{transclude:!0,templateUrl:"/scripts/directives/tabs/dirc_tabs.html",scope:{tabs:"=data",tabKey:"=",tabTitle:"=",options:"=",tabShow:"=?",noTabDefault:"=?",dontTranslateTitles:"=?",mobileRadio:"=?",mobileToggles:"=?",fireAnalytics:"=?",analyticsPageName:"=?",centerTabs:"=?"},controller:["$scope",function(o){o.rs=n,e(function(){o.t=o;for(var e in o.tabs)o.tabs[e].icon||(o.tabs[e].icon="dot-circle-o");if(o.tabShow){for(var e in o.tabShow)"string"==typeof o.tabShow[e]&&"!"==o.tabShow[e].substring(0,1)&&(o.tabShow[e]=o.tabShow[e].substring(1),o.inverted=!0),o.tabShowKey=e,o.tabShowVal=o.tabShow[e];if(o.options.activeTab)o.showTabs=!0;else for(var e in o.tabs)if(o.tabs[e][o.tabShowKey]==o.tabShowVal&&!o.inverted||o.tabs[e][o.tabShowKey]!=o.tabShowVal&&o.inverted){o.noTabDefault||(o.options.activeTab=o.tabs[e][o.tabKey]),o.showTabs=!0;break}}else o.noTabDefault||o.options.activeTab||Object.size(o.tabs)&&(o.options.activeTab=Object.first(o.tabs)[o.tabKey]),Object.size(o.tabs)&&(o.showTabs=!0);o.activeTabs=function(){var e=[];for(var t in o.tabs)o.tabs[t].active&&e.push(o.tabs[t]);return e}}),o.changeTab=function(e){var n,i;if(o.options.activeTab!==e&&(e&&o.fireAnalytics&&t.fireGaEvent("gtm visitor interaction",o.analyticsPageName||void 0,void 0,void 0,"select page tab",e,!1),o.options.activeTab=e,null!==(n=o.options)&&void 0!==n&&null!==(i=n.onClick)&&void 0!==i&&i[o.options.activeTab])){var r,a;null===(r=o.options)||void 0===r||null===(a=r.onClick)||void 0===a||a[o.options.activeTab]()}},o.isInvalid=function(e){var t=document.getElementById(e+"_content");if(t)return!!t.getElementsByClassName("ng-invalid").length}}]}}]),app.directive("tariffFinder",["Rateplans","$rootScope","Countries",function(e,t,n){return{transclude:!0,templateUrl:"/scripts/directives/tariff-finder/dirc_tariff-finder.html",scope:{rateplan:"=rateplan",roamingCountry:"=?",simpleMode:"=?"},link:function(o){o.rs=t,o.countries=n.countriesObj,o.data={from:e.data.defaultCountry,to:e.data.defaultCountry},o.change=function(){t.$emit("onTariffCountryChange",{selectedCountry:o.from}),o.rates=o.rateplan.rate(o.data.from,o.data.to)},o.$watch("roamingCountry",function(){o.roamingCountry&&(o.data.from=o.roamingCountry),o.change()}),o.switchCountries=function(){var e=o.data.to;o.data.to=o.data.from,o.data.from=e,o.change()},o.change()}}}]),app.directive("textScroller",function(){return{templateUrl:"/scripts/directives/text-scroller/dirc_text-scroller.html",scope:{onUpdate:"=?",texts:"=?",active:"=?"},link:function(e,t){e.isInit=!0,e.$watch("active",function(){return e.check()}),e.check=debounce(function(){var n=t[0].querySelectorAll(".text-el")[e.active];if(!n)return e.check();var o=n.getBoundingClientRect();e.offset=-(o.left+o.width/2-window.innerWidth/2)+(e.offset||0),e.animated=!e.isInit,e.isInit=!1,e.$digest()},50)}}}),app.directive("toggle",function(){return{transclude:!0,templateUrl:"/scripts/directives/toggle/dirc_toggle.html",scope:{startToggled:"=?"},link:function(e,t,n){e.isToggled=!!e.startToggled,e.title=n.title,e.toggle=function(){e.isToggled=!e.isToggled,e.onToggle&&e.onToggle(e.isToggled,e.togglerData,n.id)}}}}),app.directive("tooltip",["Popup",function(e){return{transclude:!0,templateUrl:"/scripts/directives/tooltip/dirc_tooltip.html",scope:{type:"@?",iconClass:"@?",popupTitle:"@?"},link:function(t,n){t.openPopup=function(){var o;new e("tooltipPopup","tooltip-popup.html",{title:null!==(o=t.popupTitle)&&void 0!==o?o:"info"},{putData:function(){document.querySelector("#tooltip-popup-content").innerHTML=n[0].querySelector(".tooltip-content").innerHTML}}).show()}}}}]),app.directive("topicByTagToggled",["Support","Analytics","Language","$rootScope","smoothScroll",function(e,t,n,o,i){return{templateUrl:"/scripts/directives/topic-by-tag-toggled/dirc_topic-by-tag-toggled.html",scope:{tag:"=",hideTitle:"=?"},link:function(r){r.currentPath=o.currentPath,r.data={},r.getTopic=function(){if(r.helpTopic=Object.first(e.getTopicsWithTag(r.tag)),r.helpTopic)return Object.keys(r.helpTopic.helpArticles).forEach(function(e){r.helpTopic.helpArticles[e].isToggled=!1}),r.helpTopic},r.onToggle=function(e,o,a){if(e){for(var s in r.data)o.id!==s&&(r.data[s]=!1);if(a&&window.innerWidth<640&&setTimeout(function(){return tryRestoreSmoothScroll(a,1,i)},250),o){var c="/support/".concat(r.helpTopic.id,"/").concat(o.id);t.fireGaEvent("virtual page view",c,"support","".concat(window.location.origin,"/").concat(n.data.current,"/").concat(c),void 0,void 0,!1)}}}}}}]),app.directive("toggler",function(){return{transclude:!0,templateUrl:"/scripts/directives/toggler/dirc_toggler.html",scope:{togglerData:"=",isToggled:"=",showArrow:"=",noTranslateTitle:"@",onToggle:"=?"},link:function(e,t,n){null!==e.isToggled&&void 0!==e.isToggled||(e.isToggled=!1),e.toggle=function(){e.isToggled=!e.isToggled,e.onToggle&&e.onToggle(e.isToggled,e.togglerData,n.id)}}}}),app.directive("topupHistory",function(){return{templateUrl:"/scripts/directives/topup-history/dirc_topup-history.html",scope:{subscription:"=subscriptionData"},link:function(e){e.subscription.getTopupHistory()}}}),app.directive("translateOptional",["$translate","$rootScope","missingTranslationHandler",function(e,t,n){return{restrict:"A",link:function(o,i,r){function a(){var t=r.translateOptional,o=n.ignores;o&&(o.push(t),o.length>200&&handler.ignores.splice(0,1));var a=e.instant(t);a===t?i.html(""):i.html(a||"-")}var s=t.$on("$translateChangeEnd",a);a(),o.$on("$destroy",s)}}}]),app.directive("watchTvLink",function(){return{restrict:"A",replace:!0,transclude:!0,template:"<a ng-transclude></a>",link:function(e,t,n){window.production?n.$set("href","https://yallo.tv/auto-login/?provider=yallo"):n.$set("href","https://winston-latest.cdn.staging.srse.w4a.tv/auto-login/?provider=yallo")}}}),app.directive("tvMigrationConfirmButton",["$location",function(e){return{restrict:"E",templateUrl:"/scripts/directives/tv-migration-confirm-button/dirc_tv-migration-confirm-button.html",link:function(t){t.confirmTV=function(){var t=e.search();e.url("/eshop/new-postpaid/checkout/yallo_premium_tv").search(t)}}}}]),app.directive("tvOffer",["CustomerAccount","FeatureFlags",function(e,t){return{templateUrl:"/scripts/directives/tv-offer/dirc_tv-offer.html",scope:{},link:function(n){n.freePremiumTV=e.applyForFreePremiumTV(),n.showRateplanPlus=t.get("rateplanPlus"),n.customerHasFreeTVOptionBeforeRateplanPlusNew=Object.keys(null===e||void 0===e?void 0:e.subscriptions).map(function(t){var n=new Date("08/16/2022");return!!((e.subscriptions[t].isHFC||e.subscriptions[t].isFiber||"yallo Home 5G"===e.subscriptions[t].rateplan.name)&&e.subscriptions[t].subscriptionStartDate<n)}),n.showUpTvBanner=n.customerHasFreeTVOptionBeforeRateplanPlusNew.indexOf(!0)>-1}}}]),app.directive("tvSubscription",["CustomerOrders","Popup","CustomerAccount","FeatureFlags",function(e,t,n,o){return{transclude:!0,templateUrl:"/scripts/directives/tv-subscription/dirc_tv-subscription.html",scope:{subscription:"=data"},link:function(o){o.subscription.setActive(),o.showOptionsPopup=!1,o.activeOptionsData=Object.values(o.subscription.activeOptions).map(function(e){return{option:e,bundle:e.subDetails[o.subscription.id][0][0]}}),e.getOrders(!0).then(function(){o.order=o.subscription.calcActiveOrder()}),o.toggleOptionsPopup=function(){o.showOptionsPopup=!o.showOptionsPopup},o.showActiveOptionPopup=function(e){o.activeOptionPopup.data.option=e,o.activeOptionPopup.show()},o.activeOptionPopup=new t("activeOptionPopup"+o.$id,"active-option-popup.html",{title:"activeOptionPopupTitle",subscription:o.subscription,account:n},{activate:function(e){o.activeOptionPopup.data.activating=!0,e.activate(o.subscription).then(function(e){o.activeOptionPopup.data.activating=!1,e&&o.activeOptionPopup.hide()})},deactivate:function(e){o.activeOptionPopup.data.deactivating=!0,e.deactivate(o.subscription).then(function(e){o.activeOptionPopup.data.deactivating=!1,e&&o.activeOptionPopup.hide()})}})}}}]),app.directive("upcPrive",["$location","Language","Network","Storage","CommonData","State","CustomerAccount","AgentAccount","Linecheck","Checkout","Analytics","WinOrder","PrismicPopups","Authentication","$q","Notifications",function(e,t,n,o,i,r,a,s,c,d,u,l,p,g,f,h){return{templateUrl:"/scripts/directives/upc-prive/dirc_upc-prive.html",scope:{},link:function(l,m,v){l.posToken=g.posToken,l.init=function(e){if(e?(l.data=e,differenceInDays(new Date,objToDate(e.wishDate,!0))<6&&(l.data.wishDate=dateToObj(l.getNextPossibleWishDate(),!0))):l.data={numberType:"new",product:v.product,customerDetails:{},installationAddress:{},shippingAddress:{},billingAddress:{},wishDate:dateToObj(l.getNextPossibleWishDate(),!0),brand:window.brand,channel:i.realChannel,agent_username:r.agentLoggedIn?s.data.username:void 0,agent_first_name:r.agentLoggedIn?s.data.firstName:void 0,agent_last_name:r.agentLoggedIn?s.data.lastName:void 0,wishDateType:"asap"},r.customerLoggedIn){var t=a.accountOwner;console.log(t);var n=l.data.customerDetails;n.title=t.title,n.firstName=t.firstName,n.lastName=t.lastName,n.dob=angular.copy(t.dob),t.emailAddress&&(n.emailAddress=t.emailAddress),t.contactNumber&&(n.contactNumber=t.contactNumber),l.data.installationAddress=angular.copy(t.address)}l.$watch("data",function(){return l.save()},!0)},r.checkCustomerLoggedIn().then(function(){if(e.search().token){var t={token:e.search().token};return n.post("get_token_data",t,2,!0,window.oldEshopBasePath,"text/plain",!0,!1).then(function(e){null!==e&&void 0!==e&&e.data_string?l.init(JSON.parse(null===e||void 0===e?void 0:e.data_string)):l.init()})}l.init(r.agentLoggedIn?void 0:o.get("upc-prive-order"))}),l.checkExistingCustomer=function(){return f.resolve()},l.lineCheck=function(){return c.lineCheck(l.data.installationAddress,void 0,!1,"upc-prive").then(function(e){var t,n;return null!==e&&void 0!==e&&null!==(t=e.upc)&&void 0!==t&&t.available?"eligible":null!==e&&void 0!==e&&null!==(n=e.fiber)&&void 0!==n&&n.available?"not-eligible-but-eligible-for-fiber":"not-eligible"})},l.openExistingCustomerPopup=function(){u.event("upc-prive","existing-customer-found","upc");var e=p.popups.find(function(e){return"upc_prive_existing_customer"===e.data.display_name});if(e)return e.show(),!0},l.submit=function(){l.loading||(u.event("upc-prive","order","start"),l.data.language=t.data.current,l.loading=!0,d.prefillData={billingCustomerDetails:l.data.customerDetails,billingAddress:l.data.differentBillingAddress?l.data.billingAddress:l.data.installationAddress},l.checkExistingCustomer().then(function(i){l.lineCheck().then(function(i){if(u.event("upc-prive","linecheck",i),"not-eligible"===i){l.delete(!1);var a=v.notEligiblePage;return r.agentLoggedIn&&(a="/pos"+a),e.path(a)}if("not-eligible-but-eligible-for-fiber"===i){l.delete(!1);var s=v.notEligibleButEligibleForFiberPage;return r.agentLoggedIn&&(s="/pos"+s),e.path(s)}var c={product:v.product,customerDetails:{title:l.data.customerDetails.title,firstName:l.data.customerDetails.firstName,lastName:l.data.customerDetails.lastName,dob:objToDate(l.data.customerDetails.dob,!0).toJSON().split("T")[0],emailAddress:l.data.customerDetails.emailAddress,contactNumber:l.data.customerDetails.contactNumber},numberType:l.data.numberType,phoneNumber:l.data.phoneNumber,installationAddress:addressToJson(l.data.installationAddress),billingAddress:addressToJson(l.data.differentBillingAddress?l.data.billingAddress:l.data.installationAddress),shippingAddress:addressToJson(l.data.differentShippingAddress?l.data.shippingAddress:l.data.installationAddress),wishDate:("asap"===l.data.wishDateType?l.getNextPossibleWishDate():objToDate(l.data.wishDate,!0)).toJSON().split("T")[0],language:t.data.current,brand:brand};return n.post("submit_upc_order",c,2,!0,window.oldEshopBasePath,"text/plain",!0,!1).then(function(t){if(t&&t.orderId){u.event("upc-prive","order","success");var n=v.successPage;return r.agentLoggedIn&&(n="/pos"+n),e.path(n).search({orderId:t.orderId}),o.remove("upc-prive-order"),l.submitted=!0,l.delete(!0)}l.loading=!1,"ERR_CUSTOMER_MATCHED"===t.errorCode?l.openExistingCustomerPopup():h.add(t.errorCode,"bad")})})}))},l.delete=function(e){var t={token:l.data.recoveryToken,deleteData:e};return n.post("delete_token_data",t,2,!0,window.oldEshopBasePath,"text/plain",!0,!1)},l.save=debounce(function(){if(!l.submitted){console.log("save"),o.set("upc-prive-order",l.data);var e={token:l.data.recoveryToken?l.data.recoveryToken:void 0,string:JSON.stringify(l.data),productName:v.product,emailAddress:l.data.customerDetails.emailAddress,currentStep:"upc-prive-checkout",currentStepIndex:0,totalSteps:1,version:1,language:t.data.current,url:location.href.split("?")[0],channel:i.realChannel||i.channel,agentUser:r.agentLoggedIn?s.data.username:void 0};n.post("submit_token_data",e,2,!0,window.oldEshopBasePath,"text/plain",!0,!1).then(function(e){null!==e&&void 0!==e&&e.token&&(l.data.recoveryToken=e.token)})}},2e3),l.getNextPossibleWishDate=function(){for(var e=(new Date).addDays(6);!l.customValidationFunction(e)[0].valid;)e=e.addDays(1);return e},l.customValidationFunction=function(e){return[{key:"upc-valid-date",valid:0!==e.getDay()&&1!==e.getDay()}]}}}}]),app.directive("upcPriveEditProduct",["$location","Network","State","Notifications",function(e,t,n,o){return{transclude:!0,templateUrl:"/scripts/directives/upc-prive-edit-product/dirc_upc-prive-edit-product.html",scope:{},link:function(i,r,a){i.buttonText=a.buttonText,i.confirmProductChange=function(){if(!e.search().orderId)return o.add("error_upcOrderIdNotFound","bad");i.loading=!0;var r={orderId:e.search().orderId,product:a.product};return t.post("update_upc_order",r,2,!1,window.oldEshopBasePath,"text/plain",!0,!1).then(function(t){if(t){var o=a.successPage;n.agentLoggedIn&&(o="/pos"+o),e.path(o).search(e.search())}i.loading=!1})}}}}]),app.directive("usageHistory",["$rootScope","FeatureFlags","$location","Network","Notifications","Files",function(e,t,n,o,i,r){return{transclude:!0,templateUrl:"/scripts/directives/usage-history/dirc_usage-history.html",scope:{usage:"=",data:"="},link:function(t){t.usage||(t.usage={sms:{total:0,days:[]},calls:{total:0,days:[]},gprs:{total:0,days:[]}}),t.rs=e,t.data.selectedUsageType||(t.data.selectedUsageType="gprs"),t.invoiceId=n.search().bill,t.CustomerSubscriptionId=n.url().split("/").slice(-1).toString().split("?")[0],t.showUsageButton=!!("postpaid"===t.account.getCurrentSubscription().type||t.account.getCurrentSubscription().isHFC||t.account.getCurrentSubscription().isFiber||t.account.getCurrentSubscription().isMbb),t.downloadBillPdf=function(e,n){var a={invoiceId:e,subscriptionId:n};t.gettingPdf=!0,o.post("getUsageDetailsInPDF",a).then(function(e){if(t.gettingPdf=!1,e.errorCode&&"849"===e.errorCode)i.add("error_couldntDownloadPdf","bad");else if(e){var n=e.fileName;r.saveAs2(e.createdPdf,n),i.add("SuccessfullyDownloadedMonthlyUsageReport","good")}})}}}}]),app.directive("usageHistoryGraph",["$rootScope",function(e){return{templateUrl:"/scripts/directives/usage-history-graph/dirc_usage-history-graph.html",scope:{days:"=",startDate:"=",endDate:"="},link:function(t){t.rs=e,t.create=function(){t.columns=new Array(differenceInDays(t.startDate,t.endDate)+1).fill(0).map(function(e,n){var o=t.days.find(function(e){return compareDatesIgnoreHours(e.date,t.startDate.addDays(n))});return o?[o.total,o.totalNotIncluded,o.totalIncluded,o.date.getDate()]:[0,0,0]}),t.highest=t.columns.concat().sort(function(e,t){return e[0]<t[0]?1:-1})[0],t.highest=t.highest?t.highest[0]:0},t.$watch("days",function(){t.create()})}}}]),app.directive("userDetails",["Network","Notifications","CustomerAccount","$route","Analytics","AgentAccount","$timeout","Language","State","FeatureFlags",function(e,t,n,o,i,r,a,s,c,d){return{templateUrl:"/scripts/directives/user-details/dirc_user-details.html",scope:{user:"="},link:function(e){var u;e.account=n,e.lang=s;var l=null===(u=n.personalIdsList[0])||void 0===u?void 0:u.idTypeId;e.idTypeForAllowNeibouringCountries=["201411201909407900"].includes(l),e.forceSwissAddress=n.postpaidBillingGroup&&!e.idTypeForAllowNeibouringCountries,e.data={address:angular.copy(e.user.address),idDetails:angular.copy(e.user.idDetails),personalDetails:{title:e.user.title,firstName:e.user.firstName,lastName:e.user.lastName,emailAddress:e.user.emailAddress,dob:angular.copy(e.user.dob)}},e.isAccountOwner=n.isAccountOwner(),
e.submitFormAnalytics=function(e){d.get("Ayma-google-tag-manager-changes")&&i.dataLayerPush({event:"gtm visitor interaction",interaction_name:"form submit",form_name:"contact information",form_submit_result:e})},e.dataLayerErrorPush=function(e,t){d.get("Ayma-google-tag-manager-changes")&&i.dataLayerPush({event:"gtm visitor interaction",interaction_name:"form error",form_name:"Contact information",form_field:e,form_error:""===t?"field is empty":t})},e.emailIsInvalidTriggered=!1,e.postCodeIsInvalidTriggered=!1,e.streetNameIsInvalidTriggered=!1,e.streetNumberIsInvalidTriggered=!1,e.formDataTracking=function(t){d.get("Ayma-google-tag-manager-changes")&&(t.emailAddress.$valid&&e.emailIsInvalidTriggered&&(e.emailIsInvalidTriggered=!1),t.emailAddress.$valid||e.emailIsInvalidTriggered||(e.dataLayerErrorPush("emailAddress",""===t.emailAddress.$$lastCommittedViewValue?"":"Your email seems to be misspelled"),e.emailIsInvalidTriggered=!0),t.postCode.$valid&&e.postCodeIsInvalidTriggered&&(e.postCodeIsInvalidTriggered=!1),t.postCode.$valid||e.postCodeIsInvalidTriggered||(e.dataLayerErrorPush("postCode",""===t.emailAddress.$$lastCommittedViewValue?"":"A post code should be 4 numbers"),e.postCodeIsInvalidTriggered=!0),t.streetName.$valid&&e.streetNameIsInvalidTriggered&&(e.streetNameIsInvalidTriggered=!1),t.streetName.$valid||e.streetNameIsInvalidTriggered||(e.dataLayerErrorPush("streetName",""===t.streetName.$$lastCommittedViewValue?"":"The street name is invalid"),e.streetNameIsInvalidTriggered=!0),t.xxxxx.$valid&&e.streetNumberIsInvalidTriggered&&(e.streetNumberIsInvalidTriggered=!1),t.xxxxx.$valid||e.streetNumberIsInvalidTriggered||(e.dataLayerErrorPush("streetNumber",""===t.xxxxx.$$lastCommittedViewValue?"":"The street number is invalid"),e.streetNumberIsInvalidTriggered=!0))},e.submit=function(){if(!e.submitting){e.submitting=!0;var s={};e.data.address.country==e.user.address.country&&e.data.address.city==e.user.address.city&&e.data.address.city==e.user.address.city&&e.data.address.postCode==e.user.address.postCode&&e.data.address.streetName==e.user.address.streetName&&e.data.address.co==e.user.address.co&&e.data.address.streetNumber==e.user.address.streetNumber||(s.country=e.data.address.country,s.city=e.data.address.city,s.postCode=e.data.address.postCode,s.streetName=e.data.address.streetName,s.streetNumber=e.data.address.streetNumber||void 0,s.co=e.data.address.co||""),e.data.personalDetails.emailAddress!=e.user.emailAddress&&(s.email=e.data.personalDetails.emailAddress.toLowerCase()),Object.size(s)>0?(i.event("updateUserInfo","start"),e.user.updateInfo(s).then(function(s){s?(d.get("Ayma-google-tag-manager-changes")||i.event("updateUserInfo","success"),e.submitFormAnalytics("success"),t.add("saved","good"),c.agentLoggedIn?(r.updateExistingCustomer(),a(function(){e.submitting=!1,o.reload()},2e3)):n.refreshData(0,!0).then(function(){e.submitting=!1,o.reload()})):(e.submitFormAnalytics("fail"),e.submitting=!1)})):e.submitting=!1}}}}}]),app.directive("vote",["Network","Storage","Notifications","Language","$rootScope","$timeout",function(e,t,n,o,i,r){return{transclude:!0,templateUrl:"/scripts/directives/vote/dirc_vote.html",scope:{text:"=",supportArticleKey:"=",topicKey:"="},link:function(a){var s="/"+o.data.current+"|"+a.supportArticleKey+"|"+a.topicKey;a.data=t.get(s)||{feedback:""},a.showFeedback=-1===a.data.value,a.isMobile=i.isMobile,a.rootScope=i,a.vote=function(i){a.submitting=!0,e.post("vote",{brand:window.brand,topicUrl:window.location.href,supportArticleKey:a.supportArticleKey,topicKey:a.topicKey,language:o.data.current,voteValue:i,feedback:a.data.feedback||void 0,id:a.data.id||void 0},2,!1,window.oldEshopBasePath,"text/plain",!0,!1).then(function(e){a.submitting=!1,e?(a.showFeedback=-1===i&&!a.data.feedback,a.data.value=i,a.data.id=e.id,r(function(){a.data.feedback=""},200),t.set(s,a.data),n.add("voteSuccess","good")):n.add("voteFailure","bad")})}}}}]),app.directive("voucherTopup",["Topup","Notifications","Analytics",function(e,t,n){return{templateUrl:"/scripts/directives/voucher-topup/dirc_voucher-topup.html",scope:{subscription:"=data",simpleMode:"=?"},link:function(o){o.doingVoucherTopup=!1,o.voucherCode="",o.doVoucherTopup=function(){o.doingVoucherTopup||(o.doingVoucherTopup=!0,e.doVoucherTopup(o.subscription,o.voucherCode).then(function(e){o.doingVoucherTopup=!1,e&&(n.fireGaInteraction("voucher submit",{voucher_code:o.voucherCode}),o.voucherCode="",t.add("addedVoucherTopup","good"),o.voucherTopupForm.$setPristine())}))}}}}]),app.directive("webcam",["Camera","$q","Popup","$sce","$timeout",function(e,t,n,o,i){return{templateUrl:"/scripts/directives/webcam/dirc_webcam.html",scope:{onImageConfirm:"&",webcamPicture:"&",onDeleteImage:"&",image:"=",onSkip:"=",onRestart:"=",allowRestart:"=",instructions:"=",documentType:"=",facingMode:"=",onCancel:"=",isVertical:"=",infoImage:"=?",helpVideo:"=?",helpContent:"=?",inlineScreenMode:"=?",newTargetFacingMode:"=?",blockScanning:"=?"},link:function(r){function a(){p.width=u.videoWidth,p.height=u.videoHeight,g.drawImage(u,0,0),window.requestAnimationFrame.call(window,a)}var s=document.createElement("canvas"),c=window.innerHeight>window.innerWidth?"vertical":"horizontal";s.height="vertical"===c?1920:1080,s.width="vertical"===c?1080:1920;var d=s.getContext("2d"),u=document.getElementById("video"),l=document.querySelector(".document-placement"),p=document.querySelector("#backup-canvas"),g=p.getContext("2d"),f=0;r.loading=!1,r.Camera=e,r.data={},r.$watch(function(){return window.innerHeight>window.innerWidth},function(){var e=window.innerHeight>window.innerWidth?"vertical":"horizontal";r.orientation&&r.orientation!==e&&r.orientationChange(e),r.orientation=e}),r.orientationChange=function(e){s.height="vertical"===e?1920:1080,s.width="vertical"===e?1080:1920,setTimeout(function(){return document.body.style.height="101%"},250),setTimeout(function(){return document.body.style.height=""},500)},r.infoPopup=new n("webcamInfoPopup","webcam-info-popup.html",{title:"webcamInfoPopupTitle",video:r.helpVideo,content:r.helpContent},{getVideoUrl:function(){return o.trustAsResourceUrl("https://www.youtube.com/embed/"+r.infoPopup.data.video+"?rel=0&amp;controls=0&amp;showinfo=0")}}),r.startCamera=function(t){r.loading=!0,e.startCamera(t).then(function(e){u.srcObject=r.stream=e}).catch(function(e){if(r.loading=!1,!e)return r.error="error_webcamTechnical";if(isIOS&&!isIOSSafari)return r.error="error_useSafari";switch(e.name){case"NotAllowedError":case"PermissionDeniedError":r.error="error_webcamNotAllowed";break;case"NotReadableError":case"NotFoundError":r.error="error_webcamBroken";break;case"notSupportedError":r.error="error_notSupported";break;default:r.error="error_webcamTechnical",throwSafe(e,"30-id")}}).then(function(){r.startedCamera=!0,i()})},r.imageConfirm=function(){r.onImageConfirm()()},u.onloadedmetadata=function(){r.loadedMetaData=!0,r.loading=!1,setTimeout(function(){u.removeAttribute("controls"),window.dontDoBackupCanvasThing||a()}),r.$digest()},r.takeGiff=function(){if(!r.takingGiff){var e=0,t=[];r.takingGiff=!0,r.loadingGiff=!0,loadScript("/assets/other/gif.js").then(function(){r.loadingGiff=!1;var n=setInterval(function(){r.captureGifFrame().then(function(e){return actualResizeImage(e,250)}).then(function(o){e+=1,t.push(o),e>=10&&(clearInterval(n),r.takingGiff=!1,r.loading=!0,r.$digest(),r.createGiff(t).then(function(e){r.webcamPicture&&r.webcamPicture()(e,"gif"),setTimeout(function(){r.loading=!1,r.$digest()},250)}))})},500)})}},r.createGiff=function(e){var n=document.querySelector("#giff-process-indicator");n&&(n.style.width="10%");var o=new GIFEncoder;o.setRepeat(0),o.setDelay(250),o.start();var i=getTempCanvas(),a=i.getContext("2d");i.width=e[0].width,i.height=e[0].height;for(var s in e)a.drawImage(e[s],0,0),o.addFrame(a);o.finish();var c=o.stream().getData(),d="data:image/gif;base64,"+encode64(c);return r.loading=!1,r.takingGiff=!1,t.resolve(d)},r.captureGifFrame=function(){var e=document.querySelector(".face-placement .oval");if(!e)return t.reject();var n=e.getBoundingClientRect(),o=document.querySelector("#video"),i=o.getBoundingClientRect(),r=(-i.left+n.left-20)*(o.videoWidth/o.clientWidth),a=(-i.top+n.top-20)*(o.videoHeight/o.clientHeight),s=(n.width+40)*(o.videoWidth/o.clientWidth),c=(n.height+40)*(o.videoHeight/o.clientHeight);return cropImage(u,Math.round(r),Math.round(a),Math.round(s),Math.round(c))},r.captureImage=function(){var e=window.innerHeight>window.innerWidth,n=document.querySelector("#video");if(!l||!n)return t.reject("No video or document placement element");var o=l.getBoundingClientRect(),i=n.getBoundingClientRect(),r=(-i.left+o.left)*(n.videoWidth/n.clientWidth),a=(-i.top+o.top)*(n.videoHeight/n.clientHeight),c=o.width*(n.videoWidth/n.clientWidth),p=o.height*(n.videoHeight/n.clientHeight);return cropImage(u,Math.round(r),Math.round(a),Math.round(c),Math.round(p)).then(function(t){var n=t.width,o=t.height;if(e&&o<s.height){var i=s.height/o;s.height=o,s.width/=i}else if(!e&&n<s.width){var r=s.width/n;s.width=n,s.height/=r}var a=0,c=0;if(e){a=n/(o/s.height)-s.width}else{c=o/(n/s.width)-s.height}d.drawImage(t,-a/2,-c/2,s.width+a,s.height+c)})},r.takePicture=function(e,t,n){r.takingPicture&&e||(r.webcamPicture&&(r.takingPicture=!0),f=setTimeout(function(){e&&(r.tries=0),r.tries+=1,r.webcamPicture&&r.captureImage().then(function(){resizeImage(s.toDataURL("image/jpeg"),1920,1080).then(function(e){r.webcamPicture()(e,"jpeg",n?1/0:r.tries,t).then(function(e){if(!r.isDestroyed){if(t)return setTimeout(function(){r.takingPicture=!1,r.$digest()});if(e&&e.retry)return r.takePicture();r.takingPicture=!1,r.$digest()}})})})},e?500:0))},r.deleteImage=function(){r.onDeleteImage&&r.onDeleteImage()(),r.loading=!1,d.clearRect(0,0,s.width,s.height)},r.fullScreenMode=function(){return!!e.mobileCamera&&!(r.inlineScreenMode&&e.mobileCamera)},r.$on("$destroy",function(){return r.stop()}),r.stop=function(){r.isDestroyed=!0,f&&clearTimeout(f),r.stream&&e.stopCamera(r.stream),u.srcObject=null},function(){r.loading=!0,r.orientation=window.innerHeight>window.innerWidth?"vertical":"horizontal",r.startCamera(r.facingMode),window.scrollTo(0,1),setTimeout(function(){window.scrollTo(0,1)},5e3)}()}}}]),app.directive("winCheckoutBasket",["$rootScope","$timeout",function(e,t){return{restrict:"E",templateUrl:"/scripts/directives/win-checkout-basket/dirc_win-checkout-basket.html",scope:{data2:"=?",prodInfo:"=?",canClose:"=?",originalTotalPriceMonthly:"=?",discountedTotalPriceMonthly:"=?",newNumber:"=?",activationFee:"=?"},link:function(n){n.rs=e,n.isOpen=!n.canClose,n.$watch("rs.isDesktop",function(e){n.canClose&&(n.isOpen=!1)}),n.close=function(){n.isClosing=!0,n.canClose&&(n.isOpen=!1),t(function(){return n.isClosing=!1},200)}}}}]),app.directive("webcamPermissionsInstructions",function(){return{templateUrl:"/scripts/directives/webcam-permissions-instructions/dirc_webcam-permissions-instructions.html",scope:{},link:function(e){e.reload=function(){window.onbeforeunload=function(){},window.location.reload()},isChrome?e.browser="chrome":isSafari&&(e.browser="safari")}}}),app.directive("winOrderData",["$rootScope","Storage","Files",function(e,t,n){return{restrict:"A",link:function(o){e.noFooter=!0,o.orderData=t.get(e.gigaStorageKey,24)||{},o.downloadPoa=function(){return n.saveAs2(o.orderData.poaPdfData,"POA_porting.pdf")},o.$on("$destroy",function(){e.noFooter=!1})}}}]);
window.angular.module('templates').run(['$templateCache', function($templateCache) {$templateCache.put('/scripts/directives/account-deals/dirc_account-deals.html','<div class="row offer-list"><div ng-repeat="deal in deals | limitTo : 2" offer type="{{deal.offerTag}}" replace-data="deal" class="offer double primary-offer"></div></div><div ng-if="deals.length > 2" class="center"><br><br><a c-route="/account/deals" class="button outline big headless bottomless" translate="viewMoreDeals"></a></div><loading-button ng-if="loading" loading="true" type-button="true"></loading-button>');
$templateCache.put('/scripts/directives/active-options/dirc_active-options.html','<div ng-repeat="data in subscription.activeOptionDataList | onlyCountry : onlyCountry : subscription.id" class="option-box" ng-class="{thirds: thirds}"><div class="subscription-option-box"><div class="subscription-option-header"><div class="badge red" ng-show="!data.subDetails[0].willRenew && data.option.autoRenews" translate="activeOptionExpiring"></div><strong bind-html-compile="data.option.getText(\'title\') | translate"></strong></div><div class="subscription-bundle-box" ng-repeat="bundle in data.subDetails | filterOption : data.option.url == \'day_speed\' : data.option.url == \'day_speed\' as bundles"><bundle data="bundle"></bundle></div><div ng-show="data.option.url == \'day_speed\' && !bundles.length" class="activate-with-usage-box" translate="willActivateWithUsage"></div><div class="subscription-option-footer"><span ng-hide="data.option.url == \'day_speed\'"><span ng-show="data.subDetails[0].willRenew" translate="renewsPre"></span> <span ng-show="!data.subDetails[0].willRenew" translate="expiresPre"></span> {{data.subDetails[0].endDate | date : \'dd.MM.yyyy\'}} </span><button ng-click="showOptionPopup(data.option)" class="button small marginless" translate="detailsButton"></button></div></div></div>');
$templateCache.put('/scripts/directives/active-options-prepaid/dirc_active-options-prepaid.html','<div class="option-box" ng-repeat="data in subscription.activeOptionDataList" ng-class="{thirds: thirds, \'multiple-bundles\': data.subDetails.length > 1}" ng-if="!roamingOnly || data.option.category === \'ROAMING\'"><div class="subscription-option-box" ng-click="showOptionPopup(data.option)"><div class="subscription-option-header"><div class="badge red" ng-show="!data.subDetails[0].willRenew && data.option.autoRenews" translate="activeOptionExpiring"></div><div class="badge" ng-show="data.subDetails[0].status == \'WAITING\'" translate="activeOptionWaiting"></div><div><strong bind-html-compile="data.option.getText(\'title\') | translate"></strong> <span class="option-is-active" translate="optionIsActiveText"></span></div></div><div><div class="subscription-bundle-box" ng-repeat="bundle in data.subDetails | filterOption as optionBundles" ng-hide="!bundle.initialBalance && !bundle.remainingBalance && optionBundles.length == 1 && data.option.extraBundles.length"><bundle data="bundle"></bundle></div></div><div class="subscription-bundle-box" ng-repeat="bundle in data.option.extraBundles"><bundle data="bundle"></bundle></div><div ng-show="data.subDetails[0].notEnoughBalance" translate="willActivateWithTopup" class="activate-with-usage-box"></div><div class="subscription-option-footer"><span ng-if="data.subDetails[0].willRenew && (data.subDetails[0].status == \'WAITING\' || data.subDetails[0].status == \'INSTALLING\') && !data.subDetails[0].notEnoughBalance"><i icon="refresh" class="icon-inline"></i><span translate="activatesPre"></span> {{(data.subDetails[0].optionrExpiryDate || data.subDetails[0].optionrRenewalDate) | date : \'dd.MM.yyyy\'}}</span> <span ng-if="data.subDetails[0].willRenew && data.subDetails[0].status != \'WAITING\' && data.subDetails[0].status != \'INSTALLING\'"><i icon="refresh" class="icon-inline"></i><span translate="renewsPre"></span> {{(data.subDetails[0].optionrExpiryDate || data.subDetails[0].optionrRenewalDate) | date : \'dd.MM.yyyy\'}}</span> <span ng-if="!data.subDetails[0].willRenew"><span translate="expiresPre"></span> {{(data.subDetails[0].optionrExpiryDate || data.subDetails[0].optionrRenewalDate) | date : \'dd.MM.yyyy\'}}</span> <span class="details" translate="detailsButton"></span></div></div></div><div class="option-box" ng-repeat="option in subscription.oneTimeOptions | bundleFilter track by $index" ng-class="{thirds: thirds}"><div class="subscription-option-box"><div class="subscription-option-header"><strong translate="bundle_{{option.bundleName | urlify}}_text"></strong> <span class="option-is-active" ng-if="option.status !== \'NON_RECURRING\'" translate="optionIsActiveText"></span> <span class="option-is-active" ng-if="option.status === \'NON_RECURRING\'" translate="optionIsDisabled"></span></div><div class="subscription-bundle-box"><bundle data="option"></bundle></div><div class="subscription-option-footer"><span><span translate="expiresPre"></span> {{option.endDate | date : \'dd.MM.yyyy\'}}</span></div></div></div>');
$templateCache.put('/scripts/directives/add-option-item-list-view/dirc_add-option-item-list-view.html','<div class="add-option-list"><div class="add-option-list-item" ng-repeat="option in options | orderBy : \'-priority\' track by option.id" ng-click="prodInfo.options[option.id] == option && removeOption(option) || selectOption(option)" ng-class="{selected: prodInfo.options[option.id] == option}"><div class="add-option-list-item-name"><h3 bind-html-compile="option.getText(\'title\') | translate"></h3></div><div class="add-option-list-item-price"><span class="crossed-out" ng-show="option.normalCost != option.cost">{{option.normalCost | customCurrency}}</span><div ng-if="option.newCustomerCost != option.cost"><span class="text-purple">{{option.newCustomerCost | customCurrency}} / <span class="test-purple" translate="duration_{{option.duration}}"></span></span><br><span class="text-purple" translate="onlyNewCustomer"></span></div><h3>{{ option.cost | customCurrency }} / <span translate="{{\'duration_\' + option.duration}}"></span></h3><button type="button" class="add-option-list-item-button" ng-click="showPopup(option); $event.stopPropagation();"><i icon="fontawesome/info-circle" class="size-2 fill-silver"></i></button></div><div class="add-option-list-item-selected" ng-class="{\'selected\': prodInfo.options[option.id] == option}"><i icon="check" class="size-1 fill-white center"></i></div></div></div>');
$templateCache.put('/scripts/directives/add-options/dirc_add-options.html','<div ng-repeat="category in categories" ng-show="filteredOptions.length"><h2 class="capitalize" translate="cat{{category | uppercase}}"></h2><div ng-repeat="option in rateplan.options | objToArray | filter : {category: category} | buyableOnSignup | orderBy : \'priority\' as filteredOptions track by option.id"></div><add-option-item-list-view data="filteredOptions" class="always-inline" prod-info="prodInfo" pop="optionInfoPopup"></add-option-item-list-view><br><br></div>');
$templateCache.put('/scripts/directives/add-recurring-topup/dirc_add-recurring-topup.html','<div class="info-message" translate="cantAddRecurringTopupWithoutSavedCreditCard" ng-show="!(Topup.activeCreditCards() | objSize) && !(Topup.data.creditCards | objSize) && !Topup.gettingCreditCards"></div><div class="info-message" translate="cantAddRecurringTopupWithoutActiveSavedCreditCard" ng-show="!(Topup.activeCreditCards() | objSize) && (Topup.data.creditCards | objSize) && !Topup.gettingCreditCards"></div><div class="add-auto-topup" ng-if="(Topup.activeCreditCards() | objSize) && !addingRecurringTopup && !Topup.gettingCreditCards"><div class="topup-types" ng-if="!data.balanceTopupDisabled"><div class="topup-type" ng-click="data.type = \'balance\'" ng-class="{active: data.type === \'balance\'}"><i icon="balance-topup"></i> <span translate="autoTopupBalance"></span></div><div class="topup-type" ng-click="data.type = \'monthly\'" ng-class="{active: data.type === \'monthly\'}"><i icon="monthly-topup"></i> <span translate="autoTopupMonthly"></span></div></div><h3 translate="autoTopupAmount"></h3><div class="topup-values"><div class="topup-value" ng-click="data.amount = 10" ng-class="{active: data.amount === 10}">{{10 | customCurrency : true}}</div><div class="topup-value" ng-click="data.amount = 20" ng-class="{active: data.amount === 20}">{{20 | customCurrency : true}}</div><div class="topup-value" ng-click="data.amount = 50" ng-class="{active: data.amount === 50}">{{50 | customCurrency : true}}</div><div class="topup-value" ng-click="data.amount = 100" ng-class="{active: data.amount === 100}">{{100 | customCurrency : true}}</div></div><div class="threshold-balance" ng-if="data.type === \'balance\'"><h3 translate="whenBalanceFallsBelow"></h3><select ng-model="data.threshold" class="dont-auto-resize"><option ng-repeat="val in Topup.lowestAmounts" ng-value="val">{{val | customCurrency}}</option></select></div><div class="day-of-month" ng-if="data.type === \'monthly\'"><h3 translate="dayOfMonth"></h3><div class="day-of-month-selection"><div class="day-item" ng-repeat="day in daysInMonth" ng-click="data.day = day" ng-class="{active: data.day == day}"><span>{{day}}</span></div></div></div><div class="add-auto-topup-payment-method"><h3 translate="paymentUsingTitle"></h3><select ng-model="data.cc"><option ng-repeat="cc in data.ccs" ng-value="cc">[{{cc.type}}] {{cc.maskedCCdNumber | creditCard}}</option></select><div class="payment-select"><div class="cc-logo" ng-if="data.cc.type"><img ng-src="/assets/images/credit-cards/{{data.cc.type}}.jpg" class="credit-card-icon" alt=""></div><div class="cc-details"><b>{{data.cc.maskedCCdNumber | creditCard}}</b><br><span>{{data.cc.expiry}}</span></div><i icon="arrow-down"></i></div></div><div class="auto-topup-summary"><i icon="circle-info"></i> <span bind-html-compile="\'autoTopupBalanceSummary\' | translate | replaceText : \'AMOUNT\' : data.amount | replaceText : \'THRESHOLD\' : data.threshold" ng-if="data.type === \'balance\'"></span> <span bind-html-compile="\'autoTopupMonthlySummary\' | translate | replaceText : \'AMOUNT\' : data.amount | replaceText : \'DAY\' : data.day" ng-if="data.type === \'monthly\'"></span></div><div class="checkout-page-footer simple small-button"><button class="big red full-width" ng-click="addRecurringTopup()" translate="addAutoTopupConfirm"></button></div></div><loading-button loading="true" ng-if="addingRecurringTopup || Topup.gettingCreditCards"></loading-button>');
$templateCache.put('/scripts/directives/address-checker/dirc_address-checker.html','<div><div ng-transclude class="transcluded-fieldset-content"></div><div class="formrow"><div class="formfield field-33" ng-if="!forceSwissAddress"><select ng-model="address.country" data-testid="address-checker-country{{::context}}" id="34" ng-disabled="!editable" autocomplete="nope" ng-if="winMode" name="nationality" ng-required="isRequired"><option ng-repeat="country in winCountries | orderBy : \'orderIndex\' track by $index" value="{{::country.isocode}}">{{::country.value}}</option></select> <select id="34" ng-model="address.country" data-testid="address-checker-country{{::context}}" ng-disabled="!editable" ng-if="!winMode" ng-required="isRequired"><option ng-repeat="country in forceNeighbouringCountry ? neighbouringCountries : countries" value="{{::country.id}}">{{::country.name}}</option></select> <label for="34"><i icon="fontawesome/flag" class="icon-inline"></i> <span translate="countryField"></span> <span ng-show="!isRequired">(<span translate="optionalField"></span>)</span></label></div><div class="formfield field-33"><input type="tel" ng-if="forceSwissAddress || address.country == switzerlandId" ng-init="setupModelControllers()" id="postCode" data-testid="address-checker-postcode{{::context}}" name="postCode" ng-model="address.postCode" ng-change="check && checkAddress()" ng-disabled="!editable || (!address.country && forceSwissAddress)" minlength="4" ng-blur="outoffocusAnalyticsEvent(\'postCode\')" maxlength="4" pattern="[0-9]{4}" validation-type="swiss-postcode" autocomplete="off" ng-required="isRequired"> <input type="text" ng-if="!forceSwissAddress && address.country != switzerlandId" ng-init="setupModelControllers()" id="postCode" data-testid="address-checker-postcode{{::context}}" name="postCode" ng-model="address.postCode" ng-change="check && checkAddress()" ng-disabled="!editable || (!address.country && forceSwissAddress)" minlength="3" maxlength="6" validation-type="non-swiss-postcode" autocomplete="off" ng-required="isRequired"> <label for="postCode"><i icon="fontawesome/home" class="icon-inline"></i><span translate="postCodeField"></span> <span ng-show="!isRequired">(<span translate="optionalField"></span>)</span></label><div class="loading" ng-show="address.findingPostCode"></div></div><div ng-if="editable && (forceSwissAddress || address.country == switzerlandId) && !fallbackMode && (address.foundCities.length > 1 || rs.isDesktop)" class="formfield field-{{::forceSwissAddress ? 66: 33}}"><select name="cityDropdown" id="cityDropdown" ng-change="check && checkAddress()" ng-model="address.city" data-testid="address-checker-city{{::context}}" ng-disabled="!address.foundCities || address.foundCities.length < 2 || !editable" ng-required="isRequired"><option ng-repeat="city in address.foundCities">{{city}}</option></select> <label for="cityDropdown"><i icon="fontawesome/home" class="icon-inline"></i><span translate="cityField"></span> <span ng-show="!isRequired">(<span translate="optionalField"></span>)</span></label></div><div ng-if="!editable || (!forceSwissAddress && address.country != switzerlandId) || fallbackMode" class="formfield field-{{::forceSwissAddress ? 66: 33}}"><input name="cityInput" id="cityInput" data-testid="address-checker-city{{::context}}" type="text" ng-model="address.city" ng-disabled="(forceSwissAddress && !fallbackMode) || !address.country || !editable" ng-required="!forceSwissAddress"> <label for="cityInput"><i icon="fontawesome/home" class="icon-inline"></i> <span translate="cityField"></span></label></div></div><div class="formrow animate-open" ng-show="show || !animateAddress || address.city"><div class="formfield field-66 forced"><input id="streetName" name="streetName" data-testid="address-checker-street{{::context}}" ng-model="address.streetName" ng-change="check && checkAddress()" ng-disabled="!editable || !address.city" ng-focus="activeFieldId = 0; address.autoStreetName = false;" ng-blur="address.foundStreetNames.length && select(address, \'streetName\', \'foundStreetNames\', address.hoverStreetName, true); setActiveFieldToNull(0); address.findingStreetName && (address.autoStreetName = true); outoffocusAnalyticsEvent(\'streetName\')" minlength="1" ng-pattern="allowedStreetCharsRegex" validation-type="street-name" autocomplete="off" type="text" ng-required="isRequired"> <label for="streetName"><i icon="fontawesome/home" class="icon-inline"></i><span translate="streetNameField"></span> <span ng-show="!isRequired">(<span translate="optionalField"></span>)</span></label><div class="loading" ng-show="address.findingStreetName"></div><i class="icon-exclamation-triangle address-warning" translate-attr="{title : \'addressWarningMessage\'}" ng-show="address.warnStreetName"></i><div class="autocomplete-box" ng-show="activeFieldId == 0 && address.foundStreetNames.length"><ul class="autocomplete-list"><li class="autocomplete-list-item" ng-repeat="streetName in address.foundStreetNames track by $index" ng-mousedown="select(address, \'streetName\', \'foundStreetNames\', $index);" ng-class="{hover: address.hoverStreetName == $index}">{{streetName}}</li></ul></div></div><div class="formfield field-33 forced" ng-show="!address.noHouseNumbers"><input id="streetNumber" data-testid="address-checker-street-number{{::context}}" ng-model="address.streetNumber" ng-change="check && checkAddress(true)" ng-click="fillHouseNumber()" ng-focus="activeFieldId = 1; address.autoStreetNumber = false" ng-blur="address.foundStreetNumbers.length && select(address, \'streetNumber\', \'foundStreetNumbers\', address.hoverStreetNumber, true); setActiveFieldToNull(1); address.findingStreetNumber && (address.autoStreetNumber = true); outoffocusAnalyticsEvent(\'streetNumber\')" ng-disabled="!editable || !address.streetName || address.findingStreetName || !address.city" maxlength="6" autocomplete="off" type="search" name="xxxxx" validation-type="street-number" ng-required="isRequired && !address.noHouseNumbers"> <label for="streetNumber"><span ng-if="rs.isDesktop"><i icon="fontawesome/home" class="icon-inline"></i><span translate="streetNumberField"></span> <span ng-show="!isRequired">(<span translate="optionalField"></span>)</span> </span><span ng-if="!rs.isDesktop"><span translate="streetNumberFieldShort"></span></span></label><div class="loading" ng-show="address.findingStreetNumber || address.checkingIfStreetNasNumbers"></div><i class="icon-exclamation-triangle address-warning" translate-attr="{title : \'addressWarningMessage\'}" ng-show="address.warnStreetNumber"></i><div class="autocomplete-box" ng-if="activeFieldId == 1 && address.foundStreetNumbers.length" data-testid="address-checker-street-number-autocomplete"><ul class="autocomplete-list"><li class="autocomplete-list-item" ng-repeat="streetNumber in address.foundStreetNumbers track by $index" ng-mousedown="select(address, \'streetNumber\', \'foundStreetNumbers\', $index)" ng-class="{hover: address.hoverStreetNumber == $index}">{{streetNumber}}</li></ul></div></div><div class="formfield field-33 disabled no-house-numbers" ng-if="address.noHouseNumbers"><strong translate="noHouseNumbersAvailable"></strong></div></div><div ng-if="(address.warnStreetNumber || address.warnStreetName) && editable && !dontWarnInvalid"><div class="formrow"><div class="formfield"><input id="confirmCorrectAddress" type="checkbox" ng-model="address.confirmCorrectAddress" ng-disabled="!editable" ng-required="isRequired"> <label for="confirmCorrectAddress" id="confirmCorrectAddressLabel"><span translate="confirmCorrectAddressField"></span></label></div></div></div><div class="formrow animate-open last" ng-if="showCo" ng-show="!animateAddress || address.city"><div class="formfield field-100"><input name="test" autocomplete="false" id="coField" data-testid="address-checker-co{{::context}}" ng-model="address.co" ng-blur="changeCo();outoffocusAnalyticsEvent(\'nameOnPostbox\')" ng-disabled="!editable" maxlength="60" type="search" validation-type="co" pattern="{{::allowedCharsRegex}}" ng-required="requireCo && editable && isRequired"> <label for="coField"><i icon="fontawesome/user" class="icon-inline"></i><span translate="coField"></span> <span ng-show="!requireCo">(<span translate="optionalField"></span>)</span></label></div></div></div>');
$templateCache.put('/scripts/directives/address-preview/dirc_address-preview.html','<div class="address-preview" data-testid="address-preview"><div class="data"><div>{{addressData.streetName}} {{addressData.streetNumber}}</div><div>{{addressData.postCode}} {{addressData.city}}</div><div>{{addressData.country | countryLookup}}</div><div ng-if="addressData.co">({{addressData.co}})</div></div><div class="link"><a href ng-class="{disabled: !editable}" ng-click="editable && editDataPopup.show()" ng-show="allowEdit"><i icon="fontawesome/pencil" class="icon-inline"></i> <span translate="addressEditButton"></span></a></div></div>');
$templateCache.put('/scripts/directives/all-products/dirc_all-products.html','<div class="mobile-home-selection" ng-if="showSelectionMode"><div class="mobile-home-selection-mobile" ng-click="data.selectedMode = \'mobile\'" ng-class="{selected: data.selectedMode === \'mobile\'}"><i icon="fontawesome/mobile" class="center-verticaly-flex"></i> <span>Mobile</span></div><div ng-if="homeProducts.length > 0" class="mobile-home-selection-mobile" ng-click="data.selectedMode = \'home\'" ng-class="{selected: data.selectedMode === \'home\'}"><i icon="fontawesome/home" class="center-verticaly-flex"></i> <span>Home</span></div><div ng-if="tvProducts.length > 0" class="mobile-home-selection-mobile" ng-click="data.selectedMode = \'tv\'" ng-class="{selected: data.selectedMode === \'tv\'}"><i icon="fontawesome/tv" class="center-verticaly-flex"></i> <span>TV</span></div></div><tabs ng-if="tabData && !loading && data.selectedMode === \'mobile\'" data="tabData" tab-key="\'id\'" tab-title="\'id\'" options="tabOptions"><div ng-if="tabOptions.activeTab == \'postpaid\' && !lightProductsOnly"><products product-type="mobile" invert-channel-filter="false" link-extension="linkExtension" output-data="output.mobile" type="tabOptions.activeTab" custom-display-order="customDisplayOrder"></products><products product-type="internet" hide-home-products="true" invert-channel-filter="false" link-extension="linkExtension" output-data="output.internet" type="tabOptions.activeTab" custom-display-order="customDisplayOrder"></products></div><div ng-if="tabOptions.activeTab == \'postpaid\' && lightProductsOnly"><products prod-data="lightProducts"></products></div><div ng-if="tabOptions.activeTab == \'prepaid\'"><products invert-channel-filter="false" link-extension="linkExtension" type="tabOptions.activeTab"></products></div><br><br></tabs><div ng-if="!loading && data.selectedMode === \'home\'"><br><br><p class="center" translate="posHomeProductsText"></p><br><fiber-linecheck pos-mode="true" hide-oto-search="!fiberAvailable" on-done="onLineCheckDone"></fiber-linecheck><div ng-if="fiberLinecheckResults"><div class="linecheck-pos-results"><div class="{{fiberLinecheckResults.messages[\'hfc\']}}" ng-if="hfcAvailable"><b>Cable</b> <span translate="{{fiberLinecheckResults.messages[\'hfc\']}}LineCheckmobilePosHFC"></span></div><div class="{{fiberLinecheckResults.messages[\'fiber\']}}" ng-if="fiberAvailable"><b>Fiber</b> <span translate="{{fiberLinecheckResults.messages[\'fiber\']}}LineCheckmobilePosFiber"></span></div><div class="{{fiberLinecheckResults.messages[\'4G\']}}" ng-if="fourGAvailable"><b>4G</b> <span translate="{{fiberLinecheckResults.messages[\'4G\']}}LineCheckmobilePos4G"></span></div><div class="{{fiberLinecheckResults.messages[\'5G\']}}" ng-if="fiveGAvailable"><b>5G</b> <span translate="{{fiberLinecheckResults.messages[\'5G\']}}LineCheckmobilePos5G"></span></div></div><products prod-data="homeProducts" from="\'pos\'" cancenter="true" manual-order="true" invert-channel-filter="false" link-extension="linkExtension" output-data="output.internet" type="\'postpaid\'" custom-display-order="customDisplayOrder" disabled-products="homeDisabledProducts"></products></div></div><div ng-if="!loading && data.selectedMode === \'tv\'"><br><br><div><products cancenter="true" ng-if="!hasTVSubscription" product-type="tv"></products><div class="warning-message" ng-if="hasTVSubscription" translate="posCustomerAlreadyHasTV"></div></div></div><loading-button loading="true" ng-if="loading"></loading-button>');
$templateCache.put('/scripts/directives/all-recurring-topups/dirc_all-recurring-topups.html','<recurring-topups ng-repeat="subscription in account.subscriptions track by subscription.id" data="subscription" credit-card-id="creditCardId" hide-title="true"></recurring-topups><span ng-show="noRecurringTopups" class="no-cc-topups" translate="noRecurringTopupsOnThisCreditCard"></span>');
$templateCache.put('/scripts/directives/alternative-user/dirc_alternative-user.html','<div ng-if="!data.use" class="alternative-user-link" ng-class="{disabled: !editable}"><a href ng-click="data.use = true" class="legal" translate="{{productUrl == \'yallo_home_4g\' || productUrl == \'yallo_home_5g\' ? \'alternativeUserFieldHomeInternet\' : \'alternativeUserField\'}}"></a></div><div ng-if="data.use"><p class="form-section-title has-space-above has-close-button"><span translate="checkoutSectionSimUserDetails"></span> <i icon="close" class="size-1" ng-click="data.use = false"></i></p><personal-details data="data" editable="editable" choose-lang="true" block-email="true" autocomplete="false" allow-any-date="true" contact-number="false"></personal-details></div>');
$templateCache.put('/scripts/directives/app-date/dirc_app-date.html','<div class="app-date-container" ng-class="{inline: inline}"><div><input ng-model="dateString" pattern="[0-9]{1,2}[.]{1}[0-9]{1,2}[.][0-9]{2}(?:\\d{2})?" ng-change="changeDateString()" ng-required="required" autocomplete="{{autoComplete ? autoComplete.trim() : \'off\'}}" type="{{autoComplete === false ? \'search\' : (isIOS ? \'text\' : \'tel\')}}" id="dt-{{::$id}}" data-testid="dt-{{::$id}}" class="inner-date-input" validation-type="date" ng-disabled="!editable" ng-focus="options.showHelp = true; focus[0] = true;" ng-blur="hideHelp(); focus[0] = false;" ng-class="{selected: options.showHelp}" name ng-model-options="{allowInvalid: true}"> <label for="dt-{{::$id}}"><i icon="fontawesome/calendar" class="icon-inline"></i><span ng-transclude></span> <span translate="mmddyyyy"></span></label></div><div class="app-date-entry-help" ng-if="options.showHelp"><div class="app-date-entry-help-field"><select id="days-{{::$id}}" ng-model="data.day" dont-show-errors="true" ng-focus="options.showHelp = true; focus[1] = true;" ng-change="focusMain()" ng-blur="hideHelp(); focus[1] = false; " ng-attr-tabindex="{{focus[0] ? -1 : \'\'}}"><option ng-repeat="day in ::days track by $index" ng-value="::day">{{::day}}</option></select> <label for="days-{{::$id}}" translate="dayField"></label></div><div class="app-date-entry-help-field"><select id="months-{{::$id}}" ng-model="data.month" dont-show-errors="true" ng-focus="options.showHelp = true; focus[2] = true;" ng-change="focusMain()" ng-blur="hideHelp(); focus[2] = false; focusMain()" ng-attr-tabindex="{{focus[0] ? -1 : \'\'}}"><option ng-repeat="month in ::months track by $index" ng-value="::month" translate="month{{month - 1}}"></option></select> <label for="months-{{::$id}}" translate="monthField"></label></div><div class="app-date-entry-help-field"><select id="years-{{::$id}}" ng-model="data.year" dont-show-errors="true" ng-focus="options.showHelp = true; focus[3] = true;" ng-change="focusMain()" ng-blur="hideHelp(); focus[3] = false; focusMain()" ng-attr-tabindex="{{focus[0] ? -1 : \'\'}}"><option ng-repeat="year in ::years track by $index" ng-value="::year">{{::year}}</option></select> <label for="years-{{::$id}}" translate="yearField"></label></div></div></div>');
$templateCache.put('/scripts/directives/app-footer/dirc_app-footer.html','<div class="app-footer" ng-if="state.customerLoggedIn && !state.agentLoggedIn"><ul><li is-active="/account" class="home" ng-click="interaction(\'subscription\')"><a c-route="/account?id={{getCurrentSub().id}}"><i icon="nav-home"></i></a></li><li ng-if="account.hasMobileSubs" is-active="?/account/history" class="history" ng-click="interaction(\'usage\')"><a c-route="/account/history/{{getCurrentSub().id}}"><i icon="nav-usage"></i></a></li><li is-active="?/account/bills" class="bills" ng-show="account.postpaidBillingGroup" ng-click="interaction(\'bill\')"><a c-route="/account/bills"><i icon="nav-bills"></i></a></li><li is-active="?/account/deals" ng-if="!account.isLightCustomer || account.getSubscriptionsByType(\'prepaid\', true).length" class="deals" ng-click="interaction(\'deal\')"><a c-route="/account/deals?id={{getCurrentSub().id}}"><i icon="nav-deals"></i><div class="new-badge" ng-if="currentSub.newDealCount"><span>{{currentSub.newDealCount}}</span></div></a></li><li is-active="?/account/settings" class="settings" ng-click="interaction(\'settings\')"><a c-route="/account/settings?id={{getCurrentSub().id}}"><i icon="nav-setting"></i></a></li></ul></div>');
$templateCache.put('/scripts/directives/auto-country-selector/dirc_auto-country-selector.html','<div class="auto-country-selector"><div class="country-flag" ng-if="selectedCountry"><img ng-src="/assets/images/flags/{{selectedCountry}}.png" alt=""></div><div class="formrow"><div class="formfield"><select id="18" ng-model="selectedCountry"><option ng-if="showEmptyFirstEntry"></option><option ng-repeat="country in countries" ng-value="country.id">{{country[Language.data.current]}}</option></select> <label for="18" translate="{{(selectedCountry ? \'countryField\' : \'selectCountry\')}}"></label></div></div></div>');
$templateCache.put('/scripts/directives/big-toggler/dirc_big-toggler.html','<div class="big-toggler" ng-class="{\'is-opened\': data.isToggled}"><a href ng-click="toggle()" class="toggle-handler"><div class="toggle-title"><div class="icon-holder"><i icon="fontawesome/{{icon}}" class="icon-inline fill-primary"></i></div><span ng-if="!dontTranslateTitle" class="toggle-title-text" translate="{{::title}}"></span> <span ng-if="dontTranslateTitle" class="toggle-title-text">{{::title}}</span><div class="toggle-icon"></div></div></a><div class="toggle-content" ng-transclude ng-show="data.isToggled"></div></div>');
$templateCache.put('/scripts/directives/bill-switcher/dirc_bill-switcher.html','<div class="bill-switcher" mobile-sideways-scroll inner-el=".bill" start-pos="{{selectedBillIndex}}" always="true"><div class="bill-row row"><div class="bill" ng-repeat="bill in bills"><div class="bill-dates"><div translate="usageBillsPre"></div><div ng-if="sameMonth(bill)"><span translate="month{{bill.startDate.getMonth()}}"></span> <span ng-if="date.getFullYear() !== bill.startDate.getFullYear()">{{bill.endDate.getFullYear()}}</span></div><div ng-if="!sameMonth(bill)"><span translate="monthShort{{bill.startDate.getMonth()}}"></span> <span ng-if="date.getFullYear() !== bill.startDate.getFullYear()">{{bill.endDate.getFullYear()}}</span></div><div ng-if="!sameMonth(bill)"><span translate="monthShort{{bill.endDate.getMonth()}}"></span> <span ng-if="date.getFullYear() !== bill.endDate.getFullYear()">{{bill.endDate.getFullYear()}}</span></div></div></div></div></div>');
$templateCache.put('/scripts/directives/billing-settings/dirc_billing-settings.html','<div class="warning-message manual-margin" ng-show="account.onHold.active" translate="cantChangeSettingsOnHold"></div><div class="sliceblock"><div class="warning-message" ng-if="!account.isAccountOwner()">{{\'onlyOwnerCanChangeSomeSettings\' | translate | replaceText : \'OWNER\' : account.getAccountOwnerName()}}</div><div class="slice-item no-border" ng-class="{disabled: settingsDisabled()}"><div class="slice-left"><label for="paperBilling" id="paperBillingField"><span class="item-name" translate="paperBillingField"></span> <span class="item-description" translate="paperBillingDescription"></span></label></div><div class="slice-right valign-middle"><div class="toggle-container"><input type="checkbox" class="toggle" id="paperBilling" ng-model="billingMethod" ng-change="tryAndSaveBillingMethod()" ng-true-value="\'paper\'" ng-false-value="\'email\'" ng-disabled="settingsDisabled()"> <label for="paperBilling"></label></div></div></div></div><hr><loading-button ng-if="billingMethod !== \'ebpp\' && gettingBills" loading="true"></loading-button><div class="ebill-info ebill-not-active" ng-if="billingMethod !== \'ebpp\'"><h3 class="ebill-status-title"><span translate="ebillStatusLabel"></span> <span translate="ebillStatusNotActive" class="ebill-status-not-active"></span></h3><p translate="ebillNotActiveDescription"></p><div class="warning-message" translate="ebillNoBillsAvailable" ng-if="!bill && !gettingBills"></div><div class="warning-message" translate="needEmailForEbill" ng-if="!account.accountOwner.emailAddress"></div><div ng-if="bill"><div class="ebill-activation-ids"><div class="ebill-customer-number"><h3>{{account.postpaidBillingGroup.name}}</h3><p translate="billCustomerNumber"></p></div><div class="ebill-bill-number"><h3>{{bill.invoiceNumber}}</h3><p translate="billInvoiceNumber"></p></div></div><ol><li translate="ebillSetupStep1"></li><li translate="ebillSetupStep2"></li><li translate="ebillSetupStep3"></li></ol></div><a href="https://www.ebill.ch/{{language.data.current}}/home/pay-invoices/find-bank.html" class="ebill-info-link text-petrol" target="_blank" translate="ebillSetupLink"></a></div><div class="ebill-info ebill-not-active" ng-if="billingMethod === \'ebpp\'"><h3 class="ebill-status-title"><span translate="ebillStatusLabel"></span> <span translate="ebillStatusActive" class="ebill-status-active"></span></h3><p translate="ebillActiveDescription" class="bottomless"></p><a ng-href="{{\'eOffLink\' | translate}}" class="ebill-info-link text-petrol" target="_blank" translate="ebillDeactivateLink"></a></div>');
$templateCache.put('/scripts/directives/bills-graph/dirc_bills-graph.html','<div class="bills-graph"><div class="extra-graph-spacing" ng-style="{\'height\': ((140 / maxVal * extraSpacing) + 12) + \'px\'}"></div><div class="graph-area"><div class="lines"><div class="line" ng-repeat="line in lines track by $index"></div></div><div class="bill-columns"><div class="bill-column" ng-repeat="month in months.slice(rs.isMobile ? -6 : -12) track by $index"><div class="bill-column-bar" ng-style="{height: (100 / maxVal * month.amount) + \'%\'}" ng-class="{paid: month.bill.paid || month.skipped, overdue: month.bill.overdue && !month.bill.paid}"><div class="bill-column-paid-bar" ng-if="month.bill.invoicePaymentDetail.openAmount && !bill.paid" ng-style="{\'height\': 100 - (100 / month.amount * month.bill.invoicePaymentDetail.openAmount) + \'%\'}"></div><i ng-if="month.skipped || month.bill.paid || (month.bill.overdue && !month.bill.paid)" icon="{{month.bill.paid || month.skipped ? \'check\' : (month.bill.overdue && !month.bill.paid ? \'close\' : \'\')}}"></i></div></div></div></div><div class="bill-dates" ng-class="{\'many-bills\': months.length > 5}"><div class="bill-date" ng-repeat="month in months.slice(rs.isMobile ? -6 : -12) track by $index" ng-class="{paid: month.bill.paid, overdue: month.bill.overdue && !month.bill.paid}"><strong ng-if="!month.skipped">{{month.amount > 0 ? month.amount : 0 | currency : \'\'}}</strong><div ng-if="month.skipped"><i icon="icon-skip"></i></div><span translate="monthShort{{month.date.getMonth()}}"></span></div></div></div>');
$templateCache.put('/scripts/directives/bundle/dirc_bundle.html','<div class="bundle"><div class="bundle-content"><span class="bundle-desc" ng-if="isTranslated()"><span translate="bundle_{{::bundle.bundleName | urlify}}_text" translate-compile></span></span><div ng-if="showBundleBar()"><div class="bar-outer" ng-show="::bundle.initialBalance && !bundle.isUnlimited"><div class="bar-inner" ng-style="{\'width\': (100 / bundle.initialBalance * bundle.remainingBalance) + \'%\'}"></div></div><div class="bundle-meta" ng-show="(bundle.initialBalance || bundle.remainingBalance) && !bundle.isUnlimited"><div ng-show="::bundle.type == \'BYTES\'"><b>{{bundle.remainingBalance | bytes}}</b> <span translate="left"></span><span ng-show="bundle.initialBalance"> <span translate="of"></span> {{::bundle.initialBalance | bytes}}</span></div><div ng-show="::bundle.type == \'MIN\'"><b>{{(bundle.remainingBalance / 60) | number : 0}}</b> <span translate="min"></span> <span translate="left"></span><span ng-show="bundle.initialBalance"> <span translate="of"></span> {{::(bundle.initialBalance / 60) | number : 0}}</span> <span translate="min"></span></div><div ng-show="::bundle.type == \'SMS\'"><b>{{(bundle.remainingBalance) | number : 0}}</b> <span translate="sms"></span> <span translate="left"></span><span ng-show="bundle.initialBalance"> <span translate="of"></span> {{::(bundle.initialBalance) | number : 0}}</span> <span translate="sms"></span></div></div><div class="bundle-meta" ng-show="::bundle.isUnlimited"><b translate="circleUnlimited"></b></div></div></div></div>');
$templateCache.put('/scripts/directives/callback-form/dirc_callback-form.html','<form name="callbackForm" ng-submit="callbackForm.$valid && submit(data.phoneNumber, data.customerName)" ng-if="!loading" novalidate><div class="formrow"><div class="formfield field-50 forced"><input type="text" id="customerName" name="customerName" ng-model="data.customerName" autocomplete="name" autofocus> <label for="customerName" translate="nameField"></label></div></div><div class="formrow"><div class="formfield field-90 forced no-right-margin"><phone-number id="contactNumber" name="contactNumber" ng-model="data.phoneNumber" required label="\'contactNumberField\' | translate"></div><div class="formfield field-10 forced"><button class="headless bottomless full-width icon-only next-to-input petrol"><i icon="fontawesome/arrow-right" class="icon-inline fill-white"></i></button></div></div></form><loading-button ng-if="loading" loading="true"></loading-button>');
$templateCache.put('/scripts/directives/cc-bill-payment/dirc_cc-bill-payment.html','<button ng-click="startPayment()" ng-if="!loading" translate="doCCPaymentButton" class="petrol"></button><loading-button loading="true" ng-if="loading"></loading-button>');
$templateCache.put('/scripts/directives/channel-list/dirc_channel-list.html','<img ng-repeat="channel in channels track by $index" ng-src="/assets/images/partners/{{::channel}}_de_logo.png" translate-attr="::{alt:\'alt_\' + channel + \'_logo\'}" ng-if="!loading && !hideChannel(channel)" class="channel-list-logo">');
$templateCache.put('/scripts/directives/chat/dirc_chat.html','<div class="info-message bottomless" ng-if="chat.noAgentAvailable"><span translate="noAgentsAvailableMessage"></span></div><div class="chatNameForm"><div class="buttons"><loading-button ng-if="chat.agentShouldBeAvailable.lebara_sales && chat.isSalesContext" loading="chat.agentAvailabilityLoadingStatus[\'lebara_sales\']" class="small headless" ng-click="chat.startChat(\'lebara_sales\')"><i icon="fontawesome/life-ring" class="icon-inline fill-white"></i>&nbsp;<span translate="salesChatSubmitButton"></span></loading-button></div><p translate="chatStartLegalText" class="bottomless"></p></div>');
$templateCache.put('/scripts/directives/chat-confirm/dirc_chat-confirm.html','');
$templateCache.put('/scripts/directives/chat-invite/dirc_chat-invite.html','<div class="chat-invite" ng-if="show()" click-outside="rs.isMobile && close(true)" ng-class="{closing : closing}"><div class="header"><span translate="chatInviteTitle"></span> <i icon="fontawesome/close" class="size-1 fill-white" ng-click="close()"></i></div><div class="body"><h3 translate="chatInviteDescription"></h3><button class="bottomless full-width" ng-click="startChat()"><span translate="chatInviteCTA"></span> <i icon="fontawesome/comments" ng-show="!loading" class="icon-inline fill-white"></i> &nbsp;<span class="inline-loader white" ng-show="loading"></span></button></div></div>');
$templateCache.put('/scripts/directives/chat-invite-retention/dirc_chat-invite-retention.html','<div class="chat-invite" ng-if="show()" click-outside="rs.isMobile && close(true)" ng-class="{closing : closing}"><div class="header"><span translate="retentionChatInviteTitle"></span> <i icon="fontawesome/close" class="size-1 fill-white" ng-click="close()"></i></div><div class="body"><h3 translate="retentionChatInviteDescription"></h3><button class="bottomless full-width" ng-click="startChat()"><span translate="chatInviteCTA"></span> <i icon="fontawesome/comments" ng-show="!loading" class="icon-inline fill-white"></i> &nbsp;<span class="inline-loader white" ng-show="loading"></span></button></div></div>');
$templateCache.put('/scripts/directives/checkout-order-overview/dirc_checkout-order-overview.html','<div class="checkout-order-overview" ng-class="{\'no-bottom\': checkout.orderData.countDownDate}"><div class="product-details" ng-class="{\'has-promotion\': prodInfo.promotion}"><h1 translate="{{prodInfo.product.getText(\'title\', prodInfo.promotion)}}"></h1><span ng-show="::prodInfo.config.type == \'postpaid\'"><span ng-if="prodInfo.product.productType !== \'tv\'" bind-html-compile="(prodInfo.config.lockinLength === 0 ? \'cdLong0\' : \'cdLongnon0\') | translate | replaceText : \'XX\' : prodInfo.config.lockinLength"></span> <span ng-if="prodInfo.product.productType === \'tv\'" bind-html-compile="(prodInfo.config.lockinLength === 0 ? \'cdLong0TV\' : \'cdLongnon0TV\') | translate | replaceText : \'XX\' : prodInfo.config.lockinLength"></span><br></span><h3 ng-if="prodInfo.promotion" class="text-red headless bottomless">{{prodInfo.promotion.title}}</h3><h3 class="text-red" translate="activationOffered" ng-show="rs.activationFeesOffered[prodInfo.config.url] && prodInfo.config.type == \'postpaid\' && !state.agentLoggedIn && !extension && !prodInfo.config.isFiber"></h3><h3 class="text-red" translate="activationOfferedFiber" ng-show="rs.activationFeesOffered[prodInfo.config.url] && prodInfo.config.type == \'postpaid\' && !state.agentLoggedIn && !extension && prodInfo.config.isFiber"></h3><p ng-if="prodInfo.product.loadedExtraOnlineText && !state.agentLoggedIn">{{prodInfo.product.extraOnlineText}}</p><p ng-if="prodInfo.config.type === \'prepaid\'" translate="{{prodInfo.product.getText(\'shortdescription\', prodInfo.promotion, loginType)}}" translate-compile></p><p translate="{{prodInfo.product.getText(\'shortdescription\', prodInfo.promotion, loginType)}}" ng-if="!extension && prodInfo.config.type === \'postpaid\'" translate-compile></p><div class="product-content upgrade" ng-if="prodInfo.config.type === \'postpaid\' && extension"><div ng-show="hideDataForHFC"><div class="product-contents-box"><div class="label" translate="InternetSpeedForHFC"></div><div class="new"><div class="product-contents-main" bind-html-compile="prodInfo.product.getText(\'speed\', promotion) | translate"></div></div></div><div class="product-contents-box" ng-if="subscription.isTV && subscription.isHFC"><div class="label" translate="TVForHFC"></div><div class="new"><div class="product-contents-main" bind-html-compile="prodInfo.product.getText(\'tv\', promotion) | translate"></div></div></div><div ng-if="!hideDataForHFC" class="product-contents-box"><div class="label" translate="ModemForHFC"></div><div class="new"><div class="product-contents-main" bind-html-compile="prodInfo.product.getText(\'modem\', promotion) | translate"></div></div></div></div><div ng-if="!hideDataForHFC"><h4 translate="productCompareInternetTitle"></h4><div class="product-contents-box"><div class="label" translate="compareProductData2"></div><div class="new" bind-html-compile="prodInfo.product.getText(\'data2\', promotion) | translate"></div></div><div class="product-contents-box"><div class="label" translate="compareProductRoamingData2"></div><div class="new" bind-html-compile="prodInfo.product.getText(\'roamingdata2\', promotion) | translate"></div></div><h4 translate="productCompareCallingTitle"></h4><div class="product-contents-box"><div class="label" translate="compareProductCallingCh2"></div><div class="new" bind-html-compile="prodInfo.product.getText(\'chcalling2\', promotion) | translate"></div></div><div class="product-contents-box"><div class="label" translate="compareProductCallingEu2"></div><div class="new" bind-html-compile="prodInfo.product.getText(\'eucalling2\', promotion) | translate"></div></div><div class="product-contents-box"><div class="label" translate="compareProductRoamingCalling2"></div><div class="new" bind-html-compile="prodInfo.product.getText(\'roamingcalling2\', promotion) | translate"></div></div><h4 translate="productCompareSmsTitle"></h4><div class="product-contents-box"><div class="label" translate="compareProductCallingSms2"></div><div class="new" bind-html-compile="prodInfo.product.getText(\'sms2\', promotion) | translate"></div></div><div class="product-contents-box"><div class="label" translate="compareProductEuSms2"></div><div class="new" bind-html-compile="prodInfo.product.getText(\'eusms2\', promotion) | translate"></div></div><div class="product-contents-box"><div class="label" translate="compareProductRoamingSms2"></div><div class="new" bind-html-compile="prodInfo.product.getText(\'roamingsms2\', promotion) | translate"></div></div></div></div></div><div ng-show="prodInfo.device" class="plus-device-icon"><i icon="fontawesome/plus" class="size-1 center fill-silver"></i></div><div class="device-details" ng-if="prodInfo.device"><div class="device-inter"><div class="device-image"><img ng-src="{{::prodInfo.device.images[0]}}" alt=""></div><div class="device-title"><h4>{{prodInfo.device.title}} <span ng-if="prodInfo.device.capacity">{{prodInfo.device.capacity | deviceCapacity}} {{prodInfo.device.color.name}}</span></h4></div></div></div><div ng-hide="hideMsisdn" class="plus-device-icon"><i icon="fontawesome/plus" class="size-1 center fill-silver"></i></div><div ng-hide="hideMsisdn" class="msisdn-details"><b><span translate="msisdnPre"></span>:</b> {{prodInfo.subscriptionDetails.msisdn}}</div></div><div class="order-overview-countdown" ng-if="checkout.orderData.countDownDate"><h2 translate="checkoutCountDownTitle"></h2><count-down count-down-date="checkout.orderData.countDownDate" class="small-countdown" hide-days="false" show-labels="true"></count-down></div>');
$templateCache.put('/scripts/directives/checkout-page-footer/dirc_checkout-page-footer-simple.html','<div class="checkout-page-footer simple"><div class="checkout-page-footer-content"><button data-testid="start-checkout-button" ng-if="!loading" type="{{disableButton ? \'button\' : \'submit\'}}" class="bottomless headless full-width rounded-cta red" ng-class="{disabled: disableButton || loading}" ng-click="click && click()" id="startCheckoutButton"><span translate="{{buttonText}}"></span></button><loading-button loading="true" class="small bottomless headless" ng-if="loading" type-button="true"></loading-button></div></div>');
$templateCache.put('/scripts/directives/checkout-page-footer/dirc_checkout-page-footer.html','<div class="checkout-page-footer" click-outside="showPricingDetails = false" data-testid="checkout-page-footer"><div class="checkout-page-footer-content"><div class="hide-on-mobile" data-testid="checkout-page-footer-product"><b translate="{{prodInfo.product.getText(\'title\', prodInfo.promotion)}}"></b> <span ng-show="::!extension && prodInfo.config.type == \'postpaid\'">{{prodInfo.config.lockinLength}} <span translate="contractDurationShortPost"></span></span> <span ng-show="::extension && prodInfo.config.type == \'postpaid\'"><span translate="contractDurationPre"></span> {{prodInfo.config.lockinLength}} <span translate="contractDurationShortPost"></span><br></span><div ng-if="prodInfo.promotion" class="promotion"><span>{{prodInfo.promotion.title}}</span></div></div><div class="pricing"><div class="recurring-cost" data-testid="recurring-costs"><strong data-testid="recurring-costs-amount">{{(isSelfRegistration ? 0 : pricingInfo.totalrecurringCost - pricingInfo.totalRecurringDiscount) | customCurrency : true}}</strong> <span translate="recurringCostShort"></span></div><button type="button" data-testid="pricing-details-button" ng-class="lang" ng-click="showPricingDetails = !showPricingDetails" class="pricing-details-button"><i icon="fontawesome/angle-{{showPricingDetails ? \'up\' : \'down\'}}" class="size-1"></i><span translate="checkoutDetailedPricingButton"></span></button></div><div class="cta" ng-if="!hideButton"><button translate="{{buttonText}}" data-testid="start-checkout-button" class="no-margin full-width" ng-if="!loading" ng-class="{disabled: disableButton}" ng-click="click && click()" id="startCheckoutButton"></button><loading-button ng-if="loading" class="small bottomless headless" loading="true" type-button="true"><span translate="{{buttonText}}"></span></loading-button></div></div><div ng-slide-down="showPricingDetails" duration=".2"><span ng-show="!extension && prodInfo.config.type == \'postpaid\' && rs.isMobile"><span translate="contractDurationField"></span>: {{prodInfo.config.lockinLength}} <span translate="contractDurationShortPost"></span><br></span><div class="text-red" ng-if="prodInfo.promotion && !prodInfo.promotion.recurringDiscount && rs.isMobile"><span>{{prodInfo.promotion.title}}</span></div><final-pricing-info class="checkout-mode" config="orderData.config" device-option="prodInfo.device.deviceOption" payment-method="\'creditCard\'" fiber-line-check="orderData.fiberLineCheck" output-data="pricingInfo"></final-pricing-info></div></div>');
$templateCache.put('/scripts/directives/checkout-steps/dirc_checkout-steps.html','<section class="screenblock headless bottomless show-overflow" data-testid="checkout-steps"><div class="content"><div class="checkout-steps" ng-hide="hideSteps(steps)"><div data-testid="checkout-step" class="checkout-step" ng-class="{clickable: allowChange}" ng-if="extension" ng-click="allowChange && !checkout.disableFields && CheckoutSteps.goToStep(-1)"><span>1</span></div><div data-testid="checkout-step" data-teststate="{{ selectedStep == $index ? \'selected\' : \'none\' }}" class="checkout-step" ng-repeat="step in getSteps() as steps track by $index" ng-click="allowChange && !checkout.disableFields && checkout.orderData.stepHistory.indexOf(step) >= 0 && CheckoutSteps.goToStep(step)" ng-class="{selected: selectedStep == $index, done: checkout.orderData.stepHistory.indexOf(step) >= 0 && selectedStep != $index, clickable: allowChange}"><span>{{extension ? $index + 2 : $index + 1}}</span></div></div></div></section><section class="screenblock headless bottomless checkout-loggedin-user-section" ng-class="{ fiber: prodInfo.config.isFiber }" id="topSectionSteps" ng-show="state.customerLoggedIn && !state.agentLoggedIn && !extension"><div class="content"><div ng-show="state.customerLoggedIn" class="checkout-loggedin-user" ng-class="{disabled: checkout.disableFields}"><span translate="checkoutExistingCustomerWelcome"></span> {{account.accountOwner.firstName}} {{account.accountOwner.lastName}} <a ng-click="notSamePerson()">(<span translate="notExistingCustomerPre"></span> {{account.accountOwner.firstName}}?)</a></div></div></section><section class="screenblock headless bottomless checkout-loggedin-user-section" ng-if="showBasketDetails && !extension"><div class="content very-small" click-outside="data.showPricingDetails = false"><div class="checkout-show-details" ng-click="data.showPricingDetails = true"><i icon="circle-info-outline"></i> <span translate="checkoutInfoLink"></span></div><div class="final-pricing-hider" ng-class="{open: data.showPricingDetails}"><div class="final-pricing-hide-content"><span ng-if="prodInfo.product.productType !== \'tv\'" bind-html-compile="(prodInfo.config.lockinLength === 0 ? \'cdLong0\' : \'cdLongnon0\') | translate | replaceText : \'XX\' : prodInfo.config.lockinLength"></span> <span ng-if="prodInfo.product.productType === \'tv\'" bind-html-compile="(prodInfo.config.lockinLength === 0 ? \'cdLong0TV\' : \'cdLongnon0TV\') | translate | replaceText : \'XX\' : prodInfo.config.lockinLength"></span><final-pricing-info class="checkout-mode" config="orderData.config" device-option="prodInfo.device.deviceOption" payment-method="\'creditCard\'" fiber-line-check="orderData.fiberLineCheck" output-data="pricingInfo"></final-pricing-info></div><div class="close-button" ng-click="data.showPricingDetails = false"><i icon="fontawesome/times" class="size-1"></i></div></div></div></section><section class="screenblock headless bottomless checkout-loggedin-user-section checkout-countdown-mobile-container" ng-if="checkout.orderData.countDownDate && !extension && rs.isMobile"><div class="content center"><br><b translate="checkoutCountDownTitle" class="bottomless"></b><count-down count-down-date="checkout.orderData.countDownDate" class="center small-countdown-checkout-mobile no-margin headless" hide-days="false" show-labels="true"></count-down></div></section>');
$templateCache.put('/scripts/directives/collapsible-section/dirc_collapsible-section.html','<div ng-class="{open: showDetails}"><div ng-click="toggle()" class="title"><i icon="arrow-down" class="arrow-toggle"></i> <span translate="{{title}}"></span></div><div class="details"><ng-transclude></ng-transclude></div></div>');
$templateCache.put('/scripts/directives/comparison-table/dirc_comparison-table.html','');
$templateCache.put('/scripts/directives/configurator/dirc_configurator.html','<small-product-card ng-hide="extension" product-data="prodInfo"></small-product-card><div class="product-configurator-second"><div ng-if="!theConfig.subscription && state.agentLoggedIn && !prodInfo.config.isFiber && prodInfo.product.productType !== \'tv\'"><configure-msisdn id="msisdnselection_content" the-config="theConfig" editable="editable" prod-info="prodInfo"></configure-msisdn></div><configure-subscription ng-if="theConfig.subscription || theConfig.preToPostSubscription" ng-hide="true"></configure-subscription><configure-boxes ng-hide="prodInfo.config.type == \'prepaid\' || addDeviceMode"></configure-boxes><div ng-if="prodInfo.config.type == \'postpaid\'"><div ng-if="devicesAvailable()"><h2 class="configure-section-title" ng-hide="prodInfo.config.needsDevice(theConfig.subscription) || hideTitleForObChannel" id="configure-devices" translate="configureDevicesTitle"></h2><configure-devices></configure-devices></div></div><div><br><br><configure-options></configure-options></div></div>');
$templateCache.put('/scripts/directives/configure-boxes/dirc_configure-boxes.html','<div ng-if="extension"><br><br><h2 translate="configureBoxesTitle"></h2></div><div class="configure-boxes"><div class="configure-box" data-testid="configure-box" ng-repeat="box in boxes | orderBy : \'config.lockinLength\' track by $index" ng-class="{selected: selectedBox == box, \'allow-devices\': box.allowDevices}" ng-click="selectBox(box)"><div class="configure-box-lockin-length"><div><h3>{{::box.config.lockinLength}}</h3><span translate="configureBoxDurationPost"></span></div></div><div class="configure-box-image" ng-if="::box.config.url !== \'yallo_home_max_fiber\' && !box.allowDevices && (!box.promotion.promotionDevices.length || box.config.url !== \'yallo_home_4g\')" ng-style="::{\'background-image\': \'url(/assets/images/default_lockin.jpg)\'}"></div><div class="configure-box-image" ng-if="::box.config.url !== \'yallo_home_max_fiber\' && box.allowDevices && box.config.tags[0] == \'mobile\'" ng-style="::{\'background-image\': \'url(/assets/images/default_lockin_with_device.jpg)\'}"></div><div class="configure-box-image" ng-if="::box.config.url !== \'yallo_home_max_fiber\' && (box.allowDevices || box.promotion.promotionDevices.length) && box.config.tags[0] == \'internet\'" ng-style="::{\'background-image\': \'url(/assets/images/default_lockin_\' + (box.config.url == \'yallo_home_4g\' ? \'box\' : box.config.url == \'yallo_home_5g\' ? \'5gbox\' : \'ipad\') + \'.jpg)\'}"></div><div class="configure-box-image" ng-if="::box.config.url === \'yallo_home_max_fiber\'" ng-style="::{\'background-image\': \'url(/assets/images/default_fiber.jpg)\'}"></div><div class="configure-box-promotion"><h3 ng-if="box.promotion">{{box.promotion.title}}</h3><div ng-if="::!box.promotion"><span ng-if="box.config.lockinLength == 0 && !box.allowDevices" translate="noMinLockinlengthMobile"></span> <span ng-if="box.allowDevices && box.config.tags[0] == \'mobile\'" translate="subscriptionOptionallyWithPhone"></span> <span ng-if="(!box.allowDevices || box.config.tags[0] == \'internet\') && (box.config.lockinLength != 0 || box.allowDevices)" translate="boxNoPromotion"></span></div><div ng-if="::box.promotion"><ul class="promotion-ul"><li ng-if="::box.recurringDiscount && box.promotion.discountDuration == 1">{{\'xDiscountForYMonth\' | translate | replaceText : \'X\' : (box.recurringDiscount | customCurrency) | replaceText : \'Y\' : box.promotion.discountDuration}}</li><li ng-if="::box.recurringDiscount && box.promotion.discountDuration != 1 && box.promotion.discountDuration <= 100">{{\'xDiscountForYMonths\' | translate | replaceText : \'X\' : (box.recurringDiscount | customCurrency) | replaceText : \'Y\' : box.promotion.discountDuration}}</li><li ng-if="::box.recurringDiscount && box.promotion.discountDuration != 1 && box.promotion.discountDuration > 100">{{\'xDiscountForever\' | translate | replaceText : \'X\' : (box.recurringDiscount | customCurrency)}}</li><li ng-if="box.config.lockinLength == 0 && !box.allowDevices" translate="noMinLockinlengthMobile"></li><li ng-if="::box.waiveActivationFee" translate="noActivationFee"></li><li ng-if="box.allowDevices && box.config.tags[0] == \'mobile\'" translate="subscriptionOptionallyWithPhone"></li></ul><a href ng-click="showPromotionPopup(box.promotion); $event.stopPropagation();" translate="boxPromotionDetails"></a></div></div><div class="configure-box-button"><div class="configure-box-pricing"><div class="recurring-pricing"><span ng-if="::box.recurringDiscount && !box.promotion.dontCrossOutPrice" class="crossed-out">{{box.recurringCost | customCurrency}}</span> <span ng-if="::!box.recurringDiscount && box.waiveActivationFee">&nbsp;</span><h3>{{box.recurringCost - (box.promotion.dontCrossOutPrice ? 0 : box.recurringDiscount) | customCurrency}}</h3><span translate="recurringCostShort"></span></div></div></div></div></div>');
$templateCache.put('/scripts/directives/configure-devices/dirc_configure-devices.html','<div ng-if="state.agentLoggedIn && !agent.data.rights.FORCE_SHIPMENT && prodInfo.device && !products.posWillShipOrder(prodInfo, agent)"><div class="imei-field"><div class="formrow"><div class="formfield field-100 device-imei-field"><input type="text" minlength="15" maxlength="15" pattern="[0-9]*" class="focus-first" ng-model="prodInfo.device.imei" validation-type="imei" autocomplete="off" check-imei id="imeiField" required> <label for="imeiField" translate="deviceImei"></label><input-info><span translate="imeiInfo"></span></input-info></div></div></div></div><div class="warning-message" ng-if="deviceGroupData.selectedDeviceGroup.selectedDevice.deliveryDelayed"><span translate="deviceDeliveryDelayMessage"></span></div><div class="row small" ng-if="account.canAddDevice(prodInfo.config) && !account.checkingCanAddDevice && !notVisible && (!theConfig.subscription || theConfig.subscription.canAddDevice().result)"><div class="product-configurator-selection" ng-if="!prodInfo.config.needsDevice(theConfig.subscription)" ng-hide="addDeviceMode"><a class="product-configurator-option empty" ng-class="{selected: !prodInfo.device}" ng-click="selectNoDevice()"><div class="badge left" translate="selectedBadge"></div><h3 class="option-title" translate="noDevice"></h3></a></div><div class="product-configurator-selection" ng-repeat="group in deviceGroups | highlightedDevices : prodInfo.highlightedDevices : prodInfo.showOnlyHighlightedDevices | orderBy : \'-priority\'"><div class="product-configurator-option" id="device_{{group.url}}" ng-class="{selected: deviceGroupData.selectedDeviceGroup == group}" ng-click="getDevicePrice(group).deviceOptionId && selectDeviceGroup(group)"><div class="badge left" translate="selectedBadge"></div><div class="option-flex-container"><div class="option-image" ng-if="group.selectedDevice.images[0]" ng-style="::{\'background-image\': \'url(\' + group.selectedDevice.images[0] + \')\'}"></div><h3 class="option-title">{{group.name}}</h3></div><div class="device-colors"><div ng-repeat="color in getColors(group)" class="device-color" ng-class="{selected: group.selectedDevice.color.url === color.url}" ng-click="selectColor(group, color)" ng-style="{\'background\': color.colorCode}" ng-attr-title="{{color.name}}"></div></div><div class="device-capacities"><div ng-repeat="capacity in getCapacities(group)" class="device-capacity" ng-class="{selected: group.selectedDevice.capacity === capacity}" ng-click="selectCapacity(group, capacity)">{{capacity | deviceCapacity}}</div></div><div class="device-price-container" ng-if="::getDevicePrice(group).deviceOptionId"><div class="device-price-box"><i icon="fontawesome/credit-card" class="icon-inline fill-silver"></i> <b>{{getDevicePrice(group).upfrontCost | customCurrency}}</b> <span class="legal">(<span translate="upfrontCost"></span>)</span></div><div class="device-price-box"><i icon="fontawesome/file-text" class="icon-inline fill-silver"></i> <b ng-class="{\'text-red\': getPriceBeforeDiscount(group, group.selectedDevice) && !getDevicePrice(group).upfrontCost}">{{getDevicePrice(group).recurringCost | customCurrency}}</b> <span ng-if="getPriceBeforeDiscount(group, group.selectedDevice) && !getDevicePrice(group).upfrontCost" class="crossed-out"><b>{{getPriceBeforeDiscount(group, group.selectedDevice)}}</b></span> <span class="legal">(<span translate="deviceDurationPre"></span> {{getDevicePrice(group).recurringDuration}} <span translate="deviceDurationPost"></span>)</span></div></div><loading-button type-button="true" loading="true" ng-if="!getDevicePrice(group).loaded"></loading-button><div class="info-message" ng-if="getDevicePrice(group).loaded && !getDevicePrice(group).deviceOptionId"><i icon="fontawesome/info-circle" class="icon-inline"></i> <b translate="notAvailable"></b></div></div><button type="button" class="device-info-button" ng-click="showDevicePopup(group.selectedDevice)"><i icon="fontawesome/info" class="fill-white size-1"></i></button></div></div><div class="center" ng-if="prodInfo.highlightedDevices.length"><button type="button" ng-click="prodInfo.showOnlyHighlightedDevices = !prodInfo.showOnlyHighlightedDevices"><span ng-if="prodInfo.showOnlyHighlightedDevices" translate="showMoreDevices"></span> <span ng-if="!prodInfo.showOnlyHighlightedDevices" translate="hideMoreDevices"></span></button></div><div ng-if="account.canAddDevice(prodInfo.config) && !account.checkingCanAddDevice && !devicesAvailable()"><div class="info-message" translate="noDevicesAvailableForSubscriptionText"></div></div><div ng-if="account.checkingCanAddDevice"><loading-button loading="true" type-button="true"></loading-button></div><div ng-if="!account.canAddDevice(prodInfo.config) && !account.checkingCanAddDevice && !hideBoxForObChannel"><div class="info-message"><span translate="notAllowedDevice"></span><div ng-if="account.creditCheckData.manualCcAllowed"><br><a href="/pos/existing-customer/manual-credit-check" translate="manualCreditCheckBoxText" class="bottomless headless button"></a></div></div></div><div class="price-details" ng-if="::!(state.agentLoggedIn || state.customerLoggedIn)"><div class="price-detail-item"><i icon="fontawesome/credit-card" class="icon-inline fill-silver"></i><span class="legal" translate="upfrontDescriptionLegal"></span></div><div class="price-detail-item"><i icon="fontawesome/file-text" class="icon-inline fill-silver"></i><span class="legal" translate="recurringDescriptionLegal"></span></div></div>');
$templateCache.put('/scripts/directives/configure-msisdn/dirc_configure-msisdn.html','<div ng-if="((state.agentLoggedIn && !agent.data.rights.FORCE_SHIPMENT && !posWillShipOrder()) || selfRegistration)"><br><div class="formrow" ng-if="prodInfo.simType === \'PHYSICAL\'"><div class="formfield field-{{showIccidScanButton() && \'90\' || \'100\'}} forced no-margin"><input type="tel" validation-type="iccid" data-testid="config-msisdn-iccid" minlength="20" maxlength="20" name="iccidField" ng-disabled="!editable" pattern="8941[0-9]*" ng-model="subscriptionDetails.iccid" ng-model-options="{ allowInvalid: true }" check-iccid product-id="{{getProductId()}}" ng-change="subscriptionDetails.validIccid = false" iccid-result="iccidResult" id="iccidField" class="focus-first" input-disable-keys="13" autocomplete="off" onkeypress="return 13!=event.keyCode" required> <label for="iccidField" translate="iccidField"></label><div class="loading" ng-if="checkingIccid"></div><input-info ng-hide="checkingIccid"><span translate="iccidInfo"></span></input-info></div><div class="formfield field-10 forced no-margin" ng-if="showIccidScanButton()"><button type="button" name="button" class="headless bottomless full-width icon-only next-to-input petrol" translate-attr="{title: \'scanIccidTitle\'}" ng-click="startScan()"><i icon="fontawesome/camera" class="fill-white icon-inline"></i></button></div></div><div class="scanner-container" ng-class="rs.orientation" ng-if="scannerOptions.show && !barcodeIosFix"><button type="button" name="button" ng-click="stopScanningIccid()"><i icon="fontawesome/times" class="fill-white size-1"></i></button><scanner default-error="iccidScanError" scan-data="scannerOptions" mode="\'iccid\'" ng-hide="scannerOptions.error"></scanner><div class="barcode-box" ng-if="!scannerOptions.loading"><i class="fa fa-barcode"></i></div><loading-button ng-if="scannerOptions.loading" loading="true"></loading-button></div><div class="scanner-container2" ng-class="rs.orientation" ng-if="scannerOptions.show && barcodeIosFix "><button type="button" name="button" ng-click="stopScanningIccid()"><i icon="fontawesome/times" class="fill-white size-1"></i></button><scanner default-error="iccidScanError" scan-data="scannerOptions" mode="\'iccid\'" ng-hide="scannerOptions.error"></scanner><div class="barcode-box" ng-if="!scannerOptions.loading"><i class="fa fa-barcode"></i></div><loading-button ng-if="scannerOptions.loading" loading="true"></loading-button></div><div ng-if="scannerOptions.error" translate="{{scannerOptions.error}}" class="warning-message bottomless"></div><div ng-if="scanMsisdn && subscriptionDetails.iccid && subscriptionDetails.validIccid"><br><div class="formrow"><div class="formfield field-{{showIccidScanButton() && \'90\' || \'100\'}} forced no-margin"><input type="tel" ng-model="scannedMsisdn" validation-type="msisdn" ng-disabled="!editable" check-msisdn msisdn-result="msisdnResult" iccid="{{subscriptionDetails.iccid}}" minlength="10" maxlength="10" pattern="07[0-9]{8}" id="scannedMsisdn" onkeypress="return 13!=event.keyCode" required> <label for="scannedMsisdn" translate="scanMsisdnField"></label></div><div class="formfield field-10 forced no-margin" ng-if="showIccidScanButton()"><button type="button" name="button" class="headless bottomless full-width icon-only next-to-input" translate-attr="{title:\'scanMsisdnTitle\'}" ng-click="msisdnScannerOptions.show = true"><i icon="fontawesome/camera" class="fill-white icon-inline"></i></button></div></div><div class="scanner-container" ng-if="msisdnScannerOptions.show"><button type="button" name="button" ng-click="stopScanningMsisdn()" ng-hide="msisdnScannerOptions.error"><i icon="fontawesome/times" class="fill-white size-1"></i></button><scanner default-error="msisdnScanError" scan-data="msisdnScannerOptions" mode="\'msisdn\'" ng-hide="msisdnScannerOptions.error"></scanner><div class="barcode-box" ng-if="!msisdnScannerOptions.loading"><i class="fa fa-barcode"></i></div><loading-button ng-if="msisdnScannerOptions.loading" loading="true"></loading-button><div ng-if="msisdnScannerOptions.error" class="warning-message bottomless" translate="{{msisdnScannerOptions.error}}"></div></div></div><div ng-if="theConfig.invalidProduct" class="warning-message bottomless"><i icon="fontawesome/exclamation-triangle" class="icon-inline"></i> <span translate="invalidProductForIccid"></span></div></div><div ng-if="state.agentLoggedIn"><div ng-if="prodInfo.config.type == \'prepaid\'"><br><input type="checkbox" ng-model="prodInfo.prepaidDevice" id="prepaidDevice"> <label for="prepaidDevice" translate="prepaidDeviceLabel"></label></div><div class="imei-field" ng-if="prodInfo.prepaidDevice"><div class="formrow"><div class="formfield field-100"><input type="text" minlength="15" maxlength="15" pattern="[0-9]*" ng-model="prodInfo.prepaidImei" autocomplete="off" validation-type="imei" check-imei id="imeiField" required> <label for="imeiField" translate="deviceImei"></label><input-info><span translate="imeiInfo"></span></input-info></div></div></div></div><div ng-if="checkShowMsisdnSection()"><div ng-if="subscriptionDetails.newMsisdn.msisdn && (!subscriptionDetails.forceMsisdn || correctBundledSim)"><div class="formrow" ng-hide="selfRegistration"><div class="formfield auto-width"><input type="radio" ng-model="data.subscriptionType" id="msisdnTypeNew" data-testid="msisdn-type-new" ng-change="changeSubscriptionType(\'newMsisdn\')" ng-disabled="!editable" value="newMsisdn" required> <label for="msisdnTypeNew" translate="newMsisdnButtonShort" data-testid="msisdn-type-new-label"></label></div><div class="formfield auto-width"><input type="radio" ng-model="data.subscriptionType" id="msisdnTypePorting" data-testid="msisdn-type-porting" ng-change="changeSubscriptionType(\'porting\')" ng-disabled="!editable" value="porting" required> <label for="msisdnTypePorting" id="msisdnTypePortingLabel" translate="keepMsisdnButtonShort" data-testid="msisdn-type-porting-label"></label></div></div><hr class="big"><div ng-if="subscriptionDetails.subscriptionType == \'newMsisdn\'" class="new-msisdn-container"><div class="sim-card-image"><img src="/assets/images/icons/sim-card.svg"></div><div class="formrow align-top"><div class="formfield headless"><div><span translate="newMsisdnPre"></span>:</div><div class="inline-new-msisdn-info"><b>{{subscriptionDetails.newMsisdn.msisdn}}</b> <a href data-testid="edit-msisdn-button" ng-click="toggleMsisdns()" ng-hide="subscriptionDetails.showMsisdns || !editable || subscriptionDetails.forceMsisdn"><text translate="editMsisdnButton"></text></a></div></div></div></div></div><div ng-if="MsisdnSearch.searching[prodInfo.config.id] && !subscriptionDetails.showMsisdns"><br><h2><span class="inline-loader"></span> <span translate="loadingMsisdns"></span></h2></div><div ng-if="subscriptionDetails.subscriptionType == \'newMsisdn\'" id="newmsisdnfield_content"><div ng-if="subscriptionDetails.showMsisdns && editable && !subscriptionDetails.forceMsisdn"><br><div><button type="button" data-testid="msisdn-other-numbers-button" ng-disabled="MsisdnSearch.searching | objSize" class="outline margin-right" ng-click="MsisdnSearch.get(patternData.pattern || \'\', prodInfo.config.id)"><i icon="fontawesome/random" class="icon-inline"></i>&nbsp;<span translate="newMsisdnsButton"></span></button>&nbsp;&nbsp;&nbsp; <a href ng-click="toggleMsisdns()" translate="cancelMsisdnSelectionButton" data-testid="msisdn-cancel-selection-button"></a><br><br></div><div class="formrow" ng-if="isTest && !(MsisdnSearch.searching | objSize)"><div class="formfield"><input id="msisdnField" class="search-input" type="search" ng-model="patternData.pattern" pattern="[0-9]{4}" maxlength="4" minlength="4" ng-change="(!patternData.pattern || patternData.pattern.length === 4) && MsisdnSearch.get(patternData.pattern || \'\', prodInfo.config.id)" autocomplete="off"> <label for="msisdnField" translate="newMsisdnPatternField"></label></div></div><br><div class="msisdn-row-placeholder"><div ng-if="MsisdnSearch.searching[prodInfo.config.id]"><loading-button loading="true"></loading-button></div><div class="msisdn-row" ng-if="!MsisdnSearch.searching[prodInfo.config.id]"><div ng-repeat="msisdn in MsisdnSearch.msisdns track by $index" class="msisdn-button"><button type="button" class="full-width petrol" data-testid="msisdn-selection-button" ng-click="subscriptionDetails.newMsisdn.msisdn = msisdn; updateMsisdn(msisdn); subscriptionDetails.showMsisdns = false">{{::msisdn}}</button></div></div></div></div></div><div ng-if="showContactNumber() && !MsisdnSearch.searching[prodInfo.config.id]"><hr class="big"><div class="formrow"><div class="formfield forced no-margin" ng-class="{\'field-90 no-right-margin\' : showContinueButton}"><phone-number id="contactNumberInt" name="contactNumber" ng-model="orderData.billingCustomerDetails.contactNumber" label="\'contactNumberField\' | translate" editable="editable" required></phone-number><input-info><span translate="contactNumberInfo"></span></input-info></div><div class="formfield field-10 forced no-margin" ng-if="showContinueButton"><button data-testid="contact-number-submit-button" class="headless bottomless full-width icon-only next-to-input petrol" type="{{editable ? \'submit\' : \'button\'}}" ng-disabled="!editable"><i icon="fontawesome/arrow-right" class="icon-inline fill-white"></i></button></div></div></div><div ng-if="subscriptionDetails.subscriptionType == \'porting\'"><div class="new-msisdn-container porting-mode"><div class="sim-card-image"><img src="/assets/images/icons/sim-card.svg"></div><div class="formrow"><div class="formfield field-50"><input id="portingMsisdn" data-testid="porting-msisdn" type="tel" validation-type="msisdn" ng-model="subscriptionDetails.porting.msisdn" ng-disabled="!editable" pattern="\\s*(?:[0-9\\.]\\s*){10}$" ng-change="subscriptionDetails.porting.msisdn && updateMsisdn(subscriptionDetails.porting.msisdn)" minlength="10" maxlength="15" required> <label for="portingMsisdn" translate="msisdnField"></label></div><div class="formfield field-50" ng-show="(subscriptionDetails.porting.msisdn && (!subscriptionDetails.autoDetectedPreviousProvider || state.agentLoggedIn) && !lookingUpMsisdn)"><select id="portingPreviousProvider" name="previousProviderField" ng-model="subscriptionDetails.porting.previousProviderId" ng-disabled="!editable" ng-change="changedProvider()" required data-testid="previousProviderSelect"><option ng-repeat="provider in sortedProviders | orderBy : [\'-defaultProvider\', \'name\'] track by provider.id" value="{{::provider.id}}">{{::provider.name}}</option><option value="preToPost" ng-if="prodInfo.config.type !== \'prepaid\' && (!state.agentLoggedIn || agent.data.rights.PRE_TO_POSTPAID_CONVERSION)">Lebara Prepaid</option></select> <label for="portingPreviousProvider" translate="previousProviderField"></label></div><div class="formfield field-50" ng-if="lookingUpMsisdn"><loading-button loading="true" type-button="button" class="bottomless headless small"></loading-button><div class="ng-hide"><input type="text" ng-model="lookingUpMsisdnFieldFiller" required></div></div></div></div><div ng-if="subscriptionDetails.porting.previousProvider.donorType == \'prepaid\' && state.agentLoggedIn"><p translate="portingFromPrepaidMessage"></p></div><div ng-if="subscriptionDetails.porting.previousProvider.donorType == \'postpaid\'" ng-class="{disabled: !editable}"><br><hr><div ng-if="subscriptionDetails.porting.portingSpeed === \'slow\'"><br><div><strong translate="portingSpeedSlow"></strong></div><br><div class="legal"><span translate="posPortingNoWishDateInfo" ng-if="state.agentLoggedIn"></span> <span translate="eshopPortingNoWishDateInfo" ng-if="!state.agentLoggedIn"></span></div><br><a href ng-click="subscriptionDetails.porting.portingSpeed = \'fast\'" translate="changeToFastPorting"></a></div><div ng-if="subscriptionDetails.porting.portingSpeed === \'fast\'"><br><div><strong translate="portingSpeedFast"></strong></div><br><div><div translate="fastPortingWarningMessage" class="warning-message headless bottomless small-padding"></div><div class="formrow" ng-if="subscriptionDetails.porting.portingSpeed == \'fast\' || subscriptionDetails.porting.previousProvider.donorType == \'prepaid\'"><div class="formfield field-66"><app-date data="subscriptionDetails.porting.wishDate" class="date-66" fewest-days-from-now="(state.agentLoggedIn || selfRegistration) ? 9 : 14" most-days-from-now="180" editable="editable" required="true" auto-complete="false" is-wish-date="true"><span translate="wishDateField"></span></app-date></div></div></div><br><a href ng-click="subscriptionDetails.porting.portingSpeed = \'slow\'" translate="changeToSlowPorting"></a></div></div><div ng-if="subscriptionDetails.porting.previousProvider.donorType == \'postpaid\'" ng-class="{disabled: !editable}"><br><hr><div class="formrow"><div class="formfield"><input type="checkbox" ng-model="subscriptionDetails.portingOwnerIsSameUser" id="ownerIsSameUser" ng-true-value="false" ng-false-value="true" ng-disabled="!editable"> <label for="ownerIsSameUser" id="ownerIsSameUserLabel"><span translate="ownerIsDifferentFromUserFieldPos" ng-if="state.agentLoggedIn"></span> <span translate="ownerIsDifferentFromField" ng-if="!state.agentLoggedIn"></span></label></div></div><div ng-if="!subscriptionDetails.portingOwnerIsSameUser"><br><strong translate="portingOwnerDetailsTitle"></strong><br><porting-user data="subscriptionDetails.portingUser" editable="editable"></porting-user></div></div></div><div ng-if="subscriptionDetails.subscriptionType == \'none\' && data.subscriptionType !== \'contractExtension\'"><input type="text" ng-model="fakePreToPostNumber" style="display:none" required><div class="info-message bottomless" ng-if="!state.agentLoggedIn"><div ng-if="state.customerLoggedIn"><p translate="preToPostHaveToLoginMessageLoggedin"></p><a c-route="/account" class="button float-right headless bottomless" translate="preToPostGoToSubscriptions"></a></div><div ng-if="!state.customerLoggedIn"><p translate="preToPostHaveToLoginMessage"></p><a c-route="/login?msisdn={{subscriptionDetails.porting.msisdn}}&autosubmit=true&redirectPath=%2Faccount%2Fpre-to-post%2Fauto-prepaid&redirectSearch=%7B%22product%22%3A%22{{ prodInfo.config.url }}%22%2C%22promotions%22%3A%22{{ prodInfo.promotion.code }}%22%2C%22devices%22%3A%22{{ prodInfo.device.id }}%22%2C%22ll%22%3A{{ prodInfo.config.lockinLength }}%7D" class="button float-right headless bottomless" translate="preToPostHaveToLoginButton"></a></div></div><div class="warning-message" ng-if="state.agentLoggedIn"><div ng-if="state.customerLoggedIn"><p translate="preToPostHaveToLoginMessagePosLoggedin"></p><a c-route="/pos/existing-customer/pre-to-post" class="button float-right headless bottomless outline" translate="preToPostHaveToPreToPostButton"></a></div><div ng-if="!state.customerLoggedIn"><p translate="preToPostHaveToLoginMessagePos"></p><a c-route="/pos/find-existing-customer" class="button float-right headless bottomless outline" translate="preToPostHaveToLoginButtonPos"></a></div></div></div><div ng-if="data.subscriptionType === \'contractExtension\'"><input type="text" ng-model="fakeContractExtensionNumber" style="display:none" required><div class="info-message bottomless" ng-if="!state.agentLoggedIn"><p translate="contractExtensionHaveToLoginMessageLoggedin"></p><a ng-if="!state.customerLoggedIn" c-route="/login?msisdn={{subscriptionDetails.porting.msisdn}}&autosubmit=true&redirectPath=%2Faccount%2Fchange-subscription%2Fauto-postpaid&redirectSearch=%7B%22products%22%3A%22{{prodInfo.product.url}}%22%7D" class="button float-right headless bottomless" translate="contractExtensionGoToSubscriptions"></a> <a ng-if="state.customerLoggedIn" c-route="/account/change-subscription/auto-postpaid?products={{prodInfo.product.url}}" class="button float-right headless bottomless" translate="contractExtensionGoToSubscriptions"></a></div><div class="warning-message" ng-if="state.agentLoggedIn"><p translate="contractExtensionHaveToLoginMessagePosLoggedin"></p><a c-route="/pos/existing-customer/manage-subscriptions" class="button float-right headless bottomless outline" translate="contractExtensionGoToSubscriptionsPos"></a></div></div></div><div ng-if="showNoMsisdnContactNumber()"><div class="formrow"><div class="formfield field-90 forced no-margin no-right-margin"><phone-number id="contactNumberInt2" name="contactNumber" ng-model="orderData.billingCustomerDetails.contactNumber" label="\'contactNumberField\' | translate" editable="editable" required></phone-number><input-info><span translate="contactNumberInfo"></span></input-info></div><div class="formfield field-10 forced no-margin"><button class="headless bottomless full-width icon-only next-to-input petrol" type="{{editable ? \'submit\' : \'button\'}}" ng-disabled="!editable"><i icon="fontawesome/arrow-right" class="icon-inline fill-white"></i></button></div></div></div><div ng-if="prodInfo.config.url !== \'yallo_home_4g\' && prodInfo.config.url !== \'yallo_home_5g_plus_tv\'&& prodInfo.config.url !== \'yallo_home_5g\' && (data.subscriptionType === \'newMsisdn\' || data.subscriptionType === \'porting\') && showSimTypeSelection"><hr class="big"><h2 translate="checkoutSimTypeTitle"></h2><p bind-html-compile="\'checkoutSimTypeDescription\' | translate"></p><div class="formrow"><div class="formfield auto-width headless"><input type="radio" ng-model="prodInfo.simType" name="simType" ng-change="changeSimType()" id="simTypePhysical" value="PHYSICAL" ng-disabled="checkout.disableFields"> <label for="simTypePhysical" translate="simTypePhysical"></label></div><div class="formfield auto-width headless"><input type="radio" ng-model="prodInfo.simType" name="simType" ng-change="changeSimType()" id="simTypeEsim" value="ESIM" ng-disabled="checkout.disableFields"> <label for="simTypeEsim" translate="simTypeEsim"></label></div></div></div><div ng-if="showBanner" class="info-message text-size-1 pannel-design no-margin center"><span bind-html-compile="\'blackFridaySunrisePreventionPanel\' | translate"></span></div>');
$templateCache.put('/scripts/directives/configure-options/dirc_configure-options.html','<add-options data="prodInfo.config.rateplan" prod-info="prodInfo"></add-options>');
$templateCache.put('/scripts/directives/configure-subscription/dirc_configure-subscription.html','<div ng-show="theConfig.needToLogin"><h2 translate="needToLoginTitle"></h2><button ng-click="showLogin()" translate="loginButton"></button></div><div ng-show="!theConfig.needToLogin"><div class="subscription-content full-height"><h2 translate="tabTitle_subscriptionInfo"></h2><ul><li><strong><i icon="fontawesome/file-text" class="icon-inline"></i> <span translate="subscriptionTitlePre"></span></strong> {{subscription.msisdn}}</li><li><strong><i icon="fontawesome/file-text" class="icon-inline"></i> <span translate="subscriptionRateplanPre"></span></strong> {{subscription.rateplan.name}}</li><li ng-show="subscription.lockinEndDate"><strong><i icon="fontawesome/file-text" class="icon-inline"></i> <span translate="subscriptionContractEndDate"></span></strong> {{subscription.lockinEndDate | date : \'dd/MM/yyyy\'}}</li><li ng-show="!subscription.gettingDetails && subscription.includedPromotions.length"><div ng-repeat="bundle in subscription.includedPromotions | orderBy: \'priority\' track by $index"><span class="bundle-desc" translate="bundle_{{bundle.bundleName | urlify}}_text"></span></div></li><li ng-show="!subscription.gettingDetails && !subscription.includedPromotions.length && subscription.type == \'postpaid\'"><strong><i icon="fontawesome/gift" class="icon-inline"></i> <span translate="noPromotionExtensionTitle"></span></strong> <span class="bundle-desc" translate="noPromotionExtensionDescription"></span></li><li ng-show="subscription.gettingDetails && subscription.type == \'postpaid\'"><strong><i icon="fontawesome/gift" class="icon-inline"></i> <span translate="noPromotionExtensionTitle"></span></strong> <span class="inline-loader"></span></li></ul></div><div class="info-message bottomless" ng-show="theConfig.preToPostSubscription && subscription.newSim" translate="preToPostNoSimShip"></div></div>');
$templateCache.put('/scripts/directives/confirm-email-address/dirc_confirm-email-address.html','<div ng-if="confirming"><loading-button loading="true"></loading-button></div><div class="block-6-6"><div class="mainblock"><div><h2 ng-show="!confirming && error" translate="emailConfirmationError"></h2><h2 ng-show="!confirming && success" translate="emailConfirmationSuccess"></h2></div></div><div class="sideblock center-verticaly-flex"><div ng-if="!confirming && success"><i icon="fontawesome/check-circle" class="fill-primary size-8"></i></div><div ng-if="!confirming && error" class="text-center"><i icon="fontawesome/exclamation-circle" class="fill-red size-8"></i></div></div></div>');
$templateCache.put('/scripts/directives/confirm-no-signing/dirc_confirm-no-signing.html','<div ng-if="!state.agentLoggedIn"><span class="agree-terms" ng-if="prepaid && !selfRegistration" translate="iAgreeTermsPrepaid"></span> <span class="agree-terms" ng-if="prepaid && selfRegistration" translate="iAgreeTermsPrepaidSelfRegistration"></span> <span class="agree-terms" ng-if="isTV" translate="{{state.customerLoggedIn ? \'iAgreeTermsTVExistingCustomer\' : \'iAgreeTermsTV\'}}"></span> <span class="agree-terms" ng-if="isFiber" bind-html-compile="(rs.activationFeesOffered[prodInfo.config.url] ? \'iAgreeTermsPostpaidFiberNoFee\': \'iAgreeTermsPostpaidFiber\') | translate | replaceText : \'XX\' : activationFee"></span> <span class="agree-terms" ng-if="isHFC" bind-html-compile="(rs.activationFeesOffered[prodInfo.config.url] ? \'iAgreeTermsPostpaidHFCNoFee\': \'iAgreeTermsPostpaidHFC\') | translate | replaceText : \'XX\' : activationFee"></span> <span class="agree-terms" ng-if="!prepaid && !extension && !isFiber && !isHFC && !isTV" bind-html-compile="(rs.activationFeesOffered[prodInfo.config.url] ? \'iAgreeTermsPostpaidNoFee\': \'iAgreeTermsPostpaid\') | translate | replaceText : \'XX\' : activationFee"></span><div class="agree-terms" ng-if="!prepaid && extension"><div class="formrow"><div class="formfield" ng-if="hasOneTimeCostsForExtension"><input id="extensionConfirmation" type="checkbox" ng-model="extensionAgree" ng-disabled="checkout.checkingOut" required> <label for="extensionConfirmation" translate="acceptExtraCostExtensionPostpaid" id="extensionConfirmationLabel"></label></div><div class="formfield no-margin"><input id="extensionConfirmation2" type="checkbox" ng-model="extensionAgree2" ng-disabled="checkout.checkingOut" required> <label for="extensionConfirmation2" translate="iAgreeTermsExtensionPostpaid" id="extensionConfirmation2Label"></label></div></div></div><div ng-if="!extension"><br><br></div></div><button ng-if="printPdf && !app" ng-click="printPdf()" type="button"><span translate="reprintContractButton"></span></button><div ng-if="state.agentLoggedIn && prepaid && !checkout.checkingOut" ng-class="{disabled: !editable}"><a ng-href="/assets/other/{{\'generalConditions\' | translate}}.pdf" translate="printPrepaidTerms" target="_blank" class="button"></a></div><div ng-if="state.agentLoggedIn && state.isTelesales" class="formrow"><div class="formfield" ng-if="prepaid"><input id="22" type="checkbox" ng-model="agree" ng-disabled="checkout.checkingOut" required> <label for="22" translate="custSignedContractFieldPrepaid"></label></div><div class="formfield" ng-if="!prepaid"><input id="21" type="checkbox" ng-model="agree" ng-disabled="checkout.checkingOut" required> <label for="21" translate="custSignedContractField"></label></div></div>');
$templateCache.put('/scripts/directives/confirmation-esim-poller/dirc_confirmation-esim-poller.html','<div ng-if="polling || gettingCustomer" class="confirmation-polling-loading"><h1 translate="confirmationLoadingEsimInfoTitle"></h1><p translate="confirmationLoadingEsimInfoDescription"></p></div><esim-qr-code sub-data="subscription" ng-if="!polling && !gettingCustomer && subscription"></esim-qr-code>');
$templateCache.put('/scripts/directives/confirmation-topup-info/dirc_confirmation-topup-info.html','<div class="confirmation-topup-info center"><h2 translate="confirmationTopupTitle"></h2><p class="bottomless" translate="confirmationTopupText"></p><a c-route="/account/topup" class="button bottomless white" translate="confirmationTopupButton"></a></div>');
$templateCache.put('/scripts/directives/contact/dirc_contact.html','<div ng-if="!selectedCategory"><h1 translate="contactUsTitle"></h1><p translate="contactUsDescription"></p><div class="contact-category-container"><a ng-repeat="category in contactCategories" class="contact-category-link" c-route="/contact/{{category.key}}"><i icon="fontawesome/{{category.icon}}" class="icon-inline"></i> {{category.title}}</a></div></div><div ng-if="selectedCategory"><div ng-hide="hideCategory"><h1>{{selectedCategory.title}}</h1><p bind-html-compile="selectedCategory.description"></p><hr class="big"></div><div class="row" ng-show="!data.showContactForm"><a ng-repeat="(method, value) in selectedCategory.methods" ng-if="value" ng-href="{{ method.indexOf(\'call\') !== -1 ? (\'contactLink_\' + method | translate) : \'\'}}" ng-click="(method == \'carechat\' || available[method]) && show(method) && click(method)" class="communication-row" opening-times type="method" model="available[method]" next-time="methodNextTime" ng-class="{disabled:  method != \'carechat\' && !available[method] || !show(method)}"><div class="badge" ng-class="{red: !available[method]}" ng-if="method !== \'carechat\'"><span ng-show="available[method]"><span translate="openTill"></span> {{methodNextTime | date}}</span> <span ng-show="!available[method]"><span translate="closedTill"></span> {{methodNextTime | date}}</span></div><i icon="fontawesome/{{\'contactMethodIcon_\' + method | translate}}" class="icon-inline"></i> <span translate="contactMethod_{{method}}"></span></a></div></div>');
$templateCache.put('/scripts/directives/contest/dirc_contest.html','<div class="{{image ? imageType : \'\'}}" ng-if="!loading && !error"><div class="{{image ? \'mainblock\' : \'\'}}"><h1 ng-if="contestTitle[0].text">{{contestTitle[0].text}}</h1><form name="contestForm" class="width-100 white-bg" ng-submit="contestForm.$valid && submit()" novalidate><div class="formrow" ng-if="askName"><div class="formfield field-50"><input type="text" id="firstName" name="firstName" ng-model="data.firstName" autocomplete="given-name" pattern="[^()]*" ng-maxlength="60" required> <label for="firstName" translate="firstNameField"></label></div><div class="formfield field-50"><input type="text" id="lastName" name="lastName" ng-model="data.lastName" autocomplete="family-name" pattern="[^()]*" ng-maxlength="60" required> <label for="lastName" translate="lastNameField"></label></div></div><div class="formrow"><div class="formfield field-50" ng-if="askPhoneNumber"><input type="text" id="contactNumber" name="contactNumber" ng-model="data.contactNumber" autocomplete="tel" minlength="9" maxlength="15" pattern="^07[\\d -]{7,13}$" required> <label for="contactNumber" translate="phoneNumberFieldLabel"></label></div><div class="formfield field-50" ng-if="askBirthDate"><app-date data="contestData.dob" id="dateOfBirth" editable="true" required="true" most-days-from-now="" fewest-days-from-now="-43800" allow-any-date="true"><span translate="dobField"></span></app-date></div><div class="formfield field-50"><input type="email" id="emailAddress" name="emailAddress" ng-model="data.emailAddress" autocomplete="email" ng-model-options="{allowInvalid: true}" pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,10}" check-email="true" ng-required="true"> <label for="emailAddress" translate="emailField"></label></div></div><div ng-repeat="field in extraData" class="formrow"><div class="formfield"><input type="text" ng-if="field.field_type === \'text\'" ng-model="data.extraData[field.field_key]" ng-required="true"> <input type="number" ng-if="field.field_type === \'number\'" ng-model="data.extraData[field.field_key]" ng-required="true"> <label>{{field.field_name}}</label></div></div><br><button type="button" ng-show="showFillButton" ng-click="fill()" class="fill-form-button">FILL</button><br><loading-button class="checkout-continue-button bottom-right" loading="submitting" ng-disabled="!contestForm.$valid">{{ctaText}}</loading-button></form></div><div class="sideblock" ng-if="image"><img ng-src="{{image}}" alt="" class="full-width"></div></div><loading-button loading="true" ng-if="loading"></loading-button>');
$templateCache.put('/scripts/directives/count-down/dirc_count-down.html','<div class="countdown" ng-class="::{nolabels : !showLabels}"><div class="count-down-number-group"><div class="count-down-numbers"><div class="count-down-numbers-wrap"><div class="count-down-number"></div><div class="count-down-number"></div></div><div class="count-down-label" translate="days"></div></div></div><div class="count-down-number-group"><div class="count-down-numbers"><div class="count-down-numbers-wrap"><div class="count-down-number"></div><div class="count-down-number"></div></div><div class="count-down-label" translate="hours"></div></div></div><div class="count-down-number-group"><div class="count-down-numbers"><div class="count-down-numbers-wrap"><div class="count-down-number"></div><div class="count-down-number"></div></div><div class="count-down-label" translate="minutes"></div></div></div><div class="count-down-number-group"><div class="count-down-numbers"><div class="count-down-numbers-wrap"><div class="count-down-number"></div><div class="count-down-number"></div></div><div class="count-down-label" translate="seconds"></div></div></div></div>');
$templateCache.put('/scripts/directives/credit-cards/dirc_credit-cards.html','<h2 translate="creditCardsTitle"></h2><p translate="creditCardsIntroText"></p><div ng-show="!Topup.gettingCreditCards && account.isAccountOwner()"><div ng-repeat="creditCard in Topup.data.creditCards | creditCards" class="credit-card"><div><b><span translate="creditCardNumber"></span>:</b><br>{{creditCard.maskedCCdNumber}}</div><div><b><span translate="creditCardExpiry"></span>:</b><br>{{creditCard.expiry}}</div><div><button type="button" ng-click="showRecurringTopups = !showRecurringTopups" class="petrol"><span ng-show="!showRecurringTopups"><i icon="fontawesome/eye" class="size-1 fill-white"></i></span> <span ng-show="showRecurringTopups"><i icon="fontawesome/eye-slash" class="size-1 fill-white"></i></span></button> <button type="button" ng-click="deleteCreditCard(creditCard.aliasCC)" class="red"><i icon="fontawesome/trash" class="size-1 fill-white"></i></button></div><all-recurring-topups ng-if="showRecurringTopups" credit-card-id="creditCard.aliasCC"></all-recurring-topups></div><div class="info-message" ng-hide="(Topup.data.creditCards | objSize)" translate="noCreditCardsSaved"></div></div><loading-button loading="true" ng-if="Topup.gettingCreditCards"></loading-button>');
$templateCache.put('/scripts/directives/customer-data-preview/dirc_customer-data-preview.html','<div class="customer-data-preview"><div class="data"><div>{{data.title}} {{data.firstName}} {{data.lastName}}</div><div>{{data.dob | objToDate : true | date : \'dd.MM.yyyy\'}}</div></div><div class="link"><a href ng-class="{disabled: !editable}" ng-click="editable && editDataPopup.show()" ng-show="allowEdit"><i icon="fontawesome/pencil" class="icon-inline"></i> <span translate="cdEditButton"></span></a></div></div>');
$templateCache.put('/scripts/directives/device-gallery/dirc_device-gallery.html','<div class="image-gallery"><div class="images" ng-if="device.images" mobile-sideways-scroll hide-helpers="true" always="true" inner-el=".gallery-image" start-pos="0"><div class="row"><div class="gallery-image" ng-repeat="img in device.images" ng-style="{\'background-image\': \'url(\' + img + \')\'}"></div></div></div><div class="sub-switch-icons" ng-if="device.images.length > 1"><div class="dot" ng-click="setPos($index)" ng-repeat="img in device.images" ng-class="{active: mobileScrollPos === $index}"></div></div></div>');
$templateCache.put('/scripts/directives/device-tile/dirc_device-tile.html','<div class="device-item"><div class="sold-out-overlay" ng-if="showStock && device.stock <= 0"></div><div class="device-item-stock" ng-if="showStock" ng-class="{\'sold-out\': device.stock <= 0}">{{device.stock > 0 ? (\'deviceLimitedStock\' | translate | replaceText : \'XX\' : device.stock) : soldOutText }}</div><a class="flex fcol align-center" ng-click="doCallback(device)"><div ng-if="showBanner" class="banner" translate="selectedDevice"></div><div class="device-item-header" ng-style="{\'background-image\': \'url(\' + device.images[0] + \')\'}"></div><div class="device-item-content"><strong>{{device.title}} <span ng-if="device.capacity">{{device.capacity | deviceCapacity}}</span> {{device.color.name}}</strong></div><div class="device-prices" ng-if="::showPrices && device.prices"><div><i icon="fontawesome/credit-card" class="icon-inline fill-silver"></i> <b>{{::device.prices.upfrontCost | customCurrency}}</b> <span class="legal">(<span translate="upfrontCost"></span>)</span></div><div><i icon="fontawesome/file-text" class="icon-inline fill-silver"></i> <b>{{::device.prices.recurringCost | customCurrency}}</b> <span class="legal">(<span translate="deviceDurationPre"></span> {{::device.prices.recurringDuration}} <span translate="deviceDurationPost"></span>)</span></div></div><button ng-if="click" ng-class="{\'invisible\': device.stock <= 0}" class="big-cta padded" translate="selectDeviceButton"></button></a></div>');
$templateCache.put('/scripts/directives/devices/dirc_devices.html','<div ng-if="!loading"><div class="center"><h1 translate="devicesTitle"></h1><h3 translate="devicesSubTitle" ng-if="!state.customerLoggedIn"></h3><br></div><div class="formrow device-filter" ng-if="showFilter"><div class="formfield"><select name="" id="" ng-model="data.manufacturer"><option translate="allDeviceManufacturers" value="all"></option><option ng-repeat="manufacturer in manufacturers" value="{{manufacturer}}">{{manufacturer}}</option></select> <label translate="manufacturerFilterLabel"></label></div></div><div ng-if="getFilteredDevices().length && !hasRecurringCost() && !loading" class="info-message"><span translate="notAllowedDevice"></span></div><div ng-if="getFilteredDevices().length && hasRecurringCost()" class="row"><a ng-repeat="deviceGroup in getFilteredDevices() track by deviceGroup.name" c-route="/device/{{::deviceGroup.url}}" dont-link="{{channel != currentChannel}}" class="device-item" ng-if="(data.manufacturer === \'all\' || deviceGroup.manufacturer === data.manufacturer)"><div ng-if="getPriceBeforeDiscount(deviceGroup) && !getDevicePrice(deviceGroup).upfrontCost" class="squircle red">%</div><div class="device-item-header" ng-if="deviceGroup.images[0]" ng-style="::{\'background-image\': \'url(\' + deviceGroup.images[0] + \')\'}"></div><div class="device-item-content center"><strong>{{deviceGroup.name}}</strong><div class="device-colors"><div ng-repeat="color in getGroupColors(deviceGroup)" class="device-color" ng-class="{selected: selectedDevice.color.name === color.name}" ng-click="selectColor(color)" ng-style="{\'background\': color.colorCode}"></div></div><div class="device-price-container device-page-pricing" ng-if="channel == currentChannel && getDevicePrice(deviceGroup)"><div class="device-price-box"><i icon="fontawesome/credit-card" class="icon-inline fill-silver"></i> <b>{{getDevicePrice(deviceGroup).upfrontCost | customCurrency}}</b> <span class="legal">(<span translate="upfrontCost"></span>)</span></div><div class="device-price-box"><i icon="fontawesome/file-text" class="icon-inline fill-silver"></i> <b ng-class="{\'text-red\': getPriceBeforeDiscount(deviceGroup, selectedDevice) && !getDevicePrice(deviceGroup).upfrontCost}">{{( getDiscountedDevicePrice(deviceGroup, selectedDevice) || getDevicePrice(deviceGroup)).recurringCost | customCurrency}} </b><span ng-if="getPriceBeforeDiscount(deviceGroup, selectedDevice) && !getDevicePrice(deviceGroup).upfrontCost" class="crossed-out"><b>{{getPriceBeforeDiscount(deviceGroup, selectedDevice)}}</b></span> <span class="legal">(<span translate="deviceDurationPre"></span> {{getDevicePrice(deviceGroup).recurringDuration}} <span translate="deviceDurationPost"></span>)</span></div></div><loading-button ng-if="!getDevicePrice(deviceGroup)" loading="true"></loading-button></div></a></div><div ng-if="!getFilteredDevices().length"><h1 translate="noDevicesAvailableText"></h1></div></div><loading-button loading="true" ng-if="loading"></loading-button>');
$templateCache.put('/scripts/directives/do-topup/dirc_do-topup.html','<div class="do-topup"><div class="topup-values" ng-if="!doingTopup && !loading"><div class="topup-value" ng-click="data.amount = 10" ng-class="{active: data.amount === 10}">{{10 | customCurrency : true}}</div><div class="topup-value" ng-click="data.amount = 20" ng-class="{active: data.amount === 20}">{{20 | customCurrency : true}}</div><div class="topup-value" ng-click="data.amount = 50" ng-class="{active: data.amount === 50}">{{50 | customCurrency : true}}</div><div class="topup-value" ng-click="data.amount = 100" ng-class="{active: data.amount === 100}">{{100 | customCurrency : true}}</div></div><form name="doTopupForm" ng-submit="doTopupForm.$valid && doTopup()" ng-if="!doingTopup && !loading" custom-validation="doTopupForm" novalidate><select ng-model="data.cc" class="cc-selection-select" ng-if="Topup.activeCreditCards() | objSize"><option ng-value="creditCard" ng-repeat="creditCard in ccs">{{creditCard.maskedCCdNumber}}</option><option value="new" translate="newCreditCard"></option></select><div ng-if="!data.changeCC && data.cc && data.cc !== \'new\'" class="cc-to-use"><div class="text-silver"><a c-route="/account/settings/credit-cards" class="current-cc"><span><span translate="creditCardUsed"></span>:</span> <img ng-src="/assets/images/credit-cards/{{data.cc.type}}.jpg" class="credit-card-icon" ng-if="data.cc.type" alt=""> {{data.cc.maskedCCdNumber | creditCard}}</a><span>&nbsp;<a href class="text-petrol"><span translate="change"></span></a></span></div></div><div ng-if="!data.changeCC && data.cc && data.cc === \'new\' && Topup.activeCreditCards() | objSize" class="cc-to-use is-new"><span class="text-silver"><span translate="newCreditCard"></span>&nbsp;<a href class="text-petrol"><span translate="change"></span></a></span></div><button class="full-width petrol big bottomless headless do-topup-button" ng-class="{\'extra-spacing\': !(Topup.activeCreditCards() | objSize)}" bind-html-compile="\'doTopupButtonWithAmount\' | translate | replaceText : \'XX\' : data.amount"></button></form><loading-button ng-if="doingTopup || loading" loading="true"></loading-button></div>');
$templateCache.put('/scripts/directives/document-signing/dirc_document-signing.html','<loading-button loading="true" ng-if="loading"></loading-button><div ng-if="!loading && (!outboundMode || data.poa.b64) && !autoSignMode"><h2 translate="agentDocumentsUploadTitle" class="bottomless"></h2><div ng-if="signData.signMethod && state.agentLoggedIn"><br><a href ng-click="signData.signMethod = null" ng-class="{\'disabled\': submitting || !editable}" ng-disabled="submitting || !editable" translate="signMethodBackButton" class="sign-back-button"></a></div><div ng-if="!signData.signMethod"><hr><p translate="signMethodIntroText" class="headless bottomless"></p><div class="document-signing-buttons"><button type="button" ng-click="signData.signMethod = \'digital\'; checkIfCanAutoOpenSignPad()" class="petrol invalid" id="signingMethodDigital"><i icon="fontawesome/pencil-square-o" class="icon-inline fill-white"></i><span translate="signMethodDigitalButton"></span></button><div class="or hide-on-mobile" translate="or"></div><a ng-href="{{path}}/external-signing" class="button petrol invalid external-signing-button hide-on-mobile"><i icon="fontawesome/external-link" class="icon-inline fill-white"></i> <span translate="posExternalDocumentSignButton"></span></a><div class="or" translate="or"></div><button type="button" ng-click="signData.signMethod = \'paper\'" class="outline invalid" id="signingMethodPaper"><i icon="fontawesome/file-text" class="icon-inline"></i><span translate="signMethodPaperButton"></span></button></div><hr><input type="text" style="display:none" ng-model="stopContinue" required></div><sign-pad class="required" on-confirm="onSignConfirm" on-cancel="onSignCancel" ng-if="signPadActive"></sign-pad><div class="formrow digital-signing" ng-show="!loading" ng-if="signData.signMethod == \'digital\'"><div class="formfield field-50 contract" ng-class="{invalid: !data.contract.b64}" ng-if="checkout.orderData.accessCodeData.contractSignRequired && !data.contract.b64"><p ng-if="state.agentLoggedIn" translate="posPreContractSignButtonText"></p><p ng-if="!state.agentLoggedIn" translate="eshopPreContractSignButtonText"></p><button type="button" class="petrol show-sign-pad-button" ng-click="showSignPad(\'contract\')" ng-class="{\'disabled\': submitting || !editable}" ng-disabled="submitting || !editable"><i icon="fontawesome/pencil" class="icon-inline fill-white"></i><span translate="posContractSignButton" ng-if="state.agentLoggedIn"></span><span translate="eshopContractSignButton" ng-if="!state.agentLoggedIn"></span></button> <input type="text" style="display:none" ng-model="data.contract.b64" required></div><div class="formfield field-50 document-signed-done" ng-if="data.contract.b64"><i icon="fontawesome/check" class="fill-primary size-1 center"></i><p translate="contractSignDone"></p><a href class="petrol" ng-disabled="submitting || !editable" ng-class="{\'disabled\': submitting || !editable}" ng-click="data.contract.b64 = \'\'; data.contract.valid = false" translate="resetContractButton"></a></div><div class="formfield field-50 poa" ng-class="{\'invalid\': !data.poa.b64}" ng-if="checkout.orderData.accessCodeData.poaSignRequired && !data.poa.b64"><p ng-if="state.agentLoggedIn" translate="posPrePoaSignButtonText"></p><p ng-if="!state.agentLoggedIn" translate="eshopPrePoaSignButtonText"></p><p ng-if="!prodInfo.subscriptionDetails.portingOwnerIsSameUser" translate="poaSignDifferentOwnerMessage"></p><div ng-if="!checkout.orderData.accessCodeData.contractSignRequired"><sign-pad on-confirm="onSignConfirm" class="required" hide-confirm-button="true" ng-init="showSignPad(\'poa\', true)" inline="true"></sign-pad></div><button type="button" class="petrol show-sign-pad-button" ng-if="checkout.orderData.accessCodeData.contractSignRequired" ng-class="{\'disabled\': submitting || !editable}" ng-disabled="submitting || !editable" ng-click="showSignPad(\'poa\')"><i icon="fontawesome/pencil" class="icon-inline fill-white"></i> <span translate="posPoaSignButton" ng-if="state.agentLoggedIn"></span> <span translate="eshopPoaSignButton" ng-if="!state.agentLoggedIn"></span></button> <input type="text" style="display:none" ng-model="data.poa.b64" ng-if="state.agentLoggedIn" required></div><div class="formfield field-50 document-signed-done" ng-if="data.poa.b64"><i icon="fontawesome/check" class="fill-primary size-1 center"></i><p translate="poaSignDone"></p><a href class="petrol" ng-disabled="submitting || !editable" ng-class="{\'disabled\': submitting || !editable}" ng-click="data.poa.b64 = \'\'; data.poa.valid = false" translate="resetPoaButton"></a></div></div><div class="formrow paper-signing" ng-show="!loading" ng-if="signData.signMethod == \'paper\'"><div class="formfield field-50 contract" ng-if="checkout.orderData.accessCodeData.contractSignRequired"><p translate="uploadContractSignDescription"></p><div class="file-upload-container"><input type="file" id="file_contract" fileread="data.contract" file-name="\'contract\'" max-size="1024*1024*1.5" target-resolution="1920" name="contractField" required selector="\'#contractFile\'" ng-model="data.contract.b64" ng-disabled="submitting || !editable" capture="environment" accept=".png, .jpg, .jpeg, .pdf"> <label class="nowrap has-input-info" for="file_contract" id="contractFile"><div><i icon="fontawesome/check" class="size-1 center fill-primary" ng-show="data.contract.b64"></i> <i icon="fontawesome/upload" class="size-1 center fill-silver" ng-show="!data.contract.b64"></i> <span class="inline-loader" ng-show="data.contract.loading"></span> <strong translate="documentType_contract"></strong> <span translate="{{data.contract.b64 ? \'resetContractButton\' : \'clickToUpload\'}}"></span></div></label><input-info><span translate="contract_tooltip"></span></input-info></div></div><div class="formfield field-50 poa" ng-if="checkout.orderData.accessCodeData.poaSignRequired"><p translate="uploadPoaSignDescription"></p><p ng-if="!prodInfo.subscriptionDetails.portingOwnerIsSameUser" translate="poaSignDifferentOwnerMessage"></p><div class="file-upload-container"><input type="file" id="file_poa" fileread="data.poa" file-name="\'poa\'" max-size="1024*1024*1.5" target-resolution="1920" capture="environment" name="poaField" required selector="\'#poaFile\'" ng-model="data.poa.b64" ng-disabled="submitting || !editable" accept=".png, .jpg, .jpeg, .pdf"> <label class="nowrap has-input-info" for="file_poa" id="poaFile"><div><i icon="fontawesome/check" class="size-1 center fill-primary" ng-show="data.poa.b64"></i> <i icon="fontawesome/upload" class="size-1 center fill-silver" ng-show="!data.poa.b64"></i> <span class="inline-loader" ng-show="data.poa.loading"></span> <strong translate="documentType_poa"></strong> <span translate="clickToUpload"></span></div></label><input-info><span translate="poa_tooltip"></span></input-info></div></div></div><div class="info-buttons"><a href ng-class="{\'disabled\': submitting || !editable}" ng-click="checkout.printPdf(checkout.orderData.contract.b64, \'contract.pdf\')" ng-if="checkout.orderData.accessCodeData.contractSignRequired && (!data.contract.b64 || !signData.signMethod)"><i icon="fontawesome/download" class="icon-inline"></i> <span translate="reprintContractButton"></span> </a><a href ng-class="{\'disabled\': submitting || !editable}" ng-click="checkout.printPdf(checkout.orderData.poa.b64, \'poa.pdf\')" ng-if="checkout.orderData.accessCodeData.poaSignRequired && (!data.poa.b64 || !signData.signMethod)"><i icon="fontawesome/download" class="icon-inline"></i> <span translate="reprintPoaButton"></span></a></div><hr><br></div><div ng-if="!loading && outboundMode && !data.poa.b64"><h2 translate="agentDocumentsUploadTitle" class="bottomless"></h2><div class="formrow"><div class="formfield"><input type="radio" ng-model="data.poa.sendPhysicalPoa" id="doSignNow" ng-disabled="submitting || !editable" ng-value="false" required> <label for="doSignNow" translate="doSignNowLabel"></label></div><div class="formfield"><input type="radio" ng-model="data.poa.sendPhysicalPoa" id="dontSignNow" ng-disabled="submitting || !editable" ng-value="true" required> <label for="dontSignNow" id="dontSignNowLabel" translate="dontSignNowLabel"></label></div></div><div ng-if="!data.poa.sendPhysicalPoa"><a ng-href="{{path}}/external-signing" class="button petrol bottomless"><i icon="fontawesome/external-link" class="icon-inline fill-white"></i> <span translate="posExternalDocumentSignButtonOutbound"></span></a> <input type="text" ng-model="dummyToStopSubmit" style="display:none" required></div><br><hr><br></div>');
$templateCache.put('/scripts/directives/download-app/dirc_download-app.html','<div class="download-app"><a target="_blank" rel="noopener" ng-class="{fade : fadeIos}" translate-attr="{href : \'mobileAppUrlItunes\'}"><img src="/assets/images/apple-store-badge.png" translate-attr="{alt:\'alt_apple-store-badge\'}" alt="download ios"></a><a target="_blank" rel="noopener" ng-class="{fade : fadeAndroid}" translate-attr="{href : \'mobileAppUrlPlaystore\'}"><img src="/assets/images/google-play-badge.png" translate-attr="{alt:\'alt_google-play-badge\'}" alt="download android"></a></div>');
$templateCache.put('/scripts/directives/download-links/dirc_download-links.html','<ul class="document-list"><li class="media-list-item" ng-repeat="link in links | orderBy : \'-release_date\' track by $index"><a href="{{::link.download_link.url}}" target="_blank"><div class="icon"><i icon="fontawesome/{{link.icon.toLowerCase()}}-o" class="fill-silver icon-inline"></i></div><div class="date">{{link.release_date | date : \'dd.MM.yyyy\'}}</div><div class="title">{{link.link_title[0].text}}</div></a></li></ul>');
$templateCache.put('/scripts/directives/easy-login/dirc_easy-login.html','<div ng-if="data.recoveryMode"><a href ng-click="hideRecovery()" class="no-link"><i icon="fontawesome/chevron-left" class="icon-inline"></i> <span translate="toLoginButton"></span></a><br><br></div><form class="easy-login" name="easyLoginForm" ng-submit="easyLoginForm.$valid && doEasyLogin()" novalidate ng-if="!data.codeSent && !data.recoveryMode && !data.extraInfoRequired"><div class="formrow"><p ng-if="state.agentLoggedIn" translate="easyLoginPosIntro"></p><div class="formfield field-90 forced no-margin" ng-if="!loggingIn"><input type="text" autofocus ng-model="data.val" id="val" minlength="4" ng-blur="(isIOS && data.val) && doEasyLogin()" name="val" autocomplete="off" required data-testid="easy-login-val"> <label for="val"><span translate="msisdnOrEmailField"></span></label></div><div class="formfield field-10 forced no-margin"><button id="doLogin" class="headless bottomless full-width icon-only next-to-input petrol" ng-class="{disabled:!data.val}" ng-if="!loggingIn" data-testid="easy-do-login-button"><i icon="fontawesome/arrow-right" class="fill-white icon-inline"></i></button><loading-button loading="true" ng-if="loggingIn" class="small"></loading-button></div></div></form><form class="easy-login" name="easyLoginWithExtraForm" ng-submit="easyLoginWithExtraForm.$valid && doEasyLoginWithExtraInfo()" novalidate ng-if="!data.codeSent && !data.recoveryMode && data.extraInfoRequired"><a class="link" translate="back" ng-click="data.extraInfoRequired = false"></a><p translate="easyLoginExtraDataRequired"></p><div class="formrow"><div class="formfield headless"><input type="text" ng-model="data.val" disabled="disabled"> <label><i icon="fontawesome/envelope-o" class="icon-inline"></i> <span translate="emailField"></span></label></div></div><br><div class="formrow"><div class="formfield field-90 forced no-margin" ng-if="!loggingIn"><input type="text" autofocus ng-model="data.msisdn" id="msisdn" minlength="10" ng-blur="isIOS && doEasyLoginWithExtraInfo()" name="msisdn" autocomplete="off" required> <label for="msisdn"><i icon="fontawesome/phone" class="icon-inline"></i> <span translate="msisdnField"></span></label></div><div class="formfield field-10 forced no-margin"><button id="doLogin" class="headless bottomless full-width icon-only next-to-input petrol" ng-class="{disabled:!data.val}" ng-if="!loggingIn"><i icon="fontawesome/arrow-right" class="fill-white icon-inline"></i></button><loading-button loading="true" ng-if="loggingIn" class="small"></loading-button></div></div></form><form class="easy-login" name="easyLoginVcForm" ng-submit="easyLoginVcForm.$valid && doEasyLoginVc()" novalidate custom-validation="easyLoginVcForm" ng-if="data.codeSent"><div class="formrow" ng-if="!data.allowResend && !data.attemptExceeded"><div class="formfield field-90 forced no-margin" ng-if="data.type === \'sms\'"><input id="msisdn" type="tel" ng-model="data.val" disabled="disabled"> <label for="msisdn"><i icon="fontawesome/phone" class="icon-inline"></i> <span translate="msisdnField"></span></label></div><div class="formfield field-90 forced no-margin" ng-if="data.type === \'email\'"><input id="msisdn" type="text" ng-model="data.val" disabled="disabled"> <label for="msisdn"><i icon="fontawesome/envelope-o" class="icon-inline"></i> <span translate="emailField"></span></label></div><div class="formfield field-10 forced no-margin"><button ng-click="enterCodeCancel()" type="button" class="headless bottomless full-width icon-only next-to-input petrol"><i icon="fontawesome/pencil" class="fill-white icon-inline"></i></button></div></div><div class="formrow" ng-if="!data.allowResend && !data.attemptExceeded"><br><div class="formfield field-90 forced no-right-margin" ng-if="!loggingIn && !watching"><input ng-model="data.code" id="easyLoginCode" data-testid="easy-login-code" autofocus type="tel" pattern="[0-9]{6}" minlength="6" maxlength="6" validation-type="easy-login-code" name="easyLoginCode" autocomplete="off" ng-change="data.code && doEasyLoginVc()" required> <label for="easyLoginCode"><i icon="fontawesome/lock" class="icon-inline"></i> <span translate="easyLoginCodeField"></span></label><input-info><span bind-html-compile="\'easyLoginCodeSentSmsText\' | translate | replaceText : \'XXXXXXXXXX\' : data.val" ng-if="data.type === \'sms\'"></span> <span bind-html-compile="\'easyLoginCodeSentEmailText\' | translate | replaceText : \'XXXXXXXXXX\' : data.val" ng-if="data.type === \'email\'"></span></input-info></div><div class="formfield field-10 forced"><button id="doLogin2" class="headless bottomless full-width icon-only next-to-input petrol" ng-if="!loggingIn && !watching"><i icon="fontawesome/arrow-right" class="fill-white icon-inline"></i></button><loading-button loading="true" ng-if="loggingIn || watching" class="small" type-button="true"></loading-button></div></div><div ng-if="!data.allowResend && !data.attemptExceeded && data.timeRemaining > 0 && !watching" ng-show="!loggingIn"><count-down hide-days="true" hide-hours="true" time="data.timeRemaining" class="small-countdown no-margin center silver-countdown"></count-down></div><div ng-if="data.allowResend"><p translate="easyLoginResendText"></p><button class="petrol full-width bottomless" type="button" ng-click="resend()" translate="resend"></button></div><div ng-if="data.attemptExceeded"><p translate="easyLoginAttemptsExceededText"></p><button class="petrol full-width bottomless" type="button" ng-click="resend()" translate="easyLoginRestart"></button></div></form><div ng-if="rs.noLoginRedirect"><br><span translate="cannotLoginDescription"></span><br><button translate="cannotLoginZendesk" ng-click="rs.loginPopup.hide()"></button></div><div ng-if="data.recoveryMode && !state.agentLoggedIn"><p translate="recoveryIntroText"></p><div ng-if="!rs.roamingCockpit"><a class="button petrol headless" ng-click="chat.startSupportCallPopup()" translate="callButtonText"></a> <span translate="or" class="or"></span> <a class="button petrol headless" ng-show="!loading" ng-click="startZendeskChat()"><span translate="chatButtonText"></span></a> <span ng-show="loading" class="inline-loader in-button"></span></div><login login-button-text="\'recoveryLoginButton\'" initial-value="initialValue" on-success="onSuccess"></login></div><div ng-if="data.recoveryMode && state.agentLoggedIn"><p translate="recoveryIntroTextPos"></p></div><div class="login-buttons extra-buttons" ng-class="{\'headless\': data.codeSent}" ng-show="!data.hidden && !state.agentLoggedIn"><a href ng-click="showRecovery()" ng-if="!data.recoveryMode" translate="goToRecoveryLoginButton"></a></div><div ng-if="isTest" class="legal"><br>Note: On test, the code is always <b>123456</b></div>');
$templateCache.put('/scripts/directives/email-management/dirc_email-management.html','<div ng-if="customerAccount.accountOwner.emailAddress && customerAccount.accountOwner.emailValidated" class="email-validate"><p translate="emailAlreadyValidated"></p><loading-button class="small" ng-click="onDone()"><span translate="doneButton"></span></loading-button></div><div ng-if="!customerAccount.accountOwner.emailAddress || !customerAccount.accountOwner.emailValidated" class="email-validate"><p translate="{{validationEmailSent ? \'emailValidationSent\' : ( !customerAccount.accountOwner.emailAddress ? \'addEmailAddress\': \'validateEmail\' )}}"></p><form name="emailForm" novalidate ng-if="!validationEmailSent"><div class="formrow"><div class="formfield field-100"><input type="email" id="emailAddress" name="emailAddress" ng-model="model.email" autocomplete="email" ng-model-options="{allowInvalid: true}" pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,10}" ng-disabled="submitting" validation-type="email" check-email="true" editable="true" ng-required="true" ng-change="model.emailChanged = model.email !== customerAccount.accountOwner.emailAddress"> <label for="emailAddress"><i icon="fontawesome/envelope-o" class="icon-inline"></i> <span translate="emailField"></span></label></div></div></form><email-validation-sender dont-set-validated="true" ng-click="sendActivationEmail()" user="customerAccount.accountOwner" on-sent="sentActivationEmail" on-error="validationEmailSendingError" ng-disabled="!data.emailValid" ng-if="!customerAccount.accountOwner.emailValidated && !validationEmailSent && customerAccount.accountOwner.emailAddress && !model.emailChanged"></email-validation-sender><loading-button loading="submitting" ng-if="(!customerAccount.accountOwner.emailAddress || model.emailChanged) && !validationEmailSent" ng-click="!submitting && saveEmail(model.email)" is-disabled="!data.emailValid" class="small"><span translate="sendEmailValidationButton"></span></loading-button><loading-button loading="submitting" ng-if="validationEmailSent" ng-click="allDone()" class="small"><span translate="doneButton"></span></loading-button></div><account-deals ng-if="validationEmailSent || customerAccount.accountOwner.emailValidated"></account-deals>');
$templateCache.put('/scripts/directives/email-status-info/dirc_email-status-info.html','<section class="screenblock email-status-info" ng-if="account.emailAddressNotValid"><div class="content"><div class="block-9-3"><div class="mainblock"><div><span translate="needToAddEmailSelfcareMessage"></span><div><b translate="needToAddEmailSelfcareMessageExtra" ng-if="account.postpaidBillingGroup"></b></div></div></div><div class="sideblock"><a c-route="/account/contact-informations" class="button petrol bottomless headless float-right" translate="needToAddEmailSelfcareButton"></a></div></div></div></section>');
$templateCache.put('/scripts/directives/email-validation-sender/dirc_email-validation-sender.html','<loading-button ng-click="sendEmail()" loading="sending" class="small bottomless"><span translate="sendEmailValidationButton"></span></loading-button>');
$templateCache.put('/scripts/directives/esim-qr-code/dirc_esim-qr-code.html','<div ng-if="showQrCode"><h1 translate="esimScanQrCodeScanTitle"></h1><tabs data="codeTabData" tab-key="\'key\'" tab-title="\'title\'" dont-translate-titles="true" options="tabOptions"><div ng-if="tabOptions.activeTab === \'android\'"><p translate="esimScanQrCodeScanDescriptionAndroid"></p></div><div ng-if="tabOptions.activeTab === \'ios\'"><p translate="esimScanQrCodeScanDescriptionIos"></p></div></tabs><img class="qr-code" src="{{qrCodeB64}}" alt=""><div><br><a translate="eSimMobileShowCode" class="text-primary" ng-click="toggleQrCode()"></a></div></div><div ng-if="!showQrCode"><h1 translate="esimScanQrCodeMobileTitle"></h1><tabs data="codeTabData" tab-key="\'key\'" tab-title="\'title\'" dont-translate-titles="true" options="tabOptions"><div ng-if="tabOptions.activeTab === \'android\'"><p translate="esimScanQrCodeMobileDescriptionAndroid"></p><div class="tap-to-copy" ng-click="copyQrCodeLink(qrCodeLink)"><span translate="eSimCodeActivationCode"></span><br>{{qrCodeLink}}</div></div><div ng-if="tabOptions.activeTab === \'ios\'"><p translate="esimScanQrCodeMobileDescriptionIos"></p><div class="tap-to-copy" ng-click="copyQrCodeLink(iosQrCodeSmDp)"><span translate="eSimCodeSmDp"></span><br>{{iosQrCodeSmDp}}</div><br><div class="tap-to-copy" ng-click="copyQrCodeLink(iosQrCodeAcivationCode)"><span translate="eSimCodeActivationCode"></span><br>{{iosQrCodeAcivationCode}}</div></div></tabs><div><br><a translate="eSimMobileShowQrCode" class="text-primary" ng-click="toggleQrCode()"></a></div></div>');
$templateCache.put('/scripts/directives/esim-status/dirc_esim-status.html','<div class="esim-status center" ng-if="!loading"><esim-qr-code sub-data="subscription" ng-if="allowScan"></esim-qr-code><div ng-if="!allowScan && needsReset && allowReset"><h1 translate="esimTerminatedResetTitle"></h1><p translate="esimTerminatedResetDecription"></p><button translate="esimTerminatedResetCta" ng-click="doReset()" class="headless bottomless"></button></div><div ng-if="!allowScan && needsReset && !allowReset"><h1 translate="esimTerminatedSimSwapTitle"></h1><p translate="esimTerminatedSimSwapDecription"></p><a c-route="/account/sim-swap/{{subscription.id}}" class="button headless bottomless outline" translate="esimTerminatedSimSwapCta"></a></div><div ng-if="pending"><i icon="number_porting" class="esim-icon"></i><h1 translate="esimPendingTitle"></h1><p translate="esimPendingDecription"></p></div></div><loading-button ng-if="loading" loading="true"></loading-button>');
$templateCache.put('/scripts/directives/external-link-sending/dirc_external-link-sending-form.html','<form name="externalLinkSendingForm" class="external-link" ng-submit="externalLinkSendingForm.$valid && sendExternalLink(data.externalLinkMsisdn)" novalidate custom-validation="externalLinkSendingForm" ng-if="!loading && !data.success"><div class="formrow"><div class="formfield forced no-margin" ng-class="{\'field-90\' : !compact, \'field-66\': compact}"><input id="phone" type="tel" ng-model="data.externalLinkMsisdn" pattern="07[0-9]{8}" validation-type="msisdn" ng-required="!notRequired"> <label for="phone"><i icon="fontawesome/phone" class="icon-inline"></i> <span translate="externalLinkSendingInput"></span></label></div><div class="formfield forced no-margin" ng-class="{\'field-10\' : !compact, \'field-33\': compact}"><button class="headless bottomless full-width icon-only next-to-input petrol"><i icon="fontawesome/paper-plane" class="icon-inline fill-white"></i></button></div></div></form><loading-button loading="true" ng-if="loading"></loading-button><div ng-if="data.success" class="info-message primary bottomless flex frow"><div class="margin-right flex-1-1-auto"><span translate="externalLinkSendingSuccessText" ng-if="!outboundMode"></span> <span translate="externalLinkSendingSuccessTextOutbound" ng-if="outboundMode"></span> <b>({{data.externalLinkMsisdn}})</b></div><a href ng-click="data.success = false;" translate="externalLinkSendingChangeButton" class="float-right white button outline headless bottomless"></a></div>');
$templateCache.put('/scripts/directives/external-link-sending/dirc_external-link-sending.html','<div ng-if="!loading && !data.success" class="external-link"><div class="formrow"><div class="formfield forced no-margin" ng-class="{\'field-90\' : !compact, \'field-66\': compact}"><input id="phone" type="tel" ng-model="data.externalLinkMsisdn" ng-required="!notRequired" ng-keydown="($event.keyCode === 13 || $event.keyCode === 32) && sendExternalLink(data.externalLinkMsisdn)" pattern="07[0-9]{8}" validation-type="msisdn"> <label for="phone"><i icon="fontawesome/phone" class="icon-inline"></i> <span translate="externalLinkSendingInput"></span></label></div><div class="formfield forced no-margin" ng-class="{\'field-10\' : !compact, \'field-33\': compact}"><div ng-click="sendExternalLink(data.externalLinkMsisdn)" class="button headless bottomless full-width icon-only next-to-input next-to-input-text petrol"><span translate="b2bSendButton"></span></div></div></div></div><loading-button loading="true" ng-if="loading"></loading-button><div ng-if="data.success" class="info-message primary bottomless flex frow"><div class="margin-right flex-1-1-auto"><span translate="externalLinkSendingSuccessText" ng-if="!outboundMode"></span> <span translate="externalLinkSendingSuccessTextOutbound" ng-if="outboundMode"></span> <b>({{data.externalLinkMsisdn}})</b></div><a href ng-click="data.success = false;" translate="externalLinkSendingChangeButton" class="float-right white button outline"></a></div>');
$templateCache.put('/scripts/directives/faq/dirc_faq.html','<h3>{{faq.title}}</h3><p>{{faq.description}}</p>');
$templateCache.put('/scripts/directives/fiber-linecheck/dirc_fiber-linecheck.html','<div class="fiber-tabs" ng-class="{\'pos-mode\': posMode}"><h3 class="fiber-tabs-header" translate="{{titleKey}}"></h3><div class="tabs-header" ng-if="!hideOtoSearch"><div ng-class="{selected: data.selectedTab === \'address\'}" ng-click="data.selectedTab = \'address\'"><i icon="fontawesome/map-marker"></i> <span translate="fiberTabAddressLabel"></span></div><div ng-class="{selected: data.selectedTab === \'otoId\'}" ng-click="data.selectedTab = \'otoId\'"><i icon="fontawesome/plug"></i> <span translate="fiberTabOtoIdLabel"></span></div></div><div class="fiber-body"><div ng-if="data.selectedTab === \'address\'"><form name="fiberAddressLinecheckForm" ng-submit="fiberAddressLinecheckForm.$valid && submit()" novalidate custom-validation="fiberAddressLinecheckForm"><address-checker auto-complete="true" address="data.address" check="true" allow-invalid="true" dont-warn-invalid="true" editable="!loading" show-co="false" force-swiss-address="true" is-line-check="true"></address-checker><div class="center" ng-if="!loading"><button class="petrol big bottomless" translate="fiberLineCheckByAddressCta"></button></div><loading-button ng-if="loading" loading="true"></loading-button></form></div><div ng-if="data.selectedTab === \'otoId\'"><form name="fiberOtoIdLinecheckForm" ng-submit="fiberOtoIdLinecheckForm.$valid && submit()"><div class="formrow"><div class="formfield"><input type="text" id="otoIdField" name="otoId" ng-model="data.otoId" oto-id autocomplete="off" maxlength="15" pattern="[A-Z]{1}.[0-9]{3}.[0-9]{3}.[0-9]{3}.[0-9X]{1}" ng-disabled="loading" ng-model-options="{allowInvalid: true}" required> <label translate="otoIdField"></label></div></div><div class="center"><b><a translate="whereToFindOtoLink" ng-click="showFindOtoIdHelpPopup()" class="text-petrol where-to-find-oto-id-link"></a></b></div><div class="center" ng-if="!loading"><button class="petrol big headless bottomless" translate="fiberLineCheckByOtoIdCta"></button></div><loading-button ng-if="loading" loading="true"></loading-button></form></div></div></div>');
$templateCache.put('/scripts/directives/fiber-status/dirc_fiber-status.html','<div ng-if="!loading"><div class="fiber-status" ng-if="status === \'waitingForBep\'"><img ng-src="/assets/images/fiber-status_waiting-for-bep.png" alt=""><h2 translate="fiber-status_waitingForBep_title"></h2><p translate="fiber-status_waitingForBep_description"></p><b ng-if="lang.data.current === \'en\'"><a href="https://support.yallo.ch/hc/en-gb/categories/360000124598-Internet" translate="fiber-status_waitingForBep_link" class="primary"></a></b> <b ng-if="lang.data.current === \'de\'"><a href="https://support.yallo.ch/hc/de/categories/360000124598" translate="fiber-status_waitingForBep_link" class="primary"></a></b> <b ng-if="lang.data.current === \'fr\'"><a href="https://support.yallo.ch/hc/fr/categories/360000124598" translate="fiber-status_waitingForBep_link" class="primary"></a></b> <b ng-if="lang.data.current === \'it\'"><a href="https://support.yallo.ch/hc/it/categories/360000124598" translate="fiber-status_waitingForBep_link" class="primary"></a></b></div><div ng-if="status === \'shipmentReturned\'"><order-status order="order" sub="subscription" on-return-handling-success="init"></order-status></div><div class="fiber-status" ng-if="status === \'shipmentUnderway\'"><img ng-src="/assets/images/fiber-status_shipment-underway.png" class="small" alt=""><h2 translate="fiber-status_shipmentUnderway_title"></h2><p translate="fiber-status_shipmentUnderway_description"></p><b ng-if="order.trackingNumber"><a href="https://www.post.ch/swisspost-tracking?formattedParcelCodes={{order.trackingNumber}}" target="_blank" class="primary" rel="nofollow" translate="fiber-status_shipmentUnderway_link"></a></b><br><br><br><br><br><div class="list-points"><div class="point"><div class="point-icon"><i icon="fontawesome/ban"></i></div><div class="point-content"><h3 translate="fiber-status_shipmentUnderway_dontPlugInTitle"></h3><p translate="fiber-status_shipmentUnderway_dontPlugInDescription"></p></div></div><div class="point"><div class="point-icon"><i icon="fontawesome/home"></i></div><div class="point-content"><h3 translate="installationAddress"></h3><p>{{subscription.installationInfo.address.streetName}} {{subscription.installationInfo.address.streetNumber}}<br>{{subscription.installationInfo.address.postCode}} {{subscription.installationInfo.address.city}}</p></div></div><div class="point"><div class="point-icon"><i icon="fontawesome/home"></i></div><div class="point-content"><h3 translate="checkoutSectionShippingAddress"></h3><p>{{order.address.street}} {{order.address.streetNumber}}<br>{{order.address.zip}} {{order.address.city}}</p></div></div></div></div><div class="fiber-status" ng-if="status === \'waitingForWishDate\'"><img ng-src="/assets/images/fiber-status_waiting-for-wish-date.png" class="small" alt=""><h2 translate="fiber-status_waitingForWishDate_title"></h2><div class="days-till-fiber-active" ng-if="daysTillFiberActive > -1"><i icon="fontawesome/clock-o"></i><p bind-html-compile="\'daysTillFiberActive\' | translate | replaceText : \'XX\' : daysTillFiberActive"></p></div><p ng-if="daysTillFiberActive >= 0" bind-html-compile="\'fiber-status_waitingForWishDate_description\' | translate | replaceText : \'XX.XX.XXXX\' : (subscription.installationInfo.predictedActivationDate | date : \'dd.MM.yyyy\')"></p><br><br><br><br><div class="list-points"><div class="point"><div class="point-icon"><i icon="fontawesome/ban"></i></div><div class="point-content"><h3 translate="fiber-status_waitingForWishDate_dontPlugInTitle"></h3><p translate="fiber-status_waitingForWishDate_dontPlugInDescription"></p></div></div><div class="point"><div class="point-icon"><i icon="fontawesome/home"></i></div><div class="point-content"><h3 translate="installationAddress"></h3><p>{{subscription.installationInfo.address.streetName}} {{subscription.installationInfo.address.streetNumber}}, {{subscription.installationInfo.address.postCode}} {{subscription.installationInfo.address.city}}</p></div></div></div></div><div class="fiber-status" ng-if="status === \'pluginRouter\'"><img ng-src="/assets/images/fiber-status_plug-in-router.png" class="small" alt=""><h2 translate="fiber-status_pluginRouter_title"></h2><p bind-html-compile="\'fiber-status_pluginRouter_description\' | translate | replaceText : \'oto_plug_port\' : subscription.installationInfo.plug"></p><b ng-if="lang.data.current === \'en\'"><a href="https://support.yallo.ch/hc/en-gb/categories/360000124598-Internet" translate="fiber-status_pluginRouter_link" class="primary"></a></b> <b ng-if="lang.data.current === \'de\'"><a href="https://support.yallo.ch/hc/de/categories/360000124598" translate="fiber-status_pluginRouter_link" class="primary"></a></b> <b ng-if="lang.data.current === \'fr\'"><a href="https://support.yallo.ch/hc/fr/categories/360000124598" translate="fiber-status_pluginRouter_link" class="primary"></a></b> <b ng-if="lang.data.current === \'it\'"><a href="https://support.yallo.ch/hc/it/categories/360000124598" translate="fiber-status_pluginRouter_link" class="primary"></a></b></div><div class="fiber-status" ng-if="status === \'waitingForAcceptance\'"><img ng-src="/assets/images/fiber-status_waiting-for-wish-date.png" class="small" alt=""><h2 translate="fiber-status_waitingForAcceptance_title"></h2><p translate="fiber-status_waitingForAcceptance_description"></p><div class="warning-message center cancel-message"><h2 translate="fiber_remember_to_cancel_title"></h2><span translate="fiber_remember_to_cancel_description"></span></div></div><div class="fiber-status" ng-if="status === \'waitingForOto\'"><img ng-src="/assets/images/fiber-status_waiting-for-oto.png" alt=""><h2 translate="fiber-status_waitingForOto_title"></h2><div class="days-till-fiber-active warning" ng-if="daysTillFiberActive >= 10"><i icon="fontawesome/clock-o"></i><p bind-html-compile="\'daysTillFiberActive\' | translate | replaceText : \'XX\' : (daysTillFiberActive - 10)"></p></div><div class="days-till-fiber-active warning" ng-if="daysTillFiberActive < 0"><i icon="fontawesome/clock-o"></i><p translate="daysTillFiberOverdue"></p></div><p translate="fiber-status_waitingForOto_description" ng-if="daysTillFiberActive >= 10"></p><p translate="fiber-status_waitingForOtoDelayed_description" ng-if="daysTillFiberActive < 10"></p><b><a ng-click="showFindOtoIdHelpPopup()" translate="fiber-status_waitingForOto_link" class="primary"></a></b><br><br><form name="otoIdForm" ng-submit="otoIdForm.$valid && submitOtoId()" novalidate custom-validation="otoIdForm"><div class="formrow oto-formrow" ng-if="!submitting"><div class="formfield forced no-margin" ng-class="{\'field-90\': !simpleCheckoutFooter}"><input type="text" id="otoIdField" name="otoId" oto-id ng-model="data.otoId" autocomplete="off" maxlength="15" pattern="[A-Z]{1}.[0-9]{3}.[0-9]{3}.[0-9]{3}.[0-9X]{1}" ng-disabled="submitting" ng-model-options="{allowInvalid: true}" validation-type="otoId" required> <label translate="otoIdField"></label></div><div class="formfield field-10 forced no-margin" ng-if="!simpleCheckoutFooter"><button class="headless bottomless full-width icon-only next-to-input petrol"><i icon="fontawesome/arrow-right" class="icon-inline fill-white"></i></button></div></div><loading-button loading="true" ng-if="submitting"></loading-button></form><br><br><b><a class="link primary" translate="fiber-status_waitingForOto_continueWithoutButton" ng-click="showContinueWithoutPopup()"></a></b></div><div ng-if="status !== \'waitingForWishDate\' && status !== \'shipmentUnderway\'"><br><br><br><br><div class="list-points"><div class="point"><div class="point-icon"><i icon="fontawesome/home"></i></div><div class="point-content"><h3 translate="installationAddress"></h3><p>{{subscription.installationInfo.address.streetName}} {{subscription.installationInfo.address.streetNumber}}, {{subscription.installationInfo.address.postCode}} {{subscription.installationInfo.address.city}}</p></div></div></div></div></div><loading-button loading="true" ng-if="loading"></loading-button>');
$templateCache.put('/scripts/directives/final-pricing-info/dirc_final-pricing-info.html','<div class="final-pricing-info"><div class="title-content" ng-if="!extension"><h2 class="bottomless" translate="finalPricingTitle"></h2><span ng-if="prodInfo.config.url != \'yallo_home_4g\' && prodInfo.config.url != \'yallo_home_5g\' && !prodInfo.config.hasTag(\'fiber\') && !prodInfo.config.hasTag(\'HFC\') && prodInfo.product.productType != \'tv\'" data-testid="final-pricing-info-msisdn">{{prodInfo.subscriptionDetails.msisdn}}<br><br></span></div><p ng-if="prodInfo.product.loadedExtraOnlineText && !state.agentLoggedIn">{{prodInfo.product.extraOnlineText}}</p><div ng-if="calcCosts() || getFirstProduct()"></div><div class="pricing-boxes"><div class="pricing-box" ng-if="totalrecurringCost"><span class="pricing-section-title first"><span translate="recurringCostsTitle"></span> <span ng-if="pricingLiCount(\'pricing-counter-recurring\') === 1">(<span translate="finalPricingTotalRecurring"></span>)</span></span><div><ul class="pricing-counter-recurring"><li data-testid="final-pricing-info-cost-recurring"><span translate="{{prodInfo.product.getText(\'title\', prodInfo.promotion)}}"><span ng-if="prodInfo.config.type == \'postpaid\'">({{prodInfo.config.lockinLength}} <span translate="contractDurationShortPost"></span>)</span></span> <span data-testid="final-pricing-info-cost-recurring-amount">{{prodInfo.config.recurringCost | customCurrency : true}}</span></li><li ng-if="deviceCostData" data-testid="final-pricing-info-cost-device"><span>{{prodInfo.device.title}} <span ng-if="prodInfo.device.capacity">{{prodInfo.device.capacity | deviceCapacity}}</span> {{prodInfo.device.color.name}}</span> <span data-testid="final-pricing-info-cost-device-amount">{{deviceCostData.recurringCost | customCurrency : true}}</span></li><li ng-if="prodInfo.takeHandsetInsurance" data-testid="final-pricing-info-cost-insurance"><span translate="handSetInsurance"></span> <span data-testid="final-pricing-info-cost-insurance-amount">{{handsetInsurance | customCurrency : true}}</span></li><li ng-repeat="option in prodInfo.options track by option.id" ng-if="::option.autoRenews" data-testid="final-pricing-info-cost-option"><span bind-html-compile="option.getText(\'title\') | translate"></span> <span data-testid="final-pricing-info-cost-option-amount">{{(isSelfRegistration ? 0 : option.cost) | customCurrency : true}}</span></li><li ng-if="prodInfo.promotion.recurringDiscount" class="promotion text-red" data-testid="final-pricing-info-cost-recurring-discount"><span>{{prodInfo.promotion.recurringDiscountDescriptionText}}</span> <span data-testid="final-pricing-info-cost-recurring-discount-amount" ng-if="!prodInfo.promotion.dontCrossOutPrice">- {{prodInfo.promotion.recurringDiscount | customCurrency : true}}</span></li><li ng-if="currentPromo" class="promotion text-red" data-testid="final-pricing-info-cost-promo"><span translate="keepCurrentPromoText"></span> <span data-testid="final-pricing-info-cost-promo-amount">- {{currentPromo.amount | customCurrency : true}}</span></li></ul><h4 ng-if="pricingLiCount(\'pricing-counter-recurring\') > 1" data-testid="final-pricing-info-cost-total"><span translate="newStartingPrice"></span> <span data-testid="final-pricing-info-cost-total-amount">{{(isSelfRegistration ? 0 : totalrecurringCost - totalRecurringDiscount) | customCurrency : true}}</span></h4></div></div><div class="pricing-box"><div ng-if="state.agentLoggedIn && totalChargedAtPos"><span class="pricing-section-title" ng-if="pricingLiCount(\'pricing-counter-pos\') === 1"><span ng-if="showInflationMessage" translate="priceIncreaseMessage"></span><br><br><span translate="atPosCostsTitle"></span></span><ul class="pricing-counter-pos"><li ng-if="!extension"><span translate="upfrontDescriptionFiber" ng-if="prodInfo.config.isFiber"></span> <span translate="upfrontDescription" ng-if="!prodInfo.config.isFiber"></span> <span>{{simPrice | customCurrency : true}}</span></li><li ng-if="deviceCostData"><span>{{prodInfo.device.title}} <span ng-if="prodInfo.device.capacity">{{prodInfo.device.capacity | deviceCapacity}}</span> {{prodInfo.device.color.name}}</span> <span>{{deviceCostData.upfrontCost | customCurrency : true}}</span></li><li ng-if="prodInfo.promotion.waiveActivationFee" class="promotion text-red"><span ng-if="prodInfo.promotion">{{prodInfo.promotion.upfrontDiscountDescriptionText}}</span> <span ng-if="!prodInfo.promotion.dontCrossOutPrice">- {{simPrice | customCurrency : true}}</span></li></ul><h4 ng-if="pricingLiCount(\'pricing-counter-pos\') > 1"><span translate="finalPricingTotalAtPos"></span> <span>{{totalChargedAtPos - totalUpfrontDiscount | customCurrency : true}}</span></h4></div><div ng-if="deviceCostData && totalCreditCardCost && !state.agentLoggedIn"><span class="pricing-section-title"><span translate="creditCardCostsTitle"></span> <span>(<span translate="finalPricingTotalOnCreditCard"></span>)</span></span><ul><li><span>{{prodInfo.device.title}} <span ng-if="prodInfo.device.capacity">{{prodInfo.device.capacity | deviceCapacity}}</span> {{prodInfo.device.color.name}}</span> <span>{{deviceCostData.upfrontCost | customCurrency : true}}</span></li></ul></div><div ng-if="!state.agentLoggedIn && prodInfo.config.type == \'prepaid\'"><span class="pricing-section-title"><span translate="creditCardCostsTitle"></span> <span>(<span translate="finalPricingTotalOnCreditCard"></span>)</span></span><ul><li><span translate="prepaidSimCardCharge"></span> <span>{{totalCreditCardCost | customCurrency : true}}</span></li></ul></div><div ng-if="(totalUpfrontCost && prodInfo.config.type == \'postpaid\') || (rateplanChangeAdminFee && prodInfo.config.hasTag(\'HFC\'))"><span class="pricing-section-title"><span ng-if="showInflationMessage" translate="priceIncreaseMessage"></span><br><br><span translate="onBillCostsTitle"></span> <span ng-if="pricingLiCount(\'pricing-counter-bill\') === 1">(<span ng-if="state.customerLoggedIn" translate="finalPricingTotalOnNextBill"></span><span ng-if="!state.customerLoggedIn" translate="finalPricingTotalOnBill"></span>)</span></span><ul class="pricing-counter-bill"><li ng-if="!state.agentLoggedIn && !extension"><span ng-class="{\'text-red\' : rs.activationFeesOffered[prodInfo.config.url]}" ng-if="!prodInfo.config.hasTag(\'fiber\') && !prodInfo.config.hasTag(\'HFC\')" translate="{{rs.activationFeesOffered[prodInfo.config.id] ? \'upfrontDescriptionActivationOffered\' : \'upfrontDescription\'}}"></span> <span ng-class="{\'text-red\' : rs.activationFeesOffered[prodInfo.config.url]}" ng-if="prodInfo.config.hasTag(\'fiber\')" translate="{{rs.activationFeesOffered[prodInfo.config.id] ? \'upfrontDescriptionActivationOfferedFiber\' : \'upfrontDescriptionFiber\' }}"></span> <span ng-class="{\'text-red\' : rs.activationFeesOffered[prodInfo.config.url]}" ng-if="prodInfo.config.hasTag(\'HFC\')" translate="{{rs.activationFeesOffered[prodInfo.config.id] ? \'upfrontDescriptionActivationOfferedHFC\' : \'upfrontDescriptionHFC\' }}"></span> <span ng-class="{\'crossed-out\' : rs.activationFeesOffered[prodInfo.config.url]}">{{simPrice | customCurrency : true}}</span> <span ng-show="rs.activationFeesOffered[prodInfo.config.url]" class="text-red">&nbsp;&nbsp;<span>{{0 | customCurrency : true}}</span></span></li><li ng-if="state.agentLoggedIn && !extension"><span translate="upfrontDescriptionHFC" ng-if="prodInfo.config.hasTag(\'HFC\')"></span> <span translate="upfrontDescriptionFiber" ng-if="prodInfo.config.hasTag(\'fiber\')"></span> <span translate="upfrontDescription" ng-if="!prodInfo.config.hasTag(\'HFC\') && !prodInfo.config.hasTag(\'fiber\')"></span> <span>{{simPrice | customCurrency : true}}</span></li><li ng-if="extension && rateplanChangeFee" class="red"><span translate="rateplanChangeFee"></span> <span>{{rateplanChangeFee | customCurrency : true}}</span></li><li ng-if="extension && rateplanChangeAdminFee" class="red"><span translate="rateplanChangeAdminFee"></span> <span>{{rateplanChangeAdminFee | customCurrency : true}}</span></li><li ng-repeat="option in prodInfo.options track by option.id" ng-if="::!option.autoRenews"><span bind-html-compile="option.getText(\'title\') | translate"></span> <span>{{::option.cost | customCurrency : true}}</span></li><li ng-if="(!state.agentLoggedIn || !totalChargedAtPos) && prodInfo.promotion.waiveActivationFee" class="promotion text-red"><span ng-if="prodInfo.promotion">{{prodInfo.promotion.upfrontDiscountDescriptionText}}</span> <span ng-if="!prodInfo.promotion.dontCrossOutPrice">- {{simPrice | customCurrency : true}}</span></li></ul><h4 ng-if="pricingLiCount(\'pricing-counter-bill\') > 1"><span translate="finalPricingTotalOnBill"></span> <span>{{totalUpfrontCost - totalUpfrontDiscount | customCurrency : true}}</span></h4></div></div></div></div>');
$templateCache.put('/scripts/directives/find-existing-customer/dirc_find-existing-customer.html','<form name="findExistingCustomerForm" ng-submit="findExistingCustomerForm.$valid && find()" custom-validation="findExistingCustomerForm" novalidate><div class="formblock"><div><p class="hint-text" translate="enterCustDataDescription"></p><tabs data="tabs" ng-class="{bottomless: tabOptions.activeTab == \'findBySms\', \'hide-tab-titles\': pickupMode}" tab-key="\'key\'" tab-title="\'title\'" options="tabOptions"><div ng-if="tabOptions.activeTab == \'altFindByUsername\'"><p translate="warnNoUseSearchMethod" ng-if="!pickupMode" class="bottomless"></p><div class="formrow"><div class="formfield"><input type="text" ng-model="data.username" id="username" class="focus-first" autocomplete="off" ng-disabled="!editable" required> <label for="username" translate="msisdnField"></label></div></div><div class="formrow"><div class="formfield"><app-date data="data.dob" editable="editable" autocomplete="bday" fewest-days-from-now="-43800" most-days-from-now="-4745" required="true"><span translate="dobField"></span></app-date></div></div></div><div ng-if="tabOptions.activeTab == \'findByName\'"><p translate="warnNoUseSearchMethod" class="bottomless"></p><div class="formrow"><div class="formfield field-50"><input type="text" ng-model="data.firstName" id="firstName" class="focus-first" ng-disabled="!editable" required> <label for="firstName" translate="firstNameField"></label></div><div class="formfield field-50"><input type="text" ng-model="data.lastName" id="lastName" ng-disabled="!editable" required> <label for="lastName" translate="lastNameField"></label></div></div><div class="formrow"><div class="formfield"><app-date data="data.dob" editable="editable" autocomplete="bday" fewest-days-from-now="-43800" most-days-from-now="-4745" required="true"><span translate="dobField"></span></app-date></div></div></div></tabs></div><div ng-if="tabOptions.activeTab !== \'findBySms\'"><div ng-show="!rs.isMobile"><br><br></div><loading-button loading="!editable" class="small inline align-right"><span translate="findUserButton"></span></loading-button></div><multiple-customer-selection ng-if="showCustomerSelection" accounts="accounts" on-select="selectAccount" on-cancel="onCancel"></multiple-customer-selection></div></form><div ng-if="tabOptions.activeTab === \'findBySms\'"><easy-login on-success="easyLoginSuccess"></easy-login></div>');
$templateCache.put('/scripts/directives/footer/dirc_footer.html','<div class="newsletter-footer screenblock shrinked" ng-show="!rs.isPos" ng-style="{\'background-color\':  isBlackFriday ? \'black\' : \'\'}"><div class="content"><h2 translate="footerNewsletterTitle" ng-show="!news.success && !rs.isPos && !state.customerLoggedIn"></h2><div class="footer-row"><div class="footer-social"><newsletter-form source="\'footer\'" ng-show="!news.success && !rs.isPos && !state.customerLoggedIn"></newsletter-form><div class="social-icons"><a rel="noopener" translate-attr="{\'href\':\'facebookLink\'}" target="_blank" class="social-icon"><i icon="fontawesome/facebook" class="size-2 fill-navy"></i> </a><a rel="noopener" translate-attr="{\'href\':\'youtubeLink\'}" target="_blank" class="social-icon"><i icon="fontawesome/youtube" class="size-2 fill-navy"></i> </a><a rel="noopener" translate-attr="{\'href\':\'instagramLink\'}" target="_blank" class="social-icon"><i icon="fontawesome/instagram" class="size-2 fill-navy"></i></a></div></div><div class="footer-shop"><a c-route="/shop" is-active="/shop" class="flex frow"><i icon="fontawesome/map-marker" class="size-2 fill-white"></i><span translate="footerShops"></span></a></div></div></div></div><div class="footer screenblock shrinked" ng-if="!rs.isPos" ng-style="{\'background-color\':  isBlackFriday ? \'black\' : \'\'}"><div class="content"><div class="row"><div class="footer-menu-section"><h3 translate="footerQuickLinksTitle"></h3><ul><li><a c-route="/" is-active="/"><span translate="footerHomeButton"></span></a></li><li><a ng-href="https://support.lebara.ch/hc/{{zendeskLang}}/"><span translate="footerSupportButton"></span></a></li><li><a c-route="/awards" is-active="/awards"><span translate="AwardsTitle"></span></a></li><li><a c-route="/roaming" is-active="/roaming"><span translate="roamingInfoTitle"></span></a></li><li><a ng-href="/assets/other/charges_and_fees_{{lang}}.pdf" target="_blank"><span translate="footerChargesAndFeesButton"></span></a></li></ul></div><div class="footer-menu-section"><h3 translate="footerProductsTitle"></h3><ul><li><a c-route="/mobile-products" is-active="/mobile-products"><span translate="footerMobileButton"></span></a></li><li><a is-active="/product/lebara_plus" c-route="/product/lebara_data"><span translate="footerMBB"></span></a></li><li><a is-active="/product/lebara_plus" c-route="/product/lebara_plus"><span translate="footerPrepaidButton"></span></a></li><li><a is-active="/product/lebara_data_unlimited" c-route="/product/lebara_data_unlimited"><span translate="footerDataPrepaid"></span></a></li><li><a c-route="/5g" is-active="/5g"><span>5G</span></a></li><li><a c-route="/options" is-active="/options"><span translate="footerOptionsButton"></span></a></li><li><a c-route="/wifi-calling" is-active="/wifi-calling"><span translate="wiFiCalling"></span></a></li><li><a c-route="/esim" is-active="/esim"><span>eSIM</span></a></li></ul></div><div class="footer-menu-section"><h3 translate="footerMyLebaraTitle"></h3><ul><li><a c-route="/account" is-active="/account"><span translate="footerAccountButton"></span></a></li><li><a c-route="/account/bills" is-active="/account/bills"><span translate="footerBillsButton"></span></a></li><li><a c-route="/account/settings" is-active="/account/settings"><span translate="footerSettingsButton"></span></a></li><li><a c-route="/topup" is-active="/topup"><span translate="footerPrepaidTopupButton"></span></a></li><li ng-if="!account.isLightCustomer || account.getSubscriptionsByType(\'prepaid\', true).length"><a c-route="/account/deals" is-active="/account/deals"><span translate="dealsTitle"></span></a></li></ul></div><div class="footer-menu-section"><h3 translate="footerAboutTitle"></h3><ul><li><a c-route="/company" is-active="/company" target="_blank"><span translate="footerCompanyButton"></span></a></li><li><a c-route="/media" is-active="/media"><span translate="footerMediaButton"></span></a></li><li><a c-route="/terms" is-active="/terms"><span translate="footerTermsButton"></span></a></li><li><a c-route="/data-protection" is-active="/data-protection"><span translate="dataProtectionLinkFooter"></span></a></li><li><a c-route="/contact" is-active="?/contact"><span translate="footerContactUsButton"></span></a></li><li><a c-route="/pos" is-active="/pos"><span translate="footerPartnerLogin"></span></a></li></ul></div></div></div></div><div class="footer-secondary screenblock shrinked" ng-style="{\'background-color\':  isBlackFriday ? \'black\' : \'\'}"><div class="content row" ng-show="!rs.isPos"><div class="footer-secondary-section logos"><a c-route="/awards"><img translate-attr="{alt:\'alt_connect-outstanding\'}" ng-src="/assets/images/connect_{{lang}}_2022.png" height="100" width="87"></a></div></div><div class="content row"><div class="footer-secondary-section copy-right">{{\'copyrightMessage\' | translate | replaceText : \'XXXX\' : year}}</div></div></div>');
$templateCache.put('/scripts/directives/footer-contact/dirc_footer-contact.html','<h2><span><span translate="linkToFAQProductPage"></span><span translate-compile translate="linkToFAQProductPagePartFAQ"></span><span translate="breitesOder" ng-if="(chat.showChat() || chat.showCall()) && !(chat.showChat() && chat.showCall())"></span>{{chat.showCall() && chat.showChat() ? \',\' : \'\'}}<span translate-compile ng-if="chat.showCall()" translate="linkToFAQProductPagePartPhone"></span><span translate="breitesOder" ng-if="chat.showCall() && chat.showChat()"></span><span translate-compile ng-if="chat.showChat()" translate="linkToFAQProductPagePartChat"></span>.</span></h2>');
$templateCache.put('/scripts/directives/force-activate/dirc_force-activate.html','<div class="force-activate"><form name="forceActivateForm" ng-submit="forceActivateForm.$valid && activate()" custom-validation="forceActivateForm" novalidate><div class="formrow"><div class="formfield field-50"><input id="39" type="tel" ng-model="msisdn" validation-type="msisdn" pattern="07[0-9]{8}" required> <label for="39" translate="msisdnField"></label></div><div class="formfield field-50"><input id="40" type="text" ng-model="puk" validation-type="puk" pattern="[0-9]{8}" required> <label for="40" translate="pukField"></label></div></div><div><br><loading-button loading="submitting" class="small inline centered"><span translate="forceActivateButton"></span></loading-button></div></form></div>');
$templateCache.put('/scripts/directives/format-date/dirc_format-date.html','<span ng-if="!longFormat">{{dateObj | date : format }}</span> <span ng-if="longFormat">{{dateObj.toLocaleDateString(locale,options)}} {{dateObj | date : \'HH:mm\'}}</span>');
$templateCache.put('/scripts/directives/free-tv/dirc_free-tv-signUp.html','');
$templateCache.put('/scripts/directives/gdpr-all-opt-in/dirc_gdpr-all-opt-in.html','<div ng-if="show"><p class="form-section-title has-space-above" translate="gdprAllOptInTitle"></p><div class="formrow"><div class="formfield field-100"><input type="checkbox" ng-model="data.gdprAllOptIn" id="gdprAllOptIn" ng-disabled="!editable"> <label for="gdprAllOptIn" translate="gdprAllOptInField" class="small-label"></label></div></div></div>');
$templateCache.put('/scripts/directives/gdpr-cookie/dirc_gdpr-cookie.html','<div class="container" ng-if="showGdpr()" ng-class="{closing : closing}"><div class="legal-text"><span><span translate="dpCookieBarText"></span> <span><a c-route="/cookie-policy"><span translate="dpHere"></span></a></span></span></div><div class="confirm-button"><button class="petrol center bottomless headless" ng-click="accepted();">OK</button></div></div>');
$templateCache.put('/scripts/directives/global-linecheck-results/dirc_global-linecheck-results.html','<div ng-class="rs.globalLineCheckResults.messages[network]"><div class="linecheck"><div class="results no-margin" ng-slide-down="rs.globalLineCheckResults[network] && rs.globalLineCheckResults.messages[network]" lazy-render duration=".2"><div class="flex frow" ng-class="{\'info-message\' : rs.globalLineCheckResults.messages[network] !== \'bad\' && rs.globalLineCheckResults.messages[network] !== \'slow\' && !simpleMode, \'warning-message\' : (rs.globalLineCheckResults.messages[network] === \'slow\' || rs.globalLineCheckResults.messages[network] === \'bad\') && !simpleMode}"><div class="result-data"><i icon="speedometer" ng-if="rs.globalLineCheckResults.messages[network] !== \'bad\'"></i> <img src="/assets/images/no-connection.png" ng-if="rs.globalLineCheckResults.messages[network] === \'bad\'" alt=""><p class="result padding-right" bind-html-compile="((rs.globalLineCheckResults.messages[network] + \'LineCheck\' + type + (state.agentLoggedIn ? \'Pos\' : \'\')) + network) | translate | replaceText : \'XXXX\' : rs.globalLineCheckResults[network].indoor.maxBandwidthDown / 1000 | replaceText : \'YYYY\' : rs.globalLineCheckResults[network].indoor.maxBandwidthUp / 1000"></p></div><button translate="testOtherAddress" ng-if="testMore" ng-click="testMoreAddresses()" class="bottomless petrol" type="button"></button></div></div></div></div>');
$templateCache.put('/scripts/directives/handset-insurance-add/dirc_handset-insurance-add.html','<div class="hardware-insurance-add" ng-if="!data.loading"><button translate="cancel" class="outline" ng-click="onCancel()" ng-if="subscription.hardwareInsurance"></button><form name="addForm" ng-submit="addForm.$valid && addInsurance()" custom-validation="addForm"><div class="formrow"><div class="formfield field-50"><select ng-model="data.manufacturer" id="manufacturer" ng-change="getModels(data.manufacturer)" required><option ng-repeat="manufacturer in data.manufacturers | orderBy : \'toString()\' track by $index" ng-value="manufacturer">{{manufacturer}}</option></select> <label for="manufacturer" translate="hardwareManufacturer"></label></div><div class="formfield field-50"><select ng-model="data.model" id="model" ng-disabled="!data.manufacturer || data.gettingModels" ng-change="updateModel(data.model)" required><option ng-repeat="model in data.models | orderBy : \'toString()\' track by $index" ng-value="model">{{model}}</option></select> <label for="model" translate="hardwareModel"></label></div></div><div class="hardware-insurance-cost center"><br><span translate="insurancePolicyCost"></span>: <b>{{SavingsOptions.insuranceOption.cost | customCurrency}}</b> <span translate="recurringCostShort"></span></div><div class="center"><button translate="confirmAddInsurance" class="big bottomless"></button></div></form></div><loading-button loading="true" ng-if="data.loading" type-button="true"></loading-button>');
$templateCache.put('/scripts/directives/handset-stock-counter/dirc_handset-stock-counter.html','<div class="device-item-stock" ng-if="stock" ng-class="{\'inline\': inline}"><div ng-if="!inline" class="float">{{\'deviceLimitedStock\' | translate | replaceText : \'XX\' : stock}}</div><span ng-if="inline" class="inline">{{stock}}</span></div><div class="device-item-stock" ng-if="!stock || stock <= 0" ng-class="{\'inline\': inline}"><div ng-if="!inline" class="float">{{\'soldOut\' | translate }}</div><span ng-if="inline" class="inline">0</span></div>');
$templateCache.put('/scripts/directives/header/dirc_header.html','<section class="site-header" ng-style="{\'background-color\':  isBlackFriday ? \'black\' : \'\'}"><div class="content"><div class="header-content"><a ng-click="back()" class="backbutton app" ng-if="rs.app && canGoBack()"><i icon="fontawesome/chevron-left" class="size-1"></i></a> <a ng-click="interaction(\'login\')" c-route="{{rs.isPos ? ((state.customerLoggedIn && state.agentLoggedIn) ? \'/pos/existing-customer\' : state.agentLoggedIn ? \'/pos\' : \'/pos-login\') : state.customerLoggedIn ? \'/account\' : rs.app ? \'/account\' : \'\'}}" dont-link="{{roamingCockpit}}" class="logo" ng-class="{disabled: checkout.disableFields, halloween: showHalloweenLogo}"><img alt="Lebara logo" ng-src="/assets/images/lebara-logo{{rs.isPos || (isSelfcare && !rs.checkoutMode.active) ? \'-white\' : \'\'}}.png"></a><main-nav ng-if="!checkoutMode.active && !roamingCockpit && !rs.isPos"></main-nav><div class="agent-header" ng-if="rs.isPos" translate="posHeader"></div><div class="spacer"></div><span ng-if="state.agentLoggedIn" ng-click="agent.agentRightsPopup.show()" class="agent-rights-button hide-on-mobile"><i icon="fontawesome/info-circle" class="icon-inline"></i></span> <span ng-if="state.agentLoggedIn" class="agent-username hide-on-mobile">({{agent.data.username}})</span> <a href ng-if="state.agentLoggedIn" ng-click="agent.logout()" class="button outline white" id="agent-logout-button"><span class="inline-loader in-button white" ng-show="state.agentLoggingOut"></span>Logout</a><interaction-widget class="header-mode" ng-if="!rs.isPos && !rs.app && !roamingCockpit"></interaction-widget><div ng-if="!state.customerLoggedIn && state.customerLoggingIn && !rs.isPos && !checkoutMode.active && !roamingCockpit" class="header-account-section" data-testid="header-account-section-loader"><span class="inline-loader white"></span></div><div ng-if="state.customerLoggedIn && !rs.isPos && !checkoutMode.active && !roamingCockpit" class="header-account-section" ng-class="{dropdownclose: dropdownclose}" data-testid="header-account-section-dropdown"><a c-route="/account?id={{location.search().id}}" ng-click="interaction(\'accountHome\')" is-active="?/account" class="my-customer-button mainnav-item loggedin" ng-if="isDesktop"><i icon="fontawesome/user" class="icon-inline"></i> <span>{{account.currentUser.firstName}}</span> <i icon="fontawesome/chevron-down" class="icon-inline drop-down-arrow"></i></a><div ng-if="!state.agentLoggedIn" class="mainnav-list dropdown" role="navigation"><ul class="account-menu"><div ng-if="state.customerLoggedIn"><a class="not-clickable"><span translate="menuMyLebara"></span></a><li><a is-active="/account" c-route="/account?id={{location.search().id}}" ng-click="closeDropdown();interaction(\'subscriptions\')" data-testid="header-account-nav-subscriptions"><span translate="mySubscriptions"></span></a></li><li ng-if="account.postpaidBillingGroup"><a is-active="?/account/bills" c-route="/account/bills" ng-click="closeDropdown();interaction(\'bills\')" data-testid="header-account-nav-bills"><span translate="mybills"></span></a></li><li ng-if="account.prepaidBillingGroups | objSize"><a is-active="?/account/topup" c-route="/account/topup" ng-click="closeDropdown();interaction(\'topup\')" data-testid="header-account-nav-topup"><span translate="accountTopupMenuButton"></span></a></li><li class="mainnav-sub-item" ng-show="rs.showPromotion && !state.customerLoggedIn"><a is-active="/internet-deal/form,/internet-deal/success,?/promo" c-route="/promo" ng-click="closeDropdown();interaction(\'promotion\')" data-testid="header-account-nav-promotion"><span translate="promotionLink"></span></a></li><li ng-if="!account.isLightCustomer || account.getSubscriptionsByType(\'prepaid\', true).length"><a is-active="?/account/deals" c-route="/account/deals?id={{location.search().id}}" ng-click="closeDropdown();interaction(\'deals\')" data-testid="header-account-nav-deals"><span translate="myDeals2"></span></a></li><li class="border-bottom"><a is-active="?/account/settings" c-route="/account/settings?id={{location.search().id}}" ng-click="closeDropdown();interaction(\'settings\')" data-testid="header-account-nav-settings"><span translate="mySettings"></span></a></li></div><ul><li class="mainnav-sub-item"><a is-active="?/mobile-products" c-route="/mobile-products" id="mobile-menu-plan" ng-click="closeDropdown();interaction(\'postpaidProducts\')" translate="menuPlan"></a></li><a class="not-clickable"><span translate="dropdownPrepaid"></span></a><ul class="mainnav-sub-items"><li class="mainnav-sub-item"><a is-active="/product/lebara_plus" c-route="/product/lebara_plus" ng-click="closeDropdown();interaction(\'lebaraPlus\')"><span translate="dropdownMobile"></span></a></li><li class="mainnav-sub-item" ng-if="!disableDevices"><a is-active="/product/lebara_data_unlimited" c-route="/product/lebara_data_unlimited" ng-click="closeDropdown();interaction(\'lebaraData\')"><span translate="dropdownData"></span></a></li><li class="mainnav-sub-item"><a is-active="/topup,/account/topup" c-route="{{state.customerLoggedIn ? \'/account/topup\' : \'/topup\'}}" ng-click="closeDropdown();interaction(\'topup\')"><span translate="dropdownTopup"></span></a></li></ul></ul><ul><li><a ng-href="https://support.lebara.ch/hc/{{s.zendeskLang}}" rel="noopener" id="support-menu-item2" translate="menuSupport" ng-click="interaction(\'support\')"></a></li><li><a href ng-click="account.logout();interaction(\'logout\')"><i icon="fontawesome/sign-out" class="icon-inline" ng-show="!state.customerLoggingOut"></i> <span class="inline-loader" ng-show="state.customerLoggingOut"></span> <span translate="logoutButton"></span></a></li></ul></ul></div></div><span ng-if="!state.customerLoggedIn && !state.customerLoggingIn && !rs.isPos && !checkoutMode.active && !roamingCockpit && !rs.app" class="header-account-section" ng-class="{dropdownclose: dropdownclose || !state.customerLoggedIn}" data-testid="header-account-section-login"><a dont-link="{{currentPage && currentPage != \'login\' && currentPage != \'account\'}}" ng-click="msLogin()" is-active="?/account" class="my-customer-button mainnav-item loggedin" id="loginButton" data-testid="login-button"><i icon="fontawesome/user-o" class="icon-inline"></i> <span translate="loginButton"></span> <i ng-show="state.customerLoggedIn" icon="fontawesome/chevron-down" class="icon-inline"></i></a><div class="mainnav-list dropdown"><ul class="account-menu"><li is-active="/account"></li><li is-active="/account"><a c-route="/account?id={{location.search().id}}" ng-click="closeDropdown();interaction(\'accountHome\')"><span translate="subscriptionsMenuButton"></span></a></li><li is-active="?/account/settings"><a c-route="/account/settings?id={{location.search().id}}" ng-click="closeDropdown();interaction(\'settings\')"><span translate="settingsMenuButton"></span></a></li><li ng-show="account.postpaidBillingGroup" is-active="?/account/bills"><a c-route="/account/bills" ng-click="closeDropdown();interaction(\'bills\')"><span translate="billsMenuButton"></span></a></li><li is-active="/account/topup" ng-show="account.prepaidBillingGroups | objSize"><a c-route="/account/topup" ng-click="closeDropdown();interaction(\'topup\')"><span translate="accountTopupMenuButton"></span></a></li><li><a href ng-click="loginPopup.show();interaction(\'deals\')"><i icon="fontawesome/sign-out" class="icon-inline"></i> <span translate="loginButton"></span></a></li></ul></div></span><div ng-if="roamingCockpit && state.customerLoggedIn && state.roamingCockpitSelectedSubscription"><auto-country-selector sub-data="state.roamingCockpitSelectedSubscription"></auto-country-selector></div><a href ng-click="account.logout();interaction(\'logout\')" ng-if="roamingCockpit && state.customerLoggedIn && isDesktop" class="white"><i icon="fontawesome/sign-out" class="icon-inline fill-white"></i> <span translate="logoutButton"></span></a><language-picker ng-if="isPos || isDesktop || (rs.isMobile && checkoutMode.picker)" class="language-picker"></language-picker><mobile-menu ng-if="!isDesktop && !rs.isPos && !checkout.disableFields && !checkoutMode.active"></mobile-menu></div><pos-account-info ng-if="state.agentLoggedIn"></pos-account-info></div></section>');
$templateCache.put('/scripts/directives/hfc-subscription/dirc_hfc-subscription.html','<section class="screenblock light-smoke-gradient ng-scope"><div class="content"><div ng-if="subscription.hfcStatus == \'ordered\'" class="status-ordered"><img ng-src="/assets/images/fiber-status_waiting-for-wish-date.png" class="small" alt=""><h2 translate="sc.hfcStatus.ordered.title"></h2><p translate="sc.hfcStatus.ordered.description"></p><div class="warning-message center cancel-message"><h2 translate="sc.hfc_remember_to_cancel.title"></h2><span translate="sc.hfc_remember_to_cancel.description"></span></div></div><div ng-if="subscription.hfcStatus == \'shipped\'" class="status-shipped"><img ng-src="/assets/images/fiber-status_shipment-underway.png" class="small" alt=""><h2 translate="sc.hfcStatus.shipped.title"></h2><p translate="sc.hfcStatus.shipped.description"></p><b ng-if="order.trackingNumber"><a href="https://www.post.ch/swisspost-tracking?formattedParcelCodes={{order.trackingNumber}}" target="_blank" class="primary" rel="nofollow" translate="hfc-status_shipmentUnderway_link"></a></b></div><div ng-if="subscription.hfcStatus == \'active\'" class="status-active"><img src="/assets/images/hfc-online.png" alt=""><h2 translate="sc.hfcStatus.active.title"></h2><p translate="sc.hfcStatus.active.description" class="bottomless"></p></div><div ng-if="subscription.hfcStatus == \'active\'"><subscription-circle-group data="subscription"></subscription-circle-group></div><div ng-if="subscription.hfcStatus == \'pendingActivation\'" class="status-shipped"><img ng-src="/assets/images/fiber-status_waiting-for-wish-date.png" class="small" alt=""><h2 translate="hfc-status_waitingForWishDate_title"></h2><div class="days-till-fiber-active" ng-if="daysTillFiberActive > -1"><i icon="fontawesome/clock-o"></i><p bind-html-compile="\'daysTillFiberActive\' | translate | replaceText : \'XX\' : daysTillFiberActive"></p></div><p ng-if="daysTillFiberActive >= 0" bind-html-compile="\'hfc-status_waitingForWishDate_description\' | translate | replaceText : \'XX.XX.XXXX\' : (subscription.installationInfo.predictedActivationDate | date : \'dd.MM.yyyy\')"></p></div><div ng-if="subscription.hfcStatus == \'returned\'" class="status-returned-panel"><i icon="sub-warn"></i><h2 translate="orderStatus_return_accepted_title"></h2><p translate="orderStatus_return_accepted_description"></p><a href ng-if="order" ng-click="returnHandlingPopup.show()" class="button full-width-on-mobile big bottomless" translate="returnHandlingCta"></a></div><subscription-warnings ng-if="subscription.status == \'terminated\' || subscription.hfcStatus == \'terminated\'" sub="subscription"></subscription-warnings><div ng-if="subscription.hfcStatus == \'onGoing\' && subscription.isHFC" class="status-onGoing"><div class="days-till-fiber-active"><i icon="fontawesome/hourglass"></i></div><h2 translate="sc.hfcStatus.{{subscription.hfcStatus}}.title"></h2><p bind-html-compile="\'sc.hfcStatus.onGoing.description\' | translate | replaceText : \'XX.XX.XXXX\' : (subscription.relocationAddress.requestDate | date : \'dd.MM.yyyy\')"></p><p>{{"checkoutRelocationAddress"| translate}}<br>{{subscription.relocationAddress.address.streetName}}, <span>{{subscription.relocationAddress.address.streetNumber}}</span>, <span>{{subscription.relocationAddress.address.postCode}},</span> <span>{{subscription.relocationAddress.address.city}}</span></p></div><div ng-if="subscription.hfcStatus === \'pendingRateplanChange\'" class="info-message center"><h3 class="bottomless">{{\'pendingRateplanChangeText\' | translate | replaceText : \'NEW_RATEPLAN\' : subscription.pendingRateplanChange.newRateplan.name | replaceText : \'CHANGE_DATE\' : (subscription.pendingRateplanChange.changeDate | date : \'dd/MM/yyyy\') }}</h3></div><div ng-if="subscription.hfcStatus != \'pendingActivation\' && subscription.hfcStatus !== \'pendingRateplanChange\' && subscription.hfcStatus != \'ordered\' && subscription.hfcStatus != \'shipped\' && subscription.hfcStatus != \'active\' && subscription.hfcStatus != \'returned\' && subscription.hfcStatus != \'terminated\' && subscription.status != \'terminated\' && subscription.hfcStatus != \'onGoing\'"><h2 translate="sc.hfcStatus.{{subscription.hfcStatus}}.title"></h2><p translate="sc.hfcStatus.{{subscription.hfcStatus}}.description"></p></div><div class="installation-address list-points" ng-if="subscription.hfcStatus == \'pendingActivation\' || subscription.hfcStatus == \'ordered\' || subscription.hfcStatus == \'shipped\' || subscription.hfcStatus == \'returned\'"><div class="point" ng-if="subscription.hfcStatus == \'shipped\'"><div class="point"><div class="point-icon"><i icon="fontawesome/plug"></i></div><div class="point-content"><h3 translate="sc.hfcStatus.shipped.readyToSurf"></h3><p bind-html-compile="\'sc.hfcStatus.shipped.readyToSurfDescription\' | translate | replaceText : \'XX.XX.XXXX\' : (subscription.installationInfo.predictedActivationDate | date : \'dd.MM.yyyy\')"></p></div></div></div><div class="point" ng-if="subscription.hfcStatus == \'pendingActivation\' && \'in use\' == subscription.device.status"><div class="point-icon"><i icon="fontawesome/gift"></i></div><div class="point-content"><h3 translate="sc.hfcStatus.inuseBeforeActivation"></h3><p translate="sc.hfcStatus.inuseBeforeActivationDescription"></p></div></div><div class="point"><div class="point-icon"><i icon="fontawesome/home"></i></div><div class="point-content"><h3 translate="installationAddress"></h3><p>{{subscription.installationInfo.address.streetName}} {{subscription.installationInfo.address.streetNumber}}, {{subscription.installationInfo.address.postCode}} {{subscription.installationInfo.address.city}}</p></div></div><div class="point" ng-if="order.address"><div class="point-icon"><i icon="fontawesome/home"></i></div><div class="point-content"><h3 translate="checkoutSectionShippingAddress"></h3><p>{{order.address.street}} {{order.address.streetNumber}}<br>{{order.address.zip}} {{order.address.city}}</p></div></div></div></div></section>');
$templateCache.put('/scripts/directives/id-check/dirc_id-check.html','<div ng-show="!loading && !data.confirmMode"><div class="selection" ng-if="!data.captureMode"><h1 translate="idCheckPosTitle"></h1><p translate="idCheckPosDescription"></p><br><strong translate="allowedIdTypesTitle"></strong><p translate="{{isPostpaid ? \'allowedIdTypesPostpaid\' : \'allowedIdTypesPrepaid\'}}"></p><button class="petrol bottomless" ng-click="data.captureMode = \'camera\'" ng-if="Camera.mobileCamera" translate="checkoutIdStartCameraButton"></button> <button class="petrol bottomless" ng-click="(data.captureMode = \'external\') && triggerTakePicturesAnalytics()" ng-if="!Camera.mobileCamera" translate="checkoutIdExternalCaptureButton"></button> <button class="outline bottomless" ng-click="data.captureMode = \'upload\'" ng-if="agent.allowFileIdValidation(true)" translate="checkoutIdStartFileButton"></button></div><div ng-if="data.captureMode && !blockCaptureModeChange && agent.allowFileIdValidation(true) && !rs.app"><button ng-click="backButton()" ng-if="!arrowBack" translate="back" class="outline headless"></button><div ng-if="arrowBack"><span class="pointer backbutton" ng-click="backButton()"><i icon="fontawesome/chevron-left" class="icon-inline"></i> <span translate="signMethodBackButton"></span></span><br><br></div></div><div class="external" ng-if="data.captureMode == \'external\' && state.agentLoggedIn && !agent.data.rights.FORCE_SHIPMENT && !rs.app"><qr-code-display image="data.qrCodeData.image" example-image-url="\'/assets/images/qr-example_idp.png\'" external-capture-url="data.externalCaptureUrl"></qr-code-display><div class="external-link-sending"><hr class="big"><h2 translate="orExternalSignSms" class="bottomless"></h2><external-link-sending msisdn="externalLinkMsisdn" access-code="accessCodeData.accessCode" type="(state.agentLoggedIn && !agent.data.rights.FORCE_SHIPMENT) ? \'idScanPos\' : \'idScanEshop\'" extra-params="extraParams"></external-link-sending></div></div><div class="external" ng-if="data.captureMode == \'external\' && state.agentLoggedIn && agent.data.rights.FORCE_SHIPMENT"><div ng-if="!data.outboundApproveMode"><h2 translate="externalLinkSendingTitle"></h2><p translate="externalLinkSendingOutboundDescription"></p><external-link-sending on-done="setupExternalCapture" msisdn="externalLinkMsisdn" outbound-mode="state.agentLoggedIn && agent.data.rights.FORCE_SHIPMENT" access-code="accessCodeData.accessCode" type="\'idScanEshop\'" extra-params="extraParams + \'&fromOutbound=true\'"></external-link-sending><br><strong><p translate="externalWaitingWarningOutbound" class="bottomless hide-if-not-in-popup"></p></strong></div><div ng-if="data.outboundApproveMode"><p translate="outboundImageConfirmPopupText"></p><img ng-repeat="image in data.images" ng-src="{{image.b64}}" class="image-preview-in-popup"> <button ng-click="onCancel()" translate="outboundImageConfirmCancelButton" class="outline bottomless"></button> <button ng-click="done(true)" translate="outboundImageConfirmButton" class="petrol bottomless"></button></div></div><div class="external" ng-if="data.captureMode == \'external\' && !state.agentLoggedIn && !rs.app"><div class="external-link-sending" ng-if="!data.eshopShowQrCode"><p translate="externalLinkSendingDescription" ng-if="!showExternalCaptureWarning"></p><external-link-sending on-done="setupExternalCapture" msisdn="externalLinkMsisdn" access-code="accessCodeData.accessCode" type="(state.agentLoggedIn && !agent.data.rights.FORCE_SHIPMENT) ? \'idScanPos\' : \'idScanEshop\'" extra-params="extraParams"></external-link-sending><br><a href ng-click="data.eshopShowQrCode = true; setupExternalCapture(\'fromQrCode\');" translate="switchToQrCode"></a></div><div ng-if="data.eshopShowQrCode"><qr-code-display image="data.qrCodeData.image" example-image-url="\'/assets/images/qr-example_idv.png\'" external-capture-url="data.externalCaptureUrl"></qr-code-display><br><a href ng-click="data.eshopShowQrCode = false; hideQrCode()" translate="switchToSms"></a></div><div ng-if="showExternalCaptureWarning || data.eshopShowQrCode"><br><p translate="externalWaitingWarning" class="bottomless legal"></p></div></div><div class="external" ng-if="data.captureMode == \'external\' && rs.app"><span translate="idCheckNotFinished"></span><br><br><button class="petrol bottomless headless" ng-click="changeCaptureMode()" ng-show="rs.app" translate="idCheckRetryButton"></button> <button ng-if="onCancel" ng-click="onCancel()" translate="back" class="outline headless"></button></div><div class="upload" ng-if="data.captureMode == \'upload\'"><div ng-if="showFileTutorial"><h3 translate="cameraTutTitle"></h3><b><span translate="cameraTutGeneral"></span></b><div class="id-tuts"><div class="id-tut-section" ng-click="endFileTutorial(\'plastic\')"><img src="/assets/images/camera-tut-plastic-id.jpg" alt=""> <button type="button" class="petrol bottomless headless" translate="fileTutPlasticIdText"></button></div><div class="id-tut-section" ng-click="endFileTutorial(\'paper\')"><img src="/assets/images/camera-tut-paper-id.jpg" alt=""> <button type="button" class="petrol bottomless headless" translate="fileTutPaperIdText"></button></div><div class="id-tut-section" ng-click="endFileTutorial(\'passport\')"><img src="/assets/images/camera-tut-passport.jpg" alt=""> <button type="button" class="petrol bottomless headless" translate="fileTutSwissPassportText" ng-if="isPostpaid"></button> <button type="button" class="petrol bottomless headless" translate="fileTutPassportText" ng-if="!isPostpaid"></button></div></div></div><div ng-if="!showFileTutorial"><input type="file" id="file" fileread="data.files[data.currentStep]" max-size="1024*1024*5" target-resolution="1920" capture="environment" selector="\'#idFileLabel\'" dont-rename-file="true" required accept=".png, .jpg, .jpeg"> <label class="nowrap" for="file" id="idFileLabel"><div><i icon="fontawesome/upload" class="size-1 center" ng-show="!data.files[data.currentStep].b64"></i> <i icon="fontawesome/check" class="size-1 center" ng-show="data.files[data.currentStep].b64"></i> <strong translate="documentType_{{data.currentStep}}"></strong> <span translate="clickToUpload"></span></div></label></div></div><div class="camera" ng-if="data.captureMode == \'camera\'"><div ng-if="showCameraTutorial"><div class="id-selection"><b translate="nationalityField" class="headless"></b><div class="selection-container horizontal"><div class="selection-item" ng-class="{selected: idData.selectedNationalityType === \'swiss\'}" ng-click="idData.selectedNationalityType = \'swiss\'"><i icon="swiss"></i><div><b translate="idSwiss"></b></div></div><div class="selection-item" ng-class="{selected: idData.selectedNationalityType === \'world\'}" ng-click="idData.selectedNationalityType = \'world\'"><i icon="globe"></i><div><b translate="idWorld"></b></div></div></div><div ng-if="idData.selectedNationalityType === \'swiss\'" class="new-check-b"><div class="id-type-titles"><text-scroller active="idPos" on-update="setPos" ng-if="setPos && idPos !== undefined" texts="[(\'idCardTitle\' | translate), (\'swissPassportTitle\' | translate)]"></text-scroller></div><div class="id-check-scaler"><div mobile-sideways-scroll inner-el=".row-el-full" hide-helpers="true" always="true"><div class="row in-scroller"><div class="row-el-full"><div class="id-scroll-content"><div class="lottie-id-container"><lottie-player src="/assets/other/lottie_id-card.json" background="transparent" speed="1" style="width:420px;height:280px" loop autoplay></lottie-player></div><div><b translate="idCardTitle"></b><p translate="idCardText"></p></div></div></div><div class="row-el-full"><div class="id-scroll-content"><div class="lottie-id-container"><lottie-player src="/assets/other/lottie_swiss-passport.json" background="transparent" speed="1" style="width:420px;height:280px" loop autoplay></lottie-player></div><div><b translate="swissPassportTitle"></b><p translate="swissPassportText"></p></div></div></div></div></div></div><div class="sub-switch-icons"><div class="dot" ng-click="setPos(0)" ng-class="{active: idPos === 0}"></div><div class="dot" ng-click="setPos(1)" ng-class="{active: idPos === 1}"></div></div></div><div ng-if="idData.selectedNationalityType === \'world\'" class="new-check-b"><div class="id-type-titles"><text-scroller active="idPos" on-update="setPos" ng-if="setPos && idPos !== undefined" texts="idCardsWorld"></text-scroller></div><div class="id-check-scaler"><div mobile-sideways-scroll inner-el=".row-el-full" hide-helpers="true" always="true" start-pos="2"><div class="row in-scroller"><div class="row-el-full"><div class="id-scroll-content"><div class="lottie-id-container"><lottie-player src="/assets/other/lottie_eu-id-card.json" background="transparent" speed="1" style="width:420px;height:280px" loop autoplay></lottie-player></div><div><b translate="euIdCardTitle"></b><p translate="euIdCardText"></p></div></div></div><div class="row-el-full" ng-if="isPostpaid"><div class="id-scroll-content"><div class="lottie-id-container"><lottie-player src="/assets/other/lottie_passport.json" background="transparent" speed="1" style="width:420px;height:280px" loop autoplay></lottie-player></div><div><b translate="euPassportTitle"></b><p translate="euPassportText"></p></div></div></div><div class="row-el-full" ng-if="!isPostpaid"><div class="id-scroll-content"><div class="lottie-id-container"><lottie-player src="/assets/other/lottie_passport.json" background="transparent" speed="1" style="width:420px;height:280px" loop autoplay></lottie-player></div><div><b translate="passportTitle"></b><p translate="passportText"></p></div></div></div><div class="row-el-full"><div class="id-scroll-content"><div class="lottie-id-container"><lottie-player src="/assets/other/lottie_plastic-permit.json" background="transparent" speed="1" style="width:420px;height:280px" loop autoplay></lottie-player></div><div><b translate="plasticPermitTitle"></b><p translate="plasticPermitText"></p></div></div></div><div class="row-el-full"><div class="id-scroll-content"><div class="lottie-id-container"><lottie-player src="/assets/other/lottie_paper-permit.json" background="transparent" speed="1" style="width:420px;height:280px" loop autoplay></lottie-player></div><div><b translate="paperPermitTitle"></b><p translate="paperPermitText"></p></div></div></div></div></div></div><div class="sub-switch-icons"><div class="dot" ng-click="setPos(0)" ng-class="{active: idPos === 0}"></div><div class="dot" ng-click="setPos(1)" ng-class="{active: idPos === 1}"></div><div class="dot" ng-click="setPos(2)" ng-class="{active: idPos === 2}"></div><div class="dot" ng-click="setPos(3)" ng-class="{active: idPos === 3}" ng-if="!isPostpaid"></div></div></div><div class="take-photo-section no-border" ng-click="endCameraTutorial(\'auto\')"><br><button class="has-button petrol full-width"><i icon="fontawesome/camera"></i> <span translate="takePhotoOfId"></span></button></div></div></div><webcam webcam-picture="webcamPicture" ng-if="!showCameraTutorial && !data.confirmMode && !data.cameraSwitchDisabled && !data.restartingWebcam" instructions="\'idCheck_\' + data.currentStep + \'_description\'" document-type="data.currentStep" info-image="infoImage" rectangle-detection="data.currentStep !== \'selfie\' && idMode === \'plastic\' && enableRectangleDetection" block-scanning="data.showSuccess || data.showSide2Pre" on-cancel="cancelWebcam" on-restart="restartWebcam" allow-restart="!dontAllowRestart" on-skip="onSkip" facing-mode="data.currentStep === \'selfie\' ? \'user\' : \'environment\'"></webcam></div></div><div class="image-confirmation" full-height="{{Camera.mobileCamera}}" ng-if="data.confirmMode" ng-class="{\'full-screen\': Camera.mobileCamera}"><div class="ui" ng-if="!data.partialConfirmMode"><p translate="{{\'confirmImage_\' + data.currentStep}}"></p><button class="outline bottomless headless" ng-click="confirmImage()" ng-class="{white: Camera.mobileCamera}" translate="idCheckConfirmButton"></button> <button class="petrol bottomless headless" ng-click="retry()" translate="idCheckRetryButton"></button></div><div class="ui" ng-if="data.partialConfirmMode"><p translate="{{\'confirmPartialImage_\' + data.currentStep}}"></p><button class="outline bottomless headless" ng-click="retry()" ng-class="{white: Camera.mobileCamera}" translate="idCheckRetryButton"></button> <button class="petrol bottomless headless" ng-click="confirmImage()" translate="idCheckConfirmButton"></button></div><div class="image-preview" ng-show="data.images[data.currentStep].b64" ng-class="{\'rotated\': data.images[data.currentStep].rotated && Camera.mobileCamera}" ng-style="{\'background-image\': \'url(\' + data.images[data.currentStep].b64 + \')\'}" id="image-preview"></div></div><div ng-if="loading" class="loading-container" ng-class="{\'full-screen\': Camera.mobileCamera}"><loading-button type-button="true" dont-track-loading-time="dontWorryAboutLoadingTime" loading="true"></loading-button></div><div class="idv-success white" ng-if="data.showSuccess"><i icon="fontawesome/check" class="size-2 fill-primary center"></i></div><div class="idv-success show-side2-pre white" ng-if="data.showSide2Pre" ng-class="{\'paper\': idMode === \'paper\'}" ng-click="trySkipSuccess()"><lottie-player ng-if="idData.selectedidType === \'eu-id-card\'" src="/assets/other/lottie_eu-id-card-side-2.json" background="transparent" speed="1" style="width:420px;height:280px" autoplay></lottie-player><lottie-player ng-if="idData.selectedidType === \'paper-permit\'" src="/assets/other/lottie_paper-permit-side-2.json" background="transparent" speed="1" style="width:420px;height:280px" autoplay></lottie-player><lottie-player ng-if="idData.selectedidType !== \'eu-id-card\' && idData.selectedidType !== \'paper-permit\'" src="/assets/other/lottie_id-card-side-2.json" background="transparent" speed="1" style="width:420px;height:280px" autoplay></lottie-player></div>');
$templateCache.put('/scripts/directives/id-check-prompt/dirc_id-check-prompt.html','<div ng-if="state.isTelesales && enableNewIdCheck && orderData.images.side1"><p translate="outboundImageConfirmPopupText"></p><div class="id-image-preview-container"><div ng-repeat="image in orderData.images" ng-click="image.fullscreen = !image.fullscreen" ng-class="{fullscreen: image.fullscreen}" class="id-image-preview" ng-style="{\'background-image\': \'url(\' + image.b64 + \')\'}"><div></div><i icon="fontawesome/search-plus"></i></div></div></div><div ng-if="!checkDone && !state.agentLoggedIn" class="id-check-prompt-not-done"><h2 translate="idCheckPrompTitle" ng-class="{\'extra-spacing\': rs.isMobile}" ng-if="showOptionForEnteringData"></h2><div class="id-check-prompt-not-done-content" ng-class="{vertical: !rs.isMobile}"><div ng-click="popup.show()"><div align-box="1" class="id-check-image-wrapper" ng-if="!rs.isMobile"><img src="/assets/images/scan-app-prompt-icon.jpg"></div><div class="id-check-image-wrapper" ng-if="rs.isMobile"><img src="/assets/images/scan-app-prompt-icon.jpg"></div><button translate="idCheckPrompScanButton" class="bottomless petrol" type="button" id="continue-with-check" data-testid="continue-with-check"></button></div><div class="separator" ng-class="{vertical: !rs.isMobile}" ng-if="showOptionForEnteringData"><span translate="idCheckFormOr"></span></div><div ng-if="!rs.isMobile && showOptionForEnteringData" ng-click="onClickShowField()"><div align-box="1" class="id-check-image-wrapper" ng-if="!rs.isMobile"><img src="/assets/images/scan-app-prompt-manual-icon.jpg" ng-if="!rs.isDesktop"> <img src="/assets/images/scan-app-prompt-manual-icon_desktop.jpg" ng-if="rs.isDesktop"></div><div class="id-check-image-wrapper" ng-if="rs.isMobile"><img src="/assets/images/scan-app-prompt-manual-icon.jpg" class="smaller-image"></div><button translate="idCheckFormShowButton" class="bottomless petrol" type="button" id="continue-without-check" data-testid="continue-without-check"></button></div></div></div><div class="id-check-prompt" ng-if="checkDone || state.agentLoggedIn" ng-class="{partially: checkDone && !orderData.billingCustomerDetails.pixelScanned && orderData.billingCustomerDetails.idCheckDone && orderData.billingCustomerDetails.idCheckMethod !== \'upload\'}"><div ng-if="!checkDone && state.agentLoggedIn" class="not-done"><i icon="fontawesome/camera" class="icon-inline"></i><span translate="{{state.agentLoggedIn ? \'hardIdPromptTextPos2\' : isMobile ? \'hardIdPromptTextEshopMobile2\' : \'hardIdPromptTextEshopDesktop2\'}}"></span> <button translate="idPromtButton" class="white bottomless headless" ng-click="popup.show()" type="button"></button></div><div ng-if="checkDone && !data.redoConfirmation" class="check-done"><div class="message"><i icon="fontawesome/check" class="icon-inline"></i>&nbsp;<span translate="idCheckPromptDoneTextNew" ng-if="orderData.billingCustomerDetails.pixelScanned || orderData.billingCustomerDetails.idCheckMethod === \'upload\'"></span><span ng-if="!orderData.billingCustomerDetails.pixelScanned && orderData.billingCustomerDetails.idCheckMethod !== \'upload\'" translate="idCheckPromptPartiallyDoneText"></span></div><button type="button" translate="idPromtRedo" class="outline bottomless headless bottomless white" ng-if="orderData.billingCustomerDetails.pixelScanned && orderData.billingCustomerDetails.idCheckMethod !== \'upload\'" ng-click="data.redoConfirmation = true"></button> <button type="button" translate="idPromtRedo" class="outline bottomless headless white bottomless" ng-if="!orderData.billingCustomerDetails.pixelScanned && orderData.billingCustomerDetails.idCheckMethod !== \'upload\'" ng-click="data.redoConfirmation = true"></button></div><div ng-if="checkDone && data.redoConfirmation" class="check-done"><div class="message with-bottom-margin"><i icon="fontawesome/exclamation-triangle" class="icon-inline"></i>&nbsp;<span translate="idCheckPromptRedoConfirmText"></span></div><button type="button" class="outline bottomless headless white" ng-click="redoIdCheck()"><span translate="idPromtRedoConfirm"></span><span ng-if="redoingIdCheck">&nbsp;&nbsp;<span loading="true" class="inline-loader"></span></span></button> <button type="button" translate="idPromtRedoCancel" ng-disabled="redoingIdCheck" class="bottomless headless petrol white" ng-click="data.redoConfirmation = false"></button></div></div><div ng-if="orderData.billingCustomerDetails.pixelScanned && orderData.billingCustomerDetails.fromViz" class="warning-message" translate="vizDataCheckReminder"></div>');
$templateCache.put('/scripts/directives/id-details/dirc_id-details.html','<div><div class="formrow"><div ng-if="editable || forceIdChange()" class="formfield field-33"><select ng-model="data.nationality" id="nationality" data-testid="id-details-nationality" ng-class="{\'pixel-filled\': data.pixel_nationality && data.pixel_nationality === data.nationality}" autocomplete="nope" name="nationality" required><option ng-repeat="country in priorityCountries track by $index" value="{{::country.id}}">{{country[language.current]}}</option><option disabled="disabled">\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500</option><option ng-repeat="country in countries track by $index" value="{{::country.id}}">{{country[language.current]}}</option></select> <label for="nationality"><i icon="fontawesome/flag" class="icon-inline"></i> <span translate="nationalityField"></span></label></div><div ng-if="!editable && !forceIdChange()" class="formfield field-33"><input data-testid="id-details-nationality2" id="nationality2" disabled="disabled" type="text" class="input ng-not-empty" ng-value="data.nationality | countryLookup"> <label for="nationality2"><i icon="fontawesome/flag" class="icon-inline"></i> <span translate="nationalityField"></span></label></div><div ng-if="editable || forceIdChange() && !nationalityOnly" class="formfield field-66"><select data-testid="id-details-id-type" id="personalIdTypes" name="personalIdType" ng-model="data.idTypeId" ng-change="changeIdType()" ng-class="{\'pixel-filled\': data.idTypeId && data.pixel_idTypeId === data.idTypeId}" ng-disabled="!data.nationality || gettingIdTypes" required><option ng-repeat="idType in CommonData.personalIdTypes | allowedIdTypes : allowedIdTypes | objToArray | orderBy: [\'-sort\',\'en\'] track by idType.id" value="{{::idType.id}}">{{idType[language.current]}}</option></select> <label for="personalIdTypes"><i icon="fontawesome/id-card" class="icon-inline"></i> <span translate="idTypeField"></span></label><div class="loading" ng-show="gettingIdTypes"></div></div><div ng-if="!editable && !forceIdChange() && !nationalityOnly" class="formfield field-66"><input data-testid="id-details-id-type2" id="personalIdTypes2" disabled="disabled" type="text" class="input ng-not-empty" ng-value="personalIdType(data.idTypeId)"> <label for="personalIdTypes2"><i icon="fontawesome/id-card" class="icon-inline"></i> <span translate="idTypeField"></span></label></div></div><div class="info-message post-ident-eu-id-message" ng-if="showPostIdentMessage()"><i icon="circle-info"></i><p translate="postIdentEuIdMessage"></p><button ng-click="showPostIdentPopup()" type="button" class="petrol headless bottomless" translate="postIdentEuIdButton"></button></div><div class="info-message post-ident-eu-id-message" ng-if="data.idTypeId == \'202001091121324242\'"><i icon="circle-info"></i><p translate="ligitimationCardMessage"></p></div><div class="formrow" ng-if="!simpleMode"><div class="formfield field-33" ng-if="!nationalityOnly"><input id="idNumber" data-testid="id-details-id-number" type="search" ng-model="data.idNumber" ng-class="{\'pixel-filled\': data.pixel_idNumber && data.pixel_idNumber === data.idNumber}" validation-type="id-number" name="idNumber" maxlength="30" pattern="^[a-zA-Z0-9.-/- ]+$" ng-disabled="!editable && !forceIdChange()" minlength="5" autocomplete="off" required> <label for="idNumber"><i icon="fontawesome/id-card" class="icon-inline"></i> <span translate="idNumberField"></span></label></div><div class="formfield field-66"><app-date id="idExpiryDate" ng-class="{\'pixel-filled\': data.pixel_expiry && data.pixel_expiry.day === data.expiry.day && data.pixel_expiry.month === data.expiry.month && data.pixel_expiry.year === data.expiry.year}" ng-if="!nationalityOnly && !noIdExpiration" data="data.expiry" editable="editable || forceIdChange()" fewest-days-from-now=":: selfcare ? 1 : -30" most-days-from-now="10000" required="true" force-id="\'_id-expiry-date\'" autocomplete="off"><span translate="idExpiryField"></span></app-date></div></div><div ng-if="editable && showDriversLicenceConfirmation()"><br><span translate="confirmCheckedDriversLicenseDescription"></span><div class="formrow"><div class="formfield headless"><input id="confirmCheckedDriversLicense" ng-model="data.confirmCheckedDriversLicense" type="checkbox" ng-disabled="!editable" required> <label for="confirmCheckedDriversLicense" translate="confirmCheckedDriversLicenseField" id="confirmCheckedDriversLicenseLabel"></label></div></div></div></div>');
$templateCache.put('/scripts/directives/id-details-win/dirc_id-details-win.html','<div><div class="formrow"><div ng-if="editable || forceIdChange()" class="formfield field-33"><select ng-model="data.nationality" id="nationality" autocomplete="nope" name="nationality" required><option ng-repeat="country in countries | orderBy : \'orderIndex\' | limitTo : 6 track by $index" value="{{::country.isocode}}">{{::country.value}}</option><option disabled="disabled">\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500</option><option ng-repeat="country in countries | orderBy : \'orderIndex\' | limitTo : 999 : 6 track by $index" value="{{::country.isocode}}">{{::country.value}}</option></select> <label for="nationality"><i icon="fontawesome/flag" class="icon-inline"></i> <span translate="nationalityField"></span></label></div><div ng-if="editable || forceIdChange() && !nationalityOnly && passports" class="formfield field-66"><select id="personalIdTypes" name="personalIdType" ng-model="data.idType" ng-disabled="!data.nationality || gettingIdTypes" required><option ng-repeat="idType in allowedIdTypes | orderBy: \'orderIndex\'" ng-value="idType">{{idType.value}}</option></select> <label for="personalIdTypes"><i icon="fontawesome/id-card" class="icon-inline"></i> <span translate="idTypeField"></span></label></div></div><div class="formrow"><div class="formfield field-33" ng-if="!nationalityOnly"><input id="idNumber" type="search" ng-model="data.idNumber" validation-type="id-number" name="idNumber" maxlength="30" pattern="^[a-zA-Z0-9.-/- ]+$" ng-disabled="!editable && !forceIdChange()" minlength="5" autocomplete="off" required> <label for="idNumber"><i icon="fontawesome/id-card" class="icon-inline"></i> <span translate="idNumberField"></span></label></div><div class="formfield field-33"><app-date id="idExpiryDate" ng-if="!nationalityOnly && !noIdExpiration" data="data.expiry" editable="editable || forceIdChange()" fewest-days-from-now=":: selfcare ? 1 : -30" most-days-from-now="3650" required="true" autocomplete="off"><span translate="idExpiryField"></span></app-date></div><div class="formfield field-33"><app-date data="data.dob" id="dateOfBirth2" editable="true" fewest-days-from-now="-36500" most-days-from-now="-6570" auto-complete="off" required="true" allow-any-date="false" force-id="\'_pdw\'"><span translate="dobField"></span></app-date></div></div></div>');
$templateCache.put('/scripts/directives/id-status-info/dirc_id-status-info.html','<section class="screenblock id-status-info" ng-if="account.needToVerifyId"><div class="content"><div class="block-9-3"><div class="mainblock"><span translate="{{::!state.agentLoggedIn ? \'needToVerifySelfcareMessage\' : \'needToVerifyPosMessage\'}}"></span></div><div class="sideblock"><a ng-click="triggerAnalytics()" c-route="{{::state.agentLoggedIn ? \'/pos/existing-customer\' : \'/account/id-check\'}}/verify-id" class="button petrol bottomless headless float-right" translate="needToVerifySelfcareButton"></a></div></div></div></section><section class="screenblock id-status-info optional" ng-if="account.canVerifyId && !account.needToVerifyId"><div class="content"><div class="block-9-3"><div class="mainblock"><span translate="{{::!state.agentLoggedIn ? \'canVerifySelfcareMessage\':\'canVerifyPosMessage\'}}"></span></div><div class="sideblock"><a ng-click="triggerAnalytics()" c-route="{{::state.agentLoggedIn ? \'/pos/existing-customer\' : \'/account/id-check\'}}/verify-id" class="button petrol bottomless headless float-right" translate="canVerifyButton"></a></div></div></div></section>');
$templateCache.put('/scripts/directives/info-page-hero/dirc_info-page-hero.html','<section class="screenblock info-page-hero smoke"><div class="content"><div ng-transclude></div></div></section><div class="info-page-arrow"></div>');
$templateCache.put('/scripts/directives/input-info/dirc_input-info.html','<div class="input-info" ng-class="{open: open, right: isRight}" ng-mouseover="open = true; calcIsRight()" ng-mouseleave="open = false"><div ng-if="!isPopup"><span class="input-info-icon"><i icon="fontawesome/info-circle"></i></span><div class="input-info-content" ng-click="open = false" ng-transclude></div></div><tooltip ng-if="isPopup"><div ng-transclude></div></tooltip></div>');
$templateCache.put('/scripts/directives/install-banner/dirc_install-banner.html','<div class="install-banner" ng-if="data.showInstallBanner" ng-class="{closing : closing}"><a href ng-click="hideInstallBanner()" class="no-link close-button"><i icon="fontawesome/times" class="size-1"></i></a> <a translate-attr="{\'href\': isAndroid ? \'mobileAppUrlPlaystore\' : \'mobileAppUrlItunes\'}" rel="noopener" target="_blank" class="no-link banner-link"><div class="install-banner-content"><p class="bottomless" translate="installBannerDescription"></p></div><div class="install-banner-image"><img ng-src="/assets/images/{{:: isIOS ? \'apple-store\' : \'google-play\'}}-badge.png"></div></a></div>');
$templateCache.put('/scripts/directives/instant-topup/dirc_instant-topup.html','<div class="instant-topup"><form name="instantTopupForm" ng-submit="instantTopupForm.$valid && doTopup()" custom-validation="instantTopupForm" novalidate><div class="formrow"><div class="formfield field-100"><input type="tel" pattern="07[0-9]{8}" ng-change="checkMsisdn()" validation-type="msisdn" class="instant-topup-msisdn-field" id="instant-topup-msisdn" ng-model="data.msisdn" ng-disabled="doingTopup" required> <label translate="topupMsisdnLabel"></label></div></div><div class="formrow"><div class="formfield field-100"><input type="tel" pattern="07[0-9]{8}" ng-change="checkMsisdn()" validation-type="msisdn" class="instant-topup-msisdn-field" ng-model="data.repeatMsisdn" ng-disabled="doingTopup" required> <label translate="topupMsisdnRepeatLabel"></label></div></div><div class="formrow"><div class="formfield field-100"><select ng-model="data.amount" ng-disabled="doingTopup" required><option ng-repeat="amount in topup.topupvalues" ng-value="amount">{{amount | customCurrency}}</option></select> <label translate="topupAmountLabel"></label></div></div><div stick-to-bottom replace-initial="true"><loading-button loading="doingTopup" class="small bottomless" ng-class="{disabled: doingTopup}"><span translate="instantTopupButton"></span></loading-button></div><clearfix></clearfix><br><p translate="iAgreeTermsTopup" class="legal"></p></form></div>');
$templateCache.put('/scripts/directives/interaction-widget/dirc_interaction-widget.html','<div class="phone-wrapper"><a ng-click="startChatPopup()" ng-class="{\'button white outline headless bottomless\': rs.isDesktop}" ng-show="chat.showChat()"><div class="checkout-opening-times"><i icon="fontawesome/comments" ng-show="!loading" class="icon-inline"></i> <span class="inline-loader" ng-show="loading"></span> <span><span class="desktop-only-text" translate="chatButtonText"></span></span></div></a><span ng-if="showCall()"><if-open-or-closed type="{{::getCallType()}}"><open><a ng-click="openCallPopup($event)" ng-class="{\'button outline headless bottomless\': rs.isDesktop, white: !rs.checkoutMode.active}" ng-style="blackfridaymode && {\'border-color\' : \'white\'}"><div class="checkout-opening-times"><i icon="fontawesome/phone" ng-if="!blackfridaymode" class="icon-inline"></i> <i icon="fontawesome/phone" ng-if="blackfridaymode" class="icon-inline fill-white"></i> <span><span class="desktop-only-text" ng-style="blackfridaymode && {\'color\' : \'white\'}">{{getButtonTextKey() | translate}}</span></span></div></a></open><closed><callback ng-class="{\'button outline headless bottomless\': rs.isDesktop, white: !rs.checkoutMode.active}" ng-style="blackfridaymode && {\'border-color\' : \'white\'}"><div class="checkout-opening-times"><i icon="fontawesome/phone" ng-if="!blackfridaymode" class="icon-inline"></i> <i icon="fontawesome/phone" ng-if="blackfridaymode" class="icon-inline fill-white"></i> <span class="checkout-opening-times desktop-only-text" ng-style="blackfridaymode && {\'color\' : \'white\'}">{{ getButtonText() }}</span></div></callback></closed></if-open-or-closed></span></div>');
$templateCache.put('/scripts/directives/invoice-selection/dirc_invoice-selection.html','<br><p ng-show="data.disableSelection" translate="noEmailPaperInvoiceDescription"></p><input type="checkbox" id="paperBilling" name="billingMethod" ng-model="data.billingMethod" ng-disabled="!editable || data.disableSelection" ng-true-value="\'paper\'" ng-false-value="\'email\'"> <label for="paperBilling" translate="paperBillingField"></label> <span class="note-info"><i icon="fontawesome/info" class="icon-inline fill-silver"></i> <span translate="defaultBillingEmail"></span></span>');
$templateCache.put('/scripts/directives/language-picker/dirc_language-picker.html','<ul class="dropdown-menu closed" click-outside="close()" ng-class="{closed : closed || dropdownclose}" role="menu" aria-labelledby="language-nav-menu"><li id="language-nav-menu" ng-click="clickCurrent()" class="picked-value"><span ng-style="blackfridaymode && {\'color\' : \'white\'}">{{language.data.current}}</span> <i icon="fontawesome/chevron-down" ng-if="!blackfridaymode" class="icon-inline"></i><i icon="fontawesome/chevron-down" ng-if="blackfridaymode" class="icon-inline fill-white"></i></li><div class="slider"><li ng-repeat="lang in ::language.data.languages track by lang" ng-click="pickLanguage(lang)" role="presentation" ng-class="{\'no-link\': lang === language.data.current}" ng-if="lang !== language.data.current"><a c-route="/{{lang}}{{getCurrentPathInLang(lang)}}{{currentSearch}}" no-lang="true" dont-link="{{lang === language.data.current}}" role="menuitem" tabindex="{{::$index}}">{{::lang}}</a></li></div></ul>');
$templateCache.put('/scripts/directives/language-switcher/dirc_language-switcher.html','<ul><li ng-repeat="lang in language.data.languages track by lang" role="presentation" ng-class="{\'no-link\': lang === language.data.current}"><a c-route="/{{lang}}{{getCurrentPathInLang(lang)}}{{currentSearch}}{{currentHash}}" no-lang="true" dont-link="{{lang === language.data.current}}" role="menuitem" tabindex="{{::$index}}" ng-click="lang != language.data.current && pickLanguage(lang)">{{::lang}}</a></li></ul>');
$templateCache.put('/scripts/directives/limited-stock-handsets/dirc_limited-stock-handsets.html','<div class="page"><div ng-if="state.customerLoggedIn && canHaveDevice"><div ng-if="showCrossSell && existingSubscription" class="flex fcol align-center card cross-sell"><div translate="limitedStockSwitchNewSub"></div><button translate="limitedStockSwitchCTA" c-route="/{{crossSellLinkTarget}}" class="button big bottomless"></button></div><div ng-if="showCrossSell && !existingSubscription && subscriptions.length" class="flex fcol align-center card cross-sell"><span translate="limitedStockSwitchExistingSub"></span><div class="formfield" ng-if="subscriptions.length"><select ng-model="data.selectedSubscription"><option ng-repeat="sub in subscriptions" ng-value="sub">{{sub.msisdn}}</option></select> <label translate="selectProduct"></label><br></div><button translate="limitedStockSwitchCTA" c-route="/account/{{data.selectedSubscription.id}}/{{crossSellLinkTarget}}" class="button big bottomless" ng-disabled="!data.selectedSubscription"></button></div><div class="steps"><div ng-repeat="step in steps track by $index"><div class="step" ng-class="{\'selected\': $index == currentStep}" ng-click="goToStep($index)"><span>{{$index + 1}}</span></div><div class="label">{{step | translate }}</div></div></div><div class="flex fcol align-center container" ng-if="!loading"><div ng-if="steps[currentStep] == \'subscriptionStep\'" class="flex fcol align-center"><div class="flex frow wrap align-center"><device-tile class="selected-device" device="::selectedDevice" show-stock="false" show-prices="false" show-banner="true"></device-tile></div><h2 ng-if="subscriptions.length" translate="chooseSubscription"></h2><div class="select-sub"><div ng-if="subscriptions.length" class="flex fcol align-center card subscription-choice"><div class="flex fcol align-center select"><span translate="limitedStockSwitchExistingSub"></span><div class="formfield"><select ng-model="data.selectedSubscription"><option ng-repeat="sub in subscriptions" ng-value="sub">{{sub.msisdn}}</option></select> <label translate="selectProduct"></label></div></div><button translate="selectDeviceButton" c-route="{{::getCheckoutLink(true)}}" class="button big bottomless" ng-disabled="!data.selectedSubscription"></button></div><div class="flex frow align-center"><h2 ng-if="subscriptions.length" style="font-size:3em">{{\'or\' | translate | uppercase}}</h2></div><div class="flex fcol align-center card no-side-padding subscription-choice"><span translate="newSubscription"></span><product-item-horizontal productdata="::product" hide-cta="true" device="selectedDevice"></product-item-horizontal><button translate="selectDeviceButton" c-route="{{::getCheckoutLink(false)}}" class="button big bottomless"></button></div></div></div><div ng-if="steps[currentStep] == \'deviceStep\'" class="flex fcol align-center"><h2 translate="chooseDevice"></h2><div class="formrow filter-row" ng-if="showFilter"><div class="formfield"><select name="" id="" ng-model="data.manufacturer"><option translate="allDeviceManufacturers" value="all"></option><option ng-repeat="manufacturer in manufacturers" value="{{manufacturer}}">{{manufacturer}}</option></select> <label translate="manufacturerFilterLabel"></label></div><div class="formfield"><select name="" id="" ng-model="data.color"><option translate="allDeviceManufacturers" value="all"></option><option ng-repeat="color in colors" value="{{color}}">{{color}}</option></select> <label translate="deviceColorSelection"></label></div><div class="formfield"><select name="" id="" ng-model="data.capacity"><option translate="allDeviceManufacturers" value="all"></option><option ng-repeat="capacity in capacities" value="{{capacity}}">{{capacity | deviceCapacity}}</option></select> <label translate="deviceCapacitySelection"></label></div></div><div class="device-items flex frow wrap"><div class="device" ng-class="{\'big\': devices.length === 1}" ng-repeat="device in devices | filterDevices | orderBy : \'-priority\' as availableDevices track by device.id" id="device_{{device.id}}" ng-if="(data.manufacturer === \'all\' || device.manufacturer === data.manufacturer) && (data.color === \'all\' || device.color.name === data.color) && (data.capacity === \'all\' || device.capacity == data.capacity)"><device-tile device="::device" show-stock="true" show-prices="true" click="selectDevice(device)" sold-out-text="soldOutText"></device-tile></div><div ng-if="devices.length == 0" class="warning-message" translate="noDevicesAvailableLimitedHandset"></div></div></div></div></div></div><loading-button loading="true" ng-if="loading || checkingLoggedIn"></loading-button><div ng-if="!loading && !checkingLoggedIn && !state.customerLoggedIn" class="flex fcol align-center"><p translate="devicesSubTitle"></p><button translate="loginButton" class="button offer-cta big" ng-click="rs.loginPopup.show(true)"></button></div><div ng-if="!loading && state.customerLoggedIn && !canHaveDevice" class="warning-message" translate="cannotHaveDevice"></div>');
$templateCache.put('/scripts/directives/linecheck/dirc_linecheck.html','<div ng-class="message"><div class="linecheck" ng-class="{simple : simpleMode}"><loading-button ng-if="showLoader && loadingLineCheck" type-button="true" loading="true"></loading-button><div class="results" ng-if="network" ng-slide-down="lineCheckResults.mbbResults[network] && message" lazy-render duration=".2"><div class="flex frow" ng-class="{\'info-message\' : message !== \'bad\' && message !== \'slow\' && !simpleMode, \'warning-message\' : (message === \'slow\' || message === \'bad\') && !simpleMode}"><div class="result-data"><i icon="speedometer" ng-if="message !== \'bad\'"></i> <img src="/assets/images/no-connection.png" ng-if="message === \'bad\'" alt=""><p class="result padding-right" bind-html-compile="((message + \'LineCheck\' + type + (state.agentLoggedIn ? \'Pos\' : \'\')) + network) | translate | replaceText : \'XXXX\' : lineCheckResults.mbbResults[network].indoor.maxBandwidthDown / 1000 | replaceText : \'YYYY\' : lineCheckResults.mbbResults[network].indoor.maxBandwidthUp / 1000"></p></div><button translate="testOtherAddress" ng-if="testMore" ng-click="testMoreAddresses()" class="bottomless petrol" type="button"></button></div></div></div></div>');
$templateCache.put('/scripts/directives/linecheck-and-address/dirc_linecheck-and-address.html','<loading-button loading="true" ng-if="loading"></loading-button><div ng-if="!loading"><address-checker auto-complete="true" address="address" check="true" editable="true" show-co="false" force-swiss-address="true"></address-checker><linecheck address="address" show-always="true" show-slow="true" show-loader="true" show-bad="true" type="\'mobile\'" fallback-other-network="true" network="network"></linecheck></div>');
$templateCache.put('/scripts/directives/loading-button/dirc_loading-button.html','<div class="loading-button"><button ng-class="{open: loading}" ng-disabled="isDisabled" ng-if="typeButton" type="button" id="{{::buttonId}}" data-testid="loading-button-{{::buttonId}}" data-teststate="{{ loading ? \'loading\' : \'not-loading\'}}"><div class="spans"><span></span> <span></span> <span></span></div><div class="button-content" ng-transclude></div></button> <button ng-class="{open: loading}" ng-disabled="isDisabled" ng-if="!typeButton" id="{{::buttonId}}" data-testid="loading-button-{{::buttonId}}" data-teststate="{{ loading ? \'loading\' : \'not-loading\'}}"><div class="spans"><span></span> <span></span> <span></span></div><div class="button-content" ng-transclude></div></button></div>');
$templateCache.put('/scripts/directives/login/dirc_login.html','<div class="login-page"><div class="login"><div class="login-form"><form name="loginForm" ng-submit="loginForm.$valid && doLogin()" novalidate custom-validation="loginForm"><div class="formrow" ng-show="!account.hiddenLogin && !loading"><div class="formfield field-100"><input type="text" ng-model="data.username" id="username" autofocus name="username" autocomplete="username" required> <label for="username" translate="usernameField"></label></div></div><div class="formrow" ng-show="!account.hiddenLogin && !loading"><div class="formfield field-90 forced no-right-margin"><input ng-attr-type="{{ showPassword ? \'text\' : \'password\'}}" minlength="3" validation-type="password" ng-model="data.password" id="password" autocomplete="current-password" name="password" required> <label for="password" translate="passwordField"></label></div><div class="formfield field-10 forced"><button ng-click="showPassword = !showPassword" type="button" class="headless bottomless full-width icon-only next-to-input petrol"><i icon="fontawesome/eye" class="fill-white icon-inline"></i></button></div></div><div class="formrow"><loading-button loading="loading" class="small" button-id="\'doLogin\'"><span translate="{{loginButtonText || \'loginButton\'}}"></span></loading-button></div></form></div></div></div>');
$templateCache.put('/scripts/directives/main-nav/dirc_main-nav.html','<div ng-show="!rs.isSelfcare"><ul class="mainnav-list" role="menu"><li class="mainnav-item"><a is-active="?/mobile-products" c-route="/mobile-products" id="mobile-menu-item" translate="menuPlan" ng-click="interaction(\'mobile-products\')"></a></li><li class="mainnav-item sub"><a is-active="/product/lebara_plus,/options,/topup" translate="dropdownPrepaid"></a><ul><li class="mainnav-item"><a is-active="/product/lebara_plus" c-route="/product/lebara_plus" translate="dropdownBestSeller" ng-click="interaction(\'lebara-plus\')"></a></li><li class="mainnav-item"><a is-active="/product/lebara_plus#options" c-route="/product/lebara_plus#options" ng-click="interaction(\'prepaid-savings-options\')" translate="dropdownOptions"></a></li><li class="mainnav-item"><a is-active="/topup" c-route="/topup" translate="dropdownTopup" ng-click="interaction(\'topup\')"></a></li></ul></li><li class="mainnav-item"><a ng-href="https://support.lebara.ch/hc/{{rs.zendeskLang}}" rel="noopener" id="support-menu-item" translate="menuSupport" ng-click="interaction(\'support\')"></a></li><li class="mainnav-item" ng-if="rs.show_win_to_everyone"><a class="win-title" c-route="/internet-deal/form" is-active="/internet-deal/form,/internet-deal/success" translate="sunriseDeal" ng-click="interaction(\'internetSunrise\')"></a></li></ul></div><ul class="mainnav-list" role="menu" ng-show="state.customerLoggedIn && rs.isSelfcare"><li class="mainnav-item"><a c-route="/account?id={{location.search().id}}" is-active="/account" translate="subscriptionsMenuButton" ng-click="interaction(\'subscription\')"></a></li><li class="mainnav-item" ng-if="account.postpaidBillingGroup"><a c-route="/account/bills" is-active="?/account/bills" translate="billsMenuButton" ng-click="interaction(\'bill\')"></a></li><li class="mainnav-item" ng-if="account.hasMobileSubs"><a c-route="/account/history/{{location.search().id || account.getFilteredSubList(true)[0].id}}" is-active="?/account/history" translate="usageMenuButton" ng-click="interaction(\'history\')"></a></li><li class="mainnav-item" ng-if="rs.show_win_to_logged_in_users"><a class="win-title" c-route="/internet-deal/form" is-active="/internet-deal/form,/internet-deal/success" translate="sunriseDeal" ng-click="interaction(\'internetSunrise\')"></a></li><li class="mainnav-item" ng-if="!account.isLightCustomer || account.getSubscriptionsByType(\'prepaid\', true).length"><a c-route="/account/deals?id={{location.search().id}}" is-active="?/account/deals" translate="dealsTitle" ng-click="interaction(\'deals\')"></a></li><li class="mainnav-item"><a ng-href="https://support.lebara.ch/hc/{{rs.zendeskLang}}/" translate="menuSupport" ng-click="interaction(\'support\')"></a></li></ul>');
$templateCache.put('/scripts/directives/manual-credit-check/dirc_manual-credit-check.html','<div class="warning-message" ng-if="!loading && !success && !idOk"><p translate="manualCcGoBackAndDoIdCheckFirst"></p><button ng-click="back()" class="bottomless" translate="hardIdPromptTextPos"></button></div><div class="manual-credit-check" ng-if="!loading && !success && idOk"><br><p bind-html-compile="\'creditCheckDescription\' | translate | replaceText : \'xxx@xxx.xx\' : agent.data.email"></p><div class="formrow"><div class="formfield"><textarea id="6" rows="4" cols="80" ng-model="data.freeText"></textarea> <label translate="manualCreditCheckFreeTextField"></label></div></div><div class="document-upload" ng-repeat="document in documents"><i icon="check" class="icon-inline check"></i> <span>{{document.name}}</span> <i icon="fontawesome/times" ng-if="!document.blockDeletion" class="icon-inline delete" ng-click="deleteDocument(document)"></i></div><div class="upload-document" ng-if="documents.length < 5"><div class="formfield headless"><input type="file" id="tempDocumentUpload" fileread="data.tempDocument" file-name="data.fileName" max-size="1024*1024*5" target-resolution="1920" required capture="environment" ng-disabled="submitting" selector="\'#temp-doc\'" accept=".png, .jpg, .jpeg, .pdf" ng-class="{\'ng-invalid\': !data.tempDocument}"> <label class="nowrap has-input-info" for="tempDocumentUpload" title="documentLabel_manualCreditCheck" id="temp-doc"><div><i icon="fontawesome/check" class="size-1 center fill-primary" ng-show="data.tempDocument.b64"></i> <i icon="fontawesome/upload" class="size-1 center fill-silver" ng-show="!data.tempDocument.b64"></i> <strong translate="documentLabel_manualCreditCheck"></strong> <span translate="clickToUpload"></span></div></label></div></div><br><div class="center button-container"><button ng-click="submit()" class="big bottomless full-width" translate="submitManualCreditCheck"></button></div></div><div ng-if="loading"><br><br><loading-button loading="true"></loading-button><br><br></div>');
$templateCache.put('/scripts/directives/mobile-menu/dirc_mobile-menu.html','<div ng-class="{open: root.mobileMenuToggled}" class="mobile-menu"><a class="menu-toggle" ng-click="toggleMenu()"><span></span> <span></span> <span></span> <span></span></a><div class="menu-squircle"></div><div class="menu-bg" ng-click="closeMenu()"></div><div class="menu-container" ng-if="mobileMenuToggled"><div class="mobile-menu-links"><div class="mobile-menu-links-content"><div ng-if="!state.agentLoggedIn && !root.roamingCockpit && !(root.app && !state.customerLoggedIn)"><ul class="mainnav-list" role="menu"><div ng-if="state.customerLoggedIn"><li class="mainnav-item"><a is-active="/account" c-route="/account" ng-click="closeMenu(\'subscription\')"><span translate="mySubscriptions"></span></a></li><li class="mainnav-item" ng-if="account.hasMobileSubs"><a c-route="/account/history/{{subscriptionId}}" is-active="?/account/history" translate="usageMenuButton" ng-click="closeMenu(\'usage-history\')"></a></li><li class="mainnav-item" ng-if="account.postpaidBillingGroup"><a is-active="?/account/bills" c-route="/account/bills" ng-click="closeMenu(\'bill\')" translate="billsMenuButton"></a></li><li class="mainnav-item" ng-if="!account.isLightCustomer || account.getSubscriptionsByType(\'prepaid\', true).length"><a is-active="?/account/deals" c-route="/account/deals" ng-click="closeMenu(\'deal\')"><span translate="myDeals"></span></a></li><li class="mainnav-sub-item" ng-show="rs.show_win_to_logged_in_users && (rs.isSelfcare || rs.winMode)"><a class="win" c-route="/internet-deal/form" is-active="/internet-deal/form,/internet-deal/success" ng-click="closeMenu(\'sunrise-internet-deal\')"><span translate="sunriseDeal"></span></a></li><li class="mainnav-item"><a is-active="?/account/settings" c-route="/account/settings" ng-click="closeMenu(\'settings\')"><span translate="mySettings"></span></a></li></div><li class="mainnav-item"><a c-route="/mobile-products" is-active="/mobile-products" ng-click="closeMenu(\'mobile-products\')"><span translate="mobilemenuPostpaid"></span></a></li><li class="mainnav-item"><a ng-click="toggleDropdown2()" is-active="?/product/lebara_plus,/topup"><span translate="mobilemenuPrepaid"></span></a><div ng-slide-down="openProducts2" duration=".1"><ul class="mainnav-sub-items"><li class="mainnav-sub-item"><a is-active="/product/lebara_plus" c-route="/product/lebara_plus" translate="dropdownBestSeller" ng-click="closeMenu(\'lebara-plus\')"></a></li><li class="mainnav-sub-item"><a is-active="/product/lebara_plus#options" c-route="/product/lebara_plus#options" translate="dropdownOptions" ng-click="closeMenu(\'prepaid-savings-options\')"></a></li><li class="mainnav-sub-item" ng-if="!state.customerLoggedIn"><a is-active="/topup" c-route="/topup" translate="mobilemenuTopup" ng-click="closeMenu(\'topup\')"></a></li></ul></div></li><li class="mainnav-item" ng-if="!root.app || state.customerLoggedIn"><a c-route="/internet-deal/form" id="internet-deal-menu-item" ng-if="rs.show_win_to_logged_in_users && !state.customerLoggedIn && rs.show_win_to_everyone" ng-click="closeMenu(\'internet-deal\')"><b><span class="win" translate="sunriseDeal"></span></b> </a><a ng-href="https://support.lebara.ch/hc/{{rs.zendeskLang}}/" id="support-menu-item-leb" ng-click="closeMenu(\'support\')"><span translate="menuSupport"></span></a></li></ul></div></div></div><div class="mobile-menu-footer"><language-switcher class="language-switcher"></language-switcher><div ng-if="state.customerLoggedIn"><a href ng-click="logout()"><span class="inline-loader white" ng-show="state.customerLoggingOut"></span> <span translate="logoutButton"></span> <i icon="fontawesome/sign-out" ng-show="!state.customerLoggingOut" class="icon-inline fill-white"></i></a></div><div ng-if="!state.customerLoggedIn && !rs.app"><a href ng-click="loginPopup.show();closeMenu(\'login\')"><span translate="loginButton"></span> <i icon="fontawesome/sign-in" class="icon-inline fill-white"></i></a></div></div></div></div>');
$templateCache.put('/scripts/directives/month-switcher/dirc_month-switcher.html','<div class="month-switcher" mobile-sideways-scroll inner-el=".bill" start-pos="{{selectedMonthIndex}}" always="true"><div class="bill-row row"><div class="bill" ng-repeat="month in months track by $index"><div class="bill-dates"><div translate="usageBillsPre"></div><div><span translate="month{{month.month}}"></span></div></div></div></div></div>');
$templateCache.put('/scripts/directives/newsletter-form/dirc_newsletter_form.html','<form name="newsletterForm" ng-submit="newsletterForm.$valid && news.subscribe(email, source)" ng-if="!news.loading" custom-validation="newsletterForm" novalidate><div class="formfield field-90 forced no-margin"><input type="email" ng-model="email" name="email" id="news-email" autocomplete="email" validation-type="email" minlength="4" required> <label for="news-email"><i icon="fontawesome/envelope-o" class="icon-inline"></i> <span translate="emailFieldLabel"></span></label></div><div class="formfield field-10 forced no-margin"><button class="headless bottomless full-width icon-only next-to-input petrol"><i icon="fontawesome/arrow-right" class="icon-inline fill-white"></i></button></div></form><loading-button class="small bottomless" loading="true" ng-if="news.loading"></loading-button>');
$templateCache.put('/scripts/directives/next-steps/dirc_next-steps.html','<div class="steps-container"><div ng-if="productConfig.type === \'prepaid\' || (productConfig.type === \'postpaid\' && !isHFC && !isFiber && !isHomeProduct)" class="warning-message no-margin center"><span>{{(productConfig.type) === \'prepaid\' ? \'roamingEnableWarning\' : (showRoamingMessageForPostpaid ? \'roamingEnableWarningPostpaid\' : \' \') | translate}}</span></div><div ng-if="isFiber" class="warning-message"><h2 translate="fiber_remember_to_cancel_title"></h2><span bind-html-compile="\'fiber_remember_to_cancel_description\' | translate"></span></div><div ng-if="isHFC" class="warning-message"><h2 translate="oc.hfc_remember_to_cancel.title"></h2><span bind-html-compile="\'oc.hfc_remember_to_cancel.description\' | translate"></span></div><h2 translate="{{(!state.agentLoggedIn && order.subscriptionDetails.iccid) ? \'nextStepsTitleSelfRegistration\' : \'nextStepsTitle\'}}"></h2><ol class="steps-list" ng-if="!isFiber && !isTV && !isHFC"><li ng-if="order.idWillBeChecked && order.validationType === \'ValidateDigital\'"><h2 translate="nextStep_validation_title"></h2><span translate="nextStep_validation_description"></span></li><li ng-if="order.idWillBeChecked && order.validationType === \'Park\' && !order.subscriptionDetails.fastActivation"><h2 translate="nextStep_validationPostIdent_title"></h2><span translate="nextStep_validationPostIdent_description"></span></li><li ng-if="!getSubscription().newSim && !order.subscriptionDetails.iccid && order.subscriptionDetails.simType !== \'ESIM\'"><h2 translate="nextStep_deliver_title"></h2><span translate="nextStep_deliver_description" ng-if="order.idWillBeChecked && !order.subscriptionDetails.fastActivation"></span> <span translate="nextStep_deliver_no_check_description" ng-if="!order.idWillBeChecked || order.subscriptionDetails.fastActivation"></span></li><li ng-if="!getSubscription().newSim && !order.subscriptionDetails.iccid && order.subscriptionDetails.simType === \'ESIM\' && !order.idWillBeChecked || (order.subscriptionDetails.fastActivation && order.subscriptionDetails.simType === \'ESIM\')"><h2 translate="nextStep_esim_title"></h2><span translate="nextStep_esim_no_check_description"></span></li><li ng-if="order.idWillBeChecked && order.validationType === \'Park\' && order.subscriptionDetails.fastActivation"><h2 translate="nextStep_validation_park_title"></h2><span translate="nextStep_validation_park_description"></span></li><li ng-if="!getSubscription().newSim && !order.subscriptionDetails.iccid && order.subscriptionDetails.simType === \'ESIM\' && order.idWillBeChecked && !order.subscriptionDetails.fastActivation"><h2 translate="nextStep_esim_title"></h2><span translate="nextStep_esim_description"></span></li><li ng-if="!getSubscription().newSim"><h2 translate="nextStep_activation_title"></h2><span translate="nextStep_activation_description" ng-if="!order.subscriptionDetails.iccid"></span> <span translate="nextStep_activationSelf_description" ng-if="order.subscriptionDetails.iccid"></span></li><li ng-if="showSpecificTextForRateplanPlusProducts && showRateplanPlusfeature"><h2 translate="nextStep_5gRateplanPlusActivation_title"></h2><span translate="nextStep_5gRateplanPlusActivation_description"></span></li><li ng-if="showSpecificTextForRateplanPlusProducts && showRateplanPlusfeature"><h2 translate="nextStep_RateplanPlusActivation_title"></h2><span translate="nextStep_RateplanPlusActivation_description"></span></li></ol><ol class="steps-list" ng-if="isFiber"><li ng-if="applyForFreePremiumTV && showHideTvInfoForInternetProducts"><h2 translate="FiberConfirmationNextStepActivateYalloTvNowTitle"></h2><span translate="FiberConfirmationNextStepActivateYalloTvNowDesc"></span><div><a c-route="/eshop/new-postpaid/checkout/yallo_premium_tv?spcm=true" class="button petrol bottomless" translate="tvActivateTitle"></a></div></li><li ng-if="order.installationDetails.orderType === \'waitCustomerInput\'"><h2 translate="nextStep_enterOto_title"></h2><span translate="nextStep_enterOto_description"></span><div><a c-route="/account" class="button petrol bottomless" translate="nextStep_enterOto_cta"></a></div></li><li ng-if="order.installationDetails.communicationAttributes === \'BEPREADY\'"><h2 translate="nextStep_fiberAppointment_title"></h2><span translate="nextStep_fiberAppointment_description"></span></li><li ng-if="order.installationDetails.communicationAttributes === \'BEPREADY\'"><h2 translate="nextStep_fiberInstallation_title"></h2><span translate="nextStep_fiberInstallation_description"></span></li><li ng-if="order.installationDetails.communicationAttributes !== \'BEPREADY\' && showRateplanPlusfeature" ng-hide="showSpecificTextForRateplanPlusProducts && order.installationDetails.orderType === \'waitCustomerInput\'"><h2 translate="shipement_fiberInstallation_title"></h2><span translate="shipement_fiberInstallation_description"></span></li><li><h2 translate="nextStep_fiberActivation_title"></h2><span translate="nextStep_fiberActivation_description"></span></li><li ng-if="showSpecificTextForRateplanPlusProducts && showRateplanPlusfeature"><h2 translate="nextStep_RateplanPlusActivation_title"></h2><span translate="nextStep_RateplanPlusActivation_description"></span></li></ol><ol class="steps-list" ng-if="isHFC"><li ng-if="applyForFreePremiumTV && showHideTvInfoForInternetProducts"><h2 translate="FiberConfirmationNextStepActivateYalloTvNowTitle"></h2><span translate="FiberConfirmationNextStepActivateYalloTvNowDesc"></span><div><a c-route="/eshop/new-postpaid/checkout/yallo_premium_tv?spcm=true" class="button petrol bottomless" translate="tvActivateTitle"></a></div></li><li><h2 translate="nextStep_hfcShipmentInfo_title"></h2><span translate="nextStep_hfcShipmentInfo_description"></span></li><li><h2 translate="nextStep_hfcActivation_title"></h2><span translate="nextStep_hfcActivation_description"></span></li><li ng-if="showSpecificTextForRateplanPlusProducts && showRateplanPlusfeature"><h2 translate="nextStep_RateplanPlusActivation_title"></h2><span translate="nextStep_RateplanPlusActivation_description"></span></li></ol><ol class="steps-list" ng-if="isTV"><li><h2 translate="nextStep_tv_watch_now_title"></h2><span translate="nextStep_tv_watch_now_description"></span> <a watch-tv-link class="button big full-width-on-mobile" target="_blank"><i class="icon icon-inline" icon="fontawesome/play-circle"></i> <span translate="tvOrderSuccessWatchNow"></span></a></li><li><h2 translate="nextStep_download_app"></h2><span translate="nextStep_tv_download_app_description"></span><div class="download-app"><a target="_blank" rel="noopener" translate-attr="{href : \'yalloTVAppUrlItunes\'}"><img src="/assets/images/apple-store-badge.png" translate-attr="{alt:\'alt_apple-store-badge\'}" alt="download ios"></a><a target="_blank" rel="noopener" translate-attr="{href : \'yalloTVAppUrlPlaystore\'}"><img src="/assets/images/google-play-badge.png" translate-attr="{alt:\'alt_google-play-badge\'}" alt="download android"></a></div></li><li><h2 translate="nextStep_tv_box3"></h2><span translate="nextStep_tv_box3_description"></span></li></ol></div>');
$templateCache.put('/scripts/directives/notifications/dirc_notifications.html','<ul class="notification-list" ng-if="notifications.notifications.length"><li ng-repeat="notification in notifications.notifications track by notification.id" class="notification-item {{::notification.type}}" ng-click="notification.remove()" ng-hide="$index != notifications.notifications.length - 1" ng-class="{\'start-hiding\': notification.startHiding}"><i icon="fontawesome/exclamation-triangle" ng-show="::notification.type == \'bad\'" class="icon-inline fill-white"></i> <i icon="fontawesome/check-circle" ng-show="::notification.type == \'good\'" class="icon-inline fill-white"></i> <i icon="fontawesome/times" ng-show="::notification.type == \'bad\'" class="icon-inline fill-white close-button"></i> <span translate="{{::notification.message}}"></span> <span ng-if="::notification.showCode">({{::notification.message.split(\'_\')[1]}})</span></li></ul>');
$templateCache.put('/scripts/directives/offer/dirc_offer.html','<div class="offer-content {{offerSizeClass}}" ng-class="{\'no-image\' : !offer.mobileImage, \'no-extra-spacing-bottom\': !(offer.actions[0].text && offer.actions[0].link) && !(offer.shareCta && !dontShowCta)}" offer-size-calc><a class="no-link offer-link" data-wio-id="{{::id}}" c-route="{{offer.actions[0].link}}" dont-link="{{!offer.actions[0].link}}" ng-click="event(offer.actions[0].link)"><div class="offer-image" ng-if="offer.mobileImage" ng-style="{\'background-image\': \'url(\' + offer.mobileImage + \')\'}"></div><div class="offer-inner" ng-class="{bottomless: !offer.actions[0].text || !offer.actions[0].link}"><div class="offer-text"><h2 class="offer-title" bind-html-compile="offer.title"></h2><div class="offer-desc" bind-html-compile="offer.description"></div><count-down ng-if="offer.countDown && showCountdown" ng-class="{center: offer.countDown.primary.alignment === \'Center\'}" time-output="countDownDateOutput" count-down-date="offer.countDown.items" hide-days="offer.countDown.primary.hide_days === \'Hide days\'" repeat-frequency="offer.countDown.primary.repeat_frequency" show-labels="offer.countDown.primary.show_labels === \'Show labels\'"></count-down></div></div></a><div class="offer-cta-container" ng-if="offer.actions[0].text && !dontShowCta && !(offer.actions[0].primary.additional_settings === \'Hide on desktop\' && rs.isDesktop) && !(offer.actions[0].primary.additional_settings === \'Hide on mobile\' && rs.isMobile)"><a class="offer-cta button primary" c-route="{{offer.actions[0].link}}">{{offer.actions[0].text}}</a></div><div class="offer-cta-container" ng-if="offer.shareCta && !dontShowCta"><button class="offer-cta button primary" share-button data="offer.shareCta">{{offer.shareCta.buttonText}}</button></div></div>');
$templateCache.put('/scripts/directives/offer-big/dirc_offer-big.html','<a class="offer-big no-link" c-route="{{offerLink || offer.actions[0].link}}" ng-click="event()" dont-link="{{!offerLink && !offer.actions[0].link}}" ng-if="offer"><div class="content"><div class="content-splitter"><loading-button loading="true" ng-if="loading"></loading-button><div class="offer-text" ng-if="!loading" data-wio-id="{{id}}"><h2><span ng-if="offerTextAddon">{{offerTextAddon}}</span><span bind-html-compile="offer.title"></span></h2><div class="offer-desc" bind-html-compile="offer.description"></div><count-down ng-if="offer.countDown && showCountdown" count-down-date="offer.countDown.items" time-output="countDownDateOutput" ng-class="{center: offer.countDown.primary.alignment === \'Center\'}" hide-days="offer.countDown.primary.hide_days === \'Hide days\'" repeat-frequency="offer.countDown.primary.repeat_frequency" show-labels="offer.countDown.primary.show_labels === \'Show labels\'"></count-down><button ng-class="{\'big-cta primary\' : !redButton, \'primary bottomless\' : redButton, \'featured big-cta\': offer.actions[0].color === \'Red\', \'featured big-cta secondary\': offer.actions[0].color === \'Purple\'}" ng-if="offer.actions[0].text && !(offer.actions[0].primary.additional_settings === \'Hide on desktop\' && rs.isDesktop) && !(offer.actions[0].primary.additional_settings === \'Hide on mobile\' && rs.isMobile)">{{offer.actions[0].text}}</button> <button ng-class="{\'big-cta primary\' : !redButton, \'primary bottomless\' : redButton}" ng-if="offer.shareCta" share-button data="offer.shareCta">{{offer.shareCta.buttonText}}</button></div><div class="offer-image" ng-if="offer.mediumImage" ng-style="{\'background-image\': \'url(\' + offer.mediumImage + \')\'}"></div></div><div class="squircle" ng-if="offer.squircle" ng-class="offer.squircle.color"><span><span bind-html-compile="offer.squircle.text"></span></span></div></div></a>');
$templateCache.put('/scripts/directives/offer-hero/dirc_offer-hero.html','<section class="screenblock offer-hero headless bottomless" ng-if="offer"><div class="content"><a c-route="{{offer.actions[0].link}}" dont-link="{{!offer.actions[0].link || (dontShowCta && !(offer.actions[0].primary.additional_settings === \'Hide on desktop\' && rs.isDesktop) && !(offer.actions[0].primary.additional_settings === \'Hide on mobile\' && rs.isMobile))}}" class="lebara-offer-content no-link" ng-click="event()"><div class="content-inner"><div class="offer-text"><div data-wio-id="{{::id}}"></div><div class="offer-desc" bind-html-compile="offer.description"></div><count-down ng-if="offer.countDown" count-down-date="offer.countDown.items" hide-days="offer.countDown.primary.hide_days === \'Hide days\'" repeat-frequency="offer.countDown.primary.repeat_frequency" show-labels="offer.countDown.primary.show_labels === \'Show labels\'"></count-down></div><div stick-to-bottom is-not-sticky="!offer.actions[0].sticky && !forceSticky" ng-if="offer.actions[0].text && !dontShowCta && !(offer.actions[0].primary.additional_settings === \'Hide on desktop\' && rs.isDesktop) && !(offer.actions[0].primary.additional_settings === \'Hide on mobile\' && rs.isMobile)"><button class="offer-cta red bottomless">{{offer.actions[0].text}}</button></div></div></a><div class="half-height-extender"></div></div><div class="offer-background {{offer.backgroundcolor}}" ng-if="!offer.image"></div><div class="offer-background offer-background-with-image" ng-if="offer.image && showLebaraMobileOfferImage" ng-style="{\'background-image\': \'url(\' + offer.image + \')\'}"></div><div class="offer-background gradiant"></div></section>');
$templateCache.put('/scripts/directives/offer-hero-centered/dirc_offer-hero-centered.html','<section class="screenblock offer-hero-centered temp" ng-if="!offer"></section><section class="screenblock offer-hero-centered" ng-if="offer"><div><div class="content" ng-class="{\'no-link\': !offer.actions[0].link}"><div class="offer-background" ng-if="offer.image" ng-style="{\'background-image\': \'url(\' + imageToDisplay + \')\'}"></div><a c-route="{{offer.actions[0].link}}" dont-link="{{!offer.actions[0].link || dontShowCta}}" class="content-splitter no-link" ng-click="event()"><div class="content-inner" ng-class="{\'full-width\': !offer.squircle}"><div class="offer-text"><div data-wio-id="{{::id}}"></div><div class="offer-desc" bind-html-compile="offer.description"></div></div><div class="offer-price" ng-show="offer.squircle"><span bind-html-compile="offer.squircle.text"></span></div><count-down ng-if="offer.countDown && showCountdown" time-output="countDownDateOutput" count-down-date="offer.countDown.items" ng-class="{center: offer.countDown.primary.alignment === \'Center\'}" hide-days="offer.countDown.primary.hide_days === \'Hide days\'" repeat-frequency="offer.countDown.primary.repeat_frequency" show-labels="offer.countDown.primary.show_labels === \'Show labels\'"></count-down><div stick-to-bottom is-not-sticky="!offer.actions[0].sticky && !forceSticky" ng-if="offer.actions[0].text && !dontShowCta && buttonAlignment !== \'Bottom\'"><button class="big-cta big">{{offer.actions[0].text}}</button></div><div stick-to-bottom is-not-sticky="!offer.shareCta.sticky && !forceSticky" ng-if="offer.shareCta && !dontShowCta && buttonAlignment !== \'Bottom\'"><button class="big-cta big" share-button data="offer.shareCta">{{offer.shareCta.buttonText}}</button></div><p ng-if="offer.belowcta" class="bottomless below-cta" bind-html-compile="offer.belowcta"></p></div></a><a c-route="{{offer.actions[0].link}}" dont-link="{{!offer.actions[0].link || dontShowCta}}" class="aligned-button-bottom" ng-click="event()" ng-if="buttonAlignment === \'Bottom\'"><button class="big-cta big" ng-class="{secondary: offer.actions[0].color === \'Purple\'}">{{offer.actions[0].text}}</button></a></div></div><div class="offer-price mobile" ng-if="offer.squircle"><span bind-html-compile="offer.squircle.text"></span></div></section>');
$templateCache.put('/scripts/directives/onp-status/dirc_onp-status.html','<div class="onp-box bottomless" ng-class="{positive : positive}" ng-if="status && (!actionPerformed && !loading)"><div class="onp-box-body"><i icon="number_porting" class="onp-icon" ng-if="status === \'waiting\'"></i> <i icon="sub-warn" class="onp-icon error" ng-if="status === \'error\'"></i> <i icon="signature" class="onp-icon" ng-if="status === \'sign\' || status === \'person\' || status === \'company\'"></i> <i icon="done" class="onp-icon" ng-if="status === \'confirmed\'"></i> <span class="onp-title">{{ \'onp-\' + status + \'-title\' | translate | replaceText : \'XXXX\' : ((np.portDate | date : \'dd\') + \' \' + (\'month\' + np.portDate.getMonth() | translate) + \' \' + (np.portDate | date : \'yyyy\'))}}</span><br><span class="onp-sub" bind-html-compile="\'onp-\' + status + \'-sub\' | translate : true | replaceText : \'XXXX\' : ((np.portDate | date : \'dd\') + \' \' + (\'month\' + np.portDate.getMonth() | translate)+ \' \' + (np.portDate | date : \'yyyy\'))"></span> <a class="button petrol bottomless" ng-if="status === \'sign\'" ng-click="onpPopupDigital.show()"><span translate="onp-signing-digital-cta"></span></a><div ng-if="status == \'company\' || status == \'person\'" class="onp-signing-interface"><div class="bordered vertical" ng-click="onpPopupDigital.show()" ng-if="!data.file.b64"><div><h2 translate="onp-poa-title-digital"></h2><b><span translate="onp-digital-description"></span></b></div><div class="center"><a class="button petrol"><span translate="onp-signing-digital-cta"></span></a></div></div><div class="center center-verticaly-flex" ng-if="!data.file.b64 && allowUpload"><span class="or-text" translate="or-onp"></span></div><div class="bordered" ng-if="allowUpload"><h2 translate="onp-poa-title-manual"></h2><ul ng-if="!data.file.b64"><li><b>1. <span translate-compile translate="onp-point-1"></span></b></li><li><b>2. <span translate="onp-point-2"></span></b></li><li><b>3. <span translate="onp-point-3"></span></b></li></ul><div ng-if="!data.file.b64"><input type="file" id="file" fileread="data.file" max-size="1024*1024*5" target-resolution="1920" selector="\'#idFileLabel\'" dont-rename-file="true" required accept=".png, .jpg, .jpeg, .pdf, capture=camera"> <label class="nowrap" for="file" id="idFileLabel"><div><i icon="fontawesome/check" ng-show="data.file.b64" class="size-1 fill-primary"></i><br><br><span translate="{{rs.isMobile ? \'upload-onp-cta\' : \'upload-onp-cta-desktop\'}}"></span></div></label></div><div ng-if="data.file.b64"><div><a href="" ng-click="data.file.b64 = false" translate="back"></a></div><img ng-if="data.file.fileType !== \'pdf\'" width="150" class="preview-onp" ng-src="{{data.file.b64}}"><br><div ng-if="data.file.fileType === \'pdf\'" class="center"><i icon="signature" class="fill-primary size-2 center"></i></div><a class="button petrol" ng-click="uploadSignedDocument()"><i icon="fontawesome/check" ng-show="data.file.b64" class="icon-inline fill-white"></i> <span translate="confirm-onp-cta"></span></a></div></div></div></div></div><loading-button loading="true" ng-if="loading"></loading-button>');
$templateCache.put('/scripts/directives/openid-login/dirc_openid-login.html','<div><loading-button ng-if="isLoading" loading="true"></loading-button><easy-login ng-if="!customerLoggedIn && !isLoading" on-success="onSuccess"></easy-login><div class="warning-message" ng-if="errorMsg"><span translate="error_{{::errorMsg}}"></span></div><div ng-if="error == \'no_tv_subscription\'"><span translate="error_openid_no_tv_subscription"></span><tv-offer></tv-offer></div></div>');
$templateCache.put('/scripts/directives/option-carousel/dirc_option-carousel.html','<div class="option-carousel-container"><div class="option-carousel"><div class="option-carousel-content" ng-style="{\'transform\': \'translateX(-\' + (data.position * (100/columnCount())) + \'%)\'}"><option-item ng-repeat="option in options | objToArray | buyableFromSelfcare | orderBy : \'-priority\' as filteredOptions track by option.id " rateplan="rateplan" class="product-item" data="option" id="option-item-{{::option.url}}" current-sub="currentSub"></option-item></div></div><div ng-if="filteredOptions.length > columnCount()"><div ng-if="!rs.isMobile"><div class="carousel-indicator"><div class="indicator-item" ng-repeat="option in filteredOptions track by option.id" ng-class="{selected: isSelected($index)}" ng-click="goToPos($index)"></div></div></div><div class="product-switcher options inline"><a ng-click="move(\'left\')" translate-attr="{title :\'previousProduct\'}" ng-class="{disabled: !canMoveLeft()}"></a> <a ng-click="move(\'right\')" translate-attr="{title : \'nextProduct\'}" ng-class="{disabled: !canMoveRight()}"></a></div></div></div>');
$templateCache.put('/scripts/directives/option-item/dirc_option-item.html','<a c-route="{{checkUrl()}}/option/{{option.url}}?rateplan={{rateplan.url}}" class="product-link" ng-class="{promotion : option.getText(\'header\', true) || option.normalCost != option.cost}"><div class="product-discount" ng-if="option.calcDiscountPercent() && !option.getText(\'header\', true)">{{option.calcDiscountPercent()}}%&nbsp;<span translate="discount"></span></div><div class="product-discount" ng-if="option.getText(\'header\', true)"><span bind-html-compile="option.getText(\'header\') | translate"></span></div><div class="product-container option"><div class="product-content"><h3 bind-html-compile="option.getText(\'title\') | translate" class="product-title"></h3><div bind-html-compile="option.getText(\'shortdescription\') | translate" class="product-description" translate-compile></div></div><div class="product-pricing"><span class="crossed-out" ng-if="option.getReelPriceFromSheetGoogle()">{{option.getReelPriceFromSheetGoogle() | customCurrency}} / <span translate="duration_{{option.duration}}"></span></span><br><span class="crossed-out" ng-hide="option.getReelPriceFromSheetGoogle()" ng-if=" !option.getReelPriceFromSheetGoogle() && (currentSub && option.calcPriceNewCustomer(currentSub) != option.cost) || option.normalCost != option.cost || option.normalCost != option.newCustomerCost">{{option.normalCost | customCurrency}} / <span translate="duration_{{option.duration}}"></span></span><br><h2>{{ (option.newCustomerCost || option.cost) | customCurrency }} / <span translate="duration_{{option.duration}}"></span></h2></div></div></a>');
$templateCache.put('/scripts/directives/option-item-single/dirc_option-item-single.html','<div class="option-item-single"><div class="product-item-box" ng-class="{\'prod-hover\': prodHover}"><div class="badge {{productdata.badgeColor}}" ng-class="{\'red\': productdata.bestConfig.best.promotion}" ng-show="option.badge">{{::option.badge.text}}</div><p bind-html-compile="option.getText(\'shortdescription\') | translate"></p><span class="crossed-out" ng-show="option.normalCost != option.cost || option.normalCost != option.newCustomerCost">{{option.normalCost | customCurrency}} / <span translate="duration_{{::option.duration}}"></span></span><h2>{{option.cost | customCurrency}} / <span translate="duration_{{::option.duration}}"></span></h2><div><i icon="fontawesome/commenting" class="icon-inline"></i> <span translate="activateSmsPre"></span> <strong>"{{::option.keyword}}"</strong> <span translate="activateSmsTo"></span> <strong>{{::option.smsNumber}}</strong>&nbsp;<span translate="activateSmsToPost"></span></div></div></div>');
$templateCache.put('/scripts/directives/option-price/dirc_option-price.html','<div><div ng-if="!small" class="price"><span class="currency">CHF</span> <span class="amount">{{(discountedCost) | customCurrency : true}}</span> <span class="currency">/<span translate="duration_{{option.duration}}"></span></span><br><span ng-if="option.getReelPriceFromSheetGoogle()" class="crossed-out">{{option.getReelPriceFromSheetGoogle() | customCurrency}}</span><div ng-if="discountedCost != optionCost && discountedCost > 0.01"><span class="price-statt crossed-out"><span translate="statt"></span> {{optionCost | customCurrency : true}}</span></div></div><div ng-if="small"><div><span ng-class="{bold: boldPrices}">{{discountedCost | customCurrency}}</span>/<span translate="duration_{{option.duration}}"></span></div><div class="crossed-out" ng-if="discountedCost != optionCost && discountedCost > 0.01"><span class="price-statt crossed-out"><span translate="statt"></span> {{optionCost | customCurrency : true}}</span></div></div><div ng-if="!hideLegalText && promo && discountedCost > 0.01" class="option-promo-limited-message"><span ng-if="isActiveOption && !promo.isLifetime" class="legal">*<span translate="monetaryPromoEndDate"></span> <b>{{promo.endDate | date : \'dd.MM.yyyy\'}}</b></span> <span ng-if="isActiveOption && promo.isLifetime" class="legal">*<span translate="monetaryPromoIsLifetime"></span></span> <span ng-if="!isActiveOption" class="legal">{{option.getPromoLegalText(promo.discountDuration)}}</span></div></div>');
$templateCache.put('/scripts/directives/options/dirc_options.html','<div ng-repeat="category in categories track by $index" ng-show="category !== \'SPEEDON\'"><div ng-if="category === \'ROAMING\'"><h2 class="spaced"><i icon="fontawesome/{{::getIcon(category)}}" class="icon-inline"></i> <span class="capitalize first" translate="cat{{::category | uppercase}}"></span></h2><div class="country-selector-container"><h3 translate="chooseCountry"></h3><auto-country-selector out-obj="countrySelector" ng-if="category === \'ROAMING\'" class="spaced" show-empty-first-entry="true"></auto-country-selector></div><div ng-repeat="option in options | objToArray | buyableFromSelfcare | filter : {category: category, hidden: !!showHidden } | inString : \'url\' : hiddenUrls | roamingOptions : (countrySelector.selectedCountry ) | orderBy : \'priority\' as filteredOptions track by option.id"></div><div ng-if="filteredOptions.length"><option-carousel option-data="filteredOptions" rateplan="rateplan"></option-carousel></div><div ng-if="!filteredOptions.length" class="no-options-msg"><div class="warning-message center headless bottomless"><h2 translate="cockpitNoOptionsAvailableTitle"></h2><p translate="cockpitNoOptionsAvailableDescription" class="bottomless"></p></div></div></div><div ng-if="![\'ROAMING\', \'DISCOUNT\'].includes(category)"><div ng-repeat="option in options | objToArray | buyableFromSelfcare | filter : {category: category, hidden: !!showHidden } | inString : \'url\' : hiddenUrls | orderBy : \'priority\' as filteredOptions track by option.id"></div><div ng-if="filteredOptions.length"><h2 ng-if="filteredOptions.length || category === \'ROAMING\'" class="spaced"><i icon="fontawesome/{{::getIcon(category)}}" class="icon-inline"></i> <span class="capitalize first" translate="cat{{::category | uppercase}}"></span></h2><option-carousel option-data="filteredOptions" rateplan="rateplan"></option-carousel></div></div></div>');
$templateCache.put('/scripts/directives/order-details/dirc_order-details.html','<next-steps order="order" ng-if="!state.agentLoggedIn"></next-steps><div ng-if="!state.agentLoggedIn && order.subscriptionDetails.iccid" class="center"><div class="confirmation-self-registration-desc"><h2 translate="selfRegistrationConfirmationTitle"></h2><p translate="selfRegistrationConfirmationDescription"></p></div><div><a c-route="/account" translate="prepaidConfirmationToOptionsButton" class="button petrol big"></a></div><hr class="big"></div><div ng-if="state.agentLoggedIn"><br><div class="row order-details-container"><div class="order-details-box"><div class="highlighted" ng-show="product.type == \'postpaid\'"><strong><span translate="billingMethodField"></span>:</strong> <span translate="billingMethod_{{order.billingMethod}}"></span></div><div><strong><span translate="nameField"></span>:</strong> <span translate="{{((order.billingCustomerDetails.title | lowercase) + \'Field\')}}"></span> {{order.billingCustomerDetails.firstName}} {{order.billingCustomerDetails.lastName}}</div><div><strong><span translate="dobField"></span>:</strong> {{order.billingCustomerDetails.dob | date : \'dd/MM/yyyy\'}}</div><div><strong><span translate="emailField"></span>:</strong> {{order.billingCustomerDetails.emailAddress}}</div><div><strong><span translate="addressField"></span>:</strong> {{order.billingAddress.streetName}} {{order.billingAddress.streetNumber}}, {{order.billingAddress.postCode}} {{order.billingAddress.city}}</div><div ng-if="order.billingCustomerDetails.billingIdDetails.idNumber"><strong><span translate="idField"></span>:</strong> {{order.billingCustomerDetails.billingIdDetails.idNumber}} ({{order.billingCustomerDetails.billingIdDetails.idTypeId | commonData : \'personalIdTypes\'}})</div><div ng-if="order.billingCustomerDetails.billingIdDetails.nationality"><strong><span translate="nationalityField"></span>:</strong> {{order.billingCustomerDetails.billingIdDetails.nationality | countryLookup}}</div></div><div class="order-details-box"><div><strong><span translate="productsField"></span>:</strong> <span translate="{{config.product.getText(\'title\', promotion)}}"></span> <span ng-show="config.type != \'prepaid\'">({{config.lockinLength}} <span translate="contractDurationShortPost"></span>)</span></div><div ng-show="order.subscriptionDetails.msisdn"><strong><span translate="msisdnField"></span>:</strong> {{order.subscriptionDetails.msisdn}}</div><div ng-show="order.subscriptionDetails.subscriptionType == \'porting\'"><strong><span translate="wishDateField"></span>:</strong> {{order.subscriptionDetails.wishDate | date : \'dd/MM/yyyy\'}}</div><div ng-show="order.buyableOptions.length"><strong><span translate="optionsField"></span>:</strong> <span ng-repeat="option in order.buyableOptions track by $index"><span ng-show="$index != 0 && $index != order.buyableOptions.length -1">, </span><span ng-show="$index != 0 && $index == order.buyableOptions.length -1">& </span><span bind-html-compile="SavingsOptions.options[option].getText(\'title\') | translate"></span></span></div><div ng-hide="order.buyableOptions.length || config.type == \'postpaid\'"><strong><span translate="optionsField"></span>:</strong> <span translate="noOptions"></span></div><div ng-repeat="device in order.devices track by device.id"><strong><span translate="deviceField"></span>:</strong> <span>{{device.title}}</span></div><div ng-hide="order.devices.length || config.type == \'prepaid\' || config.isFiber || config.hasTag(\'HFC\') ||\xA0config.product.productType == \'tv\'"><strong><span translate="deviceField"></span>:</strong> <span translate="noDevice"></span></div><div ng-show="order.promotionCode && config.type == \'postpaid\'"><strong><span translate="promotionField"></span>:</strong> <span>{{promotion.title}}</span></div><div ng-hide="order.promotionCode || config.type == \'prepaid\'"><strong><span translate="promotionField"></span>:</strong> <span translate="noPromotion"></span></div></div></div></div><div class="row row-mobile" ng-if="!state.agentLoggedIn"><div class="order-details-box" ng-if="order.pdfData"><a href ng-click="downloadPdf(order.pdfData, order.orderId + \'.pdf\')" class="confirmation-action-button"><span translate="downloadContract"></span> <i icon="fontawesome/download" class="icon-inline"></i></a></div><div class="order-details-box" ng-if="order.poaPdfData"><a href ng-click="downloadPdf(order.poaPdfData, \'poa.pdf\')" class="confirmation-action-button"><span translate="printPoaButton"></span> <i icon="fontawesome/download" class="icon-inline"></i></a></div><div class="order-details-box"><a c-route="/account" class="confirmation-action-button"><span translate="toYourAccountButton"></span> <i icon="fontawesome/user" class="icon-inline"></i></a></div><div class="order-details-box" ng-if="!order.devices.length && !order.subscriptionDetails.iccid && !pickedUpOrder && order.shipmentMethod === \'WAREHOUSE\' && rs.enablePickupAtStore"><a href ng-click="showOrderPickupPopup()" class="confirmation-action-button"><span translate="pickupOrder"></span> <i icon="fontawesome/shopping-basket" class="icon-inline"></i></a></div></div><div class="row row-mobile" ng-if="state.agentLoggedIn"><div class="order-details-box" ng-if="order.pdfData"><a href ng-click="downloadPdf(order.pdfData, \'contract.pdf\')" class="confirmation-action-button"><span translate="downloadContract"></span> <i icon="fontawesome/download" class="icon-inline"></i></a></div><div class="order-details-box" ng-if="order.invoicePdfData"><a href ng-click="downloadPdf(order.invoicePdfData, \'invoice.pdf\')" class="confirmation-action-button"><span translate="printReceiptButton"></span> <i icon="fontawesome/download" class="icon-inline"></i></a></div><div class="order-details-box" ng-if="order.poaPdfData"><a href ng-click="downloadPdf(order.poaPdfData, \'poa.pdf\')" class="confirmation-action-button"><span translate="printPoaButton"></span> <i icon="fontawesome/download" class="icon-inline"></i></a></div><div class="order-details-box"><a c-route="/pos/" class="confirmation-action-button"><span translate="posConfirmationHomeButton"></span> <i icon="fontawesome/home" class="icon-inline"></i></a></div><div class="order-details-box" ng-if="false"><a ng-if="state.customerLoggedIn" c-route="/pos/new-postpaid/checkout/yallo_premium_tv" class="confirmation-action-button"><span translate="FiberConfirmationNextStepActivateYalloTvNowTitle"></span> <i icon="fontawesome/tv" class="icon-inline"></i> </a><a ng-if="!state.customerLoggedIn" c-route="/pos/find-existing-customer?mode=msisdn&dob={{order.billingCustomerDetails.dob}}&username={{order.newCustomerUsername}}&forward=/pos/new-postpaid/checkout/yallo_premium_tv" class="confirmation-action-button"><span translate="FiberConfirmationNextStepActivateYalloTvNowTitle"></span> <i icon="fontawesome/tv" class="icon-inline"></i></a></div><div class="order-details-box" ng-if="!state.customerLoggedIn"><a c-route="/pos/find-existing-customer?autologin=true&mode=msisdn&dob={{order.billingCustomerDetails.dob}}&username={{order.newCustomerUsername}}" class="confirmation-action-button"><span translate="goToRegisteredCustomerButton"></span> <i icon="fontawesome/user" class="icon-inline"></i></a></div><div class="order-details-box" ng-if="state.customerLoggedIn"><a c-route="/pos/existing-customer" class="confirmation-action-button"><span translate="goToRegisteredCustomerButton"></span> <i icon="fontawesome/user" class="icon-inline"></i></a></div></div>');
$templateCache.put('/scripts/directives/order-details-extension/dirc_order-details-extension.html','<br><br><div class="row row-center" ng-hide="posMode"><div class="order-details-box" ng-if="lockinAdded"><a href ng-click="downloadPdf(order.pdfData, order.orderId + \'.pdf\')" class="confirmation-action-button"><span translate="downloadContract"></span> <i icon="fontawesome/download" class="icon-inline"></i></a></div><div class="order-details-box" ng-if="order.invoicePdfData"><a href ng-click="downloadPdf(order.invoicePdfData, \'invoice.pdf\')" class="confirmation-action-button"><span translate="printReceiptButton"></span> <i icon="fontawesome/download" class="icon-inline"></i></a></div></div><div class="row" ng-show="posMode"><div class="order-details-box"><a href ng-click="downloadPdf(order.pdfData, \'contract.pdf\')" class="confirmation-action-button"><span translate="downloadContract"></span> <i icon="fontawesome/download" class="icon-inline"></i></a></div><div class="order-details-box" ng-if="order.invoicePdfData"><a href ng-click="downloadPdf(order.invoicePdfData, \'invoice.pdf\')" class="confirmation-action-button"><span translate="printReceiptButton"></span> <i icon="fontawesome/download" class="icon-inline"></i></a></div><div class="order-details-box"><a c-route="/pos/" class="confirmation-action-button"><span translate="posConfirmationHomeButton"></span> <i icon="fontawesome/home" class="icon-inline"></i></a></div></div>');
$templateCache.put('/scripts/directives/order-pickup/dirc_order-pickup.html','<div ng-if="!success"><p translate="orderPickupDescription"></p><form name="orderPickupForm" ng-submit="orderPickupForm.$valid && submit()" novalidate><div ng-if="!account.accountOwner.emailAddress" class="formrow"><div class="formfield"><input type="email" id="emailAddress" name="emailAddress" ng-model="data.emailAddress" autocomplete="email" ng-model-options="{allowInvalid: true}" pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,10}" ng-disabled="confirming" check-email="true" email-validity-obj="data" required="true"> <label for="emailAddress"><i icon="fontawesome/envelope-o" class="icon-inline"></i> <span translate="emailField"></span></label></div></div><button translate="orderPickupConfirm" class="bottomless" ng-if="!confirming"></button><loading-button loading="true" ng-if="confirming" class="bottomless" type-button="true"></loading-button></form></div><div ng-if="success"><div class="success-message bottomless"><h3 translate="orderPickupSuccesss"></h3></div><div ng-if="!shipmentCancelled"><br><p class="text-silver bottomless" translate="orderPickupCouldntCancelOrder"></p></div></div>');
$templateCache.put('/scripts/directives/order-status/dirc_order-status.html','<div class="order-status" ng-class="{error: status === \'error\' || status === \'return_accepted\'}"><i icon="delivery" ng-if="showShipmentIcon"></i> <i icon="fontawesome/hourglass" ng-if="showDeliveryOnHoldIcon" class="size-2"></i> <i icon="sub-warn" ng-if="status === \'error\' || status === \'return_accepted\'"></i> <i icon="id_validierung" ng-if="status === \'idCheckNeeded\'"></i> <i icon="id_validierung" ng-if="status === \'idBeingChecked\'"></i> <i icon="id_validierung" ng-if="status === \'idCheckNeededFastActivation\'"></i> <i icon="fontawesome/shopping-basket" ng-if="status === \'pickupAtPosNeeded\'"></i><h2 translate="orderStatus_{{status}}_title" ng-if="status"></h2><p translate="orderStatus_{{status}}_description" ng-if="status"></p><a c-route="/account/id-check/verify-id" class="button full-width-on-mobile big bottomless" translate="orderStatus_idCheckNeeded_cta" ng-if="status === \'idCheckNeeded\' || status === \'idCheckNeededFastActivation\'"></a> <a href ng-click="orderPickupPopup.show()" class="button full-width-on-mobile big bottomless" translate="pickupOrderAtPos" ng-if="allowPickupAtStore"></a> <a href ng-click="shipOrderPopup.show()" class="button full-width-on-mobile big bottomless" translate="shipOrder" ng-if="order.shippingMethod === \'PICKUP_AT_STORE\'"></a> <a href ng-click="returnHandlingPopup.show()" class="button full-width-on-mobile big bottomless" translate="returnHandlingCta" ng-if="status === \'return_accepted\'"></a> <a href ng-click="terminateOrder()" class="button outline full-width-on-mobile big bottomless" translate="cancelOrderCta" ng-if="allowTermination && status === \'return_accepted\'"></a><div ng-if="order.trackingNumber"><br><b><a href="https://www.post.ch/swisspost-tracking?formattedParcelCodes={{order.trackingNumber}}" target="_blank" class="primary" rel="nofollow" translate="fiber-status_shipmentUnderway_link"></a></b></div></div>');
$templateCache.put('/scripts/directives/password-change/dirc_password-change.html','<div class="warning-message" ng-if="!account.isAccountOwner()">{{\'onlyOwnerCanChangeSomeSettings\' | translate | replaceText : \'OWNER\' : account.getAccountOwnerName()}}</div><form name="changePasswordForm" ng-submit="changePasswordForm.$valid && submit()" custom-validation="changePasswordForm" novalidate ng-class="{disabled: !editable}"><div class="formrow"><div class="formfield field-33" ng-hide="oldPassword"><input type="password" id="oldPassword" autocomplete="current-password" ng-model="data.oldPassword" minlength="8" required> <label for="oldPassword" translate="oldPasswordField"></label></div><div class="formfield field-33"><input type="password" id="newPassword" autocomplete="new-password" ng-model="data.newPassword" ng-change="checkPassword()" pattern="(?=^.{8,}$)((?=.*\\d)|(?=.*\\W+))(?![.\\n])(?=.*[A-Z])(?=.*[a-z]).*$" validation-type="password" minlength="8" required> <label for="newPassword" translate="newRecoveryPasswordField"></label><input-info><span translate="passwordRequirements"></span></input-info></div><div class="formfield field-33"><input type="password" id="repeatNewPassword" autocomplete="new-password" ng-model="data.repeatNewPassword" ng-change="checkPassword()" pattern="(?=^.{8,}$)((?=.*\\d)|(?=.*\\W+))(?![.\\n])(?=.*[A-Z])(?=.*[a-z]).*$" validation-type="password" minlength="8" required> <label for="repeatNewPassword" translate="reEnterNewRecoveryPasswordField"></label><input-info><span translate="passwordRequirements"></span></input-info></div></div><div class="formrow"><div class="formfield"><loading-button class="inline centered small" loading="changingPassword"><span translate="saveButton"></span></loading-button></div></div></form>');
$templateCache.put('/scripts/directives/payment-reference/dirc_payment-reference.html','<loading-button ng-if="loading" loading="true"></loading-button><div ng-if="!loading"><div class="invoice-detail-section"><strong translate="billingInformation"></strong> <span translate="billAccount"></span> {{::accountNumber}}</div><div class="invoice-detail-section"><strong translate="paymentFor"></strong>Lebara Mobile<br>c/o {{companyName}}<br>Postfach<br>8050 Z\xFCrich</div><div class="invoice-detail-section"><strong translate="billAmount"></strong> {{::amount | customCurrency}}</div><div class="invoice-detail-section"><strong translate="referenceNumber"></strong> {{::reference}}</div><div class="invoice-detail-section" ng-if="rs.isDesktop"><strong translate="codeLine"></strong> <span class="code-line">{{::weirdAmount}}>{{::referenceSimple}}+ {{::accountNumberSimple}}></span></div><div class="info-buttons"><a ng-click="print()" translate="printInvoice" ng-if="!loading && showPrint"></a></div><div ng-if="loading"><loading-button loading="true" type-button="true"></loading-button></div></div><div class="payment-reference"><img src="/assets/images/lebara-logo.png" class="logo" alt="Lebara"><div class="invoice-section"><div class="address-section"><div class="address">Lebara Mobile<br>c/o {{companyName}}<br>Postfach<br>8050 Z\xFCrich</div><div class="address">Lebara Mobile<br>c/o {{companyName}}<br>Postfach<br>8050 Z\xFCrich</div></div><div class="bill-info"><div class="labels"><span translate="printBillCustomerNo"></span>:<br><span translate="printBillInvoiceDate"></span>:<br><span translate="printBillDueDate"></span>:</div><div class="details">{{::billingGroupId}}<br><span translate="month{{::billDate.getMonth()}}"></span> {{::billDate.getDate()}} {{::billDate.getFullYear()}}<br><span translate="month{{::payDate.getMonth()}}"></span> {{::payDate.getDate()}} {{::payDate.getFullYear()}}</div><div class="reference"><b>{{::reference}}</b></div></div><div class="bill-info"><div class="amount-box"><span>{{::accountNumber}}</span><br><b>{{::amountWhole}}</b> <b>{{::amountCents}}</b></div><div class="amount-box"><span>{{::accountNumber}}</span><br><b>{{::amountWhole}}</b> <b>{{::amountCents}}</b></div><div class="customer-data"><span translate="{{::account.accountOwner.title === \'Mr\' ? \'printBillMr\' : \'printBillMs\'}}"></span><br>{{::account.accountOwner.firstName}} {{::account.accountOwner.lastName}}<br>{{::account.accountOwner.address.streetName}} {{::account.accountOwner.address.streetNumber}}<br>{{::account.accountOwner.address.postCode}} {{::account.accountOwner.address.city}}</div></div><div class="repeat-data">{{::referenceSimple}}<br><span translate="{{::account.accountOwner.title === \'Mr\' ? \'printBillMr\' : \'printBillMs\'}}"></span><br>{{::account.accountOwner.firstName}} {{::account.accountOwner.lastName}}<br>{{::account.accountOwner.address.streetName}} {{::account.accountOwner.address.streetNumber}}<br>{{::account.accountOwner.address.postCode}} {{::account.accountOwner.address.city}}</div><div class="combined-number"><b>{{::weirdAmount}}>{{::referenceSimple}}+ {{::accountNumberSimple}}></b></div></div></div>');
$templateCache.put('/scripts/directives/payment-reference-new/dirc_payment-reference-new.html','<div ng-class="{\'payment-container-old\': !adminfeeflag, \'payment-container\': adminfeeflag}"><div class="qr-container" id="qr-c"></div><div class="payment-info"><div translate="qrInvoicePaymentFor"></div><div>{{iban}}</div><div translate="Sunrise_UPC_GmbH"></div><div>{{brand}}</div><div>8152 Glattpark (Opfikon)</div><br><div translate="qrInvoiceReferenceNumber"></div><div>{{reference}}</div><br><div translate="paymentMethodAmountTitle"></div><div>{{amount | customCurrency}}</div></div></div>');
$templateCache.put('/scripts/directives/personal-details/dirc_personal-details.html','<div><div class="formrow"><div class="formfield field-{{::companyName ? 25 : 33 }}" ng-if="!hideTitle && !radioMode"><select name="title" id="title" data-testid="personal-details-title" ng-model="data.title" ng-class="{\'pixel-filled\': data.pixel_title && data.pixel_title === data.title}" class="focus-first" autocomplete="{{autoComplete ? \'honorific-prefix\' : \'off\'}}" ng-disabled="!editable" required><option value="Mr" translate="mrField"></option><option value="Ms" translate="msField"></option></select> <label for="title"><i icon="fontawesome/user" class="icon-inline"></i> <span translate="titleField"></span></label></div><div class="formfield field-{{::companyName ? 25 : 33 }}" ng-if="!hideTitle && radioMode"><input id="Mr{{::$id}}" data-testid="personal-details-title-mr" ng-model="data.title" ng-class="{\'pixel-filled\': data.pixel_title && data.pixel_title === data.title}" class="focus-first" value="Mr" name="title{{::$id}}" type="radio" ng-disabled="!editable" required> <label for="Mr{{::$id}}"><span translate="mrField"></span></label> <input id="Ms{{::$id}}" data-testid="personal-details-title-ms" ng-model="data.title" ng-class="{\'pixel-filled\': data.pixel_title && data.pixel_title === data.title}" class="focus-first" value="Ms" name="title{{::$id}}" type="radio" ng-disabled="!editable" required> <label for="Ms{{::$id}}"><span translate="msField"></span></label></div><div class="formfield field-{{::companyName ? 25 : 33 }}"><input type="{{autocomplete === true ? \'text\' : \'search\'}}" id="firstName" data-testid="personal-details-first-name" name="firstName" ng-model="data.firstName" autocomplete="{{autoComplete ? \'given-name\' : \'off\'}}" pattern="{{::pattern}}" ng-disabled="!editable || preventNameEdit" ng-maxlength="30" ng-class="{\'pixel-filled\': data.pixel_firstName && data.pixel_firstName === data.firstName}" validation-type="name" required> <label for="firstName"><i icon="fontawesome/user" class="icon-inline"></i> <span translate="firstNameField"></span></label></div><div class="formfield field-{{::companyName ? 25 : 33 }}"><input type="{{autocomplete === true ? \'text\' : \'search\'}}" id="lastName" data-testid="personal-details-last-name" name="{{::autocomplete ? \'lastName\' : \'lstnmhddn\'}}" ng-model="data.lastName" autocomplete="{{::autoComplete ? \'family-name\' : \'off\'}}" pattern="{{::pattern}}" ng-disabled="!editable || preventNameEdit" validation-type="name" ng-maxlength="60" ng-class="{\'pixel-filled\': data.pixel_lastName && data.pixel_lastName === data.lastName}" required> <label for="{{::autocomplete ? \'lastName\' : \'lstnmhddn\'}}"><i icon="fontawesome/user" class="icon-inline"></i> <span translate="lastNameField"></span></label></div><div class="formfield field-25" ng-if="showCompanyField"><input type="{{autocomplete === true ? \'text\' : \'search\'}}" id="companyName" data-testid="personal-details-company-name" ng-model="data.companyName" autocomplete="off" pattern="{{::pattern}}" ng-disabled="!editable" validation-type="name" ng-maxlength="60"> <label for="companyName"><i icon="fontawesome/home" class="icon-inline"></i> <span translate="companyNameLabel"></span></label></div></div><div ng-if="eshopMode"><div class="formrow"><div class="formfield field-66" ng-if="!hideEmail"><input type="email" ng-if="editable || emailOnlyEditable" id="emailAddress" data-testid="personal-details-email" name="emailAddress" ng-model="data.emailAddress" autocomplete="{{autoComplete ? \'email\' : \'off\'}}" ng-model-options="{allowInvalid: true}" pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,10}" ng-disabled="!editable && !emailOnlyEditable" validation-type="email" check-email="true" email-validity-obj="data" ng-required="editable || emailOnlyEditable"> <input type="text" data-testid="personal-details-email-disabled" ng-if="!editable && !emailOnlyEditable" id="emailAddress" name="emailAddress" ng-model="data.emailAddress" ng-model-options="{allowInvalid: true}" ng-disabled="true"> <label for="emailAddress"><i icon="fontawesome/envelope-o" class="icon-inline"></i> <span translate="emailField"></span></label></div></div><div class="formrow"><div class="formfield field-50" ng-if="!hideBirthdate"><app-date data="data.dob" ng-class="{\'pixel-filled\': data.pixel_dob && data.pixel_dob.day === data.dob.day && data.pixel_dob.month === data.dob.month && data.pixel_dob.year === data.dob.year}" id="dateOfBirth" editable="editable" fewest-days-from-now="-43800" auto-complete="autoComplete ? \'bday\' : false" most-days-from-now="minAge" required="true" allow-any-date="allowAnyDate" force-id="\'_pd\'"><span translate="dobField"></span></app-date></div><div class="formfield field-50" ng-if="contactNumber"><phone-number id="contactNumberInt" name="contactNumber" ng-model="data.contactNumber" label="(numberText || \'contactNumberField\') | translate" editable="editable" required></phone-number><input-info><span translate="contactNumberInfo"></span></input-info></div></div></div><div ng-if="!eshopMode"><div class="formrow vertically-center" ng-class="{\'ng-submitted\' : highlightEmailEmpty && !data.emailAddress}" ng-if="!blockEmail && !hideEmail"><div class="formfield {{allowNoEmail ? \'field-66\' : \'field-100\'}}" ng-if="!data.noEmail"><input type="email" ng-if="editable || emailOnlyEditable" id="emailAddress" data-testid="personal-details-email" name="emailAddress" ng-model="data.emailAddress" ng-model-options="{allowInvalid: true}" autocomplete="{{autoComplete ? \'email\' : \'off\'}}" pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,10}" validation-type="email" ng-disabled="!editable && !emailOnlyEditable" check-email="!dontCheckEmail" ng-blur="outoffocusAnalyticsEvent()" email-validity-obj="data" ng-required="editable || emailOnlyEditable"> <input type="text" ng-if="!editable && !emailOnlyEditable" id="emailAddress" name="emailAddress" ng-model="data.emailAddress" ng-model-options="{allowInvalid: true}" ng-disabled="true"> <label for="emailAddress" translate="emailField"></label></div><div class="formfield {{data.noEmail ? \'field-100\' : \'field-33\'}}" ng-if="allowNoEmail"><input type="checkbox" data-testid="personal-details-no-email" ng-model="data.noEmail" ng-change="toggleNoEmail()" id="noEmail" ng-disabled="checkout.forceEmailBilling() || (!editable && !emailOnlyEditable)"> <label for="noEmail" translate="noEmailField" class="small-label"></label></div></div><div class="formrow"><div class="formfield field-33" ng-if="chooseLang"><select id="preferredLang" data-testid="personal-details-preferred-lang" name="preferredLang" ng-model="data.preferredLang" ng-disabled="!editable" required><option ng-repeat="language in langService.data.languages" value="{{language}}" translate="{{language}}"></option></select> <label for="preferredLang" translate="preferredLanguageField"></label></div><div class="formfield field-66"><app-date ng-class="{\'pixel-filled\': data.pixel_dob && data.pixel_dob.day === data.dob.day && data.pixel_dob.month === data.dob.month && data.pixel_dob.year === data.dob.year}" data="data.dob" id="dateOfBirth" editable="editable" auto-complete="\'bday\'" fewest-days-from-now="-43800" most-days-from-now="minAge" required="true" allow-any-date="allowAnyDate" force-id="\'_pd\'"><span translate="dobField"></span></app-date></div></div><div class="formrow" ng-if="contactNumber"><div class="formfield field-100"><phone-number id="contactNumberInt" name="contactNumber" ng-model="data.contactNumber" label="(numberText || \'contactNumberField\') | translate" editable="editable" required></phone-number><input-info><span translate="contactNumberInfo"></span></input-info></div></div></div></div>');
$templateCache.put('/scripts/directives/phone-number-input/dirc_phone_number_input.html','<div class="container"><div class="dropdown formfield" ng-class="{active:active}" ng-click="active=!active"><span class="selected-item"><img ng-src="/assets/images/flags/{{selectedCountry.id}}.png" alt=""> <span class="country-code">+{{selectedCountry.countryCallingCode}}</span></span> <select ng-model="selectedCountry" ng-change="updateCountry(selectedCountry)" ng-options="country as country[currentLang] + \' +\' + country.countryCallingCode group by country.group for country in dropDownItems track by country.id"></select></div><div class="phone-number-input"><input ng-ref="input" type="tel" maxlength="20" pattern="[0-9 -+()]*" autocomplete="tel" id="id" name="name" ng-model="phoneNumberDisplay" ng-model-options="{ getterSetter: true, allowInvalid: true }" ng-disabled="!editable || loading" data-testid="phone-number-{{name}}"> <label for="name">{{::label}}</label></div></div>');
$templateCache.put('/scripts/directives/popup/dirc_popup.html','<div class="popup" ng-mousedown="$event.stopPropagation();" ng-class="popup.data.classes"><div class="popup-header" ng-class="popup.data.headerColour" ng-hide="popup.data.hideHeader"><div class="popup-title" ng-class="{\'has-back-button\' : popup.functions.backButton}"><button type="button" ng-show="popup.functions.backButton" ng-click="popup.functions.backButton()"><i icon="fontawesome/angle-left" class="size-1 center-vertically"></i></button> <span ng-if="::popup.data.title && !popup.data.noTitleTranslate" translate="{{popup.data.title}}"></span> <span ng-if="::popup.data.title && popup.data.noTitleTranslate">{{popup.data.title}}</span> <span ng-if="::!popup.data.title">&nbsp;</span></div><span class="close" ng-hide="popup.data.hideClose" ng-click="!popup.data.hideClose && popup.hide(\'close-button\', true)"><i icon="fontawesome/times" class="size-1 center-vertically"></i></span></div><div class="popup-content" ng-class="popup.data.backgroundColour" ng-include="templateUrl"></div></div>');
$templateCache.put('/scripts/directives/popups/dirc_popups.html','<div ng-class="{closing : popups.closing}"><div class="overlay" ng-show="active.length"></div><popup-item ng-repeat="popup in popups.data | activePopups | orderBy : \'-openedTime\' | limitTo: 1 as active track by popup.openedTime" ng-mousedown="!popup.data.hideClose && popup.hide(\'background\')" class="popup-wrapper" data="popup" template-url="::\'popups/\' + popup.templateUrl"></popup-item></div>');
$templateCache.put('/scripts/directives/porting-user/dirc_porting-user.html','<div class="formrow"><div class="formfield field-50"><input type="text" id="firstName" name="firstName" ng-model="portingUser.firstName" autocomplete="off" ng-disabled="!editable" validation-type="name" pattern="{{::CommonData.regex.name}}" required> <label for="firstName" translate="firstNameField"></label></div><div class="formfield field-50"><input type="text" id="lastName" name="lastName" ng-model="portingUser.lastName" autocomplete="off" ng-disabled="!editable" validation-type="name" pattern="{{::CommonData.regex.name}}" required> <label for="lastName" translate="lastNameField"></label></div></div><address-checker auto-complete="false" address="portingUser.address" check="true" editable="editable" force-swiss-address="true"></address-checker>');
$templateCache.put('/scripts/directives/pos-account-info/dirc_pos-account-info.html','<div class="agent-section" ng-show="state.agentLoggedIn"><div class="agent-section-item"><i icon="fontawesome/bookmark" class="icon-inline fill-white"></i> <span>{{getChannelName(agent.data.channel)}}</span> <span ng-if="agent.data.channel !== agent.data.realChannel">({{getChannelName(agent.data.realChannel)}})</span></div><div class="agent-section-item" ng-if="agent.data.shop"><i icon="fontawesome/home" class="icon-inline fill-white"></i> <span>{{agent.data.shop}}</span></div><div class="agent-section-item"><i icon="fontawesome/user" class="icon-inline fill-white"></i> <span>{{agent.data.firstName}} {{agent.data.lastName}}</span></div></div><div class="mobile-agent-logout-button"><a href ng-click="agent.logout()" class="button outline white very-small" id="agent-logout-button"><span class="inline-loader in-button white" ng-show="state.agentLoggingOut"></span> Logout </a><span>({{agent.data.username}})</span> <span ng-click="agent.agentRightsPopup.show()" class="agent-rights-button"><i icon="fontawesome/info-circle" class="icon-inline fill-white"></i></span></div>');
$templateCache.put('/scripts/directives/pos-customer-info/dirc_pos-customer-info.html','<span translate="loggedInAs"></span>:<ul class="simple-list"><li><span translate="posCustInfoNamePre"></span>: <strong>{{account.accountOwner.firstName}} {{account.accountOwner.lastName}}</strong></li><li><span translate="posCustInfoDobPre"></span>: <strong>{{account.accountOwner.dob.day}}/{{account.accountOwner.dob.month}}/{{account.accountOwner.dob.year}}</strong></li><li><span translate="posCustInfoAddressPre"></span>: <strong>{{account.accountOwner.address | address}}</strong></li></ul><br><button class="logout outline" type="button" ng-click="agent.removeCustomerData()" name="button"><i icon="fontawesome/sign-out" class="icon-inline" ng-hide="agent.removingCustomerData"></i> <span class="inline-loader in-button" ng-show="agent.removingCustomerData"></span> &nbsp;<span translate="endUserSession"></span></button>');
$templateCache.put('/scripts/directives/pos-rateplan-change-ctas/dirc_pos-rateplan-change-ctas.html','<div ng-if="subscription.lockinEndDate" class="info-message"><h3 translate="contractDurationField" class="bottomless"></h3><p class="dark headless bottomless">{{::subscription.lockinStartDate | date : \'dd/MM/yyyy\'}} - {{::subscription.lockinEndDate | date : \'dd/MM/yyyy\'}}</p></div><div ng-if="!subscription.lockinEndDate"><br></div><div class="row center pos-box-container existing-customer"><div class="pos-box new-customer petrol-mode" id="new-customer"><a c-route="/pos/existing-customer/change-subscription/{{subscription.id}}" class="pos-box-content pos-action-box"><div class="icon"><i icon="fontawesome/arrow-circle-right" class="center size-1 fill-primary"></i></div><p class="hint-text" translate="retentionRateplanChangeDescription"></p><div class="cta"><button class="button petrol" translate="retentionRateplanChangeButton"></button></div></a></div><div class="pos-box new-customer petrol-mode"><a c-route="/pos/existing-customer/change-subscription/{{subscription.id}}?keep=true" class="pos-box-content pos-action-box"><div class="icon"><i icon="fontawesome/magic" class="center size-1 fill-primary"></i></div><p class="hint-text" translate="retentionContractExtensionDescription"></p><div class="cta"><button class="button petrol" translate="retentionContractExtensionButton"></button></div></a></div></div>');
$templateCache.put('/scripts/directives/pos-sim-swap/dirc_pos-sim-swap.html','<div class="warning-message" ng-if="!data.subs.length" translate="noSubscriptionsAvailableForSimSwap"></div><p class="hint-text" translate="simSwapPageNewDescription"></p><div class="formrow"><div class="formfield"><select id="61" ng-model="data.subscription" required><option ng-repeat="subscription in data.subs track by subscription.id" ng-value="subscription" ng-if="::subscription.msisdn" required>{{::subscription.msisdn}}</option></select> <label for="61" translate="msisdnToSwapField"></label></div></div><tabs data="tabs" tab-key="\'key\'" tab-title="\'key\'" options="tabOptions" ng-if="data.subscription"><div ng-if="tabOptions.activeTab === \'esimSwapTab\'"><p translate="eSimSwapPosDescription" ng-if="subscription.simcardInfo.matchingId"></p><p translate="swapToEsimPosDescription" ng-if="!subscription.simcardInfo.matchingId"></p><button ng-if="!loading && !enterCodeMode" translate="validateEsimSwapCta" ng-click="validateEsimSwap()"></button><div ng-if="enterCodeMode"><p bind-html-compile="\'esimSwapSmsSentText\' | translate | replaceText : \'XXXXX\' : subscription.msisdn"></p><form name="simSwapCodeForm" ng-submit="simSwapCodeForm.$valid && doEsimSwap()" novalidate custom-validation="simSwapCodeForm"><div class="formrow"><div class="formfield"><input ng-model="data.code" id="esimCode" autofocus type="tel" pattern="[0-9]{6}" minlength="6" maxlength="6" validation-type="easy-login-code" name="esimCode" autocomplete="off" required> <label for="esimCode"><i icon="fontawesome/lock" class="icon-inline"></i> <span translate="eSimCodeField"></span></label></div></div><div ng-if="isTest" class="legal"><br>Note: On test, the code is always <b>123456</b></div><button ng-if="!loading" translate="confirmEsimSwapCta"></button></form></div><loading-button loading="true" ng-if="loading"></loading-button></div><form name="simSwapForm" ng-submit="simSwapForm.$valid && startSimSwap()" ng-if="data.subs.length && tabOptions.activeTab === \'physicalSimSwap\'" custom-validation="simSwapForm" novalidate><div><p class="hint-text" translate="simSwapPageDescription"></p><div class="formrow"><div class="formfield field-50"><input id="60" type="text" pattern="[0-9]{20}" validation-type="iccid" minlength="20" input-disable-keys="13" maxlength="20" ng-model="data.newIccid" required> <label for="60" translate="newIccidField"></label></div></div></div><loading-button loading="swapping" class="small inline align-right"><span translate="confirmEsimSwapCta"></span></loading-button></form></tabs>');
$templateCache.put('/scripts/directives/postpaid-fiber-subscription/dirc_postpaid-fiber-subscription.html','<section class="screenblock light-smoke-gradient"><div class="content"><fiber-status data="subscription" ng-if="!subscription.fiberActive && subscription.status !== \'terminated\'"></fiber-status><div ng-if="subscription.fiberActive && subscription.status !== \'terminated\'" class="fiber-online"><img src="/assets/images/fiber-online.png" alt=""><h2 translate="fiberOnlineTitle"></h2><p class="bottomless" translate="fiberOnlineDescription"></p></div><div ng-if="subscription.status === \'terminated\'" class="terminated-sub-message"><i icon="sub-terminated"></i><h2 translate="subscriptionTerminatedTitle"></h2><span translate="subscriptionTerminatedMessage"></span></div></div></section>');
$templateCache.put('/scripts/directives/postpaid-subscription/dirc_postpaid-subscription.html','<section class="screenblock light-smoke-gradient cozy" ng-if="!loading"><div class="content"><subscription-warnings sub="subscription" on-esim-reset="init"></subscription-warnings><div ng-if="subscription.pendingRateplanChange" class="info-message center"><h3 class="bottomless">{{\'pendingRateplanChangeText\' | translate | replaceText : \'NEW_RATEPLAN\' : subscription.pendingRateplanChange.newRateplan.name | replaceText : \'CHANGE_DATE\' : (subscription.pendingRateplanChange.changeDate | date : \'dd/MM/yyyy\') }}</h3></div><div class="postpaid-subscription" ng-if="!subscription.gettingDetails && subscription.settings && state.commonDataExtrasLoaded && state.rateplanDataLoaded && subscription.status !== \'terminated\' && subscription.status !== \'pendingActivation\' && !subscription.fastActivation && !forceEsimAction"><div class="sub-overview"><h3 class="overview-title" translate="rateplanOverviewTitle"></h3><tabs data="tabs" tab-key="\'key\'" tab-title="\'key\'" options="tabOptions" center-tabs="true"></tabs><div mobile-sideways-scroll auto-height=".overview-section-container" auto-height-item=".overview-section-content" inner-el=".overview-section-content" hide-helpers="true" start-pos="{{startOnRoaming ? 1 : 0}}" always="true"><div class="overview-section-container"><div class="overview-section-content"><subscription-circle-group data="subscription" is-roaming="false" circles="nationalCircles" show-options-button="showDataOptionsbutton"></subscription-circle-group></div><div class="overview-section-content"><subscription-circle-group data="subscription" is-roaming="true" circles="roamingCircles" show-options-button="showRoamingOptionsbutton"></subscription-circle-group></div></div></div></div></div></div></section><section class="screenblock light-smoke-gradient" ng-if="loading"><loading-button loading="true"></loading-button></section>');
$templateCache.put('/scripts/directives/prepaid-subscription/dirc_prepaid-subscription.html','<section class="screenblock prepaid-subscription light-smoke-gradient" ng-if="!loading"><div class="content very-small"><subscription-warnings sub="subscription" on-esim-reset="init"></subscription-warnings><div ng-if="subscription.pendingRateplanChange" class="info-message center"><h3 class="bottomless">{{\'pendingRateplanChangeText\' | translate | replaceText : \'NEW_RATEPLAN\' : subscription.pendingRateplanChange.newRateplan.name | replaceText : \'CHANGE_DATE\' : (subscription.pendingRateplanChange.changeDate | date : \'dd/MM/yyyy\') }}</h3></div><div ng-if="subscription.status !== \'pendingActivation\' && subscription.status !== \'terminated\' && !subscription.fastActivation && !forceEsimAction"><div class="balance-and-topup center"><p class="prepaid-sub-label bottomless" translate="yourBalance"></p><div class="prepaid-balance-block"><span class="chf">CHF</span><h2>{{subscription.billingGroup.balance | floor}}</h2><span class="cents">.{{getCents(subscription.billingGroup.balance)}}</span></div><do-topup data="subscription" ng-if="subscription.status === \'active\' || subscription.status === \'pendingActivation\'"></do-topup><div class="recurring-topup-thing" ng-if="(subscription.scheduledTopups | objSize) || (subscription.balanceTopups | objSize) || (Topup.activeCreditCards() | objSize)"><div ng-if="(subscription.scheduledTopups | objSize) || (subscription.balanceTopups | objSize)" class="recurring-topup-active"><i icon="check"></i>&nbsp;<span translate="autoTopupEnabled"></span>&nbsp;(<a c-route="/account/auto-topups/{{subscription.id}}" class="text-petrol" translate="mySettings"></a>)</div><div ng-if="!(subscription.scheduledTopups | objSize) && !(subscription.balanceTopups | objSize)"><a c-route="/account/add-auto-topup/{{subscription.id}}" class="text-petrol" translate="enableAutoTopup"></a></div></div></div></div></div></section><section class="screenblock prepaid-subscription light-smoke-gradient no-border-top" ng-if="subscription.status !== \'pendingActivation\' && subscription.status !== \'terminated\' && !loading"><div class="content very-small"><div class="active-options" ng-show="(subscription.activeOptions | objSize) || (subscription.oneTimeOptions | objSize)"><subscription-bundles data="subscription"></subscription-bundles><active-options-prepaid data="subscription"></active-options-prepaid><speed-on-info ng-if="subscription.getSubOption()" data="subscription.getSubOption()" sub-data="subscription"></speed-on-info></div><div class="add-options in-page-options"><div ng-repeat="category in SavingsOptions.categories | filter : \'!SPEEDON\'" ng-show="filteredOptions.length" class="activate-option-category" ng-class="{open: cats[category]}"><span class="activate-category-header" ng-click="cats[category] = !cats[category]" ng-if="!popup.data.oneCat"><i icon="fontawesome/{{getIcon(category)}}" class="icon-inline"></i> <span class="capitalize" translate="cat{{category | uppercase}}"></span> <i icon="fontawesome/chevron-down" class="center-vertically"></i></span><div class="activate-category-body"><div ng-repeat="option in subscription.rateplan.options | objToArray | buyableFromSelfcare : subscription | filter : {\'category\': category} | optionsWithParent : subscription | roamingOptions : popup.data.selectedCountry | orderBy : \'-priority\' as filteredOptions track by option.id" class="option-activation-item" ng-click="openOption(option)"><div class="option-name"><strong bind-html-compile="option.getText(\'title\') | translate"></strong><div><span ng-show="option.subDetails[subscription.id]" class="active-tag">(<span translate="optionIsActive"></span>)</span> <span class="option-description" bind-html-compile="option.getText(\'shortdescription\') | translate"></span></div></div><div class="price-container"><div class="option-price"><span class="crossed-out" ng-show="option.normalCost != option.cost">{{option.normalCost | customCurrency}}</span> {{option.cost | customCurrency}}<br><span class="crossed-out" ng-if="option.getReelPriceFromSheetGoogle()">{{option.getReelPriceFromSheetGoogle() | customCurrency}}</span></div><i icon="fontawesome/angle-right" class="size-1"></i></div></div></div></div></div><option-activation data="subscription" on-close="closeOption" option="selectedOption" ng-if="selectedOption"></option-activation></div></section><section class="screenblock light-smoke-gradient" ng-if="loading"><loading-button loading="true"></loading-button></section>');
$templateCache.put('/scripts/directives/product-comparison/dirc_product-comparison.html','<div class="row product-comparison"><product-comparison-item ng-repeat="product in products" class="product-comparison-item product-comparison-item-{{columnCount}}" ng-class="{\'simple-mode\': simpleMode}" productdata="::product" link-extension="::linkExtension" is-extension="::extension" custom-link="::customLink" simple-mode="::simpleMode" always-show-checkout="::alwaysShowCheckout" hide-details-button="::hideDetailsButtons" checkout-button-text="::checkoutButtonText" current-product="currentProduct" subscription-data="subscriptionData" subdued="invertMultiProducts" show-usp="featuredProduct === product.product.url" custom-click="customClick"></product-comparison-item></div><div ng-show="!products.length"><div><div translate="currentlyNoProducts"></div></div></div>');
$templateCache.put('/scripts/directives/product-comparison-item/dirc_product-comparison-item.html','<div class="product-title"><div class="product-pricing"><h2 class="product-title-bigger" translate="product_{{::product.url}}_title"></h2><span class="text-red" bind-html-compile="\'onlyChfWhateverMore\' | translate | replaceText : \'XX\' : (priceDifference | customCurrency : true)" ng-if="promotion && getPriceDifference() > 0 && priceDifference < 20"></span></div><div class="product-comparison-table-title"><div class="label" translate="productCompareLabel"></div><div class="from" translate="productCompareFrom"></div><div class="to" translate="productCompareTo"></div></div></div><div class="product-content" ng-class="{ upgrade: productdata.waiveFee }"><div class="product-contents-box price"><div class="label" translate="compareProductPrice"></div><div class="current"><div class="product-contents-main" ng-if="!subscription.getCurrentDiscountPromo() && !subscription.getCurrentDiscount()">{{currentProduct.recurringCost | customCurrency : true}}</div><div class="product-contents-main" ng-if="subscription.getCurrentDiscountPromo() || subscription.getCurrentDiscount()"><span ng-class="subscription.getCurrentDiscount() > 0 && \'crossed-out\'">{{currentProduct.recurringCost | customCurrency : true}}</span><br><span ng-if="subscription.getCurrentDiscount() > 0" class="text-red"><strong>{{currentProduct.recurringCost - subscription.getCurrentDiscount() | customCurrency : true}}</strong></span></div></div><div class="new"><div class="product-contents-main" ng-if="!promotion.recurringDiscount || promotion.dontCrossOutPrice ">{{config.recurringCost | customCurrency : true}}</div><div class="product-contents-main" ng-if="promotion.recurringDiscount && !promotion.dontCrossOutPrice"><span class="crossed-out">{{config.recurringCost | customCurrency : true}}</span><br><span class="text-red"><strong>{{config.recurringCost - promotion.recurringDiscount | customCurrency : true}}</strong></span></div></div></div><div ng-if="subscription.isHFC"><div class="product-contents-box"><div class="label" translate="InternetSpeedForHFC"></div><div class="current"><div class="product-contents-main" bind-html-compile="(\'product_\' + currentProduct.url + \'_speed\') | translate"></div></div><div class="new"><div class="product-contents-main" bind-html-compile="product.getText(\'speed\', promotion) | translate"></div></div></div><div ng-if="hasTVSubscription" class="product-contents-box"><div class="label" translate="TVForHFC"></div><div class="current"><div class="product-contents-main" bind-html-compile="(\'product_\' + currentProduct.url + \'_tv\') | translate"></div></div><div class="new"><div class="product-contents-main" bind-html-compile="product.getText(\'tv\', promotion) | translate"></div></div></div><div class="product-contents-box" ng-if="!hasHFCSubscription"><div class="label" translate="ModemForHFC"></div><div class="current"><div class="product-contents-main" bind-html-compile="(\'product_\' + currentProduct.url + \'_modem\') | translate"></div></div><div class="new"><div class="product-contents-main" bind-html-compile="product.getText(\'modem\', promotion) | translate"></div></div></div></div><div ng-if="!subscription.isHFC && !simpleMode"><h4 translate="productCompareInternetTitle"></h4><div class="product-contents-box"><div class="label" translate="compareProductData2"></div><div class="current"><div class="product-contents-main" bind-html-compile="(\'product_\' + currentProduct.url + \'_data2\') | translate"></div></div><div class="new"><div class="product-contents-main" bind-html-compile="product.getText(\'data2\', promotion) | translate"></div></div></div><div class="product-contents-box"><div class="label" translate="compareProductRoamingData2"></div><div class="current"><div class="product-contents-main" bind-html-compile="(\'product_\' + currentProduct.url + \'_roamingdata2\') | translate"></div></div><div class="new"><div class="product-contents-main" bind-html-compile="product.getText(\'roamingdata2\', promotion) | translate"></div></div></div><h4 translate="productCompareCallingTitle"></h4><div class="product-contents-box"><div class="label" translate="compareProductCallingCh2"></div><div class="current"><div class="product-contents-main" bind-html-compile="(\'product_\' + currentProduct.url + \'_chcalling2\') | translate"></div></div><div class="new"><div class="product-contents-main" bind-html-compile="product.getText(\'chcalling2\', promotion) | translate"></div></div></div><div class="product-contents-box"><div class="label" translate="compareProductCallingEu2"></div><div class="current"><div class="product-contents-main" bind-html-compile="(\'product_\' + currentProduct.url + \'_eucalling2\') | translate"></div></div><div class="new"><div class="product-contents-main" bind-html-compile="product.getText(\'eucalling2\', promotion) | translate"></div></div></div><div class="product-contents-box"><div class="label" translate="compareProductRoamingCalling2"></div><div class="current"><div class="product-contents-main" bind-html-compile="(\'product_\' + currentProduct.url + \'_roamingcalling2\') | translate"></div></div><div class="new"><div class="product-contents-main" bind-html-compile="product.getText(\'roamingcalling2\', promotion) | translate"></div></div></div><h4 translate="productCompareSmsTitle"></h4><div class="product-contents-box"><div class="label" translate="compareProductCallingSms2"></div><div class="current"><div class="product-contents-main" bind-html-compile="(\'product_\' + currentProduct.url + \'_sms2\') | translate"></div></div><div class="new"><div class="product-contents-main" bind-html-compile="product.getText(\'sms2\', promotion) | translate"></div></div></div><div class="product-contents-box"><div class="label" translate="compareProductEuSms2"></div><div class="current"><div class="product-contents-main" bind-html-compile="(\'product_\' + currentProduct.url + \'_eusms2\') | translate"></div></div><div class="new"><div class="product-contents-main" bind-html-compile="product.getText(\'eusms2\', promotion) | translate"></div></div></div><div class="product-contents-box"><div class="label" translate="compareProductRoamingSms2"></div><div class="current"><div class="product-contents-main" bind-html-compile="(\'product_\' + currentProduct.url + \'_roamingsms2\') | translate"></div></div><div class="new"><div class="product-contents-main" bind-html-compile="product.getText(\'roamingsms2\', promotion) | translate"></div></div></div></div></div><div class="comparison-cta" ng-if="!rs.isMobile || state.agentLoggedIn"><a href ng-click="customClick(config, promotion)" ng-if="productdata.getCTAType() == \'checkout\' || alwaysShowCheckout"><button class="button rounded-cta red bottomless headless" ng-class="{outline: !productdata.waiveFee}"><span translate="{{checkoutButtonText}}"></span> <span ng-if="state.isTelesales" class="legal">({{productdata.rateplanChangePoints}} points)</span></button></a><div class="center" ng-if="!state.agentLoggedIn"><a c-route="{{(state.agentLoggedIn ? \'/pos/product/\' : \'/product/\') + product.url + extension + \'&checkoutLink=\' + customLink + \'&skip=true\'}}" class="no-link fact-sheet-link"><i icon="fontawesome/info-circle" class="icon-inline"></i> <span translate="factsheetLink"></span></a></div><div ng-if="state.agentLoggedIn"><br></div></div>');
$templateCache.put('/scripts/directives/product-item/dirc_product-item.html','<a c-route="{{getLink()}}" class="product-link {{promotion.code}}" ng-class="{promotion : promotion}" dont-link="{{productdata.getCTAType() != \'checkout\' && !alwaysShowCheckout}}"><div class="product-container"><div class="product-content"><div class="promotion-badge" ng-if="promotion"><span>{{promotion.title}}</span></div><div class="tagline-container"><span class="tagline" translate="{{productdata.getText(\'tagline\', promotion)}}"></span></div><h3 translate="{{productdata.getText(\'title\', promotion)}}" class="product-title"></h3><div translate="{{productdata.getText(\'shortdescription\', promotion)}}" class="product-description" translate-compile></div></div><div class="product-pricing" ng-if="productdata.recurringCost"><div ng-if="promotion.recurringDiscount && !promotion.dontCrossOutPrice"><span class="crossed-out">{{config.recurringCost | customCurrency}} / <span translate="duration_{{config.recurringFrequency}}"></span></span><h2>{{config.recurringCost - promotion.recurringDiscount | customCurrency}} / <span translate="duration_{{config.recurringFrequency}}"></span></h2></div><div ng-if="!promotion.recurringDiscount || promotion.dontCrossOutPrice"><span class="filler"></span><h2 id="product-price-{{::productdata.url}}">{{config.recurringCost | customCurrency }} / <span translate="duration_{{config.recurringFrequency}}"></span></h2></div></div></div></a><a c-route="{{getLink()}}" class="button product-cta" ng-if="productdata.getCTAType() == \'checkout\' || alwaysShowCheckout" ng-class="{promotion : promotion}"><span translate="{{checkoutButtonText}}"></span> </a><a c-route="{{(state.agentLoggedIn ? \'/pos/product/\' : \'/product/\') + productdata.url + extension}}" class="product-info-link"><span translate="factsheetLink"></span></a>');
$templateCache.put('/scripts/directives/product-item-horizontal/dirc_product-item-horizontal.html','<div class="product-item-horizontal" ng-class="{promotion: promotion && !existingSubscription, subdued: subdued}"><div class="promotion-badge" ng-class="::{small : promotion.title.length > 20}" ng-if="promotion && promotion.title && !existingSubscription"><span>{{promotion.title}}</span></div><div class="product-title"><img class="product-icon" ng-src="/assets/images/products/{{productdata.url}}_icon.jpg"><strong translate="{{productdata.getText(\'title\', promotion)}}"></strong></div><a c-route="{{ getLink()}}" class="product-item-link-horizontal" ng-class="{extend: productdata.getCTAType() !== \'checkout\' }" dont-link="{{productdata.getCTAType() !== \'checkout\' }}"><div class="product-description" translate="{{productdata.getText(\'shortdescription\', promotion)}}" translate-compile></div><div class="product-pricing" ng-if="productdata.recurringCost"><span class="text-red" translate="activationOffered" ng-show="rs.activationFeesOffered[config.url] && (productdata.getCTAType() == \'checkout\' ) && productdata.type == \'postpaid\' && !state.agentLoggedIn && !productdata.isFiber"></span> <span class="text-red" translate="activationOfferedFiber" ng-show="rs.activationFeesOffered[config.url] && (productdata.getCTAType() == \'checkout\' ) && productdata.type == \'postpaid\' && !state.agentLoggedIn && productdata.isFiber"></span> <span class="product-price" ng-if="!existingPromotion">{{config.recurringCost - (promotion.dontCrossOutPrice ? 0 : promotion.recurringDiscount) | customCurrency : true}} </span><span class="product-price" ng-if="existingPromotion">{{config.recurringCost - existingPromotion.amount | customCurrency : true}}</span><div class="product-suffix"><span class="price-statt crossed-out" ng-if="existingPromotion || (promotion.recurringDiscount && !promotion.dontCrossOutPrice)"><span translate="statt"></span> {{config.recurringCost | customCurrency : true}} </span>&nbsp; <span class="price-duration" translate="tariffPerMonth"></span></div></div><div class="product-pricing" ng-if="!productdata.recurringCost"><span class="product-suffix" translate="paygPriceInfo"></span></div></a><div ng-if="!hideCta" class="bottom-part"><a class="block-link" c-route="{{getLink()}}" ng-if="productdata.getCTAType() == \'checkout\'"><button class="big-cta" translate="checkoutButton"></button></a><div class="product-fact-sheet-link"><a c-route="{{(state.agentLoggedIn ? \'/pos/product/\' : \'/product/\') + productdata.url + extension}}"><i icon="fontawesome/info-circle" class="icon-inline"></i><span translate="factsheetLink"></span></a></div></div></div>');
$templateCache.put('/scripts/directives/products/dirc_products.html','<div class="row" ng-class="{centered : cancenter && outputData.length < 4}"><div class="product-item" ng-class="{\'fat-product\': cancenter && outputData.length == 3}" ng-repeat="product in products | productFilter : type : channel : [productType] : invertChannelFilter : extension : invertMultiProducts : ignoreMultiProducts : ignoreHiddenFromSheets | hideProducts : hideHomeProducts | orderBy : manualOrder ? $index : productSortBy | limitTo : (limitTo || Infinity) as outputData track by product.url"><product-item ng-class="{\'fat-product\': outputData.length < 4, \'promotion\': product.productItemSelectedPromotion, disabled: disabledProducts[product.url]}" ng-if="!hideProduct(product) && product" productdata="::product" link-extension="linkExtension" is-extension="::extension" is-prepaid-rateplan-change="::prepaidRateplanChange" custom-link="::customLink" always-show-checkout="::alwaysShowCheckout" hide-details-button="::hideDetailsButtons" checkout-button-text="::checkoutButtonText" subdued="invertMultiProducts" from="from" id="product-item-{{::product.url}}"></product-item></div></div><div ng-show="!outputData.length && !loadingProducts"><div><div translate="currentlyNoProducts"></div></div></div>');
$templateCache.put('/scripts/directives/products-auto/dirc_products-auto.html','<div class="account-product-sub-container" ng-if="!loading"><products cms-products="products" auto-height=".row" id="products" cancenter="true" mobile-sideways-scroll inner-el=".product-item" invert-channel-filter="false" type="\'postpaid\'" link-extension="linkExtension" product-type="{{productType}}" custom-link="customLink"></products><div ng-if="CustomizableButton.link.link_type !== \'Any\'" class="center"><p style="margin-bottom:1px">{{CustomizableButton.description[0].text}}</p><a href="{{prismicInputRedirection}}" class="button outline">{{ CustomizableButton.title[0].text}} <i ng-if="CustomizableButton.icon !== null" icon="{{CustomizableButton.icon}}" class="icon-inline"></i></a></div></div><loading-button loading="true" ng-if="loading"></loading-button>');
$templateCache.put('/scripts/directives/qr-code-display/dirc_qr-code-display.html','<h2 translate="checkoutExternalCaptureDescription"></h2><div class="idv-link-display"><h2 class="center">{{externalCaptureUrl}}</h2></div><div class="idv-qr-container"><div><img ng-src="{{image}}" class="qr-code-image"></div><div><img ng-src="{{exampleImageUrl}}" alt="" class="qr-code-example"></div></div>');
$templateCache.put('/scripts/directives/qr-scanner/dirc_qr-scanner.html','<div class="picture-interface"><div ng-show="!loading"><video ng-class="{vertical: orientation === \'vertical\'}" id="video" webkit-playsinline autoplay playsinline muted crossorigin="anonymous"></video><canvas id="canvas"></canvas><div class="instructions"><h2 translate="scanQRCodeText"></h2><div class="bg"><div class="inner-bg"><div class="laser-line"></div></div></div></div><div class="camera-buttons top-right"><button class="red" ng-if="cancel && !loading" ng-click="cancel()"><i icon="fontawesome/times" class="size-1 center-vertically fill-white"></i></button></div></div><div ng-show="loading" class="loading-indicator"><div class="indicator"><span></span> <span></span> <span></span></div></div></div>');
$templateCache.put('/scripts/directives/recurring-topups/dirc_recurring-topups.html','<div ng-if="!Topup.gettingCreditCards"><div ng-repeat="(key, topup) in subscription.scheduledTopups | recurringTopups : creditCardId as ccScheduledTopups track by $index" class="recurring-topup"><div class="recurring-topup-content"><div class="recurring-topup-amount"><i icon="refresh"></i> <span>{{topup.topupAmount | customCurrency}}</span></div><div class="recurring-topup-description"><span bind-html-compile="\'recurringTopupMonthlyDescription\' | translate | replaceText : \'XX\' : topup.day" ng-if="topup.day != 1"></span> <span bind-html-compile="\'recurringTopupMonthlyFirstDescription\' | translate" ng-if="topup.day == 1"></span></div><div class="recurring-topup-cc"><img ng-src="/assets/images/credit-cards/{{topup.type}}.jpg" class="credit-card-icon" ng-if="topup.type" alt=""> <span>{{topup.maskedCCdNumber | creditCard}}</span></div></div><button type="button" ng-if="!creditCardId" ng-click="removeScheduledTopup(key, \'scheduled\')" class="recurring-topup-delete"><i icon="fontawesome/times" class="size-1 fill-silver"></i></button></div><div ng-repeat="(key, topup) in subscription.balanceTopups | recurringTopups : creditCardId as ccScheduledTopups track by $index" class="recurring-topup"><div class="recurring-topup-content"><div class="recurring-topup-amount"><i icon="refresh"></i> <span>{{topup.topupAmount | customCurrency}}</span></div><div class="recurring-topup-description"><span bind-html-compile="\'recurringTopupBalanceDescription\' | translate | replaceText : \'XX\' : topup.lowestBalance" ng-if="topup.day != 1"></span></div><div class="recurring-topup-cc"><img ng-src="/assets/images/credit-cards/{{topup.type}}.jpg" class="credit-card-icon" ng-if="topup.type" alt=""> <span>{{topup.maskedCCdNumber | creditCard}}</span></div></div><button type="button" ng-if="!creditCardId" ng-click="removeScheduledTopup(key, \'scheduled\')" class="recurring-topup-delete"><i icon="fontawesome/times" class="size-1 fill-silver"></i></button></div></div><loading-button loading="true" ng-if="Topup.gettingCreditCards"></loading-button>');
$templateCache.put('/scripts/directives/roaming-info/dirc_roaming-info.html','<div class="table-container"><table class="roaming-info" ng-show="rateplan.rates.roaming.group1.group0"><tr><th></th><th ng-if="hasCountry(rateplan.roamingGroups.group1, country)"><span translate="zone1"></span><tooltip><span ng-repeat="country in rateplan.roamingGroups.group1 | countrySort track by $index">{{countries[country.id][lang]}}<span ng-if="$index < rateplan.roamingGroups.group1.length - 1">,&thinsp;</span></span></tooltip></th><th ng-if="hasCountry(rateplan.roamingGroups.group2, country)"><span translate="zone2"></span><tooltip><span ng-repeat="country in rateplan.roamingGroups.group2 | countrySort track by $index">{{countries[country.id][lang]}}<span ng-if="$index < rateplan.roamingGroups.group2.length - 1">,&thinsp;</span></span></tooltip></th><th ng-if="hasCountry(rateplan.roamingGroups.group3, country)"><span translate="zone3"></span><tooltip><span ng-repeat="country in rateplan.roamingGroups.group3 | countrySort track by $index">{{countries[country.id][lang]}}<span ng-if="$index < rateplan.roamingGroups.group3.length - 1">,&nbsp;&thinsp;</span></span></tooltip></th></tr><tr><td translate="incomingCalls"></td><td ng-if="hasCountry(rateplan.roamingGroups.group1, country)">{{rateplan.rates.roaming.group1.incoming | customCurrency}}/ <span ng-show="rateplan.rates.roaming.group1.incomingChargeUnits > 1">{{rateplan.rates.roaming.group1.incomingChargeUnits}} </span><span translate="unitcalls"></span></td><td ng-if="hasCountry(rateplan.roamingGroups.group2, country)">{{rateplan.rates.roaming.group2.incoming | customCurrency}}/ <span ng-show="rateplan.rates.roaming.group2.incomingChargeUnits > 1">{{rateplan.rates.roaming.group2.incomingChargeUnits}} </span><span translate="unitcalls"></span></td><td ng-if="hasCountry(rateplan.roamingGroups.group3, country)">{{rateplan.rates.roaming.group3.incoming | customCurrency}}/ <span ng-show="rateplan.rates.roaming.group3.incomingChargeUnits > 1">{{rateplan.rates.roaming.group3.incomingChargeUnits}} </span><span translate="unitcalls"></span></td></tr><tr><td><span translate="outgoingCalls"></span><br><span translate="localSwitzerlandAndEU"></span></td><td ng-if="hasCountry(rateplan.roamingGroups.group1, country)">{{rateplan.rates.roaming.group1.inCountry | customCurrency}}/ <span ng-show="rateplan.rates.roaming.group1.callingChargeUnits > 1">{{rateplan.rates.roaming.group1.callingChargeUnits}} </span><span translate="unitcalls"></span></td><td ng-if="hasCountry(rateplan.roamingGroups.group2, country)">{{rateplan.rates.roaming.group2.inCountry | customCurrency}}/ <span ng-show="rateplan.rates.roaming.group2.callingChargeUnits > 1">{{rateplan.rates.roaming.group2.callingChargeUnits}} </span><span translate="unitcalls"></span></td><td ng-if="hasCountry(rateplan.roamingGroups.group3, country)">{{rateplan.rates.roaming.group3.inCountry | customCurrency}}/ <span ng-show="rateplan.rates.roaming.group3.callingChargeUnits > 1">{{rateplan.rates.roamin3.group3.callingChargeUnits}} </span><span translate="unitcalls"></span></td></tr><tr><td><span translate="incomingSMS"></span></td><td translate="free" ng-if="hasCountry(rateplan.roamingGroups.group1, country)"></td><td translate="free" ng-if="hasCountry(rateplan.roamingGroups.group2, country)"></td><td translate="free" ng-if="hasCountry(rateplan.roamingGroups.group3, country)"></td></tr><tr><td><span translate="outgoingSMS"></span> <span translate="toAllCountries"></span><br></td><td ng-if="hasCountry(rateplan.roamingGroups.group1, country)">{{rateplan.rates.roaming.group1.sms | customCurrency}}/ <span ng-show="rateplan.rates.roaming.group1.smsChargeUnits > 1">{{rateplan.rates.roaming.group1.smsChargeUnits}} </span><span translate="unitsms"></span></td><td ng-if="hasCountry(rateplan.roamingGroups.group2, country)">{{rateplan.rates.roaming.group2.sms | customCurrency}}/ <span ng-show="rateplan.rates.roaming.group2.smsChargeUnits > 1">{{rateplan.rates.roaming.group2.smsChargeUnits}} </span><span translate="unitsms"></span></td><td ng-if="hasCountry(rateplan.roamingGroups.group3, country)">{{rateplan.rates.roaming.group3.sms | customCurrency}}/ <span ng-show="rateplan.rates.roaming.group3.smsChargeUnits > 1">{{rateplan.rates.roamin3.group3.smsChargeUnits}} </span><span translate="unitsms"></span></td></tr><tr><td><span translate="inOutMMS"></span> <span translate="toAllCountries"></span><br></td><td ng-if="hasCountry(rateplan.roamingGroups.group1, country)">{{rateplan.rates.roaming.group1.mms | customCurrency}}/ <span translate="unitmms"></span></td><td ng-if="hasCountry(rateplan.roamingGroups.group2, country)">{{rateplan.rates.roaming.group2.mms | customCurrency}}/ <span translate="unitmms"></span></td><td ng-if="hasCountry(rateplan.roamingGroups.group3, country)">{{rateplan.rates.roaming.group3.mms | customCurrency}}/ <span translate="unitmms"></span></td></tr><tr><td translate="dataConnections"></td><td ng-if="hasCountry(rateplan.roamingGroups.group1, country)">{{rateplan.rates.roaming.group1.gprs | customCurrency}}/ <span ng-show="rateplan.rates.roaming.group1.gprsChargeUnits && rateplan.rates.roaming.group1.gprsChargeUnits > 1">{{rateplan.rates.roaming.group1.gprsChargeUnits}} </span><span translate="unitgprs"></span></td><td ng-if="hasCountry(rateplan.roamingGroups.group2, country)">{{rateplan.rates.roaming.group2.gprs | customCurrency}}/ <span ng-show="rateplan.rates.roaming.group1.gprsChargeUnits && rateplan.rates.roaming.group2.gprsChargeUnits > 1">{{rateplan.rates.roaming.group2.gprsChargeUnits}} </span><span translate="unitgprs"></span></td><td ng-if="hasCountry(rateplan.roamingGroups.group3, country)">{{rateplan.rates.roaming.group3.gprs | customCurrency}}/ <span ng-show="rateplan.rates.roaming.group3.gprsChargeUnits && rateplan.rates.roaming.group3.gprsChargeUnits > 1">{{rateplan.rates.roaming.group3.gprsChargeUnits}} </span><span translate="unitgprs"></span></td></tr></table></div><p class="warning-message" ng-hide="rateplan.rates.roaming.group1.group0" translate="noRoamingInfo"></p><br>');
$templateCache.put('/scripts/directives/route-loading-indicator/dirc_route-loading-indicator.html','<div class="loading-indicator"><div><span></span> <span></span> <span></span></div></div>');
$templateCache.put('/scripts/directives/scroll/dirc_scroll.html','<div class="scroll-container" id="{{id}}" ng-click="scroll()"><div class="scroll"></div></div>');
$templateCache.put('/scripts/directives/sign-pad/dirc_sign-pad.html','<div class="sign-pad-bg" ng-if="!inline"></div><div class="sign-pad-container" id="sign-pad-container" ng-class="{inline: inline, invalid : !showConfirm(), \'ng-invalid\': !showConfirm()}"><line-drawing canvas-width="800" canvas-height="450" ng-if="!showConfirm()" image-url="mobile ? \'assets/images/icons/tap.svg\' : \'/assets/images/icons/cursor.svg\'"></line-drawing><canvas id="sign-pad-canvas" class="sign-pad" width="800" height="450"></canvas><div class="sign-pad-message"><span translate="signHereEshopText" ng-if="!state.agentLoggedIn"></span> <span translate="signHerePosText" ng-if="state.agentLoggedIn"></span></div><button ng-if="onCancel() && !inline && !(onConfirm() && !hideConfirmButton && showConfirm())" class="red cancel-button" ng-click="onCancel()()" type="button"><i icon="fontawesome/times" class="icon-inline"></i></button> <button ng-click="clear();" ng-if="showConfirm() && !hideClear" class="clear-button outline" type="button"><i icon="fontawesome/eraser" class="icon-inline"></i></button> <button id="832734" ng-if="onConfirm() && !hideConfirmButton && showConfirm()" class="petrol confirm-button" ng-click="confirm()" type="{{isSubmit ? \'submit\' : \'button\'}}"><i icon="fontawesome/check" class="icon-inline fill-white"></i> <span translate="{{confirmText || \'signPadConfirmButton\'}}" class="hide-on-mobile inline"></span></button></div>');
$templateCache.put('/scripts/directives/sim-info/dirc_sim-info.html','<div class="sim-list-item" ng-show="subscription.simcardInfo"><div ng-show="subscription.settings"><div class="sim-properties"><div class="sim-property-field"><img width="65" class="sim-img" src="/assets/images/icons/sim-card.svg"></div><div class="sim-column"><div class="sim-row"><div class="sim-property-field"><div class="property-item-key"><b>PIN:</b></div><div class="property-item-value" ng-class="{\'no-data\': !subscription.simcardInfo.pin1}"><span ng-show="subscription.simcardInfo.pin1">{{hide ? \'\u2022\u2022\u2022\u2022\' : subscription.simcardInfo.pin1}}</span> <span ng-show="!subscription.simcardInfo.pin1" translate="siminfoNotAvailable"></span></div></div><div class="sim-property-field"><div class="property-item-key"><b>PUK:</b></div><div class="property-item-value" ng-class="{\'no-data\': !subscription.simcardInfo.puk1}"><span ng-show="subscription.simcardInfo.puk1">{{hide ? \'\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\' : subscription.simcardInfo.puk1}}</span> <span ng-show="!subscription.simcardInfo.puk1" translate="siminfoNotAvailable"></span></div></div></div><div class="sim-row" ng-if="subscription.simcardInfo.pin1 || subscription.simcardInfo.puk1"><span class="pointer text-primary" translate="{{hide ? \'showCode\' : \'hideCode\'}}" ng-if="obfuscate" ng-click="toggleHide()"></span></div></div></div><div class="warning-message" ng-show="subscription.simcardInfo.statusId == 0"><i icon="fontawesome/info-circle" class="icon-inline"></i> <span translate="simInfoWillShowWhenShipped"></span></div></div></div>');
$templateCache.put('/scripts/directives/site-simple-header/dirc_site-simple-header.html','<section class="site-header"><div class="content"><div class="header-content"><div class="logo"><img alt="Lebara logo" ng-src="/assets/images/lebara-logo-white.png"></div></div></div></section>');
$templateCache.put('/scripts/directives/small-product-card/dirc_small-product-card.html','<div class="small-product-card no-link"><div class="product-content"><div><p translate="{{prodInfo.product.getText(\'title\', prodInfo.promotion)}}" translate-compile></p></div><p translate="{{state.agentLoggedIn ? \'callUsCheckOutPos\' : \'callUsCheckOut\'}}"></p><a c-route="/product/{{::prodInfo.product.url}}" class="button bottomless float-right headless" ng-if="addLink" translate="detailsButton"></a></div></div>');
$templateCache.put('/scripts/directives/speed-on-info/dirc_speed-on-info.html','<div class="speed-on-info-box"><h2 translate="speedOnInfoTitle"></h2><p translate="speedOnInfoMessage"></p><button type="button" ng-click="speedOnInfoPopup.show()" class="white outline" translate="speedOnInfoButton"></button><clearfix></clearfix></div>');
$templateCache.put('/scripts/directives/stick-to-bottom/dirc_stick-to-bottom.html','<div ng-if="notSticking" ng-transclude></div><div ng-if="!notSticking"><div class="checkout-page-footer stick-to-bottom"><div class="checkout-page-footer-content" ng-transclude></div></div></div>');
$templateCache.put('/scripts/directives/sticky-box/dirc_sticky-box.html','<div class="sticky-box" ng-transclude></div>');
$templateCache.put('/scripts/directives/subscription/dirc_subscription.html','<div class="subscription-container" ng-if="!loading"><div class="subscription-content"><div ng-show="!subscription.settings" class="warning-message" translate="failedToLoadSubscription"></div><subscription-warnings ng-if="subscription" sub="subscription" on-esim-reset="init"></subscription-warnings><div ng-if="subscription.gotDetails"><button ng-if="subscription.isHFC && subscription.status === \'active\' && showRelocation && canRelocatePlan" class="petrol bottomless"><a c-route="{{\'/pos/relocation?subtype=\'+ (subscription.isHFC ? \'hfc\' : \'fiber\') + \'&subscriptionId=\' + subscription.id}}" translate="relocationButton"></a></button><div class="subscription-bundle-container subscription-owner" ng-show="subscription.user.firstName && subscription.type === \'postpaid\' && !subscription.isTV"><div><h4><span translate="user"></span></h4><p class="dark">{{::subscription.user.firstName}} {{::subscription.user.lastName}}</p></div><div ng-if="subscription.lockinEndDate"><h4><span translate="contractDurationField"></span></h4><p class="dark">{{::subscription.lockinStartDate | date : \'dd/MM/yyyy\'}} - {{::subscription.lockinEndDate | date : \'dd/MM/yyyy\'}}</p><a ng-hide="subscription.isHFC || subscription.isFiber" c-route="/{{state.agentLoggedIn ? \'pos/existing-customer\' : \'account\'}}/change-subscription/{{subscription.id}}" class="button petrol bottomless" ng-click="contractExtendSubscription()" ng-show="subscription.type == \'postpaid\' && !subscription.isLight && (!state.agentLoggedIn || agent.data.rights.POSTPAID_CONTRACT_EXTENSION) && !subscription.isFiber"><span translate="rateplanChangeButtonPos"></span> </a><a ng-hide="subscription.isHFC || subscription.isFiber" c-route="/{{state.agentLoggedIn ? \'pos/existing-customer\' : \'account\'}}/change-subscription/{{subscription.id}}?keep=true" class="button petrol bottomless" ng-click="contractExtendSubscription()" ng-show="subscription.type == \'postpaid\' && (!state.agentLoggedIn || agent.data.rights.POSTPAID_CONTRACT_EXTENSION) && subscription.getProduct().allowedInCurrentChannel() && !subscription.isFiber"><span translate="contractChangeButtonPos"></span></a></div><div ng-if="subscription.isHFC || (subscription.isFiber && fiberChangePlan)"><a ng-click="!loading && openHFCrateplanChange(subscription)" class="button petrol bottomless" ng-click="contractExtendSubscription()" ng-class="{disabled: subscription.status ===\'pendingActivation\' || (subscription.rateplan.products[subscription.rateplan.url].bestConfig.recurringCost === subscription.getCurrentDiscount()) || !subscription.canExtend()}" ng-if="ShowChangePlanForHFC && canChangePlanHfc && (!state.agentLoggedIn || agent.data.rights.POSTPAID_CONTRACT_EXTENSION)"><span translate="rateplanChangeButtonPosHfc" ng-if="!loading"></span><loading-button loading="true" ng-if="loading"></loading-button></a></div><div ng-if="!subscription.isHFC && !subscription.lockinEndDate && subscription.type == \'postpaid\' && !subscription.isFiber"><a c-route="/{{state.agentLoggedIn ? \'pos/existing-customer\' : \'account\'}}/change-subscription/{{subscription.id}}" class="button petrol bottomless" ng-click="contractExtendSubscription()" ng-show="subscription.type == \'postpaid\' && (!state.agentLoggedIn || agent.data.rights.POSTPAID_CONTRACT_EXTENSION) && !subscription.isLight"><span translate="rateplanChangeButtonPos"></span> </a><a c-route="/{{state.agentLoggedIn ? \'pos/existing-customer\' : \'account\'}}/change-subscription/{{subscription.id}}?keep=true" class="button petrol bottomless" ng-click="contractExtendSubscription()" ng-show="subscription.type == \'postpaid\' && (!state.agentLoggedIn || agent.data.rights.POSTPAID_CONTRACT_EXTENSION) && subscription.getProduct().allowedInCurrentChannel()"><span translate="contractChangeButtonPos"></span></a></div></div><div ng-if="subscription.isFiber && !subscription.fiberActive"><fiber-status data="subscription"></fiber-status><br><br></div><div class="on-hold-box" ng-show="account.onHold.startDate && subscription.type == \'postpaid\'"><span ng-show="account.onHold.active">{{\'onHoldActiveMessage\' | translate | replaceText : \'STARTDATE\' : (account.onHold.startDate | date : \'dd.MM.yyyy\') | replaceText : \'ENDDATE\' : (account.onHold.endDate | date : \'dd.MM.yyyy\')}}</span> <span ng-show="!account.onHold.active">{{\'onHoldWillBeActiveMessage\' | translate | replaceText : \'STARTDATE\' : (account.onHold.startDate | date : \'dd.MM.yyyy\') | replaceText : \'ENDDATE\' : (account.onHold.endDate | date : \'dd.MM.yyyy\')}}</span><br><button type="button" ng-click="unblockOnHoldPopup.show()" class="bottomless" translate="unblockOnHoldButton"></button></div><div class="subscription-bundle-container active" ng-show="(!state.agentLoggedIn || agent.data.rights.OPTIONS_MGMT) && (!subscription.isLight || subscription.type === \'prepaid\') && !subscription.isFiber"><div><h4 class="align-to-button"><span translate="activeOptionsTitle"></span></h4><active-options data="subscription" class="subscription-option-row" ng-if="subscription.type == \'postpaid\'"></active-options><active-options-prepaid data="subscription" class="subscription-option-row" ng-if="subscription.type == \'prepaid\'"></active-options-prepaid><div ng-show="!(subscription.activeOptions | objSize) && !(subscription.oneTimeOptions | objSize)"><span class="dark" translate="noActiveOptionsMessage"></span></div><speed-on-info ng-if="subscription.getSubOption()" data="subscription.getSubOption()" sub-data="subscription"></speed-on-info><div class="add-options-button"><button ng-click="options.showOptionActivation = true" translate="addOptionsButton" class="button"></button></div></div></div><option-activation data="subscription" ng-if="options.showOptionActivation" on-close="closeOptionActivation"></option-activation><div class="prepaid-balance-info" ng-show="subscription.type == \'prepaid\' && subscription.status !== \'pendingActivation\' && !subscription.fastActivation"><div><span translate="yourBalance"></span><br><span class="prepaid-balance">{{subscription.billingGroup.balance | customCurrency}}</span> <a c-route="{{state.agentLoggedIn ? \'/pos/existing-customer\' : \'/account\'}}/topup?subscriptionId={{::subscription.id}}" class="button" translate="topupButton" ng-click="topupAnalytics()"></a></div></div><div ng-if="showPosRcl"><subscription-settings data="subscription" only-roaming="false"></subscription-settings></div><div class="subscription-bundle-container" ng-show="subscription.hasActiveDeviceOption()"><h4><span translate="subDeviceOptionTitle"></span></h4><subscription-device-info device-data="subscription.devices" subscription-data="subscription"></subscription-device-info></div><div class="subscription-bundle-container subscription-bundle-row"><div class="order-details-box" ng-show="!state.agentLoggedIn"><a c-route="/account/settings/?id={{::subscription.id}}" ng-click="buttonsAnalytics(\'settings\')" class="confirmation-action-button"><span translate="subSettingsButton"></span></a></div><div class="order-details-box" ng-show="subscription.type == \'prepaid\' && (!state.agentLoggedIn || agent.data.rights.PRE_TO_POSTPAID_CONVERSION) && !subscription.isLight"><a c-route="/{{::state.agentLoggedIn ? \'pos/existing-customer\' : \'account\'}}/pre-to-post/{{::subscription.id}}" class="confirmation-action-button pre-to-post" ng-click="!state.agentLoggedIn && buttonsAnalytics(\'preToPost\')"><span translate="preToPostButton"></span></a></div><div class="order-details-box" ng-show="!state.agentLoggedIn && account.hasMobileSubs"><a c-route="/account/history/{{subscription.id}}" class="confirmation-action-button" ng-click="buttonsAnalytics(\'history\')"><span translate="subHistoryButton"></span></a></div><div class="order-details-box" ng-show="subscription.type == \'prepaid\' && !state.agentLoggedIn"><a c-route="/account/topup-history?subscriptionId={{::subscription.id}}" ng-click="buttonsAnalytics(\'topup\')" class="confirmation-action-button"><span translate="topupHistoryButton"></span></a></div><div class="order-details-box" ng-show="subscription.type == \'prepaid\' && (!state.agentLoggedIn || agent.data.rights.PREPAID_RATEPLAN_CHANGE)"><a c-route="/{{::state.agentLoggedIn ? \'pos/existing-customer\' : \'account\'}}/change-rateplan/{{::subscription.id}}" class="confirmation-action-button" ng-click="buttonsAnalytics(\'changeRateplan\')"><span translate="changePrepaidRateplanButton"></span></a></div><div class="order-details-box"><a c-route="{{::state.agentLoggedIn ? \'/pos/\' : \'/\'}}product/{{subscription.rateplan.firstProduct().url}}" class="confirmation-action-button" ng-click="buttonsAnalytics(\'productInfo\')"><span translate="productInfoButton"></span></a></div></div></div></div></div><loading-button loading="true" ng-if="loading"></loading-button>');
$templateCache.put('/scripts/directives/subscription-bundles/dirc_subscription-bundles.html','<div class="bundle-box" ng-repeat="bundle in subscription.includedBundles | bundleFilter | filter : bundleFilter | onlyCountry : onlyCountry : subscription.id | objToArray | orderBy: \'priority\' track by $index"><div class="subscription-bundle-box"><div class="subscription-bundle-name"><bundle data="bundle" sub="subscription"></bundle><div class="subscription-bundle-dates" ng-if="bundle.optionrRenewalDate || bundle.optionrExpiryDate"><span ng-show="bundle.willRenew && (bundle.status == \'WAITING\' || bundle.status == \'INSTALLING\')"><span translate="activatesPre"></span> {{bundle.optionrRenewalDate | date : \'dd.MM.yyyy\'}}</span> <span ng-show="bundle.willRenew && bundle.status != \'WAITING\' && bundle.status != \'INSTALLING\'"><span translate="renewsPre"></span> {{bundle.optionrRenewalDate | date : \'dd.MM.yyyy\'}}</span> <span ng-show="!bundle.willRenew"><span translate="expiresPre"></span> {{bundle.optionrExpiryDate | date : \'dd.MM.yyyy\'}}</span></div></div></div></div>');
$templateCache.put('/scripts/directives/subscription-circle-group/dirc_subscription-circle-group.html','<div class="circles" ng-if="rs.isMobile && !hideCircles"><div class="circle-primary" ng-click="d.data.option && showOptionPopup(d.data.option)" ng-class="{animate: d.animate}"><circle-graph percent="d.data.percent" ng-class="{dashed: d.data.isOption}" color-data="d.data" animate-circle="true"><div class="circle-content"><subscription-circle-primary circle="d.active" data="d.data" is-empty="d.isEmpty" ng-if="d.data && d.active"></subscription-circle-primary></div></circle-graph><div class="circle-desc" ng-if="d.active.key" translate="circleDisc_{{d.active.key}}"></div></div><div class="side-circles" ng-class="{empty: !(circles | objSize : 2)}"><div ng-repeat="(key, circle) in circles track by key" ng-if="d.active !== circle || !rs.isMobile" ng-class="{animate: d.animate === circle}"><circle-graph percent="circle.currentBundle.percent" color-data="circle.currentBundle" ng-click="switchActiveCircle(circles[key])" small-circle="!rs.isDesktop"><div class="circle-icon {{circle.currentBundle.color}}"><i icon="circle-icon_{{key | urlify}}"></i></div></circle-graph><div class="circle-desc" ng-if="key" translate="circleDisc_{{key}}"></div></div></div></div><div class="desktop-circles" ng-class="{\'two\': !(circles | objSize : 3)}" ng-if="!rs.isMobile && !hideCircles"><div ng-repeat="(key, circle) in circles track by key" ng-class="{hoverable: circle.optionCats && !circle.currentBundle.isOption && (!circle.currentBundle.isUnlimited || circle.currentBundle.isThrottled) && !disableCircleClick}"><circle-graph percent="circle.currentBundle.percent" animate-circle="true" color-data="circle.currentBundle" ng-click="!disableCircleClick && clickCircle(circle)"><subscription-circle-primary circle="circle" data="circle.currentBundle" is-empty="d.isEmpty" ng-if="!rs.isMobile && d.data" key="\'circleDisc_\' + key"></subscription-circle-primary><div class="circle-hover" ng-if="circle.optionCats && !circle.currentBundle.isOption && (!circle.currentBundle.isUnlimited || circle.currentBundle.isThrottled) && !disableCircleClick"><div><i icon="circle-icon_{{key | urlify}}"></i> <strong translate="cat{{circle.optionCats[0]}}"></strong></div></div></circle-graph><div ng-if="showExtraInfos" class="extra-debug-info"><strong>type: {{key}}</strong><br><div ng-if="!circle.currentBundle.isOption"><div>[included bundle]</div><div>name: {{circle.currentBundle.bundle.bundleName}}</div><div>type: {{circle.currentBundle.bundle.type}}</div><div ng-if="circle.currentBundle.isUnlimited">unlimited</div><div>hardcoded unlimited : {{circle.isUnlimitedHardcoded}}</div><div ng-if="!circle.currentBundle.isUnlimited">remaining / initial: {{circle.currentBundle.remaining}} / {{circle.currentBundle.initial}}</div></div><div ng-if="circle.currentBundle.isOption"><div>[optional bundle]</div><div>name: {{circle.currentBundle.bundle.bundleName}}</div><div>option: {{circle.currentBundle.option.id}} / {{circle.currentBundle.option.name}}</div><div>type: {{circle.currentBundle.bundle.type}}</div><div>status: {{circle.currentBundle.bundle.status}}</div><div>remaining / initial: {{circle.currentBundle.remaining}} / {{circle.currentBundle.initial}}</div></div></div></div></div><div class="international-note center" ng-if="!isInternetProduct && !isRoaming && ((d.active.key === \'internationalMin\' || d.active.key === \'roamingData\' || d.active.key === \'roamingMin\') || !rs.isMobile) && !subscription.isHFC"><a c-route="/product/{{subscription.rateplan.firstProduct().url}}?productInfoMode=true#legal" translate="circleDiscInternationalNote" class="text-silver"></a></div><div class="content very-small option-circles no-padding"><div ng-repeat="(key, circle) in circles track by key"><div ng-if="showExtraInfos" class="extra-debug-info"><br><br><strong>type: {{key}}</strong></div><div ng-repeat="option in circle.secondaryOptions track by $index" class="circle-secondary-option" ng-click="showOptionPopup(option.option)" ng-if="option.option.url !== \'day_speed\' && !hideSecondary"><div class="next-option-header"><div class="next-option-icon {{getOptionIconType(option)}}"><i icon="circle-icon_{{circle.key | urlify}}"></i></div><div><strong class="circle-bundle-title" translate="{{option.name}}" translate-compile></strong><div ng-if="option.isUnlimited"><strong translate="circleUnlimited"></strong>&nbsp;<span translate="circleUnlimitedDesc{{option.bundle.type}}" class="circle-bundle-desc"></span></div><div ng-if="!option.isUnlimited"><div ng-if="option.bundle.type === \'BYTES\'">{{option.initial - option.remaining | bytes : option : true}} <span translate="circleDetailsMid"></span>&nbsp;{{option.initial | bytes : option}}&nbsp;<span translate="circleDetailsPost"></span></div><div ng-if="option.bundle.type === \'MIN\'">{{((option.initial - option.remaining) / 60) | number : 0}} <span translate="unitMin"></span> <span translate="circleDetailsMid"></span>&nbsp;{{(option.initial / 60) | number : 0}} <span translate="unitMin"></span>&nbsp;<span translate="circleDetailsPost"></span></div></div></div></div><div class="circle-secondary-usage" ng-if="!option.isUnlimited"><div class="circle-secondary-usage-inner" ng-style="{width: (100 / option.initial * option.remaining | number : 1) + \'%\'}"></div></div><p translate="optionWillBeUsedWhenNeeded" ng-if="!option.bundle.willRenew && subscription.optionConflict(option.option)" class="bottomless"></p><p bind-html-compile="\'optionWillBeUsedWhenNeededWaiting\' | translate | replaceText : \'XXXXXX\' : (subscription.optionConflict(option.option).name | translate)" ng-if="option.bundle.willRenew && subscription.optionConflict(option.option)" class="bottomless"></p><div ng-if="showExtraInfos" class="extra-debug-info bg"><div>[secondary option]</div><div>bundle name: {{option.bundle.bundleName}}</div><div>option: {{option.option.id}} / {{option.option.name}}</div><div>type: {{option.bundle.type}}</div><div>status: {{option.bundle.status}}</div><div ng-if="option.isUnlimited">unlimited</div><div ng-if="!option.isUnlimited">remaining / initial: {{option.remaining}} / {{option.initial}}</div><pre ng-if="false">bundle: {{option.bundle | json}}</pre></div></div><div ng-if="circle.currentBundle.option && !circle.currentBundle.bundle.willRenew && !hideCircles" class="circle-active-option-desc non-renewal"><span translate="circleActiveOptionDescPost{{circle.currentBundle.bundle.type}}" ng-if="d.active.rateplanBundle && !d.active.nextOptions.length"></span></div><div></div><div ng-repeat="option in circle.nextOptions track by $index" class="circle-next-option" ng-click="showOptionPopup(option.option)" ng-if="option.option.url !== \'day_speed\' && !hideCircles"><div class="next-option-header"><div class="next-option-icon {{getOptionIconType(option)}}"><i icon="circle-icon_{{circle.key | urlify}}"></i></div><strong class="circle-bundle-title" translate="{{option.name}}" translate-compile></strong></div><p translate="optionWillBeUsedWhenNeeded" ng-if="!option.bundle.willRenew && subscription.optionConflict(option.option)" class="bottomless"></p><p bind-html-compile="\'optionWillBeUsedWhenNeededWaiting\' | translate | replaceText : \'XXXXXX\' : (subscription.optionConflict(option.option).name | translate)" ng-if="option.bundle.willRenew && subscription.optionConflict(option.option)" class="bottomless"></p><div ng-if="!subscription.optionConflict(option.option)" class="next-option-no-conflict"><div ng-if="option.bundle.willRenew" class="circle-active-option-desc"><span bind-html-compile="\'circleActiveOptionDesc\' | translate | replaceText : \'XX.XX.XXXX\' : (option.endDate | date : \'dd.MM.yyyy\') | replaceText : \'XXXXXX\' : option.option.name"></span></div><div ng-if="!option.bundle.willRenew" class="circle-active-option-desc non-renewal"><span bind-html-compile="\'circleActiveOptionNonRenewDesc\' | translate | replaceText : \'XX.XX.XXXX\' : (option.endDate | date : \'dd.MM.yyyy\') | replaceText : \'XXXXXX\' : option.option.name"></span></div></div><div ng-init="promo = subscription.getPromoForOption(option.option)"><div ng-if="promo && option.option.cost > 0"><br><option-price small="true" option="option.option" current-sub="subscription"></option-price></div></div><div class="circle-secondary-usage" ng-if="!option.isUnlimited && option.bundle.type === \'MIN\'"><div class="circle-secondary-usage-inner" ng-style="{width: (100 / option.initial * option.remaining | number : 1) + \'%\'}"></div></div><div ng-if="showExtraInfos" class="extra-debug-info bg"><div>[next option]</div><div>bundle name: {{option.bundle.bundleName}}</div><div>option: {{option.option.id}} / {{option.option.name}}</div><div>type: {{option.bundle.type}}</div><div>status: {{option.bundle.status}}</div><div ng-if="option.isUnlimited">unlimited</div><div ng-if="!option.isUnlimited">remaining / initial: {{option.remaining}} / {{option.initial}}</div><pre ng-if="false">bundle: {{option.bundle | json}}</pre></div></div><div ng-repeat="option in circle.nextOptions track by $index" class="dayspeed-container" ng-click="showOptionPopup(option.option)" ng-if="option.option.url === \'day_speed\' && !hideCircles"><div class="next-option-header centered"><div class="next-option-icon clock"><i icon="circle-icon_{{::circle.key | urlify}}"></i></div><p class="circle-bundle-title" translate-compile><span translate="dayspeedIsWaitingText"></span>&nbsp;<span translate="detailsButton" class="text-petrol"></span></p></div><div ng-if="showExtraInfos" class="extra-debug-info bg"><div>[next option - dayspeed]</div><div>bundle name: {{option.bundle.bundleName}}</div><div>option: {{option.option.id}} / {{option.option.name}}</div><div>type: {{option.bundle.type}}</div><div>status: {{option.bundle.status}}</div><div ng-if="option.isUnlimited">unlimited</div><div ng-if="!option.isUnlimited">remaining / initial: {{option.remaining}} / {{option.initial}}</div><pre ng-if="false">bundle: {{option.bundle | json}}</pre></div></div></div></div><div class="below-buttons" ng-if="!account.isLightCustomer && !subscription.isLight && !hideButtons"><button ng-click="optionButton()" class="petrol has-icon big not-bold bottomless" type="button" ng-if="d.active.optionCats && showOptionsButton && !d.data.isUnlimited" ng-class="{\'full-width\': rs.isMobile}"><span translate="circleOptionButton{{d.active.optionCats[0]}}"></span></button> <a ng-click="changePlanTriggeringAnalytics(\'change plan\')" c-route="/account/change-subscription/{{subscription.id}}" ng-if="!account.isLightCustomer && !subscription.isLight && !subscription.isHFC" class="button petrol has-icon big not-bold bottomless" ng-class="{\'full-width\': rs.isMobile}"><span translate="rateplanChangeButton"></span> </a><a ng-if="subscription.isHFC" ng-click="openHFCrateplanChange(subscription)" class="button petrol has-icon big not-bold bottomless" ng-class="{\'full-width\': rs.isMobile}"><span translate="rateplanChangeButton"></span></a></div><div class="center" ng-if="!hideButtons && !subscription.isFiber && !subscription.isHFC"><br><a c-route="/account/history/{{subscription.id}}" class="text-petrol" translate="subHistoryButton"></a></div><option-activation data="subscription" ng-if="d.showActivatePopup" on-close="closeActivatePopup" categories="d.cats"></option-activation>');
$templateCache.put('/scripts/directives/subscription-circle-primary/dirc_subscription-circle-primary.html','<div class="circle-icon {{data.color}}" ng-class="{\'is-option\': data.option, check, alert, isEmpty}" ng-if="circle.key"><i icon="circle-icon_{{circle.key | urlify}}"></i> <span ng-if="key" translate="{{key}}"></span></div><div ng-if="isEmpty"><strong class="circle-bundle-title big"><span>0 </span><span ng-if="circle.type === \'BYTES\'" translate="mb"></span> <span ng-if="circle.type === \'MIN\'" translate="unitMin"></span> </strong><span translate="circleNoneDesc" ng-if="!data.isLight" class="circle-bundle-desc"></span></div><div ng-if="data.option && !isEmpty && !circle.isUnlimitedHardcoded"><strong class="circle-bundle-title" translate="{{data.name}}" translate-compile></strong></div><div ng-if="!data.option && !isEmpty && !data.isUnlimited && !circle.isUnlimitedHardcoded"><strong class="circle-bundle-title big" ng-if="circle.type === \'BYTES\'">{{data.remaining | bytes : data : false : false : \'1\'}}</strong> <strong class="circle-bundle-title big" ng-if="circle.type === \'MIN\'">{{(data.remaining / 60) | number : 0}} <span translate="unitMin"></span></strong></div><div ng-if="!data.option && !isEmpty && data.isUnlimited || circle.isUnlimitedHardcoded"><strong class="circle-bundle-title big" translate="circleUnlimited"></strong> <span translate="circleUnlimitedDesc{{circle.type}}{{data.isThrottled ? \'Throttled\' : \'\'}}" class="circle-bundle-desc"></span></div><div ng-if="data.bundle.type === \'BYTES\' && !data.isUnlimited && !isEmpty && !circle.isUnlimitedHardcoded" class="circle-bundle-desc">{{(data.initial - data.remaining) | bytes : data : true : false : \'2\'}} <span translate="circleDetailsMid"></span> {{data.initial | bytes : data : false : false : \'2\'}} <span translate="circleDetailsPost"></span></div><div ng-if="data.bundle.type === \'MIN\' && !data.isUnlimited && !isEmpty && !circle.isUnlimitedHardcoded" class="circle-bundle-desc">{{((data.initial - data.remaining) / 60) | number : 0}}&nbsp;<span translate="circleDetailsMid"></span>&nbsp;{{(data.initial / 60) | number : 0}}&nbsp;<span translate="unitMin"></span>&nbsp;<span translate="circleDetailsPost"></span></div><div ng-if="data.option && data.bundle.willRenew && !circle.isUnlimitedHardcoded" class="circle-active-option-desc"><span bind-html-compile="\'circleActiveOptionDesc\' | translate | replaceText : \'XX.XX.XXXX\' : (data.endDate | date : \'dd.MM.yyyy\')"></span></div><div ng-if="data.option && !data.bundle.willRenew && !circle.isUnlimitedHardcoded" class="circle-active-option-desc non-renewal"><span bind-html-compile="\'circleActiveOptionNonRenewDesc\' | translate | replaceText : \'XX.XX.XXXX\' : (data.endDate | date : \'dd.MM.yyyy\')"></span></div>');
$templateCache.put('/scripts/directives/subscription-device-info/dirc_subscription-device-info.html','<ul class="simple-list" ng-repeat="device in devices"><div ng-if="!device.comments.includes(\'Device fee has been paid off\')"><h4 ng-if="showForTestEnvs"><i icon="fontawesome/mobile" class="icon-inline"></i><span translate="{{active.sub.isTV ? \'subDeviceOptionTitleGeneric\' : \'subDeviceOptionTitle\'}}"></span></h4><li><span translate="{{subscription.isTV ? \'deviceNameGeneric\' : \'deviceName\'}}"></span>: <b>{{device.deviceName}}</b></li><li ng-if="subscription.lockinEndDate"><span translate="deviceOptionExpiresPre"></span>: <b>{{device.deviceLockingLengthEnd | date : \'dd/MM/yyyy\'}}</b></li><li ng-if="!subscription.isTV"><span translate="deviceImei"></span>: <b>{{device.imei}}</b></li><div ng-if="(subscription.type === \'postpaid\') && showForTestEnvs" class="sub-lockin-length"><br><h4><span translate="contractDurationField"></span></h4><p ng-if="subscription.lockinEndDate" class="dark"><b>{{ device.deviceLockingLengthStart | date : \'dd/MM/yyyy\'}}</b> - <b>{{device.deviceLockingLengthEnd | date : \'dd/MM/yyyy\'}}</b></p><p ng-if="!subscription.lockinEndDate" class="dark" translate="noLockinText"></p></div><br></div></ul>');
$templateCache.put('/scripts/directives/subscription-extra-infos/dirc_subscription-extra-infos.html','<div ng-if="showExtraInfos && subscription" class="extra-debug-info"><h3>This section is not show in the live/production environment.</h3><div>subscription id: {{subscription.id}}</div><div>subscription status: {{subscription.status}}</div><div ng-if="subscription.device">device status: {{subscription.device.status}}</div><hr><pre>subscription orders: {{subscription.orders | json}}</pre><pre ng-if="subscription.activeNpFlow">active number porting: {{subscription.activeNpFlow | json}}</pre></div>');
$templateCache.put('/scripts/directives/subscription-settings/dirc_subscription-settings.html','<div class="warning-message manual-margin" translate="cantChangeSettingsOnHold" ng-show="account.onHold.active && subscription.type == \'postpaid\'"></div><div class="warning-message manual-margin" translate="cantChangeSettingsIsLightCustomer" ng-show="subscription.isLight && subscription.type == \'postpaid\'"></div><div class="warning-message manual-margin" translate="cantChangeSettingsFastActivation" ng-show="subscription.fastActivation"></div><div class="warning-message" ng-if="!subscription.canActivateOptions" translate="cantActivateOptionsRateplanChangePending"></div><div class="warning-message" ng-if="!account.isAccountOwner()">{{\'onlyOwnerCanChangeSomeSettings\' | translate | replaceText : \'OWNER\' : account.getAccountOwnerName()}}</div><div ng-show="!subscription.settings"><loading-button loading="!subscription.settings"></loading-button></div><div class="sliceblock big-item-name" ng-show="subscription.settings"><div ng-show="!subscription.isActive" class="warning-message" translate="subCantEditWarning"></div><div ng-show="subscription.settings.VOICEMAIL && !hideVoiceMail && !callFilteringOnly && allowForPos(\'voicemail\')"><div class="slice-item" ng-class="{disabled: settingsDisabled(true)}"><div class="slice-left"><label for="{{::$id}}_settingVoicemailOn"><span class="item-name" translate="voicemainSettingsDescription"></span> <span class="item-description" translate="voicemainSettingsSub"></span></label></div><div class="slice-right valign-middle"><div class="toggle-container"><input type="checkbox" class="toggle" ng-model="settings.voicemail" id="{{::$id}}_settingVoicemailOn" ng-change="change(\'voicemail\')" ng-disabled="settingsDisabled(true)"> <label for="{{::$id}}_settingVoicemailOn"></label></div></div></div><div class="slice-item" ng-show="subscription.msisdn && subscription.simcardInfo.statusId != 10 && settings.voicemail"><div class="slice-left"><label for="languageChoice" class="item-name" ng-class="{disabled: !settings.voicemail || settingsDisabled(true, true)}" translate="voicemainLangField"></label> <span class="item-description" translate="{{settings.voicemailLang | lowercase}}"></span></div><div class="slice-right icon valign-middle"><i icon="fontawesome/angle-down" class="size-1 fill-smoke"></i></div><select ng-model="settings.voicemailLang" id="languageChoice" ng-change="change(\'voicemailLang\', settings.voicemailLang)" class="full-select" ng-disabled="!settings.voicemail || settingsDisabled(true, true)"><option ng-repeat="voicemailLang in voicemailLangs" value="{{voicemailLang}}" translate="{{voicemailLang | lowercase}}"></option></select></div></div><div ng-show="!voiceMailOnly && !callFilteringOnly  "><div ng-show="subscription.settings.GPRS_PARENT && !onlyRoaming && allowForPos(\'\')"><div class="slice-item" ng-class="{disabled: settingsDisabled()}"><div class="slice-left"><label for="{{::$id}}_settingGprs"><span class="item-name" translate="settingsMobileInternet"></span> <span class="item-description" translate="settingsMobileInternetSub"></span></label></div><div class="slice-right valign-middle"><div class="toggle-container"><input type="checkbox" class="toggle" ng-model="settings.gprs" id="{{::$id}}_settingGprs" ng-change="change(\'gprs\')" ng-disabled="settingsDisabled()"> <label for="{{::$id}}_settingGprs"></label></div></div></div></div><div ng-show="(subscription.settings.GPRS_PARENT  ||\n      subscription.settings.ROAMING)\n       && !(subscription.isLight && subscription.type == \'postpaid\' && allowForPos(\'\'))"><div class="slice-item" ng-show="subscription.settings.ROAMING && allowForPos(\'\')" ng-class="{disabled: settingsDisabled()}"><div class="subslice-item"><div class="slice-left"><label for="{{::$id}}_settingRoaming"><span class="item-name" translate="settingsForeignUsage"></span> <span class="item-description" translate="settingsForeignUsageSub"></span></label></div><div class="slice-right valign-middle"><div class="toggle-container"><input type="checkbox" class="toggle" ng-model="settings.roaming" id="{{::$id}}_settingRoaming" ng-change="change(\'roaming\')" ng-disabled="settingsDisabled()"> <label for="{{::$id}}_settingRoaming"></label></div></div></div></div><div class="slice-item" ng-show="subscription.settings.ROAM_AIR_SEA_SATE && allowForPos(\'\')" ng-class="{disabled: settingsDisabled()}"><div class="subslice-item"><div class="slice-left"><label for="{{::$id}}_settingRoamingAirSeaSate"><span class="item-name" translate="settingsRoamingAirSeaSateUsage"></span> <span class="item-description" translate="settingsRoamingAirSeaSateUsageSub"></span></label></div><div class="slice-right valign-middle"><div class="toggle-container"><input type="checkbox" class="toggle" ng-model="settings.roamingAirSeaSate" id="{{::$id}}_settingRoamingAirSeaSate" ng-change="change(\'roamingAirSeaSate\')" ng-disabled="settingsDisabled()"> <label for="{{::$id}}_settingRoamingAirSeaSate"></label></div></div></div></div><div class="slice-item" ng-show="(subscription.type == \'prepaid\'\n       || subscription.type === \'postpaid\' && isTelcoActpostaid && allowForPos(\'roamingDataLimit\')) && subscription.settings.GPRS_PARENT" ng-class="{disabled: settingsDisabled()}"><div class="subslice-item"><div class="slice-left"><label for="{{::$id}}_settingRoamingGprs"><span class="item-name" translate="settingsDataRoaming"></span> <span class="item-description" translate="settingsDataRoamingSub"></span></label></div><div class="slice-right valign-middle"><div class="toggle-container"><input type="checkbox" class="toggle" ng-model="settings.roamingGprs" id="{{::$id}}_settingRoamingGprs" ng-change="change(\'roamingGprs\')" ng-disabled="settingsDisabled()"> <label for="{{::$id}}_settingRoamingGprs"></label></div></div></div></div><div ng-if="!subscription.type == \'prepaid\' && allowForPos(\'roamingData\')" ng-slide-down="subscription.settings.PAYG_DATA && (settings.roaming || settings.roaming === undefined)" duration=".2"><div class="slice-item" ng-class="{disabled: settingsDisabled()}"><div class="subslice-item"><div class="slice-left"><label for="{{::$id}}_settingPAYGRoaming"><span class="item-name" translate="paygRoamingField"></span> <span class="item-description" translate="paygRoamingDescription"></span></label></div><div class="slice-right valign-middle"><div class="toggle-container"><input type="checkbox" class="toggle" ng-true-value="true" ng-false-value="false" ng-model="settings.paygRoaming" id="{{::$id}}_settingPAYGRoaming" ng-change="change(\'paygRoaming\')" ng-disabled="settingsDisabled()"> <label for="{{::$id}}_settingPAYGRoaming"></label></div></div></div></div></div><div id="roamingDataLimit" ng-if="subscription.type == \'prepaid\' ||\n       (subscription.type == \'postpaid\' && isTelcoActpostaid && allowForPos(\'roamingDataLimit\'))" ng-slide-down="subscription.settings.PAYG_DATA && (settings.roaming || settings.roaming === undefined)" duration=".2"><div class="slice-item" ng-class="{disabled: settingsDisabled()}"><div class="subslice-item"><div class="slice-left"><label for="{{::$id}}_settingPAYGRoamingPrePaid"><span class="item-name" translate="payg_roaming_costControl_field"></span> <span class="item-description" translate="payg_roaming_costControl_description"></span></label></div><div class="slice-right valign-middle"><div class="toggle-container"><input type="checkbox" class="toggle" ng-model="isDataLimit" id="{{::$id}}_settingPAYGRoamingPrePaid" ng-change="handleLimit(\'checkbox\')" ng-disabled="settingsDisabled()"> <label for="{{::$id}}_settingPAYGRoamingPrePaid"></label></div></div></div></div><div class="slice-item" ng-if="isDataLimit"><div class="slice-left"><span class="item-description">{{ roamingControl }}</span></div><div class="slice-right icon valign-middle"><i icon="fontawesome/angle-down" class="size-1 fill-smoke"></i></div><div><label class="item-description" for="costControl">{{ \'roamingCostLimitLabel\' | translate }}<br>{{ currentDataLimit.replace(\'LIMIT_\', \'\').toLowerCase() | customCurrency}}</label> <select ng-model="currentDataLimit" id="costControl" class="full-select" ng-change="handleLimit(\'setting\', currentDataLimit)"><option ng-repeat="(key, value) in paygDataLimitArray | orderBy: value.limit" ng-if="value.limit !== \'LIMIT_300\'" ng-selected="value.limit === currentDataLimit" value="{{ value.limit }}">{{ value.limit.replace(\'LIMIT_\', \'\').toLowerCase() | customCurrency}}</option></select></div></div></div></div><div ng-show="subscription.settings[\'090_NUMBERS_PARENT\'] && !onlyRoaming && allowForPos(\'\')"><div class="slice-item bordered" ng-class="{disabled: settingsDisabled() || (!settings.premium090x && !account.canEnablePremiumCalls(subscription))}"><div class="subslice-item no-border"><div class="slice-left"><label for="{{::$id}}_setting0900"><span class="item-name" translate="settings09x"></span> <span class="item-description" translate="settings09xSub"></span></label></div><div class="slice-right valign-middle"><div class="toggle-container"><input type="checkbox" class="toggle" ng-model="settings.premium090x" id="{{::$id}}_setting0900" ng-change="change(\'premium090x\')" ng-disabled="settingsDisabled() || under16"> <label for="{{::$id}}_setting0900"></label></div></div></div><div class="subslice-item"><div class="slice-left"><label for="{{::$id}}_setting0906"><span class="item-name" translate="settings0906"></span> <span class="item-description" translate="settings0906Sub"></span></label></div><div class="slice-right valign-middle"><div class="toggle-container"><input type="checkbox" class="toggle" ng-model="settings.premium0906" id="{{::$id}}_setting0906" ng-change="change(\'premium0906\')" ng-disabled="settingsDisabled() || under16"> <label for="{{::$id}}_setting0906"></label></div></div></div></div></div><div ng-show="subscription.settings.PREMIUM_SMS_MMS_PARENT && !onlyRoaming && allowForPos(\'\')"><div class="slice-item" ng-class="{disabled: settingsDisabled()}"><div class="slice-left"><label for="{{::$id}}_settingPremSms"><span class="item-name" translate="settingsPremiumSms"></span> <span class="item-description" translate="settingsPremiumSmsSub"></span></label></div><div class="slice-right valign-middle"><div class="toggle-container"><input type="checkbox" class="toggle" ng-model="settings.premiumSms" id="{{::$id}}_settingPremSms" ng-change="change(\'premiumSms\')" ng-disabled="settingsDisabled() || under16"> <label for="{{::$id}}_settingPremSms"></label></div></div></div></div></div><div ng-show="callFilteringOnly && !voiceMailOnly && allowForPos(\'\')"><div class="slice-item" ng-show="subscription.settings.CALL_FILTER_PARENT" ng-class="{disabled: settingsDisabled(true, true)}"><div class="subslice-item"><div class="slice-left"><label for="{{::$id}}_settingCallFiltering"><span class="item-name" translate="settingsCallFilteringName"></span> <span class="item-description" translate="settingsCallFilteringDescription"></span></label></div><div class="slice-right valign-middle"><div class="toggle-container"><input type="checkbox" class="toggle" ng-model="settings.callFiltering" id="{{::$id}}_settingCallFiltering" ng-change="simpleChange(\'callFiltering\')" ng-disabled="settingsDisabled(true, true)"> <label for="{{::$id}}_settingCallFiltering" data-testid="settings-callfiltering-toggle" data-enabled="{{settings.callFiltering}}"></label></div></div></div></div></div></div>');
$templateCache.put('/scripts/directives/subscription-switcher/dirc_subscription-switcher.html','<div ng-if="!rs.isDesktop && data.sub && !tempDisable"><div mobile-sideways-scroll inner-el=".sub-item" hide-helpers="true" start-pos="{{data.startPos}}" always="true" ng-init="initMobileSwitcher()"><div class="row no-wrap"><div ng-repeat="subscription in data.subs track by subscription.id" class="sub-item" ng-class="{\'no-switcher\': data.subs.length === 1 && !showPromos}"><h2>{{::subscription.rateplan.name}}</h2><b><div class="mobile-container" style="margin-top:6px"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" style="width:12px;margin:0 4px 4px 0"><path d="M304 128a80 80 0 1 0 -160 0 80 80 0 1 0 160 0zM96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM49.3 464l349.5 0c-8.9-63.3-63.3-112-129-112l-91.4 0c-65.7 0-120.1 48.7-129 112zM0 482.3C0 383.8 79.8 304 178.3 304l91.4 0C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7L29.7 512C13.3 512 0 498.7 0 482.3z"/></svg> <span>{{::subscription.user.firstName}} {{::subscription.user.lastName}}</span><div ng-if="!subscription.isFiber && !subscription.isHFC" class="flex phone-container"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:12px;margin:0 4px 4px 0"><path d="M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64C0 311.4 200.6 512 448 512c18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368C234.3 334.7 177.3 277.7 144 207.3L193.3 167c13.7-11.2 18.4-30 11.6-46.3l-40-96z"/></svg> <span style="margin-top:4px">{{::subscription.msisdn}}</span></div></div></b><span ng-if="isJunior"><br><b translate="juniorAccount"></b><tooltip type="fontawesome/info-circle" popup-title="{{\'juniorAccountPopupTitle\' | translate}}" icon-class="fill-primary"><span bind-html-compile="\'juniorAccountExplanation\' | translate  | replaceText : \'OWNER\' : ownerName  | replaceText : \'MSISDN\' : ownerMsisdn"></span></tooltip></span></div><div class="sub-item promo" ng-if="showPromos && account.isAccountOwner() && account.canAddSubscription(\'postpaid\')"><h2 class="sub-new-title"><i icon="circle-plus" ng-show="!rs.isMobile"></i> <span translate="newPostpaid"></span></h2></div></div></div><div class="sub-switch-icons" ng-show="data.subs.length > 1 || (showPromos && account.isAccountOwner() && account.canAddSubscription(\'postpaid\'))"><div class="dot" ng-repeat="subscription in data.subs track by subscription.id" ng-class="{active: subscription === data.sub}" ng-click="setPos($index)"></div><div class="dot" ng-class="{active: data.sub === \'newPostpaid\'}" ng-click="setPos(data.subs.length)" ng-if="showPromos && account.canAddSubscription(\'postpaid\')"></div></div></div><div ng-if="rs.isDesktop && data.sub"><div class="custom-add-button"><div class="sub-item promo" ng-if="showPromos && account.isAccountOwner() && account.canAddSubscription(\'postpaid\')" ng-click="setMobileSidewaysScrollPos(data.subs.length)" ng-click="setMobileSidewaysScrollPos(data.subs.length)" ng-class="{active: data.sub === \'newPostpaid\'}"><h2 class="sub-new-title"><i icon="circle-plus" ng-show="!rs.isMobile"></i> <span translate="newPostpaid"></span></h2></div></div><div class="row center contain-margin"><div class="subscription-switcher row center"><span ng-if="showArrows()" ng-click="slideLeft()" ng-disabled="!canSlideLeft()" class="back-icon"><a></a></span><div class="slider-container row"><div class="sub-block overview-border" ng-repeat="subscription in data.subs track by subscription.id" ng-if="isVisible($index)" ng-class="{active: subscription === data.sub, border_left: $index === 0, border_right: $index === last}" ng-click="setMobileSidewaysScrollPos($index)"><h2>{{::subscription.rateplan.name}}</h2><div class="flex frow" style="margin-top:6px"><div class="user"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" style="width:18px;margin:0 4px 8px 0"><path d="M304 128a80 80 0 1 0 -160 0 80 80 0 1 0 160 0zM96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM49.3 464l349.5 0c-8.9-63.3-63.3-112-129-112l-91.4 0c-65.7 0-120.1 48.7-129 112zM0 482.3C0 383.8 79.8 304 178.3 304l91.4 0C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7L29.7 512C13.3 512 0 498.7 0 482.3z"/></svg> <span>{{::subscription.user.firstName}} {{::subscription.user.lastName}}</span></div><div ng-if="!subscription.isFiber && !subscription.isHFC" class="flex phone-container"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" style="width:18px;margin:0 4px 8px 0"><path d="M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64C0 311.4 200.6 512 448 512c18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368C234.3 334.7 177.3 277.7 144 207.3L193.3 167c13.7-11.2 18.4-30 11.6-46.3l-40-96z"/></svg> <span style="margin-top:4px">{{::subscription.msisdn}}</span></div></div></div></div><span ng-if="showArrows()" ng-click="slideRight()" ng-disabled="!canSlideRight()" class="next-icon"><a></a></span></div></div></div>');
$templateCache.put('/scripts/directives/subscription-warnings/dirc_subscription-warnings.html','<div ng-if="subscription.pendingTermination" class="pending-termination-sub-message"><i icon="sub-warn"></i> <span bind-html-compile="\'subscriptionPendingTerminationMessage\' | translate | replaceText : \'XX.XX.XXXX\' : (subscription.subscriptionEndDate | date : \'dd.MM.yyyy\')" ng-if="subscription.subscriptionEndDate"></span> <span translate="subscriptionPendingTerminationMessageNoDate" ng-if="!subscription.subscriptionEndDate"></span></div><div ng-if="subscription.status === \'pendingActivation\' || subscription.fastActivation || showEsimStatus" class="box-very-small" ng-class="{\'pos-thingy-spacing\': state.agentLoggedIn}"><div class="pending-activation-sub-message" ng-if="state.agentLoggedIn || (!subscription.activeNpFlow && !subscription.activeOrder && !showEsimStatus) && subscription.status === \'pendingActivation\'"><i icon="sub-warn"></i> <span translate="subscriptionPendingActivationMessage"></span></div><order-status ng-if="!state.agentLoggedIn && showOrderStatus" sub="subscription" order="subscription.activeOrder"></order-status><onp-status ng-if="!state.agentLoggedIn && subscription.activeNpFlow && showOnpStatus" sub="subscription"></onp-status><esim-status ng-if="showEsimStatus" on-esim-reset="onEsimReset" sub="subscription"></esim-status><div ng-if="state.agentLoggedIn && subscription.getProduct().type === \'prepaid\'" class="legal text-silver center"><b>Current activity:</b> {{subscription.activationStatus.activityName}}<br><b>ID completion date:</b> {{subscription.activationStatus.idCompletionDate || \'Not completed\'}}<br><b>Network activation date:</b> {{subscription.activationStatus.networkActivationDate || \'Not active on network\'}}<br><b>Workflow ID:</b> {{subscription.activationStatus.workflowId}}<br><br><hr></div></div><div ng-if="subscription.status === \'server_error\'" class="server-error"><div class="box"><i icon="sub-terminated"></i> <span translate="error_{{subscription.errorGettingDetails}}" class="message"></span> <span>({{subscription.errorGettingDetails}})</span></div></div><div class="fiber-status" ng-if="orderFulfilled && hideDeviceStatus && (subscription.status !== \'pendingActivation\')"><img style="max-width:75px;max-height:75px" ng-src="/assets/images/mobile_icon_petrol.png" alt=""> <b class="message" bind-html-compile="\'orderDeviceFulfilledMessage\' | translate | replaceText : \'yyy\' : (fulfilledDate | date : \'dd.MM.yyyy\')"></b></div><br><div class="fiber-status" ng-if="orderNotFulfilled && hideDeviceStatus && (subscription.status !== \'pendingActivation\')"><img style="max-width:75px;max-height:75px" ng-src="/assets/images/fiber-status_shipment-underway.png" class="small" alt=""> <b class="message" translate="orderDeviceNotFulfilledMessage"></b></div><br><div class="warning-message legal text-silver center newStatusText" ng-if="account.onHold.active && subscription.type === \'postpaid\'" translate="cantChangeSettingsOnHold"></div>');
$templateCache.put('/scripts/directives/swype-order-form/dirc_swype-order-form.html','<form name="swypeForm" ng-submit="swypeForm.$valid && !submitting && submit()" novalidate><div class="formrow"><div class="formfield"><input type="text" id="ftstnm" ng-model="data.firstName" autocomplete="off" required> <label for="ftstnm" translate="firstNameField"></label></div></div><div class="formrow"><div class="formfield"><input type="text" id="lstnm" ng-model="data.lastName" autocomplete="off" required> <label for="lstnm" translate="lastNameField"></label></div></div><div class="formrow"><div class="formfield"><input type="text" id="email" ng-model="data.email" autocomplete="off" pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,10}" required> <label for="email" translate="emailField"></label></div></div><div class="formrow"><div class="formfield field-75"><input type="text" id="str" ng-model="data.street" autocomplete="off" required> <label for="str" translate="streetNameField"></label></div><div class="formfield field-25"><input type="text" id="streetNumber" ng-model="data.streetNumber" autocomplete="off"> <label for="streetNumber" translate="streetNumberField"></label></div></div><div class="formrow"><div class="formfield field-25"><input type="number" id="zip" ng-model="data.zip" autocomplete="off" pattern="[0-9]{4}" required> <label for="zip" translate="postCodeField"></label></div><div class="formfield field-75"><input type="text" id="city" ng-model="data.city" autocomplete="off" required> <label for="city" translate="cityField"></label></div></div><loading-button loading="submitting" class="small inline"><span translate="placeOrderButton"></span></loading-button></form>');
$templateCache.put('/scripts/directives/tabs/dirc_tabs.html','<div class="tabs" ng-show="showTabs"><div ng-if="mobileToggles && rs.isMobile" class="mobile-tabs"><big-toggler class="small" ng-repeat="tab in tabs track by $index" on-toggle="options.activeTab == tab[tabKey] && (options.activeTab = \'none\') || (options.activeTab = tab[tabKey])" ng-if="!tabShow || (tab[tabShowKey] == tabShowVal && !inverted) || (tab[tabShowKey] != tabShowVal && inverted)" toggler-data="dontTranslateTitles ? tab[tabTitle] : \'tabTitle_\' + tab[tabTitle]" translate-title="dontTranslateTitles" is-toggled="options.activeTab == tab[tabKey]"><div class="tab-content" ng-if="options.activeTab == tab[tabKey]" ng-transclude></div></big-toggler></div><div ng-if="mobileRadio"><div ng-repeat="tab in tabs track by $index" ng-show="!tabShow || (tab[tabShowKey] == tabShowVal && !inverted) || (tab[tabShowKey] != tabShowVal && inverted)"><input id="tab{{::$id}}{{::tab[tabTitle] | urlify}}" type="radio" name="activeTab{{::$id}}" ng-model="options.activeTab" ng-value="tab[tabKey]"> <label for="tab{{::$id}}{{::tab[tabTitle] | urlify}}"><span ng-if="!dontTranslateTitles" translate="tabTitle_{{::tab[tabTitle]}}"></span> <span ng-if="dontTranslateTitles">{{::tab[tabTitle]}}</span></label></div></div><ul class="tabs-list" ng-class="{\'none-selected\': !options.activeTab, \'show-mobile\': !mobileRadio && !mobileToggles, \'center\': centerTabs}" ng-hide="mobileRadio"><li class="tabs-list-item" ng-repeat="tab in tabs track by $index" ng-click="changeTab(tab[tabKey])" ng-class="{active: options.activeTab == tab[tabKey], special: tab.special, \'invalid\': isInvalid(tab[tabTitle] | urlify)}" ng-if="!tabShow || (tab[tabShowKey] == tabShowVal && !inverted) || (tab[tabShowKey] != tabShowVal && inverted)" id="{{::tab[tabTitle] | urlify}}"><a href><i icon="fontawesome/{{::tab.icon}}" class="icon-inline" ng-if="tab.icon"></i> <span ng-if="!dontTranslateTitles" translate="tabTitle_{{::tab[tabTitle]}}"></span> <span ng-if="dontTranslateTitles">{{::tab[tabTitle]}}</span></a></li></ul><div class="tab-content" ng-class="{\'hide-on-mobile\': !!mobileToggles}" ng-transclude></div></div>');
$templateCache.put('/scripts/directives/tariff-finder/dirc_tariff-finder.html','<div ng-if="!simpleMode"><div class="tariff-finder-row"><div class="tariff-finder-box"><label for="56" translate="fromCountryField"></label> <select id="56" ng-model="data.from" ng-change="change()" class="dark"><option ng-repeat="country in rateplan.rates.countries | rates : countries track by $index" value="{{::country.key}}">{{::country.name}}</option></select></div><div class="tariff-finder-arrow" ng-if="!rs.isMobile" ng-click="switchCountries()"><div class="arrow-icon"><i icon="fontawesome/long-arrow-right" class="icon-inline"></i></div></div><div class="tariff-finder-box"><label for="55" translate="toCountryField"></label> <select id="55" ng-model="data.to" ng-change="change()" class="dark"><option ng-repeat="country in rateplan.rates.countries | rates : countries track by $index" value="{{::country.key}}">{{::country.name}}</option></select></div></div></div><div class="tariff-finder-results"><div class="tariff-price-item fixed" ng-show="rates.fixed.length"><div class="tariff-type" translate="fixed"></div><div class="tariff-price-container" ng-class="{\'text-orange\': rates.fixed > 0}"><div class="tariff-price">{{rates.fixed | currency : \'\'}}</div><div class="tariff-unit"><span class="slash">/</span><span ng-if="rates.mobileChargeUnits !== \'day\'"><span ng-show="rates.fixedChargeUnits > 1">{{rates.fixedChargeUnits}} </span><span translate="unitMin"></span></span> <span ng-if="rates.mobileChargeUnits === \'day\'" translate="chargeUnit_{{rates.fixedChargeUnits}}"></span></div></div></div><div class="tariff-price-item mobile" ng-show="rates.mobile.length"><div class="tariff-type" translate="mobile"></div><div class="tariff-price-container" ng-class="{\'text-orange\': rates.mobile > 0}"><div class="tariff-price">{{rates.mobile | currency : \'\'}}</div><div class="tariff-unit"><span class="slash">/</span><span ng-if="rates.mobileChargeUnits !== \'day\'"><span ng-show="rates.mobileChargeUnits > 1">{{rates.mobileChargeUnits}} </span><span translate="unitMin"></span></span> <span ng-if="rates.mobileChargeUnits === \'day\'" translate="chargeUnit_{{rates.mobileChargeUnits}}"></span></div></div></div><div class="tariff-price-item sms" ng-show="rates.sms.length"><div class="tariff-type" translate="SMS"></div><div class="tariff-price-container" ng-class="{\'text-orange\': rates.sms > 0}"><div class="tariff-price">{{rates.sms | currency : \'\'}}</div><div class="tariff-unit"><span class="slash">/</span><span ng-show="rates.smsChargeUnits > 1">{{rates.smsChargeUnits}} </span><span translate="SMS"></span></div></div></div><div class="tariff-price-item mms" ng-show="rates.mms.length"><div class="tariff-type" translate="MMS"></div><div class="tariff-price-container" ng-class="{\'text-orange\': rates.mms > 0}"><div class="tariff-price">{{rates.mms | currency : \'\'}}</div><div class="tariff-unit"><span class="slash">/</span><span ng-show="rates.mmsChargeUnits > 1">{{rates.mmsChargeUnits}} </span><span translate="MMS"></span></div></div></div><div class="tariff-price-item gprs" ng-show="rates.gprs.length"><div class="tariff-type" translate="GPRS"></div><div class="tariff-price-container" ng-class="{\'text-orange\': rates.gprs > 0}"><div class="tariff-price">{{rates.gprs | currency : \'\'}}</div><div class="tariff-unit" ng-show="!rates.gprsChargeUnitsIsString"><span class="slash">/</span><span ng-show="rates.gprsChargeUnits > 1">{{rates.gprsChargeUnits}} </span><span translate="Mb"></span></div><div class="tariff-unit" ng-if="rates.gprsChargeUnitsIsString && rates.gprsChargeUnits"><span class="slash">/</span><span translate="chargeUnit_{{rates.gprsChargeUnits}}"></span></div></div></div><div class="tariff-price-item incoming" ng-show="rates.incoming"><div class="tariff-type" translate="incomingCalls"></div><div class="tariff-price-container" ng-class="{\'text-orange\': rates.incoming > 0}"><div class="tariff-price">{{rates.incoming | currency : \'\'}}</div><div class="tariff-unit"><span class="slash">/</span><span ng-show="rates.incomingChargeUnits > 1">{{rates.incomingChargeUnits}} </span><span translate="unitMin"></span></div></div></div></div><div class="center legal" ng-if="rateplan.url === \'lebara_plus\' && data.from === \'200903041337530279\' && data.to !== \'200903041337530279\'"><span bind-html-compile="\'callSetupFee\' | translate | replaceText : \'XX\' : (0.29 | customCurrency : true)"></span></div><div class="center legal" ng-if="rateplan.url === \'lebara_data_unlimited\' && data.from === \'200903041337530279\' && data.to !== \'200903041337530279\'"><span bind-html-compile="\'callSetupFee\' | translate | replaceText : \'XX\' : (0.3 | customCurrency : true)"></span></div>');
$templateCache.put('/scripts/directives/text-scroller/dirc_text-scroller.html','<div class="text-scroller" ng-style="{transform: \'translate(\' + offset + \'px)\'}" ng-class="{animated: animated, initted: !isInit}"><div class="text-el" ng-repeat="text in texts track by $index" ng-click="onUpdate($index)" ng-class="{active: active === $index}">{{text}}</div></div>');
$templateCache.put('/scripts/directives/toggle/dirc_toggle.html','<div class="toggler" ng-class="{\'is-opened\': isToggled}"><a href class="toggle-handler" ng-click="toggle()"><div class="indicator"></div><div class="toggle-title"><span class="fill-line">{{title}}</span> <i icon="fontawesome/chevron-{{isToggled ? \'up\' : \'down\'}}" class="clear size-1"></i></div></a><div ng-slide-down="isToggled" class="toggle-content" duration=".2"><ng-transclude></ng-transclude></div></div>');
$templateCache.put('/scripts/directives/toggler/dirc_toggler.html','<div class="toggler" ng-class="{\'is-opened\': isToggled}"><a href class="toggle-handler" ng-click="toggle()"><div class="indicator"></div><div class="toggle-title"><span class="fill-line" bind-html-compile="(noTranslateTitle ? (togglerData.title || togglerData) : ((togglerData.title || togglerData) | translate))"></span> <i icon="fontawesome/chevron-{{isToggled ? \'up\' : \'down\'}}" class="clear size-1"></i></div></a><div ng-slide-down="isToggled" class="toggle-content" duration=".2"><ng-transclude></ng-transclude></div></div>');
$templateCache.put('/scripts/directives/tooltip/dirc_tooltip.html','<div class="tooltip"><a href ng-click="openPopup(); $event.stopPropagation()"><span class="tooltip-icon"><i icon="{{type ? type : \'fontawesome/info-circle\'}}" class="{{iconClass}}"></i></span></a><ng-transclude class="tooltip-content"></ng-transclude></div>');
$templateCache.put('/scripts/directives/topic-by-tag-toggled/dirc_topic-by-tag-toggled.html','<div ng-show="getTopic()"><h2 class="space-bottom" title="{{::helpTopic.title}}" ng-hide="hideTitle">{{::helpTopic.title}} <span translate="helpArticlesPost"></span></h2><ul class="faq-list"><li class="sditem" ng-repeat="article in helpTopic.helpArticles track by article.id"><div data-topickey="{{::article.topic.id}}" id="{{::$id + \'-\' + $index}}" data-key="{{::article.id}}" toggler is-toggled="data[article.id]" on-toggle="onToggle" no-translate-title="true" toggler-data="article"><div class="block-8-4"><div class="mainblock"><p bind-html-compile="article.description" class="article-description"></p><vote topic-key="::article.topic.id" support-article-key="::article.id" text="\'articleUsefull\'"></vote></div></div></div></li></ul></div>');
$templateCache.put('/scripts/directives/topup-history/dirc_topup-history.html','<div ng-hide="subscription.gettingTopupHistory"><div ng-repeat="topup in subscription.topupHistory track by $index" class="topup-history-item"><div><b translate="topupDate"></b><br>{{topup.createDate | date : \'dd/MM/yyyy - HH:mm\'}}</div><div><b translate="topupAmount"></b><br>{{topup.amount | customCurrency}}</div><div><b translate="topupMethod"></b><br><span translate="{{topup.accountPaymentType}}"></span></div></div><div ng-show="!subscription.topupHistory.length"><span translate="noTopupHistoryAvailable"></span></div></div><loading-button loading="true" ng-if="subscription.gettingTopupHistory"></loading-button>');
$templateCache.put('/scripts/directives/tv-migration-confirm-button/dirc_tv-migration-confirm-button.html','<div><button translate="orderNow" ng-click="confirmTV()"></button></div>');
$templateCache.put('/scripts/directives/tv-offer/dirc_tv-offer.html','<section offer-big ng-if="!freePremiumTV" type="selfcare_premium_tv" class="screenblock"></section><section ng-if="showUpTvBanner || freePremiumTV" class="screenblock cozy"><offer-big type="selfcare_premium_tv_for_free"></offer-big><br><br><div class="content center"><span translate="freePremiumTVOfferLegal" class="legal"></span></div></section>');
$templateCache.put('/scripts/directives/tv-subscription/dirc_tv-subscription.html','<section class="screenblock headless bottomless" ng-if="order"><div class="content center very-small tv-order-status"><order-status order="order" sub="subscription" hide-id-check-warnings="true"></order-status></div></section><section class="screenblock tv-subscription headless"><div class="content center very-small"><div ng-if="subscription.status === \'active\' || subscription.status === \'pendingActivation\'"><i icon="fontawesome/tv" class="icon icon-inline size-6 fill-primary"></i><h2 translate="selfCareTVSubscriptionTitle"></h2><div ng-if="subscription.status === \'active\'" class="active-status"><i icon="fontawesome/check-circle" class="icon icon-inline fill-primary"></i> {{\'selfCareTVActive\' | translate}}</div><div class="ctas"><a watch-tv-link class="button big bottomless full-width-on-mobile" target="_blank"><i class="icon icon-inline" icon="fontawesome/play-circle"></i> {{\'selfCareTVSubscriptionWatchNow\' | translate}}</a> <a ng-click="toggleOptionsPopup()" ng-class="{\'disabled\': subscription.status == \'pendingActivation\'}" translate="selfCareTVSubscriptionOptionsCTA" class="button outline big bottomless full-width-on-mobile"></a></div><div ng-if="subscription.status == \'pendingActivation\'" class="disabled-option-info"><span class="legal" translate="cannotActivateOptionIfTvSubIsNotActive"></span></div><div class="active-options"><div ng-repeat="data in activeOptionsData track by $index" class="circle-next-option" ng-click="showActiveOptionPopup(data.option)"><div class="next-option-header"><div class="option-icon"><i icon="fontawesome/soccer-ball-o" class="icon-inline fill-primary"></i></div><strong class="circle-bundle-title" translate="{{::data.option.getText(\'title\')}}"></strong></div><div ng-if="::data.bundle.willRenew" class="circle-active-option-desc"><span bind-html-compile="::\'circleActiveOptionDesc\' | translate | replaceText : \'XX.XX.XXXX\' : (data.bundle.endDate | date : \'dd.MM.yyyy\') | replaceText : \'XXXXXX\' : data.option.name"></span></div><div ng-if="::!data.bundle.willRenew" class="circle-active-option-desc non-renewal"><span bind-html-compile="::\'circleActiveOptionNonRenewDesc\' | translate | replaceText : \'XX.XX.XXXX\' : (data.bundle.endDate | date : \'dd.MM.yyyy\') | replaceText : \'XXXXXX\' : data.option.name"></span></div><div ng-init="promo = subscription.getPromoForOption(data.option)"><div ng-if="promo && data.option.cost > 0"><br><option-price small="true" option="data.option" current-sub="subscription"></option-price></div></div></div></div></div></div><div ng-if="subscription.status === \'terminated\'"><div class="terminated-sub-message"><i icon="sub-terminated"></i><h2 translate="subscriptionTerminatedTitle"></h2><span translate="subscriptionTerminatedMessage"></span></div><tv-offer></tv-offer></div></section><option-activation data="subscription" ng-if="showOptionsPopup" on-close="toggleOptionsPopup" categories="[\'TV\']"></option-activation>');
$templateCache.put('/scripts/directives/upc-prive/dirc_upc-prive.html','<div ng-if="posToken"><b>POS logged in</b><br><br></div><form ng-if="data" name="upcPriveForm" ng-submit="upcPriveForm.$valid && submit()" novalidate custom-validation="upcPriveForm"><p class="form-section-title" translate="checkoutSectionCustomerInfoFiber"></p><personal-details auto-complete="true" data="data.customerDetails" min-age="-6570" contact-number="true" eshop-mode="true" editable="!loading"></personal-details><p class="form-section-title" translate="installationAddress"></p><address-checker auto-complete="true" address="data.installationAddress" check="true" editable="!loading" ng-if="!isFiber" show-co="true" animate-address="false" force-swiss-address="true"></address-checker><br><div class="formrow"><div class="formfield headless"><input type="checkbox" ng-model="data.differentShippingAddress" ng-disabled="loading" id="differentShippingAddress"> <label for="differentShippingAddress" translate="differentShippingAddress"></label></div></div><div ng-if="data.differentShippingAddress"><p class="form-section-title" translate="checkoutSectionShippingAddress"></p><address-checker address="data.shippingAddress" check="true" editable="!loading" show-co="true" animate-address="false" force-swiss-address="true"></address-checker></div><div class="formrow" ng-if="!state.customerLoggedIn"><div class="formfield"><input type="checkbox" ng-model="data.differentBillingAddress" ng-disabled="loading" id="differentBillingAddress"> <label for="differentBillingAddress" translate="differentBillingAddress"></label></div></div><div ng-if="data.differentBillingAddress"><p class="form-section-title" translate="checkoutSectionBillingAddress"></p><address-checker address="data.billingAddress" check="true" editable="!loading" show-co="true" animate-address="false" force-swiss-address="true"></address-checker><br></div><p class="form-section-title" translate="checkoutSectionUpcPhoneNumber"></p><div class="formrow"><div class="formfield auto-width"><input type="radio" ng-model="data.numberType" name="numberType" id="newNumber" value="new" required ng-disabled="loading"> <label for="newNumber" translate="upcNewNumberLabel"></label></div><div class="formfield auto-width"><input type="radio" ng-model="data.numberType" name="numberType" id="keepNumber" value="keep" required ng-disabled="loading"> <label for="keepNumber" translate="upcKeepNumberLabel"></label></div></div><div ng-if="data.numberType === \'keep\'"><div class="formrow"><div class="formfield field-100"><input name="upcNumberKeep" id="upcNumberKeep" type="text" ng-model="data.phoneNumber" ng-disabled="loading" ng-required="true"> <label for="upcNumberKeep" translate="upcNumberKeepLabel"></label></div></div></div><p class="form-section-title" translate="installationWishDateTitle"></p><div class="formrow"><div class="formfield auto-width"><input type="radio" ng-model="data.wishDateType" name="wishDateType" id="asapWishDate" value="asap" required ng-disabled="loading"> <label for="asapWishDate" translate="upcAsapWishDateLabel"></label></div><div class="formfield auto-width"><input type="radio" ng-model="data.wishDateType" name="wishDateType" id="CustomWishDate" value="custom" required ng-disabled="loading"> <label for="CustomWishDate" translate="upcCustomWishDateLabel"></label></div></div><div ng-if="data.wishDateType === \'custom\'"><div class="installation-wishdate-container"><app-date data="data.wishDate" editable="!loading" custom-validation-function="customValidationFunction" fewest-days-from-now="5" auto-complete="false" most-days-from-now="180" required="true" allow-any-date="false" force-id="\'_pdaw\'"><span translate="installationWishDate"></span></app-date></div><p translate="specificWishDateText"></p></div><div class="center"><button translate="upcPriveCtaButton" class="big" ng-if="!loading"></button></div><loading-button ng-if="loading" loading="true"></loading-button></form><loading-button loading="true" ng-if="!data"></loading-button>');
$templateCache.put('/scripts/directives/upc-prive-edit-product/dirc_upc-prive-edit-product.html','<button ng-click="confirmProductChange()" class="big" ng-if="!loading"><ng-transclude></ng-transclude></button><loading-button ng-if="loading" loading="true"></loading-button>');
$templateCache.put('/scripts/directives/usage-history/dirc_usage-history.html','<div class="usage-history"><div class="usage-type-switcher"><div class="usage-type" ng-class="{selected: data.selectedUsageType === \'gprs\'}" ng-click="data.selectedUsageType = \'gprs\'; data.openDay = null"><i icon="icon-wifi"></i> <strong>{{usage.gprs.total * 1024 * 1024 | bytes}}</strong> <span>{{usage.gprs.totalCost | customCurrency}}</span></div><div class="usage-type" ng-class="{selected: data.selectedUsageType === \'calls\'}" ng-click="data.selectedUsageType = \'calls\'; data.openDay = null"><i icon="circle-icon_nationalmin"></i> <strong>{{usage.calls.total | minSec}} <span translate="unitcalls"></span></strong> <span>{{usage.calls.totalCost | customCurrency}}</span></div><div class="usage-type" ng-class="{selected: data.selectedUsageType === \'sms\'}" ng-click="data.selectedUsageType = \'sms\'; data.openDay = null"><i icon="icon-sms"></i> <strong>{{usage.sms.total | number : 0}} <span translate="unitsms"></span></strong> <span>{{usage.sms.totalCost | customCurrency}}</span></div></div><div class="usage-days"><div class="usage-empty center" ng-if="!days.length"><p class="text-silver" translate="noHistoryOfType"></p></div><div class="day" ng-repeat="day in usage[data.selectedUsageType].days | usageDaysFilter as days track by $index" ng-class="{open: data.openDay === day}"><div class="day-header" ng-click="data.openDay = data.openDay === day ? null : day"><div>{{day.date | date : \'dd/MM/yyyy\'}}</div><div ng-if="data.selectedUsageType === \'gprs\'">{{day.total * 1024 * 1024 | bytes : false : false : false : 2}}</div><div ng-if="data.selectedUsageType === \'calls\'">{{day.total | minSec}} <span translate="unit{{data.selectedUsageType}}"></span></div><div ng-if="data.selectedUsageType === \'sms\'">{{day.total | number : 0}} <span translate="unit{{data.selectedUsageType}}"></span></div><div ng-if="day.totalCost > 0" class="cost">{{day.totalCost | customCurrency}}</div><div ng-if="day.totalCost <= 0" class="free cost"><span translate="free"></span></div><div class="toggler-icon"><i icon="arrow-down"></i></div></div><div class="day-body" ng-if="data.openDay === day"><div ng-if="data.selectedUsageType === \'gprs\'"><div class="day-body-row"><div class="label" translate="labelTypeNational"></div><div class="day-row-data"><strong translate="typeNameGprs"></strong><div>{{day.national.total * 1024 * 1024 | bytes : false : false : false : 2}}</div><div ng-if="day.national.totalCost > 0">{{day.national.totalCost | customCurrency}}</div><div ng-if="day.national.totalCost <= 0" class="free"><span translate="free"></span></div></div></div><div class="day-body-row"><div class="label" translate="labelTypeRoaming"></div><div class="day-row-data"><strong translate="typeNameGprs"></strong><div>{{day.roaming.total * 1024 * 1024 | bytes}}</div><div ng-if="day.roaming.totalCost > 0">{{day.roaming.totalCost | customCurrency}}</div><div ng-if="day.roaming.totalCost <= 0" class="free"><span translate="free"></span></div></div></div></div><div ng-if="data.selectedUsageType === \'calls\'"><div class="day-body-row" ng-repeat="item in day.items | orderBy : \'time\' track by $index"><div class="label">{{item.time | date : \'H:mm\'}} - <span translate="labelTypeInternational" ng-if="item.type === \'international\'"></span><span translate="labelTypeNational" ng-if="item.type === \'national\' || item.type === \'premium\'"></span><span translate="labelTypeRoaming" ng-if="item.type === \'roaming\'"></span></div><div class="day-row-data"><strong><i icon="{{item.isIncoming ? \'icon-inbound\' : \'icon-outbound\'}}"></i> <span ng-if="item.isIncoming" translate="usageIncomingLabel" class="incoming"></span> <span ng-if="!item.isIncoming && item.to !== \'voicemail\'">{{item.to}}</span> <span ng-if="!item.isIncoming && item.to === \'voicemail\'" translate="voicemail"></span></strong><div>{{item.amount | minSec}} <span translate="unitcalls"></span></div><div ng-if="item.cost > 0">{{item.cost | currency : \'CHF \'}}</div><div ng-if="item.cost <= 0" class="free"><span translate="free"></span></div></div></div></div><div ng-if="data.selectedUsageType === \'sms\'"><div class="day-body-row" ng-repeat="item in day.items | orderBy : \'time\'  track by $index"><div class="label">{{item.time| date : \'H:mm\'}} - <span translate="labelTypeInternational" ng-if="item.type === \'international\'"></span><span translate="labelTypeNational" ng-if="item.type === \'national\'"></span><span translate="labelTypeRoaming" ng-if="item.type === \'roaming\'"></span></div><div class="day-row-data"><strong><i icon="{{item.isIncoming ? \'icon-inbound\' : \'icon-outbound\'}}"></i> <span ng-if="item.isIncoming" translate="usageIncomingSmsLabel" class="incoming"></span> <span ng-if="!item.isIncoming && item.to !== \'voicemail\'">{{item.to}}</span> <span ng-if="!item.isIncoming && item.to === \'voicemail\'" translate="voicemail"></span></strong><div>{{item.amount}} <span translate="unitsms"></span></div><div ng-if="item.cost > 0">{{item.cost | customCurrency}}</div><div ng-if="item.cost <= 0" class="free"><span translate="free"></span></div></div></div></div></div></div></div></div><div ng-if="days.length && showUsageButton" class="bill-buttons center-horizontally-flex center-content-vertically"><a href ng-click="downloadBillPdf(invoiceId, CustomerSubscriptionId)"><i icon="bill-download" class="center download-monthly-usage-icon-and-label"></i> <span translate="DownloadMonthlyUsageReportLabel" class="download-monthly-usage-icon-and-label"></span> <span class="inline-loader" ng-show="gettingPdf"></span></a></div>');
$templateCache.put('/scripts/directives/usage-history-graph/dirc_usage-history-graph.html','<div class="usage-history-graph" ng-class="{\'has-numbers\': !rs.isMobile}"><div class="column" ng-repeat="column in columns" ng-style="{\'height\': (100 / highest * column[0]) + \'%\'}"><div class="not-included" ng-class="{\'add-spacing\': column[1] > 0 && column[2] > 0}" ng-style="{\'height\': (100 / column[0] * column[1]) + \'%\'}"></div><div class="included" ng-style="{\'height\': (100 / column[0] * column[2]) + \'%\'}"></div><div class="day-number">{{column[3]}}</div></div></div>');
$templateCache.put('/scripts/directives/user-details/dirc_user-details.html','<form name="userDetailsForm" ng-submit="userDetailsForm.$valid && submit()" custom-validation="userDetailsForm" novalidate ng-keyup="formDataTracking(userDetailsForm)"><div ng-show="!user.emailValidated && user.emailAddress && !account.onHold.active && isAccountOwner" class="warning-message headless"><i icon="fontawesome/exclamation-triangle" class="icon-inline"></i> <span translate="emailNotValidated"></span><br><br><email-validation-sender user="user"></email-validation-sender></div><div class="warning-message" ng-if="account.onHold.active"><span translate="cantEditUserOnHold"></span></div><personal-details highlight-email-empty="true" editable="false" email-only-editable="!account.onHold.active && isAccountOwner" data="data.personalDetails" allow-any-date="true"></personal-details><address-checker address="data.address" check="true" editable="!account.onHold.active && isAccountOwner" force-swiss-address="forceSwissAddress" force-neighbouring-country="idTypeForAllowNeibouringCountries" show-co="true"></address-checker><id-details ng-if="data.idDetails.nationality" data="data.idDetails" editable="false" selfcare="true" force-not-editable="true" nationality-only="true"></id-details><div class="center align-right-on-medium" ng-if="!account.onHold.active && isAccountOwner"><loading-button loading="submitting" class="small inline centered"><span translate="saveButton"></span></loading-button></div></form>');
$templateCache.put('/scripts/directives/vote/dirc_vote.html','<div><div ng-if="submitting"><loading-button loading="true"></loading-button></div><div ng-if="!submitting" class="votes"><span translate="{{text}}"></span><div class="thumbs"><i ng-click="data.value !== 1 && vote(1)" ng-class="{disabled  : data.value === 1}" icon="fontawesome/thumbs-up" class="icon-inline"></i><i ng-class="{disabled : data.value === -1}" ng-click="data.value !== -1 && vote(-1)" icon="fontawesome/thumbs-down" class="icon-inline"></i></div></div><div ng-slide-down="!submitting && showFeedback" duration="0.2"><form name="fform" ng-submit="fform.$valid && vote(-1)" novalidate><div class="formrow"><div class="formfield field-100"><textarea ng-model="data.feedback" id="message-{{::$id}}" rows="{{rootScope.isMobile ? \'6\' : \'3\'}}" cols="80" required></textarea> <label for="message-{{::$id}}" translate="whatCouldWeImprove"></label> <button class="button petrol feedback"><span translate="sendFormButton"></span></button></div></div><div class="formrow"><div class="formfield field-100"></div></div></form></div></div>');
$templateCache.put('/scripts/directives/voucher-topup/dirc_voucher-topup.html','<div class="voucher-topup"><h2 ng-if="!simpleMode"><span translate="voucherTopupCode"></span></h2><div ng-hide="doingVoucherTopup"><form name="voucherTopupForm" ng-submit="voucherTopupForm.$valid && doVoucherTopup()" custom-validation="voucherTopupForm" novalidate><div class="formrow"><div class="formfield"><input id="52" type="tel" validation-type="voucher-code" ng-model="voucherCode" pattern="[0-9]*" minlength="12" maxlength="16" autocomplete="off" required> <label for="52" translate="voucherCodeLabel"></label></div></div><div class="formrow"><div class="formfield"><button class="full-width petrol big bottomless headless" translate="voucherTopupSubmitButton"></button></div></div></form></div><loading-button loading="true" ng-if="doingVoucherTopup"></loading-button></div>');
$templateCache.put('/scripts/directives/webcam/dirc_webcam.html','<div ng-if="Camera.requestingPermissions" class="info-message"><span translate="pleaseAcceptCameraPermissions"></span></div><div class="picture-interface" full-height="true" ng-show="!image && !error" ng-class="{\'full-screen-mode\': fullScreenMode(), vertical: orientation == \'vertical\'}"><div class="webcam-container" ng-hide="loading" ng-class="{\'full-screen-mode\': fullScreenMode(), vertical: orientation == \'vertical\'}"><div class="dot" ng-show="documentType == \'selfie\' && !loadingGiff" ng-class="{animated: takingGiff}"></div><video ng-hide="image" id="video" ng-class="{flipped: documentType == \'selfie\'}" webkit-playsinline autoplay playsinline muted controls crossorigin="anonymous"></video><canvas id="backup-canvas"></canvas><div class="document-placement" ng-show="documentType == \'side1\' || documentType == \'side2\'" ng-class="{\'taking-picture\': takingPicture}"><div class="laser-line" ng-if="takingPicture"></div><div class="webcam-info-image {{infoImage.classes}}" ng-if="infoImage" ng-style="{\'background-image\': \'url(\' + infoImage.url + \')\'}"></div><div class="overlays"><div class="top-overlay"></div><div class="right-overlay"></div><div class="bottom-overlay"></div><div class="left-overlay"></div></div></div><div class="face-placement" ng-show="documentType == \'selfie\'" ng-class="{\'taking-picture\': takingGiff}"><span class="oval"></span> <span class="eye eye-left"></span> <span class="eye eye-right"></span> <span class="nose"></span> <span class="mouth"></span></div></div><div class="camera-buttons top-right" ng-show="!takingGiff"><button class="cancel-button" ng-if="onCancel && !loading && !takingPicture" ng-click="onCancel()()"><i icon="fontawesome/times" class="fill-white size-1"></i></button></div><div class="instructions {{documentType}}" ng-hide="loading || takingPicture"><p translate="{{instructions}}"></p><div class="buttons"><button ng-show="helpVideo || helpContent" class="info-button" ng-click="infoPopup.show()"><i icon="fontawesome/info" class="fill-white size-1"></i></button> <button class="red skip-button" ng-if="onSkip" ng-click="onSkip()()"><div class="button-width-limitor"><i icon="fontawesome/sign-out" class="fill-white icon-inline"></i> <span translate="webcamSkipButton"></span></div></button> <button id="snap" ng-if="!image && documentType != \'selfie\'" class="petrol" ng-click="takePicture(true)"><div class="button-width-limitor"><i icon="fontawesome/camera" class="fill-white icon-inline"></i> <span translate="webcamTakeImageButton" ng-if="documentType === \'side1\'"></span> <span translate="webcamTakeImageButtonSide2" ng-if="documentType === \'side2\'"></span></div></button> <button id="snap" ng-if="!image && documentType == \'selfie\' && !takingGiff" class="petrol" ng-click="takeGiff()"><div class="button-width-limitor"><i icon="fontawesome/camera" class="fill-white icon-inline"></i> <span translate="webcamTakeGiffButton"></span></div></button><div class="picture-button-hitbox-extender" ng-if="!image && documentType == \'selfie\' && !takingGiff" ng-click="takeGiff(true)"></div></div></div><div ng-show="loading && !Camera.requestingPermissions" class="loading-indicator"><div class="indicator"><span></span> <span></span> <span></span></div></div></div><div ng-if="error && error !== \'error_webcamNotAllowed\'" class="warning-message bottomless"><i icon="fontawesome/exclamation-triangle" class="icon-inline"></i> <span translate="{{error}}"></span></div><webcam-permissions-instructions ng-if="error === \'error_webcamNotAllowed\'"></webcam-permissions-instructions>');
$templateCache.put('/scripts/directives/webcam-permissions-instructions/dirc_webcam-permissions-instructions.html','<div class="permission-instructions"><h2 translate="cameraPermissionTitle"></h2><p translate="cameraPermissionDescription"></p><button class="petrol" ng-click="reload()" type="button"><span translate="retryButton"></span></button><div ng-if="browser === \'chrome\'"><img src="/assets/images/webcam-permissions/webcam-instructions-chrome.jpg" alt=""></div></div>');
$templateCache.put('/scripts/directives/win-checkout-basket/dirc_win-checkout-basket.html','<div class="checkout-show-details" ng-show="canClose && !isOpen" ng-click="isOpen = true"><i icon="circle-info-outline"></i> <span translate="checkoutInfoLink"></span> &nbsp; &nbsp; <i icon="fontawesome/chevron-down" class="size-1"></i></div><div ng-slide-down="isOpen" ng-click="close()" lazy-render duration=".2"><div class="container" ng-if="isOpen" click-outside="close()"><div class="close-button" ng-show="canClose"><i icon="fontawesome/chevron-up" class="size-1"></i></div><div class="well basket" ng-if="rs.sunriseMode"><div class="horizontal"><span class="form-section-title-main well-title bold" translate="myChoice"></span> <span ng-if="discountedTotalPriceMonthly" translate="monthly" class="bold"></span></div><hr><div class="horizontal"><p class="product-name">{{data2.productSold.niceName}}</p><p><b ng-if="discountedTotalPriceMonthly">{{discountedTotalPriceMonthly | customCurrency : true}}</b></p></div><div class="horizontal" ng-if="(discountedTotalPriceMonthly && originalTotalPriceMonthly) && discountedTotalPriceMonthly !== originalTotalPriceMonthly"><span class="promotion-text"><span translate="winPromotion" ng-class="{\'lightblue\' : rs.sunriseMode, \'text-petrol\' : !rs.sunriseMode}"></span>&nbsp;{{discountedTotalPriceMonthly | customCurrency : true}} <span translate="statt"></span> {{originalTotalPriceMonthly | customCurrency : true}}</span> <span></span></div><hr></div><div ng-if="!rs.sunriseMode"><h1>{{data2.productSold.niceName}}</h1><h3 ng-if="prodInfo.promoText2 && prodInfo.calculatedDiscountPercentage" class="text-red headless bottomless">{{prodInfo.promoText2 | translate | replaceText : \'XXX\' : prodInfo.calculatedDiscountPercentage}}</h3><h3 ng-if="prodInfo.underPriceText" class="text-red headless bottomless">{{prodInfo.underPriceText}}</h3><br><p class="activation-costs" ng-if="activationFee >= 0"><span translate="winActivation"></span> <b>{{activationFee | customCurrency : true}}</b></p><p class="activation-costs" ng-if="data2.electricianPackage"><span translate="electricianPackage"></span> <b>{{data2.electricianPackage.price.price.value | customCurrency : true}}</b></p><p class="activation-costs" ng-if="discountedTotalPriceMonthly"><span>{{data2.productSold.niceName}}</span> <b>{{discountedTotalPriceMonthly | customCurrency : true}} <span translate="perMonthWin"></span></b></p></div></div></div>');
$templateCache.put('/pages/landing-page.html','<div data-wio-id="{{::id}}" class="page-edit-button"></div><div ng-if="::accessAllowed"><div ng-repeat="item in ::data track by $index" ng-class="::item.slice_type"><div ng-if="::item.slice_type === \'page_header\'" info-page-hero class="half-height"><img class="page-header-image" ng-if="item.primary.image" ng-src="{{item.primary.image.url}}" alt=""><div bind-html-compile="item.primary.content"></div></div><div ng-if="::item.slice_type === \'devices\'" class="screenblock"><div class="content"><devices channel="item.primary.channel.slug" show-filter="true" filter-out-home-box="item.primary.hide_home_box === \'Hide home box\'"></devices></div></div><div ng-if="::item.slice_type === \'hero_offer\'" ng-class="{\'half-height\': item.primary.display_mode === \'Half height\' || (item.primary.display_mode === \'Half height on mobile\' && rs.isMobile), \'not-max-height\': isNotMaxHeightTest()}" class="{{item.primary.special_classes}}" replace-data="item.replaceData" offer-hero offer-tags="item.primary.offer.tags" id="::item.primary.offer.id"></div><div ng-if="::item.slice_type === \'centered_hero_offer\'" ng-class="::{\'half-height\': item.primary.display_mode === \'Half height\'}" button-alignment="item.primary.button_alignment" offer-tags="item.primary.offer.tags" replace-data="item.replaceData" offer-hero-centered id="::item.primary.offer.id"></div><section class="screenblock" ng-if="::item.slice_type === \'products\'" id="{{::getSliceId(item)}}" ng-class="::{ smoke: item.primary.background_color === \'Gray\', petrol: item.primary.background_color === \'Primary\' }"><div class="content"><div ng-if="::item.primary.content_above_products" bind-html-compile="item.primary.content_above_products"></div><products auto-height=".row" cancenter="::true" cms-products="::item.items" link-extension="::item.linkExtension" limit-to="::item.primary.limit_to_one_row === \'Limit\' ? 4 : 1000" mobile-sideways-scroll desktop-carousel="{{!!item.primary.allow_sideways_scrolling}}" column-count="4" inner-el=".product-item" auto-pos="{{::!item.primary.mobile_start_position}}" start-pos="{{::item.primary.mobile_start_position - 1}}"></products><div class="info-buttons-right" ng-if="::item.primary.link_to_all_products === \'Show link\'"><a c-route="/mobile-products" translate="viewAllProducts"></a></div><br></div></section><section class="screenblock" ng-if="item.slice_type === \'products_preset\' && item.items" id="{{::getSliceId(item)}}" ng-class="::{ smoke: item.primary.background_color === \'Gray\', petrol: item.primary.background_color === \'Primary\' }"><div class="content"><div ng-if="::item.primary.content_above_products" bind-html-compile="item.primary.content_above_products"></div><products auto-height=".row" cancenter="::true" cms-products="item.items" link-extension="::item.linkExtension" limit-to="::item.primary.limit_to_one_row === \'Limit\' ? 4 : 1000" mobile-sideways-scroll desktop-carousel="{{!!item.primary.allow_sideways_scrolling}}" column-count="4" inner-el=".product-item" auto-pos="{{::!item.primary.mobile_start_position}}" start-pos="{{::item.primary.mobile_start_position - 1}}"></products><div class="info-buttons-right" ng-if="::item.primary.link_to_all_products === \'Show link\'"><a c-route="/mobile-products" translate="viewAllProducts"></a></div><br></div></section><div ng-if="::item.slice_type === \'medium_offer\'" id="{{::getSliceId(item)}}"><section ng-class="::{ smoke: item.primary.background_color === \'Gray\', petrol: item.primary.background_color === \'Primary\' }" replace-data="item.replaceData" offer-tags="item.primary.offer.tags" offer-big id="::item.primary.offer.id" class="screenblock"></section></div><section ng-if="::item.slice_type === \'small_offers\'" id="{{::getSliceId(item)}}" ng-class="::{\n        shrinked: item.primary.spacing === \'No spacing\',\n        bottomless: item.primary.spacing === \'Bottomless\',\n        headless: item.primary.spacing === \'Headless\',\n        smoke: item.primary.background_color === \'Gray\',\n        petrol: item.primary.background_color === \'Primary\'\n      }" class="screenblock"><div class="content"><div class="row offer-list" ng-class="{thirds: item.items.length === 3}"><div offer ng-repeat="data in ::item.items track by $index" id="::data.offer.id" button-alignment="data.button_alignment" offer-tags="data.offer.tags" replace-data="data.replaceData" class="offer single primary-offer"></div></div></div></section><section ng-if="::item.slice_type === \'image___text\'" class="screenblock {{item.primary.special_classes}}" id="{{::getSliceId(item)}}" ng-class="::{\n        shrinked: item.primary.spacing === \'No spacing\',\n        \'no-padding\': item.primary.spacing === \'No spacing or padding\',\n        bottomless: item.primary.spacing === \'Bottomless\',\n        headless: item.primary.spacing === \'Headless\',\n        smoke: item.primary.background_color === \'Gray\',\n        petrol: item.primary.background_color === \'Primary\'\n      }"><div class="content"><div class="{{::getBlockSize(item.primary.display)}}" ng-class="::{\'block-center\': item.primary.vertically_center === \'Center\'}"><div class="mainblock"><div bind-html-compile="item.primary.content" ng-class="{\'pre-wrap\': item.primary.render_type !== \'Normal\'}"></div></div><div class="sideblock" ng-if="(!rs.isMobile || item.primary.hide_image_on_mobile !== \'Hide on mobile\') && item.primary.display !== \'Content only\'"><img ng-src="{{::item.primary.image.url}}" alt="" class="full-width"></div></div></div></section><section ng-if="::item.slice_type === \'contest\'" class="screenblock"><div class="content" id="contest"><contest image="::item.primary.image.url" image-type="::getBlockSize(item.primary.image_style)" contest-name="::item.primary.contest_name" cta-text="::item.primary.contest_cta" ask-birth-date="::item.primary.ask_for_birthdate === \'Ask for birthdate\'" ask-name="::item.primary.ask_for_name === \'Ask for name\'" ask-phone-number="::item.primary.ask_for_contact_number === \'Ask for contact number\'" redirect-url="::item.primary.redirect_url" error-url="::item.primary.error_url" contest-title="::item.primary.contest_title" success-message="::item.primary.success_message" extra-data="::item.items"></contest></div></section><section class="screenblock download-links-slice" ng-if="::item.slice_type === \'download_links\'"><div class="content"><div class="flex frow"><i icon="fontawesome/{{::item.primary.icon.toLowerCase()}}-o" class="icon-inline large pad-right"></i> <span bind-html-compile="::item.primary.title" class="inline"></span></div><download-links links="::item.items"></download-links></div></section><section ng-if="::item.slice_type === \'custom_content\'" class="screenblock" ng-class="::{\n        smoke: item.primary.background_color === \'Gray\',\n        petrol: item.primary.background_color === \'Primary\'\n      }"><div class="content" bind-html-compile="::item.primary.text"></div></section><section ng-if="::item.slice_type === \'big_links\'" class="screenblock"><div class="content"><div class="row"><a c-route="{{box.link}}" dont-link="{{!box.link}}" class="big-link no-link" ng-repeat="box in item.items"><div class="icon" ng-style="{\'background-image\': \'url(\' + box.icon.url + \')\'}"></div><div class="text" align-box="1" bind-html-compile="box.content"></div><button ng-if="box.link" type="button" class="big bottomless">{{box.button_text}}</button></a></div></div></section><section ng-if="::item.slice_type === \'account_deals\' && state.customerLoggedIn" class="screenblock smoke roomy"><div class="content"><account-deals></account-deals></div></section><section ng-if="::item.slice_type === \'image_s_\'" class="screenblock" ng-class="::{\n      \'no-padding\': item.primary.spacing === \'None\',\n      \'cozy\': item.primary.spacing === \'Cozy\',\n      \'page-width\': item.primary.size === \'Page width\'\n    }"><div class="content flex wrap image-slice" ng-class="::{\n        frow: item.primary.multiple_images_layout === \'Row\',\n        fcol: item.primary.multiple_images_layout === \'Column\',\n        \'align-right\': item.primary.horizontal_alignment === \'Right\',\n        \'align-center\': item.primary.horizontal_alignment === \'Center\',\n        \'align-left\': item.primary.horizontal_alignment === \'Left\',\n        \'small\': item.primary.size === \'Small\',\n        \'medium\': item.primary.size === \'Medium\',\n        \'native-width\': item.primary.size === \'Native\',\n        \'full-width\': item.primary.size === \'Full width\',\n        \'page-width\': item.primary.size === \'Page width\'\n      }"><img ng-repeat="img in ::item.items" ng-src="{{img.image.url}}" alt="{{img.alt_text}}"></div></section><section ng-if="::item.slice_type === \'product___devices\'" id="{{::getSliceId(item)}}" class="screenblock headless"><div class="content"><limited-stock-handsets ng-if="subscriptionId && subscription" existing-subscription="subscription" add-to-current-subscription="::item.primary.add_device_to_current_subscription" product-slug="::item.primary.product.slug" sort-by="::item.primary.sort_by" show-cross-sell="::item.primary.show_cross_sell_link" cross-sell-link-target="::(item.primary.cross_sell_link_target) || uid" sort-order="::item.primary.sort_order" sold-out-text="::item.primary.sold_out_text"></limited-stock-handsets><limited-stock-handsets ng-if="!subscriptionId || !subscription" add-to-current-subscription="false" product-slug="::item.primary.product.slug" sort-by="::item.primary.sort_by" show-cross-sell="::item.primary.show_cross_sell_link" cross-sell-link-target="::(item.primary.cross_sell_link_target) || uid" sort-order="::item.primary.sort_order" sold-out-text="::item.primary.sold_out_text"></limited-stock-handsets></div></section><section ng-if="::item.slice_type === \'cta_button\'" class="screenblock" id="{{::getSliceId(item)}}" ng-class="::{\n        smoke: item.primary.background_color === \'Gray\',\n        petrol: item.primary.background_color === \'Primary\',\n        shrinked: item.primary.spacing === \'No spacing\',\n        bottomless: item.primary.spacing === \'Bottomless\',\n        headless: item.primary.spacing === \'Headless\',\n      }"><div class="content" ng-class="::[item.primary.alignment]"><a c-route="{{subIdInUrl(item.primary.button_link)}}" class="button big" ng-class="::[item.primary.color.toLowerCase()]"><i ng-if="::item.primary.icon" icon="{{\'fontawesome/\'+item.primary.icon}}" class="icon-inline" ng-class="[\'fill-\' +item.primary.icon_color.toLowerCase()]"></i>{{::item.primary.button_text}}</a></div></section><a ng-if="::item.slice_type === \'fixed_squircle\'" class="squircle-slice" c-route="{{::item.primary.link}}"><div class="squircle fixed {{item.primary.color.toLowerCase()}}"><div><span bind-html-compile="::item.primary.text"></span> <span bind-html-compile="::item.primary.secondary_text"></span></div></div></a></div></div>');
$templateCache.put('/pages/for-you.html','<div ng-if="offerKey && offerKey != \'homeBanner\'"><div offer-hero type="{{offerKey}}" class="half-height" half-height="true"></div></div><div ng-if="offerKey == \'homeBanner\'"><div offer-hero type="mainOffer" class="half-height" half-height="true"></div></div><section class="screenblock smoke" id="products" ng-if="showProducts"><div class="content"><h1 translate="{{pageTitleKey}}"></h1><p translate="{{pageDescriptionKey}}"></p><products invert-channel-filter="false" ignore-hidden-from-sheets="true" prod-data="promotionProducts" cancenter="true" link-extension="linkExtension" custom-display-order="\'customOrderValue\'" test-new-product-item="newProductItem"></products><p class="legal" translate="{{pageLegalKey}}"></p></div></section><div ng-if="contest"><section class="screenblock smoke headless"><div class="content contest-content"></div></section></div><section class="screenblock" ng-if="faqCategory"><div class="content"><topic-by-tag-toggled tag="faqCategory"></topic-by-tag-toggled></div></section>');}]);angular.bootstrap(document, ['app']);}
// Checking if we need polyfills
if (browserSupportsAllFeatures()) loadYolMain();
else {
  // load polyfills for browsers that are not chrome
  var js = document.createElement('script');
  js.src = '/scripts/polyfill.min.12c5bcde52.js';
  js.onload = loadYolMain;
  document.head.appendChild(js);
}